(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function xb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $p={exports:{}},Cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function f4(){if(m_)return Cc;m_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Cc.Fragment=e,Cc.jsx=t,Cc.jsxs=t,Cc}var g_;function d4(){return g_||(g_=1,$p.exports=f4()),$p.exports}var m=d4(),Yp={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function h4(){if(v_)return ze;v_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=g&&q[g]||q["@@iterator"],typeof q=="function"?q:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function S(q,ue,me){this.props=q,this.context=ue,this.refs=A,this.updater=me||_}S.prototype.isReactComponent={},S.prototype.setState=function(q,ue){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ue,"setState")},S.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function I(){}I.prototype=S.prototype;function N(q,ue,me){this.props=q,this.context=ue,this.refs=A,this.updater=me||_}var P=N.prototype=new I;P.constructor=N,E(P,S.prototype),P.isPureReactComponent=!0;var V=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function D(q,ue,me,de,ae,he){return me=he.ref,{$$typeof:n,type:q,key:ue,ref:me!==void 0?me:null,props:he}}function R(q,ue){return D(q.type,ue,void 0,void 0,void 0,q.props)}function M(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function L(q){var ue={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(me){return ue[me]})}var H=/\/+/g;function G(q,ue){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):ue.toString(36)}function U(){}function Ie(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(ue){q.status==="pending"&&(q.status="fulfilled",q.value=ue)},function(ue){q.status==="pending"&&(q.status="rejected",q.reason=ue)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Be(q,ue,me,de,ae){var he=typeof q;(he==="undefined"||he==="boolean")&&(q=null);var ye=!1;if(q===null)ye=!0;else switch(he){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(q.$$typeof){case n:case e:ye=!0;break;case p:return ye=q._init,Be(ye(q._payload),ue,me,de,ae)}}if(ye)return ae=ae(q),ye=de===""?"."+G(q,0):de,V(ae)?(me="",ye!=null&&(me=ye.replace(H,"$&/")+"/"),Be(ae,ue,me,"",function(Ge){return Ge})):ae!=null&&(M(ae)&&(ae=R(ae,me+(ae.key==null||q&&q.key===ae.key?"":(""+ae.key).replace(H,"$&/")+"/")+ye)),ue.push(ae)),1;ye=0;var be=de===""?".":de+":";if(V(q))for(var Ne=0;Ne<q.length;Ne++)de=q[Ne],he=be+G(de,Ne),ye+=Be(de,ue,me,he,ae);else if(Ne=x(q),typeof Ne=="function")for(q=Ne.call(q),Ne=0;!(de=q.next()).done;)de=de.value,he=be+G(de,Ne++),ye+=Be(de,ue,me,he,ae);else if(he==="object"){if(typeof q.then=="function")return Be(Ie(q),ue,me,de,ae);throw ue=String(q),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return ye}function te(q,ue,me){if(q==null)return q;var de=[],ae=0;return Be(q,de,"","",function(he){return ue.call(me,he,ae++)}),de}function ne(q){if(q._status===-1){var ue=q._result;ue=ue(),ue.then(function(me){(q._status===0||q._status===-1)&&(q._status=1,q._result=me)},function(me){(q._status===0||q._status===-1)&&(q._status=2,q._result=me)}),q._status===-1&&(q._status=0,q._result=ue)}if(q._status===1)return q._result.default;throw q._result}var ve=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function Ee(){}return ze.Children={map:te,forEach:function(q,ue,me){te(q,function(){ue.apply(this,arguments)},me)},count:function(q){var ue=0;return te(q,function(){ue++}),ue},toArray:function(q){return te(q,function(ue){return ue})||[]},only:function(q){if(!M(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ze.Component=S,ze.Fragment=t,ze.Profiler=i,ze.PureComponent=N,ze.StrictMode=r,ze.Suspense=c,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,ze.__COMPILER_RUNTIME={__proto__:null,c:function(q){return F.H.useMemoCache(q)}},ze.cache=function(q){return function(){return q.apply(null,arguments)}},ze.cloneElement=function(q,ue,me){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var de=E({},q.props),ae=q.key,he=void 0;if(ue!=null)for(ye in ue.ref!==void 0&&(he=void 0),ue.key!==void 0&&(ae=""+ue.key),ue)!W.call(ue,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ue.ref===void 0||(de[ye]=ue[ye]);var ye=arguments.length-2;if(ye===1)de.children=me;else if(1<ye){for(var be=Array(ye),Ne=0;Ne<ye;Ne++)be[Ne]=arguments[Ne+2];de.children=be}return D(q.type,ae,void 0,void 0,he,de)},ze.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},ze.createElement=function(q,ue,me){var de,ae={},he=null;if(ue!=null)for(de in ue.key!==void 0&&(he=""+ue.key),ue)W.call(ue,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ae[de]=ue[de]);var ye=arguments.length-2;if(ye===1)ae.children=me;else if(1<ye){for(var be=Array(ye),Ne=0;Ne<ye;Ne++)be[Ne]=arguments[Ne+2];ae.children=be}if(q&&q.defaultProps)for(de in ye=q.defaultProps,ye)ae[de]===void 0&&(ae[de]=ye[de]);return D(q,he,void 0,void 0,null,ae)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(q){return{$$typeof:u,render:q}},ze.isValidElement=M,ze.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:ne}},ze.memo=function(q,ue){return{$$typeof:d,type:q,compare:ue===void 0?null:ue}},ze.startTransition=function(q){var ue=F.T,me={};F.T=me;try{var de=q(),ae=F.S;ae!==null&&ae(me,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Ee,ve)}catch(he){ve(he)}finally{F.T=ue}},ze.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},ze.use=function(q){return F.H.use(q)},ze.useActionState=function(q,ue,me){return F.H.useActionState(q,ue,me)},ze.useCallback=function(q,ue){return F.H.useCallback(q,ue)},ze.useContext=function(q){return F.H.useContext(q)},ze.useDebugValue=function(){},ze.useDeferredValue=function(q,ue){return F.H.useDeferredValue(q,ue)},ze.useEffect=function(q,ue,me){var de=F.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(q,ue)},ze.useId=function(){return F.H.useId()},ze.useImperativeHandle=function(q,ue,me){return F.H.useImperativeHandle(q,ue,me)},ze.useInsertionEffect=function(q,ue){return F.H.useInsertionEffect(q,ue)},ze.useLayoutEffect=function(q,ue){return F.H.useLayoutEffect(q,ue)},ze.useMemo=function(q,ue){return F.H.useMemo(q,ue)},ze.useOptimistic=function(q,ue){return F.H.useOptimistic(q,ue)},ze.useReducer=function(q,ue,me){return F.H.useReducer(q,ue,me)},ze.useRef=function(q){return F.H.useRef(q)},ze.useState=function(q){return F.H.useState(q)},ze.useSyncExternalStore=function(q,ue,me){return F.H.useSyncExternalStore(q,ue,me)},ze.useTransition=function(){return F.H.useTransition()},ze.version="19.1.0",ze}var y_;function vf(){return y_||(y_=1,Yp.exports=h4()),Yp.exports}var B=vf();const jg=xb(B);var Kp={exports:{}},Ic={},Qp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function p4(){return x_||(x_=1,function(n){function e(te,ne){var ve=te.length;te.push(ne);e:for(;0<ve;){var Ee=ve-1>>>1,q=te[Ee];if(0<i(q,ne))te[Ee]=ne,te[ve]=q,ve=Ee;else break e}}function t(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ne=te[0],ve=te.pop();if(ve!==ne){te[0]=ve;e:for(var Ee=0,q=te.length,ue=q>>>1;Ee<ue;){var me=2*(Ee+1)-1,de=te[me],ae=me+1,he=te[ae];if(0>i(de,ve))ae<q&&0>i(he,de)?(te[Ee]=he,te[ae]=ve,Ee=ae):(te[Ee]=de,te[me]=ve,Ee=me);else if(ae<q&&0>i(he,ve))te[Ee]=he,te[ae]=ve,Ee=ae;else break e}}return ne}function i(te,ne){var ve=te.sortIndex-ne.sortIndex;return ve!==0?ve:te.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var c=[],d=[],p=1,g=null,x=3,_=!1,E=!1,A=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function V(te){for(var ne=t(d);ne!==null;){if(ne.callback===null)r(d);else if(ne.startTime<=te)r(d),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=t(d)}}function F(te){if(A=!1,V(te),!E)if(t(c)!==null)E=!0,W||(W=!0,G());else{var ne=t(d);ne!==null&&Be(F,ne.startTime-te)}}var W=!1,D=-1,R=5,M=-1;function L(){return S?!0:!(n.unstable_now()-M<R)}function H(){if(S=!1,W){var te=n.unstable_now();M=te;var ne=!0;try{e:{E=!1,A&&(A=!1,N(D),D=-1),_=!0;var ve=x;try{t:{for(V(te),g=t(c);g!==null&&!(g.expirationTime>te&&L());){var Ee=g.callback;if(typeof Ee=="function"){g.callback=null,x=g.priorityLevel;var q=Ee(g.expirationTime<=te);if(te=n.unstable_now(),typeof q=="function"){g.callback=q,V(te),ne=!0;break t}g===t(c)&&r(c),V(te)}else r(c);g=t(c)}if(g!==null)ne=!0;else{var ue=t(d);ue!==null&&Be(F,ue.startTime-te),ne=!1}}break e}finally{g=null,x=ve,_=!1}ne=void 0}}finally{ne?G():W=!1}}}var G;if(typeof P=="function")G=function(){P(H)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Ie=U.port2;U.port1.onmessage=H,G=function(){Ie.postMessage(null)}}else G=function(){I(H,0)};function Be(te,ne){D=I(function(){te(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(te){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var ve=x;x=ne;try{return te()}finally{x=ve}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(te,ne){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ve=x;x=te;try{return ne()}finally{x=ve}},n.unstable_scheduleCallback=function(te,ne,ve){var Ee=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ee+ve:Ee):ve=Ee,te){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ve+q,te={id:p++,callback:ne,priorityLevel:te,startTime:ve,expirationTime:q,sortIndex:-1},ve>Ee?(te.sortIndex=ve,e(d,te),t(c)===null&&te===t(d)&&(A?(N(D),D=-1):A=!0,Be(F,ve-Ee))):(te.sortIndex=q,e(c,te),E||_||(E=!0,W||(W=!0,G()))),te},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(te){var ne=x;return function(){var ve=x;x=ne;try{return te.apply(this,arguments)}finally{x=ve}}}}(Zp)),Zp}var __;function m4(){return __||(__=1,Qp.exports=p4()),Qp.exports}var Jp={exports:{}},tr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function g4(){if(w_)return tr;w_=1;var n=vf();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:d,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return tr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tr.createPortal=function(c,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(c,d,null,p)},tr.flushSync=function(c){var d=o.T,p=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=d,r.p=p,r.d.f()}},tr.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},tr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},tr.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:_}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:x,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},tr.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},tr.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},tr.preloadModule=function(c,d){if(typeof c=="string")if(d){var p=u(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},tr.requestFormReset=function(c){r.d.r(c)},tr.unstable_batchedUpdates=function(c,d){return c(d)},tr.useFormState=function(c,d,p){return o.H.useFormState(c,d,p)},tr.useFormStatus=function(){return o.H.useHostTransitionStatus()},tr.version="19.1.0",tr}var E_;function v4(){if(E_)return Jp.exports;E_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jp.exports=g4(),Jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function y4(){if(b_)return Ic;b_=1;var n=m4(),e=vf(),t=v4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function c(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,h=l;;){var y=f.return;if(y===null)break;var w=y.alternate;if(w===null){if(h=y.return,h!==null){f=h;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===f)return u(y),s;if(w===h)return u(y),l;w=w.sibling}throw Error(r(188))}if(f.return!==h.return)f=y,h=w;else{for(var C=!1,O=y.child;O;){if(O===f){C=!0,f=y,h=w;break}if(O===h){C=!0,h=y,f=w;break}O=O.sibling}if(!C){for(O=w.child;O;){if(O===f){C=!0,f=w,h=y;break}if(O===h){C=!0,h=w,f=y;break}O=O.sibling}if(!C)throw Error(r(189))}}if(f.alternate!==h)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function d(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=d(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),P=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var U=Symbol.for("react.client.reference");function Ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===U?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case F:return"Suspense";case W:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case P:return(s.displayName||"Context")+".Provider";case N:return(s._context.displayName||"Context")+".Consumer";case V:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return l=s.displayName||null,l!==null?l:Ie(s.type)||"Memo";case R:l=s._payload,s=s._init;try{return Ie(s(l))}catch{}}return null}var Be=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ee=[],q=-1;function ue(s){return{current:s}}function me(s){0>q||(s.current=Ee[q],Ee[q]=null,q--)}function de(s,l){q++,Ee[q]=s.current,s.current=l}var ae=ue(null),he=ue(null),ye=ue(null),be=ue(null);function Ne(s,l){switch(de(ye,l),de(he,s),de(ae,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?z2(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=z2(l),s=G2(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}me(ae),de(ae,s)}function Ge(){me(ae),me(he),me(ye)}function Wt(s){s.memoizedState!==null&&de(be,s);var l=ae.current,f=G2(l,s.type);l!==f&&(de(he,s),de(ae,f))}function yr(s){he.current===s&&(me(ae),me(he)),be.current===s&&(me(be),Ec._currentValue=ve)}var ur=Object.prototype.hasOwnProperty,$t=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,Vs=n.unstable_shouldYield,Yi=n.unstable_requestPaint,_r=n.unstable_now,wu=n.unstable_getCurrentPriorityLevel,Us=n.unstable_ImmediatePriority,Ki=n.unstable_UserBlockingPriority,Ce=n.unstable_NormalPriority,et=n.unstable_LowPriority,Ut=n.unstable_IdlePriority,Fn=n.log,_i=n.unstable_setDisableYieldValue,ut=null,dt=null;function Jn(s){if(typeof Fn=="function"&&_i(s),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(ut,s)}catch{}}var mn=Math.clz32?Math.clz32:Qi,Ho=Math.log,Fs=Math.LN2;function Qi(s){return s>>>=0,s===0?32:31-(Ho(s)/Fs|0)|0}var Hs=256,zs=4194304;function ii(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function zo(s,l,f){var h=s.pendingLanes;if(h===0)return 0;var y=0,w=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var O=h&134217727;return O!==0?(h=O&~w,h!==0?y=ii(h):(C&=O,C!==0?y=ii(C):f||(f=O&~s,f!==0&&(y=ii(f))))):(O=h&~w,O!==0?y=ii(O):C!==0?y=ii(C):f||(f=h&~s,f!==0&&(y=ii(f)))),y===0?0:l!==0&&l!==y&&(l&w)===0&&(w=y&-y,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:y}function Gs(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Eu(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bu(){var s=Hs;return Hs<<=1,(Hs&4194048)===0&&(Hs=256),s}function Au(){var s=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),s}function Zi(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function Ji(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Su(s,l,f,h,y,w){var C=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var O=s.entanglements,z=s.expirationTimes,Q=s.hiddenUpdates;for(f=C&~f;0<f;){var oe=31-mn(f),ce=1<<oe;O[oe]=0,z[oe]=-1;var J=Q[oe];if(J!==null)for(Q[oe]=null,oe=0;oe<J.length;oe++){var ee=J[oe];ee!==null&&(ee.lane&=-536870913)}f&=~ce}h!==0&&wi(s,h,0),w!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=w&~(C&~l))}function wi(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var h=31-mn(l);s.entangledLanes|=l,s.entanglements[h]=s.entanglements[h]|1073741824|f&4194090}function Tu(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var h=31-mn(f),y=1<<h;y&l|s[h]&l&&(s[h]|=l),f&=~y}}function Ga(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Go(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function qa(){var s=ne.p;return s!==0?s:(s=window.event,s===void 0?32:u_(s.type))}function jf(s,l){var f=ne.p;try{return ne.p=s,l()}finally{ne.p=f}}var Lt=Math.random().toString(36).slice(2),gn="__reactFiber$"+Lt,on="__reactProps$"+Lt,Vr="__reactContainer$"+Lt,Cu="__reactEvents$"+Lt,Q0="__reactListeners$"+Lt,Xa="__reactHandles$"+Lt,Bf="__reactResources$"+Lt,qs="__reactMarker$"+Lt;function Wa(s){delete s[gn],delete s[on],delete s[Cu],delete s[Q0],delete s[Xa]}function ea(s){var l=s[gn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Vr]||f[gn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=$2(s);s!==null;){if(f=s[gn])return f;s=$2(s)}return l}s=f,f=s.parentNode}return null}function Ei(s){if(s=s[gn]||s[Vr]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function bi(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function cr(s){var l=s[Bf];return l||(l=s[Bf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function en(s){s[qs]=!0}var Iu=new Set,qo={};function ai(s,l){ta(s,l),ta(s+"Capture",l)}function ta(s,l){for(qo[s]=l,s=0;s<l.length;s++)Iu.add(l[s])}var Vf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uf={},Xs={};function Ff(s){return ur.call(Xs,s)?!0:ur.call(Uf,s)?!1:Vf.test(s)?Xs[s]=!0:(Uf[s]=!0,!1)}function $a(s,l,f){if(Ff(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Ai(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function Hn(s,l,f,h){if(h===null)s.removeAttribute(f);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+h)}}var Ws,Hf;function na(s){if(Ws===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ws=l&&l[1]||"",Hf=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ws+s+Hf}var Xo=!1;function Wo(s,l){if(!s||Xo)return"";Xo=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ee){var J=ee}Reflect.construct(s,[],ce)}else{try{ce.call()}catch(ee){J=ee}s.call(ce.prototype)}}else{try{throw Error()}catch(ee){J=ee}(ce=s())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),C=w[0],O=w[1];if(C&&O){var z=C.split(`
`),Q=O.split(`
`);for(y=h=0;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;for(;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;if(h===z.length||y===Q.length)for(h=z.length-1,y=Q.length-1;1<=h&&0<=y&&z[h]!==Q[y];)y--;for(;1<=h&&0<=y;h--,y--)if(z[h]!==Q[y]){if(h!==1||y!==1)do if(h--,y--,0>y||z[h]!==Q[y]){var oe=`
`+z[h].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=h&&0<=y);break}}}finally{Xo=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?na(f):""}function Nu(s){switch(s.tag){case 26:case 27:case 5:return na(s.type);case 16:return na("Lazy");case 13:return na("Suspense");case 19:return na("SuspenseList");case 0:case 15:return Wo(s.type,!1);case 11:return Wo(s.type.render,!1);case 1:return Wo(s.type,!0);case 31:return na("Activity");default:return""}}function $o(s){try{var l="";do l+=Nu(s),s=s.return;while(s);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function fr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ru(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Z0(s){var l=Ru(s)?"checked":"value",f=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),h=""+s[l];if(!s.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,w=f.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(C){h=""+C,w.call(this,C)}}),Object.defineProperty(s,l,{enumerable:f.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Yo(s){s._valueTracker||(s._valueTracker=Z0(s))}function Ou(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),h="";return s&&(h=Ru(s)?s.checked?"true":"false":s.value),s=h,s!==f?(l.setValue(s),!0):!1}function $s(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var J0=/[\n"\\]/g;function ln(s){return s.replace(J0,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Or(s,l,f,h,y,w,C,O){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),l!=null?C==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+fr(l)):s.value!==""+fr(l)&&(s.value=""+fr(l)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),l!=null?Ya(s,C,fr(l)):f!=null?Ya(s,C,fr(f)):h!=null&&s.removeAttribute("value"),y==null&&w!=null&&(s.defaultChecked=!!w),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+fr(O):s.removeAttribute("name")}function Ys(s,l,f,h,y,w,C,O){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;f=f!=null?""+fr(f):"",l=l!=null?""+fr(l):f,O||l===s.value||(s.value=l),s.defaultValue=l}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=O?s.checked:!!h,s.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function Ya(s,l,f){l==="number"&&$s(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function ra(s,l,f,h){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&h&&(s[f].defaultSelected=!0)}else{for(f=""+fr(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,h&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function bt(s,l,f){if(l!=null&&(l=""+fr(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+fr(f):""}function Ks(s,l,f,h){if(l==null){if(h!=null){if(f!=null)throw Error(r(92));if(Be(h)){if(1<h.length)throw Error(r(93));h=h[0]}f=h}f==null&&(f=""),l=f}f=fr(l),s.defaultValue=f,h=s.textContent,h===f&&h!==""&&h!==null&&(s.value=h)}function Ur(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zf(s,l,f){var h=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?h?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":h?s.setProperty(l,f):typeof f!="number"||f===0||Qs.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function Du(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var h in f)!f.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var y in l)h=l[y],l.hasOwnProperty(y)&&f[y]!==h&&zf(s,y,h)}else for(var w in l)l.hasOwnProperty(w)&&zf(s,w,l[w])}function Pu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),t1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(s){return t1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var ia=null;function Fr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var aa=null,sa=null;function Mu(s){var l=Ei(s);if(l&&(s=l.stateNode)){var f=s[on]||null;e:switch(s=l.stateNode,l.type){case"input":if(Or(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ln(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var h=f[l];if(h!==s&&h.form===s.form){var y=h[on]||null;if(!y)throw Error(r(90));Or(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)h=f[l],h.form===s.form&&Ou(h)}break e;case"textarea":bt(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&ra(s,!!f.multiple,l,!1)}}}var Si=!1;function Gf(s,l,f){if(Si)return s(l,f);Si=!0;try{var h=s(l);return h}finally{if(Si=!1,(aa!==null||sa!==null)&&(jd(),aa&&(l=aa,s=sa,sa=aa=null,Mu(l),s)))for(l=0;l<s.length;l++)Mu(s[l])}}function Zs(s,l){var f=s.stateNode;if(f===null)return null;var h=f[on]||null;if(h===null)return null;f=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hr=!1;if(si)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Hr=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Hr=!1}var Ti=null,Ka=null,oa=null;function ku(){if(oa)return oa;var s,l=Ka,f=l.length,h,y="value"in Ti?Ti.value:Ti.textContent,w=y.length;for(s=0;s<f&&l[s]===y[s];s++);var C=f-s;for(h=1;h<=C&&l[f-h]===y[w-h];h++);return oa=y.slice(s,1<h?1-h:void 0)}function Ci(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ii(){return!0}function Lu(){return!1}function Rn(s){function l(f,h,y,w,C){this._reactName=f,this._targetInst=y,this.type=h,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(f=s[O],this[O]=f?f(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ii:Lu,this.isPropagationStopped=Lu,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),l}var gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=Rn(gt),eo=p({},gt,{view:0,detail:0}),qf=Rn(eo),Zo,Jo,Ni,to=p({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ni&&(Ni&&s.type==="mousemove"?(Zo=s.screenX-Ni.screenX,Jo=s.screenY-Ni.screenY):Jo=Zo=0,Ni=s),Zo)},movementY:function(s){return"movementY"in s?s.movementY:Jo}}),zr=Rn(to),Xf=p({},to,{dataTransfer:0}),n1=Rn(Xf),no=p({},eo,{relatedTarget:0}),el=Rn(no),ju=p({},gt,{animationName:0,elapsedTime:0,pseudoElement:0}),tl=Rn(ju),Wf=p({},gt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),nl=Rn(Wf),r1=p({},gt,{data:0}),Bu=Rn(r1),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$f={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Yf[s])?!!l[s]:!1}function io(){return Vu}var Kf=p({},eo,{key:function(s){if(s.key){var l=ro[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ci(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$f[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(s){return s.type==="keypress"?Ci(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ci(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),rl=Rn(Kf),Qf=p({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=Rn(Qf),la=p({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),Zf=Rn(la),Jf=p({},gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ed=Rn(Jf),td=p({},to,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),il=Rn(td),dr=p({},gt,{newState:0,oldState:0}),nd=Rn(dr),rd=[9,13,27,32],Ri=si&&"CompositionEvent"in window,v=null;si&&"documentMode"in document&&(v=document.documentMode);var b=si&&"TextEvent"in window&&!v,T=si&&(!Ri||v&&8<v&&11>=v),k=" ",Y=!1;function re(s,l){switch(s){case"keyup":return rd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xe(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var tt=!1;function vn(s,l){switch(s){case"compositionend":return xe(l);case"keypress":return l.which!==32?null:(Y=!0,k);case"textInput":return s=l.data,s===k&&Y?null:s;default:return null}}function nt(s,l){if(tt)return s==="compositionend"||!Ri&&re(s,l)?(s=ku(),oa=Ka=Ti=null,tt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return T&&l.locale!=="ko"?null:l.data;default:return null}}var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yn(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!On[s.type]:l==="textarea"}function ua(s,l,f,h){aa?sa?sa.push(h):sa=[h]:aa=h,l=zd(l,"onChange"),0<l.length&&(f=new Qo("onChange","change",null,f,h),s.push({event:f,listeners:l}))}var zn=null,Oi=null;function Fu(s){B2(s,0)}function id(s){var l=bi(s);if(Ou(l))return s}function ay(s,l){if(s==="change")return l}var sy=!1;if(si){var i1;if(si){var a1="oninput"in document;if(!a1){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),a1=typeof oy.oninput=="function"}i1=a1}else i1=!1;sy=i1&&(!document.documentMode||9<document.documentMode)}function ly(){zn&&(zn.detachEvent("onpropertychange",uy),Oi=zn=null)}function uy(s){if(s.propertyName==="value"&&id(Oi)){var l=[];ua(l,Oi,s,Fr(s)),Gf(Fu,l)}}function FC(s,l,f){s==="focusin"?(ly(),zn=l,Oi=f,zn.attachEvent("onpropertychange",uy)):s==="focusout"&&ly()}function HC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return id(Oi)}function zC(s,l){if(s==="click")return id(l)}function GC(s,l){if(s==="input"||s==="change")return id(l)}function qC(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Dr=typeof Object.is=="function"?Object.is:qC;function Hu(s,l){if(Dr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),h=Object.keys(l);if(f.length!==h.length)return!1;for(h=0;h<f.length;h++){var y=f[h];if(!ur.call(l,y)||!Dr(s[y],l[y]))return!1}return!0}function cy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function fy(s,l){var f=cy(s);s=0;for(var h;f;){if(f.nodeType===3){if(h=s+f.textContent.length,s<=l&&h>=l)return{node:f,offset:l-s};s=h}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=cy(f)}}function dy(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?dy(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function hy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=$s(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=$s(s.document)}return l}function s1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var XC=si&&"documentMode"in document&&11>=document.documentMode,al=null,o1=null,zu=null,l1=!1;function py(s,l,f){var h=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;l1||al==null||al!==$s(h)||(h=al,"selectionStart"in h&&s1(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),zu&&Hu(zu,h)||(zu=h,h=zd(o1,"onSelect"),0<h.length&&(l=new Qo("onSelect","select",null,l,f),s.push({event:l,listeners:h}),l.target=al)))}function ao(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var sl={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},u1={},my={};si&&(my=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function so(s){if(u1[s])return u1[s];if(!sl[s])return s;var l=sl[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in my)return u1[s]=l[f];return s}var gy=so("animationend"),vy=so("animationiteration"),yy=so("animationstart"),WC=so("transitionrun"),$C=so("transitionstart"),YC=so("transitioncancel"),xy=so("transitionend"),_y=new Map,c1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");c1.push("scrollEnd");function oi(s,l){_y.set(s,l),ai(l,[s])}var wy=new WeakMap;function Gr(s,l){if(typeof s=="object"&&s!==null){var f=wy.get(s);return f!==void 0?f:(l={value:s,source:l,stack:$o(l)},wy.set(s,l),l)}return{value:s,source:l,stack:$o(l)}}var qr=[],ol=0,f1=0;function ad(){for(var s=ol,l=f1=ol=0;l<s;){var f=qr[l];qr[l++]=null;var h=qr[l];qr[l++]=null;var y=qr[l];qr[l++]=null;var w=qr[l];if(qr[l++]=null,h!==null&&y!==null){var C=h.pending;C===null?y.next=y:(y.next=C.next,C.next=y),h.pending=y}w!==0&&Ey(f,y,w)}}function sd(s,l,f,h){qr[ol++]=s,qr[ol++]=l,qr[ol++]=f,qr[ol++]=h,f1|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function d1(s,l,f,h){return sd(s,l,f,h),od(s)}function ll(s,l){return sd(s,null,null,l),od(s)}function Ey(s,l,f){s.lanes|=f;var h=s.alternate;h!==null&&(h.lanes|=f);for(var y=!1,w=s.return;w!==null;)w.childLanes|=f,h=w.alternate,h!==null&&(h.childLanes|=f),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(y=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,y&&l!==null&&(y=31-mn(f),s=w.hiddenUpdates,h=s[y],h===null?s[y]=[l]:h.push(l),l.lane=f|536870912),w):null}function od(s){if(50<pc)throw pc=0,yp=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var ul={};function KC(s,l,f,h){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(s,l,f,h){return new KC(s,l,f,h)}function h1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ca(s,l){var f=s.alternate;return f===null?(f=Pr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function by(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function ld(s,l,f,h,y,w){var C=0;if(h=s,typeof s=="function")h1(s)&&(C=1);else if(typeof s=="string")C=Z3(s,f,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=Pr(31,f,l,y),s.elementType=M,s.lanes=w,s;case E:return oo(f.children,y,w,l);case A:C=8,y|=24;break;case S:return s=Pr(12,f,l,y|2),s.elementType=S,s.lanes=w,s;case F:return s=Pr(13,f,l,y),s.elementType=F,s.lanes=w,s;case W:return s=Pr(19,f,l,y),s.elementType=W,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case P:C=10;break e;case N:C=9;break e;case V:C=11;break e;case D:C=14;break e;case R:C=16,h=null;break e}C=29,f=Error(r(130,s===null?"null":typeof s,"")),h=null}return l=Pr(C,f,l,y),l.elementType=s,l.type=h,l.lanes=w,l}function oo(s,l,f,h){return s=Pr(7,s,h,l),s.lanes=f,s}function p1(s,l,f){return s=Pr(6,s,null,l),s.lanes=f,s}function m1(s,l,f){return l=Pr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var cl=[],fl=0,ud=null,cd=0,Xr=[],Wr=0,lo=null,fa=1,da="";function uo(s,l){cl[fl++]=cd,cl[fl++]=ud,ud=s,cd=l}function Ay(s,l,f){Xr[Wr++]=fa,Xr[Wr++]=da,Xr[Wr++]=lo,lo=s;var h=fa;s=da;var y=32-mn(h)-1;h&=~(1<<y),f+=1;var w=32-mn(l)+y;if(30<w){var C=y-y%5;w=(h&(1<<C)-1).toString(32),h>>=C,y-=C,fa=1<<32-mn(l)+y|f<<y|h,da=w+s}else fa=1<<w|f<<y|h,da=s}function g1(s){s.return!==null&&(uo(s,1),Ay(s,1,0))}function v1(s){for(;s===ud;)ud=cl[--fl],cl[fl]=null,cd=cl[--fl],cl[fl]=null;for(;s===lo;)lo=Xr[--Wr],Xr[Wr]=null,da=Xr[--Wr],Xr[Wr]=null,fa=Xr[--Wr],Xr[Wr]=null}var hr=null,Yt=null,ht=!1,co=null,Di=!1,y1=Error(r(519));function fo(s){var l=Error(r(418,""));throw Xu(Gr(l,s)),y1}function Sy(s){var l=s.stateNode,f=s.type,h=s.memoizedProps;switch(l[gn]=s,l[on]=h,f){case"dialog":Qe("cancel",l),Qe("close",l);break;case"iframe":case"object":case"embed":Qe("load",l);break;case"video":case"audio":for(f=0;f<gc.length;f++)Qe(gc[f],l);break;case"source":Qe("error",l);break;case"img":case"image":case"link":Qe("error",l),Qe("load",l);break;case"details":Qe("toggle",l);break;case"input":Qe("invalid",l),Ys(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Yo(l);break;case"select":Qe("invalid",l);break;case"textarea":Qe("invalid",l),Ks(l,h.value,h.defaultValue,h.children),Yo(l)}f=h.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||h.suppressHydrationWarning===!0||H2(l.textContent,f)?(h.popover!=null&&(Qe("beforetoggle",l),Qe("toggle",l)),h.onScroll!=null&&Qe("scroll",l),h.onScrollEnd!=null&&Qe("scrollend",l),h.onClick!=null&&(l.onclick=Gd),l=!0):l=!1,l||fo(s)}function Ty(s){for(hr=s.return;hr;)switch(hr.tag){case 5:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:hr=hr.return}}function Gu(s){if(s!==hr)return!1;if(!ht)return Ty(s),ht=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||Mp(s.type,s.memoizedProps)),f=!f),f&&Yt&&fo(s),Ty(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(f=s.data,f==="/$"){if(l===0){Yt=ui(s.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;s=s.nextSibling}Yt=null}}else l===27?(l=Yt,ds(s.type)?(s=Bp,Bp=null,Yt=s):Yt=l):Yt=hr?ui(s.stateNode.nextSibling):null;return!0}function qu(){Yt=hr=null,ht=!1}function Cy(){var s=co;return s!==null&&(br===null?br=s:br.push.apply(br,s),co=null),s}function Xu(s){co===null?co=[s]:co.push(s)}var x1=ue(null),ho=null,ha=null;function Qa(s,l,f){de(x1,l._currentValue),l._currentValue=f}function pa(s){s._currentValue=x1.current,me(x1)}function _1(s,l,f){for(;s!==null;){var h=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),s===f)break;s=s.return}}function w1(s,l,f,h){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var w=y.dependencies;if(w!==null){var C=y.child;w=w.firstContext;e:for(;w!==null;){var O=w;w=y;for(var z=0;z<l.length;z++)if(O.context===l[z]){w.lanes|=f,O=w.alternate,O!==null&&(O.lanes|=f),_1(w.return,f,s),h||(C=null);break e}w=O.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=f,w=C.alternate,w!==null&&(w.lanes|=f),_1(C,f,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Wu(s,l,f,h){s=null;for(var y=l,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var O=y.type;Dr(y.pendingProps.value,C.value)||(s!==null?s.push(O):s=[O])}}else if(y===be.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Ec):s=[Ec])}y=y.return}s!==null&&w1(l,s,f,h),l.flags|=262144}function fd(s){for(s=s.firstContext;s!==null;){if(!Dr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function po(s){ho=s,ha=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function er(s){return Iy(ho,s)}function dd(s,l){return ho===null&&po(s),Iy(s,l)}function Iy(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ha===null){if(s===null)throw Error(r(308));ha=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ha=ha.next=l;return f}var QC=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,h){s.push(h)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},ZC=n.unstable_scheduleCallback,JC=n.unstable_NormalPriority,xn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E1(){return{controller:new QC,data:new Map,refCount:0}}function $u(s){s.refCount--,s.refCount===0&&ZC(JC,function(){s.controller.abort()})}var Yu=null,b1=0,dl=0,hl=null;function e3(s,l){if(Yu===null){var f=Yu=[];b1=0,dl=Sp(),hl={status:"pending",value:void 0,then:function(h){f.push(h)}}}return b1++,l.then(Ny,Ny),l}function Ny(){if(--b1===0&&Yu!==null){hl!==null&&(hl.status="fulfilled");var s=Yu;Yu=null,dl=0,hl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function t3(s,l){var f=[],h={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){h.status="fulfilled",h.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(h.status="rejected",h.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),h}var Ry=te.S;te.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&e3(s,l),Ry!==null&&Ry(s,l)};var mo=ue(null);function A1(){var s=mo.current;return s!==null?s:Nt.pooledCache}function hd(s,l){l===null?de(mo,mo.current):de(mo,l.pool)}function Oy(){var s=A1();return s===null?null:{parent:xn._currentValue,pool:s}}var Ku=Error(r(460)),Dy=Error(r(474)),pd=Error(r(542)),S1={then:function(){}};function Py(s){return s=s.status,s==="fulfilled"||s==="rejected"}function md(){}function My(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(md,md),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Ly(s),s;default:if(typeof l.status=="string")l.then(md,md);else{if(s=Nt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(h){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=h}},function(h){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Ly(s),s}throw Qu=l,Ku}}var Qu=null;function ky(){if(Qu===null)throw Error(r(459));var s=Qu;return Qu=null,s}function Ly(s){if(s===Ku||s===pd)throw Error(r(483))}var Za=!1;function T1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function C1(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ja(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function es(s,l,f){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(xt&2)!==0){var y=h.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),h.pending=l,l=od(s),Ey(s,null,f),l}return sd(s,h,l,f),od(s)}function Zu(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Tu(s,f)}}function I1(s,l){var f=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,f===h)){var y=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var C={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?y=w=C:w=w.next=C,f=f.next}while(f!==null);w===null?y=w=l:w=w.next=l}else y=w=l;f={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var N1=!1;function Ju(){if(N1){var s=hl;if(s!==null)throw s}}function ec(s,l,f,h){N1=!1;var y=s.updateQueue;Za=!1;var w=y.firstBaseUpdate,C=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var z=O,Q=z.next;z.next=null,C===null?w=Q:C.next=Q,C=z;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,O=oe.lastBaseUpdate,O!==C&&(O===null?oe.firstBaseUpdate=Q:O.next=Q,oe.lastBaseUpdate=z))}if(w!==null){var ce=y.baseState;C=0,oe=Q=z=null,O=w;do{var J=O.lane&-536870913,ee=J!==O.lane;if(ee?(rt&J)===J:(h&J)===J){J!==0&&J===dl&&(N1=!0),oe!==null&&(oe=oe.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Le=s,De=O;J=l;var Tt=f;switch(De.tag){case 1:if(Le=De.payload,typeof Le=="function"){ce=Le.call(Tt,ce,J);break e}ce=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=De.payload,J=typeof Le=="function"?Le.call(Tt,ce,J):Le,J==null)break e;ce=p({},ce,J);break e;case 2:Za=!0}}J=O.callback,J!==null&&(s.flags|=64,ee&&(s.flags|=8192),ee=y.callbacks,ee===null?y.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:O.tag,payload:O.payload,callback:O.callback,next:null},oe===null?(Q=oe=ee,z=ce):oe=oe.next=ee,C|=J;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;ee=O,O=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);oe===null&&(z=ce),y.baseState=z,y.firstBaseUpdate=Q,y.lastBaseUpdate=oe,w===null&&(y.shared.lanes=0),ls|=C,s.lanes=C,s.memoizedState=ce}}function jy(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function By(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)jy(f[s],l)}var pl=ue(null),gd=ue(0);function Vy(s,l){s=wa,de(gd,s),de(pl,l),wa=s|l.baseLanes}function R1(){de(gd,wa),de(pl,pl.current)}function O1(){wa=gd.current,me(pl),me(gd)}var ts=0,qe=null,At=null,un=null,vd=!1,ml=!1,go=!1,yd=0,tc=0,gl=null,n3=0;function tn(){throw Error(r(321))}function D1(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Dr(s[f],l[f]))return!1;return!0}function P1(s,l,f,h,y,w){return ts=w,qe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,te.H=s===null||s.memoizedState===null?Ex:bx,go=!1,w=f(h,y),go=!1,ml&&(w=Fy(l,f,h,y)),Uy(s),w}function Uy(s){te.H=Ad;var l=At!==null&&At.next!==null;if(ts=0,un=At=qe=null,vd=!1,tc=0,gl=null,l)throw Error(r(300));s===null||Dn||(s=s.dependencies,s!==null&&fd(s)&&(Dn=!0))}function Fy(s,l,f,h){qe=s;var y=0;do{if(ml&&(gl=null),tc=0,ml=!1,25<=y)throw Error(r(301));if(y+=1,un=At=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=u3,w=l(f,h)}while(ml);return w}function r3(){var s=te.H,l=s.useState()[0];return l=typeof l.then=="function"?nc(l):l,s=s.useState()[0],(At!==null?At.memoizedState:null)!==s&&(qe.flags|=1024),l}function M1(){var s=yd!==0;return yd=0,s}function k1(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function L1(s){if(vd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}vd=!1}ts=0,un=At=qe=null,ml=!1,tc=yd=0,gl=null}function wr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?qe.memoizedState=un=s:un=un.next=s,un}function cn(){if(At===null){var s=qe.alternate;s=s!==null?s.memoizedState:null}else s=At.next;var l=un===null?qe.memoizedState:un.next;if(l!==null)un=l,At=s;else{if(s===null)throw qe.alternate===null?Error(r(467)):Error(r(310));At=s,s={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},un===null?qe.memoizedState=un=s:un=un.next=s}return un}function j1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nc(s){var l=tc;return tc+=1,gl===null&&(gl=[]),s=My(gl,s,l),l=qe,(un===null?l.memoizedState:un.next)===null&&(l=l.alternate,te.H=l===null||l.memoizedState===null?Ex:bx),s}function xd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return nc(s);if(s.$$typeof===P)return er(s)}throw Error(r(438,String(s)))}function B1(s){var l=null,f=qe.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var h=qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=j1(),qe.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),h=0;h<s;h++)f[h]=L;return l.index++,f}function ma(s,l){return typeof l=="function"?l(s):l}function _d(s){var l=cn();return V1(l,At,s)}function V1(s,l,f){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=f;var y=s.baseQueue,w=h.pending;if(w!==null){if(y!==null){var C=y.next;y.next=w.next,w.next=C}l.baseQueue=y=w,h.pending=null}if(w=s.baseState,y===null)s.memoizedState=w;else{l=y.next;var O=C=null,z=null,Q=l,oe=!1;do{var ce=Q.lane&-536870913;if(ce!==Q.lane?(rt&ce)===ce:(ts&ce)===ce){var J=Q.revertLane;if(J===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ce===dl&&(oe=!0);else if((ts&J)===J){Q=Q.next,J===dl&&(oe=!0);continue}else ce={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(O=z=ce,C=w):z=z.next=ce,qe.lanes|=J,ls|=J;ce=Q.action,go&&f(w,ce),w=Q.hasEagerState?Q.eagerState:f(w,ce)}else J={lane:ce,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(O=z=J,C=w):z=z.next=J,qe.lanes|=ce,ls|=ce;Q=Q.next}while(Q!==null&&Q!==l);if(z===null?C=w:z.next=O,!Dr(w,s.memoizedState)&&(Dn=!0,oe&&(f=hl,f!==null)))throw f;s.memoizedState=w,s.baseState=C,s.baseQueue=z,h.lastRenderedState=w}return y===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function U1(s){var l=cn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var h=f.dispatch,y=f.pending,w=l.memoizedState;if(y!==null){f.pending=null;var C=y=y.next;do w=s(w,C.action),C=C.next;while(C!==y);Dr(w,l.memoizedState)||(Dn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,h]}function Hy(s,l,f){var h=qe,y=cn(),w=ht;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var C=!Dr((At||y).memoizedState,f);C&&(y.memoizedState=f,Dn=!0),y=y.queue;var O=qy.bind(null,h,y,s);if(rc(2048,8,O,[s]),y.getSnapshot!==l||C||un!==null&&un.memoizedState.tag&1){if(h.flags|=2048,vl(9,wd(),Gy.bind(null,h,y,f,l),null),Nt===null)throw Error(r(349));w||(ts&124)!==0||zy(h,l,f)}return f}function zy(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=qe.updateQueue,l===null?(l=j1(),qe.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function Gy(s,l,f,h){l.value=f,l.getSnapshot=h,Xy(l)&&Wy(s)}function qy(s,l,f){return f(function(){Xy(l)&&Wy(s)})}function Xy(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Dr(s,f)}catch{return!0}}function Wy(s){var l=ll(s,2);l!==null&&Br(l,s,2)}function F1(s){var l=wr();if(typeof s=="function"){var f=s;if(s=f(),go){Jn(!0);try{f()}finally{Jn(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:s},l}function $y(s,l,f,h){return s.baseState=f,V1(s,At,typeof h=="function"?h:ma)}function i3(s,l,f,h,y){if(bd(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};te.T!==null?f(!0):w.isTransition=!1,h(w),f=l.pending,f===null?(w.next=l.pending=w,Yy(l,w)):(w.next=f.next,l.pending=f.next=w)}}function Yy(s,l){var f=l.action,h=l.payload,y=s.state;if(l.isTransition){var w=te.T,C={};te.T=C;try{var O=f(y,h),z=te.S;z!==null&&z(C,O),Ky(s,l,O)}catch(Q){H1(s,l,Q)}finally{te.T=w}}else try{w=f(y,h),Ky(s,l,w)}catch(Q){H1(s,l,Q)}}function Ky(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(h){Qy(s,l,h)},function(h){return H1(s,l,h)}):Qy(s,l,f)}function Qy(s,l,f){l.status="fulfilled",l.value=f,Zy(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,Yy(s,f)))}function H1(s,l,f){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=f,Zy(l),l=l.next;while(l!==h)}s.action=null}function Zy(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function Jy(s,l){return l}function ex(s,l){if(ht){var f=Nt.formState;if(f!==null){e:{var h=qe;if(ht){if(Yt){t:{for(var y=Yt,w=Di;y.nodeType!==8;){if(!w){y=null;break t}if(y=ui(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Yt=ui(y.nextSibling),h=y.data==="F!";break e}}fo(h)}h=!1}h&&(l=f[0])}}return f=wr(),f.memoizedState=f.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jy,lastRenderedState:l},f.queue=h,f=xx.bind(null,qe,h),h.dispatch=f,h=F1(!1),w=W1.bind(null,qe,!1,h.queue),h=wr(),y={state:l,dispatch:null,action:s,pending:null},h.queue=y,f=i3.bind(null,qe,y,w,f),y.dispatch=f,h.memoizedState=s,[l,f,!1]}function tx(s){var l=cn();return nx(l,At,s)}function nx(s,l,f){if(l=V1(s,l,Jy)[0],s=_d(ma)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=nc(l)}catch(C){throw C===Ku?pd:C}else h=l;l=cn();var y=l.queue,w=y.dispatch;return f!==l.memoizedState&&(qe.flags|=2048,vl(9,wd(),a3.bind(null,y,f),null)),[h,w,s]}function a3(s,l){s.action=l}function rx(s){var l=cn(),f=At;if(f!==null)return nx(l,f,s);cn(),l=l.memoizedState,f=cn();var h=f.queue.dispatch;return f.memoizedState=s,[l,h,!1]}function vl(s,l,f,h){return s={tag:s,create:f,deps:h,inst:l,next:null},l=qe.updateQueue,l===null&&(l=j1(),qe.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(h=f.next,f.next=s,s.next=h,l.lastEffect=s),s}function wd(){return{destroy:void 0,resource:void 0}}function ix(){return cn().memoizedState}function Ed(s,l,f,h){var y=wr();h=h===void 0?null:h,qe.flags|=s,y.memoizedState=vl(1|l,wd(),f,h)}function rc(s,l,f,h){var y=cn();h=h===void 0?null:h;var w=y.memoizedState.inst;At!==null&&h!==null&&D1(h,At.memoizedState.deps)?y.memoizedState=vl(l,w,f,h):(qe.flags|=s,y.memoizedState=vl(1|l,w,f,h))}function ax(s,l){Ed(8390656,8,s,l)}function sx(s,l){rc(2048,8,s,l)}function ox(s,l){return rc(4,2,s,l)}function lx(s,l){return rc(4,4,s,l)}function ux(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function cx(s,l,f){f=f!=null?f.concat([s]):null,rc(4,4,ux.bind(null,l,s),f)}function z1(){}function fx(s,l){var f=cn();l=l===void 0?null:l;var h=f.memoizedState;return l!==null&&D1(l,h[1])?h[0]:(f.memoizedState=[s,l],s)}function dx(s,l){var f=cn();l=l===void 0?null:l;var h=f.memoizedState;if(l!==null&&D1(l,h[1]))return h[0];if(h=s(),go){Jn(!0);try{s()}finally{Jn(!1)}}return f.memoizedState=[h,l],h}function G1(s,l,f){return f===void 0||(ts&1073741824)!==0?s.memoizedState=l:(s.memoizedState=f,s=m2(),qe.lanes|=s,ls|=s,f)}function hx(s,l,f,h){return Dr(f,l)?f:pl.current!==null?(s=G1(s,f,h),Dr(s,l)||(Dn=!0),s):(ts&42)===0?(Dn=!0,s.memoizedState=f):(s=m2(),qe.lanes|=s,ls|=s,l)}function px(s,l,f,h,y){var w=ne.p;ne.p=w!==0&&8>w?w:8;var C=te.T,O={};te.T=O,W1(s,!1,l,f);try{var z=y(),Q=te.S;if(Q!==null&&Q(O,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=t3(z,h);ic(s,l,oe,jr(s))}else ic(s,l,h,jr(s))}catch(ce){ic(s,l,{then:function(){},status:"rejected",reason:ce},jr())}finally{ne.p=w,te.T=C}}function s3(){}function q1(s,l,f,h){if(s.tag!==5)throw Error(r(476));var y=mx(s).queue;px(s,y,l,ve,f===null?s3:function(){return gx(s),f(h)})}function mx(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:ve},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function gx(s){var l=mx(s).next.queue;ic(s,l,{},jr())}function X1(){return er(Ec)}function vx(){return cn().memoizedState}function yx(){return cn().memoizedState}function o3(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=jr();s=Ja(f);var h=es(l,s,f);h!==null&&(Br(h,l,f),Zu(h,l,f)),l={cache:E1()},s.payload=l;return}l=l.return}}function l3(s,l,f){var h=jr();f={lane:h,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},bd(s)?_x(l,f):(f=d1(s,l,f,h),f!==null&&(Br(f,s,h),wx(f,l,h)))}function xx(s,l,f){var h=jr();ic(s,l,f,h)}function ic(s,l,f,h){var y={lane:h,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(bd(s))_x(l,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var C=l.lastRenderedState,O=w(C,f);if(y.hasEagerState=!0,y.eagerState=O,Dr(O,C))return sd(s,l,y,0),Nt===null&&ad(),!1}catch{}finally{}if(f=d1(s,l,y,h),f!==null)return Br(f,s,h),wx(f,l,h),!0}return!1}function W1(s,l,f,h){if(h={lane:2,revertLane:Sp(),action:h,hasEagerState:!1,eagerState:null,next:null},bd(s)){if(l)throw Error(r(479))}else l=d1(s,f,h,2),l!==null&&Br(l,s,2)}function bd(s){var l=s.alternate;return s===qe||l!==null&&l===qe}function _x(s,l){ml=vd=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function wx(s,l,f){if((f&4194048)!==0){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Tu(s,f)}}var Ad={readContext:er,use:xd,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},Ex={readContext:er,use:xd,useCallback:function(s,l){return wr().memoizedState=[s,l===void 0?null:l],s},useContext:er,useEffect:ax,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Ed(4194308,4,ux.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Ed(4194308,4,s,l)},useInsertionEffect:function(s,l){Ed(4,2,s,l)},useMemo:function(s,l){var f=wr();l=l===void 0?null:l;var h=s();if(go){Jn(!0);try{s()}finally{Jn(!1)}}return f.memoizedState=[h,l],h},useReducer:function(s,l,f){var h=wr();if(f!==void 0){var y=f(l);if(go){Jn(!0);try{f(l)}finally{Jn(!1)}}}else y=l;return h.memoizedState=h.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},h.queue=s,s=s.dispatch=l3.bind(null,qe,s),[h.memoizedState,s]},useRef:function(s){var l=wr();return s={current:s},l.memoizedState=s},useState:function(s){s=F1(s);var l=s.queue,f=xx.bind(null,qe,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:z1,useDeferredValue:function(s,l){var f=wr();return G1(f,s,l)},useTransition:function(){var s=F1(!1);return s=px.bind(null,qe,s.queue,!0,!1),wr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var h=qe,y=wr();if(ht){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Nt===null)throw Error(r(349));(rt&124)!==0||zy(h,l,f)}y.memoizedState=f;var w={value:f,getSnapshot:l};return y.queue=w,ax(qy.bind(null,h,w,s),[s]),h.flags|=2048,vl(9,wd(),Gy.bind(null,h,w,f,l),null),f},useId:function(){var s=wr(),l=Nt.identifierPrefix;if(ht){var f=da,h=fa;f=(h&~(1<<32-mn(h)-1)).toString(32)+f,l=""+l+"R"+f,f=yd++,0<f&&(l+="H"+f.toString(32)),l+=""}else f=n3++,l=""+l+"r"+f.toString(32)+"";return s.memoizedState=l},useHostTransitionStatus:X1,useFormState:ex,useActionState:ex,useOptimistic:function(s){var l=wr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=W1.bind(null,qe,!0,f),f.dispatch=l,[s,l]},useMemoCache:B1,useCacheRefresh:function(){return wr().memoizedState=o3.bind(null,qe)}},bx={readContext:er,use:xd,useCallback:fx,useContext:er,useEffect:sx,useImperativeHandle:cx,useInsertionEffect:ox,useLayoutEffect:lx,useMemo:dx,useReducer:_d,useRef:ix,useState:function(){return _d(ma)},useDebugValue:z1,useDeferredValue:function(s,l){var f=cn();return hx(f,At.memoizedState,s,l)},useTransition:function(){var s=_d(ma)[0],l=cn().memoizedState;return[typeof s=="boolean"?s:nc(s),l]},useSyncExternalStore:Hy,useId:vx,useHostTransitionStatus:X1,useFormState:tx,useActionState:tx,useOptimistic:function(s,l){var f=cn();return $y(f,At,s,l)},useMemoCache:B1,useCacheRefresh:yx},u3={readContext:er,use:xd,useCallback:fx,useContext:er,useEffect:sx,useImperativeHandle:cx,useInsertionEffect:ox,useLayoutEffect:lx,useMemo:dx,useReducer:U1,useRef:ix,useState:function(){return U1(ma)},useDebugValue:z1,useDeferredValue:function(s,l){var f=cn();return At===null?G1(f,s,l):hx(f,At.memoizedState,s,l)},useTransition:function(){var s=U1(ma)[0],l=cn().memoizedState;return[typeof s=="boolean"?s:nc(s),l]},useSyncExternalStore:Hy,useId:vx,useHostTransitionStatus:X1,useFormState:rx,useActionState:rx,useOptimistic:function(s,l){var f=cn();return At!==null?$y(f,At,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:B1,useCacheRefresh:yx},yl=null,ac=0;function Sd(s){var l=ac;return ac+=1,yl===null&&(yl=[]),My(yl,s,l)}function sc(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Td(s,l){throw l.$$typeof===g?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Ax(s){var l=s._init;return l(s._payload)}function Sx(s){function l($,X){if(s){var K=$.deletions;K===null?($.deletions=[X],$.flags|=16):K.push(X)}}function f($,X){if(!s)return null;for(;X!==null;)l($,X),X=X.sibling;return null}function h($){for(var X=new Map;$!==null;)$.key!==null?X.set($.key,$):X.set($.index,$),$=$.sibling;return X}function y($,X){return $=ca($,X),$.index=0,$.sibling=null,$}function w($,X,K){return $.index=K,s?(K=$.alternate,K!==null?(K=K.index,K<X?($.flags|=67108866,X):K):($.flags|=67108866,X)):($.flags|=1048576,X)}function C($){return s&&$.alternate===null&&($.flags|=67108866),$}function O($,X,K,le){return X===null||X.tag!==6?(X=p1(K,$.mode,le),X.return=$,X):(X=y(X,K),X.return=$,X)}function z($,X,K,le){var Ae=K.type;return Ae===E?oe($,X,K.props.children,le,K.key):X!==null&&(X.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&Ax(Ae)===X.type)?(X=y(X,K.props),sc(X,K),X.return=$,X):(X=ld(K.type,K.key,K.props,null,$.mode,le),sc(X,K),X.return=$,X)}function Q($,X,K,le){return X===null||X.tag!==4||X.stateNode.containerInfo!==K.containerInfo||X.stateNode.implementation!==K.implementation?(X=m1(K,$.mode,le),X.return=$,X):(X=y(X,K.children||[]),X.return=$,X)}function oe($,X,K,le,Ae){return X===null||X.tag!==7?(X=oo(K,$.mode,le,Ae),X.return=$,X):(X=y(X,K),X.return=$,X)}function ce($,X,K){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=p1(""+X,$.mode,K),X.return=$,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case x:return K=ld(X.type,X.key,X.props,null,$.mode,K),sc(K,X),K.return=$,K;case _:return X=m1(X,$.mode,K),X.return=$,X;case R:var le=X._init;return X=le(X._payload),ce($,X,K)}if(Be(X)||G(X))return X=oo(X,$.mode,K,null),X.return=$,X;if(typeof X.then=="function")return ce($,Sd(X),K);if(X.$$typeof===P)return ce($,dd($,X),K);Td($,X)}return null}function J($,X,K,le){var Ae=X!==null?X.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ae!==null?null:O($,X,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return K.key===Ae?z($,X,K,le):null;case _:return K.key===Ae?Q($,X,K,le):null;case R:return Ae=K._init,K=Ae(K._payload),J($,X,K,le)}if(Be(K)||G(K))return Ae!==null?null:oe($,X,K,le,null);if(typeof K.then=="function")return J($,X,Sd(K),le);if(K.$$typeof===P)return J($,X,dd($,K),le);Td($,K)}return null}function ee($,X,K,le,Ae){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return $=$.get(K)||null,O(X,$,""+le,Ae);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case x:return $=$.get(le.key===null?K:le.key)||null,z(X,$,le,Ae);case _:return $=$.get(le.key===null?K:le.key)||null,Q(X,$,le,Ae);case R:var $e=le._init;return le=$e(le._payload),ee($,X,K,le,Ae)}if(Be(le)||G(le))return $=$.get(K)||null,oe(X,$,le,Ae,null);if(typeof le.then=="function")return ee($,X,K,Sd(le),Ae);if(le.$$typeof===P)return ee($,X,K,dd(X,le),Ae);Td(X,le)}return null}function Le($,X,K,le){for(var Ae=null,$e=null,Te=X,ke=X=0,Mn=null;Te!==null&&ke<K.length;ke++){Te.index>ke?(Mn=Te,Te=null):Mn=Te.sibling;var ct=J($,Te,K[ke],le);if(ct===null){Te===null&&(Te=Mn);break}s&&Te&&ct.alternate===null&&l($,Te),X=w(ct,X,ke),$e===null?Ae=ct:$e.sibling=ct,$e=ct,Te=Mn}if(ke===K.length)return f($,Te),ht&&uo($,ke),Ae;if(Te===null){for(;ke<K.length;ke++)Te=ce($,K[ke],le),Te!==null&&(X=w(Te,X,ke),$e===null?Ae=Te:$e.sibling=Te,$e=Te);return ht&&uo($,ke),Ae}for(Te=h(Te);ke<K.length;ke++)Mn=ee(Te,$,ke,K[ke],le),Mn!==null&&(s&&Mn.alternate!==null&&Te.delete(Mn.key===null?ke:Mn.key),X=w(Mn,X,ke),$e===null?Ae=Mn:$e.sibling=Mn,$e=Mn);return s&&Te.forEach(function(vs){return l($,vs)}),ht&&uo($,ke),Ae}function De($,X,K,le){if(K==null)throw Error(r(151));for(var Ae=null,$e=null,Te=X,ke=X=0,Mn=null,ct=K.next();Te!==null&&!ct.done;ke++,ct=K.next()){Te.index>ke?(Mn=Te,Te=null):Mn=Te.sibling;var vs=J($,Te,ct.value,le);if(vs===null){Te===null&&(Te=Mn);break}s&&Te&&vs.alternate===null&&l($,Te),X=w(vs,X,ke),$e===null?Ae=vs:$e.sibling=vs,$e=vs,Te=Mn}if(ct.done)return f($,Te),ht&&uo($,ke),Ae;if(Te===null){for(;!ct.done;ke++,ct=K.next())ct=ce($,ct.value,le),ct!==null&&(X=w(ct,X,ke),$e===null?Ae=ct:$e.sibling=ct,$e=ct);return ht&&uo($,ke),Ae}for(Te=h(Te);!ct.done;ke++,ct=K.next())ct=ee(Te,$,ke,ct.value,le),ct!==null&&(s&&ct.alternate!==null&&Te.delete(ct.key===null?ke:ct.key),X=w(ct,X,ke),$e===null?Ae=ct:$e.sibling=ct,$e=ct);return s&&Te.forEach(function(c4){return l($,c4)}),ht&&uo($,ke),Ae}function Tt($,X,K,le){if(typeof K=="object"&&K!==null&&K.type===E&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case x:e:{for(var Ae=K.key;X!==null;){if(X.key===Ae){if(Ae=K.type,Ae===E){if(X.tag===7){f($,X.sibling),le=y(X,K.props.children),le.return=$,$=le;break e}}else if(X.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&Ax(Ae)===X.type){f($,X.sibling),le=y(X,K.props),sc(le,K),le.return=$,$=le;break e}f($,X);break}else l($,X);X=X.sibling}K.type===E?(le=oo(K.props.children,$.mode,le,K.key),le.return=$,$=le):(le=ld(K.type,K.key,K.props,null,$.mode,le),sc(le,K),le.return=$,$=le)}return C($);case _:e:{for(Ae=K.key;X!==null;){if(X.key===Ae)if(X.tag===4&&X.stateNode.containerInfo===K.containerInfo&&X.stateNode.implementation===K.implementation){f($,X.sibling),le=y(X,K.children||[]),le.return=$,$=le;break e}else{f($,X);break}else l($,X);X=X.sibling}le=m1(K,$.mode,le),le.return=$,$=le}return C($);case R:return Ae=K._init,K=Ae(K._payload),Tt($,X,K,le)}if(Be(K))return Le($,X,K,le);if(G(K)){if(Ae=G(K),typeof Ae!="function")throw Error(r(150));return K=Ae.call(K),De($,X,K,le)}if(typeof K.then=="function")return Tt($,X,Sd(K),le);if(K.$$typeof===P)return Tt($,X,dd($,K),le);Td($,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,X!==null&&X.tag===6?(f($,X.sibling),le=y(X,K),le.return=$,$=le):(f($,X),le=p1(K,$.mode,le),le.return=$,$=le),C($)):f($,X)}return function($,X,K,le){try{ac=0;var Ae=Tt($,X,K,le);return yl=null,Ae}catch(Te){if(Te===Ku||Te===pd)throw Te;var $e=Pr(29,Te,null,$.mode);return $e.lanes=le,$e.return=$,$e}finally{}}}var xl=Sx(!0),Tx=Sx(!1),$r=ue(null),Pi=null;function ns(s){var l=s.alternate;de(_n,_n.current&1),de($r,s),Pi===null&&(l===null||pl.current!==null||l.memoizedState!==null)&&(Pi=s)}function Cx(s){if(s.tag===22){if(de(_n,_n.current),de($r,s),Pi===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Pi=s)}}else rs()}function rs(){de(_n,_n.current),de($r,$r.current)}function ga(s){me($r),Pi===s&&(Pi=null),me(_n)}var _n=ue(0);function Cd(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||jp(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function $1(s,l,f,h){l=s.memoizedState,f=f(h,l),f=f==null?l:p({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Y1={enqueueSetState:function(s,l,f){s=s._reactInternals;var h=jr(),y=Ja(h);y.payload=l,f!=null&&(y.callback=f),l=es(s,y,h),l!==null&&(Br(l,s,h),Zu(l,s,h))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var h=jr(),y=Ja(h);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=es(s,y,h),l!==null&&(Br(l,s,h),Zu(l,s,h))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=jr(),h=Ja(f);h.tag=2,l!=null&&(h.callback=l),l=es(s,h,f),l!==null&&(Br(l,s,f),Zu(l,s,f))}};function Ix(s,l,f,h,y,w,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,w,C):l.prototype&&l.prototype.isPureReactComponent?!Hu(f,h)||!Hu(y,w):!0}function Nx(s,l,f,h){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,h),l.state!==s&&Y1.enqueueReplaceState(l,l.state,null)}function vo(s,l){var f=l;if("ref"in l){f={};for(var h in l)h!=="ref"&&(f[h]=l[h])}if(s=s.defaultProps){f===l&&(f=p({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}var Id=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Rx(s){Id(s)}function Ox(s){console.error(s)}function Dx(s){Id(s)}function Nd(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function Px(s,l,f){try{var h=s.onCaughtError;h(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function K1(s,l,f){return f=Ja(f),f.tag=3,f.payload={element:null},f.callback=function(){Nd(s,l)},f}function Mx(s){return s=Ja(s),s.tag=3,s}function kx(s,l,f,h){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;s.payload=function(){return y(w)},s.callback=function(){Px(l,f,h)}}var C=f.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){Px(l,f,h),typeof y!="function"&&(us===null?us=new Set([this]):us.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})})}function c3(s,l,f,h,y){if(f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=f.alternate,l!==null&&Wu(l,f,y,!0),f=$r.current,f!==null){switch(f.tag){case 13:return Pi===null?_p():f.alternate===null&&Kt===0&&(Kt=3),f.flags&=-257,f.flags|=65536,f.lanes=y,h===S1?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([h]):l.add(h),Ep(s,h,y)),!1;case 22:return f.flags|=65536,h===S1?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([h]):f.add(h)),Ep(s,h,y)),!1}throw Error(r(435,f.tag))}return Ep(s,h,y),_p(),!1}if(ht)return l=$r.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,h!==y1&&(s=Error(r(422),{cause:h}),Xu(Gr(s,f)))):(h!==y1&&(l=Error(r(423),{cause:h}),Xu(Gr(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,h=Gr(h,f),y=K1(s.stateNode,h,y),I1(s,y),Kt!==4&&(Kt=2)),!1;var w=Error(r(520),{cause:h});if(w=Gr(w,f),hc===null?hc=[w]:hc.push(w),Kt!==4&&(Kt=2),l===null)return!0;h=Gr(h,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=K1(f.stateNode,h,s),I1(f,s),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(us===null||!us.has(w))))return f.flags|=65536,y&=-y,f.lanes|=y,y=Mx(y),kx(y,s,f,h),I1(f,y),!1}f=f.return}while(f!==null);return!1}var Lx=Error(r(461)),Dn=!1;function Gn(s,l,f,h){l.child=s===null?Tx(l,null,f,h):xl(l,s.child,f,h)}function jx(s,l,f,h,y){f=f.render;var w=l.ref;if("ref"in h){var C={};for(var O in h)O!=="ref"&&(C[O]=h[O])}else C=h;return po(l),h=P1(s,l,f,C,w,y),O=M1(),s!==null&&!Dn?(k1(s,l,y),va(s,l,y)):(ht&&O&&g1(l),l.flags|=1,Gn(s,l,h,y),l.child)}function Bx(s,l,f,h,y){if(s===null){var w=f.type;return typeof w=="function"&&!h1(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,Vx(s,l,w,h,y)):(s=ld(f.type,null,h,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!ip(s,y)){var C=w.memoizedProps;if(f=f.compare,f=f!==null?f:Hu,f(C,h)&&s.ref===l.ref)return va(s,l,y)}return l.flags|=1,s=ca(w,h),s.ref=l.ref,s.return=l,l.child=s}function Vx(s,l,f,h,y){if(s!==null){var w=s.memoizedProps;if(Hu(w,h)&&s.ref===l.ref)if(Dn=!1,l.pendingProps=h=w,ip(s,y))(s.flags&131072)!==0&&(Dn=!0);else return l.lanes=s.lanes,va(s,l,y)}return Q1(s,l,f,h,y)}function Ux(s,l,f){var h=l.pendingProps,y=h.children,w=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((l.flags&128)!==0){if(h=w!==null?w.baseLanes|f:f,s!==null){for(y=l.child=s.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;l.childLanes=w&~h}else l.childLanes=0,l.child=null;return Fx(s,l,h,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&hd(l,w!==null?w.cachePool:null),w!==null?Vy(l,w):R1(),Cx(l);else return l.lanes=l.childLanes=536870912,Fx(s,l,w!==null?w.baseLanes|f:f,f)}else w!==null?(hd(l,w.cachePool),Vy(l,w),rs(),l.memoizedState=null):(s!==null&&hd(l,null),R1(),rs());return Gn(s,l,y,f),l.child}function Fx(s,l,f,h){var y=A1();return y=y===null?null:{parent:xn._currentValue,pool:y},l.memoizedState={baseLanes:f,cachePool:y},s!==null&&hd(l,null),R1(),Cx(l),s!==null&&Wu(s,l,h,!0),null}function Rd(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function Q1(s,l,f,h,y){return po(l),f=P1(s,l,f,h,void 0,y),h=M1(),s!==null&&!Dn?(k1(s,l,y),va(s,l,y)):(ht&&h&&g1(l),l.flags|=1,Gn(s,l,f,y),l.child)}function Hx(s,l,f,h,y,w){return po(l),l.updateQueue=null,f=Fy(l,h,f,y),Uy(s),h=M1(),s!==null&&!Dn?(k1(s,l,w),va(s,l,w)):(ht&&h&&g1(l),l.flags|=1,Gn(s,l,f,w),l.child)}function zx(s,l,f,h,y){if(po(l),l.stateNode===null){var w=ul,C=f.contextType;typeof C=="object"&&C!==null&&(w=er(C)),w=new f(h,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Y1,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=h,w.state=l.memoizedState,w.refs={},T1(l),C=f.contextType,w.context=typeof C=="object"&&C!==null?er(C):ul,w.state=l.memoizedState,C=f.getDerivedStateFromProps,typeof C=="function"&&($1(l,f,C,h),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&Y1.enqueueReplaceState(w,w.state,null),ec(l,h,w,y),Ju(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(s===null){w=l.stateNode;var O=l.memoizedProps,z=vo(f,O);w.props=z;var Q=w.context,oe=f.contextType;C=ul,typeof oe=="object"&&oe!==null&&(C=er(oe));var ce=f.getDerivedStateFromProps;oe=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O||Q!==C)&&Nx(l,w,h,C),Za=!1;var J=l.memoizedState;w.state=J,ec(l,h,w,y),Ju(),Q=l.memoizedState,O||J!==Q||Za?(typeof ce=="function"&&($1(l,f,ce,h),Q=l.memoizedState),(z=Za||Ix(l,f,z,h,J,Q,C))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=Q),w.props=h,w.state=Q,w.context=C,h=z):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{w=l.stateNode,C1(s,l),C=l.memoizedProps,oe=vo(f,C),w.props=oe,ce=l.pendingProps,J=w.context,Q=f.contextType,z=ul,typeof Q=="object"&&Q!==null&&(z=er(Q)),O=f.getDerivedStateFromProps,(Q=typeof O=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ce||J!==z)&&Nx(l,w,h,z),Za=!1,J=l.memoizedState,w.state=J,ec(l,h,w,y),Ju();var ee=l.memoizedState;C!==ce||J!==ee||Za||s!==null&&s.dependencies!==null&&fd(s.dependencies)?(typeof O=="function"&&($1(l,f,O,h),ee=l.memoizedState),(oe=Za||Ix(l,f,oe,h,J,ee,z)||s!==null&&s.dependencies!==null&&fd(s.dependencies))?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ee,z),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ee,z)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=ee),w.props=h,w.state=ee,w.context=z,h=oe):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(l.flags|=1024),h=!1)}return w=h,Rd(s,l),h=(l.flags&128)!==0,w||h?(w=l.stateNode,f=h&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&h?(l.child=xl(l,s.child,null,y),l.child=xl(l,null,f,y)):Gn(s,l,f,y),l.memoizedState=w.state,s=l.child):s=va(s,l,y),s}function Gx(s,l,f,h){return qu(),l.flags|=256,Gn(s,l,f,h),l.child}var Z1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function J1(s){return{baseLanes:s,cachePool:Oy()}}function ep(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Yr),s}function qx(s,l,f){var h=l.pendingProps,y=!1,w=(l.flags&128)!==0,C;if((C=w)||(C=s!==null&&s.memoizedState===null?!1:(_n.current&2)!==0),C&&(y=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,s===null){if(ht){if(y?ns(l):rs(),ht){var O=Yt,z;if(z=O){e:{for(z=O,O=Di;z.nodeType!==8;){if(!O){O=null;break e}if(z=ui(z.nextSibling),z===null){O=null;break e}}O=z}O!==null?(l.memoizedState={dehydrated:O,treeContext:lo!==null?{id:fa,overflow:da}:null,retryLane:536870912,hydrationErrors:null},z=Pr(18,null,null,0),z.stateNode=O,z.return=l,l.child=z,hr=l,Yt=null,z=!0):z=!1}z||fo(l)}if(O=l.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return jp(O)?l.lanes=32:l.lanes=536870912,null;ga(l)}return O=h.children,h=h.fallback,y?(rs(),y=l.mode,O=Od({mode:"hidden",children:O},y),h=oo(h,y,f,null),O.return=l,h.return=l,O.sibling=h,l.child=O,y=l.child,y.memoizedState=J1(f),y.childLanes=ep(s,C,f),l.memoizedState=Z1,h):(ns(l),tp(l,O))}if(z=s.memoizedState,z!==null&&(O=z.dehydrated,O!==null)){if(w)l.flags&256?(ns(l),l.flags&=-257,l=np(s,l,f)):l.memoizedState!==null?(rs(),l.child=s.child,l.flags|=128,l=null):(rs(),y=h.fallback,O=l.mode,h=Od({mode:"visible",children:h.children},O),y=oo(y,O,f,null),y.flags|=2,h.return=l,y.return=l,h.sibling=y,l.child=h,xl(l,s.child,null,f),h=l.child,h.memoizedState=J1(f),h.childLanes=ep(s,C,f),l.memoizedState=Z1,l=y);else if(ns(l),jp(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var Q=C.dgst;C=Q,h=Error(r(419)),h.stack="",h.digest=C,Xu({value:h,source:null,stack:null}),l=np(s,l,f)}else if(Dn||Wu(s,l,f,!1),C=(f&s.childLanes)!==0,Dn||C){if(C=Nt,C!==null&&(h=f&-f,h=(h&42)!==0?1:Ga(h),h=(h&(C.suspendedLanes|f))!==0?0:h,h!==0&&h!==z.retryLane))throw z.retryLane=h,ll(s,h),Br(C,s,h),Lx;O.data==="$?"||_p(),l=np(s,l,f)}else O.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=z.treeContext,Yt=ui(O.nextSibling),hr=l,ht=!0,co=null,Di=!1,s!==null&&(Xr[Wr++]=fa,Xr[Wr++]=da,Xr[Wr++]=lo,fa=s.id,da=s.overflow,lo=l),l=tp(l,h.children),l.flags|=4096);return l}return y?(rs(),y=h.fallback,O=l.mode,z=s.child,Q=z.sibling,h=ca(z,{mode:"hidden",children:h.children}),h.subtreeFlags=z.subtreeFlags&65011712,Q!==null?y=ca(Q,y):(y=oo(y,O,f,null),y.flags|=2),y.return=l,h.return=l,h.sibling=y,l.child=h,h=y,y=l.child,O=s.child.memoizedState,O===null?O=J1(f):(z=O.cachePool,z!==null?(Q=xn._currentValue,z=z.parent!==Q?{parent:Q,pool:Q}:z):z=Oy(),O={baseLanes:O.baseLanes|f,cachePool:z}),y.memoizedState=O,y.childLanes=ep(s,C,f),l.memoizedState=Z1,h):(ns(l),f=s.child,s=f.sibling,f=ca(f,{mode:"visible",children:h.children}),f.return=l,f.sibling=null,s!==null&&(C=l.deletions,C===null?(l.deletions=[s],l.flags|=16):C.push(s)),l.child=f,l.memoizedState=null,f)}function tp(s,l){return l=Od({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Od(s,l){return s=Pr(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function np(s,l,f){return xl(l,s.child,null,f),s=tp(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Xx(s,l,f){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l),_1(s.return,l,f)}function rp(s,l,f,h,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:f,tailMode:y}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=f,w.tailMode=y)}function Wx(s,l,f){var h=l.pendingProps,y=h.revealOrder,w=h.tail;if(Gn(s,l,h.children,f),h=_n.current,(h&2)!==0)h=h&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Xx(s,f,l);else if(s.tag===19)Xx(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(de(_n,h),y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&Cd(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),rp(l,!1,y,f,w);break;case"backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Cd(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}rp(l,!0,f,null,w);break;case"together":rp(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function va(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),ls|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Wu(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=ca(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=ca(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function ip(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&fd(s)))}function f3(s,l,f){switch(l.tag){case 3:Ne(l,l.stateNode.containerInfo),Qa(l,xn,s.memoizedState.cache),qu();break;case 27:case 5:Wt(l);break;case 4:Ne(l,l.stateNode.containerInfo);break;case 10:Qa(l,l.type,l.memoizedProps.value);break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(ns(l),l.flags|=128,null):(f&l.child.childLanes)!==0?qx(s,l,f):(ns(l),s=va(s,l,f),s!==null?s.sibling:null);ns(l);break;case 19:var y=(s.flags&128)!==0;if(h=(f&l.childLanes)!==0,h||(Wu(s,l,f,!1),h=(f&l.childLanes)!==0),y){if(h)return Wx(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),de(_n,_n.current),h)break;return null;case 22:case 23:return l.lanes=0,Ux(s,l,f);case 24:Qa(l,xn,s.memoizedState.cache)}return va(s,l,f)}function $x(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Dn=!0;else{if(!ip(s,f)&&(l.flags&128)===0)return Dn=!1,f3(s,l,f);Dn=(s.flags&131072)!==0}else Dn=!1,ht&&(l.flags&1048576)!==0&&Ay(l,cd,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var h=l.elementType,y=h._init;if(h=y(h._payload),l.type=h,typeof h=="function")h1(h)?(s=vo(h,s),l.tag=1,l=zx(null,l,h,s,f)):(l.tag=0,l=Q1(null,l,h,s,f));else{if(h!=null){if(y=h.$$typeof,y===V){l.tag=11,l=jx(null,l,h,s,f);break e}else if(y===D){l.tag=14,l=Bx(null,l,h,s,f);break e}}throw l=Ie(h)||h,Error(r(306,l,""))}}return l;case 0:return Q1(s,l,l.type,l.pendingProps,f);case 1:return h=l.type,y=vo(h,l.pendingProps),zx(s,l,h,y,f);case 3:e:{if(Ne(l,l.stateNode.containerInfo),s===null)throw Error(r(387));h=l.pendingProps;var w=l.memoizedState;y=w.element,C1(s,l),ec(l,h,null,f);var C=l.memoizedState;if(h=C.cache,Qa(l,xn,h),h!==w.cache&&w1(l,[xn],f,!0),Ju(),h=C.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=Gx(s,l,h,f);break e}else if(h!==y){y=Gr(Error(r(424)),l),Xu(y),l=Gx(s,l,h,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Yt=ui(s.firstChild),hr=l,ht=!0,co=null,Di=!0,f=Tx(l,null,h,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(qu(),h===y){l=va(s,l,f);break e}Gn(s,l,h,f)}l=l.child}return l;case 26:return Rd(s,l),s===null?(f=Z2(l.type,null,l.pendingProps,null))?l.memoizedState=f:ht||(f=l.type,s=l.pendingProps,h=qd(ye.current).createElement(f),h[gn]=l,h[on]=s,Xn(h,f,s),en(h),l.stateNode=h):l.memoizedState=Z2(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Wt(l),s===null&&ht&&(h=l.stateNode=Y2(l.type,l.pendingProps,ye.current),hr=l,Di=!0,y=Yt,ds(l.type)?(Bp=y,Yt=ui(h.firstChild)):Yt=y),Gn(s,l,l.pendingProps.children,f),Rd(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&ht&&((y=h=Yt)&&(h=V3(h,l.type,l.pendingProps,Di),h!==null?(l.stateNode=h,hr=l,Yt=ui(h.firstChild),Di=!1,y=!0):y=!1),y||fo(l)),Wt(l),y=l.type,w=l.pendingProps,C=s!==null?s.memoizedProps:null,h=w.children,Mp(y,w)?h=null:C!==null&&Mp(y,C)&&(l.flags|=32),l.memoizedState!==null&&(y=P1(s,l,r3,null,null,f),Ec._currentValue=y),Rd(s,l),Gn(s,l,h,f),l.child;case 6:return s===null&&ht&&((s=f=Yt)&&(f=U3(f,l.pendingProps,Di),f!==null?(l.stateNode=f,hr=l,Yt=null,s=!0):s=!1),s||fo(l)),null;case 13:return qx(s,l,f);case 4:return Ne(l,l.stateNode.containerInfo),h=l.pendingProps,s===null?l.child=xl(l,null,h,f):Gn(s,l,h,f),l.child;case 11:return jx(s,l,l.type,l.pendingProps,f);case 7:return Gn(s,l,l.pendingProps,f),l.child;case 8:return Gn(s,l,l.pendingProps.children,f),l.child;case 12:return Gn(s,l,l.pendingProps.children,f),l.child;case 10:return h=l.pendingProps,Qa(l,l.type,h.value),Gn(s,l,h.children,f),l.child;case 9:return y=l.type._context,h=l.pendingProps.children,po(l),y=er(y),h=h(y),l.flags|=1,Gn(s,l,h,f),l.child;case 14:return Bx(s,l,l.type,l.pendingProps,f);case 15:return Vx(s,l,l.type,l.pendingProps,f);case 19:return Wx(s,l,f);case 31:return h=l.pendingProps,f=l.mode,h={mode:h.mode,children:h.children},s===null?(f=Od(h,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=ca(s.child,h),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return Ux(s,l,f);case 24:return po(l),h=er(xn),s===null?(y=A1(),y===null&&(y=Nt,w=E1(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=f),y=w),l.memoizedState={parent:h,cache:y},T1(l),Qa(l,xn,y)):((s.lanes&f)!==0&&(C1(s,l),ec(l,null,null,f),Ju()),y=s.memoizedState,w=l.memoizedState,y.parent!==h?(y={parent:h,cache:h},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),Qa(l,xn,h)):(h=w.cache,Qa(l,xn,h),h!==y.cache&&w1(l,[xn],f,!0))),Gn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ya(s){s.flags|=4}function Yx(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!r_(l)){if(l=$r.current,l!==null&&((rt&4194048)===rt?Pi!==null:(rt&62914560)!==rt&&(rt&536870912)===0||l!==Pi))throw Qu=S1,Dy;s.flags|=8192}}function Dd(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Au():536870912,s.lanes|=l,bl|=l)}function oc(s,l){if(!ht)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var h=null;f!==null;)f.alternate!==null&&(h=f),f=f.sibling;h===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Ft(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,h=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=h,s.childLanes=f,l}function d3(s,l,f){var h=l.pendingProps;switch(v1(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(l),null;case 1:return Ft(l),null;case 3:return f=l.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),pa(xn),Ge(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Gu(l)?ya(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Cy())),Ft(l),null;case 26:return f=l.memoizedState,s===null?(ya(l),f!==null?(Ft(l),Yx(l,f)):(Ft(l),l.flags&=-16777217)):f?f!==s.memoizedState?(ya(l),Ft(l),Yx(l,f)):(Ft(l),l.flags&=-16777217):(s.memoizedProps!==h&&ya(l),Ft(l),l.flags&=-16777217),null;case 27:yr(l),f=ye.current;var y=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==h&&ya(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Ft(l),null}s=ae.current,Gu(l)?Sy(l):(s=Y2(y,h,f),l.stateNode=s,ya(l))}return Ft(l),null;case 5:if(yr(l),f=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==h&&ya(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Ft(l),null}if(s=ae.current,Gu(l))Sy(l);else{switch(y=qd(ye.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?y.createElement("select",{is:h.is}):y.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?y.createElement(f,{is:h.is}):y.createElement(f)}}s[gn]=l,s[on]=h;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=s;e:switch(Xn(s,f,h),f){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ya(l)}}return Ft(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==h&&ya(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(s=ye.current,Gu(l)){if(s=l.stateNode,f=l.memoizedProps,h=null,y=hr,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}s[gn]=l,s=!!(s.nodeValue===f||h!==null&&h.suppressHydrationWarning===!0||H2(s.nodeValue,f)),s||fo(l)}else s=qd(s).createTextNode(h),s[gn]=l,l.stateNode=s}return Ft(l),null;case 13:if(h=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Gu(l),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[gn]=l}else qu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ft(l),y=!1}else y=Cy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(ga(l),l):(ga(l),null)}if(ga(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=h!==null,s=s!==null&&s.memoizedState!==null,f){h=l.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048)}return f!==s&&f&&(l.child.flags|=8192),Dd(l,l.updateQueue),Ft(l),null;case 4:return Ge(),s===null&&Np(l.stateNode.containerInfo),Ft(l),null;case 10:return pa(l.type),Ft(l),null;case 19:if(me(_n),y=l.memoizedState,y===null)return Ft(l),null;if(h=(l.flags&128)!==0,w=y.rendering,w===null)if(h)oc(y,!1);else{if(Kt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=Cd(s),w!==null){for(l.flags|=128,oc(y,!1),s=w.updateQueue,l.updateQueue=s,Dd(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)by(f,s),f=f.sibling;return de(_n,_n.current&1|2),l.child}s=s.sibling}y.tail!==null&&_r()>kd&&(l.flags|=128,h=!0,oc(y,!1),l.lanes=4194304)}else{if(!h)if(s=Cd(w),s!==null){if(l.flags|=128,h=!0,s=s.updateQueue,l.updateQueue=s,Dd(l,s),oc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!ht)return Ft(l),null}else 2*_r()-y.renderingStartTime>kd&&f!==536870912&&(l.flags|=128,h=!0,oc(y,!1),l.lanes=4194304);y.isBackwards?(w.sibling=l.child,l.child=w):(s=y.last,s!==null?s.sibling=w:l.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=_r(),l.sibling=null,s=_n.current,de(_n,h?s&1|2:s&1),l):(Ft(l),null);case 22:case 23:return ga(l),O1(),h=l.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(f&536870912)!==0&&(l.flags&128)===0&&(Ft(l),l.subtreeFlags&6&&(l.flags|=8192)):Ft(l),f=l.updateQueue,f!==null&&Dd(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==f&&(l.flags|=2048),s!==null&&me(mo),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),pa(xn),Ft(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function h3(s,l){switch(v1(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return pa(xn),Ge(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return yr(l),null;case 13:if(ga(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));qu()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return me(_n),null;case 4:return Ge(),null;case 10:return pa(l.type),null;case 22:case 23:return ga(l),O1(),s!==null&&me(mo),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return pa(xn),null;case 25:return null;default:return null}}function Kx(s,l){switch(v1(l),l.tag){case 3:pa(xn),Ge();break;case 26:case 27:case 5:yr(l);break;case 4:Ge();break;case 13:ga(l);break;case 19:me(_n);break;case 10:pa(l.type);break;case 22:case 23:ga(l),O1(),s!==null&&me(mo);break;case 24:pa(xn)}}function lc(s,l){try{var f=l.updateQueue,h=f!==null?f.lastEffect:null;if(h!==null){var y=h.next;f=y;do{if((f.tag&s)===s){h=void 0;var w=f.create,C=f.inst;h=w(),C.destroy=h}f=f.next}while(f!==y)}}catch(O){It(l,l.return,O)}}function is(s,l,f){try{var h=l.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&s)===s){var C=h.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,y=l;var z=f,Q=O;try{Q()}catch(oe){It(y,z,oe)}}}h=h.next}while(h!==w)}}catch(oe){It(l,l.return,oe)}}function Qx(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{By(l,f)}catch(h){It(s,s.return,h)}}}function Zx(s,l,f){f.props=vo(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(h){It(s,l,h)}}function uc(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof f=="function"?s.refCleanup=f(h):f.current=h}}catch(y){It(s,l,y)}}function Mi(s,l){var f=s.ref,h=s.refCleanup;if(f!==null)if(typeof h=="function")try{h()}catch(y){It(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){It(s,l,y)}else f.current=null}function Jx(s){var l=s.type,f=s.memoizedProps,h=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&h.focus();break e;case"img":f.src?h.src=f.src:f.srcSet&&(h.srcset=f.srcSet)}}catch(y){It(s,s.return,y)}}function ap(s,l,f){try{var h=s.stateNode;M3(h,s.type,f,l),h[on]=l}catch(y){It(s,s.return,y)}}function e2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ds(s.type)||s.tag===4}function sp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||e2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ds(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function op(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Gd));else if(h!==4&&(h===27&&ds(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(op(s,l,f),s=s.sibling;s!==null;)op(s,l,f),s=s.sibling}function Pd(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(h!==4&&(h===27&&ds(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Pd(s,l,f),s=s.sibling;s!==null;)Pd(s,l,f),s=s.sibling}function t2(s){var l=s.stateNode,f=s.memoizedProps;try{for(var h=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);Xn(l,h,f),l[gn]=s,l[on]=f}catch(w){It(s,s.return,w)}}var xa=!1,nn=!1,lp=!1,n2=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function p3(s,l){if(s=s.containerInfo,Dp=Qd,s=hy(s),s1(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var h=f.getSelection&&f.getSelection();if(h&&h.rangeCount!==0){f=h.anchorNode;var y=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var C=0,O=-1,z=-1,Q=0,oe=0,ce=s,J=null;t:for(;;){for(var ee;ce!==f||y!==0&&ce.nodeType!==3||(O=C+y),ce!==w||h!==0&&ce.nodeType!==3||(z=C+h),ce.nodeType===3&&(C+=ce.nodeValue.length),(ee=ce.firstChild)!==null;)J=ce,ce=ee;for(;;){if(ce===s)break t;if(J===f&&++Q===y&&(O=C),J===w&&++oe===h&&(z=C),(ee=ce.nextSibling)!==null)break;ce=J,J=ce.parentNode}ce=ee}f=O===-1||z===-1?null:{start:O,end:z}}else f=null}f=f||{start:0,end:0}}else f=null;for(Pp={focusedElem:s,selectionRange:f},Qd=!1,Pn=l;Pn!==null;)if(l=Pn,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,Pn=s;else for(;Pn!==null;){switch(l=Pn,w=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,f=l,y=w.memoizedProps,w=w.memoizedState,h=f.stateNode;try{var Le=vo(f.type,y,f.elementType===f.type);s=h.getSnapshotBeforeUpdate(Le,w),h.__reactInternalSnapshotBeforeUpdate=s}catch(De){It(f,f.return,De)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Lp(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Lp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Pn=s;break}Pn=l.return}}function r2(s,l,f){var h=f.flags;switch(f.tag){case 0:case 11:case 15:as(s,f),h&4&&lc(5,f);break;case 1:if(as(s,f),h&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(C){It(f,f.return,C)}else{var y=vo(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(C){It(f,f.return,C)}}h&64&&Qx(f),h&512&&uc(f,f.return);break;case 3:if(as(s,f),h&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{By(s,l)}catch(C){It(f,f.return,C)}}break;case 27:l===null&&h&4&&t2(f);case 26:case 5:as(s,f),l===null&&h&4&&Jx(f),h&512&&uc(f,f.return);break;case 12:as(s,f);break;case 13:as(s,f),h&4&&s2(s,f),h&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=b3.bind(null,f),F3(s,f))));break;case 22:if(h=f.memoizedState!==null||xa,!h){l=l!==null&&l.memoizedState!==null||nn,y=xa;var w=nn;xa=h,(nn=l)&&!w?ss(s,f,(f.subtreeFlags&8772)!==0):as(s,f),xa=y,nn=w}break;case 30:break;default:as(s,f)}}function i2(s){var l=s.alternate;l!==null&&(s.alternate=null,i2(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Wa(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var jt=null,Er=!1;function _a(s,l,f){for(f=f.child;f!==null;)a2(s,l,f),f=f.sibling}function a2(s,l,f){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(ut,f)}catch{}switch(f.tag){case 26:nn||Mi(f,l),_a(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:nn||Mi(f,l);var h=jt,y=Er;ds(f.type)&&(jt=f.stateNode,Er=!1),_a(s,l,f),yc(f.stateNode),jt=h,Er=y;break;case 5:nn||Mi(f,l);case 6:if(h=jt,y=Er,jt=null,_a(s,l,f),jt=h,Er=y,jt!==null)if(Er)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(f.stateNode)}catch(w){It(f,l,w)}else try{jt.removeChild(f.stateNode)}catch(w){It(f,l,w)}break;case 18:jt!==null&&(Er?(s=jt,W2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Tc(s)):W2(jt,f.stateNode));break;case 4:h=jt,y=Er,jt=f.stateNode.containerInfo,Er=!0,_a(s,l,f),jt=h,Er=y;break;case 0:case 11:case 14:case 15:nn||is(2,f,l),nn||is(4,f,l),_a(s,l,f);break;case 1:nn||(Mi(f,l),h=f.stateNode,typeof h.componentWillUnmount=="function"&&Zx(f,l,h)),_a(s,l,f);break;case 21:_a(s,l,f);break;case 22:nn=(h=nn)||f.memoizedState!==null,_a(s,l,f),nn=h;break;default:_a(s,l,f)}}function s2(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Tc(s)}catch(f){It(l,l.return,f)}}function m3(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new n2),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new n2),l;default:throw Error(r(435,s.tag))}}function up(s,l){var f=m3(s);l.forEach(function(h){var y=A3.bind(null,s,h);f.has(h)||(f.add(h),h.then(y,y))})}function Mr(s,l){var f=l.deletions;if(f!==null)for(var h=0;h<f.length;h++){var y=f[h],w=s,C=l,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(ds(O.type)){jt=O.stateNode,Er=!1;break e}break;case 5:jt=O.stateNode,Er=!1;break e;case 3:case 4:jt=O.stateNode.containerInfo,Er=!0;break e}O=O.return}if(jt===null)throw Error(r(160));a2(w,C,y),jt=null,Er=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)o2(l,s),l=l.sibling}var li=null;function o2(s,l){var f=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Mr(l,s),kr(s),h&4&&(is(3,s,s.return),lc(3,s),is(5,s,s.return));break;case 1:Mr(l,s),kr(s),h&512&&(nn||f===null||Mi(f,f.return)),h&64&&xa&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?h:f.concat(h))));break;case 26:var y=li;if(Mr(l,s),kr(s),h&512&&(nn||f===null||Mi(f,f.return)),h&4){var w=f!==null?f.memoizedState:null;if(h=s.memoizedState,f===null)if(h===null)if(s.stateNode===null){e:{h=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":w=y.getElementsByTagName("title")[0],(!w||w[qs]||w[gn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(h),y.head.insertBefore(w,y.querySelector("head > title"))),Xn(w,h,f),w[gn]=s,en(w),h=w;break e;case"link":var C=t_("link","href",y).get(h+(f.href||""));if(C){for(var O=0;O<C.length;O++)if(w=C[O],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){C.splice(O,1);break t}}w=y.createElement(h),Xn(w,h,f),y.head.appendChild(w);break;case"meta":if(C=t_("meta","content",y).get(h+(f.content||""))){for(O=0;O<C.length;O++)if(w=C[O],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){C.splice(O,1);break t}}w=y.createElement(h),Xn(w,h,f),y.head.appendChild(w);break;default:throw Error(r(468,h))}w[gn]=s,en(w),h=w}s.stateNode=h}else n_(y,s.type,s.stateNode);else s.stateNode=e_(y,h,s.memoizedProps);else w!==h?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,h===null?n_(y,s.type,s.stateNode):e_(y,h,s.memoizedProps)):h===null&&s.stateNode!==null&&ap(s,s.memoizedProps,f.memoizedProps)}break;case 27:Mr(l,s),kr(s),h&512&&(nn||f===null||Mi(f,f.return)),f!==null&&h&4&&ap(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Mr(l,s),kr(s),h&512&&(nn||f===null||Mi(f,f.return)),s.flags&32){y=s.stateNode;try{Ur(y,"")}catch(ee){It(s,s.return,ee)}}h&4&&s.stateNode!=null&&(y=s.memoizedProps,ap(s,y,f!==null?f.memoizedProps:y)),h&1024&&(lp=!0);break;case 6:if(Mr(l,s),kr(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,f=s.stateNode;try{f.nodeValue=h}catch(ee){It(s,s.return,ee)}}break;case 3:if($d=null,y=li,li=Xd(l.containerInfo),Mr(l,s),li=y,kr(s),h&4&&f!==null&&f.memoizedState.isDehydrated)try{Tc(l.containerInfo)}catch(ee){It(s,s.return,ee)}lp&&(lp=!1,l2(s));break;case 4:h=li,li=Xd(s.stateNode.containerInfo),Mr(l,s),kr(s),li=h;break;case 12:Mr(l,s),kr(s);break;case 13:Mr(l,s),kr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(mp=_r()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,up(s,h)));break;case 22:y=s.memoizedState!==null;var z=f!==null&&f.memoizedState!==null,Q=xa,oe=nn;if(xa=Q||y,nn=oe||z,Mr(l,s),nn=oe,xa=Q,kr(s),h&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||z||xa||nn||yo(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){z=f=l;try{if(w=z.stateNode,y)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=z.stateNode;var ce=z.memoizedProps.style,J=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;O.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){It(z,z.return,ee)}}}else if(l.tag===6){if(f===null){z=l;try{z.stateNode.nodeValue=y?"":z.memoizedProps}catch(ee){It(z,z.return,ee)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=s.updateQueue,h!==null&&(f=h.retryQueue,f!==null&&(h.retryQueue=null,up(s,f))));break;case 19:Mr(l,s),kr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,up(s,h)));break;case 30:break;case 21:break;default:Mr(l,s),kr(s)}}function kr(s){var l=s.flags;if(l&2){try{for(var f,h=s.return;h!==null;){if(e2(h)){f=h;break}h=h.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,w=sp(s);Pd(s,w,y);break;case 5:var C=f.stateNode;f.flags&32&&(Ur(C,""),f.flags&=-33);var O=sp(s);Pd(s,O,C);break;case 3:case 4:var z=f.stateNode.containerInfo,Q=sp(s);op(s,Q,z);break;default:throw Error(r(161))}}catch(oe){It(s,s.return,oe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function l2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;l2(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function as(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)r2(s,l.alternate,l),l=l.sibling}function yo(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:is(4,l,l.return),yo(l);break;case 1:Mi(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Zx(l,l.return,f),yo(l);break;case 27:yc(l.stateNode);case 26:case 5:Mi(l,l.return),yo(l);break;case 22:l.memoizedState===null&&yo(l);break;case 30:yo(l);break;default:yo(l)}s=s.sibling}}function ss(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,y=s,w=l,C=w.flags;switch(w.tag){case 0:case 11:case 15:ss(y,w,f),lc(4,w);break;case 1:if(ss(y,w,f),h=w,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Q){It(h,h.return,Q)}if(h=w,y=h.updateQueue,y!==null){var O=h.stateNode;try{var z=y.shared.hiddenCallbacks;if(z!==null)for(y.shared.hiddenCallbacks=null,y=0;y<z.length;y++)jy(z[y],O)}catch(Q){It(h,h.return,Q)}}f&&C&64&&Qx(w),uc(w,w.return);break;case 27:t2(w);case 26:case 5:ss(y,w,f),f&&h===null&&C&4&&Jx(w),uc(w,w.return);break;case 12:ss(y,w,f);break;case 13:ss(y,w,f),f&&C&4&&s2(y,w);break;case 22:w.memoizedState===null&&ss(y,w,f),uc(w,w.return);break;case 30:break;default:ss(y,w,f)}l=l.sibling}}function cp(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&$u(f))}function fp(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&$u(s))}function ki(s,l,f,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)u2(s,l,f,h),l=l.sibling}function u2(s,l,f,h){var y=l.flags;switch(l.tag){case 0:case 11:case 15:ki(s,l,f,h),y&2048&&lc(9,l);break;case 1:ki(s,l,f,h);break;case 3:ki(s,l,f,h),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&$u(s)));break;case 12:if(y&2048){ki(s,l,f,h),s=l.stateNode;try{var w=l.memoizedProps,C=w.id,O=w.onPostCommit;typeof O=="function"&&O(C,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){It(l,l.return,z)}}else ki(s,l,f,h);break;case 13:ki(s,l,f,h);break;case 23:break;case 22:w=l.stateNode,C=l.alternate,l.memoizedState!==null?w._visibility&2?ki(s,l,f,h):cc(s,l):w._visibility&2?ki(s,l,f,h):(w._visibility|=2,_l(s,l,f,h,(l.subtreeFlags&10256)!==0)),y&2048&&cp(C,l);break;case 24:ki(s,l,f,h),y&2048&&fp(l.alternate,l);break;default:ki(s,l,f,h)}}function _l(s,l,f,h,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=s,C=l,O=f,z=h,Q=C.flags;switch(C.tag){case 0:case 11:case 15:_l(w,C,O,z,y),lc(8,C);break;case 23:break;case 22:var oe=C.stateNode;C.memoizedState!==null?oe._visibility&2?_l(w,C,O,z,y):cc(w,C):(oe._visibility|=2,_l(w,C,O,z,y)),y&&Q&2048&&cp(C.alternate,C);break;case 24:_l(w,C,O,z,y),y&&Q&2048&&fp(C.alternate,C);break;default:_l(w,C,O,z,y)}l=l.sibling}}function cc(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,h=l,y=h.flags;switch(h.tag){case 22:cc(f,h),y&2048&&cp(h.alternate,h);break;case 24:cc(f,h),y&2048&&fp(h.alternate,h);break;default:cc(f,h)}l=l.sibling}}var fc=8192;function wl(s){if(s.subtreeFlags&fc)for(s=s.child;s!==null;)c2(s),s=s.sibling}function c2(s){switch(s.tag){case 26:wl(s),s.flags&fc&&s.memoizedState!==null&&e4(li,s.memoizedState,s.memoizedProps);break;case 5:wl(s);break;case 3:case 4:var l=li;li=Xd(s.stateNode.containerInfo),wl(s),li=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=fc,fc=16777216,wl(s),fc=l):wl(s));break;default:wl(s)}}function f2(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function dc(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];Pn=h,h2(h,s)}f2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)d2(s),s=s.sibling}function d2(s){switch(s.tag){case 0:case 11:case 15:dc(s),s.flags&2048&&is(9,s,s.return);break;case 3:dc(s);break;case 12:dc(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Md(s)):dc(s);break;default:dc(s)}}function Md(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];Pn=h,h2(h,s)}f2(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:is(8,l,l.return),Md(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Md(l));break;default:Md(l)}s=s.sibling}}function h2(s,l){for(;Pn!==null;){var f=Pn;switch(f.tag){case 0:case 11:case 15:is(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var h=f.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:$u(f.memoizedState.cache)}if(h=f.child,h!==null)h.return=f,Pn=h;else e:for(f=s;Pn!==null;){h=Pn;var y=h.sibling,w=h.return;if(i2(h),h===f){Pn=null;break e}if(y!==null){y.return=w,Pn=y;break e}Pn=w}}}var g3={getCacheForType:function(s){var l=er(xn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f}},v3=typeof WeakMap=="function"?WeakMap:Map,xt=0,Nt=null,Ke=null,rt=0,_t=0,Lr=null,os=!1,El=!1,dp=!1,wa=0,Kt=0,ls=0,xo=0,hp=0,Yr=0,bl=0,hc=null,br=null,pp=!1,mp=0,kd=1/0,Ld=null,us=null,qn=0,cs=null,Al=null,Sl=0,gp=0,vp=null,p2=null,pc=0,yp=null;function jr(){if((xt&2)!==0&&rt!==0)return rt&-rt;if(te.T!==null){var s=dl;return s!==0?s:Sp()}return qa()}function m2(){Yr===0&&(Yr=(rt&536870912)===0||ht?bu():536870912);var s=$r.current;return s!==null&&(s.flags|=32),Yr}function Br(s,l,f){(s===Nt&&(_t===2||_t===9)||s.cancelPendingCommit!==null)&&(Tl(s,0),fs(s,rt,Yr,!1)),Ji(s,f),((xt&2)===0||s!==Nt)&&(s===Nt&&((xt&2)===0&&(xo|=f),Kt===4&&fs(s,rt,Yr,!1)),Li(s))}function g2(s,l,f){if((xt&6)!==0)throw Error(r(327));var h=!f&&(l&124)===0&&(l&s.expiredLanes)===0||Gs(s,l),y=h?_3(s,l):wp(s,l,!0),w=h;do{if(y===0){El&&!h&&fs(s,l,0,!1);break}else{if(f=s.current.alternate,w&&!y3(f)){y=wp(s,l,!1),w=!1;continue}if(y===2){if(w=l,s.errorRecoveryDisabledLanes&w)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var O=s;y=hc;var z=O.current.memoizedState.isDehydrated;if(z&&(Tl(O,C).flags|=256),C=wp(O,C,!1),C!==2){if(dp&&!z){O.errorRecoveryDisabledLanes|=w,xo|=w,y=4;break e}w=br,br=y,w!==null&&(br===null?br=w:br.push.apply(br,w))}y=C}if(w=!1,y!==2)continue}}if(y===1){Tl(s,0),fs(s,l,0,!0);break}e:{switch(h=s,w=y,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:fs(h,l,Yr,!os);break e;case 2:br=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=mp+300-_r(),10<y)){if(fs(h,l,Yr,!os),zo(h,0,!0)!==0)break e;h.timeoutHandle=q2(v2.bind(null,h,f,br,Ld,pp,l,Yr,xo,bl,os,w,2,-0,0),y);break e}v2(h,f,br,Ld,pp,l,Yr,xo,bl,os,w,0,-0,0)}}break}while(!0);Li(s)}function v2(s,l,f,h,y,w,C,O,z,Q,oe,ce,J,ee){if(s.timeoutHandle=-1,ce=l.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(wc={stylesheets:null,count:0,unsuspend:J3},c2(l),ce=t4(),ce!==null)){s.cancelPendingCommit=ce(A2.bind(null,s,l,w,f,h,y,C,O,z,oe,1,J,ee)),fs(s,w,C,!Q);return}A2(s,l,w,f,h,y,C,O,z)}function y3(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var h=0;h<f.length;h++){var y=f[h],w=y.getSnapshot;y=y.value;try{if(!Dr(w(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fs(s,l,f,h){l&=~hp,l&=~xo,s.suspendedLanes|=l,s.pingedLanes&=~l,h&&(s.warmLanes|=l),h=s.expirationTimes;for(var y=l;0<y;){var w=31-mn(y),C=1<<w;h[w]=-1,y&=~C}f!==0&&wi(s,f,l)}function jd(){return(xt&6)===0?(mc(0),!1):!0}function xp(){if(Ke!==null){if(_t===0)var s=Ke.return;else s=Ke,ha=ho=null,L1(s),yl=null,ac=0,s=Ke;for(;s!==null;)Kx(s.alternate,s),s=s.return;Ke=null}}function Tl(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,L3(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),xp(),Nt=s,Ke=f=ca(s.current,null),rt=l,_t=0,Lr=null,os=!1,El=Gs(s,l),dp=!1,bl=Yr=hp=xo=ls=Kt=0,br=hc=null,pp=!1,(l&8)!==0&&(l|=l&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=l;0<h;){var y=31-mn(h),w=1<<y;l|=s[y],h&=~w}return wa=l,ad(),f}function y2(s,l){qe=null,te.H=Ad,l===Ku||l===pd?(l=ky(),_t=3):l===Dy?(l=ky(),_t=4):_t=l===Lx?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Lr=l,Ke===null&&(Kt=1,Nd(s,Gr(l,s.current)))}function x2(){var s=te.H;return te.H=Ad,s===null?Ad:s}function _2(){var s=te.A;return te.A=g3,s}function _p(){Kt=4,os||(rt&4194048)!==rt&&$r.current!==null||(El=!0),(ls&134217727)===0&&(xo&134217727)===0||Nt===null||fs(Nt,rt,Yr,!1)}function wp(s,l,f){var h=xt;xt|=2;var y=x2(),w=_2();(Nt!==s||rt!==l)&&(Ld=null,Tl(s,l)),l=!1;var C=Kt;e:do try{if(_t!==0&&Ke!==null){var O=Ke,z=Lr;switch(_t){case 8:xp(),C=6;break e;case 3:case 2:case 9:case 6:$r.current===null&&(l=!0);var Q=_t;if(_t=0,Lr=null,Cl(s,O,z,Q),f&&El){C=0;break e}break;default:Q=_t,_t=0,Lr=null,Cl(s,O,z,Q)}}x3(),C=Kt;break}catch(oe){y2(s,oe)}while(!0);return l&&s.shellSuspendCounter++,ha=ho=null,xt=h,te.H=y,te.A=w,Ke===null&&(Nt=null,rt=0,ad()),C}function x3(){for(;Ke!==null;)w2(Ke)}function _3(s,l){var f=xt;xt|=2;var h=x2(),y=_2();Nt!==s||rt!==l?(Ld=null,kd=_r()+500,Tl(s,l)):El=Gs(s,l);e:do try{if(_t!==0&&Ke!==null){l=Ke;var w=Lr;t:switch(_t){case 1:_t=0,Lr=null,Cl(s,l,w,1);break;case 2:case 9:if(Py(w)){_t=0,Lr=null,E2(l);break}l=function(){_t!==2&&_t!==9||Nt!==s||(_t=7),Li(s)},w.then(l,l);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:Py(w)?(_t=0,Lr=null,E2(l)):(_t=0,Lr=null,Cl(s,l,w,7));break;case 5:var C=null;switch(Ke.tag){case 26:C=Ke.memoizedState;case 5:case 27:var O=Ke;if(!C||r_(C)){_t=0,Lr=null;var z=O.sibling;if(z!==null)Ke=z;else{var Q=O.return;Q!==null?(Ke=Q,Bd(Q)):Ke=null}break t}}_t=0,Lr=null,Cl(s,l,w,5);break;case 6:_t=0,Lr=null,Cl(s,l,w,6);break;case 8:xp(),Kt=6;break e;default:throw Error(r(462))}}w3();break}catch(oe){y2(s,oe)}while(!0);return ha=ho=null,te.H=h,te.A=y,xt=f,Ke!==null?0:(Nt=null,rt=0,ad(),Kt)}function w3(){for(;Ke!==null&&!Vs();)w2(Ke)}function w2(s){var l=$x(s.alternate,s,wa);s.memoizedProps=s.pendingProps,l===null?Bd(s):Ke=l}function E2(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=Hx(f,l,l.pendingProps,l.type,void 0,rt);break;case 11:l=Hx(f,l,l.pendingProps,l.type.render,l.ref,rt);break;case 5:L1(l);default:Kx(f,l),l=Ke=by(l,wa),l=$x(f,l,wa)}s.memoizedProps=s.pendingProps,l===null?Bd(s):Ke=l}function Cl(s,l,f,h){ha=ho=null,L1(l),yl=null,ac=0;var y=l.return;try{if(c3(s,y,l,f,rt)){Kt=1,Nd(s,Gr(f,s.current)),Ke=null;return}}catch(w){if(y!==null)throw Ke=y,w;Kt=1,Nd(s,Gr(f,s.current)),Ke=null;return}l.flags&32768?(ht||h===1?s=!0:El||(rt&536870912)!==0?s=!1:(os=s=!0,(h===2||h===9||h===3||h===6)&&(h=$r.current,h!==null&&h.tag===13&&(h.flags|=16384))),b2(l,s)):Bd(l)}function Bd(s){var l=s;do{if((l.flags&32768)!==0){b2(l,os);return}s=l.return;var f=d3(l.alternate,l,wa);if(f!==null){Ke=f;return}if(l=l.sibling,l!==null){Ke=l;return}Ke=l=s}while(l!==null);Kt===0&&(Kt=5)}function b2(s,l){do{var f=h3(s.alternate,s);if(f!==null){f.flags&=32767,Ke=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=f}while(s!==null);Kt=6,Ke=null}function A2(s,l,f,h,y,w,C,O,z){s.cancelPendingCommit=null;do Vd();while(qn!==0);if((xt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=f1,Su(s,f,w,C,O,z),s===Nt&&(Ke=Nt=null,rt=0),Al=l,cs=s,Sl=f,gp=w,vp=y,p2=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,S3(Ce,function(){return N2(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=te.T,te.T=null,y=ne.p,ne.p=2,C=xt,xt|=4;try{p3(s,l,f)}finally{xt=C,ne.p=y,te.T=h}}qn=1,S2(),T2(),C2()}}function S2(){if(qn===1){qn=0;var s=cs,l=Al,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=te.T,te.T=null;var h=ne.p;ne.p=2;var y=xt;xt|=4;try{o2(l,s);var w=Pp,C=hy(s.containerInfo),O=w.focusedElem,z=w.selectionRange;if(C!==O&&O&&O.ownerDocument&&dy(O.ownerDocument.documentElement,O)){if(z!==null&&s1(O)){var Q=z.start,oe=z.end;if(oe===void 0&&(oe=Q),"selectionStart"in O)O.selectionStart=Q,O.selectionEnd=Math.min(oe,O.value.length);else{var ce=O.ownerDocument||document,J=ce&&ce.defaultView||window;if(J.getSelection){var ee=J.getSelection(),Le=O.textContent.length,De=Math.min(z.start,Le),Tt=z.end===void 0?De:Math.min(z.end,Le);!ee.extend&&De>Tt&&(C=Tt,Tt=De,De=C);var $=fy(O,De),X=fy(O,Tt);if($&&X&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==X.node||ee.focusOffset!==X.offset)){var K=ce.createRange();K.setStart($.node,$.offset),ee.removeAllRanges(),De>Tt?(ee.addRange(K),ee.extend(X.node,X.offset)):(K.setEnd(X.node,X.offset),ee.addRange(K))}}}}for(ce=[],ee=O;ee=ee.parentNode;)ee.nodeType===1&&ce.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ce.length;O++){var le=ce[O];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Qd=!!Dp,Pp=Dp=null}finally{xt=y,ne.p=h,te.T=f}}s.current=l,qn=2}}function T2(){if(qn===2){qn=0;var s=cs,l=Al,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=te.T,te.T=null;var h=ne.p;ne.p=2;var y=xt;xt|=4;try{r2(s,l.alternate,l)}finally{xt=y,ne.p=h,te.T=f}}qn=3}}function C2(){if(qn===4||qn===3){qn=0,Yi();var s=cs,l=Al,f=Sl,h=p2;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?qn=5:(qn=0,Al=cs=null,I2(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(us=null),Go(f),l=l.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(ut,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=te.T,y=ne.p,ne.p=2,te.T=null;try{for(var w=s.onRecoverableError,C=0;C<h.length;C++){var O=h[C];w(O.value,{componentStack:O.stack})}}finally{te.T=l,ne.p=y}}(Sl&3)!==0&&Vd(),Li(s),y=s.pendingLanes,(f&4194090)!==0&&(y&42)!==0?s===yp?pc++:(pc=0,yp=s):pc=0,mc(0)}}function I2(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,$u(l)))}function Vd(s){return S2(),T2(),C2(),N2()}function N2(){if(qn!==5)return!1;var s=cs,l=gp;gp=0;var f=Go(Sl),h=te.T,y=ne.p;try{ne.p=32>f?32:f,te.T=null,f=vp,vp=null;var w=cs,C=Sl;if(qn=0,Al=cs=null,Sl=0,(xt&6)!==0)throw Error(r(331));var O=xt;if(xt|=4,d2(w.current),u2(w,w.current,C,f),xt=O,mc(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(ut,w)}catch{}return!0}finally{ne.p=y,te.T=h,I2(s,l)}}function R2(s,l,f){l=Gr(f,l),l=K1(s.stateNode,l,2),s=es(s,l,2),s!==null&&(Ji(s,2),Li(s))}function It(s,l,f){if(s.tag===3)R2(s,s,f);else for(;l!==null;){if(l.tag===3){R2(l,s,f);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(us===null||!us.has(h))){s=Gr(f,s),f=Mx(2),h=es(l,f,2),h!==null&&(kx(f,h,l,s),Ji(h,2),Li(h));break}}l=l.return}}function Ep(s,l,f){var h=s.pingCache;if(h===null){h=s.pingCache=new v3;var y=new Set;h.set(l,y)}else y=h.get(l),y===void 0&&(y=new Set,h.set(l,y));y.has(f)||(dp=!0,y.add(f),s=E3.bind(null,s,l,f),l.then(s,s))}function E3(s,l,f){var h=s.pingCache;h!==null&&h.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Nt===s&&(rt&f)===f&&(Kt===4||Kt===3&&(rt&62914560)===rt&&300>_r()-mp?(xt&2)===0&&Tl(s,0):hp|=f,bl===rt&&(bl=0)),Li(s)}function O2(s,l){l===0&&(l=Au()),s=ll(s,l),s!==null&&(Ji(s,l),Li(s))}function b3(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),O2(s,f)}function A3(s,l){var f=0;switch(s.tag){case 13:var h=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),O2(s,f)}function S3(s,l){return $t(s,l)}var Ud=null,Il=null,bp=!1,Fd=!1,Ap=!1,_o=0;function Li(s){s!==Il&&s.next===null&&(Il===null?Ud=Il=s:Il=Il.next=s),Fd=!0,bp||(bp=!0,C3())}function mc(s,l){if(!Ap&&Fd){Ap=!0;do for(var f=!1,h=Ud;h!==null;){if(s!==0){var y=h.pendingLanes;if(y===0)var w=0;else{var C=h.suspendedLanes,O=h.pingedLanes;w=(1<<31-mn(42|s)+1)-1,w&=y&~(C&~O),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,k2(h,w))}else w=rt,w=zo(h,h===Nt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Gs(h,w)||(f=!0,k2(h,w));h=h.next}while(f);Ap=!1}}function T3(){D2()}function D2(){Fd=bp=!1;var s=0;_o!==0&&(k3()&&(s=_o),_o=0);for(var l=_r(),f=null,h=Ud;h!==null;){var y=h.next,w=P2(h,l);w===0?(h.next=null,f===null?Ud=y:f.next=y,y===null&&(Il=f)):(f=h,(s!==0||(w&3)!==0)&&(Fd=!0)),h=y}mc(s)}function P2(s,l){for(var f=s.suspendedLanes,h=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var C=31-mn(w),O=1<<C,z=y[C];z===-1?((O&f)===0||(O&h)!==0)&&(y[C]=Eu(O,l)):z<=l&&(s.expiredLanes|=O),w&=~O}if(l=Nt,f=rt,f=zo(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,f===0||s===l&&(_t===2||_t===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&xr(h),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||Gs(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(h!==null&&xr(h),Go(f)){case 2:case 8:f=Ki;break;case 32:f=Ce;break;case 268435456:f=Ut;break;default:f=Ce}return h=M2.bind(null,s),f=$t(f,h),s.callbackPriority=l,s.callbackNode=f,l}return h!==null&&h!==null&&xr(h),s.callbackPriority=2,s.callbackNode=null,2}function M2(s,l){if(qn!==0&&qn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(Vd()&&s.callbackNode!==f)return null;var h=rt;return h=zo(s,s===Nt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(g2(s,h,l),P2(s,_r()),s.callbackNode!=null&&s.callbackNode===f?M2.bind(null,s):null)}function k2(s,l){if(Vd())return null;g2(s,l,!0)}function C3(){j3(function(){(xt&6)!==0?$t(Us,T3):D2()})}function Sp(){return _o===0&&(_o=bu()),_o}function L2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ko(""+s)}function j2(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function I3(s,l,f,h,y){if(l==="submit"&&f&&f.stateNode===y){var w=L2((y[on]||null).action),C=h.submitter;C&&(l=(l=C[on]||null)?L2(l.formAction):C.getAttribute("formAction"),l!==null&&(w=l,C=null));var O=new Qo("action","action",null,h,y);s.push({event:O,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(_o!==0){var z=C?j2(y,C):new FormData(y);q1(f,{pending:!0,data:z,method:y.method,action:w},null,z)}}else typeof w=="function"&&(O.preventDefault(),z=C?j2(y,C):new FormData(y),q1(f,{pending:!0,data:z,method:y.method,action:w},w,z))},currentTarget:y}]})}}for(var Tp=0;Tp<c1.length;Tp++){var Cp=c1[Tp],N3=Cp.toLowerCase(),R3=Cp[0].toUpperCase()+Cp.slice(1);oi(N3,"on"+R3)}oi(gy,"onAnimationEnd"),oi(vy,"onAnimationIteration"),oi(yy,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(WC,"onTransitionRun"),oi($C,"onTransitionStart"),oi(YC,"onTransitionCancel"),oi(xy,"onTransitionEnd"),ta("onMouseEnter",["mouseout","mouseover"]),ta("onMouseLeave",["mouseout","mouseover"]),ta("onPointerEnter",["pointerout","pointerover"]),ta("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gc));function B2(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var h=s[f],y=h.event;h=h.listeners;e:{var w=void 0;if(l)for(var C=h.length-1;0<=C;C--){var O=h[C],z=O.instance,Q=O.currentTarget;if(O=O.listener,z!==w&&y.isPropagationStopped())break e;w=O,y.currentTarget=Q;try{w(y)}catch(oe){Id(oe)}y.currentTarget=null,w=z}else for(C=0;C<h.length;C++){if(O=h[C],z=O.instance,Q=O.currentTarget,O=O.listener,z!==w&&y.isPropagationStopped())break e;w=O,y.currentTarget=Q;try{w(y)}catch(oe){Id(oe)}y.currentTarget=null,w=z}}}}function Qe(s,l){var f=l[Cu];f===void 0&&(f=l[Cu]=new Set);var h=s+"__bubble";f.has(h)||(V2(l,s,2,!1),f.add(h))}function Ip(s,l,f){var h=0;l&&(h|=4),V2(f,s,h,l)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Np(s){if(!s[Hd]){s[Hd]=!0,Iu.forEach(function(f){f!=="selectionchange"&&(O3.has(f)||Ip(f,!1,s),Ip(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Hd]||(l[Hd]=!0,Ip("selectionchange",!1,l))}}function V2(s,l,f,h){switch(u_(l)){case 2:var y=i4;break;case 8:y=a4;break;default:y=zp}f=y.bind(null,l,f,s),y=void 0,!Hr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),h?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function Rp(s,l,f,h,y){var w=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var O=h.stateNode.containerInfo;if(O===y)break;if(C===4)for(C=h.return;C!==null;){var z=C.tag;if((z===3||z===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;O!==null;){if(C=ea(O),C===null)return;if(z=C.tag,z===5||z===6||z===26||z===27){h=w=C;continue e}O=O.parentNode}}h=h.return}Gf(function(){var Q=w,oe=Fr(f),ce=[];e:{var J=_y.get(s);if(J!==void 0){var ee=Qo,Le=s;switch(s){case"keypress":if(Ci(f)===0)break e;case"keydown":case"keyup":ee=rl;break;case"focusin":Le="focus",ee=el;break;case"focusout":Le="blur",ee=el;break;case"beforeblur":case"afterblur":ee=el;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=zr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=n1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Zf;break;case gy:case vy:case yy:ee=tl;break;case xy:ee=ed;break;case"scroll":case"scrollend":ee=qf;break;case"wheel":ee=il;break;case"copy":case"cut":case"paste":ee=nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Uu;break;case"toggle":case"beforetoggle":ee=nd}var De=(l&4)!==0,Tt=!De&&(s==="scroll"||s==="scrollend"),$=De?J!==null?J+"Capture":null:J;De=[];for(var X=Q,K;X!==null;){var le=X;if(K=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||K===null||$===null||(le=Zs(X,$),le!=null&&De.push(vc(X,le,K))),Tt)break;X=X.return}0<De.length&&(J=new ee(J,Le,null,f,oe),ce.push({event:J,listeners:De}))}}if((l&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",ee=s==="mouseout"||s==="pointerout",J&&f!==ia&&(Le=f.relatedTarget||f.fromElement)&&(ea(Le)||Le[Vr]))break e;if((ee||J)&&(J=oe.window===oe?oe:(J=oe.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(Le=f.relatedTarget||f.toElement,ee=Q,Le=Le?ea(Le):null,Le!==null&&(Tt=a(Le),De=Le.tag,Le!==Tt||De!==5&&De!==27&&De!==6)&&(Le=null)):(ee=null,Le=Q),ee!==Le)){if(De=zr,le="onMouseLeave",$="onMouseEnter",X="mouse",(s==="pointerout"||s==="pointerover")&&(De=Uu,le="onPointerLeave",$="onPointerEnter",X="pointer"),Tt=ee==null?J:bi(ee),K=Le==null?J:bi(Le),J=new De(le,X+"leave",ee,f,oe),J.target=Tt,J.relatedTarget=K,le=null,ea(oe)===Q&&(De=new De($,X+"enter",Le,f,oe),De.target=K,De.relatedTarget=Tt,le=De),Tt=le,ee&&Le)t:{for(De=ee,$=Le,X=0,K=De;K;K=Nl(K))X++;for(K=0,le=$;le;le=Nl(le))K++;for(;0<X-K;)De=Nl(De),X--;for(;0<K-X;)$=Nl($),K--;for(;X--;){if(De===$||$!==null&&De===$.alternate)break t;De=Nl(De),$=Nl($)}De=null}else De=null;ee!==null&&U2(ce,J,ee,De,!1),Le!==null&&Tt!==null&&U2(ce,Tt,Le,De,!0)}}e:{if(J=Q?bi(Q):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Ae=ay;else if(yn(J))if(sy)Ae=GC;else{Ae=HC;var $e=FC}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&Pu(Q.elementType)&&(Ae=ay):Ae=zC;if(Ae&&(Ae=Ae(s,Q))){ua(ce,Ae,f,oe);break e}$e&&$e(s,J,Q),s==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&Ya(J,"number",J.value)}switch($e=Q?bi(Q):window,s){case"focusin":(yn($e)||$e.contentEditable==="true")&&(al=$e,o1=Q,zu=null);break;case"focusout":zu=o1=al=null;break;case"mousedown":l1=!0;break;case"contextmenu":case"mouseup":case"dragend":l1=!1,py(ce,f,oe);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":py(ce,f,oe)}var Te;if(Ri)e:{switch(s){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else tt?re(s,f)&&(ke="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(ke="onCompositionStart");ke&&(T&&f.locale!=="ko"&&(tt||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&tt&&(Te=ku()):(Ti=oe,Ka="value"in Ti?Ti.value:Ti.textContent,tt=!0)),$e=zd(Q,ke),0<$e.length&&(ke=new Bu(ke,s,null,f,oe),ce.push({event:ke,listeners:$e}),Te?ke.data=Te:(Te=xe(f),Te!==null&&(ke.data=Te)))),(Te=b?vn(s,f):nt(s,f))&&(ke=zd(Q,"onBeforeInput"),0<ke.length&&($e=new Bu("onBeforeInput","beforeinput",null,f,oe),ce.push({event:$e,listeners:ke}),$e.data=Te)),I3(ce,s,Q,f,oe)}B2(ce,l)})}function vc(s,l,f){return{instance:s,listener:l,currentTarget:f}}function zd(s,l){for(var f=l+"Capture",h=[];s!==null;){var y=s,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Zs(s,f),y!=null&&h.unshift(vc(s,y,w)),y=Zs(s,l),y!=null&&h.push(vc(s,y,w))),s.tag===3)return h;s=s.return}return[]}function Nl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function U2(s,l,f,h,y){for(var w=l._reactName,C=[];f!==null&&f!==h;){var O=f,z=O.alternate,Q=O.stateNode;if(O=O.tag,z!==null&&z===h)break;O!==5&&O!==26&&O!==27||Q===null||(z=Q,y?(Q=Zs(f,w),Q!=null&&C.unshift(vc(f,Q,z))):y||(Q=Zs(f,w),Q!=null&&C.push(vc(f,Q,z)))),f=f.return}C.length!==0&&s.push({event:l,listeners:C})}var D3=/\r\n?/g,P3=/\u0000|\uFFFD/g;function F2(s){return(typeof s=="string"?s:""+s).replace(D3,`
`).replace(P3,"")}function H2(s,l){return l=F2(l),F2(s)===l}function Gd(){}function St(s,l,f,h,y,w){switch(f){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Ur(s,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Ur(s,""+h);break;case"className":Ai(s,"class",h);break;case"tabIndex":Ai(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(s,f,h);break;case"style":Du(s,h,w);break;case"data":if(l!=="object"){Ai(s,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=Ko(""+h),s.setAttribute(f,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&St(s,l,"name",y.name,y,null),St(s,l,"formEncType",y.formEncType,y,null),St(s,l,"formMethod",y.formMethod,y,null),St(s,l,"formTarget",y.formTarget,y,null)):(St(s,l,"encType",y.encType,y,null),St(s,l,"method",y.method,y,null),St(s,l,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=Ko(""+h),s.setAttribute(f,h);break;case"onClick":h!=null&&(s.onclick=Gd);break;case"onScroll":h!=null&&Qe("scroll",s);break;case"onScrollEnd":h!=null&&Qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}f=Ko(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""+h):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":h===!0?s.setAttribute(f,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,h):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(f,h):s.removeAttribute(f);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(f):s.setAttribute(f,h);break;case"popover":Qe("beforetoggle",s),Qe("toggle",s),$a(s,"popover",h);break;case"xlinkActuate":Hn(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Hn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Hn(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Hn(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Hn(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Hn(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Hn(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Hn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Hn(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":$a(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=e1.get(f)||f,$a(s,f,h))}}function Op(s,l,f,h,y,w){switch(f){case"style":Du(s,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof h=="string"?Ur(s,h):(typeof h=="number"||typeof h=="bigint")&&Ur(s,""+h);break;case"onScroll":h!=null&&Qe("scroll",s);break;case"onScrollEnd":h!=null&&Qe("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qo.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),w=s[on]||null,w=w!=null?w[f]:null,typeof w=="function"&&s.removeEventListener(l,w,y),typeof h=="function")){typeof w!="function"&&w!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,h,y);break e}f in s?s[f]=h:h===!0?s.setAttribute(f,""):$a(s,f,h)}}}function Xn(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",s),Qe("load",s);var h=!1,y=!1,w;for(w in f)if(f.hasOwnProperty(w)){var C=f[w];if(C!=null)switch(w){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:St(s,l,w,C,f,null)}}y&&St(s,l,"srcSet",f.srcSet,f,null),h&&St(s,l,"src",f.src,f,null);return;case"input":Qe("invalid",s);var O=w=C=y=null,z=null,Q=null;for(h in f)if(f.hasOwnProperty(h)){var oe=f[h];if(oe!=null)switch(h){case"name":y=oe;break;case"type":C=oe;break;case"checked":z=oe;break;case"defaultChecked":Q=oe;break;case"value":w=oe;break;case"defaultValue":O=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:St(s,l,h,oe,f,null)}}Ys(s,w,O,z,Q,C,y,!1),Yo(s);return;case"select":Qe("invalid",s),h=C=w=null;for(y in f)if(f.hasOwnProperty(y)&&(O=f[y],O!=null))switch(y){case"value":w=O;break;case"defaultValue":C=O;break;case"multiple":h=O;default:St(s,l,y,O,f,null)}l=w,f=C,s.multiple=!!h,l!=null?ra(s,!!h,l,!1):f!=null&&ra(s,!!h,f,!0);return;case"textarea":Qe("invalid",s),w=y=h=null;for(C in f)if(f.hasOwnProperty(C)&&(O=f[C],O!=null))switch(C){case"value":h=O;break;case"defaultValue":y=O;break;case"children":w=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:St(s,l,C,O,f,null)}Ks(s,h,y,w),Yo(s);return;case"option":for(z in f)if(f.hasOwnProperty(z)&&(h=f[z],h!=null))switch(z){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:St(s,l,z,h,f,null)}return;case"dialog":Qe("beforetoggle",s),Qe("toggle",s),Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":Qe("load",s);break;case"video":case"audio":for(h=0;h<gc.length;h++)Qe(gc[h],s);break;case"image":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"embed":case"source":case"link":Qe("error",s),Qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in f)if(f.hasOwnProperty(Q)&&(h=f[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:St(s,l,Q,h,f,null)}return;default:if(Pu(l)){for(oe in f)f.hasOwnProperty(oe)&&(h=f[oe],h!==void 0&&Op(s,l,oe,h,f,void 0));return}}for(O in f)f.hasOwnProperty(O)&&(h=f[O],h!=null&&St(s,l,O,h,f,null))}function M3(s,l,f,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,C=null,O=null,z=null,Q=null,oe=null;for(ee in f){var ce=f[ee];if(f.hasOwnProperty(ee)&&ce!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":z=ce;default:h.hasOwnProperty(ee)||St(s,l,ee,null,h,ce)}}for(var J in h){var ee=h[J];if(ce=f[J],h.hasOwnProperty(J)&&(ee!=null||ce!=null))switch(J){case"type":w=ee;break;case"name":y=ee;break;case"checked":Q=ee;break;case"defaultChecked":oe=ee;break;case"value":C=ee;break;case"defaultValue":O=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,l));break;default:ee!==ce&&St(s,l,J,ee,h,ce)}}Or(s,C,O,z,Q,oe,w,y);return;case"select":ee=C=O=J=null;for(w in f)if(z=f[w],f.hasOwnProperty(w)&&z!=null)switch(w){case"value":break;case"multiple":ee=z;default:h.hasOwnProperty(w)||St(s,l,w,null,h,z)}for(y in h)if(w=h[y],z=f[y],h.hasOwnProperty(y)&&(w!=null||z!=null))switch(y){case"value":J=w;break;case"defaultValue":O=w;break;case"multiple":C=w;default:w!==z&&St(s,l,y,w,h,z)}l=O,f=C,h=ee,J!=null?ra(s,!!f,J,!1):!!h!=!!f&&(l!=null?ra(s,!!f,l,!0):ra(s,!!f,f?[]:"",!1));return;case"textarea":ee=J=null;for(O in f)if(y=f[O],f.hasOwnProperty(O)&&y!=null&&!h.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:St(s,l,O,null,h,y)}for(C in h)if(y=h[C],w=f[C],h.hasOwnProperty(C)&&(y!=null||w!=null))switch(C){case"value":J=y;break;case"defaultValue":ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==w&&St(s,l,C,y,h,w)}bt(s,J,ee);return;case"option":for(var Le in f)if(J=f[Le],f.hasOwnProperty(Le)&&J!=null&&!h.hasOwnProperty(Le))switch(Le){case"selected":s.selected=!1;break;default:St(s,l,Le,null,h,J)}for(z in h)if(J=h[z],ee=f[z],h.hasOwnProperty(z)&&J!==ee&&(J!=null||ee!=null))switch(z){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:St(s,l,z,J,h,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in f)J=f[De],f.hasOwnProperty(De)&&J!=null&&!h.hasOwnProperty(De)&&St(s,l,De,null,h,J);for(Q in h)if(J=h[Q],ee=f[Q],h.hasOwnProperty(Q)&&J!==ee&&(J!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,l));break;default:St(s,l,Q,J,h,ee)}return;default:if(Pu(l)){for(var Tt in f)J=f[Tt],f.hasOwnProperty(Tt)&&J!==void 0&&!h.hasOwnProperty(Tt)&&Op(s,l,Tt,void 0,h,J);for(oe in h)J=h[oe],ee=f[oe],!h.hasOwnProperty(oe)||J===ee||J===void 0&&ee===void 0||Op(s,l,oe,J,h,ee);return}}for(var $ in f)J=f[$],f.hasOwnProperty($)&&J!=null&&!h.hasOwnProperty($)&&St(s,l,$,null,h,J);for(ce in h)J=h[ce],ee=f[ce],!h.hasOwnProperty(ce)||J===ee||J==null&&ee==null||St(s,l,ce,J,h,ee)}var Dp=null,Pp=null;function qd(s){return s.nodeType===9?s:s.ownerDocument}function z2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G2(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Mp(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var kp=null;function k3(){var s=window.event;return s&&s.type==="popstate"?s===kp?!1:(kp=s,!0):(kp=null,!1)}var q2=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,X2=typeof Promise=="function"?Promise:void 0,j3=typeof queueMicrotask=="function"?queueMicrotask:typeof X2<"u"?function(s){return X2.resolve(null).then(s).catch(B3)}:q2;function B3(s){setTimeout(function(){throw s})}function ds(s){return s==="head"}function W2(s,l){var f=l,h=0,y=0;do{var w=f.nextSibling;if(s.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(0<h&&8>h){f=h;var C=s.ownerDocument;if(f&1&&yc(C.documentElement),f&2&&yc(C.body),f&4)for(f=C.head,yc(f),C=f.firstChild;C;){var O=C.nextSibling,z=C.nodeName;C[qs]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&C.rel.toLowerCase()==="stylesheet"||f.removeChild(C),C=O}}if(y===0){s.removeChild(w),Tc(l);return}y--}else f==="$"||f==="$?"||f==="$!"?y++:h=f.charCodeAt(0)-48;else h=0;f=w}while(f);Tc(l)}function Lp(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Lp(f),Wa(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function V3(s,l,f,h){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[qs])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=ui(s.nextSibling),s===null)break}return null}function U3(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=ui(s.nextSibling),s===null))return null;return s}function jp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function F3(s,l){var f=s.ownerDocument;if(s.data!=="$?"||f.readyState==="complete")l();else{var h=function(){l(),f.removeEventListener("DOMContentLoaded",h)};f.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function ui(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var Bp=null;function $2(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return s;l--}else f==="/$"&&l++}s=s.previousSibling}return null}function Y2(s,l,f){switch(l=qd(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function yc(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Wa(s)}var Kr=new Map,K2=new Set;function Xd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ea=ne.d;ne.d={f:H3,r:z3,D:G3,C:q3,L:X3,m:W3,X:Y3,S:$3,M:K3};function H3(){var s=Ea.f(),l=jd();return s||l}function z3(s){var l=Ei(s);l!==null&&l.tag===5&&l.type==="form"?gx(l):Ea.r(s)}var Rl=typeof document>"u"?null:document;function Q2(s,l,f){var h=Rl;if(h&&typeof l=="string"&&l){var y=ln(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),K2.has(y)||(K2.add(y),s={rel:s,crossOrigin:f,href:l},h.querySelector(y)===null&&(l=h.createElement("link"),Xn(l,"link",s),en(l),h.head.appendChild(l)))}}function G3(s){Ea.D(s),Q2("dns-prefetch",s,null)}function q3(s,l){Ea.C(s,l),Q2("preconnect",s,l)}function X3(s,l,f){Ea.L(s,l,f);var h=Rl;if(h&&s&&l){var y='link[rel="preload"][as="'+ln(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+ln(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+ln(f.imageSizes)+'"]')):y+='[href="'+ln(s)+'"]';var w=y;switch(l){case"style":w=Ol(s);break;case"script":w=Dl(s)}Kr.has(w)||(s=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),Kr.set(w,s),h.querySelector(y)!==null||l==="style"&&h.querySelector(xc(w))||l==="script"&&h.querySelector(_c(w))||(l=h.createElement("link"),Xn(l,"link",s),en(l),h.head.appendChild(l)))}}function W3(s,l){Ea.m(s,l);var f=Rl;if(f&&s){var h=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+ln(h)+'"][href="'+ln(s)+'"]',w=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Dl(s)}if(!Kr.has(w)&&(s=p({rel:"modulepreload",href:s},l),Kr.set(w,s),f.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(_c(w)))return}h=f.createElement("link"),Xn(h,"link",s),en(h),f.head.appendChild(h)}}}function $3(s,l,f){Ea.S(s,l,f);var h=Rl;if(h&&s){var y=cr(h).hoistableStyles,w=Ol(s);l=l||"default";var C=y.get(w);if(!C){var O={loading:0,preload:null};if(C=h.querySelector(xc(w)))O.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},f),(f=Kr.get(w))&&Vp(s,f);var z=C=h.createElement("link");en(z),Xn(z,"link",s),z._p=new Promise(function(Q,oe){z.onload=Q,z.onerror=oe}),z.addEventListener("load",function(){O.loading|=1}),z.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Wd(C,l,h)}C={type:"stylesheet",instance:C,count:1,state:O},y.set(w,C)}}}function Y3(s,l){Ea.X(s,l);var f=Rl;if(f&&s){var h=cr(f).hoistableScripts,y=Dl(s),w=h.get(y);w||(w=f.querySelector(_c(y)),w||(s=p({src:s,async:!0},l),(l=Kr.get(y))&&Up(s,l),w=f.createElement("script"),en(w),Xn(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function K3(s,l){Ea.M(s,l);var f=Rl;if(f&&s){var h=cr(f).hoistableScripts,y=Dl(s),w=h.get(y);w||(w=f.querySelector(_c(y)),w||(s=p({src:s,async:!0,type:"module"},l),(l=Kr.get(y))&&Up(s,l),w=f.createElement("script"),en(w),Xn(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function Z2(s,l,f,h){var y=(y=ye.current)?Xd(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Ol(f.href),f=cr(y).hoistableStyles,h=f.get(l),h||(h={type:"style",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Ol(f.href);var w=cr(y).hoistableStyles,C=w.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,C),(w=y.querySelector(xc(s)))&&!w._p&&(C.instance=w,C.state.loading=5),Kr.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Kr.set(s,f),w||Q3(y,s,f,C.state))),l&&h===null)throw Error(r(528,""));return C}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Dl(f),f=cr(y).hoistableScripts,h=f.get(l),h||(h={type:"script",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ol(s){return'href="'+ln(s)+'"'}function xc(s){return'link[rel="stylesheet"]['+s+"]"}function J2(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function Q3(s,l,f,h){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=s.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),Xn(l,"link",f),en(l),s.head.appendChild(l))}function Dl(s){return'[src="'+ln(s)+'"]'}function _c(s){return"script[async]"+s}function e_(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var h=s.querySelector('style[data-href~="'+ln(f.href)+'"]');if(h)return l.instance=h,en(h),h;var y=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),en(h),Xn(h,"style",y),Wd(h,f.precedence,s),l.instance=h;case"stylesheet":y=Ol(f.href);var w=s.querySelector(xc(y));if(w)return l.state.loading|=4,l.instance=w,en(w),w;h=J2(f),(y=Kr.get(y))&&Vp(h,y),w=(s.ownerDocument||s).createElement("link"),en(w);var C=w;return C._p=new Promise(function(O,z){C.onload=O,C.onerror=z}),Xn(w,"link",h),l.state.loading|=4,Wd(w,f.precedence,s),l.instance=w;case"script":return w=Dl(f.src),(y=s.querySelector(_c(w)))?(l.instance=y,en(y),y):(h=f,(y=Kr.get(w))&&(h=p({},f),Up(h,y)),s=s.ownerDocument||s,y=s.createElement("script"),en(y),Xn(y,"link",h),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,Wd(h,f.precedence,s));return l.instance}function Wd(s,l,f){for(var h=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,w=y,C=0;C<h.length;C++){var O=h[C];if(O.dataset.precedence===l)w=O;else if(w!==y)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function Vp(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Up(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var $d=null;function t_(s,l,f){if($d===null){var h=new Map,y=$d=new Map;y.set(f,h)}else y=$d,h=y.get(f),h||(h=new Map,y.set(f,h));if(h.has(s))return h;for(h.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var w=f[y];if(!(w[qs]||w[gn]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(l)||"";C=s+C;var O=h.get(C);O?O.push(w):h.set(C,[w])}}return h}function n_(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function Z3(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function r_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var wc=null;function J3(){}function e4(s,l,f){if(wc===null)throw Error(r(475));var h=wc;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ol(f.href),w=s.querySelector(xc(y));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Yd.bind(h),s.then(h,h)),l.state.loading|=4,l.instance=w,en(w);return}w=s.ownerDocument||s,f=J2(f),(y=Kr.get(y))&&Vp(f,y),w=w.createElement("link"),en(w);var C=w;C._p=new Promise(function(O,z){C.onload=O,C.onerror=z}),Xn(w,"link",f),l.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(h.count++,l=Yd.bind(h),s.addEventListener("load",l),s.addEventListener("error",l))}}function t4(){if(wc===null)throw Error(r(475));var s=wc;return s.stylesheets&&s.count===0&&Fp(s,s.stylesheets),0<s.count?function(l){var f=setTimeout(function(){if(s.stylesheets&&Fp(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(f)}}:null}function Yd(){if(this.count--,this.count===0){if(this.stylesheets)Fp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Kd=null;function Fp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Kd=new Map,l.forEach(n4,s),Kd=null,Yd.call(s))}function n4(s,l){if(!(l.state.loading&4)){var f=Kd.get(s);if(f)var h=f.get(null);else{f=new Map,Kd.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var C=y[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(f.set(C.dataset.precedence,C),h=C)}h&&f.set(null,h)}y=l.instance,C=y.getAttribute("data-precedence"),w=f.get(C)||h,w===h&&f.set(null,y),f.set(C,y),this.count++,h=Yd.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),w?w.parentNode.insertBefore(y,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Ec={$$typeof:P,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function r4(s,l,f,h,y,w,C,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.hiddenUpdates=Zi(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function i_(s,l,f,h,y,w,C,O,z,Q,oe,ce){return s=new r4(s,l,f,C,O,z,Q,ce),l=1,w===!0&&(l|=24),w=Pr(3,null,null,l),s.current=w,w.stateNode=s,l=E1(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:h,isDehydrated:f,cache:l},T1(w),s}function a_(s){return s?(s=ul,s):ul}function s_(s,l,f,h,y,w){y=a_(y),h.context===null?h.context=y:h.pendingContext=y,h=Ja(l),h.payload={element:f},w=w===void 0?null:w,w!==null&&(h.callback=w),f=es(s,h,l),f!==null&&(Br(f,s,l),Zu(f,s,l))}function o_(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function Hp(s,l){o_(s,l),(s=s.alternate)&&o_(s,l)}function l_(s){if(s.tag===13){var l=ll(s,67108864);l!==null&&Br(l,s,67108864),Hp(s,67108864)}}var Qd=!0;function i4(s,l,f,h){var y=te.T;te.T=null;var w=ne.p;try{ne.p=2,zp(s,l,f,h)}finally{ne.p=w,te.T=y}}function a4(s,l,f,h){var y=te.T;te.T=null;var w=ne.p;try{ne.p=8,zp(s,l,f,h)}finally{ne.p=w,te.T=y}}function zp(s,l,f,h){if(Qd){var y=Gp(h);if(y===null)Rp(s,l,h,Zd,f),c_(s,h);else if(o4(y,s,l,f,h))h.stopPropagation();else if(c_(s,h),l&4&&-1<s4.indexOf(s)){for(;y!==null;){var w=Ei(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=ii(w.pendingLanes);if(C!==0){var O=w;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var z=1<<31-mn(C);O.entanglements[1]|=z,C&=~z}Li(w),(xt&6)===0&&(kd=_r()+500,mc(0))}}break;case 13:O=ll(w,2),O!==null&&Br(O,w,2),jd(),Hp(w,2)}if(w=Gp(h),w===null&&Rp(s,l,h,Zd,f),w===y)break;y=w}y!==null&&h.stopPropagation()}else Rp(s,l,h,null,f)}}function Gp(s){return s=Fr(s),qp(s)}var Zd=null;function qp(s){if(Zd=null,s=ea(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Zd=s,null}function u_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wu()){case Us:return 2;case Ki:return 8;case Ce:case et:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var Xp=!1,hs=null,ps=null,ms=null,bc=new Map,Ac=new Map,gs=[],s4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c_(s,l){switch(s){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":bc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(l.pointerId)}}function Sc(s,l,f,h,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:f,eventSystemFlags:h,nativeEvent:w,targetContainers:[y]},l!==null&&(l=Ei(l),l!==null&&l_(l)),s):(s.eventSystemFlags|=h,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function o4(s,l,f,h,y){switch(l){case"focusin":return hs=Sc(hs,s,l,f,h,y),!0;case"dragenter":return ps=Sc(ps,s,l,f,h,y),!0;case"mouseover":return ms=Sc(ms,s,l,f,h,y),!0;case"pointerover":var w=y.pointerId;return bc.set(w,Sc(bc.get(w)||null,s,l,f,h,y)),!0;case"gotpointercapture":return w=y.pointerId,Ac.set(w,Sc(Ac.get(w)||null,s,l,f,h,y)),!0}return!1}function f_(s){var l=ea(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,jf(s.priority,function(){if(f.tag===13){var h=jr();h=Ga(h);var y=ll(f,h);y!==null&&Br(y,f,h),Hp(f,h)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=Gp(s.nativeEvent);if(f===null){f=s.nativeEvent;var h=new f.constructor(f.type,f);ia=h,f.target.dispatchEvent(h),ia=null}else return l=Ei(f),l!==null&&l_(l),s.blockedOn=f,!1;l.shift()}return!0}function d_(s,l,f){Jd(s)&&f.delete(l)}function l4(){Xp=!1,hs!==null&&Jd(hs)&&(hs=null),ps!==null&&Jd(ps)&&(ps=null),ms!==null&&Jd(ms)&&(ms=null),bc.forEach(d_),Ac.forEach(d_)}function eh(s,l){s.blockedOn===l&&(s.blockedOn=null,Xp||(Xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,l4)))}var th=null;function h_(s){th!==s&&(th=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){th===s&&(th=null);for(var l=0;l<s.length;l+=3){var f=s[l],h=s[l+1],y=s[l+2];if(typeof h!="function"){if(qp(h||f)===null)continue;break}var w=Ei(f);w!==null&&(s.splice(l,3),l-=3,q1(w,{pending:!0,data:y,method:f.method,action:h},h,y))}}))}function Tc(s){function l(z){return eh(z,s)}hs!==null&&eh(hs,s),ps!==null&&eh(ps,s),ms!==null&&eh(ms,s),bc.forEach(l),Ac.forEach(l);for(var f=0;f<gs.length;f++){var h=gs[f];h.blockedOn===s&&(h.blockedOn=null)}for(;0<gs.length&&(f=gs[0],f.blockedOn===null);)f_(f),f.blockedOn===null&&gs.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(h=0;h<f.length;h+=3){var y=f[h],w=f[h+1],C=y[on]||null;if(typeof w=="function")C||h_(f);else if(C){var O=null;if(w&&w.hasAttribute("formAction")){if(y=w,C=w[on]||null)O=C.formAction;else if(qp(y)!==null)continue}else O=C.action;typeof O=="function"?f[h+1]=O:(f.splice(h,3),h-=3),h_(f)}}}function Wp(s){this._internalRoot=s}nh.prototype.render=Wp.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,h=jr();s_(f,h,s,l,null,null)},nh.prototype.unmount=Wp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;s_(s.current,2,null,s,null,null),jd(),l[Vr]=null}};function nh(s){this._internalRoot=s}nh.prototype.unstable_scheduleHydration=function(s){if(s){var l=qa();s={blockedOn:null,target:s,priority:l};for(var f=0;f<gs.length&&l!==0&&l<gs[f].priority;f++);gs.splice(f,0,s),f===0&&f_(s)}};var p_=e.version;if(p_!=="19.1.0")throw Error(r(527,p_,"19.1.0"));ne.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=c(l),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var u4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{ut=rh.inject(u4),dt=rh}catch{}}return Ic.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,h="",y=Rx,w=Ox,C=Dx,O=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks)),l=i_(s,1,!1,null,null,f,h,y,w,C,O,null),s[Vr]=l.current,Np(s),new Wp(l)},Ic.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var h=!1,y="",w=Rx,C=Ox,O=Dx,z=null,Q=null;return f!=null&&(f.unstable_strictMode===!0&&(h=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(C=f.onCaughtError),f.onRecoverableError!==void 0&&(O=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(z=f.unstable_transitionCallbacks),f.formState!==void 0&&(Q=f.formState)),l=i_(s,1,!0,l,f??null,h,y,w,C,O,z,Q),l.context=a_(null),f=l.current,h=jr(),h=Ga(h),y=Ja(h),y.callback=null,es(f,y,h),f=h,l.current.lanes=f,Ji(l,f),Li(l),s[Vr]=l.current,Np(s),new nh(l)},Ic.version="19.1.0",Ic}var A_;function x4(){if(A_)return Kp.exports;A_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kp.exports=y4(),Kp.exports}var _4=x4(),Nc={},S_;function w4(){if(S_)return Nc;S_=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.parse=o,Nc.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function o(x,_){const E=new a,A=x.length;if(A<2)return E;const S=(_==null?void 0:_.decode)||p;let I=0;do{const N=x.indexOf("=",I);if(N===-1)break;const P=x.indexOf(";",I),V=P===-1?A:P;if(N>V){I=x.lastIndexOf(";",N-1)+1;continue}const F=u(x,I,N),W=c(x,N,F),D=x.slice(F,W);if(E[D]===void 0){let R=u(x,N+1,V),M=c(x,V,R);const L=S(x.slice(R,M));E[D]=L}I=V+1}while(I<A);return E}function u(x,_,E){do{const A=x.charCodeAt(_);if(A!==32&&A!==9)return _}while(++_<E);return E}function c(x,_,E){for(;_>E;){const A=x.charCodeAt(--_);if(A!==32&&A!==9)return _+1}return E}function d(x,_,E){const A=(E==null?void 0:E.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const S=A(_);if(!e.test(S))throw new TypeError(`argument val is invalid: ${_}`);let I=x+"="+S;if(!E)return I;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);I+="; Max-Age="+E.maxAge}if(E.domain){if(!t.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);I+="; Domain="+E.domain}if(E.path){if(!r.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);I+="; Path="+E.path}if(E.expires){if(!g(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);I+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(I+="; HttpOnly"),E.secure&&(I+="; Secure"),E.partitioned&&(I+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return I}function p(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function g(x){return i.call(x)==="[object Date]"}return Nc}w4();var T_="popstate";function E4(n={}){function e(r,i){let{pathname:a,search:o,hash:u}=r.location;return $m("",{pathname:a,search:o,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ef(i)}return A4(e,t,null,n)}function Vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function b4(){return Math.random().toString(36).substring(2,10)}function C_(n,e){return{usr:n.state,key:n.key,idx:e}}function $m(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?iu(e):e,state:t,key:e&&e.key||r||b4()}}function ef({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function iu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function A4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,u="POP",c=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function g(){u="POP";let S=p(),I=S==null?null:S-d;d=S,c&&c({action:u,location:A.location,delta:I})}function x(S,I){u="PUSH";let N=$m(A.location,S,I);d=p()+1;let P=C_(N,d),V=A.createHref(N);try{o.pushState(P,"",V)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(V)}a&&c&&c({action:u,location:A.location,delta:1})}function _(S,I){u="REPLACE";let N=$m(A.location,S,I);d=p();let P=C_(N,d),V=A.createHref(N);o.replaceState(P,"",V),a&&c&&c({action:u,location:A.location,delta:0})}function E(S){return S4(S)}let A={get action(){return u},get location(){return n(i,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(T_,g),c=S,()=>{i.removeEventListener(T_,g),c=null}},createHref(S){return e(i,S)},createURL:E,encodeLocation(S){let I=E(S);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:x,replace:_,go(S){return o.go(S)}};return A}function S4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Vt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:ef(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function _b(n,e,t="/"){return T4(n,e,t,!1)}function T4(n,e,t,r){let i=typeof e=="string"?iu(e):e,a=Ma(i.pathname||"/",t);if(a==null)return null;let o=wb(n);C4(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let d=B4(a);u=L4(o[c],d,r)}return u}function wb(n,e=[],t=[],r=""){let i=(a,o,u)=>{let c={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Vt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let d=Ra([r,c.relativePath]),p=t.concat(c);a.children&&a.children.length>0&&(Vt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),wb(a.children,e,p,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:M4(d,a.index),routesMeta:p})};return n.forEach((a,o)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,o);else for(let c of Eb(a.path))i(a,o,c)}),e}function Eb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Eb(r.join("/")),u=[];return u.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&u.push(...o),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function C4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:k4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var I4=/^:[\w-]+$/,N4=3,R4=2,O4=1,D4=10,P4=-2,I_=n=>n==="*";function M4(n,e){let t=n.split("/"),r=t.length;return t.some(I_)&&(r+=P4),e&&(r+=R4),t.filter(i=>!I_(i)).reduce((i,a)=>i+(I4.test(a)?N4:a===""?O4:D4),r)}function k4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function L4(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Lh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),x=c.route;if(!g&&d&&t&&!r[r.length-1].route.index&&(g=Lh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Ra([a,g.pathname]),pathnameBase:H4(Ra([a,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(a=Ra([a,g.pathnameBase]))}return o}function Lh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=j4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:g},x)=>{if(p==="*"){let E=u[x]||"";o=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const _=u[x];return g&&!_?d[p]=void 0:d[p]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:n}}function j4(n,e=!1,t=!0){mi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function B4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ma(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function V4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?iu(n):n;return{pathname:t?t.startsWith("/")?t:U4(t,e):e,search:z4(r),hash:G4(i)}}function U4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function em(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function F4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Bg(n){let e=F4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Vg(n,e,t,r=!1){let i;typeof n=="string"?i=iu(n):(i={...n},Vt(!i.pathname||!i.pathname.includes("?"),em("?","pathname","search",i)),Vt(!i.pathname||!i.pathname.includes("#"),em("#","pathname","hash",i)),Vt(!i.search||!i.search.includes("#"),em("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,u;if(o==null)u=t;else{let g=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}u=g>=0?e[g]:"/"}let c=V4(i,u),d=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}var Ra=n=>n.join("/").replace(/\/\/+/g,"/"),H4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),z4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,G4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function q4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var bb=["POST","PUT","PATCH","DELETE"];new Set(bb);var X4=["GET",...bb];new Set(X4);var au=B.createContext(null);au.displayName="DataRouter";var m0=B.createContext(null);m0.displayName="DataRouterState";var Ab=B.createContext({isTransitioning:!1});Ab.displayName="ViewTransition";var W4=B.createContext(new Map);W4.displayName="Fetchers";var $4=B.createContext(null);$4.displayName="Await";var gi=B.createContext(null);gi.displayName="Navigation";var yf=B.createContext(null);yf.displayName="Location";var vi=B.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var Ug=B.createContext(null);Ug.displayName="RouteError";function Y4(n,{relative:e}={}){Vt(su(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=B.useContext(gi),{hash:i,pathname:a,search:o}=xf(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Ra([t,a])),r.createHref({pathname:u,search:o,hash:i})}function su(){return B.useContext(yf)!=null}function yi(){return Vt(su(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(yf).location}var Sb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Tb(n){B.useContext(gi).static||B.useLayoutEffect(n)}function Un(){let{isDataRoute:n}=B.useContext(vi);return n?uI():K4()}function K4(){Vt(su(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(au),{basename:e,navigator:t}=B.useContext(gi),{matches:r}=B.useContext(vi),{pathname:i}=yi(),a=JSON.stringify(Bg(r)),o=B.useRef(!1);return Tb(()=>{o.current=!0}),B.useCallback((c,d={})=>{if(mi(o.current,Sb),!o.current)return;if(typeof c=="number"){t.go(c);return}let p=Vg(c,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ra([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,a,i,n])}B.createContext(null);function Q4(){let{matches:n}=B.useContext(vi),e=n[n.length-1];return e?e.params:{}}function xf(n,{relative:e}={}){let{matches:t}=B.useContext(vi),{pathname:r}=yi(),i=JSON.stringify(Bg(t));return B.useMemo(()=>Vg(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Z4(n,e){return Cb(n,e)}function Cb(n,e,t,r){var I;Vt(su(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=B.useContext(gi),{matches:a}=B.useContext(vi),o=a[a.length-1],u=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",p=o&&o.route;{let N=p&&p.path||"";Ib(c,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let g=yi(),x;if(e){let N=typeof e=="string"?iu(e):e;Vt(d==="/"||((I=N.pathname)==null?void 0:I.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=g;let _=x.pathname||"/",E=_;if(d!=="/"){let N=d.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let A=_b(n,{pathname:E});mi(p||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),mi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=rI(A&&A.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Ra([d,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?d:Ra([d,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,t,r);return e&&S?B.createElement(yf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},S):S}function J4(){let n=lI(),e=q4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:a},"ErrorBoundary")," or"," ",B.createElement("code",{style:a},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:i},t):null,o)}var eI=B.createElement(J4,null),tI=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?B.createElement(vi.Provider,{value:this.props.routeContext},B.createElement(Ug.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nI({routeContext:n,match:e,children:t}){let r=B.useContext(au);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(vi.Provider,{value:n},t)}function rI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let c=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);Vt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:g}=t,x=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||x){o=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,d,p)=>{let g,x=!1,_=null,E=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,_=d.route.errorElement||eI,o&&(u<0&&p===0?(Ib("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,E=null):u===p&&(x=!0,E=d.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,p+1)),S=()=>{let I;return g?I=_:x?I=E:d.route.Component?I=B.createElement(d.route.Component,null):d.route.element?I=d.route.element:I=c,B.createElement(nI,{match:d,routeContext:{outlet:c,matches:A,isDataRoute:t!=null},children:I})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?B.createElement(tI,{location:t.location,revalidation:t.revalidation,component:_,error:g,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}function Fg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iI(n){let e=B.useContext(au);return Vt(e,Fg(n)),e}function aI(n){let e=B.useContext(m0);return Vt(e,Fg(n)),e}function sI(n){let e=B.useContext(vi);return Vt(e,Fg(n)),e}function Hg(n){let e=sI(n),t=e.matches[e.matches.length-1];return Vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function oI(){return Hg("useRouteId")}function lI(){var r;let n=B.useContext(Ug),e=aI("useRouteError"),t=Hg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function uI(){let{router:n}=iI("useNavigate"),e=Hg("useNavigate"),t=B.useRef(!1);return Tb(()=>{t.current=!0}),B.useCallback(async(i,a={})=>{mi(t.current,Sb),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var N_={};function Ib(n,e,t){!e&&!N_[n]&&(N_[n]=!0,mi(!1,t))}B.memo(cI);function cI({routes:n,future:e,state:t}){return Cb(n,void 0,t,e)}function Bi({to:n,replace:e,state:t,relative:r}){Vt(su(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=B.useContext(gi);mi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=B.useContext(vi),{pathname:o}=yi(),u=Un(),c=Vg(n,Bg(a),o,r==="path"),d=JSON.stringify(c);return B.useEffect(()=>{u(JSON.parse(d),{replace:e,state:t,relative:r})},[u,d,r,e,t]),null}function Gt(n){Vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fI({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Vt(!su(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),u=B.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=iu(t));let{pathname:c="/",search:d="",hash:p="",state:g=null,key:x="default"}=t,_=B.useMemo(()=>{let E=Ma(c,o);return E==null?null:{location:{pathname:E,search:d,hash:p,state:g,key:x},navigationType:r}},[o,c,d,p,g,x,r]);return mi(_!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:B.createElement(gi.Provider,{value:u},B.createElement(yf.Provider,{children:e,value:_}))}function dI({children:n,location:e}){return Z4(Ym(n),e)}function Ym(n,e=[]){let t=[];return B.Children.forEach(n,(r,i)=>{if(!B.isValidElement(r))return;let a=[...e,i];if(r.type===B.Fragment){t.push.apply(t,Ym(r.props.children,a));return}Vt(r.type===Gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ym(r.props.children,a)),t.push(o)}),t}var xh="get",_h="application/x-www-form-urlencoded";function g0(n){return n!=null&&typeof n.tagName=="string"}function hI(n){return g0(n)&&n.tagName.toLowerCase()==="button"}function pI(n){return g0(n)&&n.tagName.toLowerCase()==="form"}function mI(n){return g0(n)&&n.tagName.toLowerCase()==="input"}function gI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vI(n,e){return n.button===0&&(!e||e==="_self")&&!gI(n)}var ih=null;function yI(){if(ih===null)try{new FormData(document.createElement("form"),0),ih=!1}catch{ih=!0}return ih}var xI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tm(n){return n!=null&&!xI.has(n)?(mi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):n}function _I(n,e){let t,r,i,a,o;if(pI(n)){let u=n.getAttribute("action");r=u?Ma(u,e):null,t=n.getAttribute("method")||xh,i=tm(n.getAttribute("enctype"))||_h,a=new FormData(n)}else if(hI(n)||mI(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?Ma(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||xh,i=tm(n.getAttribute("formenctype"))||tm(u.getAttribute("enctype"))||_h,a=new FormData(u,n),!yI()){let{name:d,type:p,value:g}=n;if(p==="image"){let x=d?`${d}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else d&&a.append(d,g)}}else{if(g0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xh,r=null,i=_h,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function zg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function wI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function bI(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await wI(a,t);return o.links?o.links():[]}return[]}));return CI(r.flat(1).filter(EI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function R_(n,e,t,r,i,a){let o=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,u=(c,d)=>{var p;return t[d].pathname!==c.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>o(c,d)||u(c,d)):a==="data"?e.filter((c,d)=>{var g;let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(o(c,d)||u(c,d))return!0;if(c.route.shouldRevalidate){let x=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function AI(n,e,{includeHydrateFallback:t}={}){return SI(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function SI(n){return[...new Set(n)]}function TI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function CI(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(TI(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var II=new Set([100,101,204,205]);function NI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ma(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Nb(){let n=B.useContext(au);return zg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function RI(){let n=B.useContext(m0);return zg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Gg=B.createContext(void 0);Gg.displayName="FrameworkContext";function Rb(){let n=B.useContext(Gg);return zg(n,"You must render this element inside a <HydratedRouter> element"),n}function OI(n,e){let t=B.useContext(Gg),[r,i]=B.useState(!1),[a,o]=B.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,x=B.useRef(null);B.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let A=I=>{I.forEach(N=>{o(N.isIntersecting)})},S=new IntersectionObserver(A,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[n]),B.useEffect(()=>{if(r){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[r]);let _=()=>{i(!0)},E=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:Rc(u,_),onBlur:Rc(c,E),onMouseEnter:Rc(d,_),onMouseLeave:Rc(p,E),onTouchStart:Rc(g,_)}]:[!1,x,{}]}function Rc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function DI({page:n,...e}){let{router:t}=Nb(),r=B.useMemo(()=>_b(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?B.createElement(MI,{page:n,matches:r,...e}):null}function PI(n){let{manifest:e,routeModules:t}=Rb(),[r,i]=B.useState([]);return B.useEffect(()=>{let a=!1;return bI(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function MI({page:n,matches:e,...t}){let r=yi(),{manifest:i,routeModules:a}=Rb(),{basename:o}=Nb(),{loaderData:u,matches:c}=RI(),d=B.useMemo(()=>R_(n,e,c,i,r,"data"),[n,e,c,i,r]),p=B.useMemo(()=>R_(n,e,c,i,r,"assets"),[n,e,c,i,r]),g=B.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,A=!1;if(e.forEach(I=>{var P;let N=i.routes[I.route.id];!N||!N.hasLoader||(!d.some(V=>V.route.id===I.route.id)&&I.route.id in u&&((P=a[I.route.id])!=null&&P.shouldRevalidate)||N.hasClientLoader?A=!0:E.add(I.route.id))}),E.size===0)return[];let S=NI(n,o);return A&&E.size>0&&S.searchParams.set("_routes",e.filter(I=>E.has(I.route.id)).map(I=>I.route.id).join(",")),[S.pathname+S.search]},[o,u,r,i,d,e,n,a]),x=B.useMemo(()=>AI(p,i),[p,i]),_=PI(p);return B.createElement(B.Fragment,null,g.map(E=>B.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),x.map(E=>B.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),_.map(({key:E,link:A})=>B.createElement("link",{key:E,...A})))}function kI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ob=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ob&&(window.__reactRouterVersion="7.6.1")}catch{}function LI({basename:n,children:e,window:t}){let r=B.useRef();r.current==null&&(r.current=E4({window:t,v5Compat:!0}));let i=r.current,[a,o]=B.useState({action:i.action,location:i.location}),u=B.useCallback(c=>{B.startTransition(()=>o(c))},[o]);return B.useLayoutEffect(()=>i.listen(u),[i,u]),B.createElement(fI,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Db=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=B.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:u,target:c,to:d,preventScrollReset:p,viewTransition:g,...x},_){let{basename:E}=B.useContext(gi),A=typeof d=="string"&&Db.test(d),S,I=!1;if(typeof d=="string"&&A&&(S=d,Ob))try{let M=new URL(window.location.href),L=d.startsWith("//")?new URL(M.protocol+d):new URL(d),H=Ma(L.pathname,E);L.origin===M.origin&&H!=null?d=H+L.search+L.hash:I=!0}catch{mi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=Y4(d,{relative:i}),[P,V,F]=OI(r,x),W=UI(d,{replace:o,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:g});function D(M){e&&e(M),M.defaultPrevented||W(M)}let R=B.createElement("a",{...x,...F,href:S||N,onClick:I||a?e:D,ref:kI(_,V),target:c,"data-discover":!A&&t==="render"?"true":void 0});return P&&!A?B.createElement(B.Fragment,null,R,B.createElement(DI,{page:N})):R});lt.displayName="Link";var jI=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:u,children:c,...d},p){let g=xf(o,{relative:d.relative}),x=yi(),_=B.useContext(m0),{navigator:E,basename:A}=B.useContext(gi),S=_!=null&&qI(g)&&u===!0,I=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,N=x.pathname,P=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(N=N.toLowerCase(),P=P?P.toLowerCase():null,I=I.toLowerCase()),P&&A&&(P=Ma(P,A)||P);const V=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let F=N===I||!i&&N.startsWith(I)&&N.charAt(V)==="/",W=P!=null&&(P===I||!i&&P.startsWith(I)&&P.charAt(I.length)==="/"),D={isActive:F,isPending:W,isTransitioning:S},R=F?e:void 0,M;typeof r=="function"?M=r(D):M=[r,F?"active":null,W?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(D):a;return B.createElement(lt,{...d,"aria-current":R,className:M,ref:p,style:L,to:o,viewTransition:u},typeof c=="function"?c(D):c)});jI.displayName="NavLink";var BI=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=xh,action:u,onSubmit:c,relative:d,preventScrollReset:p,viewTransition:g,...x},_)=>{let E=zI(),A=GI(u,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",I=typeof u=="string"&&Db.test(u),N=P=>{if(c&&c(P),P.defaultPrevented)return;P.preventDefault();let V=P.nativeEvent.submitter,F=(V==null?void 0:V.getAttribute("formmethod"))||o;E(V||P.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return B.createElement("form",{ref:_,method:S,action:A,onSubmit:r?c:N,...x,"data-discover":!I&&n==="render"?"true":void 0})});BI.displayName="Form";function VI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pb(n){let e=B.useContext(au);return Vt(e,VI(n)),e}function UI(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let u=Un(),c=yi(),d=xf(n,{relative:a});return B.useCallback(p=>{if(vI(p,e)){p.preventDefault();let g=t!==void 0?t:ef(c)===ef(d);u(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,u,d,t,r,e,n,i,a,o])}var FI=0,HI=()=>`__${String(++FI)}__`;function zI(){let{router:n}=Pb("useSubmit"),{basename:e}=B.useContext(gi),t=oI();return B.useCallback(async(r,i={})=>{let{action:a,method:o,encType:u,formData:c,body:d}=_I(r,e);if(i.navigate===!1){let p=i.fetcherKey||HI();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function GI(n,{relative:e}={}){let{basename:t}=B.useContext(gi),r=B.useContext(vi);Vt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...xf(n||".",{relative:e})},o=yi();if(n==null){a.search=o.search;let u=new URLSearchParams(a.search),c=u.getAll("index");if(c.some(p=>p==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ra([t,a.pathname])),ef(a)}function qI(n,e={}){let t=B.useContext(Ab);Vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Pb("useViewTransitionState"),i=xf(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Ma(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ma(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Lh(i.pathname,o)!=null||Lh(i.pathname,a)!=null}[...II];const XI=()=>{};var O_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},WI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],u=n[t++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,u=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,p=a>>2,g=(a&3)<<4|u>>4;let x=(u&15)<<2|d>>6,_=d&63;c||(_=64,o||(x=64)),r.push(t[p],t[g],t[x],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Mb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||u==null||d==null||g==null)throw new $I;const x=a<<2|u>>4;if(r.push(x),d!==64){const _=u<<4&240|d>>2;if(r.push(_),g!==64){const E=d<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $I extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YI=function(n){const e=Mb(n);return kb.encodeByteArray(e,!0)},jh=function(n){return YI(n).replace(/\./g,"")},Lb=function(n){try{return kb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=()=>KI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof O_>"u")return;const n=O_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Lb(n[1]);return e&&JSON.parse(e)},v0=()=>{try{return XI()||QI()||ZI()||JI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jb=n=>{var e,t;return(t=(e=v0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},eN=n=>{const e=jb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Bb=()=>{var n;return(n=v0())===null||n===void 0?void 0:n.config},Vb=n=>{var e;return(e=v0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){return n.endsWith(".cloudworkstations.dev")}async function Ub(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jh(JSON.stringify(t)),jh(JSON.stringify(o)),""].join(".")}const qc={};function rN(){const n={prod:[],emulator:[]};for(const e of Object.keys(qc))qc[e]?n.emulator.push(e):n.prod.push(e);return n}function iN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let D_=!1;function Fb(n,e){if(typeof window>"u"||typeof document>"u"||!_f(window.location.host)||qc[n]===e||qc[n]||D_)return;qc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=rN().prod.length>0;function o(){const x=document.getElementById(r);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function c(x,_){x.setAttribute("width","24"),x.setAttribute("id",_),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function d(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{D_=!0,o()},x}function p(x,_){x.setAttribute("id",_),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function g(){const x=iN(r),_=t("text"),E=document.getElementById(_)||document.createElement("span"),A=t("learnmore"),S=document.getElementById(A)||document.createElement("a"),I=t("preprendIcon"),N=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const P=x.element;u(P),p(S,A);const V=d();c(N,I),P.append(N,E,S,V),document.body.appendChild(P)}a?(E.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function sN(){var n;const e=(n=v0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cN(){const n=or();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fN(){return!sN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dN(){try{return typeof indexedDB=="object"}catch{return!1}}function hN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="FirebaseError";class Ua extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pN,Object.setPrototypeOf(this,Ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wf.prototype.create)}}class wf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?mN(a,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new Ua(i,u,r)}}function mN(n,e){return n.replace(gN,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gN=/\{\$([^}]+)}/g;function vN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Do(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(P_(a)&&P_(o)){if(!Do(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function P_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function jc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yN(n,e){const t=new xN(n,e);return t.subscribe.bind(t)}class xN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_N(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nm),i.error===void 0&&(i.error=nm),i.complete===void 0&&(i.complete=nm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _N(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n){return n&&n._delegate?n._delegate:n}class Po{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bN(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EN(n){return n===bo?void 0:n}function bN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const SN={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},TN=Ze.INFO,CN={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},IN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=CN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=TN,this._logHandler=IN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const NN=(n,e)=>e.some(t=>n instanceof t);let M_,k_;function RN(){return M_||(M_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ON(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hb=new WeakMap,Km=new WeakMap,zb=new WeakMap,rm=new WeakMap,Xg=new WeakMap;function DN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(bs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Hb.set(t,n)}).catch(()=>{}),Xg.set(e,n),e}function PN(n){if(Km.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Km.set(n,e)}let Qm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Km.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MN(n){Qm=n(Qm)}function kN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(im(this),e,...t);return zb.set(r,e.sort?e.sort():[e]),bs(r)}:ON().includes(n)?function(...e){return n.apply(im(this),e),bs(Hb.get(this))}:function(...e){return bs(n.apply(im(this),e))}}function LN(n){return typeof n=="function"?kN(n):(n instanceof IDBTransaction&&PN(n),NN(n,RN())?new Proxy(n,Qm):n)}function bs(n){if(n instanceof IDBRequest)return DN(n);if(rm.has(n))return rm.get(n);const e=LN(n);return e!==n&&(rm.set(n,e),Xg.set(e,n)),e}const im=n=>Xg.get(n);function jN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),u=bs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(bs(o.result),c.oldVersion,c.newVersion,bs(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const BN=["get","getKey","getAll","getAllKeys","count"],VN=["put","add","delete","clear"],am=new Map;function L_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(am.get(e))return am.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=VN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BN.includes(t)))return;const a=async function(o,...u){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),i&&c.done]))[0]};return am.set(e,a),a}MN(n=>({...n,get:(e,t,r)=>L_(e,t)||n.get(e,t,r),has:(e,t)=>!!L_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function FN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zm="@firebase/app",j_="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new qg("@firebase/app"),HN="@firebase/app-compat",zN="@firebase/analytics-compat",GN="@firebase/analytics",qN="@firebase/app-check-compat",XN="@firebase/app-check",WN="@firebase/auth",$N="@firebase/auth-compat",YN="@firebase/database",KN="@firebase/data-connect",QN="@firebase/database-compat",ZN="@firebase/functions",JN="@firebase/functions-compat",e6="@firebase/installations",t6="@firebase/installations-compat",n6="@firebase/messaging",r6="@firebase/messaging-compat",i6="@firebase/performance",a6="@firebase/performance-compat",s6="@firebase/remote-config",o6="@firebase/remote-config-compat",l6="@firebase/storage",u6="@firebase/storage-compat",c6="@firebase/firestore",f6="@firebase/ai",d6="@firebase/firestore-compat",h6="firebase",p6="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="[DEFAULT]",m6={[Zm]:"fire-core",[HN]:"fire-core-compat",[GN]:"fire-analytics",[zN]:"fire-analytics-compat",[XN]:"fire-app-check",[qN]:"fire-app-check-compat",[WN]:"fire-auth",[$N]:"fire-auth-compat",[YN]:"fire-rtdb",[KN]:"fire-data-connect",[QN]:"fire-rtdb-compat",[ZN]:"fire-fn",[JN]:"fire-fn-compat",[e6]:"fire-iid",[t6]:"fire-iid-compat",[n6]:"fire-fcm",[r6]:"fire-fcm-compat",[i6]:"fire-perf",[a6]:"fire-perf-compat",[s6]:"fire-rc",[o6]:"fire-rc-compat",[l6]:"fire-gcs",[u6]:"fire-gcs-compat",[c6]:"fire-fst",[d6]:"fire-fst-compat",[f6]:"fire-vertex","fire-js":"fire-js",[h6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new Map,g6=new Map,eg=new Map;function B_(n,e){try{n.container.addComponent(e)}catch(t){ka.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $l(n){const e=n.name;if(eg.has(e))return ka.debug(`There were multiple attempts to register component ${e}.`),!1;eg.set(e,n);for(const t of Bh.values())B_(t,n);for(const t of g6.values())B_(t,n);return!0}function Wg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qt(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new wf("app","Firebase",v6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=p6;function Gb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw As.create("bad-app-name",{appName:String(i)});if(t||(t=Bb()),!t)throw As.create("no-options");const a=Bh.get(i);if(a){if(Do(t,a.options)&&Do(r,a.config))return a;throw As.create("duplicate-app",{appName:i})}const o=new AN(i);for(const c of eg.values())o.addComponent(c);const u=new y6(t,r,o);return Bh.set(i,u),u}function qb(n=Jm){const e=Bh.get(n);if(!e&&n===Jm&&Bb())return Gb();if(!e)throw As.create("no-app",{appName:n});return e}function Ss(n,e,t){var r;let i=(r=m6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ka.warn(u.join(" "));return}$l(new Po(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="firebase-heartbeat-database",_6=1,tf="firebase-heartbeat-store";let sm=null;function Xb(){return sm||(sm=jN(x6,_6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tf)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),sm}async function w6(n){try{const t=(await Xb()).transaction(tf),r=await t.objectStore(tf).get(Wb(n));return await t.done,r}catch(e){if(e instanceof Ua)ka.warn(e.message);else{const t=As.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ka.warn(t.message)}}}async function V_(n,e){try{const r=(await Xb()).transaction(tf,"readwrite");await r.objectStore(tf).put(e,Wb(n)),await r.done}catch(t){if(t instanceof Ua)ka.warn(t.message);else{const r=As.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ka.warn(r.message)}}}function Wb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=1024,b6=30;class A6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=U_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>b6){const o=C6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ka.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=U_(),{heartbeatsToSend:r,unsentEntries:i}=S6(this._heartbeatsCache.heartbeats),a=jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ka.warn(t),""}}}function U_(){return new Date().toISOString().substring(0,10)}function S6(n,e=E6){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),F_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),F_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class T6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dN()?hN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await w6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function F_(n){return jh(JSON.stringify({version:2,heartbeats:n})).length}function C6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n){$l(new Po("platform-logger",e=>new UN(e),"PRIVATE")),$l(new Po("heartbeat",e=>new A6(e),"PRIVATE")),Ss(Zm,j_,n),Ss(Zm,j_,"esm2017"),Ss("fire-js","")}I6("");var N6="firebase",R6="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(N6,R6,"app");function $g(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6={PHONE:"phone",TOTP:"totp"},D6={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},P6={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},M6={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},k6={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function $b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j6=L6,Yb=$b,Kb=new wf("auth","Firebase",$b()),B6={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new qg("@firebase/auth");function V6(n,...e){Vh.logLevel<=Ze.WARN&&Vh.warn(`Auth (${lu}): ${n}`,...e)}function wh(n,...e){Vh.logLevel<=Ze.ERROR&&Vh.error(`Auth (${lu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(n,...e){throw Kg(n,...e)}function vr(n,...e){return Kg(n,...e)}function Yg(n,e,t){const r=Object.assign(Object.assign({},Yb()),{[e]:t});return new wf("auth","Firebase",r).create(e,{appName:n.name})}function Vn(n){return Yg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uu(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nr(n,"argument-error"),Yg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Kb.create(n,...e)}function ge(n,e,...t){if(!n)throw Kg(e,...t)}function Fi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wh(e),new Error(e)}function La(n,e){n||Fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Qg(){return H_()==="http:"||H_()==="https:"}function H_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qg()||lN()||"connection"in navigator)?navigator.onLine:!0}function F6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.shortDelay=e,this.longDelay=t,La(t>e,"Short delay should be less than long delay!"),this.isMobile=aN()||uN()}get(){return U6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(n,e){La(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G6=new Ef(3e4,6e4);function Mt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function kt(n,e,t,r,i={}){return Zb(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const u=ou(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:c},a);return oN()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&_f(n.emulatorConfig.host)&&(d.credentials="include"),Qb.fetch()(await Jb(n,n.config.apiHost,t,u),d)})}async function Zb(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},H6),e);try{const i=new X6(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Bc(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const u=a.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bc(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Bc(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Bc(n,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Yg(n,p,d);Nr(n,p)}}catch(i){if(i instanceof Ua)throw i;Nr(n,"network-request-failed",{message:String(i)})}}async function Fa(n,e,t,r,i={}){const a=await kt(n,e,t,r,i);return"mfaPendingCredential"in a&&Nr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Jb(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?Zg(n.config,i):`${n.config.apiScheme}://${i}`;return z6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function q6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class X6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vr(this.auth,"network-request-failed")),G6.get())})}}function Bc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=vr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n){return n!==void 0&&n.getResponse!==void 0}function G_(n){return n!==void 0&&n.enterprise!==void 0}class eA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return q6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(n){return(await kt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function tA(n,e){return kt(n,"GET","/v2/recaptchaConfig",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $6(n,e){return kt(n,"POST","/v1/accounts:delete",e)}async function Y6(n,e){return kt(n,"POST","/v1/accounts:update",e)}async function Uh(n,e){return kt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(n,e=!1){return Ue(n).getIdToken(e)}async function nA(n,e=!1){const t=Ue(n),r=await t.getIdToken(e),i=y0(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Xc(om(i.auth_time)),issuedAtTime:Xc(om(i.iat)),expirationTime:Xc(om(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function om(n){return Number(n)*1e3}function y0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Lb(t);return i?JSON.parse(i):(wh("Failed to decode base64 JWT payload"),null)}catch(i){return wh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function q_(n){const e=y0(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ua&&Q6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Q6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ja(n,Uh(t,{idToken:r}));ge(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?iA(a.providerUserInfo):[],u=J6(n.providerData,o),c=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),p=c?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new tg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function rA(n){const e=Ue(n);await rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iA(n){return n.map(e=>{var{providerId:t}=e,r=$g(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(n,e){const t=await Zb(n,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await Jb(n,i,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Qb.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tR(n,e){return kt(n,"POST","/v2/accounts:revokeToken",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const t=q_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await eR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new zl;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ge(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zl,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=$g(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new tg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ja(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nA(this,e)}reload(){return rA(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await rf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qt(this.auth.app))return Promise.reject(Vn(this.auth));const e=await this.getIdToken();return await ja(this,$6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,u,c,d,p;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(i=t.email)!==null&&i!==void 0?i:void 0,_=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,A=(u=t.tenantId)!==null&&u!==void 0?u:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,I=(d=t.createdAt)!==null&&d!==void 0?d:void 0,N=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:P,emailVerified:V,isAnonymous:F,providerData:W,stsTokenManager:D}=t;ge(P&&D,e,"internal-error");const R=zl.fromJSON(this.name,D);ge(typeof P=="string",e,"internal-error"),ys(g,e.name),ys(x,e.name),ge(typeof V=="boolean",e,"internal-error"),ge(typeof F=="boolean",e,"internal-error"),ys(_,e.name),ys(E,e.name),ys(A,e.name),ys(S,e.name),ys(I,e.name),ys(N,e.name);const M=new hi({uid:P,auth:e,email:x,emailVerified:V,displayName:g,isAnonymous:F,photoURL:E,phoneNumber:_,tenantId:A,stsTokenManager:R,createdAt:I,lastLoginAt:N});return W&&Array.isArray(W)&&(M.providerData=W.map(L=>Object.assign({},L))),S&&(M._redirectEventId=S),M}static async _fromIdTokenResponse(e,t,r=!1){const i=new zl;i.updateFromServerResponse(t);const a=new hi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rf(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ge(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?iA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),u=new zl;u.updateFromIdToken(r);const c=new hi({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new tg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;function Ia(n){La(n instanceof Function,"Expected a class definition");let e=X_.get(n);return e?(La(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,X_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aA.type="NONE";const ng=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(n,e,t){return`firebase:${n}:${e}:${t}`}class Gl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Eh(this.userKey,i.apiKey,a),this.fullPersistenceKey=Eh("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Uh(this.auth,{idToken:e}).catch(()=>{});return t?hi._fromGetAccountInfoResponse(this.auth,t,e):null}return hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Gl(Ia(ng),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Ia(ng);const o=Eh(r,e.config.apiKey,e.name);let u=null;for(const d of t)try{const p=await d._get(o);if(p){let g;if(typeof p=="string"){const x=await Uh(e,{idToken:p}).catch(()=>{});if(!x)break;g=await hi._fromGetAccountInfoResponse(e,x,p)}else g=hi._fromJSON(e,p);d!==a&&(u=g),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Gl(a,e,r):(a=c[0],u&&await a._set(o,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Gl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fA(e))return"Blackberry";if(dA(e))return"Webos";if(oA(e))return"Safari";if((e.includes("chrome/")||lA(e))&&!e.includes("edge/"))return"Chrome";if(cA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sA(n=or()){return/firefox\//i.test(n)}function oA(n=or()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lA(n=or()){return/crios\//i.test(n)}function uA(n=or()){return/iemobile/i.test(n)}function cA(n=or()){return/android/i.test(n)}function fA(n=or()){return/blackberry/i.test(n)}function dA(n=or()){return/webos/i.test(n)}function Jg(n=or()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nR(n=or()){var e;return Jg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rR(){return cN()&&document.documentMode===10}function hA(n=or()){return Jg(n)||cA(n)||dA(n)||fA(n)||/windows phone/i.test(n)||uA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n,e=[]){let t;switch(n){case"Browser":t=W_(or());break;case"Worker":t=`${W_(or())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${lu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,u)=>{try{const c=e(a);o(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(n,e={}){return kt(n,"GET","/v2/passwordPolicy",Mt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=6;class oR{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:sR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $_(this),this.idTokenSubscription=new $_(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ia(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Uh(this,{idToken:e}),r=await hi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qt(this.app))return Promise.reject(Vn(this));const t=e?Ue(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qt(this.app)?Promise.reject(Vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qt(this.app)?Promise.reject(Vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aR(this),t=new oR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ia(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[Ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&V6(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Jt(n){return Ue(n)}class $_{constructor(e){this.auth=e,this.observer=null,this.addObserver=yN(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uR(n){bf=n}function ev(n){return bf.loadJS(n)}function cR(){return bf.recaptchaV2Script}function fR(){return bf.recaptchaEnterpriseScript}function dR(){return bf.gapiScript}function mA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=500,pR=6e4,ah=1e12;class mR{constructor(e){this.auth=e,this.counter=ah,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new yR(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||ah;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||ah;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||ah;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class gR{constructor(){this.enterprise=new vR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yR{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ge(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=xR(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},pR)},hR))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function xR(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const _R="recaptcha-enterprise",Wc="NO_RECAPTCHA";class gA{constructor(e){this.type=_R,this.auth=Jt(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,u)=>{tA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new eA(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(c=>{u(c)})})}function i(a,o,u){const c=window.grecaptcha;G_(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(Wc)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gR().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(u=>{if(!t&&G_(window.grecaptcha))i(u,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=fR();c.length!==0&&(c+=u),ev(c).then(()=>{i(u,a,o)}).catch(d=>{o(d)})}}).catch(u=>{o(u)})})}}async function Oc(n,e,t,r=!1,i=!1){const a=new gA(n);let o;if(i)o=Wc;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ts(n,e,t,r,i){var a,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Oc(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Oc(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(u)});else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const u=await Oc(n,e,t);return r(n,u).catch(async c=>{var d;if(((d=n._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await Oc(n,e,t,!1,!0);return r(n,p)}return Promise.reject(c)})}else{const u=await Oc(n,e,t,!1,!0);return r(n,u)}else return Promise.reject(i+" provider is not supported.")}async function vA(n){const e=Jt(n),t=await tA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new eA(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new gA(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n,e){const t=Wg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Do(a,e??{}))return i;Nr(i,"already-initialized")}return t.initialize({options:e})}function wR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ia);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xA(n,e,t){const r=Jt(n);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),a=_A(e),{host:o,port:u}=ER(e),c=u===null?"":`:${u}`,d={url:`${a}//${o}${c}/`},p=Object.freeze({host:o,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(Do(d,r.config.emulator)&&Do(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,_f(o)?(Ub(`${a}//${o}${c}`),Fb("Auth",!0)):i||bR()}function _A(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ER(n){const e=_A(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Y_(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Y_(o)}}}function Y_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function bR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fi("not implemented")}_getIdTokenResponse(e){return Fi("not implemented")}_linkToIdToken(e,t){return Fi("not implemented")}_getReauthenticationResolver(e){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(n,e){return kt(n,"POST","/v1/accounts:resetPassword",Mt(n,e))}async function AR(n,e){return kt(n,"POST","/v1/accounts:update",e)}async function SR(n,e){return kt(n,"POST","/v1/accounts:signUp",e)}async function TR(n,e){return kt(n,"POST","/v1/accounts:update",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n,e){return Fa(n,"POST","/v1/accounts:signInWithPassword",Mt(n,e))}async function x0(n,e){return kt(n,"POST","/v1/accounts:sendOobCode",Mt(n,e))}async function IR(n,e){return x0(n,e)}async function NR(n,e){return x0(n,e)}async function RR(n,e){return x0(n,e)}async function OR(n,e){return x0(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(n,e){return Fa(n,"POST","/v1/accounts:signInWithEmailLink",Mt(n,e))}async function PR(n,e){return Fa(n,"POST","/v1/accounts:signInWithEmailLink",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends cu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Yl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Yl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ts(e,t,"signInWithPassword",CR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return DR(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ts(e,r,"signUpPassword",SR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return PR(e,{idToken:t,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n,e){return Fa(n,"POST","/v1/accounts:signInWithIdp",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="http://localhost";class qi extends cu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=$g(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new qi(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Oa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}buildRequest(){const e={requestUri:MR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K_(n,e){return kt(n,"POST","/v1/accounts:sendVerificationCode",Mt(n,e))}async function kR(n,e){return Fa(n,"POST","/v1/accounts:signInWithPhoneNumber",Mt(n,e))}async function LR(n,e){const t=await Fa(n,"POST","/v1/accounts:signInWithPhoneNumber",Mt(n,e));if(t.temporaryProof)throw Bc(n,"account-exists-with-different-credential",t);return t}const jR={USER_NOT_FOUND:"user-not-found"};async function BR(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Fa(n,"POST","/v1/accounts:signInWithPhoneNumber",Mt(n,t),jR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends cu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Cs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Cs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return kR(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return LR(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return BR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new Cs({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UR(n){const e=Lc(jc(n)).link,t=e?Lc(jc(e)).deep_link_id:null,r=Lc(jc(n)).deep_link_id;return(r?Lc(jc(r)).link:null)||r||t||e||n}class fu{constructor(e){var t,r,i,a,o,u;const c=Lc(jc(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,g=VR((i=c.mode)!==null&&i!==void 0?i:null);ge(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=UR(e);try{return new fu(t)}catch{return null}}}function FR(n){return fu.parseLink(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.providerId=Bs.PROVIDER_ID}static credential(e,t){return Yl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=fu.parseLink(t);return ge(r,"argument-error"),Yl._fromEmailAndCode(e,r.code,r.tenantId)}}Bs.PROVIDER_ID="password";Bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Ha{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $c extends du{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ge("providerId"in t&&"signInMethod"in t,"argument-error"),qi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ge(e.idToken||e.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return $c.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return $c.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:o,providerId:u}=e;if(!r&&!i&&!t&&!a||!u)return null;try{return new $c(u)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends du{constructor(){super("facebook.com")}static credential(e){return qi._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Aa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qi._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Sa.credential(t,r)}catch{return null}}}Sa.GOOGLE_SIGN_IN_METHOD="google.com";Sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends du{constructor(){super("github.com")}static credential(e){return qi._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.GITHUB_SIGN_IN_METHOD="github.com";Ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="http://localhost";class af extends cu{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Oa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new af(r,a)}static _create(e,t){return new af(e,t)}buildRequest(){return{requestUri:HR,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="saml.";class Fh extends Ha{constructor(e){ge(e.startsWith(zR),"argument-error"),super(e)}static credentialFromResult(e){return Fh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Fh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=af.fromJSON(e);return ge(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return af._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends du{constructor(){super("twitter.com")}static credential(e,t){return qi._fromParams({providerId:Ca.PROVIDER_ID,signInMethod:Ca.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ca.credentialFromTaggedObject(e)}static credentialFromError(e){return Ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ca.credential(t,r)}catch{return null}}}Ca.TWITTER_SIGN_IN_METHOD="twitter.com";Ca.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(n,e){return Fa(n,"POST","/v1/accounts:signUp",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await hi._fromIdTokenResponse(e,r,i),o=Q_(r);return new ni({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Q_(r);return new ni({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Q_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(n){var e;if(qt(n.app))return Promise.reject(Vn(n));const t=Jt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new ni({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await EA(t,{returnSecureToken:!0}),i=await ni._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends Ua{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Hh(e,t,r,i)}}function bA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(n,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e){const t=Ue(n);await _0(!0,t,e);const{providerUserInfo:r}=await Y6(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=AA(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function tv(n,e,t=!1){const r=await ja(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ni._forOperation(n,"link",r)}async function _0(n,e,t){await rf(e);const r=AA(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";ge(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(n,e,t=!1){const{auth:r}=n;if(qt(r.app))return Promise.reject(Vn(r));const i="reauthenticate";try{const a=await ja(n,bA(r,i,e,n),t);ge(a.idToken,r,"internal-error");const o=y0(a.idToken);ge(o,r,"internal-error");const{sub:u}=o;return ge(n.uid===u,r,"user-mismatch"),ni._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Nr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(n,e,t=!1){if(qt(n.app))return Promise.reject(Vn(n));const r="signIn",i=await bA(n,r,e),a=await ni._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function w0(n,e){return TA(Jt(n),e)}async function CA(n,e){const t=Ue(n);return await _0(!1,t,e.providerId),tv(t,e)}async function IA(n,e){return SA(Ue(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(n,e){return Fa(n,"POST","/v1/accounts:signInWithCustomToken",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(n,e){if(qt(n.app))return Promise.reject(Vn(n));const t=Jt(n),r=await XR(t,{token:e,returnSecureToken:!0}),i=await ni._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?nv._fromServerResponse(e,t):"totpInfo"in t?rv._fromServerResponse(e,t):Nr(e,"internal-error")}}class nv extends Af{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new nv(t)}}class rv extends Af{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new rv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n,e,t){var r;ge(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),ge(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ge(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ge(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ge(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iv(n){const e=Jt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NA(n,e,t){const r=Jt(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&E0(r,i,t),await Ts(r,i,"getOobCode",NR,"EMAIL_PASSWORD_PROVIDER")}async function $R(n,e,t){await wA(Ue(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iv(n),r})}async function YR(n,e){await TR(Ue(n),{oobCode:e})}async function RA(n,e){const t=Ue(n),r=await wA(t,{oobCode:e}),i=r.requestType;switch(ge(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ge(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ge(r.mfaInfo,t,"internal-error");default:ge(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=Af._fromServerResponse(Jt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function KR(n,e){const{data:t}=await RA(Ue(n),e);return t.email}async function OA(n,e,t){if(qt(n.app))return Promise.reject(Vn(n));const r=Jt(n),o=await Ts(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EA,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&iv(n),c}),u=await ni._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function DA(n,e,t){return qt(n.app)?Promise.reject(Vn(n)):w0(Ue(n),Bs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(n,e,t){const r=Jt(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,u){ge(u.handleCodeInApp,r,"argument-error"),u&&E0(r,o,u)}a(i,t),await Ts(r,i,"getOobCode",RR,"EMAIL_PASSWORD_PROVIDER")}function ZR(n,e){const t=fu.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function JR(n,e,t){if(qt(n.app))return Promise.reject(Vn(n));const r=Ue(n),i=Bs.credentialWithLink(e,t||nf());return ge(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),w0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(n,e){return kt(n,"POST","/v1/accounts:createAuthUri",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(n,e){const t=Qg()?nf():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await e8(Ue(n),r);return i||[]}async function PA(n,e){const t=Ue(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&E0(t.auth,i,e);const{email:a}=await IR(t.auth,i);a!==n.email&&await n.reload()}async function n8(n,e,t){const r=Ue(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&E0(r.auth,a,t);const{email:o}=await OR(r.auth,a);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(n,e){return kt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ue(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await ja(r,r8(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function a8(n,e){const t=Ue(n);return qt(t.auth.app)?Promise.reject(Vn(t.auth)):MA(t,e,null)}function s8(n,e){return MA(Ue(n),null,e)}async function MA(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const o=await ja(n,AR(r,a));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=y0(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const u=o!=="anonymous"&&o!=="custom"?o:null;return new ql(a,u)}}if(!r)return null;switch(r){case"facebook.com":return new l8(a,i);case"github.com":return new u8(a,i);case"google.com":return new c8(a,i);case"twitter.com":return new f8(a,i,n.screenName||null);case"custom":case"anonymous":return new ql(a,null);default:return new ql(a,r,i)}}class ql{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class kA extends ql{constructor(e,t,r,i){super(e,t,r),this.username=i}}class l8 extends ql{constructor(e,t){super(e,"facebook.com",t)}}class u8 extends kA{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class c8 extends ql{constructor(e,t){super(e,"google.com",t)}}class f8 extends kA{constructor(e,t,r){super(e,"twitter.com",t,r)}}function d8(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:o8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(n,e){return Ue(n).setPersistence(e)}function p8(n){return vA(n)}async function m8(n,e){return Jt(n).validatePassword(e)}function LA(n,e,t,r){return Ue(n).onIdTokenChanged(e,t,r)}function jA(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}function BA(n,e,t,r){return Ue(n).onAuthStateChanged(e,t,r)}function g8(n){Ue(n).useDeviceLanguage()}function v8(n,e){return Ue(n).updateCurrentUser(e)}function VA(n){return Ue(n).signOut()}function y8(n,e){return Jt(n).revokeAccessToken(e)}async function x8(n){return Ue(n).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new So("enroll",e,t)}static _fromMfaPendingCredential(e){return new So("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return So._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return So._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Jt(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(u=>Af._fromServerResponse(r,u));ge(i.mfaPendingCredential,r,"internal-error");const o=So._fromMfaPendingCredential(i.mfaPendingCredential);return new av(o,a,async u=>{const c=await u._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const d=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const p=await ni._fromIdTokenResponse(r,t.operationType,d);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return ge(t.user,r,"internal-error"),ni._forOperation(t.user,t.operationType,d);default:Nr(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function _8(n,e){var t;const r=Ue(n),i=e;return ge(e.customData.operationType,r,"argument-error"),ge((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),av._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:start",Mt(n,e))}function w8(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(n,e))}function E8(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:start",Mt(n,e))}function b8(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(n,e))}function A8(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Mt(n,e))}class sv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Af._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new sv(e)}async getSession(){return So._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await ja(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ja(this.user,A8(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const lm=new WeakMap;function S8(n){const e=Ue(n);return lm.has(e)||lm.set(e,sv._fromUser(e)),lm.get(e)}const zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=1e3,C8=10;class FA extends UA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);rR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,C8):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},T8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FA.type="LOCAL";const HA=FA;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=1e3;function um(n){var e,t;const r=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return(t=(e=document.cookie.match(i))===null||e===void 0?void 0:e[1])!==null&&t!==void 0?t:null}function cm(n){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${n.split(":")[3]}`}class zA{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:(e=navigator.cookieEnabled)!==null&&e!==void 0?e:!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=cm(e);if(window.cookieStore){const r=await window.cookieStore.get(t);return r==null?void 0:r.value}return um(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=cm(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const r=cm(e);if(window.cookieStore){const u=d=>{const p=d.changed.find(x=>x.name===r);p&&t(p.value),d.deleted.find(x=>x.name===r)&&t(null)},c=()=>window.cookieStore.removeEventListener("change",u);return this.listenerUnsubscribes.set(t,c),window.cookieStore.addEventListener("change",u)}let i=um(r);const a=setInterval(()=>{const u=um(r);u!==i&&(t(u),i=u)},I8),o=()=>clearInterval(a);this.listenerUnsubscribes.set(t,o)}_removeListener(e,t){const r=this.listenerUnsubscribes.get(t);r&&(r(),this.listenerUnsubscribes.delete(t))}}zA.type="COOKIE";const N8=zA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends UA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}GA.type="SESSION";const ov=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new b0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(o).map(async d=>d(t.origin,a)),c=await R8(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}b0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((u,c)=>{const d=A0("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const x=g;if(x.data.eventId===d)switch(x.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(p),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return window}function D8(n){dn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}async function P8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function k8(){return lv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebaseLocalStorageDb",L8=1,Gh="firebaseLocalStorage",XA="fbase_key";class Sf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function S0(n,e){return n.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function j8(){const n=indexedDB.deleteDatabase(qA);return new Sf(n).toPromise()}function rg(){const n=indexedDB.open(qA,L8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Gh,{keyPath:XA})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Gh)?e(r):(r.close(),await j8(),e(await rg()))})})}async function J_(n,e,t){const r=S0(n,!0).put({[XA]:e,value:t});return new Sf(r).toPromise()}async function B8(n,e){const t=S0(n,!1).get(e),r=await new Sf(t).toPromise();return r===void 0?null:r.value}function ew(n,e){const t=S0(n,!0).delete(e);return new Sf(t).toPromise()}const V8=800,U8=3;class WA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>U8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=b0._getInstance(k8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await P8(),!this.activeServiceWorker)return;this.sender=new O8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await J_(e,zh,"1"),await ew(e,zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>J_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>B8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ew(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=S0(i,!1).getAll();return new Sf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WA.type="LOCAL";const $A=WA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(n,e){return kt(n,"POST","/v2/accounts/mfaSignIn:start",Mt(n,e))}function F8(n,e){return kt(n,"POST","/v2/accounts/mfaSignIn:finalize",Mt(n,e))}function H8(n,e){return kt(n,"POST","/v2/accounts/mfaSignIn:finalize",Mt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=mA("rcb"),z8=new Ef(3e4,6e4);class G8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=dn().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ge(q8(t),e,"argument-error"),this.shouldResolveImmediately(t)&&z_(dn().grecaptcha)?Promise.resolve(dn().grecaptcha):new Promise((r,i)=>{const a=dn().setTimeout(()=>{i(vr(e,"network-request-failed"))},z8.get());dn()[fm]=()=>{dn().clearTimeout(a),delete dn()[fm];const u=dn().grecaptcha;if(!u||!z_(u)){i(vr(e,"internal-error"));return}const c=u.render;u.render=(d,p)=>{const g=c(d,p);return this.counter++,g},this.hostLanguage=t,r(u)};const o=`${cR()}?${ou({onload:fm,render:"explicit",hl:t})}`;ev(o).catch(()=>{clearTimeout(a),i(vr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=dn().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function q8(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class X8{async load(e){return new mR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="recaptcha",W8={theme:"light",type:"image"};class $8{constructor(e,t,r=Object.assign({},W8)){this.parameters=r,this.type=Yc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jt(e),this.isInvisible=this.parameters.size==="invisible",ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;ge(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new X8:new G8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=dn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ge(Qg()&&!lv(),this.auth,"internal-error"),await Y8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await W6(this.auth);ge(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Y8(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Cs._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function K8(n,e,t){if(qt(n.app))return Promise.reject(Vn(n));const r=Jt(n),i=await T0(r,e,Ue(t));return new uv(i,a=>w0(r,a))}async function Q8(n,e,t){const r=Ue(n);await _0(!1,r,"phone");const i=await T0(r.auth,e,Ue(t));return new uv(i,a=>CA(r,a))}async function Z8(n,e,t){const r=Ue(n);if(qt(r.auth.app))return Promise.reject(Vn(r.auth));const i=await T0(r.auth,e,Ue(t));return new uv(i,a=>IA(r,a))}async function T0(n,e,t){var r;if(!n._getRecaptchaConfig())try{await vA(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i){ge(a.type==="enroll",n,"internal-error");const o={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ts(n,o,"mfaSmsEnrollment",async(p,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Wc){ge((t==null?void 0:t.type)===Yc,p,"argument-error");const x=await dm(p,g,t);return Z_(p,x)}return Z_(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{ge(a.type==="signin",n,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;ge(o,n,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ts(n,u,"mfaSmsSignIn",async(g,x)=>{if(x.phoneSignInInfo.captchaResponse===Wc){ge((t==null?void 0:t.type)===Yc,g,"argument-error");const _=await dm(g,x,t);return tw(g,_)}return tw(g,x)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ts(n,a,"sendVerificationCode",async(d,p)=>{if(p.captchaResponse===Wc){ge((t==null?void 0:t.type)===Yc,d,"argument-error");const g=await dm(d,p,t);return K_(d,g)}return K_(d,p)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{t==null||t._reset()}}async function J8(n,e){const t=Ue(n);if(qt(t.auth.app))return Promise.reject(Vn(t.auth));await tv(t,e)}async function dm(n,e,t){ge(t.type===Yc,n,"argument-error");const r=await t.verify();ge(typeof r=="string",n,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const a=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,u=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r,captchaResponse:o,clientType:u,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const a=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,u=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:a,clientType:o,recaptchaVersion:u}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.providerId=No.PROVIDER_ID,this.auth=Jt(e)}verifyPhoneNumber(e,t){return T0(this.auth,e,Ue(t))}static credential(e,t){return Cs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return No.credentialFromTaggedObject(t)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Cs._fromTokenResponse(t,r):null}}No.PROVIDER_ID="phone";No.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(n,e){return e?Ia(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends cu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eO(n){return TA(n.auth,new cv(n),n.bypassAuthState)}function tO(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),SA(t,new cv(n),n.bypassAuthState)}async function nO(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),tv(t,new cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eO;case"linkViaPopup":case"linkViaRedirect":return nO;case"reauthViaPopup":case"reauthViaRedirect":return tO;default:Nr(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new Ef(2e3,1e4);async function iO(n,e,t){if(qt(n.app))return Promise.reject(vr(n,"operation-not-supported-in-this-environment"));const r=Jt(n);uu(n,e,Ha);const i=jo(r,t);return new Na(r,"signInViaPopup",e,i).executeNotNull()}async function aO(n,e,t){const r=Ue(n);if(qt(r.auth.app))return Promise.reject(vr(r.auth,"operation-not-supported-in-this-environment"));uu(r.auth,e,Ha);const i=jo(r.auth,t);return new Na(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function sO(n,e,t){const r=Ue(n);uu(r.auth,e,Ha);const i=jo(r.auth,t);return new Na(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Na extends YA{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Na.currentPopupAction&&Na.currentPopupAction.cancel(),Na.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=A0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Na.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rO.get())};e()}}Na.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="pendingRedirect",bh=new Map;class lO extends YA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const r=await uO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uO(n,e){const t=QA(e),r=KA(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function fv(n,e){return KA(n)._set(QA(e),"true")}function cO(n,e){bh.set(n._key(),e)}function KA(n){return Ia(n._redirectPersistence)}function QA(n){return Eh(oO,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(n,e,t){return dO(n,e,t)}async function dO(n,e,t){if(qt(n.app))return Promise.reject(Vn(n));const r=Jt(n);uu(n,e,Ha),await r._initializationPromise;const i=jo(r,t);return await fv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function hO(n,e,t){return pO(n,e,t)}async function pO(n,e,t){const r=Ue(n);if(uu(r.auth,e,Ha),qt(r.auth.app))return Promise.reject(Vn(r.auth));await r.auth._initializationPromise;const i=jo(r.auth,t);await fv(i,r.auth);const a=await JA(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function mO(n,e,t){return gO(n,e,t)}async function gO(n,e,t){const r=Ue(n);uu(r.auth,e,Ha),await r.auth._initializationPromise;const i=jo(r.auth,t);await _0(!1,r,e.providerId),await fv(i,r.auth);const a=await JA(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function vO(n,e){return await Jt(n)._initializationPromise,ZA(n,e,!1)}async function ZA(n,e,t=!1){if(qt(n.app))return Promise.reject(Vn(n));const r=Jt(n),i=jo(r,e),o=await new lO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function JA(n){const e=A0(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=10*60*1e3;class xO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_O(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!eS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(vr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yO&&this.cachedEventUids.clear(),this.cachedEventUids.has(nw(e))}saveEventToCache(e){this.cachedEventUids.add(nw(e)),this.lastProcessedEventTime=Date.now()}}function nw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function eS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _O(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(n,e={}){return kt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bO=/^https?/;async function AO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await wO(n);for(const t of e)try{if(SO(t))return}catch{}Nr(n,"unauthorized-domain")}function SO(n){const e=nf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!bO.test(t))return!1;if(EO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new Ef(3e4,6e4);function rw(){const n=dn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function CO(n){return new Promise((e,t)=>{var r,i,a;function o(){rw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rw(),t(vr(n,"network-request-failed"))},timeout:TO.get()})}if(!((i=(r=dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=dn().gapi)===null||a===void 0)&&a.load)o();else{const u=mA("iframefcb");return dn()[u]=()=>{gapi.load?o():t(vr(n,"network-request-failed"))},ev(`${dR()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function IO(n){return Ah=Ah||CO(n),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new Ef(5e3,15e3),RO="__/auth/iframe",OO="emulator/auth/iframe",DO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MO(n){const e=n.config;ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zg(e,OO):`https://${n.config.authDomain}/${RO}`,r={apiKey:e.apiKey,appName:n.name,v:lu},i=PO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ou(r).slice(1)}`}async function kO(n){const e=await IO(n),t=dn().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:MO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=vr(n,"network-request-failed"),u=dn().setTimeout(()=>{a(o)},NO.get());function c(){dn().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jO=500,BO=600,VO="_blank",UO="http://localhost";class iw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FO(n,e,t,r=jO,i=BO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},LO),{width:r.toString(),height:i.toString(),top:a,left:o}),d=or().toLowerCase();t&&(u=lA(d)?VO:t),sA(d)&&(e=e||UO,c.scrollbars="yes");const p=Object.entries(c).reduce((x,[_,E])=>`${x}${_}=${E},`,"");if(nR(d)&&u!=="_self")return HO(e||"",u),new iw(null);const g=window.open(e||"",u,p);ge(g,n,"popup-blocked");try{g.focus()}catch{}return new iw(g)}function HO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="__/auth/handler",GO="emulator/auth/handler",qO=encodeURIComponent("fac");async function aw(n,e,t,r,i,a){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:lu,eventId:i};if(e instanceof Ha){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",vN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof du){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await n._getAppCheckToken(),d=c?`#${qO}=${encodeURIComponent(c)}`:"";return`${XO(n)}?${ou(u).slice(1)}${d}`}function XO({config:n}){return n.emulator?Zg(n,GO):`https://${n.authDomain}/${zO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="webStorageSupport";class WO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ov,this._completeRedirectFn=ZA,this._overrideRedirectResult=cO}async _openPopup(e,t,r,i){var a;La((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await aw(e,t,r,nf(),i);return FO(e,o,A0())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await aw(e,t,r,nf(),i);return D8(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(La(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await kO(e),r=new xO(e);return t.register("authEvent",i=>(ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hm,{type:hm},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[hm];o!==void 0&&t(!!o),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hA()||oA()||Jg()}}const tS=WO;class nS{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Fi("unexpected MultiFactorSessionType")}}}class dv extends nS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new dv(e)}_finalizeEnroll(e,t,r){return w8(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return F8(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class rS{constructor(){}static assertion(e){return dv._fromCredential(e)}}rS.FACTOR_ID="phone";class iS{static assertionForEnrollment(e,t){return sf._fromSecret(e,t)}static assertionForSignIn(e,t){return sf._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const r=e;ge(typeof((t=r.user)===null||t===void 0?void 0:t.auth)<"u","internal-error");const i=await E8(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return C0._fromStartTotpMfaEnrollmentResponse(i,r.user.auth)}}iS.FACTOR_ID="totp";class sf extends nS{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new sf(t,void 0,e)}static _fromEnrollmentId(e,t){return new sf(t,e)}async _finalizeEnroll(e,t,r){return ge(typeof this.secret<"u",e,"argument-error"),b8(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){ge(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return H8(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class C0{constructor(e,t,r,i,a,o,u){this.sessionInfo=o,this.auth=u,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}static _fromStartTotpMfaEnrollmentResponse(e,t){return new C0(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let i=!1;return(sh(e)||sh(t))&&(i=!0),i&&(sh(e)&&(e=((r=this.auth.currentUser)===null||r===void 0?void 0:r.email)||"unknownuser"),sh(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function sh(n){return typeof n>"u"||(n==null?void 0:n.length)===0}var sw="@firebase/auth",ow="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KO(n){$l(new Po("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pA(n)},d=new lR(r,i,a,c);return wR(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$l(new Po("auth-internal",e=>{const t=Jt(e.getProvider("auth").getImmediate());return(r=>new $O(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(sw,ow,YO(n)),Ss(sw,ow,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=5*60,ZO=Vb("authIdTokenMaxAge")||QO;let lw=null;const JO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ZO)return;const i=t==null?void 0:t.token;lw!==i&&(lw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aS(n=qb()){const e=Wg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=yA(n,{popupRedirectResolver:tS,persistence:[$A,HA,ov]}),r=Vb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=JO(a.toString());jA(t,o,()=>o(t.currentUser)),LA(t,u=>o(u))}}const i=jb("auth");return i&&xA(t,`http://${i}`),t}function e5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}uR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=vr("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",e5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KO("Browser");const t5=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:k6,ActionCodeURL:fu,AuthCredential:cu,AuthErrorCodes:B6,EmailAuthCredential:Yl,EmailAuthProvider:Bs,FacebookAuthProvider:Aa,FactorId:O6,GithubAuthProvider:Ta,GoogleAuthProvider:Sa,OAuthCredential:qi,OAuthProvider:$c,OperationType:M6,PhoneAuthCredential:Cs,PhoneAuthProvider:No,PhoneMultiFactorGenerator:rS,ProviderId:D6,RecaptchaVerifier:$8,SAMLAuthProvider:Fh,SignInMethod:P6,TotpMultiFactorGenerator:iS,TotpSecret:C0,TwitterAuthProvider:Ca,applyActionCode:YR,beforeAuthStateChanged:jA,browserCookiePersistence:N8,browserLocalPersistence:HA,browserPopupRedirectResolver:tS,browserSessionPersistence:ov,checkActionCode:RA,confirmPasswordReset:$R,connectAuthEmulator:xA,createUserWithEmailAndPassword:OA,debugErrorMap:j6,deleteUser:x8,fetchSignInMethodsForEmail:t8,getAdditionalUserInfo:d8,getAuth:aS,getIdToken:K6,getIdTokenResult:nA,getMultiFactorResolver:_8,getRedirectResult:vO,inMemoryPersistence:ng,indexedDBLocalPersistence:$A,initializeAuth:yA,initializeRecaptchaConfig:p8,isSignInWithEmailLink:ZR,linkWithCredential:CA,linkWithPhoneNumber:Q8,linkWithPopup:sO,linkWithRedirect:mO,multiFactor:S8,onAuthStateChanged:BA,onIdTokenChanged:LA,parseActionCodeURL:FR,prodErrorMap:Yb,reauthenticateWithCredential:IA,reauthenticateWithPhoneNumber:Z8,reauthenticateWithPopup:aO,reauthenticateWithRedirect:hO,reload:rA,revokeAccessToken:y8,sendEmailVerification:PA,sendPasswordResetEmail:NA,sendSignInLinkToEmail:QR,setPersistence:h8,signInAnonymously:GR,signInWithCredential:w0,signInWithCustomToken:WR,signInWithEmailAndPassword:DA,signInWithEmailLink:JR,signInWithPhoneNumber:K8,signInWithPopup:iO,signInWithRedirect:fO,signOut:VA,unlink:qR,updateCurrentUser:v8,updateEmail:a8,updatePassword:s8,updatePhoneNumber:J8,updateProfile:i8,useDeviceLanguage:g8,validatePassword:m8,verifyBeforeUpdateEmail:n8,verifyPasswordResetCode:KR},Symbol.toStringTag,{value:"Module"})),n5={apiKey:"AIzaSyDT9F4cCRxuO--Fi6nmHCiPqLFra9aj-AU",authDomain:"woo-combine.firebaseapp.com",projectId:"woo-combine",storageBucket:"woo-combine.appspot.com",messagingSenderId:"94939411053",appId:"1:94939411053:web:9441e73b88c1985e5c8564"},r5=Gb(n5),Bt=aS(r5);function sS(n,e){return function(){return n.apply(e,arguments)}}const{toString:i5}=Object.prototype,{getPrototypeOf:hv}=Object,{iterator:I0,toStringTag:oS}=Symbol,N0=(n=>e=>{const t=i5.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),xi=n=>(n=n.toLowerCase(),e=>N0(e)===n),R0=n=>e=>typeof e===n,{isArray:hu}=Array,of=R0("undefined");function a5(n){return n!==null&&!of(n)&&n.constructor!==null&&!of(n.constructor)&&Cr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const lS=xi("ArrayBuffer");function s5(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&lS(n.buffer),e}const o5=R0("string"),Cr=R0("function"),uS=R0("number"),O0=n=>n!==null&&typeof n=="object",l5=n=>n===!0||n===!1,Sh=n=>{if(N0(n)!=="object")return!1;const e=hv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(oS in n)&&!(I0 in n)},u5=xi("Date"),c5=xi("File"),f5=xi("Blob"),d5=xi("FileList"),h5=n=>O0(n)&&Cr(n.pipe),p5=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Cr(n.append)&&((e=N0(n))==="formdata"||e==="object"&&Cr(n.toString)&&n.toString()==="[object FormData]"))},m5=xi("URLSearchParams"),[g5,v5,y5,x5]=["ReadableStream","Request","Response","Headers"].map(xi),_5=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tf(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),hu(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),o=a.length;let u;for(r=0;r<o;r++)u=a[r],e.call(null,n[u],u,n)}}function cS(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const To=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fS=n=>!of(n)&&n!==To;function ig(){const{caseless:n}=fS(this)&&this||{},e={},t=(r,i)=>{const a=n&&cS(e,i)||i;Sh(e[a])&&Sh(r)?e[a]=ig(e[a],r):Sh(r)?e[a]=ig({},r):hu(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Tf(arguments[r],t);return e}const w5=(n,e,t,{allOwnKeys:r}={})=>(Tf(e,(i,a)=>{t&&Cr(i)?n[a]=sS(i,t):n[a]=i},{allOwnKeys:r}),n),E5=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),b5=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},A5=(n,e,t,r)=>{let i,a,o;const u={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)o=i[a],(!r||r(o,n,e))&&!u[o]&&(e[o]=n[o],u[o]=!0);n=t!==!1&&hv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},S5=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},T5=n=>{if(!n)return null;if(hu(n))return n;let e=n.length;if(!uS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},C5=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&hv(Uint8Array)),I5=(n,e)=>{const r=(n&&n[I0]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},N5=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},R5=xi("HTMLFormElement"),O5=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),uw=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),D5=xi("RegExp"),dS=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Tf(t,(i,a)=>{let o;(o=e(i,a,n))!==!1&&(r[a]=o||i)}),Object.defineProperties(n,r)},P5=n=>{dS(n,(e,t)=>{if(Cr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Cr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},M5=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return hu(n)?r(n):r(String(n).split(e)),t},k5=()=>{},L5=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function j5(n){return!!(n&&Cr(n.append)&&n[oS]==="FormData"&&n[I0])}const B5=n=>{const e=new Array(10),t=(r,i)=>{if(O0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=hu(r)?[]:{};return Tf(r,(o,u)=>{const c=t(o,i+1);!of(c)&&(a[u]=c)}),e[i]=void 0,a}}return r};return t(n,0)},V5=xi("AsyncFunction"),U5=n=>n&&(O0(n)||Cr(n))&&Cr(n.then)&&Cr(n.catch),hS=((n,e)=>n?setImmediate:e?((t,r)=>(To.addEventListener("message",({source:i,data:a})=>{i===To&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),To.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Cr(To.postMessage)),F5=typeof queueMicrotask<"u"?queueMicrotask.bind(To):typeof process<"u"&&process.nextTick||hS,H5=n=>n!=null&&Cr(n[I0]),ie={isArray:hu,isArrayBuffer:lS,isBuffer:a5,isFormData:p5,isArrayBufferView:s5,isString:o5,isNumber:uS,isBoolean:l5,isObject:O0,isPlainObject:Sh,isReadableStream:g5,isRequest:v5,isResponse:y5,isHeaders:x5,isUndefined:of,isDate:u5,isFile:c5,isBlob:f5,isRegExp:D5,isFunction:Cr,isStream:h5,isURLSearchParams:m5,isTypedArray:C5,isFileList:d5,forEach:Tf,merge:ig,extend:w5,trim:_5,stripBOM:E5,inherits:b5,toFlatObject:A5,kindOf:N0,kindOfTest:xi,endsWith:S5,toArray:T5,forEachEntry:I5,matchAll:N5,isHTMLForm:R5,hasOwnProperty:uw,hasOwnProp:uw,reduceDescriptors:dS,freezeMethods:P5,toObjectSet:M5,toCamelCase:O5,noop:k5,toFiniteNumber:L5,findKey:cS,global:To,isContextDefined:fS,isSpecCompliantForm:j5,toJSONObject:B5,isAsyncFn:V5,isThenable:U5,setImmediate:hS,asap:F5,isIterable:H5};function He(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ie.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const pS=He.prototype,mS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{mS[n]={value:n}});Object.defineProperties(He,mS);Object.defineProperty(pS,"isAxiosError",{value:!0});He.from=(n,e,t,r,i,a)=>{const o=Object.create(pS);return ie.toFlatObject(n,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),He.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,a&&Object.assign(o,a),o};const z5=null;function ag(n){return ie.isPlainObject(n)||ie.isArray(n)}function gS(n){return ie.endsWith(n,"[]")?n.slice(0,-2):n}function cw(n,e,t){return n?n.concat(e).map(function(i,a){return i=gS(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function G5(n){return ie.isArray(n)&&!n.some(ag)}const q5=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function D0(n,e,t){if(!ie.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,S){return!ie.isUndefined(S[A])});const r=t.metaTokens,i=t.visitor||p,a=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(i))throw new TypeError("visitor must be a function");function d(E){if(E===null)return"";if(ie.isDate(E))return E.toISOString();if(!c&&ie.isBlob(E))throw new He("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(E)||ie.isTypedArray(E)?c&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,A,S){let I=E;if(E&&!S&&typeof E=="object"){if(ie.endsWith(A,"{}"))A=r?A:A.slice(0,-2),E=JSON.stringify(E);else if(ie.isArray(E)&&G5(E)||(ie.isFileList(E)||ie.endsWith(A,"[]"))&&(I=ie.toArray(E)))return A=gS(A),I.forEach(function(P,V){!(ie.isUndefined(P)||P===null)&&e.append(o===!0?cw([A],V,a):o===null?A:A+"[]",d(P))}),!1}return ag(E)?!0:(e.append(cw(S,A,a),d(E)),!1)}const g=[],x=Object.assign(q5,{defaultVisitor:p,convertValue:d,isVisitable:ag});function _(E,A){if(!ie.isUndefined(E)){if(g.indexOf(E)!==-1)throw Error("Circular reference detected in "+A.join("."));g.push(E),ie.forEach(E,function(I,N){(!(ie.isUndefined(I)||I===null)&&i.call(e,I,ie.isString(N)?N.trim():N,A,x))===!0&&_(I,A?A.concat(N):[N])}),g.pop()}}if(!ie.isObject(n))throw new TypeError("data must be an object");return _(n),e}function fw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function pv(n,e){this._pairs=[],n&&D0(n,this,e)}const vS=pv.prototype;vS.append=function(e,t){this._pairs.push([e,t])};vS.toString=function(e){const t=e?function(r){return e.call(this,r,fw)}:fw;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function X5(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yS(n,e,t){if(!e)return n;const r=t&&t.encode||X5;ie.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=ie.isURLSearchParams(e)?e.toString():new pv(e,t).toString(r),a){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class dw{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},W5=typeof URLSearchParams<"u"?URLSearchParams:pv,$5=typeof FormData<"u"?FormData:null,Y5=typeof Blob<"u"?Blob:null,K5={isBrowser:!0,classes:{URLSearchParams:W5,FormData:$5,Blob:Y5},protocols:["http","https","file","blob","url","data"]},mv=typeof window<"u"&&typeof document<"u",sg=typeof navigator=="object"&&navigator||void 0,Q5=mv&&(!sg||["ReactNative","NativeScript","NS"].indexOf(sg.product)<0),Z5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J5=mv&&window.location.href||"http://localhost",eD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mv,hasStandardBrowserEnv:Q5,hasStandardBrowserWebWorkerEnv:Z5,navigator:sg,origin:J5},Symbol.toStringTag,{value:"Module"})),sr={...eD,...K5};function tD(n,e){return D0(n,new sr.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,a){return sr.isNode&&ie.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function nD(n){return ie.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rD(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function _S(n){function e(t,r,i,a){let o=t[a++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),c=a>=t.length;return o=!o&&ie.isArray(i)?i.length:o,c?(ie.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!ie.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],a)&&ie.isArray(i[o])&&(i[o]=rD(i[o])),!u)}if(ie.isFormData(n)&&ie.isFunction(n.entries)){const t={};return ie.forEachEntry(n,(r,i)=>{e(nD(r),i,t,0)}),t}return null}function iD(n,e,t){if(ie.isString(n))try{return(e||JSON.parse)(n),ie.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Cf={transitional:xS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=ie.isObject(e);if(a&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return i?JSON.stringify(_S(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return tD(e,this.formSerializer).toString();if((u=ie.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return D0(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),iD(e)):e}],transformResponse:[function(e){const t=this.transitional||Cf.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(o)throw u.name==="SyntaxError"?He.from(u,He.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sr.classes.FormData,Blob:sr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],n=>{Cf.headers[n]={}});const aD=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sD=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&aD[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},hw=Symbol("internals");function Dc(n){return n&&String(n).trim().toLowerCase()}function Th(n){return n===!1||n==null?n:ie.isArray(n)?n.map(Th):String(n)}function oD(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const lD=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function pm(n,e,t,r,i){if(ie.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ie.isString(e)){if(ie.isString(r))return e.indexOf(r)!==-1;if(ie.isRegExp(r))return r.test(e)}}function uD(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function cD(n,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,o){return this[r].call(this,e,i,a,o)},configurable:!0})})}let Ir=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(u,c,d){const p=Dc(c);if(!p)throw new Error("header name must be a non-empty string");const g=ie.findKey(i,p);(!g||i[g]===void 0||d===!0||d===void 0&&i[g]!==!1)&&(i[g||c]=Th(u))}const o=(u,c)=>ie.forEach(u,(d,p)=>a(d,p,c));if(ie.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ie.isString(e)&&(e=e.trim())&&!lD(e))o(sD(e),t);else if(ie.isObject(e)&&ie.isIterable(e)){let u={},c,d;for(const p of e){if(!ie.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[d=p[0]]=(c=u[d])?ie.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}o(u,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=Dc(e),e){const r=ie.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return oD(i);if(ie.isFunction(t))return t.call(this,i,r);if(ie.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Dc(e),e){const r=ie.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||pm(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(o){if(o=Dc(o),o){const u=ie.findKey(r,o);u&&(!t||pm(r,r[u],u,t))&&(delete r[u],i=!0)}}return ie.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||pm(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return ie.forEach(this,(i,a)=>{const o=ie.findKey(r,a);if(o){t[o]=Th(i),delete t[a];return}const u=e?uD(a):String(a).trim();u!==a&&delete t[a],t[u]=Th(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ie.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[hw]=this[hw]={accessors:{}}).accessors,i=this.prototype;function a(o){const u=Dc(o);r[u]||(cD(i,o),r[u]=!0)}return ie.isArray(e)?e.forEach(a):a(e),this}};Ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(Ir.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ie.freezeMethods(Ir);function mm(n,e){const t=this||Cf,r=e||t,i=Ir.from(r.headers);let a=r.data;return ie.forEach(n,function(u){a=u.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function wS(n){return!!(n&&n.__CANCEL__)}function pu(n,e,t){He.call(this,n??"canceled",He.ERR_CANCELED,e,t),this.name="CanceledError"}ie.inherits(pu,He,{__CANCEL__:!0});function ES(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new He("Request failed with status code "+t.status,[He.ERR_BAD_REQUEST,He.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function fD(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function dD(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),p=r[a];o||(o=d),t[i]=c,r[i]=d;let g=a,x=0;for(;g!==i;)x+=t[g++],g=g%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),d-o<e)return;const _=p&&d-p;return _?Math.round(x*1e3/_):void 0}}function hD(n,e){let t=0,r=1e3/e,i,a;const o=(d,p=Date.now())=>{t=p,i=null,a&&(clearTimeout(a),a=null),n.apply(null,d)};return[(...d)=>{const p=Date.now(),g=p-t;g>=r?o(d,p):(i=d,a||(a=setTimeout(()=>{a=null,o(i)},r-g)))},()=>i&&o(i)]}const qh=(n,e,t=3)=>{let r=0;const i=dD(50,250);return hD(a=>{const o=a.loaded,u=a.lengthComputable?a.total:void 0,c=o-r,d=i(c),p=o<=u;r=o;const g={loaded:o,total:u,progress:u?o/u:void 0,bytes:c,rate:d||void 0,estimated:d&&u&&p?(u-o)/d:void 0,event:a,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(g)},t)},pw=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},mw=n=>(...e)=>ie.asap(()=>n(...e)),pD=sr.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,sr.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(sr.origin),sr.navigator&&/(msie|trident)/i.test(sr.navigator.userAgent)):()=>!0,mD=sr.hasStandardBrowserEnv?{write(n,e,t,r,i,a){const o=[n+"="+encodeURIComponent(e)];ie.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ie.isString(r)&&o.push("path="+r),ie.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gD(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function vD(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function bS(n,e,t){let r=!gD(e);return n&&(r||t==!1)?vD(n,e):e}const gw=n=>n instanceof Ir?{...n}:n;function Mo(n,e){e=e||{};const t={};function r(d,p,g,x){return ie.isPlainObject(d)&&ie.isPlainObject(p)?ie.merge.call({caseless:x},d,p):ie.isPlainObject(p)?ie.merge({},p):ie.isArray(p)?p.slice():p}function i(d,p,g,x){if(ie.isUndefined(p)){if(!ie.isUndefined(d))return r(void 0,d,g,x)}else return r(d,p,g,x)}function a(d,p){if(!ie.isUndefined(p))return r(void 0,p)}function o(d,p){if(ie.isUndefined(p)){if(!ie.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function u(d,p,g){if(g in e)return r(d,p);if(g in n)return r(void 0,d)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,p,g)=>i(gw(d),gw(p),g,!0)};return ie.forEach(Object.keys(Object.assign({},n,e)),function(p){const g=c[p]||i,x=g(n[p],e[p],p);ie.isUndefined(x)&&g!==u||(t[p]=x)}),t}const AS=n=>{const e=Mo({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:u}=e;e.headers=o=Ir.from(o),e.url=yS(bS(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(ie.isFormData(t)){if(sr.hasStandardBrowserEnv||sr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...p]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(sr.hasStandardBrowserEnv&&(r&&ie.isFunction(r)&&(r=r(e)),r||r!==!1&&pD(e.url))){const d=i&&a&&mD.read(a);d&&o.set(i,d)}return e},yD=typeof XMLHttpRequest<"u",xD=yD&&function(n){return new Promise(function(t,r){const i=AS(n);let a=i.data;const o=Ir.from(i.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:d}=i,p,g,x,_,E;function A(){_&&_(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function I(){if(!S)return;const P=Ir.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),F={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:P,config:n,request:S};ES(function(D){t(D),A()},function(D){r(D),A()},F),S=null}"onloadend"in S?S.onloadend=I:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(I)},S.onabort=function(){S&&(r(new He("Request aborted",He.ECONNABORTED,n,S)),S=null)},S.onerror=function(){r(new He("Network Error",He.ERR_NETWORK,n,S)),S=null},S.ontimeout=function(){let V=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const F=i.transitional||xS;i.timeoutErrorMessage&&(V=i.timeoutErrorMessage),r(new He(V,F.clarifyTimeoutError?He.ETIMEDOUT:He.ECONNABORTED,n,S)),S=null},a===void 0&&o.setContentType(null),"setRequestHeader"in S&&ie.forEach(o.toJSON(),function(V,F){S.setRequestHeader(F,V)}),ie.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),u&&u!=="json"&&(S.responseType=i.responseType),d&&([x,E]=qh(d,!0),S.addEventListener("progress",x)),c&&S.upload&&([g,_]=qh(c),S.upload.addEventListener("progress",g),S.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(p=P=>{S&&(r(!P||P.type?new pu(null,n,S):P),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const N=fD(i.url);if(N&&sr.protocols.indexOf(N)===-1){r(new He("Unsupported protocol "+N+":",He.ERR_BAD_REQUEST,n));return}S.send(a||null)})},_D=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(d){if(!i){i=!0,u();const p=d instanceof Error?d:this.reason;r.abort(p instanceof He?p:new pu(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,a(new He(`timeout ${e} of ms exceeded`,He.ETIMEDOUT))},e);const u=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),n=null)};n.forEach(d=>d.addEventListener("abort",a));const{signal:c}=r;return c.unsubscribe=()=>ie.asap(u),c}},wD=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},ED=async function*(n,e){for await(const t of bD(n))yield*wD(t,e)},bD=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},vw=(n,e,t,r)=>{const i=ED(n,e);let a=0,o,u=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:p}=await i.next();if(d){u(),c.close();return}let g=p.byteLength;if(t){let x=a+=g;t(x)}c.enqueue(new Uint8Array(p))}catch(d){throw u(d),d}},cancel(c){return u(c),i.return()}},{highWaterMark:2})},P0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",SS=P0&&typeof ReadableStream=="function",AD=P0&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),TS=(n,...e)=>{try{return!!n(...e)}catch{return!1}},SD=SS&&TS(()=>{let n=!1;const e=new Request(sr.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),yw=64*1024,og=SS&&TS(()=>ie.isReadableStream(new Response("").body)),Xh={stream:og&&(n=>n.body)};P0&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Xh[e]&&(Xh[e]=ie.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new He(`Response type '${e}' is not supported`,He.ERR_NOT_SUPPORT,r)})})})(new Response);const TD=async n=>{if(n==null)return 0;if(ie.isBlob(n))return n.size;if(ie.isSpecCompliantForm(n))return(await new Request(sr.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(n)||ie.isArrayBuffer(n))return n.byteLength;if(ie.isURLSearchParams(n)&&(n=n+""),ie.isString(n))return(await AD(n)).byteLength},CD=async(n,e)=>{const t=ie.toFiniteNumber(n.getContentLength());return t??TD(e)},ID=P0&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:a,timeout:o,onDownloadProgress:u,onUploadProgress:c,responseType:d,headers:p,withCredentials:g="same-origin",fetchOptions:x}=AS(n);d=d?(d+"").toLowerCase():"text";let _=_D([i,a&&a.toAbortSignal()],o),E;const A=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let S;try{if(c&&SD&&t!=="get"&&t!=="head"&&(S=await CD(p,r))!==0){let F=new Request(e,{method:"POST",body:r,duplex:"half"}),W;if(ie.isFormData(r)&&(W=F.headers.get("content-type"))&&p.setContentType(W),F.body){const[D,R]=pw(S,qh(mw(c)));r=vw(F.body,yw,D,R)}}ie.isString(g)||(g=g?"include":"omit");const I="credentials"in Request.prototype;E=new Request(e,{...x,signal:_,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:I?g:void 0});let N=await fetch(E);const P=og&&(d==="stream"||d==="response");if(og&&(u||P&&A)){const F={};["status","statusText","headers"].forEach(M=>{F[M]=N[M]});const W=ie.toFiniteNumber(N.headers.get("content-length")),[D,R]=u&&pw(W,qh(mw(u),!0))||[];N=new Response(vw(N.body,yw,D,()=>{R&&R(),A&&A()}),F)}d=d||"text";let V=await Xh[ie.findKey(Xh,d)||"text"](N,n);return!P&&A&&A(),await new Promise((F,W)=>{ES(F,W,{data:V,headers:Ir.from(N.headers),status:N.status,statusText:N.statusText,config:n,request:E})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new He("Network Error",He.ERR_NETWORK,n,E),{cause:I.cause||I}):He.from(I,I&&I.code,n,E)}}),lg={http:z5,xhr:xD,fetch:ID};ie.forEach(lg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const xw=n=>`- ${n}`,ND=n=>ie.isFunction(n)||n===null||n===!1,CS={getAdapter:n=>{n=ie.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let a=0;a<e;a++){t=n[a];let o;if(r=t,!ND(t)&&(r=lg[(o=String(t)).toLowerCase()],r===void 0))throw new He(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+a]=r}if(!r){const a=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(xw).join(`
`):" "+xw(a[0]):"as no adapter specified";throw new He("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:lg};function gm(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new pu(null,n)}function _w(n){return gm(n),n.headers=Ir.from(n.headers),n.data=mm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),CS.getAdapter(n.adapter||Cf.adapter)(n).then(function(r){return gm(n),r.data=mm.call(n,n.transformResponse,r),r.headers=Ir.from(r.headers),r},function(r){return wS(r)||(gm(n),r&&r.response&&(r.response.data=mm.call(n,n.transformResponse,r.response),r.response.headers=Ir.from(r.response.headers))),Promise.reject(r)})}const IS="1.9.0",M0={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{M0[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const ww={};M0.transitional=function(e,t,r){function i(a,o){return"[Axios v"+IS+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,u)=>{if(e===!1)throw new He(i(o," has been removed"+(t?" in "+t:"")),He.ERR_DEPRECATED);return t&&!ww[o]&&(ww[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,o,u):!0}};M0.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function RD(n,e,t){if(typeof n!="object")throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],o=e[a];if(o){const u=n[a],c=u===void 0||o(u,a,n);if(c!==!0)throw new He("option "+a+" must be "+c,He.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new He("Unknown option "+a,He.ERR_BAD_OPTION)}}const Ch={assertOptions:RD,validators:M0},ji=Ch.validators;let Ro=class{constructor(e){this.defaults=e||{},this.interceptors={request:new dw,response:new dw}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Mo(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&Ch.assertOptions(r,{silentJSONParsing:ji.transitional(ji.boolean),forcedJSONParsing:ji.transitional(ji.boolean),clarifyTimeoutError:ji.transitional(ji.boolean)},!1),i!=null&&(ie.isFunction(i)?t.paramsSerializer={serialize:i}:Ch.assertOptions(i,{encode:ji.function,serialize:ji.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ch.assertOptions(t,{baseUrl:ji.spelling("baseURL"),withXsrfToken:ji.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&ie.merge(a.common,a[t.method]);a&&ie.forEach(["delete","get","head","post","put","patch","common"],E=>{delete a[E]}),t.headers=Ir.concat(o,a);const u=[];let c=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(c=c&&A.synchronous,u.unshift(A.fulfilled,A.rejected))});const d=[];this.interceptors.response.forEach(function(A){d.push(A.fulfilled,A.rejected)});let p,g=0,x;if(!c){const E=[_w.bind(this),void 0];for(E.unshift.apply(E,u),E.push.apply(E,d),x=E.length,p=Promise.resolve(t);g<x;)p=p.then(E[g++],E[g++]);return p}x=u.length;let _=t;for(g=0;g<x;){const E=u[g++],A=u[g++];try{_=E(_)}catch(S){A.call(this,S);break}}try{p=_w.call(this,_)}catch(E){return Promise.reject(E)}for(g=0,x=d.length;g<x;)p=p.then(d[g++],d[g++]);return p}getUri(e){e=Mo(this.defaults,e);const t=bS(e.baseURL,e.url,e.allowAbsoluteUrls);return yS(t,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){Ro.prototype[e]=function(t,r){return this.request(Mo(r||{},{method:e,url:t,data:(r||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(r){return function(a,o,u){return this.request(Mo(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Ro.prototype[e]=t(),Ro.prototype[e+"Form"]=t(!0)});let OD=class NS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(u=>{r.subscribe(u),a=u}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},e(function(a,o,u){r.reason||(r.reason=new pu(a,o,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new NS(function(i){e=i}),cancel:e}}};function DD(n){return function(t){return n.apply(null,t)}}function PD(n){return ie.isObject(n)&&n.isAxiosError===!0}const ug={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ug).forEach(([n,e])=>{ug[e]=n});function RS(n){const e=new Ro(n),t=sS(Ro.prototype.request,e);return ie.extend(t,Ro.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return RS(Mo(n,i))},t}const sn=RS(Cf);sn.Axios=Ro;sn.CanceledError=pu;sn.CancelToken=OD;sn.isCancel=wS;sn.VERSION=IS;sn.toFormData=D0;sn.AxiosError=He;sn.Cancel=sn.CanceledError;sn.all=function(e){return Promise.all(e)};sn.spread=DD;sn.isAxiosError=PD;sn.mergeConfig=Mo;sn.AxiosHeaders=Ir;sn.formToJSON=n=>_S(ie.isHTMLForm(n)?new FormData(n):n);sn.getAdapter=CS.getAdapter;sn.HttpStatusCode=ug;sn.default=sn;const{Axios:XV,AxiosError:WV,CanceledError:$V,isCancel:YV,CancelToken:KV,VERSION:QV,all:ZV,Cancel:JV,isAxiosError:eU,spread:tU,toFormData:nU,AxiosHeaders:rU,HttpStatusCode:iU,formToJSON:aU,getAdapter:sU,mergeConfig:oU}=sn,Zt=sn.create({baseURL:"https://woo-combine-backend.onrender.com/api",withCredentials:!1,timeout:45e3});Zt.interceptors.response.use(n=>n,async n=>{var a,o;const e=n.config;e._retryCount||(e._retryCount=0);const t=3;if(!(e._retryCount<t&&(n.code==="ECONNABORTED"||n.message.includes("timeout")||n.message.includes("Network Error")||((a=n.response)==null?void 0:a.status)>=500||!n.response)))return Promise.reject(n);e._retryCount+=1;let i=Math.pow(2,e._retryCount)*3e3;return n.code==="ECONNABORTED"||n.message.includes("timeout")?(i=Math.min(i*2,15e3),console.log(`[API] Cold start timeout detected, retrying in ${i/1e3}s... (attempt ${e._retryCount}/${t})`)):n.response?((o=n.response)==null?void 0:o.status)>=500&&(i=Math.min(i*1.5,1e4),console.log(`[API] Server error (${n.response.status}), retrying in ${i/1e3}s... (attempt ${e._retryCount}/${t})`)):(i=Math.min(i*1.5,12e3),console.log(`[API] Network failure, retrying in ${i/1e3}s... (attempt ${e._retryCount}/${t})`)),await new Promise(u=>setTimeout(u,i)),Zt(e)});Zt.interceptors.request.use(async n=>{const e=Bt.currentUser;if(e)try{const t=await e.getIdToken();n.headers=n.headers||{},n.headers.Authorization=`Bearer ${t}`}catch(t){console.warn("[API] Failed to get auth token:",t)}return n},n=>Promise.reject(n));Zt.interceptors.response.use(n=>n,n=>{var e,t;return(t=(e=n.response)==null?void 0:e.data)!=null&&t.detail?console.error("[API] Server Error:",n.response.data.detail):n.code==="ECONNABORTED"?console.error("[API] Request timeout - server may be starting up"):n.message.includes("Network Error")?console.error("[API] Network connectivity issue"):console.error("[API] Request failed:",n.message),Promise.reject(n)});var Ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,OS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function M(){}M.prototype=R.prototype,D.D=R.prototype,D.prototype=new M,D.prototype.constructor=D,D.C=function(L,H,G){for(var U=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)U[Ie-2]=arguments[Ie];return R.prototype[H].apply(L,U)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,R,M){M||(M=0);var L=Array(16);if(typeof R=="string")for(var H=0;16>H;++H)L[H]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(H=0;16>H;++H)L[H]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=D.g[0],M=D.g[1],H=D.g[2];var G=D.g[3],U=R+(G^M&(H^G))+L[0]+3614090360&4294967295;R=M+(U<<7&4294967295|U>>>25),U=G+(H^R&(M^H))+L[1]+3905402710&4294967295,G=R+(U<<12&4294967295|U>>>20),U=H+(M^G&(R^M))+L[2]+606105819&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(R^H&(G^R))+L[3]+3250441966&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(G^M&(H^G))+L[4]+4118548399&4294967295,R=M+(U<<7&4294967295|U>>>25),U=G+(H^R&(M^H))+L[5]+1200080426&4294967295,G=R+(U<<12&4294967295|U>>>20),U=H+(M^G&(R^M))+L[6]+2821735955&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(R^H&(G^R))+L[7]+4249261313&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(G^M&(H^G))+L[8]+1770035416&4294967295,R=M+(U<<7&4294967295|U>>>25),U=G+(H^R&(M^H))+L[9]+2336552879&4294967295,G=R+(U<<12&4294967295|U>>>20),U=H+(M^G&(R^M))+L[10]+4294925233&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(R^H&(G^R))+L[11]+2304563134&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(G^M&(H^G))+L[12]+1804603682&4294967295,R=M+(U<<7&4294967295|U>>>25),U=G+(H^R&(M^H))+L[13]+4254626195&4294967295,G=R+(U<<12&4294967295|U>>>20),U=H+(M^G&(R^M))+L[14]+2792965006&4294967295,H=G+(U<<17&4294967295|U>>>15),U=M+(R^H&(G^R))+L[15]+1236535329&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(H^G&(M^H))+L[1]+4129170786&4294967295,R=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(R^M))+L[6]+3225465664&4294967295,G=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(G^R))+L[11]+643717713&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^R&(H^G))+L[0]+3921069994&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(H^G&(M^H))+L[5]+3593408605&4294967295,R=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(R^M))+L[10]+38016083&4294967295,G=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(G^R))+L[15]+3634488961&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^R&(H^G))+L[4]+3889429448&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(H^G&(M^H))+L[9]+568446438&4294967295,R=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(R^M))+L[14]+3275163606&4294967295,G=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(G^R))+L[3]+4107603335&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^R&(H^G))+L[8]+1163531501&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(H^G&(M^H))+L[13]+2850285829&4294967295,R=M+(U<<5&4294967295|U>>>27),U=G+(M^H&(R^M))+L[2]+4243563512&4294967295,G=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(G^R))+L[7]+1735328473&4294967295,H=G+(U<<14&4294967295|U>>>18),U=M+(G^R&(H^G))+L[12]+2368359562&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(M^H^G)+L[5]+4294588738&4294967295,R=M+(U<<4&4294967295|U>>>28),U=G+(R^M^H)+L[8]+2272392833&4294967295,G=R+(U<<11&4294967295|U>>>21),U=H+(G^R^M)+L[11]+1839030562&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^R)+L[14]+4259657740&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(M^H^G)+L[1]+2763975236&4294967295,R=M+(U<<4&4294967295|U>>>28),U=G+(R^M^H)+L[4]+1272893353&4294967295,G=R+(U<<11&4294967295|U>>>21),U=H+(G^R^M)+L[7]+4139469664&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^R)+L[10]+3200236656&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(M^H^G)+L[13]+681279174&4294967295,R=M+(U<<4&4294967295|U>>>28),U=G+(R^M^H)+L[0]+3936430074&4294967295,G=R+(U<<11&4294967295|U>>>21),U=H+(G^R^M)+L[3]+3572445317&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^R)+L[6]+76029189&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(M^H^G)+L[9]+3654602809&4294967295,R=M+(U<<4&4294967295|U>>>28),U=G+(R^M^H)+L[12]+3873151461&4294967295,G=R+(U<<11&4294967295|U>>>21),U=H+(G^R^M)+L[15]+530742520&4294967295,H=G+(U<<16&4294967295|U>>>16),U=M+(H^G^R)+L[2]+3299628645&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(H^(M|~G))+L[0]+4096336452&4294967295,R=M+(U<<6&4294967295|U>>>26),U=G+(M^(R|~H))+L[7]+1126891415&4294967295,G=R+(U<<10&4294967295|U>>>22),U=H+(R^(G|~M))+L[14]+2878612391&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~R))+L[5]+4237533241&4294967295,M=H+(U<<21&4294967295|U>>>11),U=R+(H^(M|~G))+L[12]+1700485571&4294967295,R=M+(U<<6&4294967295|U>>>26),U=G+(M^(R|~H))+L[3]+2399980690&4294967295,G=R+(U<<10&4294967295|U>>>22),U=H+(R^(G|~M))+L[10]+4293915773&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~R))+L[1]+2240044497&4294967295,M=H+(U<<21&4294967295|U>>>11),U=R+(H^(M|~G))+L[8]+1873313359&4294967295,R=M+(U<<6&4294967295|U>>>26),U=G+(M^(R|~H))+L[15]+4264355552&4294967295,G=R+(U<<10&4294967295|U>>>22),U=H+(R^(G|~M))+L[6]+2734768916&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~R))+L[13]+1309151649&4294967295,M=H+(U<<21&4294967295|U>>>11),U=R+(H^(M|~G))+L[4]+4149444226&4294967295,R=M+(U<<6&4294967295|U>>>26),U=G+(M^(R|~H))+L[11]+3174756917&4294967295,G=R+(U<<10&4294967295|U>>>22),U=H+(R^(G|~M))+L[2]+718787259&4294967295,H=G+(U<<15&4294967295|U>>>17),U=M+(G^(H|~R))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(H+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+H&4294967295,D.g[3]=D.g[3]+G&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var M=R-this.blockSize,L=this.B,H=this.h,G=0;G<R;){if(H==0)for(;G<=M;)i(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<R;)if(L[H++]=D.charCodeAt(G++),H==this.blockSize){i(this,L),H=0;break}}else for(;G<R;)if(L[H++]=D[G++],H==this.blockSize){i(this,L),H=0;break}}this.h=H,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var M=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=M&255,M/=256;for(this.u(D),D=Array(16),R=M=0;4>R;++R)for(var L=0;32>L;L+=8)D[M++]=this.g[R]>>>L&255;return D};function a(D,R){var M=u;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=R(D)}function o(D,R){this.h=R;for(var M=[],L=!0,H=D.length-1;0<=H;H--){var G=D[H]|0;L&&G==R||(M[H]=G,L=!1)}this.g=M}var u={};function c(D){return-128<=D&&128>D?a(D,function(R){return new o([R|0],0>R?-1:0)}):new o([D|0],0>D?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return S(d(-D));for(var R=[],M=1,L=0;D>=M;L++)R[L]=D/M|0,M*=4294967296;return new o(R,0)}function p(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return S(p(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=d(Math.pow(R,8)),L=g,H=0;H<D.length;H+=8){var G=Math.min(8,D.length-H),U=parseInt(D.substring(H,H+G),R);8>G?(G=d(Math.pow(R,G)),L=L.j(G).add(d(U))):(L=L.j(M),L=L.add(d(U)))}return L}var g=c(0),x=c(1),_=c(16777216);n=o.prototype,n.m=function(){if(A(this))return-S(this).m();for(var D=0,R=1,M=0;M<this.g.length;M++){var L=this.i(M);D+=(0<=L?L:4294967296+L)*R,R*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(A(this))return"-"+S(this).toString(D);for(var R=d(Math.pow(D,6)),M=this,L="";;){var H=V(M,R).g;M=I(M,H.j(R));var G=((0<M.g.length?M.g[0]:M.h)>>>0).toString(D);if(M=H,E(M))return G+L;for(;6>G.length;)G="0"+G;L=G+L}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function A(D){return D.h==-1}n.l=function(D){return D=I(this,D),A(D)?-1:E(D)?0:1};function S(D){for(var R=D.g.length,M=[],L=0;L<R;L++)M[L]=~D.g[L];return new o(M,~D.h).add(x)}n.abs=function(){return A(this)?S(this):this},n.add=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0,H=0;H<=R;H++){var G=L+(this.i(H)&65535)+(D.i(H)&65535),U=(G>>>16)+(this.i(H)>>>16)+(D.i(H)>>>16);L=U>>>16,G&=65535,U&=65535,M[H]=U<<16|G}return new o(M,M[M.length-1]&-2147483648?-1:0)};function I(D,R){return D.add(S(R))}n.j=function(D){if(E(this)||E(D))return g;if(A(this))return A(D)?S(this).j(S(D)):S(S(this).j(D));if(A(D))return S(this.j(S(D)));if(0>this.l(_)&&0>D.l(_))return d(this.m()*D.m());for(var R=this.g.length+D.g.length,M=[],L=0;L<2*R;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(var H=0;H<D.g.length;H++){var G=this.i(L)>>>16,U=this.i(L)&65535,Ie=D.i(H)>>>16,Be=D.i(H)&65535;M[2*L+2*H]+=U*Be,N(M,2*L+2*H),M[2*L+2*H+1]+=G*Be,N(M,2*L+2*H+1),M[2*L+2*H+1]+=U*Ie,N(M,2*L+2*H+1),M[2*L+2*H+2]+=G*Ie,N(M,2*L+2*H+2)}for(L=0;L<R;L++)M[L]=M[2*L+1]<<16|M[2*L];for(L=R;L<2*R;L++)M[L]=0;return new o(M,0)};function N(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function P(D,R){this.g=D,this.h=R}function V(D,R){if(E(R))throw Error("division by zero");if(E(D))return new P(g,g);if(A(D))return R=V(S(D),R),new P(S(R.g),S(R.h));if(A(R))return R=V(D,S(R)),new P(S(R.g),R.h);if(30<D.g.length){if(A(D)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var M=x,L=R;0>=L.l(D);)M=F(M),L=F(L);var H=W(M,1),G=W(L,1);for(L=W(L,2),M=W(M,2);!E(L);){var U=G.add(L);0>=U.l(D)&&(H=H.add(M),G=U),L=W(L,1),M=W(M,1)}return R=I(D,H.j(R)),new P(H,R)}for(H=g;0<=D.l(R);){for(M=Math.max(1,Math.floor(D.m()/R.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),G=d(M),U=G.j(R);A(U)||0<U.l(D);)M-=L,G=d(M),U=G.j(R);E(G)&&(G=x),H=H.add(G),D=I(D,U)}return new P(H,D)}n.A=function(D){return V(this,D).h},n.and=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0;L<R;L++)M[L]=this.i(L)&D.i(L);return new o(M,this.h&D.h)},n.or=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0;L<R;L++)M[L]=this.i(L)|D.i(L);return new o(M,this.h|D.h)},n.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0;L<R;L++)M[L]=this.i(L)^D.i(L);return new o(M,this.h^D.h)};function F(D){for(var R=D.g.length+1,M=[],L=0;L<R;L++)M[L]=D.i(L)<<1|D.i(L-1)>>>31;return new o(M,D.h)}function W(D,R){var M=R>>5;R%=32;for(var L=D.g.length-M,H=[],G=0;G<L;G++)H[G]=0<R?D.i(G+M)>>>R|D.i(G+M+1)<<32-R:D.i(G+M);return new o(H,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Is=o}).apply(typeof Ew<"u"?Ew:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DS,Vc,PS,Ih,cg,MS,kS,LS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,b,T){return v==Array.prototype||v==Object.prototype||(v[b]=T.value),v};function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var b=0;b<v.length;++b){var T=v[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(v,b){if(b)e:{var T=r;v=v.split(".");for(var k=0;k<v.length-1;k++){var Y=v[k];if(!(Y in T))break e;T=T[Y]}v=v[v.length-1],k=T[v],b=b(k),b!=k&&b!=null&&e(T,v,{configurable:!0,writable:!0,value:b})}}function a(v,b){v instanceof String&&(v+="");var T=0,k=!1,Y={next:function(){if(!k&&T<v.length){var re=T++;return{value:b(re,v[re]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}i("Array.prototype.values",function(v){return v||function(){return a(this,function(b,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(v){var b=typeof v;return b=b!="object"?b:v?Array.isArray(v)?"array":b:"null",b=="array"||b=="object"&&typeof v.length=="number"}function d(v){var b=typeof v;return b=="object"&&v!=null||b=="function"}function p(v,b,T){return v.call.apply(v.bind,arguments)}function g(v,b,T){if(!v)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,k),v.apply(b,Y)}}return function(){return v.apply(b,arguments)}}function x(v,b,T){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,x.apply(null,arguments)}function _(v,b){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),v.apply(this,k)}}function E(v,b){function T(){}T.prototype=b.prototype,v.aa=b.prototype,v.prototype=new T,v.prototype.constructor=v,v.Qb=function(k,Y,re){for(var xe=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)xe[tt-2]=arguments[tt];return b.prototype[Y].apply(k,xe)}}function A(v){const b=v.length;if(0<b){const T=Array(b);for(let k=0;k<b;k++)T[k]=v[k];return T}return[]}function S(v,b){for(let T=1;T<arguments.length;T++){const k=arguments[T];if(c(k)){const Y=v.length||0,re=k.length||0;v.length=Y+re;for(let xe=0;xe<re;xe++)v[Y+xe]=k[xe]}else v.push(k)}}class I{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function N(v){return/^[\s\xa0]*$/.test(v)}function P(){var v=u.navigator;return v&&(v=v.userAgent)?v:""}function V(v){return V[" "](v),v}V[" "]=function(){};var F=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function W(v,b,T){for(const k in v)b.call(T,v[k],k,v)}function D(v,b){for(const T in v)b.call(void 0,v[T],T,v)}function R(v){const b={};for(const T in v)b[T]=v[T];return b}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(v,b){let T,k;for(let Y=1;Y<arguments.length;Y++){k=arguments[Y];for(T in k)v[T]=k[T];for(let re=0;re<M.length;re++)T=M[re],Object.prototype.hasOwnProperty.call(k,T)&&(v[T]=k[T])}}function H(v){var b=1;v=v.split(":");const T=[];for(;0<b&&v.length;)T.push(v.shift()),b--;return v.length&&T.push(v.join(":")),T}function G(v){u.setTimeout(()=>{throw v},0)}function U(){var v=Ee;let b=null;return v.g&&(b=v.g,v.g=v.g.next,v.g||(v.h=null),b.next=null),b}class Ie{constructor(){this.h=this.g=null}add(b,T){const k=Be.get();k.set(b,T),this.h?this.h.next=k:this.g=k,this.h=k}}var Be=new I(()=>new te,v=>v.reset());class te{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ve=!1,Ee=new Ie,q=()=>{const v=u.Promise.resolve(void 0);ne=()=>{v.then(ue)}};var ue=()=>{for(var v;v=U();){try{v.h.call(v.g)}catch(T){G(T)}var b=Be;b.j(v),100>b.h&&(b.h++,v.next=b.g,b.g=v)}ve=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(v,b){this.type=v,this.g=this.target=b,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var v=!1,b=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const T=()=>{};u.addEventListener("test",T,b),u.removeEventListener("test",T,b)}catch{}return v}();function he(v,b){if(de.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var T=this.type=v.type,k=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=b,b=v.relatedTarget){if(F){e:{try{V(b.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(b=null)}}else T=="mouseover"?b=v.fromElement:T=="mouseout"&&(b=v.toElement);this.relatedTarget=b,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:ye[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&he.aa.h.call(this)}}E(he,de);var ye={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function Ge(v,b,T,k,Y){this.listener=v,this.proxy=null,this.src=b,this.type=T,this.capture=!!k,this.ha=Y,this.key=++Ne,this.da=this.fa=!1}function Wt(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function yr(v){this.src=v,this.g={},this.h=0}yr.prototype.add=function(v,b,T,k,Y){var re=v.toString();v=this.g[re],v||(v=this.g[re]=[],this.h++);var xe=$t(v,b,k,Y);return-1<xe?(b=v[xe],T||(b.fa=!1)):(b=new Ge(b,this.src,re,!!k,Y),b.fa=T,v.push(b)),b};function ur(v,b){var T=b.type;if(T in v.g){var k=v.g[T],Y=Array.prototype.indexOf.call(k,b,void 0),re;(re=0<=Y)&&Array.prototype.splice.call(k,Y,1),re&&(Wt(b),v.g[T].length==0&&(delete v.g[T],v.h--))}}function $t(v,b,T,k){for(var Y=0;Y<v.length;++Y){var re=v[Y];if(!re.da&&re.listener==b&&re.capture==!!T&&re.ha==k)return Y}return-1}var xr="closure_lm_"+(1e6*Math.random()|0),Vs={};function Yi(v,b,T,k,Y){if(Array.isArray(b)){for(var re=0;re<b.length;re++)Yi(v,b[re],T,k,Y);return null}return T=_i(T),v&&v[be]?v.K(b,T,d(k)?!!k.capture:!1,Y):_r(v,b,T,!1,k,Y)}function _r(v,b,T,k,Y,re){if(!b)throw Error("Invalid event type");var xe=d(Y)?!!Y.capture:!!Y,tt=Ut(v);if(tt||(v[xr]=tt=new yr(v)),T=tt.add(b,T,k,xe,re),T.proxy)return T;if(k=wu(),T.proxy=k,k.src=v,k.listener=T,v.addEventListener)ae||(Y=xe),Y===void 0&&(Y=!1),v.addEventListener(b.toString(),k,Y);else if(v.attachEvent)v.attachEvent(Ce(b.toString()),k);else if(v.addListener&&v.removeListener)v.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function wu(){function v(T){return b.call(v.src,v.listener,T)}const b=et;return v}function Us(v,b,T,k,Y){if(Array.isArray(b))for(var re=0;re<b.length;re++)Us(v,b[re],T,k,Y);else k=d(k)?!!k.capture:!!k,T=_i(T),v&&v[be]?(v=v.i,b=String(b).toString(),b in v.g&&(re=v.g[b],T=$t(re,T,k,Y),-1<T&&(Wt(re[T]),Array.prototype.splice.call(re,T,1),re.length==0&&(delete v.g[b],v.h--)))):v&&(v=Ut(v))&&(b=v.g[b.toString()],v=-1,b&&(v=$t(b,T,k,Y)),(T=-1<v?b[v]:null)&&Ki(T))}function Ki(v){if(typeof v!="number"&&v&&!v.da){var b=v.src;if(b&&b[be])ur(b.i,v);else{var T=v.type,k=v.proxy;b.removeEventListener?b.removeEventListener(T,k,v.capture):b.detachEvent?b.detachEvent(Ce(T),k):b.addListener&&b.removeListener&&b.removeListener(k),(T=Ut(b))?(ur(T,v),T.h==0&&(T.src=null,b[xr]=null)):Wt(v)}}}function Ce(v){return v in Vs?Vs[v]:Vs[v]="on"+v}function et(v,b){if(v.da)v=!0;else{b=new he(b,this);var T=v.listener,k=v.ha||v.src;v.fa&&Ki(v),v=T.call(k,b)}return v}function Ut(v){return v=v[xr],v instanceof yr?v:null}var Fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _i(v){return typeof v=="function"?v:(v[Fn]||(v[Fn]=function(b){return v.handleEvent(b)}),v[Fn])}function ut(){me.call(this),this.i=new yr(this),this.M=this,this.F=null}E(ut,me),ut.prototype[be]=!0,ut.prototype.removeEventListener=function(v,b,T,k){Us(this,v,b,T,k)};function dt(v,b){var T,k=v.F;if(k)for(T=[];k;k=k.F)T.push(k);if(v=v.M,k=b.type||b,typeof b=="string")b=new de(b,v);else if(b instanceof de)b.target=b.target||v;else{var Y=b;b=new de(k,v),L(b,Y)}if(Y=!0,T)for(var re=T.length-1;0<=re;re--){var xe=b.g=T[re];Y=Jn(xe,k,!0,b)&&Y}if(xe=b.g=v,Y=Jn(xe,k,!0,b)&&Y,Y=Jn(xe,k,!1,b)&&Y,T)for(re=0;re<T.length;re++)xe=b.g=T[re],Y=Jn(xe,k,!1,b)&&Y}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var v=this.i,b;for(b in v.g){for(var T=v.g[b],k=0;k<T.length;k++)Wt(T[k]);delete v.g[b],v.h--}}this.F=null},ut.prototype.K=function(v,b,T,k){return this.i.add(String(v),b,!1,T,k)},ut.prototype.L=function(v,b,T,k){return this.i.add(String(v),b,!0,T,k)};function Jn(v,b,T,k){if(b=v.i.g[String(b)],!b)return!0;b=b.concat();for(var Y=!0,re=0;re<b.length;++re){var xe=b[re];if(xe&&!xe.da&&xe.capture==T){var tt=xe.listener,vn=xe.ha||xe.src;xe.fa&&ur(v.i,xe),Y=tt.call(vn,k)!==!1&&Y}}return Y&&!k.defaultPrevented}function mn(v,b,T){if(typeof v=="function")T&&(v=x(v,T));else if(v&&typeof v.handleEvent=="function")v=x(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(v,b||0)}function Ho(v){v.g=mn(()=>{v.g=null,v.i&&(v.i=!1,Ho(v))},v.l);const b=v.h;v.h=null,v.m.apply(null,b)}class Fs extends me{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ho(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(v){me.call(this),this.h=v,this.g={}}E(Qi,me);var Hs=[];function zs(v){W(v.g,function(b,T){this.g.hasOwnProperty(T)&&Ki(b)},v),v.g={}}Qi.prototype.N=function(){Qi.aa.N.call(this),zs(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=u.JSON.stringify,zo=u.JSON.parse,Gs=class{stringify(v){return u.JSON.stringify(v,void 0)}parse(v){return u.JSON.parse(v,void 0)}};function Eu(){}Eu.prototype.h=null;function bu(v){return v.h||(v.h=v.i())}function Au(){}var Zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ji(){de.call(this,"d")}E(Ji,de);function Su(){de.call(this,"c")}E(Su,de);var wi={},Tu=null;function Ga(){return Tu=Tu||new ut}wi.La="serverreachability";function Go(v){de.call(this,wi.La,v)}E(Go,de);function qa(v){const b=Ga();dt(b,new Go(b))}wi.STAT_EVENT="statevent";function jf(v,b){de.call(this,wi.STAT_EVENT,v),this.stat=b}E(jf,de);function Lt(v){const b=Ga();dt(b,new jf(b,v))}wi.Ma="timingevent";function gn(v,b){de.call(this,wi.Ma,v),this.size=b}E(gn,de);function on(v,b){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){v()},b)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function Cu(v,b,T,k,Y,re){v.info(function(){if(v.g)if(re)for(var xe="",tt=re.split("&"),vn=0;vn<tt.length;vn++){var nt=tt[vn].split("=");if(1<nt.length){var On=nt[0];nt=nt[1];var yn=On.split("_");xe=2<=yn.length&&yn[1]=="type"?xe+(On+"="+nt+"&"):xe+(On+"=redacted&")}}else xe=null;else xe=re;return"XMLHTTP REQ ("+k+") [attempt "+Y+"]: "+b+`
`+T+`
`+xe})}function Q0(v,b,T,k,Y,re,xe){v.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Y+"]: "+b+`
`+T+`
`+re+" "+xe})}function Xa(v,b,T,k){v.info(function(){return"XMLHTTP TEXT ("+b+"): "+qs(v,T)+(k?" "+k:"")})}function Bf(v,b){v.info(function(){return"TIMEOUT: "+b})}Vr.prototype.info=function(){};function qs(v,b){if(!v.g)return b;if(!b)return null;try{var T=JSON.parse(b);if(T){for(v=0;v<T.length;v++)if(Array.isArray(T[v])){var k=T[v];if(!(2>k.length)){var Y=k[1];if(Array.isArray(Y)&&!(1>Y.length)){var re=Y[0];if(re!="noop"&&re!="stop"&&re!="close")for(var xe=1;xe<Y.length;xe++)Y[xe]=""}}}}return ii(T)}catch{return b}}var Wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ea={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ei;function bi(){}E(bi,Eu),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},Ei=new bi;function cr(v,b,T,k){this.j=v,this.i=b,this.l=T,this.R=k||1,this.U=new Qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new en}function en(){this.i=null,this.g="",this.h=!1}var Iu={},qo={};function ai(v,b,T){v.L=1,v.v=Ks(Or(b)),v.m=T,v.P=!0,ta(v,null)}function ta(v,b){v.F=Date.now(),Xs(v),v.A=Or(v.v);var T=v.A,k=v.R;Array.isArray(k)||(k=[String(k)]),Mu(T.i,"t",k),v.C=0,T=v.j.J,v.h=new en,v.g=ed(v.j,T?b:null,!v.m),0<v.O&&(v.M=new Fs(x(v.Y,v,v.g),v.O)),b=v.U,T=v.g,k=v.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Hs[0]=Y.toString()),Y=Hs);for(var re=0;re<Y.length;re++){var xe=Yi(T,Y[re],k||b.handleEvent,!1,b.h||b);if(!xe)break;b.g[xe.key]=xe}b=v.H?R(v.H):{},v.m?(v.u||(v.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,b)):(v.u="GET",v.g.ea(v.A,v.u,null,b)),qa(),Cu(v.i,v.u,v.A,v.l,v.R,v.m)}cr.prototype.ca=function(v){v=v.target;const b=this.M;b&&zr(v)==3?b.j():this.Y(v)},cr.prototype.Y=function(v){try{if(v==this.g)e:{const yn=zr(this.g);var b=this.g.Ba();const ua=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||Xf(this.g)))){this.J||yn!=4||b==7||(b==8||0>=ua?qa(3):qa(2)),$a(this);var T=this.g.Z();this.X=T;t:if(Vf(this)){var k=Xf(this.g);v="";var Y=k.length,re=zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),Ai(this);var xe="";break t}this.h.i=new u.TextDecoder}for(b=0;b<Y;b++)this.h.h=!0,v+=this.h.i.decode(k[b],{stream:!(re&&b==Y-1)});k.length=0,this.h.g+=v,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=T==200,Q0(this.i,this.u,this.A,this.l,this.R,yn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,vn=this.g;if((tt=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(tt)){var nt=tt;break t}}nt=null}if(T=nt)Xa(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ws(this,T);else{this.o=!1,this.s=3,Lt(12),Hn(this),Ai(this);break e}}if(this.P){T=!0;let zn;for(;!this.J&&this.C<xe.length;)if(zn=Uf(this,xe),zn==qo){yn==4&&(this.s=4,Lt(14),T=!1),Xa(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Iu){this.s=4,Lt(15),Xa(this.i,this.l,xe,"[Invalid Chunk]"),T=!1;break}else Xa(this.i,this.l,zn,null),Ws(this,zn);if(Vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||xe.length!=0||this.h.h||(this.s=1,Lt(16),T=!1),this.o=this.o&&T,!T)Xa(this.i,this.l,xe,"[Invalid Chunked Response]"),Hn(this),Ai(this);else if(0<xe.length&&!this.W){this.W=!0;var On=this.j;On.g==this&&On.ba&&!On.M&&(On.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),io(On),On.M=!0,Lt(11))}}else Xa(this.i,this.l,xe,null),Ws(this,xe);yn==4&&Hn(this),this.o&&!this.J&&(yn==4?Qf(this.j,this):(this.o=!1,Xs(this)))}else n1(this.g),T==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Hn(this),Ai(this)}}}catch{}finally{}};function Vf(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function Uf(v,b){var T=v.C,k=b.indexOf(`
`,T);return k==-1?qo:(T=Number(b.substring(T,k)),isNaN(T)?Iu:(k+=1,k+T>b.length?qo:(b=b.slice(k,k+T),v.C=k+T,b)))}cr.prototype.cancel=function(){this.J=!0,Hn(this)};function Xs(v){v.S=Date.now()+v.I,Ff(v,v.I)}function Ff(v,b){if(v.B!=null)throw Error("WatchDog timer not null");v.B=on(x(v.ba,v),b)}function $a(v){v.B&&(u.clearTimeout(v.B),v.B=null)}cr.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Bf(this.i,this.A),this.L!=2&&(qa(),Lt(17)),Hn(this),this.s=2,Ai(this)):Ff(this,this.S-v)};function Ai(v){v.j.G==0||v.J||Qf(v.j,v)}function Hn(v){$a(v);var b=v.M;b&&typeof b.ma=="function"&&b.ma(),v.M=null,zs(v.U),v.g&&(b=v.g,v.g=null,b.abort(),b.ma())}function Ws(v,b){try{var T=v.j;if(T.G!=0&&(T.g==v||Nu(T.h,v))){if(!v.K&&Nu(T.h,v)&&T.G==3){try{var k=T.Da.g.parse(b)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Y=k;if(Y[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<v.F)rl(T),tl(T);else break e;Vu(T),Lt(18)}}else T.za=Y[1],0<T.za-T.T&&37500>Y[2]&&T.F&&T.v==0&&!T.C&&(T.C=on(x(T.Za,T),6e3));if(1>=Wo(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else la(T,11)}else if((v.K||T.g==v)&&rl(T),!N(b))for(Y=T.Da.g.parse(b),b=0;b<Y.length;b++){let nt=Y[b];if(T.T=nt[0],nt=nt[1],T.G==2)if(nt[0]=="c"){T.K=nt[1],T.ia=nt[2];const On=nt[3];On!=null&&(T.la=On,T.j.info("VER="+T.la));const yn=nt[4];yn!=null&&(T.Aa=yn,T.j.info("SVER="+T.Aa));const ua=nt[5];ua!=null&&typeof ua=="number"&&0<ua&&(k=1.5*ua,T.L=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const zn=v.g;if(zn){const Oi=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var re=k.h;re.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&($o(re,re.h),re.h=null))}if(k.D){const Fu=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fu&&(k.ya=Fu,bt(k.I,k.D,Fu))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-v.F,T.j.info("Handshake RTT: "+T.R+"ms")),k=T;var xe=v;if(k.qa=Jf(k,k.J?k.ia:null,k.W),xe.K){fr(k.h,xe);var tt=xe,vn=k.L;vn&&(tt.I=vn),tt.B&&($a(tt),Xs(tt)),k.g=xe}else Yf(k);0<T.i.length&&nl(T)}else nt[0]!="stop"&&nt[0]!="close"||la(T,7);else T.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?la(T,7):ju(T):nt[0]!="noop"&&T.l&&T.l.ta(nt),T.v=0)}}qa(4)}catch{}}var Hf=class{constructor(v,b){this.g=v,this.map=b}};function na(v){this.l=v||10,u.PerformanceNavigationTiming?(v=u.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xo(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Wo(v){return v.h?1:v.g?v.g.size:0}function Nu(v,b){return v.h?v.h==b:v.g?v.g.has(b):!1}function $o(v,b){v.g?v.g.add(b):v.h=b}function fr(v,b){v.h&&v.h==b?v.h=null:v.g&&v.g.has(b)&&v.g.delete(b)}na.prototype.cancel=function(){if(this.i=Ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Ru(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let b=v.i;for(const T of v.g.values())b=b.concat(T.D);return b}return A(v.i)}function Z0(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(c(v)){for(var b=[],T=v.length,k=0;k<T;k++)b.push(v[k]);return b}b=[],T=0;for(k in v)b[T++]=v[k];return b}function Yo(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(c(v)||typeof v=="string"){var b=[];v=v.length;for(var T=0;T<v;T++)b.push(T);return b}b=[],T=0;for(const k in v)b[T++]=k;return b}}}function Ou(v,b){if(v.forEach&&typeof v.forEach=="function")v.forEach(b,void 0);else if(c(v)||typeof v=="string")Array.prototype.forEach.call(v,b,void 0);else for(var T=Yo(v),k=Z0(v),Y=k.length,re=0;re<Y;re++)b.call(void 0,k[re],T&&T[re],v)}var $s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J0(v,b){if(v){v=v.split("&");for(var T=0;T<v.length;T++){var k=v[T].indexOf("="),Y=null;if(0<=k){var re=v[T].substring(0,k);Y=v[T].substring(k+1)}else re=v[T];b(re,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function ln(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof ln){this.h=v.h,Ys(this,v.j),this.o=v.o,this.g=v.g,Ya(this,v.s),this.l=v.l;var b=v.i,T=new ia;T.i=b.i,b.g&&(T.g=new Map(b.g),T.h=b.h),ra(this,T),this.m=v.m}else v&&(b=String(v).match($s))?(this.h=!1,Ys(this,b[1]||"",!0),this.o=Ur(b[2]||""),this.g=Ur(b[3]||"",!0),Ya(this,b[4]),this.l=Ur(b[5]||"",!0),ra(this,b[6]||"",!0),this.m=Ur(b[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}ln.prototype.toString=function(){var v=[],b=this.j;b&&v.push(Qs(b,Du,!0),":");var T=this.g;return(T||b=="file")&&(v.push("//"),(b=this.o)&&v.push(Qs(b,Du,!0),"@"),v.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&v.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&v.push("/"),v.push(Qs(T,T.charAt(0)=="/"?e1:Pu,!0))),(T=this.i.toString())&&v.push("?",T),(T=this.m)&&v.push("#",Qs(T,Ko)),v.join("")};function Or(v){return new ln(v)}function Ys(v,b,T){v.j=T?Ur(b,!0):b,v.j&&(v.j=v.j.replace(/:$/,""))}function Ya(v,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);v.s=b}else v.s=null}function ra(v,b,T){b instanceof ia?(v.i=b,Gf(v.i,v.h)):(T||(b=Qs(b,t1)),v.i=new ia(b,v.h))}function bt(v,b,T){v.i.set(b,T)}function Ks(v){return bt(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Ur(v,b){return v?b?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Qs(v,b,T){return typeof v=="string"?(v=encodeURI(v).replace(b,zf),T&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function zf(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Du=/[#\/\?@]/g,Pu=/[#\?:]/g,e1=/[#\?]/g,t1=/[#\?@]/g,Ko=/#/g;function ia(v,b){this.h=this.g=null,this.i=v||null,this.j=!!b}function Fr(v){v.g||(v.g=new Map,v.h=0,v.i&&J0(v.i,function(b,T){v.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}n=ia.prototype,n.add=function(v,b){Fr(this),this.i=null,v=Si(this,v);var T=this.g.get(v);return T||this.g.set(v,T=[]),T.push(b),this.h+=1,this};function aa(v,b){Fr(v),b=Si(v,b),v.g.has(b)&&(v.i=null,v.h-=v.g.get(b).length,v.g.delete(b))}function sa(v,b){return Fr(v),b=Si(v,b),v.g.has(b)}n.forEach=function(v,b){Fr(this),this.g.forEach(function(T,k){T.forEach(function(Y){v.call(b,Y,k,this)},this)},this)},n.na=function(){Fr(this);const v=Array.from(this.g.values()),b=Array.from(this.g.keys()),T=[];for(let k=0;k<b.length;k++){const Y=v[k];for(let re=0;re<Y.length;re++)T.push(b[k])}return T},n.V=function(v){Fr(this);let b=[];if(typeof v=="string")sa(this,v)&&(b=b.concat(this.g.get(Si(this,v))));else{v=Array.from(this.g.values());for(let T=0;T<v.length;T++)b=b.concat(v[T])}return b},n.set=function(v,b){return Fr(this),this.i=null,v=Si(this,v),sa(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[b]),this.h+=1,this},n.get=function(v,b){return v?(v=this.V(v),0<v.length?String(v[0]):b):b};function Mu(v,b,T){aa(v,b),0<T.length&&(v.i=null,v.g.set(Si(v,b),A(T)),v.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],b=Array.from(this.g.keys());for(var T=0;T<b.length;T++){var k=b[T];const re=encodeURIComponent(String(k)),xe=this.V(k);for(k=0;k<xe.length;k++){var Y=re;xe[k]!==""&&(Y+="="+encodeURIComponent(String(xe[k]))),v.push(Y)}}return this.i=v.join("&")};function Si(v,b){return b=String(b),v.j&&(b=b.toLowerCase()),b}function Gf(v,b){b&&!v.j&&(Fr(v),v.i=null,v.g.forEach(function(T,k){var Y=k.toLowerCase();k!=Y&&(aa(this,k),Mu(this,Y,T))},v)),v.j=b}function Zs(v,b){const T=new Vr;if(u.Image){const k=new Image;k.onload=_(Hr,T,"TestLoadImage: loaded",!0,b,k),k.onerror=_(Hr,T,"TestLoadImage: error",!1,b,k),k.onabort=_(Hr,T,"TestLoadImage: abort",!1,b,k),k.ontimeout=_(Hr,T,"TestLoadImage: timeout",!1,b,k),u.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=v}else b(!1)}function si(v,b){const T=new Vr,k=new AbortController,Y=setTimeout(()=>{k.abort(),Hr(T,"TestPingServer: timeout",!1,b)},1e4);fetch(v,{signal:k.signal}).then(re=>{clearTimeout(Y),re.ok?Hr(T,"TestPingServer: ok",!0,b):Hr(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Y),Hr(T,"TestPingServer: error",!1,b)})}function Hr(v,b,T,k,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),k(T)}catch{}}function Js(){this.g=new Gs}function Ti(v,b,T){const k=T||"";try{Ou(v,function(Y,re){let xe=Y;d(Y)&&(xe=ii(Y)),b.push(k+re+"="+encodeURIComponent(xe))})}catch(Y){throw b.push(k+"type="+encodeURIComponent("_badmap")),Y}}function Ka(v){this.l=v.Ub||null,this.j=v.eb||!1}E(Ka,Eu),Ka.prototype.g=function(){return new oa(this.l,this.j)},Ka.prototype.i=function(v){return function(){return v}}({});function oa(v,b){ut.call(this),this.D=v,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(oa,ut),n=oa.prototype,n.open=function(v,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=b,this.readyState=1,Ii(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(b.body=v),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ku(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function ku(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var b=v.value?v.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!v.done}))&&(this.response=this.responseText+=b)}v.done?Ci(this):Ii(this),this.readyState==3&&ku(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,Ci(this))},n.Qa=function(v){this.g&&(this.response=v,Ci(this))},n.ga=function(){this.g&&Ci(this)};function Ci(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Ii(v)}n.setRequestHeader=function(v,b){this.u.append(v,b)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,v.push(T[0]+": "+T[1]),T=b.next();return v.join(`\r
`)};function Ii(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Lu(v){let b="";return W(v,function(T,k){b+=k,b+=":",b+=T,b+=`\r
`}),b}function Rn(v,b,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=Lu(T),typeof v=="string"?T!=null&&encodeURIComponent(String(T)):bt(v,b,T))}function gt(v){ut.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(gt,ut);var Qo=/^https?$/i,eo=["POST","PUT"];n=gt.prototype,n.Ha=function(v){this.J=v},n.ea=function(v,b,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);b=b?b.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ei.g(),this.v=this.o?bu(this.o):bu(Ei),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(b,String(v),!0),this.B=!1}catch(re){qf(this,re);return}if(v=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Y in k)T.set(Y,k[Y]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const re of k.keys())T.set(re,k.get(re));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),Y=u.FormData&&v instanceof u.FormData,!(0<=Array.prototype.indexOf.call(eo,b,void 0))||k||Y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,xe]of T)this.g.setRequestHeader(re,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{to(this),this.u=!0,this.g.send(v),this.u=!1}catch(re){qf(this,re)}};function qf(v,b){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=b,v.m=5,Zo(v),Ni(v)}function Zo(v){v.A||(v.A=!0,dt(v,"complete"),dt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,dt(this,"complete"),dt(this,"abort"),Ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ni(this,!0)),gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Jo(this):this.bb())},n.bb=function(){Jo(this)};function Jo(v){if(v.h&&typeof o<"u"&&(!v.v[1]||zr(v)!=4||v.Z()!=2)){if(v.u&&zr(v)==4)mn(v.Ea,0,v);else if(dt(v,"readystatechange"),zr(v)==4){v.h=!1;try{const xe=v.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var k;if(k=xe===0){var Y=String(v.D).match($s)[1]||null;!Y&&u.self&&u.self.location&&(Y=u.self.location.protocol.slice(0,-1)),k=!Qo.test(Y?Y.toLowerCase():"")}T=k}if(T)dt(v,"complete"),dt(v,"success");else{v.m=6;try{var re=2<zr(v)?v.g.statusText:""}catch{re=""}v.l=re+" ["+v.Z()+"]",Zo(v)}}finally{Ni(v)}}}}function Ni(v,b){if(v.g){to(v);const T=v.g,k=v.v[0]?()=>{}:null;v.g=null,v.v=null,b||dt(v,"ready");try{T.onreadystatechange=k}catch{}}}function to(v){v.I&&(u.clearTimeout(v.I),v.I=null)}n.isActive=function(){return!!this.g};function zr(v){return v.g?v.g.readyState:0}n.Z=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var b=this.g.responseText;return v&&b.indexOf(v)==0&&(b=b.substring(v.length)),zo(b)}};function Xf(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function n1(v){const b={};v=(v.g&&2<=zr(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<v.length;k++){if(N(v[k]))continue;var T=H(v[k]);const Y=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=b[Y]||[];b[Y]=re,re.push(T)}D(b,function(k){return k.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(v,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[v]||b}function el(v){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=no("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=no("baseRetryDelayMs",5e3,v),this.cb=no("retryDelaySeedMs",1e4,v),this.Wa=no("forwardChannelMaxRetries",2,v),this.wa=no("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new na(v&&v.concurrentRequestLimit),this.Da=new Js,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=el.prototype,n.la=8,n.G=1,n.connect=function(v,b,T,k){Lt(0),this.W=v,this.H=b||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.I=Jf(this,null,this.W),nl(this)};function ju(v){if(Wf(v),v.G==3){var b=v.U++,T=Or(v.I);if(bt(T,"SID",v.K),bt(T,"RID",b),bt(T,"TYPE","terminate"),ro(v,T),b=new cr(v,v.j,b),b.L=2,b.v=Ks(Or(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=b.v,T=!0),T||(b.g=ed(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Xs(b)}Zf(v)}function tl(v){v.g&&(io(v),v.g.cancel(),v.g=null)}function Wf(v){tl(v),v.u&&(u.clearTimeout(v.u),v.u=null),rl(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&u.clearTimeout(v.s),v.s=null)}function nl(v){if(!Xo(v.h)&&!v.s){v.s=!0;var b=v.Ga;ne||q(),ve||(ne(),ve=!0),Ee.add(b,v),v.B=0}}function r1(v,b){return Wo(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=b.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=on(x(v.Ga,v,b),Uu(v,v.B)),v.B++,!0)}n.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const Y=new cr(this,this.j,v);let re=this.o;if(this.S&&(re?(re=R(re),L(re,this.S)):re=this.S),this.m!==null||this.O||(Y.H=re,re=null),this.P)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(b+=k,4096<b){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=$f(this,Y,b),T=Or(this.I),bt(T,"RID",v),bt(T,"CVER",22),this.D&&bt(T,"X-HTTP-Session-Id",this.D),ro(this,T),re&&(this.O?b="headers="+encodeURIComponent(String(Lu(re)))+"&"+b:this.m&&Rn(T,this.m,re)),$o(this.h,Y),this.Ua&&bt(T,"TYPE","init"),this.P?(bt(T,"$req",b),bt(T,"SID","null"),Y.T=!0,ai(Y,T,null)):ai(Y,T,b),this.G=2}}else this.G==3&&(v?Bu(this,v):this.i.length==0||Xo(this.h)||Bu(this))};function Bu(v,b){var T;b?T=b.l:T=v.U++;const k=Or(v.I);bt(k,"SID",v.K),bt(k,"RID",T),bt(k,"AID",v.T),ro(v,k),v.m&&v.o&&Rn(k,v.m,v.o),T=new cr(v,v.j,T,v.B+1),v.m===null&&(T.H=v.o),b&&(v.i=b.D.concat(v.i)),b=$f(v,T,1e3),T.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),$o(v.h,T),ai(T,k,b)}function ro(v,b){v.H&&W(v.H,function(T,k){bt(b,k,T)}),v.l&&Ou({},function(T,k){bt(b,k,T)})}function $f(v,b,T){T=Math.min(v.i.length,T);var k=v.l?x(v.l.Na,v.l,v):null;e:{var Y=v.i;let re=-1;for(;;){const xe=["count="+T];re==-1?0<T?(re=Y[0].g,xe.push("ofs="+re)):re=0:xe.push("ofs="+re);let tt=!0;for(let vn=0;vn<T;vn++){let nt=Y[vn].g;const On=Y[vn].map;if(nt-=re,0>nt)re=Math.max(0,Y[vn].g-100),tt=!1;else try{Ti(On,xe,"req"+nt+"_")}catch{k&&k(On)}}if(tt){k=xe.join("&");break e}}}return v=v.i.splice(0,T),b.D=v,k}function Yf(v){if(!v.g&&!v.u){v.Y=1;var b=v.Fa;ne||q(),ve||(ne(),ve=!0),Ee.add(b,v),v.v=0}}function Vu(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=on(x(v.Fa,v),Uu(v,v.v)),v.v++,!0)}n.Fa=function(){if(this.u=null,Kf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=on(x(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),tl(this),Kf(this))};function io(v){v.A!=null&&(u.clearTimeout(v.A),v.A=null)}function Kf(v){v.g=new cr(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var b=Or(v.qa);bt(b,"RID","rpc"),bt(b,"SID",v.K),bt(b,"AID",v.T),bt(b,"CI",v.F?"0":"1"),!v.F&&v.ja&&bt(b,"TO",v.ja),bt(b,"TYPE","xmlhttp"),ro(v,b),v.m&&v.o&&Rn(b,v.m,v.o),v.L&&(v.g.I=v.L);var T=v.g;v=v.ia,T.L=1,T.v=Ks(Or(b)),T.m=null,T.P=!0,ta(T,v)}n.Za=function(){this.C!=null&&(this.C=null,tl(this),Vu(this),Lt(19))};function rl(v){v.C!=null&&(u.clearTimeout(v.C),v.C=null)}function Qf(v,b){var T=null;if(v.g==b){rl(v),io(v),v.g=null;var k=2}else if(Nu(v.h,b))T=b.D,fr(v.h,b),k=1;else return;if(v.G!=0){if(b.o)if(k==1){T=b.m?b.m.length:0,b=Date.now()-b.F;var Y=v.B;k=Ga(),dt(k,new gn(k,T)),nl(v)}else Yf(v);else if(Y=b.s,Y==3||Y==0&&0<b.X||!(k==1&&r1(v,b)||k==2&&Vu(v)))switch(T&&0<T.length&&(b=v.h,b.i=b.i.concat(T)),Y){case 1:la(v,5);break;case 4:la(v,10);break;case 3:la(v,6);break;default:la(v,2)}}}function Uu(v,b){let T=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(T*=2),T*b}function la(v,b){if(v.j.info("Error code "+b),b==2){var T=x(v.fb,v),k=v.Xa;const Y=!k;k=new ln(k||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ys(k,"https"),Ks(k),Y?Zs(k.toString(),T):si(k.toString(),T)}else Lt(2);v.G=0,v.l&&v.l.sa(b),Zf(v),Wf(v)}n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Zf(v){if(v.G=0,v.ka=[],v.l){const b=Ru(v.h);(b.length!=0||v.i.length!=0)&&(S(v.ka,b),S(v.ka,v.i),v.h.i.length=0,A(v.i),v.i.length=0),v.l.ra()}}function Jf(v,b,T){var k=T instanceof ln?Or(T):new ln(T);if(k.g!="")b&&(k.g=b+"."+k.g),Ya(k,k.s);else{var Y=u.location;k=Y.protocol,b=b?b+"."+Y.hostname:Y.hostname,Y=+Y.port;var re=new ln(null);k&&Ys(re,k),b&&(re.g=b),Y&&Ya(re,Y),T&&(re.l=T),k=re}return T=v.D,b=v.ya,T&&b&&bt(k,T,b),bt(k,"VER",v.la),ro(v,k),k}function ed(v,b,T){if(b&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=v.Ca&&!v.pa?new gt(new Ka({eb:T})):new gt(v.pa),b.Ha(v.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function td(){}n=td.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function il(){}il.prototype.g=function(v,b){return new dr(v,b)};function dr(v,b){ut.call(this),this.g=new el(b),this.l=v,this.h=b&&b.messageUrlParams||null,v=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(v?v["X-WebChannel-Content-Type"]=b.messageContentType:v={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(v?v["X-WebChannel-Client-Profile"]=b.va:v={"X-WebChannel-Client-Profile":b.va}),this.g.S=v,(v=b&&b.Sb)&&!N(v)&&(this.g.m=v),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.D=b,v=this.h,v!==null&&b in v&&(v=this.h,b in v&&delete v[b])),this.j=new Ri(this)}E(dr,ut),dr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dr.prototype.close=function(){ju(this.g)},dr.prototype.o=function(v){var b=this.g;if(typeof v=="string"){var T={};T.__data__=v,v=T}else this.u&&(T={},T.__data__=ii(v),v=T);b.i.push(new Hf(b.Ya++,v)),b.G==3&&nl(b)},dr.prototype.N=function(){this.g.l=null,delete this.j,ju(this.g),delete this.g,dr.aa.N.call(this)};function nd(v){Ji.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var b=v.__sm__;if(b){e:{for(const T in b){v=T;break e}v=void 0}(this.i=v)&&(v=this.i,b=b!==null&&v in b?b[v]:void 0),this.data=b}else this.data=v}E(nd,Ji);function rd(){Su.call(this),this.status=1}E(rd,Su);function Ri(v){this.g=v}E(Ri,td),Ri.prototype.ua=function(){dt(this.g,"a")},Ri.prototype.ta=function(v){dt(this.g,new nd(v))},Ri.prototype.sa=function(v){dt(this.g,new rd)},Ri.prototype.ra=function(){dt(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,dr.prototype.send=dr.prototype.o,dr.prototype.open=dr.prototype.m,dr.prototype.close=dr.prototype.close,LS=function(){return new il},kS=function(){return Ga()},MS=wi,cg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wa.NO_ERROR=0,Wa.TIMEOUT=8,Wa.HTTP_ERROR=6,Ih=Wa,ea.COMPLETE="complete",PS=ea,Au.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Vc=Au,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,DS=gt}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const bw="@firebase/firestore",Aw="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new qg("@firebase/firestore");function kl(){return ko.logLevel}function we(n,...e){if(ko.logLevel<=Ze.DEBUG){const t=e.map(gv);ko.debug(`Firestore (${mu}): ${n}`,...t)}}function Ba(n,...e){if(ko.logLevel<=Ze.ERROR){const t=e.map(gv);ko.error(`Firestore (${mu}): ${n}`,...t)}}function Kl(n,...e){if(ko.logLevel<=Ze.WARN){const t=e.map(gv);ko.warn(`Firestore (${mu}): ${n}`,...t)}}function gv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jS(n,r,t)}function jS(n,e,t){let r=`FIRESTORE (${mu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ba(r),new Error(r)}function yt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||jS(e,i,r)}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Ua{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ir.UNAUTHENTICATED))}shutdown(){}}class kD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LD{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ns,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ns)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new BS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new ir(e)}}class jD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Sw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=UD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function fg(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return We(r,i);{const a=VS(),o=FD(a.encode(Tw(n,t)),a.encode(Tw(e,t)));return o!==0?o:We(r,i)}}t+=r>65535?2:1}return We(n.length,e.length)}function Tw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function FD(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return We(n[t],e[t]);return We(n.length,e.length)}function Ql(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=-62135596800,Iw=1e6;class In{static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Iw);return new In(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Cw)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iw}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Cw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new In(0,0))}static max(){return new Ve(new In(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="__name__";class Vi{constructor(e,t,r){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&je(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Vi.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return We(e.length,t.length)}static compareSegments(e,t){const r=Vi.isNumericId(e),i=Vi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class Qt extends Vi{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const HD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Vi{construct(e,t,r){return new Kn(e,t,r)}static isValidIdentifier(e){return HD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nw}static keyField(){return new Kn([Nw])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Pe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Pe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Pe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Pe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(t)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Qt.fromString(e))}static fromName(e){return new Me(Qt.fromString(e).popFirst(5))}static empty(){return new Me(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=-1;function zD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new In(t+1,0):new In(t,r));return new Ds(i,Me.empty(),e)}function GD(n){return new Ds(n.readTime,n.key,lf)}class Ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ds(Ve.min(),Me.empty(),lf)}static max(){return new Ds(Ve.max(),Me.empty(),lf)}}function qD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==XD)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,a=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++a,o&&a===i&&t()},c=>r(c))}),o=!0,a===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new fe((r,i)=>{const a=e.length,o=new Array(a);let u=0;for(let c=0;c<a;c++){const d=c;t(e[d]).next(p=>{o[d]=p,++u,u===a&&r(o)},p=>i(p))}})}static doWhile(e,t){return new fe((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function $D(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}k0.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=-1;function L0(n){return n==null}function Wh(n){return n===0&&1/n==-1/0}function YD(n){return typeof n=="number"&&Number.isInteger(n)&&!Wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="";function KD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Rw(e)),e=QD(n.get(t),e);return Rw(e)}function QD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case FS:t+="";break;default:t+=a}}return t}function Rw(n){return n+FS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Yn.RED,this.left=i??Yn.EMPTY,this.right=a??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Yn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Yn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dw(this.data.getIterator())}getIteratorFrom(e){return new Dw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class Dw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new pi([])}unionWith(e){let t=new Nn(Kn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new pi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new zS("Invalid base64 string: "+a):a}}(e);return new Zn(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const ZD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(n){if(yt(!!n,39018),typeof n=="string"){let e=0;const t=ZD.exec(n);if(yt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ms(n){return typeof n=="string"?Zn.fromBase64String(n):Zn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="server_timestamp",qS="__type__",XS="__previous_value__",WS="__local_write_time__";function yv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[qS])===null||t===void 0?void 0:t.stringValue)===GS}function j0(n){const e=n.mapValue.fields[XS];return yv(e)?j0(e):e}function uf(n){const e=Ps(n.mapValue.fields[WS].timestampValue);return new In(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,t,r,i,a,o,u,c,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=p}}const $h="(default)";class cf{constructor(e,t){this.projectId=e,this.database=t||$h}static empty(){return new cf("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof cf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="__type__",e7="__max__",uh={mapValue:{}},YS="__vector__",Yh="value";function ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yv(n)?4:n7(n)?9007199254740991:t7(n)?10:11:je(28295,{value:n})}function Xi(n,e){if(n===e)return!0;const t=ks(n);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uf(n).isEqual(uf(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ps(i.timestampValue),u=Ps(a.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Ms(i.bytesValue).isEqual(Ms(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return an(i.geoPointValue.latitude)===an(a.geoPointValue.latitude)&&an(i.geoPointValue.longitude)===an(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return an(i.integerValue)===an(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=an(i.doubleValue),u=an(a.doubleValue);return o===u?Wh(o)===Wh(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Ql(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},u=a.mapValue.fields||{};if(Ow(o)!==Ow(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Xi(o[c],u[c])))return!1;return!0}(n,e);default:return je(52216,{left:n})}}function ff(n,e){return(n.values||[]).find(t=>Xi(t,e))!==void 0}function Zl(n,e){if(n===e)return 0;const t=ks(n),r=ks(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(a,o){const u=an(a.integerValue||a.doubleValue),c=an(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return Pw(n.timestampValue,e.timestampValue);case 4:return Pw(uf(n),uf(e));case 5:return fg(n.stringValue,e.stringValue);case 6:return function(a,o){const u=Ms(a),c=Ms(o);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const u=a.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const p=We(u[d],c[d]);if(p!==0)return p}return We(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const u=We(an(a.latitude),an(o.latitude));return u!==0?u:We(an(a.longitude),an(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Mw(n.arrayValue,e.arrayValue);case 10:return function(a,o){var u,c,d,p;const g=a.fields||{},x=o.fields||{},_=(u=g[Yh])===null||u===void 0?void 0:u.arrayValue,E=(c=x[Yh])===null||c===void 0?void 0:c.arrayValue,A=We(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0);return A!==0?A:Mw(_,E)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===uh.mapValue&&o===uh.mapValue)return 0;if(a===uh.mapValue)return 1;if(o===uh.mapValue)return-1;const u=a.fields||{},c=Object.keys(u),d=o.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const x=fg(c[g],p[g]);if(x!==0)return x;const _=Zl(u[c[g]],d[p[g]]);if(_!==0)return _}return We(c.length,p.length)}(n.mapValue,e.mapValue);default:throw je(23264,{Pe:t})}}function Pw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=Ps(n),r=Ps(e),i=We(t.seconds,r.seconds);return i!==0?i:We(t.nanos,r.nanos)}function Mw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Zl(t[i],r[i]);if(a)return a}return We(t.length,r.length)}function Jl(n){return dg(n)}function dg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ps(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ms(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=dg(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${dg(t.fields[o])}`;return i+"}"}(n.mapValue):je(61005,{value:n})}function Nh(n){switch(ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=j0(n);return e?16+Nh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Nh(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Bo(r.fields,(a,o)=>{i+=a.length+Nh(o)}),i}(n.mapValue);default:throw je(13486,{value:n})}}function hg(n){return!!n&&"integerValue"in n}function xv(n){return!!n&&"arrayValue"in n}function kw(n){return!!n&&"nullValue"in n}function Lw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rh(n){return!!n&&"mapValue"in n}function t7(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[$S])===null||t===void 0?void 0:t.stringValue)===YS}function Kc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function n7(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===e7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(t)}setAll(e){let t=Kn.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}o?r[u.lastSegment()]=Kc(o):i.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bo(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Zr(Kc(this.value))}}function KS(n){const e=[];return Bo(n.fields,(t,r)=>{const i=new Kn([t]);if(Rh(r)){const a=KS(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t,r,i,a,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}static newInvalidDocument(e){return new ar(e,0,Ve.min(),Ve.min(),Ve.min(),Zr.empty(),0)}static newFoundDocument(e,t,r,i){return new ar(e,1,t,Ve.min(),r,i,0)}static newNoDocument(e,t){return new ar(e,2,t,Ve.min(),Ve.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,Ve.min(),Ve.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.position=e,this.inclusive=t}}function jw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Me.comparator(Me.fromName(o.referenceValue),t.key):r=Zl(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t="asc"){this.field=e,this.dir=t}}function r7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{}class Sn extends QS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new a7(e,t,r):t==="array-contains"?new l7(e,r):t==="in"?new u7(e,r):t==="not-in"?new c7(e,r):t==="array-contains-any"?new f7(e,r):new Sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new s7(e,r):new o7(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zl(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends QS{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Wi(e,t)}matches(e){return ZS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ZS(n){return n.op==="and"}function JS(n){return i7(n)&&ZS(n)}function i7(n){for(const e of n.filters)if(e instanceof Wi)return!1;return!0}function pg(n){if(n instanceof Sn)return n.field.canonicalString()+n.op.toString()+Jl(n.value);if(JS(n))return n.filters.map(e=>pg(e)).join(",");{const e=n.filters.map(t=>pg(t)).join(",");return`${n.op}(${e})`}}function eT(n,e){return n instanceof Sn?function(r,i){return i instanceof Sn&&r.op===i.op&&r.field.isEqual(i.field)&&Xi(r.value,i.value)}(n,e):n instanceof Wi?function(r,i){return i instanceof Wi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,u)=>a&&eT(o,i.filters[u]),!0):!1}(n,e):void je(19439)}function tT(n){return n instanceof Sn?function(t){return`${t.field.canonicalString()} ${t.op} ${Jl(t.value)}`}(n):n instanceof Wi?function(t){return t.op.toString()+" {"+t.getFilters().map(tT).join(" ,")+"}"}(n):"Filter"}class a7 extends Sn{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class s7 extends Sn{constructor(e,t){super(e,"in",t),this.keys=nT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class o7 extends Sn{constructor(e,t){super(e,"not-in",t),this.keys=nT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Me.fromName(r.referenceValue))}class l7 extends Sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xv(t)&&ff(t.arrayValue,this.value)}}class u7 extends Sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ff(this.value.arrayValue,t)}}class c7 extends Sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ff(this.value.arrayValue,t)}}class f7 extends Sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ff(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,t=null,r=[],i=[],a=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.Ie=null}}function Vw(n,e=null,t=[],r=[],i=null,a=null,o=null){return new d7(n,e,t,r,i,a,o)}function _v(n){const e=Fe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),L0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jl(r)).join(",")),e.Ie=t}return e.Ie}function wv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!r7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bw(n.startAt,e.startAt)&&Bw(n.endAt,e.endAt)}function mg(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t=null,r=[],i=[],a=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function h7(n,e,t,r,i,a,o,u){return new B0(n,e,t,r,i,a,o,u)}function Ev(n){return new B0(n)}function Uw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function p7(n){return n.collectionGroup!==null}function Qc(n){const e=Fe(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Nn(Kn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Qh(a,r))}),t.has(Kn.keyField().canonicalString())||e.Ee.push(new Qh(Kn.keyField(),r))}return e.Ee}function zi(n){const e=Fe(n);return e.de||(e.de=m7(e,Qc(n))),e.de}function m7(n,e){if(n.limitType==="F")return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Qh(i.field,a)});const t=n.endAt?new Kh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Kh(n.startAt.position,n.startAt.inclusive):null;return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gg(n,e,t){return new B0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function V0(n,e){return wv(zi(n),zi(e))&&n.limitType===e.limitType}function rT(n){return`${_v(zi(n))}|lt:${n.limitType}`}function Ll(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>tT(i)).join(", ")}]`),L0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Jl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Jl(i)).join(",")),`Target(${r})`}(zi(n))}; limitType=${n.limitType})`}function U0(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Me.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of Qc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,u,c){const d=jw(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,Qc(r),i)||r.endAt&&!function(o,u,c){const d=jw(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,Qc(r),i))}(n,e)}function g7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iT(n){return(e,t)=>{let r=!1;for(const i of Qc(n)){const a=v7(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function v7(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):function(a,o,u){const c=o.data.field(a),d=u.data.field(a);return c!==null&&d!==null?Zl(c,d):je(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return HS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=new Xt(Me.comparator);function Va(){return y7}const aT=new Xt(Me.comparator);function Uc(...n){let e=aT;for(const t of n)e=e.insert(t.key,t);return e}function sT(n){let e=aT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Co(){return Zc()}function oT(){return Zc()}function Zc(){return new Vo(n=>n.toString(),(n,e)=>n.isEqual(e))}const x7=new Xt(Me.comparator),_7=new Nn(Me.comparator);function Je(...n){let e=_7;for(const t of n)e=e.add(t);return e}const w7=new Nn(We);function E7(){return w7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function lT(n){return{integerValue:""+n}}function b7(n,e){return YD(e)?lT(e):bv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this._=void 0}}function A7(n,e,t){return n instanceof df?function(i,a){const o={fields:{[qS]:{stringValue:GS},[WS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&yv(a)&&(a=j0(a)),a&&(o.fields[XS]=a),{mapValue:o}}(t,e):n instanceof hf?cT(n,e):n instanceof pf?fT(n,e):function(i,a){const o=uT(i,a),u=Fw(o)+Fw(i.Re);return hg(o)&&hg(i.Re)?lT(u):bv(i.serializer,u)}(n,e)}function S7(n,e,t){return n instanceof hf?cT(n,e):n instanceof pf?fT(n,e):t}function uT(n,e){return n instanceof Zh?function(r){return hg(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class df extends F0{}class hf extends F0{constructor(e){super(),this.elements=e}}function cT(n,e){const t=dT(e);for(const r of n.elements)t.some(i=>Xi(i,r))||t.push(r);return{arrayValue:{values:t}}}class pf extends F0{constructor(e){super(),this.elements=e}}function fT(n,e){let t=dT(e);for(const r of n.elements)t=t.filter(i=>!Xi(i,r));return{arrayValue:{values:t}}}class Zh extends F0{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Fw(n){return an(n.integerValue||n.doubleValue)}function dT(n){return xv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,t){this.field=e,this.transform=t}}function C7(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof hf&&i instanceof hf||r instanceof pf&&i instanceof pf?Ql(r.elements,i.elements,Xi):r instanceof Zh&&i instanceof Zh?Xi(r.Re,i.Re):r instanceof df&&i instanceof df}(n.transform,e.transform)}class I7{constructor(e,t){this.version=e,this.transformResults=t}}class Da{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Da}static exists(e){return new Da(void 0,e)}static updateTime(e){return new Da(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class H0{}function hT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mT(n.key,Da.none()):new If(n.key,n.data,Da.none());{const t=n.data,r=Zr.empty();let i=new Nn(Kn.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Uo(n.key,r,new pi(i.toArray()),Da.none())}}function N7(n,e,t){n instanceof If?function(i,a,o){const u=i.value.clone(),c=zw(i.fieldTransforms,a,o.transformResults);u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Uo?function(i,a,o){if(!Oh(i.precondition,a))return void a.convertToUnknownDocument(o.version);const u=zw(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(pT(i)),c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Jc(n,e,t,r){return n instanceof If?function(a,o,u,c){if(!Oh(a.precondition,o))return u;const d=a.value.clone(),p=Gw(a.fieldTransforms,c,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Uo?function(a,o,u,c){if(!Oh(a.precondition,o))return u;const d=Gw(a.fieldTransforms,c,o),p=o.data;return p.setAll(pT(a)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(a,o,u){return Oh(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(n,e,t)}function R7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=uT(r.transform,i||null);a!=null&&(t===null&&(t=Zr.empty()),t.set(r.field,a))}return t||null}function Hw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ql(r,i,(a,o)=>C7(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class If extends H0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Uo extends H0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zw(n,e,t){const r=new Map;yt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,u=e.data.field(a.field);r.set(a.field,S7(o,u,t[i]))}return r}function Gw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,A7(a,o,e))}return r}class mT extends H0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O7 extends H0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&N7(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oT();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let u=this.applyToLocalView(o,a.mutatedFields);u=t.has(i.key)?null:u;const c=hT(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Je())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(t,r)=>Hw(t,r))&&Ql(this.baseMutations,e.baseMutations,(t,r)=>Hw(t,r))}}class Av{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return x7}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Av(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,it;function k7(n){switch(n){case pe.OK:return je(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function gT(n){if(n===void 0)return Ba("GRPC error has no .code"),pe.UNKNOWN;switch(n){case fn.OK:return pe.OK;case fn.CANCELLED:return pe.CANCELLED;case fn.UNKNOWN:return pe.UNKNOWN;case fn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case fn.INTERNAL:return pe.INTERNAL;case fn.UNAVAILABLE:return pe.UNAVAILABLE;case fn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case fn.NOT_FOUND:return pe.NOT_FOUND;case fn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case fn.ABORTED:return pe.ABORTED;case fn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case fn.DATA_LOSS:return pe.DATA_LOSS;default:return je(39323,{code:n})}}(it=fn||(fn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new Is([4294967295,4294967295],0);function qw(n){const e=VS().encode(n),t=new OS;return t.update(e),new Uint8Array(t.digest())}function Xw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Is([t,r],0),new Is([i,a],0)]}class Sv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fc(`Invalid padding: ${t}`);if(r<0)throw new Fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Is.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Is.fromNumber(r)));return i.compare(L7)===1&&(i=new Is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=qw(e),[r,i]=Xw(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.Se(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Sv(a,i,t);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.pe===0)return;const t=qw(e),[r,i]=Xw(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.be(o)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Nf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new z0(Ve.min(),i,new Xt(We),Va(),Je())}}class Nf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nf(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class vT{constructor(e,t){this.targetId=e,this.Ce=t}}class yT{constructor(e,t,r=Zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ww{constructor(){this.Fe=0,this.Me=$w(),this.xe=Zn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Je(),t=Je(),r=Je();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:je(38017,{changeType:a})}}),new Nf(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=$w()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,yt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class j7{constructor(e){this.ze=e,this.je=new Map,this.He=Va(),this.Je=ch(),this.Ye=ch(),this.Ze=new Xt(We)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(mg(a))if(r===0){const o=new Me(a.path);this.tt(t,o,ar.newNoDocument(o,Ve.min()))}else yt(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const u=this.ct(e),c=u?this.lt(u,e,o):1;if(c!==0){this.st(t);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,u;try{o=Ms(r).toUint8Array()}catch(c){if(c instanceof zS)return Kl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Sv(o,i,a)}catch(c){return Kl(c instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.pe===0?null:u}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const u=this._t(o);if(u){if(a.current&&mg(u.target)){const c=new Me(u.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,ar.newNoDocument(c,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=Je();this.Ye.forEach((a,o)=>{let u=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new z0(e,t,this.Ze,this.He,r);return this.He=Va(),this.Je=ch(),this.Ye=ch(),this.Ze=new Xt(We),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ww,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Nn(We),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Nn(We),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ww),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ch(){return new Xt(Me.comparator)}function $w(){return new Xt(Me.comparator)}const B7={asc:"ASCENDING",desc:"DESCENDING"},V7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U7={and:"AND",or:"OR"};class F7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vg(n,e){return n.useProto3Json||L0(e)?e:{value:e}}function Jh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function H7(n,e){return Jh(n,e.toTimestamp())}function Gi(n){return yt(!!n,49232),Ve.fromTimestamp(function(t){const r=Ps(t);return new In(r.seconds,r.nanos)}(n))}function Tv(n,e){return yg(n,e).canonicalString()}function yg(n,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function _T(n){const e=Qt.fromString(n);return yt(ST(e),10190,{key:e.toString()}),e}function xg(n,e){return Tv(n.databaseId,e.path)}function vm(n,e){const t=_T(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(ET(t))}function wT(n,e){return Tv(n.databaseId,e)}function z7(n){const e=_T(n);return e.length===4?Qt.emptyPath():ET(e)}function _g(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ET(n){return yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Yw(n,e,t){return{name:xg(n,e),fields:t.value.mapValue.fields}}function G7(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:je(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,p){return d.useProto3Json?(yt(p===void 0||typeof p=="string",58123),Zn.fromBase64String(p||"")):(yt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Zn.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const p=d.code===void 0?pe.UNKNOWN:gT(d.code);return new Pe(p,d.message||"")}(o);t=new yT(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=vm(n,r.document.name),a=Gi(r.document.updateTime),o=r.document.createTime?Gi(r.document.createTime):Ve.min(),u=new Zr({mapValue:{fields:r.document.fields}}),c=ar.newFoundDocument(i,a,o,u),d=r.targetIds||[],p=r.removedTargetIds||[];t=new Dh(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=vm(n,r.document),a=r.readTime?Gi(r.readTime):Ve.min(),o=ar.newNoDocument(i,a),u=r.removedTargetIds||[];t=new Dh([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=vm(n,r.document),a=r.removedTargetIds||[];t=new Dh([],a,i,null)}else{if(!("filter"in e))return je(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new M7(i,a),u=r.targetId;t=new vT(u,o)}}return t}function q7(n,e){let t;if(e instanceof If)t={update:Yw(n,e.key,e.value)};else if(e instanceof mT)t={delete:xg(n,e.key)};else if(e instanceof Uo)t={update:Yw(n,e.key,e.data),updateMask:eP(e.fieldMask)};else{if(!(e instanceof O7))return je(16599,{ft:e.type});t={verify:xg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const u=o.transform;if(u instanceof df)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof pf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zh)return{fieldPath:o.field.canonicalString(),increment:u.Re};throw je(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:H7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:je(27497)}(n,e.precondition)),t}function X7(n,e){return n&&n.length>0?(yt(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?Gi(i.updateTime):Gi(a);return o.isEqual(Ve.min())&&(o=Gi(a)),new I7(o,i.transformResults||[])}(t,e))):[]}function W7(n,e){return{documents:[wT(n,e.path)]}}function $7(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wT(n,i);const a=function(d){if(d.length!==0)return AT(Wi.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(p=>function(x){return{field:jl(x.field),direction:Q7(x.dir)}}(p))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=vg(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function Y7(n){let e=z7(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yt(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=function(g){const x=bT(g);return x instanceof Wi&&JS(x)?x.getFilters():[x]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(x=>function(E){return new Qh(Bl(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(x))}(t.orderBy));let u=null;t.limit&&(u=function(g){let x;return x=typeof g=="object"?g.value:g,L0(x)?null:x}(t.limit));let c=null;t.startAt&&(c=function(g){const x=!!g.before,_=g.values||[];return new Kh(_,x)}(t.startAt));let d=null;return t.endAt&&(d=function(g){const x=!g.before,_=g.values||[];return new Kh(_,x)}(t.endAt)),h7(e,i,o,a,u,"F",c,d)}function K7(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bl(t.unaryFilter.field);return Sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bl(t.unaryFilter.field);return Sn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bl(t.unaryFilter.field);return Sn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bl(t.unaryFilter.field);return Sn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(n):n.fieldFilter!==void 0?function(t){return Sn.create(Bl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wi.create(t.compositeFilter.filters.map(r=>bT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(t.compositeFilter.op))}(n):je(30097,{filter:n})}function Q7(n){return B7[n]}function Z7(n){return V7[n]}function J7(n){return U7[n]}function jl(n){return{fieldPath:n.canonicalString()}}function Bl(n){return Kn.fromServerFormat(n.fieldPath)}function AT(n){return n instanceof Sn?function(t){if(t.op==="=="){if(Lw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NAN"}};if(kw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Lw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NAN"}};if(kw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(t.field),op:Z7(t.op),value:t.value}}}(n):n instanceof Wi?function(t){const r=t.getFilters().map(i=>AT(i));return r.length===1?r[0]:{compositeFilter:{op:J7(t.op),filters:r}}}(n):je(54877,{filter:n})}function eP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ST(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,r,i,a=Ve.min(),o=Ve.min(),u=Zn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.wt=e}}function nP(n){const e=Y7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.Cn=new iP}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Ds.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class iP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nn(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TT=41943040;class Sr{static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(TT,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new eu(0)}static lr(){return new eu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="LruGarbageCollector",aP=1048576;function Zw([n,e],[t,r]){const i=We(n,t);return i===0?We(e,r):i}class sP{constructor(e){this.Er=e,this.buffer=new Nn(Zw),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Zw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(Qw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vu(t)?we(Qw,"Ignoring IndexedDB error during garbage collection: ",t):await gu(t)}await this.mr(3e5)})}}class lP{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(k0.le);const r=new sP(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Kw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kw):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,u,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),kl()<=Ze.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${a} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-p}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g})))}}function uP(n,e){return new lP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.changes=new Vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Jc(r.mutation,i,pi.empty(),In.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Je()){const i=Co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=Uc();return a.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Je()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,u)=>{t.set(o,u)})})}computeViews(e,t,r,i){let a=Va();const o=Zc(),u=function(){return Zc()}();return t.forEach((c,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Uo)?a=a.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),Jc(p.mutation,d,p.mutation.getFieldMask(),In.now())):o.set(d.key,pi.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,p)=>o.set(d,p)),t.forEach((d,p)=>{var g;return u.set(d,new fP(p,(g=o.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Zc();let i=new Xt((o,u)=>o-u),a=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=t.get(c);if(d===null)return;let p=r.get(c)||pi.empty();p=u.applyToLocalView(d,p),r.set(c,p);const g=(i.get(u.batchId)||Je()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,p=c.value,g=oT();p.forEach(x=>{if(!a.has(x)){const _=hT(t.get(x),r.get(x));_!==null&&g.set(x,_),a=a.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return fe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p7(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):fe.resolve(Co());let u=lf,c=a;return o.next(d=>fe.forEach(d,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),a.get(p)?fe.resolve():this.remoteDocumentCache.getEntry(e,p).next(x=>{c=c.insert(p,x)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,Je())).next(p=>({batchId:u,changes:sT(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(r=>{let i=Uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=Uc();return this.indexManager.getCollectionParents(e,a).next(u=>fe.forEach(u,c=>{const d=function(g,x){return new B0(x,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,x)=>{o=o.insert(g,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((c,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,ar.newInvalidDocument(p)))});let u=Uc();return o.forEach((c,d)=>{const p=a.get(c);p!==void 0&&Jc(p.mutation,d,pi.empty(),In.now()),U0(t,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return fe.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Gi(i.createTime)}}(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:nP(i.bundledQuery),readTime:Gi(i.readTime)}}(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.overlays=new Xt(Me.comparator),this.Qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Co();return fe.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.bt(e,t,a)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=Co(),a=t.length+1,o=new Me(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Xt((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=a.get(d.largestBatchId);p===null&&(p=Co(),a=a.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=Co(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=i)););return fe.resolve(u)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new P7(t,r));let a=this.Qr.get(t);a===void 0&&(a=Je(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.$r=new Nn(jn.Ur),this.Kr=new Nn(jn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new jn(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new jn(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Me(new Qt([])),r=new jn(t,e),i=new jn(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Me(new Qt([])),r=new jn(t,e),i=new jn(t,e+1);let a=Je();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new jn(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Me.comparator(e.key,t.key)||We(e.Zr,t.Zr)}static Wr(e,t){return We(e.Zr,t.Zr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Nn(jn.Ur)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new D7(a,t,r,i);this.mutationQueue.push(o);for(const u of i)this.Xr=this.Xr.add(new jn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return fe.resolve(o)}lookupMutationBatch(e,t){return fe.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?vv:this.nr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jn(t,0),i=new jn(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const u=this.ei(o.Zr);a.push(u)}),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(We);return t.forEach(i=>{const a=new jn(i,0),o=new jn(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],u=>{r=r.add(u.Zr)})}),fe.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Me.isDocumentKey(a)||(a=a.child(""));const o=new jn(new Me(a),0);let u=new Nn(We);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(c.Zr)),!0)},o),fe.resolve(this.ni(u))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){yt(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return fe.forEach(t.mutations,i=>{const a=new jn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new jn(t,0),i=this.Xr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.ii=e,this.docs=function(){return new Xt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let r=Va();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ar.newInvalidDocument(i))}),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Va();const o=t.path,u=new Me(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||qD(GD(p),r)<=0||(i.has(p.key)||U0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){je(9500)}si(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yP(this)}getSize(e){return fe.resolve(this.size)}}class yP extends cP{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.persistence=e,this.oi=new Vo(t=>_v(t),wv),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this._i=0,this.ai=new Cv,this.targetCount=0,this.ui=eu.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),fe.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new eu(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tr(t),fe.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),fe.waitFor(a).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),fe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){this.ci={},this.overlays={},this.li=new k0(0),this.hi=!1,this.hi=!0,this.Pi=new mP,this.referenceDelegate=e(this),this.Ti=new xP(this),this.indexManager=new rP,this.remoteDocumentCache=function(i){return new vP(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new tP(t),this.Ei=new hP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new gP(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){we("MemoryPersistence","Starting transaction:",e);const i=new _P(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return fe.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class _P extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class Iv{constructor(e){this.persistence=e,this.Vi=new Cv,this.mi=null}static fi(e){return new Iv(e)}get gi(){if(this.mi)return this.mi;throw je(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.gi,r=>{const i=Me.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Ve.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return fe.or([()=>fe.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class e0{constructor(e,t){this.persistence=e,this.yi=new Vo(r=>KD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uP(this,t)}static fi(e,t){return new e0(e,t)}di(){}Ai(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return fe.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?fe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(u=>{u||(r++,a.removeEntry(o,Ve.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),fe.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nh(e.data.value)),t}Dr(e,t,r){return fe.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=Je(),i=Je();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Nv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return fN()?8:$D(or())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Ss(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new wP;return this.bs(e,t,o).next(u=>{if(a.result=u,this.fs)return this.Ds(e,t,o,u.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(kl()<=Ze.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Ll(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),fe.resolve()):(kl()<=Ze.DEBUG&&we("QueryEngine","Query:",Ll(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(kl()<=Ze.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Ll(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):fe.resolve())}ws(e,t){if(Uw(t))return fe.resolve(null);let r=zi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gg(t,null,"F"),r=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Je(...a);return this.ys.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.vs(t,u);return this.Cs(t,d,o,c.readTime)?this.ws(e,gg(t,null,"F")):this.Fs(e,d,t,c)}))})))}Ss(e,t,r,i){return Uw(t)||i.isEqual(Ve.min())?fe.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?fe.resolve(null):(kl()<=Ze.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ll(t)),this.Fs(e,o,t,zD(i,lf)).next(u=>u))})}vs(e,t){let r=new Nn(iT(e));return t.forEach((i,a)=>{U0(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}bs(e,t,r){return kl()<=Ze.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Ll(t)),this.ys.getDocumentsMatchingQuery(e,t,Ds.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="LocalStore",bP=3e8;class AP{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Xt(We),this.Os=new Vo(a=>_v(a),wv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function SP(n,e,t,r){return new AP(n,e,t,r)}async function IT(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],u=[];let c=Je();for(const d of i){o.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of a){u.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(r,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:u}))})})}function TP(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,p){const g=d.batch,x=g.keys();let _=fe.resolve();return x.forEach(E=>{_=_.next(()=>p.getEntry(c,E)).next(A=>{const S=d.docVersions.get(E);yt(S!==null,48541),A.version.compareTo(S)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),p.addEntry(A)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=Je();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function NT(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function CP(n,e){const t=Fe(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const u=[];e.targetChanges.forEach((p,g)=>{const x=i.get(g);if(!x)return;u.push(t.Ti.removeMatchingKeys(a,p.removedDocuments,g).next(()=>t.Ti.addMatchingKeys(a,p.addedDocuments,g)));let _=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(Zn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),i=i.insert(g,_),function(A,S,I){return A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=bP?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(x,_,p)&&u.push(t.Ti.updateTargetData(a,_))});let c=Va(),d=Je();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(IP(a,o,e.documentUpdates).next(p=>{c=p.qs,d=p.Qs})),!r.isEqual(Ve.min())){const p=t.Ti.getLastRemoteSnapshotVersion(a).next(g=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(p)}return fe.waitFor(u).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(t.xs=i,a))}function IP(n,e,t){let r=Je(),i=Je();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Va();return t.forEach((u,c)=>{const d=a.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):we(Rv,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:i}})}function NP(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RP(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,fe.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Es(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function wg(n,e,t){const r=Fe(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!vu(o))throw o;we(Rv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function Jw(n,e,t){const r=Fe(n);let i=Ve.min(),a=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,p){const g=Fe(c),x=g.Os.get(p);return x!==void 0?fe.resolve(g.xs.get(x)):g.Ti.getTargetData(d,p)}(r,o,zi(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,u.targetId).next(c=>{a=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Ve.min(),t?a:Je())).next(u=>(OP(r,g7(e),u),{documents:u,$s:a})))}function OP(n,e,t){let r=n.Ns.get(e)||Ve.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class eE{constructor(){this.activeTargetIds=E7()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DP{constructor(){this.xo=new eE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new eE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="ConnectivityMonitor";class nE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(tE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(tE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function Eg(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",MP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===$h?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=Eg(),u=this.jo(e,t.toUriEncodedString());we(ym,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,a);const{host:d}=new URL(u),p=_f(d);return this.Jo(e,u,c,r,p).then(g=>(we(ym,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Kl(ym,`RPC '${e}' ${o} failed with error: `,g,"url: ",u,"request:",r),g})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=MP[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="WebChannelConnection";class jP extends kP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=Eg();return new Promise((u,c)=>{const d=new DS;d.setWithCredentials(!0),d.listenOnce(PS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ih.NO_ERROR:const g=d.getResponseJson();we(nr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),u(g);break;case Ih.TIMEOUT:we(nr,`RPC '${e}' ${o} timed out`),c(new Pe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const x=d.getStatus();if(we(nr,`RPC '${e}' ${o} failed with status:`,x,"response text:",d.getResponseText()),x>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const A=function(I){const N=I.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(N)>=0?N:pe.UNKNOWN}(E.status);c(new Pe(A,E.message))}else c(new Pe(pe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Pe(pe.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{we(nr,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);we(nr,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",p,r,15)})}T_(e,t,r){const i=Eg(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LS(),u=kS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=a.join("");we(nr,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=o.createWebChannel(p,c);let x=!1,_=!1;const E=new LP({Zo:S=>{_?we(nr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(x||(we(nr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),x=!0),we(nr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},Xo:()=>g.close()}),A=(S,I,N)=>{S.listen(I,P=>{try{N(P)}catch(V){setTimeout(()=>{throw V},0)}})};return A(g,Vc.EventType.OPEN,()=>{_||(we(nr,`RPC '${e}' stream ${i} transport opened.`),E.__())}),A(g,Vc.EventType.CLOSE,()=>{_||(_=!0,we(nr,`RPC '${e}' stream ${i} transport closed`),E.u_())}),A(g,Vc.EventType.ERROR,S=>{_||(_=!0,Kl(nr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.u_(new Pe(pe.UNAVAILABLE,"The operation could not be completed")))}),A(g,Vc.EventType.MESSAGE,S=>{var I;if(!_){const N=S.data[0];yt(!!N,16349);const P=N,V=(P==null?void 0:P.error)||((I=P[0])===null||I===void 0?void 0:I.error);if(V){we(nr,`RPC '${e}' stream ${i} received error:`,V);const F=V.status;let W=function(M){const L=fn[M];if(L!==void 0)return gT(L)}(F),D=V.message;W===void 0&&(W=pe.INTERNAL,D="Unknown error status: "+F+" with message "+V.message),_=!0,E.u_(new Pe(W,D)),g.close()}else we(nr,`RPC '${e}' stream ${i} received:`,N),E.c_(N)}}),A(u,MS.STAT_EVENT,S=>{S.stat===cg.PROXY?we(nr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===cg.NOPROXY&&we(nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.a_()},0),E}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n){return new F7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=i,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,t-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="PersistentStream";class OT{constructor(e,t,r,i,a,o,u,c){this.xi=e,this.y_=r,this.w_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new RT(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Ba(t.toString()),Ba("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===t&&this.K_(r,i)},r=>{e(()=>{const i=new Pe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return we(rE,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(we(rE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BP extends OT{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=G7(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ve.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?Gi(o.readTime):Ve.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=_g(this.serializer),t.addTarget=function(a,o){let u;const c=o.target;if(u=mg(c)?{documents:W7(a,c)}:{query:$7(a,c).gt},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=xT(a,o.resumeToken);const d=vg(a,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ve.min())>0){u.readTime=Jh(a,o.snapshotVersion.toTimestamp());const d=vg(a,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=K7(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=_g(this.serializer),t.removeTarget=e,this.L_(t)}}class VP extends OT{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=X7(e.writeResults,e.commitTime),r=Gi(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=_g(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>q7(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{}class FP extends UP{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,yg(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Pe(pe.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Yo(e,yg(t,r),i,o,u,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(pe.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class HP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ba(t),this.oa=!1):we("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="RemoteStore";class zP{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(o=>{r.enqueueAndForget(async()=>{Fo(this)&&(we(Lo,"Restarting streams for network reachability change."),await async function(c){const d=Fe(c);d.Ta.add(4),await Rf(d),d.da.set("Unknown"),d.Ta.delete(4),await q0(d)}(this))})}),this.da=new HP(r,i)}}async function q0(n){if(Fo(n))for(const e of n.Ia)await e(!0)}async function Rf(n){for(const e of n.Ia)await e(!1)}function DT(n,e){const t=Fe(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),Mv(t)?Pv(t):yu(t).M_()&&Dv(t,e))}function Ov(n,e){const t=Fe(n),r=yu(t);t.Pa.delete(e),r.M_()&&PT(t,e),t.Pa.size===0&&(r.M_()?r.N_():Fo(t)&&t.da.set("Unknown"))}function Dv(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yu(n).H_(e)}function PT(n,e){n.Aa.Ke(e),yu(n).J_(e)}function Pv(n){n.Aa=new j7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),yu(n).start(),n.da._a()}function Mv(n){return Fo(n)&&!yu(n).F_()&&n.Pa.size>0}function Fo(n){return Fe(n).Ta.size===0}function MT(n){n.Aa=void 0}async function GP(n){n.da.set("Online")}async function qP(n){n.Pa.forEach((e,t)=>{Dv(n,e)})}async function XP(n,e){MT(n),Mv(n)?(n.da.ca(e),Pv(n)):n.da.set("Unknown")}async function WP(n,e,t){if(n.da.set("Online"),e instanceof yT&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const u of a.targetIds)i.Pa.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.Pa.delete(u),i.Aa.removeTarget(u))}(n,e)}catch(r){we(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await t0(n,r)}else if(e instanceof Dh?n.Aa.Xe(e):e instanceof vT?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Ve.min()))try{const r=await NT(n.localStore);t.compareTo(r)>=0&&await function(a,o){const u=a.Aa.It(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=a.Pa.get(d);p&&a.Pa.set(d,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const p=a.Pa.get(c);if(!p)return;a.Pa.set(c,p.withResumeToken(Zn.EMPTY_BYTE_STRING,p.snapshotVersion)),PT(a,c);const g=new Es(p.target,c,d,p.sequenceNumber);Dv(a,g)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){we(Lo,"Failed to raise snapshot:",r),await t0(n,r)}}async function t0(n,e,t){if(!vu(e))throw e;n.Ta.add(1),await Rf(n),n.da.set("Offline"),t||(t=()=>NT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{we(Lo,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await q0(n)})}function kT(n,e){return e().catch(t=>t0(n,t,e))}async function X0(n){const e=Fe(n),t=Ls(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:vv;for(;$P(e);)try{const i=await NP(e.localStore,r);if(i===null){e.ha.length===0&&t.N_();break}r=i.batchId,YP(e,i)}catch(i){await t0(e,i)}LT(e)&&jT(e)}function $P(n){return Fo(n)&&n.ha.length<10}function YP(n,e){n.ha.push(e);const t=Ls(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function LT(n){return Fo(n)&&!Ls(n).F_()&&n.ha.length>0}function jT(n){Ls(n).start()}async function KP(n){Ls(n).ta()}async function QP(n){const e=Ls(n);for(const t of n.ha)e.Z_(t.mutations)}async function ZP(n,e,t){const r=n.ha.shift(),i=Av.from(r,e,t);await kT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await X0(n)}async function JP(n,e){e&&Ls(n).Y_&&await async function(r,i){if(function(o){return k7(o)&&o!==pe.ABORTED}(i.code)){const a=r.ha.shift();Ls(r).O_(),await kT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await X0(r)}}(n,e),LT(n)&&jT(n)}async function iE(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),we(Lo,"RemoteStore received new credentials");const r=Fo(t);t.Ta.add(3),await Rf(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await q0(t)}async function e9(n,e){const t=Fe(n);e?(t.Ta.delete(2),await q0(t)):e||(t.Ta.add(2),await Rf(t),t.da.set("Unknown"))}function yu(n){return n.Ra||(n.Ra=function(t,r,i){const a=Fe(t);return a.ra(),new BP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:GP.bind(null,n),n_:qP.bind(null,n),i_:XP.bind(null,n),j_:WP.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),Mv(n)?Pv(n):n.da.set("Unknown")):(await n.Ra.stop(),MT(n))})),n.Ra}function Ls(n){return n.Va||(n.Va=function(t,r,i){const a=Fe(t);return a.ra(),new VP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:KP.bind(null,n),i_:JP.bind(null,n),X_:QP.bind(null,n),ea:ZP.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await X0(n)):(await n.Va.stop(),n.ha.length>0&&(we(Lo,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,u=new kv(e,t,o,i,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lv(n,e){if(Ba("AsyncQueue",`${e}: ${n}`),vu(n))return new Pe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{static emptySet(e){return new Xl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=Uc(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Xl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ma=new Xt(Me.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):je(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class tu{constructor(e,t,r,i,a,o,u,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new tu(e,t,Xl.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&V0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class n9{constructor(){this.queries=sE(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const i=Fe(t),a=i.queries;i.queries=sE(),a.forEach((o,u)=>{for(const c of u.ya)c.onError(r)})})(this,new Pe(pe.ABORTED,"Firestore shutting down"))}}function sE(){return new Vo(n=>rT(n),V0)}async function r9(n,e){const t=Fe(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.wa()&&e.Sa()&&(r=2):(a=new t9,r=e.Sa()?0:1);try{switch(r){case 0:a.pa=await t.onListen(i,!0);break;case 1:a.pa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const u=Lv(o,`Initialization of query '${Ll(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&jv(t)}async function i9(n,e){const t=Fe(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.ya.indexOf(e);o>=0&&(a.ya.splice(o,1),a.ya.length===0?i=e.Sa()?0:1:!a.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function a9(n,e){const t=Fe(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const u of o.ya)u.va(i)&&(r=!0);o.pa=i}}r&&jv(t)}function s9(n,e,t){const r=Fe(n),i=r.queries.get(e);if(i)for(const a of i.ya)a.onError(t);r.queries.delete(e)}function jv(n){n.ba.forEach(e=>{e.next()})}var bg,oE;(oE=bg||(bg={})).Ca="default",oE.Cache="cache";class o9{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new tu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class l9{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Je(),this.mutatedKeys=Je(),this.Ha=iT(e),this.Ja=new Xl(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new aE,i=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const x=i.get(p),_=U0(this.query,g)?g:null,E=!!x&&this.mutatedKeys.has(x.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;x&&_?x.data.isEqual(_.data)?E!==A&&(r.track({type:3,doc:_}),S=!0):this.eu(x,_)||(r.track({type:2,doc:_}),S=!0,(c&&this.Ha(_,c)>0||d&&this.Ha(_,d)<0)&&(u=!0)):!x&&_?(r.track({type:0,doc:_}),S=!0):x&&!_&&(r.track({type:1,doc:x}),S=!0,(c||d)&&(u=!0)),S&&(_?(o=o.add(_),a=A?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Ja:o,Xa:r,Cs:u,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((p,g)=>function(_,E){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Vt:S})}};return A(_)-A(E)}(p.type,g.type)||this.Ha(p.doc,g.doc)),this.tu(r),i=i!=null&&i;const u=t&&!i?this.nu():[],c=this.ja.size===0&&this.current&&!i?1:0,d=c!==this.za;return this.za=c,o.length!==0||d?{snapshot:new tu(this.query,e.Ja,a,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:u}:{ru:u}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new aE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Je(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new VT(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new BT(r))}),t}su(e){this.Ga=e.$s,this.ja=Je();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return tu.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Bv="SyncEngine";class u9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class c9{constructor(e){this.key=e,this._u=!1}}class f9{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Vo(u=>rT(u),V0),this.cu=new Map,this.lu=new Set,this.hu=new Xt(Me.comparator),this.Pu=new Map,this.Tu=new Cv,this.Iu={},this.Eu=new Map,this.du=eu.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function d9(n,e,t=!0){const r=qT(n);let i;const a=r.uu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.ou()):i=await UT(r,e,t,!0),i}async function h9(n,e){const t=qT(n);await UT(t,e,!0,!1)}async function UT(n,e,t,r){const i=await RP(n.localStore,zi(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let u;return r&&(u=await p9(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&DT(n.remoteStore,i),u}async function p9(n,e,t,r,i){n.Ru=(g,x,_)=>async function(A,S,I,N){let P=S.view.Za(I);P.Cs&&(P=await Jw(A.localStore,S.query,!1).then(({documents:D})=>S.view.Za(D,P)));const V=N&&N.targetChanges.get(S.targetId),F=N&&N.targetMismatches.get(S.targetId)!=null,W=S.view.applyChanges(P,A.isPrimaryClient,V,F);return uE(A,S.targetId,W.ru),W.snapshot}(n,g,x,_);const a=await Jw(n.localStore,e,!0),o=new l9(e,a.$s),u=o.Za(a.documents),c=Nf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(u,n.isPrimaryClient,c);uE(n,t,d.ru);const p=new u9(e,t,o);return n.uu.set(e,p),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),d.snapshot}async function m9(n,e,t){const r=Fe(n),i=r.uu.get(e),a=r.cu.get(i.targetId);if(a.length>1)return r.cu.set(i.targetId,a.filter(o=>!V0(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await wg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ov(r.remoteStore,i.targetId),Ag(r,i.targetId)}).catch(gu)):(Ag(r,i.targetId),await wg(r.localStore,i.targetId,!0))}async function g9(n,e){const t=Fe(n),r=t.uu.get(e),i=t.cu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ov(t.remoteStore,r.targetId))}async function v9(n,e,t){const r=A9(n);try{const i=await function(o,u){const c=Fe(o),d=In.now(),p=u.reduce((_,E)=>_.add(E.key),Je());let g,x;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Va(),A=Je();return c.Bs.getEntries(_,p).next(S=>{E=S,E.forEach((I,N)=>{N.isValidDocument()||(A=A.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,E)).next(S=>{g=S;const I=[];for(const N of u){const P=R7(N,g.get(N.key).overlayedDocument);P!=null&&I.push(new Uo(N.key,P,KS(P.value.mapValue),Da.exists(!0)))}return c.mutationQueue.addMutationBatch(_,d,I,u)}).next(S=>{x=S;const I=S.applyToLocalDocumentSet(g,A);return c.documentOverlayCache.saveOverlays(_,S.batchId,I)})}).then(()=>({batchId:x.batchId,changes:sT(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,c){let d=o.Iu[o.currentUser.toKey()];d||(d=new Xt(We)),d=d.insert(u,c),o.Iu[o.currentUser.toKey()]=d}(r,i.batchId,t),await Of(r,i.changes),await X0(r.remoteStore)}catch(i){const a=Lv(i,"Failed to persist write");t.reject(a)}}async function FT(n,e){const t=Fe(n);try{const r=await CP(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Pu.get(a);o&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o._u=!0:i.modifiedDocuments.size>0?yt(o._u,14607):i.removedDocuments.size>0&&(yt(o._u,42227),o._u=!1))}),await Of(t,r,e)}catch(r){await gu(r)}}function lE(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.uu.forEach((a,o)=>{const u=o.view.Da(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){const c=Fe(o);c.onlineState=u;let d=!1;c.queries.forEach((p,g)=>{for(const x of g.ya)x.Da(u)&&(d=!0)}),d&&jv(c)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function y9(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Pu.get(e),a=i&&i.key;if(a){let o=new Xt(Me.comparator);o=o.insert(a,ar.newNoDocument(a,Ve.min()));const u=Je().add(a),c=new z0(Ve.min(),new Map,new Xt(We),o,u);await FT(r,c),r.hu=r.hu.remove(a),r.Pu.delete(e),Vv(r)}else await wg(r.localStore,e,!1).then(()=>Ag(r,e,t)).catch(gu)}async function x9(n,e){const t=Fe(n),r=e.batch.batchId;try{const i=await TP(t.localStore,e);zT(t,r,null),HT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Of(t,i)}catch(i){await gu(i)}}async function _9(n,e,t){const r=Fe(n);try{const i=await function(o,u){const c=Fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(yt(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(r.localStore,e);zT(r,e,t),HT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Of(r,i)}catch(i){await gu(i)}}function HT(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function zT(n,e,t){const r=Fe(n);let i=r.Iu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function Ag(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||GT(n,r)})}function GT(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(Ov(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),Vv(n))}function uE(n,e,t){for(const r of t)r instanceof BT?(n.Tu.addReference(r.key,e),w9(n,r)):r instanceof VT?(we(Bv,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||GT(n,r.key)):je(19791,{mu:r})}function w9(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(we(Bv,"New document in limbo: "+t),n.lu.add(r),Vv(n))}function Vv(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new Me(Qt.fromString(e)),r=n.du.next();n.Pu.set(r,new c9(t)),n.hu=n.hu.insert(t,r),DT(n.remoteStore,new Es(zi(Ev(t.path)),r,"TargetPurposeLimboResolution",k0.le))}}async function Of(n,e,t){const r=Fe(n),i=[],a=[],o=[];r.uu.isEmpty()||(r.uu.forEach((u,c)=>{o.push(r.Ru(c,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);const g=Nv.Rs(c.targetId,d);a.push(g)}}))}),await Promise.all(o),r.au.j_(i),await async function(c,d){const p=Fe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>fe.forEach(d,x=>fe.forEach(x.ds,_=>p.persistence.referenceDelegate.addReference(g,x.targetId,_)).next(()=>fe.forEach(x.As,_=>p.persistence.referenceDelegate.removeReference(g,x.targetId,_)))))}catch(g){if(!vu(g))throw g;we(Rv,"Failed to update sequence numbers: "+g)}for(const g of d){const x=g.targetId;if(!g.fromCache){const _=p.xs.get(x),E=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(E);p.xs=p.xs.insert(x,A)}}}(r.localStore,a))}async function E9(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){we(Bv,"User change. New user:",e.toKey());const r=await IT(t.localStore,e);t.currentUser=e,function(a,o){a.Eu.forEach(u=>{u.forEach(c=>{c.reject(new Pe(pe.CANCELLED,o))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Of(t,r.ks)}}function b9(n,e){const t=Fe(n),r=t.Pu.get(e);if(r&&r._u)return Je().add(r.key);{let i=Je();const a=t.cu.get(e);if(!a)return i;for(const o of a){const u=t.uu.get(o);i=i.unionWith(u.view.Ya)}return i}}function qT(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y9.bind(null,e),e.au.j_=a9.bind(null,e.eventManager),e.au.Vu=s9.bind(null,e.eventManager),e}function A9(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_9.bind(null,e),e}class n0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=G0(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return SP(this.persistence,new EP,e.initialUser,this.serializer)}yu(e){return new CT(Iv.fi,this.serializer)}pu(e){return new DP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}n0.provider={build:()=>new n0};class S9 extends n0{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){yt(this.persistence.referenceDelegate instanceof e0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oP(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new CT(r=>e0.fi(r,t),this.serializer)}}class Sg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=E9.bind(null,this.syncEngine),await e9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n9}()}createDatastore(e){const t=G0(e.databaseInfo.databaseId),r=function(a){return new jP(a)}(e.databaseInfo);return function(a,o,u,c){return new FP(a,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,u){return new zP(r,i,a,o,u)}(this.localStore,this.datastore,e.asyncQueue,t=>lE(this.syncEngine,t,0),function(){return nE.C()?new nE:new PP}())}createSyncEngine(e,t){return function(i,a,o,u,c,d,p){const g=new f9(i,a,o,u,c,d);return p&&(g.Au=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Fe(i);we(Lo,"RemoteStore shutting down."),a.Ta.add(5),await Rf(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Sg.provider={build:()=>new Sg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ba("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="FirestoreClient";class C9{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=US.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{we(js,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(we(js,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Lv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _m(n,e){n.asyncQueue.verifyOperationInProgress(),we(js,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await IT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await I9(n);we(js,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iE(e.remoteStore,i)),n._onlineComponents=e}async function I9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(js,"Using user provided OfflineComponentProvider");try{await _m(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Kl("Error using user provided cache. Falling back to memory cache: "+t),await _m(n,new n0)}}else we(js,"Using default OfflineComponentProvider"),await _m(n,new S9(void 0));return n._offlineComponents}async function XT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(js,"Using user provided OnlineComponentProvider"),await cE(n,n._uninitializedComponentsProvider._online)):(we(js,"Using default OnlineComponentProvider"),await cE(n,new Sg))),n._onlineComponents}function N9(n){return XT(n).then(e=>e.syncEngine)}async function R9(n){const e=await XT(n),t=e.eventManager;return t.onListen=d9.bind(null,e.syncEngine),t.onUnlisten=m9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g9.bind(null,e.syncEngine),t}function O9(n,e,t={}){const r=new Ns;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,u,c,d){const p=new T9({next:x=>{p.Cu(),o.enqueueAndForget(()=>i9(a,g));const _=x.docs.has(u);!_&&x.fromCache?d.reject(new Pe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&x.fromCache&&c&&c.source==="server"?d.reject(new Pe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(x)},error:x=>d.reject(x)}),g=new o9(Ev(u.path),p,{includeMetadataChanges:!0,La:!0});return r9(a,g)}(await R9(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(n,e,t){if(!t)throw new Pe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function P9(n,e,t,r){if(e===!0&&r===!0)throw new Pe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dE(n){if(!Me.isDocumentKey(n))throw new Pe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Uv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function mf(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uv(n);throw new Pe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firestore.googleapis.com",hE=!0;class pE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$T,this.ssl=hE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aP)throw new Pe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Pe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Pe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Pe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MD;switch(r.type){case"firstParty":return new BD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=fE.get(t);r&&(we("ComponentProvider","Removing Datastore"),fE.delete(t),r.terminate())}(this),Promise.resolve()}}function M9(n,e,t,r={}){var i;n=mf(n,Fv);const a=_f(e),o=n._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(Ub(`https://${c}`),Fb("Firestore",!0)),o.host!==$T&&o.host!==c&&Kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:a,emulatorOptions:r});if(!Do(d,u)&&(n._setSettings(d),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=ir.MOCK_USER;else{p=nN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new Pe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ir(x)}n._authCredentials=new kD(new BS(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hv(this.firestore,e,this._query)}}class ei{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ei(this.firestore,e,this._key)}}class gf extends Hv{constructor(e,t,r){super(e,t,Ev(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ei(this.firestore,null,new Me(e))}withConverter(e){return new gf(this.firestore,e,this._path)}}function YT(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=US.newId()),D9("doc","path",e),n instanceof Fv){const r=Qt.fromString(e,...t);return dE(r),new ei(n,null,new Me(r))}{if(!(n instanceof ei||n instanceof gf))throw new Pe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return dE(r),new ei(n.firestore,n instanceof gf?n.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="AsyncQueue";class gE{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new RT(this,"async_queue_retry"),this.ec=()=>{const r=xm();r&&we(mE,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=xm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=xm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Ns;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!vu(e))throw e;we(mE,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Ba("INTERNAL UNHANDLED ERROR: ",vE(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const i=kv.createAndSchedule(this,e,t,r,a=>this.oc(a));return this.Hu.push(i),i}nc(){this.Ju&&je(47125,{_c:vE(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function vE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class zv extends Fv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gE(e),this._firestoreClient=void 0,await e}}}function KT(n,e){const t=qb(),r=$h,i=Wg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=eN("firestore");a&&M9(i,...a)}return i}function QT(n){if(n._terminated)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||k9(n),n._firestoreClient}function k9(n){var e,t,r;const i=n._freezeSettings(),a=function(u,c,d,p){return new JD(u,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,WT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new C9(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nu(Zn.fromBase64String(e))}catch(t){throw new Pe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nu(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Pe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=/^__.*__$/;class j9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new If(e,this.data,t,this.fieldTransforms)}}function ZT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{hc:n})}}class $v{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new $v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return r0(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(ZT(this.hc)&&L9.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class B9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||G0(e)}gc(e,t,r,i=!1){return new $v({hc:e,methodName:t,fc:r,path:Kn.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V9(n){const e=n._freezeSettings(),t=G0(n._databaseId);return new B9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function U9(n,e,t,r,i,a={}){const o=n.gc(a.merge||a.mergeFields?2:0,e,t,i);nC("Data must be an object, but it was:",o,r);const u=eC(r,o);let c,d;if(a.merge)c=new pi(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const x=F9(e,g,t);if(!o.contains(x))throw new Pe(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);z9(p,x)||p.push(x)}c=new pi(p),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new j9(new Zr(u),c,d)}class Yv extends qv{_toFieldTransform(e){return new T7(e.path,new df)}isEqual(e){return e instanceof Yv}}function JT(n,e){if(tC(n=Ue(n)))return nC("Unsupported field value:",e,n),eC(n,e);if(n instanceof qv)return function(r,i){if(!ZT(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const u of r){let c=JT(u,i.Rc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return b7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=In.fromDate(r);return{timestampValue:Jh(i.serializer,a)}}if(r instanceof In){const a=new In(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jh(i.serializer,a)}}if(r instanceof Xv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nu)return{bytesValue:xT(i.serializer,r._byteString)};if(r instanceof ei){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Tv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wv)return function(o,u){return{mapValue:{fields:{[$S]:{stringValue:YS},[Yh]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw u.Vc("VectorValues must only contain numeric values.");return bv(u.serializer,d)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${Uv(r)}`)}(n,e)}function eC(n,e){const t={};return HS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(n,(r,i)=>{const a=JT(i,e.Ic(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function tC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof In||n instanceof Xv||n instanceof nu||n instanceof ei||n instanceof qv||n instanceof Wv)}function nC(n,e,t){if(!tC(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Uv(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function F9(n,e,t){if((e=Ue(e))instanceof Gv)return e._internalPath;if(typeof e=="string")return rC(n,e);throw r0("Field path arguments must be of type string or ",n,!1,void 0,t)}const H9=new RegExp("[~\\*/\\[\\]]");function rC(n,e,t){if(e.search(H9)>=0)throw r0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gv(...e.split("."))._internalPath}catch{throw r0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function r0(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Pe(pe.INVALID_ARGUMENT,u+n+c)}function z9(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class G9 extends iC{data(){return super.data()}}function aC(n,e){return typeof e=="string"?rC(n,e):e instanceof Gv?e._internalPath:e._delegate._internalPath}class q9{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bo(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Yh].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>an(o.doubleValue));return new Wv(a)}convertGeoPoint(e){return new Xv(an(e.latitude),an(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=j0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uf(e));default:return null}}convertTimestamp(e){const t=Ps(e);return new In(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);yt(ST(r),9688,{name:e});const i=new cf(r.get(1),r.get(3)),a=new Me(r.popFirst(5));return i.isEqual(t)||Ba(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sC extends iC{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $9(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(aC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $9 extends sC{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(n){n=mf(n,ei);const e=mf(n.firestore,zv);return O9(QT(e),n._key).then(t=>J9(e,n,t))}class K9 extends q9{constructor(e){super(),this.firestore=e}convertBytes(e){return new nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}function Q9(n,e,t){n=mf(n,ei);const r=mf(n.firestore,zv),i=X9(n.converter,e,t);return Z9(r,[U9(V9(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Da.none())])}function Z9(n,e){return function(r,i){const a=new Ns;return r.asyncQueue.enqueueAndForget(async()=>v9(await N9(r),i,a)),a.promise}(QT(n),e)}function J9(n,e,t){const r=t.docs.get(e._key),i=new K9(n);return new sC(n,i,e._key,r,new W9(t.hasPendingWrites,t.fromCache),e.converter)}function eM(){return new Yv("serverTimestamp")}(function(e,t=!0){(function(i){mu=i})(lu),$l(new Po("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),u=new zv(new LD(r.getProvider("auth-internal")),new VD(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Pe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cf(d.options.projectId,p)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Ss(bw,Aw,e),Ss(bw,Aw,"esm2017")})();function Df(){const{setUser:n,setLeagues:e,setSelectedLeagueId:t,setRole:r,setUserRole:i,setError:a}=pn();return async function(){try{await VA(Bt),n(null),e([]),t(""),r(null),i(null),a(null),localStorage.removeItem("selectedLeagueId"),localStorage.removeItem("selectedEventId")}catch(u){console.error("Logout error:",u),n(null),e([]),t(""),r(null),i(null),localStorage.removeItem("selectedLeagueId"),localStorage.removeItem("selectedEventId")}}}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),yE=n=>{const e=nM(n);return e.charAt(0).toUpperCase()+e.slice(1)},oC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),rM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=B.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...u},c)=>B.createElement("svg",{ref:c,...iM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:oC("lucide",i),...!a&&!rM(u)&&{"aria-hidden":"true"},...u},[...o.map(([d,p])=>B.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(n,e)=>{const t=B.forwardRef(({className:r,...i},a)=>B.createElement(aM,{ref:a,iconNode:e,className:oC(`lucide-${tM(yE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=yE(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pf=st("arrow-left",sM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],lM=st("award",oM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cM=st("bell",uM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wm=st("calendar",fM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Kv=st("chart-column",dM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pM=st("chevron-down",hM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Em=st("circle-alert",mM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vM=st("circle-check-big",gM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xM=st("circle-help",yM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],lC=st("clock",_M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],uC=st("copy",wM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],bM=st("credit-card",EM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cC=st("download",AM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fC=st("eye-off",SM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dC=st("eye",TM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],IM=st("funnel",CM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],RM=st("heart",NM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],DM=st("link-2",OM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],xE=st("list",PM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],i0=st("log-out",MM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],LM=st("menu",kM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],BM=st("message-circle",jM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],a0=st("plus",VM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],s0=st("qr-code",UM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],_E=st("refresh-ccw",FM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o0=st("settings",HM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qv=st("square-pen",zM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Tg=st("trending-up",GM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],XM=st("triangle-alert",qM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],$M=st("undo-2",WM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bm=st("upload",YM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],l0=st("user-plus",KM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pa=st("users",QM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mf=st("x",ZM),JM=({message:n,type:e="info",duration:t=5e3,onClose:r})=>{const[i,a]=B.useState(!0);B.useEffect(()=>{if(t>0){const d=setTimeout(()=>{o()},t);return()=>clearTimeout(d)}},[t]);const o=()=>{a(!1),setTimeout(()=>{r&&r()},300)},u={info:"bg-blue-50 border-blue-200 text-blue-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",error:"bg-red-50 border-red-200 text-red-800",success:"bg-green-50 border-green-200 text-green-800"},c={info:m.jsx(Em,{className:"w-5 h-5"}),warning:m.jsx(lC,{className:"w-5 h-5"}),error:m.jsx(Em,{className:"w-5 h-5"}),success:m.jsx(Em,{className:"w-5 h-5"})};return i?m.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm p-4 border rounded-lg shadow-lg transition-all duration-300 ${i?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"} ${u[e]}`,children:m.jsxs("div",{className:"flex items-start gap-3",children:[c[e],m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-sm font-medium",children:n})}),m.jsx("button",{onClick:o,className:"flex-shrink-0 p-1 hover:bg-black/10 rounded-full transition",children:m.jsx(Mf,{className:"w-4 h-4"})})]})}):null},hC=B.createContext();function ek({children:n}){const[e,t]=B.useState([]),r=B.useCallback((u,c="info",d=5e3)=>{const p=Date.now()+Math.random(),g={id:p,message:u,type:c,duration:d};return t(x=>[...x,g]),p},[]),i=B.useCallback(u=>{t(c=>c.filter(d=>d.id!==u))},[]),a=B.useCallback(()=>r("Server is starting up after inactivity. This may take up to a minute...","warning",1e4),[r]),o={addToast:r,removeToast:i,showColdStartNotification:a};return m.jsxs(hC.Provider,{value:o,children:[n,m.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(u=>m.jsx(JM,{message:u.message,type:u.type,duration:u.duration,onClose:()=>i(u.id)},u.id))})]})}function tk(){const n=B.useContext(hC);if(!n)throw new Error("useToast must be used within a ToastProvider");return n}const W0=({size:n="large",message:e="Loading..."})=>{const[t,r]=B.useState(!1),[i,a]=B.useState(!1);B.useEffect(()=>{const c=setTimeout(()=>{r(!0)},1e4),d=setTimeout(()=>{a(!0)},2e4);return()=>{clearTimeout(c),clearTimeout(d)}},[]);const o={small:"h-32 w-32",medium:"h-48 w-48",large:"h-64 w-64"},u={small:"w-6 h-6",medium:"w-8 h-8",large:"w-12 h-12"};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:`mx-auto mb-8 ${o[n]} flex items-center justify-center`,children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"WooCombine",className:"max-w-full max-h-full object-contain"})}),m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:`${u[n]} border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin`})}),m.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:e}),t&&!i&&m.jsxs("div",{className:"text-gray-500 text-sm max-w-md mx-auto",children:[m.jsx("p",{className:"mb-2",children:"This is taking longer than usual..."}),m.jsx("p",{children:"The server may be starting up."})]}),i&&m.jsxs("div",{className:"text-gray-500 text-sm max-w-md mx-auto bg-blue-50 p-4 rounded-lg border border-blue-200",children:[m.jsxs("p",{className:"mb-2",children:[" ",m.jsx("strong",{children:"Server is starting up"})]}),m.jsx("p",{className:"mb-2",children:"This can take up to a minute on the first visit."}),m.jsx("p",{className:"text-xs",children:"Free hosting services need time to initialize."})]})]})})},pC=B.createContext();function nk({children:n}){const[e,t]=B.useState(null),[r,i]=B.useState(!0),[a,o]=B.useState(!1),[u,c]=B.useState(!1),[d,p]=B.useState(null),[g,x]=B.useState([]),[_,E]=B.useState(()=>localStorage.getItem("selectedLeagueId")||""),[A,S]=B.useState(null),[I,N]=B.useState(null),P=Un(),{showColdStartNotification:V}=tk(),F=B.useCallback(async R=>R?(t(R),o(!0),R.emailVerified?!0:(window.location.pathname!=="/verify-email"&&P("/verify-email"),!1)):(t(null),o(!0),!1),[P,t,o]),W=B.useCallback(async R=>{var M;try{const L=KT();console.log("[AuthContext] Checking user role...");const H=await Promise.race([Y9(YT(L,"users",R.uid)),new Promise((ne,ve)=>setTimeout(()=>ve(new Error("Role check timeout")),2e4))]);if(!H.exists()||!H.data().role){console.log("[AuthContext] No role found, redirecting to select-role"),N(null),x([]),S(null),c(!0),P("/select-role");return}const G=H.data().role;N(G),console.log("[AuthContext] User role:",G),console.log("[AuthContext] Fetching user leagues...");let U=null;try{const ne=setTimeout(()=>{U=V()},5e3),ve=await Zt.get("/leagues/me",{timeout:45e3,retry:2});clearTimeout(ne);const Ee=ve.data.leagues||[];x(Ee),console.log("[AuthContext] Leagues loaded:",Ee.length);let q=_;if(Ee.length>0){(!q||!Ee.some(me=>me.id===q))&&(q=Ee[0].id),E(q),localStorage.setItem("selectedLeagueId",q);const ue=Ee.find(me=>me.id===q);S((ue==null?void 0:ue.role)||null)}else E(""),S(null),localStorage.removeItem("selectedLeagueId")}catch(ne){console.error("[AuthContext] League fetch failed:",ne.message),U||V(),ne.message.includes("timeout")||ne.code==="ECONNABORTED"?(console.log("[AuthContext] Cold start timeout detected - continuing without leagues"),p("Server is starting up. Please refresh the page in a moment.")):((M=ne.response)==null?void 0:M.status)>=500?(console.log("[AuthContext] Server error during cold start - continuing without leagues"),p("Server is temporarily unavailable. Please try again shortly.")):console.log("[AuthContext] Network or other error - continuing without leagues"),x([]),E(""),S(null),localStorage.removeItem("selectedLeagueId")}c(!0);const Ie=window.location.pathname,Be=["/login","/signup","/verify-email","/select-role","/"],te=["/dashboard","/players","/admin","/live-entry"];Be.includes(Ie)?P("/dashboard"):te.includes(Ie)&&console.log("[AuthContext] User already on authenticated page:",Ie)}catch(L){console.error("[AuthContext] Initialization error:",L.message),p(L.message),N(null),x([]),S(null),c(!0),L.message.includes("Role check timeout")&&P("/select-role")}finally{i(!1)}},[P,_]);B.useEffect(()=>{const R=BA(Bt,async M=>{if(console.log("[AuthContext] Firebase auth state changed:",!!M),!M){t(null),N(null),x([]),E(""),S(null),o(!0),c(!0),i(!1),p(null),localStorage.removeItem("selectedLeagueId");return}await F(M)?await W(M):i(!1)});return()=>R()},[F,W]);const D={user:e,userRole:I,role:A,leagues:g,selectedLeagueId:_,setSelectedLeagueId:R=>{if(E(R),localStorage.setItem("selectedLeagueId",R),g.length>0){const M=g.find(L=>L.id===R);S((M==null?void 0:M.role)||null)}},authChecked:a,roleChecked:u,error:d,setError:p,setUser:t,setUserRole:N,setRole:S,setLeagues:x,setAuthChecked:o,setRoleChecked:c};return r?m.jsx(W0,{size:"large"}):m.jsx(pC.Provider,{value:D,children:n})}function pn(){const n=B.useContext(pC);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}function rk({className:n=""}){return m.jsx("div",{className:`font-extrabold text-2xl text-cyan-700 min-w-0 ${n}`,children:"Woo-Combine"})}function ri({children:n,footerLinks:e,backgroundColor:t,contentClassName:r,hideHeader:i,showOverlay:a=!0,useBackgroundVideo:o=!1,backgroundVideoUrl:u}){const c=t||"bg-gradient-to-br from-cyan-900 via-blue-900 to-cyan-700";return m.jsxs("div",{className:`min-h-screen flex flex-col ${o?"bg-black":c} relative overflow-hidden`,children:[o&&u&&m.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover z-0",children:[m.jsx("source",{src:u,type:"video/mp4"}),m.jsx("div",{className:`absolute inset-0 ${c}`})]}),!i&&m.jsx("header",{className:"absolute top-0 left-0 p-6 z-10",children:m.jsx(rk,{className:"text-white drop-shadow-lg"})}),m.jsx("main",{className:`flex flex-1 flex-col justify-center items-center px-4 relative z-10 ${r||""}`,children:n}),m.jsx("footer",{className:"w-full flex flex-col items-center gap-2 pb-8 mt-auto relative z-10",children:e}),a!==!1&&m.jsx("div",{className:"absolute inset-0 bg-black/40 pointer-events-none z-5"})]})}function wE(){var d;const n=Un(),{user:e}=pn(),t=Df(),[r,i]=B.useState(""),a=async()=>{i("Redirecting to Create League...");try{n("/create-league")}catch(p){i(`Navigation error: ${p.message}`)}},o=()=>{i("Redirecting to Join League...");try{n("/join")}catch(p){i("Navigation error. Please try again."),console.error("[LeagueFallback] Join navigation error:",p)}},u=()=>{i("Loading your leagues...");try{n("/select-league")}catch(p){i("Navigation error. Please try again."),console.error("[LeagueFallback] Select league navigation error:",p)}},c=async()=>{i("Logging out...");try{await t(),n("/welcome")}catch(p){i("Logout error. Please refresh the page."),console.error("[LeagueFallback] Logout error:",p)}};return m.jsx(ri,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 mx-4",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}}),m.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Pa,{className:"w-6 h-6 text-cyan-600"})}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No League Selected"}),m.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"You need to join or create a league to access WooCombine features"})]}),r&&m.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 text-blue-700 px-4 py-3 rounded mb-6 text-sm",children:r}),m.jsxs("div",{className:"space-y-4 mb-6",children:[m.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-blue-300 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(xE,{className:"w-5 h-5 text-blue-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Choose from Your Leagues"}),m.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select from leagues you've already created or joined"}),m.jsxs("button",{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2",children:[m.jsx(xE,{className:"w-4 h-4"}),"Choose League"]})]})]})}),m.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-cyan-300 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(s0,{className:"w-5 h-5 text-cyan-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Join Existing League"}),m.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"If you were invited by a coach, enter your code or scan the QR they sent you"}),m.jsxs("button",{onClick:o,className:"bg-cyan-600 hover:bg-cyan-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2",children:[m.jsx(s0,{className:"w-4 h-4"}),"Join League"]})]})]})}),m.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-cyan-300 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(a0,{className:"w-5 h-5 text-green-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Create New League"}),m.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Start your own league and invite players to join"}),m.jsxs("button",{onClick:a,className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2",children:[m.jsx(a0,{className:"w-4 h-4"}),"Create League"]})]})]})})]}),m.jsx("div",{className:"border-t border-gray-200 pt-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-gray-600 font-medium text-xs",children:((d=e==null?void 0:e.email)==null?void 0:d.charAt(0).toUpperCase())||"U"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-medium text-gray-900",children:"Logged in as:"}),m.jsx("p",{className:"text-xs text-gray-600",children:(e==null?void 0:e.email)||"Unknown"})]})]}),m.jsxs("button",{onClick:c,className:"flex items-center gap-1 text-red-600 hover:text-red-700 font-medium text-xs transition",children:[m.jsx(i0,{className:"w-3 h-3"}),"Log Out"]})]})})]})})}const mC=B.createContext();function ik({children:n}){const{selectedLeagueId:e,user:t,authChecked:r,roleChecked:i}=pn(),[a,o]=B.useState([]),[u,c]=B.useState(null),[d,p]=B.useState(!1),[g,x]=B.useState(!1),[_,E]=B.useState(null),A=yi(),S=["/welcome","/login","/signup","/verify-email","/select-role","/select-league","/claim","/create-league","/join"];B.useEffect(()=>{async function P(){var V,F,W;if(!(!r||!i)){if(!e||!t){p(!0),o([]),c(null);return}p(!1),x(!0),E(null);try{const D=new AbortController,R=setTimeout(()=>D.abort(),2e4),M=`/leagues/${e}/events`,{data:L}=await Zt.get(M,{signal:D.signal,retry:2});clearTimeout(R);const H=L.events||[];o(Array.isArray(H)?H:[]);const G=localStorage.getItem("selectedEventId"),U=Array.isArray(H)?H.find(Ie=>Ie.id===G):null;U?c(U):Array.isArray(H)&&H.length>0?c(H[0]):c(null),E(null)}catch(D){console.error("Failed to fetch events:",D),o([]),c(null),D.name==="AbortError"?E("Request timed out. Please try again."):((V=D.response)==null?void 0:V.status)===401?E("Authentication failed. Please refresh the page."):E(((W=(F=D.response)==null?void 0:F.data)==null?void 0:W.detail)||D.message||"Failed to load events")}finally{x(!1)}}}P()},[e,t,r,i]),B.useEffect(()=>{u&&localStorage.setItem("selectedEventId",u.id)},[u]);const I=async()=>{var P,V;if(!(!e||!t)){x(!0),E(null);try{const F=`/leagues/${e}/events`,{data:W}=await Zt.get(F,{retry:2}),D=W.events||[];o(Array.isArray(D)?D:[]),E(null)}catch(F){console.error("Failed to refresh events:",F),E(((V=(P=F.response)==null?void 0:P.data)==null?void 0:V.detail)||F.message||"Failed to refresh events")}finally{x(!1)}}},N=r&&i&&d&&!S.includes(A.pathname);return m.jsx(mC.Provider,{value:{events:a,selectedEvent:u,setSelectedEvent:c,setEvents:o,noLeague:d,loading:g,error:_,refreshEvents:I,LeagueFallback:wE},children:N?m.jsx(wE,{}):n})}function za(){return B.useContext(mC)}function ak({isOpen:n,onClose:e,user:t,userRole:r,onLogout:i}){const a=Un();if(!n)return null;const o=()=>{if(!(t!=null&&t.email))return"U";const d=t.email,p=d.split("@")[0].split(".");return p.length>=2?(p[0][0]+p[1][0]).toUpperCase():d[0].toUpperCase()},u=()=>t!=null&&t.displayName?t.displayName:t!=null&&t.email?t.email.split("@")[0].split(".").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"User",c=d=>{e(),a(d)};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"bg-white rounded-t-2xl p-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Profile"}),m.jsx("button",{onClick:e,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition",children:m.jsx(Mf,{className:"w-5 h-5 text-gray-600"})})]}),m.jsxs("div",{className:"bg-gradient-to-br from-cmf-primary to-cmf-secondary px-6 py-8 text-center text-white",children:[m.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4",children:o()}),m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx("h3",{className:"text-xl font-bold",children:u()}),m.jsx("button",{className:"p-1 hover:bg-white/20 rounded-full transition",children:m.jsx(Qv,{className:"w-4 h-4"})})]}),m.jsx("p",{className:"text-cmf-light text-sm mt-1",children:t==null?void 0:t.email})]}),m.jsxs("div",{className:"p-4 space-y-2",children:[m.jsxs("button",{onClick:()=>c("/select-league"),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(Pa,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"My Events"})]}),r==="organizer"&&m.jsxs("button",{onClick:()=>c("/create-league"),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(a0,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Create an Event"})]}),m.jsxs("button",{onClick:()=>c("/join"),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(l0,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Join an Event"})]}),m.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 rounded-lg transition",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(cM,{className:"w-5 h-5 text-red-500"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900",children:"Notifications are off"}),m.jsx("div",{className:"text-sm text-gray-500",children:"You will miss event updates"})]})]}),m.jsx("div",{className:"w-12 h-6 bg-gray-200 rounded-full relative",children:m.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute top-0.5 left-0.5 shadow transition"})})]}),m.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Allow notifications for things like event updates, new events, and messages"}),m.jsx("button",{className:"text-cmf-primary text-sm font-medium mt-1 hover:underline",children:"Open device settings"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(bM,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Subscription"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(xM,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Help Center"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(BM,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Contact Us"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(RM,{className:"w-5 h-5 text-red-500"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Love WooCombine?"})]}),m.jsxs("button",{onClick:()=>{e(),i()},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-red-50 rounded-lg transition mt-4 border-t border-gray-200 pt-4",children:[m.jsx(i0,{className:"w-5 h-5 text-red-600"}),m.jsx("span",{className:"font-medium text-red-600",children:"Log Out"})]})]})]})})}function Am(){const{user:n,userRole:e}=pn(),{selectedEvent:t}=za(),[r,i]=B.useState(!1),[a,o]=B.useState(!1),[u,c]=B.useState(!1),d=Df(),p=Un(),g=()=>i(!1),x=()=>{if(!(n!=null&&n.email))return"U";const A=n.email,S=A.split("@")[0].split(".");return S.length>=2?(S[0][0]+S[1][0]).toUpperCase():A[0].toUpperCase()},_=()=>{o(!a),p("/select-league")},E=async()=>{try{await d(),p("/welcome")}catch(A){console.error("Logout failed:",A),p("/welcome")}};return m.jsxs(m.Fragment,{children:[m.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-3",children:m.jsxs("div",{className:"flex items-center max-w-7xl mx-auto gap-4",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("button",{onClick:()=>c(!0),className:"w-10 h-10 bg-cmf-primary rounded-full flex items-center justify-center text-white font-bold text-sm hover:bg-cmf-secondary transition",children:x()})}),m.jsx("div",{className:"flex-1 flex justify-start min-w-0",children:m.jsxs("button",{onClick:_,className:"flex items-center gap-1 px-2 py-2 rounded-lg hover:bg-gray-50 transition max-w-[200px]",children:[m.jsxs("div",{className:"text-left min-w-0",children:[m.jsx("div",{className:"font-bold text-sm md:text-lg text-gray-900 truncate",children:(t==null?void 0:t.name)||"Select Event"}),(t==null?void 0:t.location)&&m.jsx("div",{className:"text-xs text-gray-500 truncate hidden sm:block",children:t.location})]}),m.jsx(pM,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-400 flex-shrink-0"})]})}),m.jsxs("div",{className:"flex items-center gap-3 md:gap-6",children:[m.jsx(lt,{to:"/dashboard",className:"text-gray-700 hover:text-cmf-primary font-medium transition whitespace-nowrap text-sm md:text-base",children:"Home"}),m.jsx(lt,{to:"/players",className:"text-gray-700 hover:text-cmf-primary font-medium transition whitespace-nowrap text-sm md:text-base",children:"Players"}),e==="organizer"&&m.jsx(lt,{to:"/admin",className:"text-gray-700 hover:text-cmf-primary font-medium transition whitespace-nowrap text-sm md:text-base",children:"Admin"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"hidden sm:block relative",children:[m.jsx("button",{onClick:()=>i(!r),className:"p-2 rounded-lg hover:bg-gray-50 transition","aria-label":"Settings",children:m.jsx(o0,{className:"w-6 h-6 text-gray-600"})}),r&&m.jsxs("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[m.jsx(lt,{to:"/select-league",className:"block px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>i(!1),children:"Switch Event"}),m.jsx("hr",{className:"my-2"}),m.jsxs("button",{onClick:()=>{i(!1),E()},className:"flex items-center gap-2 w-full px-4 py-2 text-left text-red-600 hover:bg-red-50",children:[m.jsx(i0,{className:"w-4 h-4"}),"Log Out"]})]})]}),m.jsx("button",{className:"sm:hidden p-2 rounded-lg hover:bg-gray-50",onClick:()=>i(!r),"aria-label":"Open menu",children:m.jsx(LM,{className:"w-6 h-6 text-gray-600"})})]})]})}),r&&m.jsx("div",{className:"sm:hidden fixed top-16 left-0 w-full bg-white shadow-lg z-50 border-t border-gray-200",children:m.jsxs("div",{className:"flex flex-col py-4",children:[m.jsx(lt,{to:"/select-league",className:"px-4 py-3 text-gray-700 hover:bg-gray-50 border-b border-gray-100",onClick:g,children:"Switch Event"}),m.jsxs("button",{onClick:()=>{g(),E()},className:"flex items-center gap-2 px-4 py-3 text-left text-red-600 hover:bg-red-50",children:[m.jsx(i0,{className:"w-4 h-4"}),"Log Out"]})]})}),m.jsx(ak,{isOpen:u,onClose:()=>c(!1),user:n,userRole:e,onLogout:E})]})}function sk(){const{user:n,userRole:e}=pn(),{selectedEvent:t}=za(),r=Un(),[i,a]=jg.useState(!1),o=t&&t.date&&!isNaN(Date.parse(t.date))?new Date(t.date).toLocaleDateString():"No date set",u=c=>{a(!0),setTimeout(()=>{r(c)},0)};return i?m.jsx(W0,{title:"Navigating...",subtitle:"Taking you to your destination",size:"medium"}):t?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-cmf-primary/30",children:[m.jsx("h1",{className:"text-2xl font-bold text-cmf-secondary mb-2",children:"Welcome to WooCombine!"}),m.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[m.jsx(wm,{className:"w-4 h-4"}),m.jsxs("span",{children:[m.jsx("strong",{children:t.name})," - ",o]})]}),t.location&&m.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[" ",t.location]}),m.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e==="organizer"&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>u("/admin"),className:"bg-cmf-secondary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-primary transition flex items-center justify-center gap-3 text-lg",children:[m.jsx(Kv,{className:"w-6 h-6"}),"Manage Event"]}),m.jsxs("button",{onClick:()=>u("/players"),className:"bg-cmf-primary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-secondary transition flex items-center justify-center gap-3 text-lg",children:[m.jsx(Pa,{className:"w-6 h-6"}),"View Players & Rankings"]})]}),e==="coach"&&m.jsxs("button",{onClick:()=>u("/players"),className:"bg-cmf-primary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-secondary transition flex items-center justify-center gap-3 text-lg",children:[m.jsx(Pa,{className:"w-6 h-6"}),"View Players & Rankings"]}),e==="player"&&t&&m.jsx("button",{onClick:()=>u("/drill-input"),className:"bg-cmf-secondary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-primary transition flex items-center justify-center gap-3 text-lg",children:" Submit Drill Results"})]})]}),t&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx(wm,{className:"w-5 h-5 text-cmf-primary"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Event Details"})]}),m.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Name:"})," ",t.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",o]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Location:"})," ",t.location||"Location TBD"]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Getting Started"}),m.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"w-6 h-6 bg-cmf-primary text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),m.jsxs("span",{children:["Event selected: ",m.jsx("strong",{children:t.name})," "]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"w-6 h-6 bg-cmf-primary text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),m.jsxs("span",{children:[e==="organizer"&&"Import players and manage event settings",e==="coach"&&"View player rankings and adjust drill weights",e==="player"&&"Submit your drill results"]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"w-6 h-6 bg-cmf-primary text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),m.jsx("span",{children:"View real-time rankings and results"})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(wm,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-secondary mb-4",children:"Welcome to WooCombine!"}),m.jsx("p",{className:"text-gray-600 mb-6",children:'Click on "Select Event" in the header above to choose or create an event and get started.'}),m.jsx("button",{onClick:()=>r("/select-league"),className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Select Event"})]})})})}const ok=[{value:"40m_dash",label:"40M Dash"},{value:"vertical_jump",label:"Vertical Jump"},{value:"catching",label:"Catching"},{value:"throwing",label:"Throwing"},{value:"agility",label:"Agility"}];function lk({playerId:n,onSuccess:e}){const{user:t,selectedLeagueId:r}=pn(),{selectedEvent:i}=za(),[a,o]=B.useState(""),[u,c]=B.useState(""),[d,p]=B.useState(!1),[g,x]=B.useState(""),[_,E]=B.useState(""),A=async S=>{if(S.preventDefault(),x(""),E(""),!a||!u){x("Please select a drill type and enter a value.");return}if(!i){x("No event selected. Please select an event first.");return}p(!0);try{await Zt.post("/drill-results/",{player_id:n,type:a,value:parseFloat(u),event_id:i.id}),E("Drill result submitted!"),o(""),c(""),e&&e()}catch(I){x(I.message)}finally{p(!1)}};return m.jsxs("form",{onSubmit:A,className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md mx-auto mb-6",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-cmf-primary",children:"Submit Drill Result"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block mb-1 font-semibold",children:"Drill Type"}),m.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0,children:[m.jsx("option",{value:"",children:"Select a drill"}),ok.map(S=>m.jsx("option",{value:S.value,children:S.label},S.value))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block mb-1 font-semibold",children:"Value"}),m.jsx("input",{type:"number",step:"any",value:u,onChange:S=>c(S.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),g&&m.jsx("div",{className:"text-red-500 mb-2 text-sm",children:g}),_&&m.jsx("div",{className:"text-green-600 mb-2 text-sm",children:_}),m.jsx("button",{type:"submit",className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-bold py-2 rounded-lg shadow transition",disabled:d,children:d?"Submitting...":"Submit Result"})]})}function uk({onEventSelected:n}){const{events:e,selectedEvent:t,setSelectedEvent:r,setEvents:i,loading:a,error:o,refreshEvents:u}=za(),{selectedLeagueId:c,user:d}=pn(),[p,g]=B.useState(!1),[x,_]=B.useState(""),[E,A]=B.useState(""),[S,I]=B.useState(""),[N,P]=B.useState(!1),[V,F]=B.useState(""),W=R=>{if(!Array.isArray(e))return;const M=e.find(L=>L.id===R.target.value);M&&(r(M),n&&n(M))},D=async R=>{var M,L;R.preventDefault(),P(!0),F("");try{const H=E?new Date(E).toISOString().slice(0,10):"",U={id:(await Zt.post(`/leagues/${c}/events`,{name:x,date:H,location:S})).data.event_id,name:x,date:H,created_at:new Date().toISOString()};i(Ie=>[U,...Ie]),r(U),g(!1),_(""),A(""),I(""),n&&n(U)}catch(H){console.error("Event creation error:",H),F(((L=(M=H.response)==null?void 0:M.data)==null?void 0:L.detail)||H.message||"Failed to create event")}finally{P(!1)}};return a?m.jsx("div",{className:"flex flex-col gap-2 mb-6",children:m.jsxs("div",{className:"text-center text-gray-500 py-4",children:[m.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full"}),m.jsx("div",{className:"mt-2",children:"Loading events..."})]})}):o?m.jsx("div",{className:"flex flex-col gap-2 mb-6",children:m.jsxs("div",{className:"text-center text-red-500 py-4 bg-red-50 rounded-lg border border-red-200",children:[m.jsx("div",{className:"mb-2",children:" Failed to load events"}),m.jsx("div",{className:"text-sm text-red-400 mb-3",children:o}),m.jsx("button",{onClick:u,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition text-sm",children:"Try Again"})]})}):m.jsxs("div",{className:"flex flex-col gap-2 mb-6","data-event-selector":!0,children:[e.length===0&&m.jsx("div",{className:"text-center text-cmf-secondary text-lg font-semibold py-2",children:"No events found. Please create a new event."}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("select",{value:(t==null?void 0:t.id)||"",onChange:W,className:"border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",disabled:!Array.isArray(e)||e.length===0,"data-event-selector-dropdown":!0,children:[m.jsx("option",{value:"",children:"Select an event..."}),Array.isArray(e)&&e.map(R=>{let M="Invalid Date";return R.date&&!isNaN(Date.parse(R.date))&&(M=new Date(R.date).toLocaleDateString()),m.jsxs("option",{value:R.id,children:[R.name,"  ",M]},R.id)})]}),m.jsx("button",{onClick:()=>g(!0),className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Create New Event"})]}),p&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[m.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create New Event"}),m.jsxs("form",{onSubmit:D,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Event Name"}),m.jsx("input",{type:"text",value:x,onChange:R=>_(R.target.value),className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Event Date"}),m.jsx("input",{type:"date",value:E,onChange:R=>A(R.target.value),className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),m.jsx("input",{type:"text",value:S,onChange:R=>I(R.target.value),placeholder:"e.g., Central Park Football Field",className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary"})]}),V&&m.jsx("div",{className:"text-red-500 text-sm mb-4",children:V}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",disabled:N,className:"bg-cmf-primary text-white px-4 py-2 rounded hover:bg-cmf-secondary transition disabled:opacity-50",children:N?"Creating...":"Create"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})]})}const Ui=[{key:"40m_dash",label:"40M Dash",unit:"sec"},{key:"vertical_jump",label:"Vertical Jump",unit:"in"},{key:"catching",label:"Catching",unit:"pts"},{key:"throwing",label:"Throwing",unit:"pts"},{key:"agility",label:"Agility",unit:"pts"}],gC={"40m_dash":.3,vertical_jump:.2,catching:.15,throwing:.15,agility:.2},Wl={balanced:{name:"Balanced",description:"Equal emphasis on all skills",weights:{"40m_dash":.2,vertical_jump:.2,catching:.2,throwing:.2,agility:.2}},speed:{name:"Speed Focused",description:"Emphasizes speed and athleticism",weights:{"40m_dash":.4,vertical_jump:.3,catching:.1,throwing:.1,agility:.1}},skills:{name:"Skills Focused",description:"Emphasizes catching and throwing",weights:{"40m_dash":.1,vertical_jump:.1,catching:.35,throwing:.35,agility:.1}},athletic:{name:"Athletic",description:"Default weighting system",weights:{"40m_dash":.3,vertical_jump:.2,catching:.15,throwing:.15,agility:.2}}},EE=[{id:"players",label:"Player Management",icon:Pa,description:"View, edit, and manage individual players"},{id:"rankings",label:"Rankings & Analysis",icon:Kv,description:"Age group rankings with weight adjustments"},{id:"exports",label:"Export & Reports",icon:cC,description:"Export data and view analytics"}];function ck({player:n,allPlayers:e,onClose:t,onSave:r}){const[i,a]=B.useState({name:(n==null?void 0:n.name)||"",number:(n==null?void 0:n.number)||"",age_group:(n==null?void 0:n.age_group)||""}),[o,u]=B.useState(!1),[c,d]=B.useState(""),p=[...new Set(e.map(_=>_.age_group).filter(_=>_&&_.trim()!==""))].sort(),g=(_,E)=>{a(A=>({...A,[_]:E})),d("")},x=async()=>{var _,E;if(!i.name.trim()){d("Player name is required");return}u(!0),d("");try{const A={name:i.name.trim(),number:i.number?parseInt(i.number):null,age_group:i.age_group.trim()||null};await Zt.put(`/players/${n.id}?event_id=${n.event_id}`,A),r(),t()}catch(A){console.error("Error updating player:",A),d(((E=(_=A.response)==null?void 0:_.data)==null?void 0:E.detail)||"Failed to update player")}finally{u(!1)}};return n?m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[m.jsxs("div",{className:"bg-cmf-primary text-white p-6 rounded-t-xl flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Qv,{className:"w-5 h-5"}),m.jsx("h2",{className:"text-xl font-bold",children:"Edit Player"})]}),m.jsx("button",{onClick:t,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition",children:m.jsx(Mf,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6 space-y-4",children:[c&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:c}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Name *"}),m.jsx("input",{type:"text",value:i.name,onChange:_=>g("name",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter player name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Number"}),m.jsx("input",{type:"number",value:i.number,onChange:_=>g("number",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter player number",min:"1",max:"999"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Group"}),m.jsx("input",{type:"text",list:"age-group-suggestions",value:i.age_group,onChange:_=>g("age_group",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"e.g., 6U, U8, 7-8, 9-10 years old"}),m.jsxs("datalist",{id:"age-group-suggestions",children:[p.map(_=>m.jsx("option",{value:_},_)),m.jsx("option",{value:"6U"}),m.jsx("option",{value:"U6"}),m.jsx("option",{value:"8U"}),m.jsx("option",{value:"U8"}),m.jsx("option",{value:"10U"}),m.jsx("option",{value:"U10"}),m.jsx("option",{value:"12U"}),m.jsx("option",{value:"U12"}),m.jsx("option",{value:"5-6"}),m.jsx("option",{value:"7-8"}),m.jsx("option",{value:"9-10"}),m.jsx("option",{value:"11-12"}),m.jsx("option",{value:"13-14"}),m.jsx("option",{value:"15-16"}),m.jsx("option",{value:"17-18"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type any format your league uses (6U, U8, 7-8 years old, etc.)"})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{onClick:t,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 rounded-lg transition",disabled:o,children:"Cancel"}),m.jsx("button",{onClick:x,disabled:o,className:"flex-1 bg-cmf-primary hover:bg-cmf-secondary text-white font-medium py-2 rounded-lg transition disabled:opacity-50",children:o?"Saving...":"Save Changes"})]})]})]})}):null}function fk({player:n,allPlayers:e,onClose:t}){const[r,i]=B.useState({...gC}),[a,o]=B.useState("athletic");if(!n||!e||e.length===0)return null;const u=()=>{const S=Object.values(r).reduce((N,P)=>N+P,0);if(S===0)return{};const I={};return Ui.forEach(N=>{I[N.key]=Math.round(r[N.key]/S*100)}),I},c=(S,I)=>{const N={...u(),[S]:I},P=Object.values(N).reduce((F,W)=>F+W,0);if(P===0)return;const V={};Ui.forEach(F=>{V[F.key]=N[F.key]/P}),i(V),o(null)},d=S=>{i({...Wl[S].weights}),o(S)},p={};Ui.forEach(S=>{try{const I=e.filter(V=>V&&V.id&&V.age_group===n.age_group&&V[S.key]!=null&&typeof V[S.key]=="number");if(I.length===0){p[S.key]=null;return}const P=I.sort((V,F)=>S.key==="40m_dash"?V[S.key]-F[S.key]:F[S.key]-V[S.key]).findIndex(V=>V.id===n.id)+1;p[S.key]=P>0?P:null}catch(I){console.warn(`[PlayerModal] Error calculating ranking for ${S.key}:`,I),p[S.key]=null}});const g=Ui.map(S=>{try{const I=n[S.key]!=null&&typeof n[S.key]=="number"?n[S.key]:null,N=r[S.key]||0,P=I!=null?I*N:0;return{...S,rawScore:I,weight:N,weightedScore:P,rank:p[S.key]}}catch(I){return console.warn(`[PlayerModal] Error calculating weighted score for ${S.key}:`,I),{...S,rawScore:null,weight:r[S.key]||0,weightedScore:0,rank:null}}}),x=g.reduce((S,I)=>S+(I.weightedScore||0),0),_=u();let E=1,A=[];try{if(A=e.filter(S=>S&&S.id&&S.age_group===n.age_group),A.length>0){const I=A.map(N=>{try{const P=Ui.reduce((V,F)=>{const W=N[F.key]!=null&&typeof N[F.key]=="number"?N[F.key]:0,D=r[F.key]||0;return V+W*D},0);return{...N,currentScore:P}}catch(P){return console.warn(`[PlayerModal] Error calculating score for player ${N.id}:`,P),{...N,currentScore:0}}}).sort((N,P)=>(P.currentScore||0)-(N.currentScore||0)).findIndex(N=>N.id===n.id);E=I>=0?I+1:1}}catch(S){console.warn("[PlayerModal] Error calculating overall ranking:",S),E=1,A=[n]}return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] flex flex-col",children:[m.jsxs("div",{className:"bg-cmf-primary text-white px-6 py-3 rounded-t-xl flex justify-between items-center flex-shrink-0",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold",children:n.name}),m.jsxs("p",{className:"text-cmf-light text-sm",children:["Player #",n.number,"  Age Group: ",n.age_group]})]}),m.jsxs("div",{className:"text-right mr-4",children:[m.jsx("div",{className:"text-sm opacity-75",children:"Overall Score"}),m.jsxs("div",{className:"text-2xl font-bold text-cmf-primary",children:[x.toFixed(2)," pts"]}),m.jsxs("div",{className:"text-xs opacity-75",children:["Rank #",E," of ",A.length]})]}),m.jsx("button",{onClick:t,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition",children:m.jsx(Mf,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"flex-1 overflow-hidden",children:m.jsxs("div",{className:"h-full flex",children:[m.jsx("div",{className:"flex-1 p-4",children:m.jsxs("div",{className:"h-full flex flex-col",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[m.jsx(Tg,{className:"w-5 h-5 text-cmf-primary"}),"Drill Performance & Weight Control"]}),m.jsx("div",{className:"grid grid-cols-1 gap-2 flex-1 overflow-y-auto",children:g.map(S=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-200",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:S.label}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-base font-bold text-cmf-primary",children:S.rawScore!=null?`${S.rawScore} ${S.unit}`:"No score"}),S.rank&&m.jsxs("span",{className:"bg-cmf-primary text-white px-1.5 py-0.5 rounded-full text-xs font-medium",children:["#",S.rank]})]})]})}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-xs text-gray-600",children:"Contribution"}),m.jsxs("div",{className:"text-base font-bold text-cmf-secondary",children:[S.weightedScore.toFixed(2)," pts"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"text-xs font-medium text-gray-600 w-16",children:[_[S.key],"%"]}),m.jsx("input",{type:"range",min:0,max:100,value:_[S.key],onChange:I=>c(S.key,parseInt(I.target.value)),className:"flex-1 accent-cmf-primary h-2 rounded-lg"}),m.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-cmf-primary to-cmf-secondary transition-all duration-300",style:{width:`${Math.min(S.weightedScore/Math.max(...g.map(I=>I.weightedScore))*100,100)}%`}})})]})]},S.key))}),m.jsx("div",{className:"mt-2 p-2 bg-cmf-primary/10 rounded-lg border-2 border-cmf-primary/20 flex-shrink-0",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Total Composite Score:"}),m.jsxs("span",{className:"text-lg font-bold text-cmf-primary",children:[x.toFixed(2)," pts (Rank #",E,")"]})]})})]})}),m.jsx("div",{className:"w-80 bg-gray-50 p-4 border-l border-gray-200 overflow-y-auto",children:m.jsxs("div",{className:"h-full flex flex-col",children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[m.jsx(o0,{className:"w-4 h-4 text-cmf-primary"}),"Weight Scenarios"]}),m.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(Wl).map(([S,I])=>m.jsxs("button",{onClick:()=>d(S),className:`p-2 text-left rounded-lg border-2 transition-all ${a===S?"border-cmf-primary bg-cmf-primary/5 text-cmf-primary":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[m.jsx("div",{className:"font-medium text-sm",children:I.name}),m.jsx("div",{className:"text-xs text-gray-500",children:I.description})]},S))})]}),m.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200 flex-1 min-h-0",children:[m.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[m.jsx(lM,{className:"w-4 h-4 text-yellow-500"}),"Ranking Analysis"]}),m.jsxs("div",{className:"space-y-2 text-sm overflow-y-auto max-h-96",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Age Group Rank:"}),m.jsxs("span",{className:"font-bold text-cmf-primary",children:["#",E," of ",A.length]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Overall Score:"}),m.jsxs("span",{className:"font-bold text-cmf-secondary",children:[x.toFixed(2)," pts"]})]}),m.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[m.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Score Breakdown:"}),g.map(S=>m.jsxs("div",{className:"flex justify-between text-xs",children:[m.jsxs("span",{className:"text-gray-600",children:[S.label,":"]}),m.jsxs("span",{className:"font-mono",children:[S.weightedScore.toFixed(2)," pts"]})]},S.key))]}),m.jsx("div",{className:"pt-2 border-t border-gray-200",children:m.jsx("div",{className:"text-xs text-gray-500",children:a?`Using ${Wl[a].name} preset`:"Using custom weights"})})]})]}),m.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center flex-shrink-0",children:" Adjust sliders for real-time changes"})]})})]})})]})})}function dk(){var de;const{selectedEvent:n}=za(),{user:e,selectedLeagueId:t,userRole:r}=pn(),[i,a]=B.useState([]),[o,u]=B.useState(!0),[c,d]=B.useState(null),[p,g]=B.useState({}),[x,_]=B.useState(null),[E,A]=B.useState(null),S=Un(),I=yi(),[N,P]=B.useState("players");B.useEffect(()=>{const he=new URLSearchParams(I.search).get("tab");he&&["players","rankings","exports"].includes(he)&&P(he)},[I.search]);const[V,F]=B.useState(""),[W,D]=B.useState([]),[R,M]=B.useState(!1),[L,H]=B.useState(null),[G,U]=B.useState({...gC}),[Ie,Be]=B.useState("athletic"),te=()=>{const ae=Object.values(G).reduce((ye,be)=>ye+be,0),he={};return Ui.forEach(ye=>{he[ye.key]=Math.round(G[ye.key]/ae*100)}),he},ne=(ae,he)=>{const ye={...te(),[ae]:he},be=Object.values(ye).reduce((Ge,Wt)=>Ge+Wt,0);if(be===0)return;const Ne={};Ui.forEach(Ge=>{Ne[Ge.key]=ye[Ge.key]/be}),U(Ne),Be(null)},ve=ae=>{U({...Wl[ae].weights}),Be(ae)},Ee=B.useCallback(async()=>{var ae;if(console.log("[Players] fetchPlayers called",{selectedEvent:!!n,user:!!e,selectedLeagueId:!!t}),!n||!e||!t){console.log("[Players] Missing required data, setting empty state"),a([]),u(!1);return}console.log("[Players] Starting to fetch players for event:",n.id),u(!0),d(null);try{const{data:he}=await Zt.get(`/players?event_id=${n.id}`);if(console.log("[Players] API call succeeded, data:",he),console.log("[Players] Data type:",typeof he,"Array?",Array.isArray(he),"Length:",he==null?void 0:he.length),a(he),console.log("[Players] Players state updated"),x){const ye=he.find(be=>be.id===x.id);ye&&_(ye)}}catch(he){console.log("[Players] API call failed:",he),((ae=he.response)==null?void 0:ae.status)===404?(console.log("[Players] 404 error - no players found"),d(null),a([])):(console.log("[Players] Other error:",he.message),d(he.message))}finally{console.log("[Players] Setting loading to false"),u(!1)}},[n,e,t]);B.useEffect(()=>{Ee()},[Ee]),B.useEffect(()=>{const he=setTimeout(async()=>{var ye;if(!V||!e||!t||!n||N!=="rankings"){D([]);return}M(!0),H(null);try{const be=new URLSearchParams({age_group:V,event_id:n.id});be.append("weight_40m_dash",G["40m_dash"]),be.append("weight_vertical_jump",G.vertical_jump),be.append("weight_catching",G.catching),be.append("weight_throwing",G.throwing),be.append("weight_agility",G.agility);const Ne=await Zt.get(`/rankings?${be.toString()}`);D(Ne.data)}catch(be){((ye=be.response)==null?void 0:ye.status)===404?(H(null),D([])):(console.error("[Players] Rankings fetch error:",be),H(be.message))}finally{M(!1)}},300);return()=>clearTimeout(he)},[V,G,e,t,n,N]);const q=[...new Set(i.map(ae=>ae.age_group))].sort(),ue=ae=>{g(he=>({...he,[ae]:!he[ae]}))},me=(i||[]).reduce((ae,he)=>{const ye=he.age_group||"Unassigned";return ae[ye]=ae[ye]||[],ae[ye].push(he),ae},{});return!n||!n.id?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Tg,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Event Selected"}),m.jsx("p",{className:"text-gray-600 mb-6",children:r==="organizer"?"Select or create an event to manage players and drills.":"Ask your league operator to assign you to an event."}),m.jsx("button",{onClick:()=>S("/select-league"),className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Select Event"})]})})}):o?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center",children:[m.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full mb-2"}),m.jsx("div",{className:"text-gray-500",children:"Loading players..."})]})})}):c?c.includes("422")?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Players Found"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Use the Admin tab to upload or import players to get started."}),m.jsx(lt,{to:"/admin",className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Go to Admin"})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:m.jsxs("div",{className:"text-red-500 font-semibold",children:["Error: ",c]})})})}):i.length===0?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Tg,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Players Found Yet"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"You can upload a CSV or add them manually to get started."}),m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsx(lt,{to:"/admin#player-upload-section",className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Upload CSV"}),m.jsx(lt,{to:"/admin#player-upload-section",className:"bg-cmf-secondary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-primary transition",children:"Add Player"})]})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-cmf-primary/30",children:[m.jsx("h1",{className:"text-2xl font-bold text-cmf-secondary mb-2",children:"WooCombine: Players & Rankings"}),m.jsxs("p",{className:"text-gray-600 mb-4",children:["Managing: ",m.jsx("strong",{children:n.name})," - ",new Date(n.event_date).toLocaleDateString()]}),m.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m.jsx(lt,{to:"/live-entry",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2",children:" Live Entry"}),r==="organizer"&&m.jsx(lt,{to:"/admin",className:"bg-cmf-primary hover:bg-cmf-secondary text-white px-4 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2",children:" Admin Tools"})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 overflow-hidden",children:[m.jsx("div",{className:"flex border-b border-gray-200",children:EE.map(ae=>{const he=ae.icon;return m.jsxs("button",{onClick:()=>P(ae.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors ${N===ae.id?"bg-cmf-primary text-white border-b-2 border-cmf-primary":"text-gray-600 hover:text-cmf-primary hover:bg-gray-50"}`,children:[m.jsx(he,{className:"w-4 h-4"}),m.jsx("span",{className:"hidden sm:inline",children:ae.label}),m.jsx("span",{className:"sm:hidden",children:ae.label.split(" ")[0]})]},ae.id)})}),m.jsx("div",{className:"px-4 py-2 bg-gray-50 text-xs text-gray-600",children:(de=EE.find(ae=>ae.id===N))==null?void 0:de.description})]}),N==="players"&&m.jsxs(m.Fragment,{children:[r==="organizer"&&Object.keys(me).length>0&&m.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl border-2 border-purple-200 p-4 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(o0,{className:"w-5 h-5 text-purple-600"}),m.jsx("h2",{className:"text-lg font-semibold text-purple-900",children:"Weight Adjustment Controls"})]}),m.jsx("p",{className:"text-purple-700 text-sm mb-3",children:'Click "View Stats & Weights" on any player to adjust drill weights and see real-time ranking changes.'}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[m.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:" Balanced"}),m.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:" Speed Focused"}),m.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full",children:" Skills Focused"}),m.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:" Athletic"})]})]}),x&&m.jsx(fk,{player:x,allPlayers:i,onClose:()=>_(null)}),E&&m.jsx(ck,{player:E,allPlayers:i,onClose:()=>A(null),onSave:Ee}),Object.keys(me).length===0?m.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center",children:m.jsx("p",{className:"text-gray-500",children:"No players found for this event."})}):Object.entries(me).sort(([ae],[he])=>ae.localeCompare(he)).map(([ae,he])=>{const ye=he.sort((be,Ne)=>be.composite_score!==Ne.composite_score?(Ne.composite_score||0)-(be.composite_score||0):be.name.localeCompare(Ne.name));return m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[" Age Group: ",ae]}),m.jsx("div",{className:"space-y-2",children:ye.map((be,Ne)=>m.jsxs(jg.Fragment,{children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[m.jsx("div",{className:"flex items-center justify-between mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:`font-bold text-lg ${Ne===0?"text-yellow-500":Ne===1?"text-gray-500":Ne===2?"text-orange-500":"text-gray-400"}`,children:Ne===0?"":Ne===1?"":Ne===2?"":`#${Ne+1}`}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900",children:be.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Player #",be.number||"N/A","  Score: ",be.composite_score!=null?be.composite_score.toFixed(2):"No scores yet"]})]})]})}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{onClick:()=>_(be),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-md text-sm font-medium transition",disabled:r!=="organizer"&&!be.composite_score&&!Object.values(be).some(Ge=>typeof Ge=="number"&&Ge>0),children:r==="organizer"?"View Stats & Weights":"View Stats"}),m.jsx("button",{onClick:()=>A(be),className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-md text-sm font-medium transition",children:"Edit"}),m.jsx("button",{onClick:()=>ue(be.id),className:"bg-cyan-100 hover:bg-cyan-200 text-cyan-700 px-3 py-1 rounded-md text-sm font-medium transition",children:"Add Result"})]})]}),p[be.id]&&m.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200 ml-4",children:m.jsx(lk,{playerId:be.id,onSuccess:()=>{ue(be.id),Ee()}})})]},be.id))})]},ae)})]}),N==="rankings"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[m.jsx(IM,{className:"w-5 h-5 text-cmf-primary"}),"Select Age Group"]}),m.jsxs("select",{value:V,onChange:ae=>F(ae.target.value),className:"w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",children:[m.jsx("option",{value:"",children:"Choose an age group to view rankings"}),q.map(ae=>m.jsx("option",{value:ae,children:ae},ae))]})]}),r==="organizer"&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx(o0,{className:"w-5 h-5 text-cmf-primary"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ranking Priorities"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Presets:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Wl).map(([ae,he])=>m.jsxs("button",{onClick:()=>ve(ae),className:`p-3 text-left rounded-lg border-2 transition-all ${Ie===ae?"border-cmf-primary bg-cmf-primary/5 text-cmf-primary":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[m.jsx("div",{className:"font-medium text-sm",children:he.name}),m.jsx("div",{className:"text-xs text-gray-500 mt-1",children:he.description})]},ae))})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Custom Adjustments:",Ie&&m.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Currently using ",Wl[Ie].name,")"]})]}),m.jsx("div",{className:"space-y-4",children:Ui.map(ae=>{const he=te();return m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:ae.label}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("input",{type:"range",min:0,max:100,value:he[ae.key],onChange:ye=>ne(ae.key,parseInt(ye.target.value)),className:"flex-1 accent-cmf-primary h-2 rounded-lg bg-gray-100"}),m.jsx("div",{className:"w-12 text-right",children:m.jsxs("span",{className:"text-sm font-mono text-cmf-primary",children:[he[ae.key],"%"]})})]})]})},ae.key)})}),m.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"Rankings update automatically as you adjust priorities"})]})]}),R?m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center",children:[m.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full mb-2"}),m.jsx("div",{className:"text-gray-500",children:"Updating rankings..."})]}):L?m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700",children:[m.jsx("strong",{children:"Error:"})," ",L]}):V===""?m.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6 text-center text-gray-500",children:" Please select an age group above to view rankings and adjust weights."}):W.length===0?m.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center text-yellow-700",children:["No players found for the ",m.jsx("strong",{children:V})," age group. Players may not have drill scores yet."]}):m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Rankings (",V,")"]}),m.jsx("button",{onClick:()=>{if(!V||W.length===0)return;let ae=`Rank,Name,Player Number,Composite Score
`;W.forEach(Wt=>{ae+=`${Wt.rank},"${Wt.name}",${Wt.number},${Wt.composite_score.toFixed(2)}
`});const he=n?new Date(n.date).toISOString().slice(0,10):"event",ye=`rankings_${V}_${he}.csv`,be=new Blob([ae],{type:"text/csv"}),Ne=URL.createObjectURL(be),Ge=document.createElement("a");Ge.href=Ne,Ge.download=ye,document.body.appendChild(Ge),Ge.click(),document.body.removeChild(Ge),URL.revokeObjectURL(Ne)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm",disabled:W.length===0,children:"Export as CSV"})]}),m.jsx("div",{className:"space-y-3",children:W.map(ae=>{const he={};return Ui.forEach(ye=>{const Ne=W.filter(Ge=>Ge[ye.key]!=null).map(Ge=>({player_id:Ge.player_id,score:Ge[ye.key]})).sort((Ge,Wt)=>ye.key==="40m_dash"?Ge.score-Wt.score:Wt.score-Ge.score).findIndex(Ge=>Ge.player_id===ae.player_id)+1;he[ye.key]=Ne>0?Ne:null}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[m.jsxs("div",{className:"flex justify-between items-start mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:`font-bold text-lg ${ae.rank===1?"text-yellow-500":ae.rank===2?"text-gray-500":ae.rank===3?"text-orange-500":"text-gray-400"}`,children:ae.rank===1?"":ae.rank===2?"":ae.rank===3?"":`#${ae.rank}`}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900",children:ae.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Player #",ae.number]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-xs text-gray-500",children:"Overall Score"}),m.jsx("div",{className:"font-mono font-bold text-lg text-cmf-primary",children:ae.composite_score.toFixed(2)})]})]}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2 text-xs",children:Ui.map(ye=>m.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[m.jsx("div",{className:"font-medium text-gray-700 mb-1",children:ye.label}),ae[ye.key]!=null?m.jsxs("div",{children:[m.jsx("div",{className:"font-mono text-sm",children:ae[ye.key]}),m.jsxs("div",{className:"text-xs text-gray-500",children:["#",he[ye.key]||"-"]})]}):m.jsx("span",{className:"text-gray-400",children:"No score"})]},ye.key))})]},ae.player_id)})})]})]}),N==="exports"&&m.jsxs(m.Fragment,{children:[Object.keys(me).length>0&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsx("div",{className:"flex justify-between items-center mb-4",children:m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[m.jsx(cC,{className:"w-5 h-5 text-cmf-primary"}),"Export Rankings by Age Group"]})}),m.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.keys(me).sort().map(ae=>{const he=me[ae].filter(be=>be.composite_score!=null),ye=()=>{if(he.length===0)return;let be=`Rank,Name,Player Number,Composite Score,40M Dash,Vertical Jump,Catching,Throwing,Agility
`;he.sort(($t,xr)=>(xr.composite_score||0)-($t.composite_score||0)).forEach(($t,xr)=>{be+=`${xr+1},"${$t.name}",${$t.number||"N/A"},${($t.composite_score||0).toFixed(2)},${$t["40m_dash"]||"N/A"},${$t.vertical_jump||"N/A"},${$t.catching||"N/A"},${$t.throwing||"N/A"},${$t.agility||"N/A"}
`});const Ne=n?new Date(n.date).toISOString().slice(0,10):"event",Ge=`rankings_${ae}_${Ne}.csv`,Wt=new Blob([be],{type:"text/csv"}),yr=URL.createObjectURL(Wt),ur=document.createElement("a");ur.href=yr,ur.download=Ge,document.body.appendChild(ur),ur.click(),document.body.removeChild(ur),URL.revokeObjectURL(yr)};return m.jsxs("button",{onClick:ye,disabled:he.length===0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-6 py-4 rounded-lg font-medium transition text-left flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"font-semibold",children:["Export ",ae," Rankings"]}),m.jsx("div",{className:"text-sm opacity-75",children:"Full rankings with drill scores"})]}),m.jsxs("div",{className:"text-sm opacity-75",children:["(",he.length," players)"]})]},ae)})}),Object.keys(me).length===0&&m.jsx("div",{className:"text-center py-8 text-gray-500",children:"No player data available for export. Upload players first."})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(Kv,{className:"w-5 h-5 text-cmf-primary"}),"Event Analytics"]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),m.jsx("div",{className:"text-sm text-blue-700",children:"Total Players"})]}),m.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-green-600",children:Object.keys(me).length}),m.jsx("div",{className:"text-sm text-green-700",children:"Age Groups"})]}),m.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.filter(ae=>ae.composite_score!=null).length}),m.jsx("div",{className:"text-sm text-purple-700",children:"With Scores"})]}),m.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[m.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(i.filter(ae=>ae.composite_score!=null).length/i.length*100),"%"]}),m.jsx("div",{className:"text-sm text-orange-700",children:"Completion"})]})]})]})]})]})})}var Pl={},Sm={exports:{}},Tm,bE;function hk(){if(bE)return Tm;bE=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Tm=n,Tm}var Cm,AE;function pk(){if(AE)return Cm;AE=1;var n=hk();function e(){}function t(){}return t.resetWarningCache=e,Cm=function(){function r(o,u,c,d,p,g){if(g!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Cm}var SE;function vC(){return SE||(SE=1,Sm.exports=pk()()),Sm.exports}var Im,TE;function yC(){return TE||(TE=1,Im={L:1,M:0,Q:3,H:2}),Im}var Nm,CE;function xC(){return CE||(CE=1,Nm={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Nm}var Rm,IE;function mk(){if(IE)return Rm;IE=1;var n=xC();function e(t){this.mode=n.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var r=0;r<this.data.length;r++)t.put(this.data.charCodeAt(r),8)}},Rm=e,Rm}var Om,NE;function gk(){if(NE)return Om;NE=1;var n=yC();function e(t,r){this.totalCount=t,this.dataCount=r}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,r){var i=e.getRsBlockTable(t,r);if(i==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+r);for(var a=i.length/3,o=new Array,u=0;u<a;u++)for(var c=i[u*3+0],d=i[u*3+1],p=i[u*3+2],g=0;g<c;g++)o.push(new e(d,p));return o},e.getRsBlockTable=function(t,r){switch(r){case n.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case n.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case n.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case n.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},Om=e,Om}var Dm,RE;function vk(){if(RE)return Dm;RE=1;function n(){this.buffer=new Array,this.length=0}return n.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Dm=n,Dm}var Pm,OE;function _C(){if(OE)return Pm;OE=1;for(var n={glog:function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)n.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)n.EXP_TABLE[e]=n.EXP_TABLE[e-4]^n.EXP_TABLE[e-5]^n.EXP_TABLE[e-6]^n.EXP_TABLE[e-8];for(var e=0;e<255;e++)n.LOG_TABLE[n.EXP_TABLE[e]]=e;return Pm=n,Pm}var Mm,DE;function wC(){if(DE)return Mm;DE=1;var n=_C();function e(t,r){if(t.length==null)throw new Error(t.length+"/"+r);for(var i=0;i<t.length&&t[i]==0;)i++;this.num=new Array(t.length-i+r);for(var a=0;a<t.length-i;a++)this.num[a]=t[a+i]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var r=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var a=0;a<t.getLength();a++)r[i+a]^=n.gexp(n.glog(this.get(i))+n.glog(t.get(a)));return new e(r,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var r=n.glog(this.get(0))-n.glog(t.get(0)),i=new Array(this.getLength()),a=0;a<this.getLength();a++)i[a]=this.get(a);for(var a=0;a<t.getLength();a++)i[a]^=n.gexp(n.glog(t.get(a))+r);return new e(i,0).mod(t)}},Mm=e,Mm}var km,PE;function yk(){if(PE)return km;PE=1;var n=xC(),e=wC(),t=_C(),r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var o=a<<10;i.getBCHDigit(o)-i.getBCHDigit(i.G15)>=0;)o^=i.G15<<i.getBCHDigit(o)-i.getBCHDigit(i.G15);return(a<<10|o)^i.G15_MASK},getBCHTypeNumber:function(a){for(var o=a<<12;i.getBCHDigit(o)-i.getBCHDigit(i.G18)>=0;)o^=i.G18<<i.getBCHDigit(o)-i.getBCHDigit(i.G18);return a<<12|o},getBCHDigit:function(a){for(var o=0;a!=0;)o++,a>>>=1;return o},getPatternPosition:function(a){return i.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,o,u){switch(a){case r.PATTERN000:return(o+u)%2==0;case r.PATTERN001:return o%2==0;case r.PATTERN010:return u%3==0;case r.PATTERN011:return(o+u)%3==0;case r.PATTERN100:return(Math.floor(o/2)+Math.floor(u/3))%2==0;case r.PATTERN101:return o*u%2+o*u%3==0;case r.PATTERN110:return(o*u%2+o*u%3)%2==0;case r.PATTERN111:return(o*u%3+(o+u)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var o=new e([1],0),u=0;u<a;u++)o=o.multiply(new e([1,t.gexp(u)],0));return o},getLengthInBits:function(a,o){if(1<=o&&o<10)switch(a){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(o<27)switch(a){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else if(o<41)switch(a){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}else throw new Error("type:"+o)},getLostPoint:function(a){for(var o=a.getModuleCount(),u=0,c=0;c<o;c++)for(var d=0;d<o;d++){for(var p=0,g=a.isDark(c,d),x=-1;x<=1;x++)if(!(c+x<0||o<=c+x))for(var _=-1;_<=1;_++)d+_<0||o<=d+_||x==0&&_==0||g==a.isDark(c+x,d+_)&&p++;p>5&&(u+=3+p-5)}for(var c=0;c<o-1;c++)for(var d=0;d<o-1;d++){var E=0;a.isDark(c,d)&&E++,a.isDark(c+1,d)&&E++,a.isDark(c,d+1)&&E++,a.isDark(c+1,d+1)&&E++,(E==0||E==4)&&(u+=3)}for(var c=0;c<o;c++)for(var d=0;d<o-6;d++)a.isDark(c,d)&&!a.isDark(c,d+1)&&a.isDark(c,d+2)&&a.isDark(c,d+3)&&a.isDark(c,d+4)&&!a.isDark(c,d+5)&&a.isDark(c,d+6)&&(u+=40);for(var d=0;d<o;d++)for(var c=0;c<o-6;c++)a.isDark(c,d)&&!a.isDark(c+1,d)&&a.isDark(c+2,d)&&a.isDark(c+3,d)&&a.isDark(c+4,d)&&!a.isDark(c+5,d)&&a.isDark(c+6,d)&&(u+=40);for(var A=0,d=0;d<o;d++)for(var c=0;c<o;c++)a.isDark(c,d)&&A++;var S=Math.abs(100*A/o/o-50)/5;return u+=S*10,u}};return km=i,km}var Lm,ME;function xk(){if(ME)return Lm;ME=1;var n=mk(),e=gk(),t=vk(),r=yk(),i=wC();function a(u,c){this.typeNumber=u,this.errorCorrectLevel=c,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var o=a.prototype;return o.addData=function(u){var c=new n(u);this.dataList.push(c),this.dataCache=null},o.isDark=function(u,c){if(u<0||this.moduleCount<=u||c<0||this.moduleCount<=c)throw new Error(u+","+c);return this.modules[u][c]},o.getModuleCount=function(){return this.moduleCount},o.make=function(){if(this.typeNumber<1){var u=1;for(u=1;u<40;u++){for(var c=e.getRSBlocks(u,this.errorCorrectLevel),d=new t,p=0,g=0;g<c.length;g++)p+=c[g].dataCount;for(var g=0;g<this.dataList.length;g++){var x=this.dataList[g];d.put(x.mode,4),d.put(x.getLength(),r.getLengthInBits(x.mode,u)),x.write(d)}if(d.getLengthInBits()<=p*8)break}this.typeNumber=u}this.makeImpl(!1,this.getBestMaskPattern())},o.makeImpl=function(u,c){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[d][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(u,c),this.typeNumber>=7&&this.setupTypeNumber(u),this.dataCache==null&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},o.setupPositionProbePattern=function(u,c){for(var d=-1;d<=7;d++)if(!(u+d<=-1||this.moduleCount<=u+d))for(var p=-1;p<=7;p++)c+p<=-1||this.moduleCount<=c+p||(0<=d&&d<=6&&(p==0||p==6)||0<=p&&p<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=p&&p<=4?this.modules[u+d][c+p]=!0:this.modules[u+d][c+p]=!1)},o.getBestMaskPattern=function(){for(var u=0,c=0,d=0;d<8;d++){this.makeImpl(!0,d);var p=r.getLostPoint(this);(d==0||u>p)&&(u=p,c=d)}return c},o.createMovieClip=function(u,c,d){var p=u.createEmptyMovieClip(c,d),g=1;this.make();for(var x=0;x<this.modules.length;x++)for(var _=x*g,E=0;E<this.modules[x].length;E++){var A=E*g,S=this.modules[x][E];S&&(p.beginFill(0,100),p.moveTo(A,_),p.lineTo(A+g,_),p.lineTo(A+g,_+g),p.lineTo(A,_+g),p.endFill())}return p},o.setupTimingPattern=function(){for(var u=8;u<this.moduleCount-8;u++)this.modules[u][6]==null&&(this.modules[u][6]=u%2==0);for(var c=8;c<this.moduleCount-8;c++)this.modules[6][c]==null&&(this.modules[6][c]=c%2==0)},o.setupPositionAdjustPattern=function(){for(var u=r.getPatternPosition(this.typeNumber),c=0;c<u.length;c++)for(var d=0;d<u.length;d++){var p=u[c],g=u[d];if(this.modules[p][g]==null)for(var x=-2;x<=2;x++)for(var _=-2;_<=2;_++)x==-2||x==2||_==-2||_==2||x==0&&_==0?this.modules[p+x][g+_]=!0:this.modules[p+x][g+_]=!1}},o.setupTypeNumber=function(u){for(var c=r.getBCHTypeNumber(this.typeNumber),d=0;d<18;d++){var p=!u&&(c>>d&1)==1;this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=p}for(var d=0;d<18;d++){var p=!u&&(c>>d&1)==1;this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=p}},o.setupTypeInfo=function(u,c){for(var d=this.errorCorrectLevel<<3|c,p=r.getBCHTypeInfo(d),g=0;g<15;g++){var x=!u&&(p>>g&1)==1;g<6?this.modules[g][8]=x:g<8?this.modules[g+1][8]=x:this.modules[this.moduleCount-15+g][8]=x}for(var g=0;g<15;g++){var x=!u&&(p>>g&1)==1;g<8?this.modules[8][this.moduleCount-g-1]=x:g<9?this.modules[8][15-g-1+1]=x:this.modules[8][15-g-1]=x}this.modules[this.moduleCount-8][8]=!u},o.mapData=function(u,c){for(var d=-1,p=this.moduleCount-1,g=7,x=0,_=this.moduleCount-1;_>0;_-=2)for(_==6&&_--;;){for(var E=0;E<2;E++)if(this.modules[p][_-E]==null){var A=!1;x<u.length&&(A=(u[x]>>>g&1)==1);var S=r.getMask(c,p,_-E);S&&(A=!A),this.modules[p][_-E]=A,g--,g==-1&&(x++,g=7)}if(p+=d,p<0||this.moduleCount<=p){p-=d,d=-d;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(u,c,d){for(var p=e.getRSBlocks(u,c),g=new t,x=0;x<d.length;x++){var _=d[x];g.put(_.mode,4),g.put(_.getLength(),r.getLengthInBits(_.mode,u)),_.write(g)}for(var E=0,x=0;x<p.length;x++)E+=p[x].dataCount;if(g.getLengthInBits()>E*8)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+E*8+")");for(g.getLengthInBits()+4<=E*8&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=E*8||(g.put(a.PAD0,8),g.getLengthInBits()>=E*8));)g.put(a.PAD1,8);return a.createBytes(g,p)},a.createBytes=function(u,c){for(var d=0,p=0,g=0,x=new Array(c.length),_=new Array(c.length),E=0;E<c.length;E++){var A=c[E].dataCount,S=c[E].totalCount-A;p=Math.max(p,A),g=Math.max(g,S),x[E]=new Array(A);for(var I=0;I<x[E].length;I++)x[E][I]=255&u.buffer[I+d];d+=A;var N=r.getErrorCorrectPolynomial(S),P=new i(x[E],N.getLength()-1),V=P.mod(N);_[E]=new Array(N.getLength()-1);for(var I=0;I<_[E].length;I++){var F=I+V.getLength()-_[E].length;_[E][I]=F>=0?V.get(F):0}}for(var W=0,I=0;I<c.length;I++)W+=c[I].totalCount;for(var D=new Array(W),R=0,I=0;I<p;I++)for(var E=0;E<c.length;E++)I<x[E].length&&(D[R++]=x[E][I]);for(var I=0;I<g;I++)for(var E=0;E<c.length;E++)I<_[E].length&&(D[R++]=_[E][I]);return D},Lm=a,Lm}var dh={},kE;function _k(){if(kE)return dh;kE=1,Object.defineProperty(dh,"__esModule",{value:!0});var n=Object.assign||function(d){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(d[x]=g[x])}return d},e=vC(),t=a(e),r=vf(),i=a(r);function a(d){return d&&d.__esModule?d:{default:d}}function o(d,p){var g={};for(var x in d)p.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(d,x)&&(g[x]=d[x]);return g}var u={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},c=(0,r.forwardRef)(function(d,p){var g=d.bgColor,x=d.bgD,_=d.fgD,E=d.fgColor,A=d.size,S=d.title,I=d.viewBoxSize,N=d.xmlns,P=N===void 0?"http://www.w3.org/2000/svg":N,V=o(d,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return i.default.createElement("svg",n({},V,{height:A,ref:p,viewBox:"0 0 "+I+" "+I,width:A,xmlns:P}),S?i.default.createElement("title",null,S):null,i.default.createElement("path",{d:x,fill:g}),i.default.createElement("path",{d:_,fill:E}))});return c.displayName="QRCodeSvg",c.propTypes=u,dh.default=c,dh}var LE;function wk(){if(LE)return Pl;LE=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.QRCode=void 0;var n=Object.assign||function(A){for(var S=1;S<arguments.length;S++){var I=arguments[S];for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&(A[N]=I[N])}return A},e=vC(),t=g(e),r=yC(),i=g(r),a=xk(),o=g(a),u=vf(),c=g(u),d=_k(),p=g(d);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,S){var I={};for(var N in A)S.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(A,N)&&(I[N]=A[N]);return I}var _={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},E=(0,u.forwardRef)(function(A,S){var I=A.bgColor,N=I===void 0?"#FFFFFF":I,P=A.fgColor,V=P===void 0?"#000000":P,F=A.level,W=F===void 0?"L":F,D=A.size,R=D===void 0?256:D,M=A.value,L=x(A,["bgColor","fgColor","level","size","value"]),H=new o.default(-1,i.default[W]);H.addData(M),H.make();var G=H.modules;return c.default.createElement(p.default,n({},L,{bgColor:N,bgD:G.map(function(U,Ie){return U.map(function(Be,te){return Be?"":"M "+te+" "+Ie+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:V,fgD:G.map(function(U,Ie){return U.map(function(Be,te){return Be?"M "+te+" "+Ie+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:S,size:R,viewBoxSize:G.length}))});return Pl.QRCode=E,E.displayName="QRCode",E.propTypes=_,Pl.default=E,Pl}var Ek=wk();const EC=xb(Ek);function bk({open:n,onClose:e,event:t,onUpdated:r}){const{selectedLeagueId:i}=pn(),{setSelectedEvent:a,setEvents:o}=za(),[u,c]=B.useState(""),[d,p]=B.useState(""),[g,x]=B.useState(""),[_,E]=B.useState(!1),[A,S]=B.useState("");if(B.useEffect(()=>{t&&(c(t.name||""),p(t.date||""),x(t.location||""))},[t]),!n||!t)return null;const I=async N=>{var P,V;N.preventDefault(),E(!0),S("");try{const F=d?new Date(d).toISOString().slice(0,10):"";await Zt.put(`/leagues/${i}/events/${t.id}`,{name:u,date:F,location:g});const W={...t,name:u,date:F,location:g,updated_at:new Date().toISOString()};o(D=>D.map(R=>R.id===t.id?W:R)),a(D=>D&&D.id===t.id?W:D),r&&r(W),e&&e()}catch(F){console.error("Event update error:",F),S(((V=(P=F.response)==null?void 0:P.data)==null?void 0:V.detail)||F.message||"Failed to update event")}finally{E(!1)}};return m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-sm relative",children:[m.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-400 hover:text-cmf-primary text-2xl font-bold",children:""}),m.jsx("h2",{className:"text-xl font-bold mb-4 text-cmf-primary",children:"Edit Event"}),m.jsxs("form",{onSubmit:I,children:[m.jsx("label",{className:"block mb-2 font-semibold",children:"Event Name"}),m.jsx("input",{type:"text",value:u,onChange:N=>c(N.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary",required:!0}),m.jsx("label",{className:"block mb-2 font-semibold",children:"Event Date"}),m.jsx("input",{type:"date",value:d,onChange:N=>p(N.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary",required:!0}),m.jsx("label",{className:"block mb-2 font-semibold",children:"Location"}),m.jsx("input",{type:"text",value:g,onChange:N=>x(N.target.value),placeholder:"e.g., Central Park Football Field",className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary"}),m.jsx("small",{className:"text-gray-500 text-xs mb-4 block",children:"Leave location blank if not determined yet"}),A&&m.jsx("div",{className:"text-red-500 mb-2 text-sm",children:A}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition disabled:opacity-50",disabled:_,children:_?"Updating...":"Update Event"}),m.jsx("button",{type:"button",onClick:e,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})}const jm=["first_name","last_name","age_group"],Ak=[["Jane","Smith","9-10"],["Alex","Lee","U12"],["Sam","Jones","6U"],["Maria","Garcia",""]];function Sk(n){const e=n.trim().split(/\r?\n/),t=e[0].split(",").map(i=>i.trim()),r=e.slice(1).map(i=>i.split(",").map(a=>a.trim()));return{headers:t,rows:r}}function Tk(n,e){const t=[],r={};return e.forEach((i,a)=>{r[i]=n[a]??""}),(!r.first_name||r.first_name.trim()==="")&&t.push("Missing first name"),(!r.last_name||r.last_name.trim()==="")&&t.push("Missing last name"),r.first_name&&r.last_name&&(r.name=`${r.first_name.trim()} ${r.last_name.trim()}`),{...r,warnings:t}}function Ck(){const{user:n,role:e,userRole:t,selectedLeagueId:r,leagues:i}=pn(),{selectedEvent:a}=za(),[o,u]=B.useState(""),[c,d]=B.useState("idle"),[p,g]=B.useState(""),[x,_]=B.useState([]),[E,A]=B.useState([]),[S,I]=B.useState([]),[N,P]=B.useState(""),[V,F]=B.useState("idle"),[W,D]=B.useState(""),[R,M]=B.useState(!1),[L,H]=B.useState({first_name:"",last_name:"",number:"",age_group:""}),[G,U]=B.useState([]),[Ie,Be]=B.useState("idle"),[te,ne]=B.useState(""),[ve,Ee]=B.useState(0),[q,ue]=B.useState(!1),me=B.useRef(),[de,ae]=B.useState(!1),he=i==null?void 0:i.find(Ce=>Ce.id===r),ye=(he==null?void 0:he.id)||"",be=ye?`https://woo-combine.com/join?code=${ye}`:"",[Ne,Ge]=B.useState(!1);B.useEffect(()=>{const Ce=()=>{if(window.location.hash==="#player-upload-section"){const et=document.getElementById("player-upload-section");et&&et.scrollIntoView({behavior:"smooth"})}};return Ce(),window.addEventListener("hashchange",Ce),()=>window.removeEventListener("hashchange",Ce)},[]),B.useEffect(()=>{},[t,a]);const Wt=async()=>{if(!(!a||!n||!r)){d("loading"),g("");try{await Zt.delete(`/players/reset?event_id=${a.id}`),d("success"),u("")}catch(Ce){d("error"),g(Ce.message||"Error during reset.")}}},yr=Ce=>{const et=Ce.target.files[0];if(!et)return;P(et.name);const Ut=new FileReader;Ut.onload=Fn=>{const _i=Fn.target.result,{headers:ut,rows:dt}=Sk(_i),Jn=[],mn=jm.filter(Fs=>!ut.some(Qi=>Qi.toLowerCase().trim()===Fs.toLowerCase()));mn.length>0&&Jn.push(`Missing required headers: ${mn.join(", ")}. Headers must include: ${jm.join(", ")}`);const Ho=dt.map(Fs=>Tk(Fs,ut));A(ut),_(Ho),I(Jn)},Ut.readAsText(et)},ur=S.length===0&&x.length>0&&x.some(Ce=>Ce.name&&Ce.name.trim()!==""),$t=B.useCallback(async()=>{var Ce;if(!(!a||!n||!r)){ue(!0);try{const{data:et}=await Zt.get(`/players?event_id=${a.id}`);Ee(Array.isArray(et)?et.length:0)}catch(et){((Ce=et.response)==null?void 0:Ce.status)===404||console.error("[AdminTools] Player count fetch error:",et),Ee(0)}finally{ue(!1)}}},[a,n,r]);B.useEffect(()=>{$t()},[a,n,r,$t]);const xr=()=>{$t()},Vs=async()=>{if(!a||!n||!r)return;F("loading"),D("");const Ce={event_id:a.id,players:x.map(et=>{const{warnings:Ut,...Fn}=et;return Fn})};try{const et=await Zt.post("/players/upload",Ce),{data:Ut}=et;Ut.errors&&Ut.errors.length>0?(F("error"),D("Some rows failed to upload. See errors below.")):(F("success"),D(` Upload successful! ${Ut.added} players added.`),_([]),A([]),P(""),xr())}catch(et){F("error"),D(` ${et.message||"Upload failed."}`)}},Yi=Ce=>{H({...L,[Ce.target.name]:Ce.target.value})},_r=()=>{const Ce=[];return(!L.first_name||L.first_name.trim()==="")&&Ce.push("Missing first name"),(!L.last_name||L.last_name.trim()==="")&&Ce.push("Missing last name"),L.number&&L.number.trim()!==""&&isNaN(Number(L.number))&&Ce.push("Invalid number"),Ce},wu=async Ce=>{Ce.preventDefault(),U([]),Be("idle"),ne("");const et=_r();if(et.length>0){U(et);return}Be("loading");try{const Ut={name:`${L.first_name.trim()} ${L.last_name.trim()}`,number:L.number&&L.number.trim()!==""?Number(L.number):null,age_group:L.age_group.trim()||null};await Zt.post(`/players?event_id=${a.id}`,Ut),Be("success"),ne("Player added!"),H({first_name:"",last_name:"",number:"",age_group:""}),xr()}catch(Ut){Be("error"),ne(Ut.message||"Failed to add player.")}},Us=()=>{let Ce=jm.join(",")+`
`;Ak.forEach(_i=>{Ce+=_i.join(",")+`
`});const et=new Blob([Ce],{type:"text/csv"}),Ut=URL.createObjectURL(et),Fn=document.createElement("a");Fn.href=Ut,Fn.download="sample_players.csv",document.body.appendChild(Fn),Fn.click(),document.body.removeChild(Fn),URL.revokeObjectURL(Ut)},Ki=()=>{_([]),A([]),I([]),P(""),F("idle"),D(""),me.current&&(me.current.value="")};return t!=="organizer"?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-red-200",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Pa,{className:"w-8 h-8 text-red-500"})}),m.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Admin Access Required"}),m.jsx("p",{className:"text-gray-600",children:"You do not have permission to view this page. Organizer access required."})]})})}):!a||!a.id?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Pa,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Event Selected"}),m.jsx("p",{className:"text-gray-600 mb-6",children:'Click on "Select Event" in the header above to choose an event before managing players.'}),m.jsx("button",{onClick:()=>window.location.href="/select-league",className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Select Event"})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-cmf-primary/30",children:[m.jsx("h1",{className:"text-2xl font-bold text-cmf-secondary mb-2",children:"Admin Tools"}),m.jsxs("p",{className:"text-gray-600 mb-4",children:["Managing: ",m.jsx("strong",{children:a.name})," - ",a.date&&!isNaN(Date.parse(a.date))?new Date(a.date).toLocaleDateString():"Invalid Date"]}),a&&m.jsx("div",{className:"bg-cmf-primary/10 rounded-lg p-4 border border-cmf-primary/20",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Pa,{className:"w-5 h-5 text-cmf-primary"}),m.jsx("span",{className:"text-cmf-primary font-semibold",children:q?m.jsx("span",{className:"animate-pulse",children:"Loading players..."}):`${ve} Players Uploaded`})]})})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Event Details"})]}),m.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Name:"})," ",a.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",a.date&&!isNaN(Date.parse(a.date))?new Date(a.date).toLocaleDateString():"Invalid Date"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Location:"})," ",a.location||"Location TBD"]})]})}),m.jsxs("button",{onClick:()=>Ge(!0),className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-medium px-4 py-2 rounded-lg transition flex items-center gap-2",children:[m.jsx(Qv,{className:"w-4 h-4"}),"Edit Event Details"]})]}),m.jsxs("div",{id:"player-upload-section",className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Players to Your Event"})]}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx("span",{className:"text-blue-600 text-sm",children:""})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-blue-800 font-medium text-sm mb-1",children:"Simplified Upload Process"}),m.jsx("p",{className:"text-blue-700 text-sm",children:"Only First Name, Last Name, and Age Group (optional) are needed. Drill results will be collected during your combine event using this program."})]})]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[m.jsxs("button",{onClick:Us,className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-medium px-4 py-3 rounded-xl transition flex items-center justify-center gap-2",children:[m.jsx(bm,{className:"w-5 h-5"}),"Sample CSV"]}),m.jsxs("button",{onClick:()=>M(Ce=>!Ce),className:"bg-cmf-secondary hover:bg-cmf-primary text-white font-medium px-4 py-3 rounded-xl transition flex items-center justify-center gap-2",children:[m.jsx(l0,{className:"w-5 h-5"}),"Add Manual"]})]}),m.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center bg-gray-50 hover:bg-gray-100 transition",children:[m.jsx(bm,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("input",{ref:me,type:"file",accept:".csv",onChange:yr,className:"hidden",id:"csv-upload"}),m.jsxs("label",{htmlFor:"csv-upload",className:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium px-6 py-3 rounded-lg cursor-pointer transition inline-flex items-center gap-2",children:[m.jsx(bm,{className:"w-4 h-4"}),"Choose CSV File"]})]}),N&&m.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[" ",N]}),S.length>0&&m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:[m.jsx("p",{className:"text-red-700 text-sm font-medium",children:" Upload Error"}),m.jsx("p",{className:"text-red-600 text-sm",children:S.join("; ")})]}),Array.isArray(x)&&x.length>0&&S.length===0&&m.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:[m.jsxs("h3",{className:"font-medium text-gray-900 mb-3",children:["Preview (",x.length," players)"]}),m.jsx("div",{className:"overflow-x-auto max-h-64",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),m.jsx("th",{className:"px-3 py-2 text-left",children:"#"}),Array.isArray(E)&&E.map(Ce=>m.jsx("th",{className:"px-3 py-2 text-left",children:Ce.replace(/_/g," ").replace(/\b\w/g,et=>et.toUpperCase())},Ce)),m.jsx("th",{className:"px-3 py-2 text-left",children:"Issues"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map((Ce,et)=>{const Ut=Ce.warnings.length>0,Fn=Ce.warnings.some(ut=>ut.includes("Missing first name")||ut.includes("Missing last name")),_i=Ce.name&&Ce.name.trim()!=="";return m.jsxs("tr",{className:Fn?"bg-red-50":Ut?"bg-yellow-50":"bg-green-50",children:[m.jsx("td",{className:"px-3 py-2 text-center",children:_i?"":""}),m.jsx("td",{className:"px-3 py-2 font-mono text-gray-500",children:et+1}),E.map(ut=>m.jsx("td",{className:"px-3 py-2",children:Ce[ut]},ut)),m.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:Ce.warnings.length>0?Ce.warnings.join(", "):"Valid"})]},et)})})]})})]}),Array.isArray(x)&&x.length>0&&m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsxs("button",{onClick:Ki,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition flex items-center gap-2",children:[m.jsx(_E,{className:"w-4 h-4"}),"Upload Different File"]}),m.jsx("button",{disabled:!ur||V==="loading",onClick:Vs,className:"bg-cmf-primary hover:bg-cmf-secondary disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium px-6 py-2 rounded-lg transition",children:V==="loading"?"Uploading...":"Confirm Upload"})]}),V==="success"&&m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-green-600 text-sm",children:""})}),m.jsx("p",{className:"text-green-800 font-medium",children:W})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("button",{onClick:Ki,className:"w-full bg-white border border-green-300 text-green-700 px-4 py-2 rounded-lg font-medium hover:bg-green-50 transition",children:" Upload More Players"}),m.jsx(lt,{to:"/players",className:"block w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition text-center",children:" View Players & Rankings"})]})]}),V==="error"&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:m.jsx("p",{className:"text-red-700 font-medium",children:W})})]}),R&&m.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mt-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(l0,{className:"w-5 h-5 text-cmf-primary"}),"Add Player Manually"]}),m.jsxs("form",{onSubmit:wu,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),m.jsx("input",{type:"text",name:"first_name",value:L.first_name,onChange:Yi,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter first name",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),m.jsx("input",{type:"text",name:"last_name",value:L.last_name,onChange:Yi,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter last name",required:!0})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Number"}),m.jsx("input",{type:"number",name:"number",value:L.number,onChange:Yi,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Optional",min:"1",max:"999"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Group"}),m.jsx("input",{type:"text",name:"age_group",value:L.age_group,onChange:Yi,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"e.g., 6U, 7-8, U10"})]})]}),G.length>0&&m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[m.jsx("p",{className:"text-red-700 text-sm font-medium",children:"Please fix the following:"}),m.jsx("ul",{className:"text-red-600 text-sm mt-1 list-disc list-inside",children:G.map((Ce,et)=>m.jsx("li",{children:Ce},et))})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>M(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 rounded-lg transition",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:Ie==="loading",className:"flex-1 bg-cmf-primary hover:bg-cmf-secondary disabled:opacity-50 text-white font-medium py-2 rounded-lg transition",children:Ie==="loading"?"Adding...":"Add Player"})]}),Ie==="success"&&m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[m.jsxs("p",{className:"text-green-700 font-medium",children:[" ",te]}),m.jsx(lt,{to:"/players",className:"inline-block mt-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition text-sm",children:"View All Players"})]}),Ie==="error"&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-red-700 font-medium",children:[" ",te]})})]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Invite Coaches"})]}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx("span",{className:"text-blue-600 text-sm",children:""})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-blue-800 font-medium text-sm mb-1",children:"Share Your Team"}),m.jsx("p",{className:"text-blue-700 text-sm",children:"Coaches can join using your team code or QR code to view player rankings and adjust weight priorities."})]})]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Invite Code"}),m.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-3 font-mono text-lg text-center",children:ye||"Loading..."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("button",{onClick:()=>navigator.clipboard.writeText(ye),className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-medium px-4 py-2 rounded-lg transition flex items-center justify-center gap-2",disabled:!ye,children:[m.jsx(uC,{className:"w-4 h-4"}),"Copy Code"]}),m.jsxs("button",{onClick:()=>ae(!de),className:"bg-cmf-secondary hover:bg-cmf-primary text-white font-medium px-4 py-2 rounded-lg transition flex items-center justify-center gap-2",children:[m.jsx(s0,{className:"w-4 h-4"}),"Show QR"]})]}),de&&m.jsxs("div",{className:"bg-white rounded-lg p-4 text-center border border-gray-200",children:[m.jsx(EC,{value:be,size:150,className:"mx-auto mb-2"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Coaches can scan this QR code to join"})]})]})}),m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-green-800 text-sm",children:[m.jsx("strong",{children:"Share with coaches:"})," They can join at woo-combine.com/join using your team code."]})})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Live Drill Entry"})]}),m.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx("span",{className:"text-green-600 text-sm",children:""})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-green-800 font-medium text-sm mb-1",children:"High-Speed Data Entry Mode"}),m.jsx("p",{className:"text-green-700 text-sm",children:"Optimized for live events - rapid player lookup, auto-focus, duplicate detection, and mobile-friendly interface for outdoor use."})]})]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:m.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[m.jsxs("p",{children:[" ",m.jsx("strong",{children:"5 Drill Types:"})," 40M Dash, Vertical Jump, Catching, Throwing, Agility"]}),m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Auto-Complete:"})," Type player number for instant lookup"]}),m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Smart Features:"})," Duplicate detection, undo functionality, recent entries"]}),m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Mobile Optimized:"})," Large touch targets, number pad inputs"]})]})}),m.jsx(lt,{to:"/live-entry",className:"block w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold px-6 py-4 rounded-xl transition text-center shadow-lg",children:" Start Live Entry Mode"}),ve>0&&m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-blue-800 text-sm",children:[m.jsx("strong",{children:"Ready to go!"})," ",ve," players uploaded. You can now begin entering drill results during your combine event."]})}),ve===0&&m.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-yellow-800 text-sm",children:[m.jsx("strong",{children:"Upload players first:"})," Add players in Step 2 before starting live drill entry."]})})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-gray-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"5"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Advanced Options"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[m.jsx(DM,{className:"w-4 h-4 text-gray-600"}),"Export & Share"]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(lt,{to:"/players",className:"block w-full bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded-lg transition text-center",children:" View Rankings & Export CSV"}),m.jsx("p",{className:"text-xs text-gray-600",children:"Access comprehensive rankings with weight adjustments and CSV export functionality."})]})]}),m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[m.jsxs("h3",{className:"font-medium text-red-800 mb-2 flex items-center gap-2",children:[m.jsx(_E,{className:"w-4 h-4 text-red-600"}),"Reset Event Data"]}),m.jsx("p",{className:"text-red-700 text-sm mb-3",children:" This will permanently delete all player data for this event. Use only for testing or starting over."}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{type:"text",value:o,onChange:Ce=>u(Ce.target.value),placeholder:"Type 'RESET' to confirm",className:"w-full border border-red-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),m.jsx("button",{onClick:Wt,disabled:o!=="RESET"||c==="loading",className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-2 rounded-lg transition",children:c==="loading"?"Resetting...":"Reset All Event Data"}),c==="success"&&m.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 py-2 rounded text-sm",children:" Event data has been reset successfully."}),c==="error"&&m.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:[" ",p]})]})]})]})]}),Ne&&m.jsx(bk,{event:a,onClose:()=>Ge(!1),onSave:()=>{Ge(!1)}})]})})}function Ik(){const[n,e]=B.useState(""),[t,r]=B.useState(""),[i,a]=B.useState(!1),[o,u]=B.useState(""),[c,d]=B.useState(!1),{loading:p}=pn(),g=Un(),x=async _=>{_.preventDefault(),u(""),d(!0);try{const E=await DA(Bt,n,t);await E.user.reload(),E.user.emailVerified||g("/verify-email")}catch(E){E.code==="auth/invalid-credential"?u("Account not found. Please sign up before logging in."):E.code==="auth/user-not-found"||E.code==="auth/wrong-password"?u("Invalid email or password."):u("Login failed. Please try again.")}finally{d(!1)}};return p?m.jsx("div",{children:"Loading..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"w-full flex flex-row justify-between items-center mb-6 px-2",children:[m.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none",type:"button","aria-label":"Back to welcome",onClick:()=>g("/welcome"),children:m.jsx(Pf,{size:20})}),m.jsx(lt,{to:"/help",className:"text-xs text-cyan-700 hover:underline font-semibold",children:"Need Help?"})]}),m.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Welcome Back"}),m.jsxs("form",{onSubmit:x,className:"w-full flex flex-col items-center",children:[m.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:_=>e(_.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"email",required:!0}),m.jsxs("div",{className:"relative w-full mb-6",children:[m.jsx("input",{type:i?"text":"password",placeholder:"Password",value:t,onChange:_=>r(_.target.value),className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition pr-12",autoComplete:"current-password",required:!0}),m.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-cyan-700 hover:text-cyan-900",tabIndex:-1,onClick:()=>a(_=>!_),"aria-label":i?"Hide password":"Show password",children:i?m.jsx(fC,{size:22}):m.jsx(dC,{size:22})})]}),o&&m.jsx("div",{className:"text-red-500 mb-4 text-sm w-full text-center",children:o}),m.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold px-6 py-3 rounded-full shadow transition mb-4",disabled:c,children:c?"Signing in...":"Sign In"}),m.jsxs("div",{className:"w-full flex flex-col gap-2 mt-2 text-center",children:[m.jsxs("span",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",m.jsx(lt,{to:"/signup",className:"text-cyan-700 font-semibold hover:underline",children:"Let's Get Started"})]}),m.jsx("span",{className:"text-sm",children:m.jsx(lt,{to:"/forgot-password",className:"text-cyan-700 hover:underline",children:"Forgot password?"})})]})]})]})}function Nk(){return m.jsx(ri,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(Ik,{})})})}const Rk="modulepreload",Ok=function(n){return"/"+n},jE={},Dk=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=o(t.map(d=>{if(d=Ok(d),d in jE)return;jE[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Rk,p||(x.as="script"),x.crossOrigin="",x.href=d,c&&x.setAttribute("nonce",c),document.head.appendChild(x),p)return new Promise((_,E)=>{x.addEventListener("load",_),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function Pk(){const[n,e]=B.useState(""),[t,r]=B.useState(""),[i,a]=B.useState(""),[o,u]=B.useState(""),[c,d]=B.useState(!1),[p,g]=B.useState(""),[x,_]=B.useState(!1),{user:E,loading:A,error:S}=pn(),I=Un(),N=async P=>{P.preventDefault(),g(""),_(!0);try{const V=await OA(Bt,i,o);if(V.user)try{await Dk(()=>Promise.resolve().then(()=>t5),[]).then(F=>F.sendEmailVerification(V.user))}catch(F){console.error("Failed to send verification email:",F)}I("/verify-email")}catch(V){g(V.message),console.error("Signup error:",V)}finally{_(!1)}};return A?m.jsx("div",{children:"Loading..."}):m.jsxs("div",{className:"w-full max-w-md flex flex-col items-center relative",children:[m.jsx("button",{className:"absolute left-4 top-4 w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none z-10",type:"button","aria-label":"Back to welcome",onClick:()=>I("/welcome"),style:{left:0,top:0,position:"absolute"},children:m.jsx(Pf,{size:20})}),m.jsx(lt,{to:"/help",className:"absolute right-4 top-4 text-xs text-cyan-700 hover:underline font-semibold",style:{right:0,top:0,position:"absolute"},children:"Need Help?"}),m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-20 h-20 mx-auto mb-4 mt-8",style:{objectFit:"contain"}}),m.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Let's Get Started"}),m.jsxs("form",{onSubmit:N,className:"w-full flex flex-col items-center",children:[m.jsxs("div",{className:"flex flex-row gap-4 w-full mb-6 min-w-0",children:[m.jsx("input",{type:"text",placeholder:"First Name",value:n,onChange:P=>e(P.target.value),className:"flex-1 min-w-0 box-border px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"given-name",required:!0}),m.jsx("input",{type:"text",placeholder:"Last Name",value:t,onChange:P=>r(P.target.value),className:"flex-1 min-w-0 box-border px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"family-name",required:!0})]}),m.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:P=>a(P.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"email",required:!0}),m.jsxs("div",{className:"relative w-full mb-6",children:[m.jsx("input",{type:c?"text":"password",placeholder:"Create Password",value:o,onChange:P=>u(P.target.value),className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition pr-12",autoComplete:"new-password",required:!0}),m.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-cyan-700 hover:text-cyan-900",tabIndex:-1,onClick:()=>d(P=>!P),"aria-label":c?"Hide password":"Show password",children:c?m.jsx(fC,{size:22}):m.jsx(dC,{size:22})})]}),p&&m.jsx("div",{className:"text-red-500 mb-4 text-sm",children:p}),S&&m.jsx("div",{className:"text-red-500 mb-4 text-sm",children:S.message}),m.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold py-3 rounded-full shadow transition mb-4",disabled:x,children:x?"Signing up...":"Sign Up"}),m.jsxs("div",{className:"text-xs text-gray-500 text-center mb-2",children:["By signing up for Woo-Combine, you agree to our"," ",m.jsx(lt,{to:"/terms",className:"underline hover:text-cyan-700",children:"Terms & Conditions"})," and"," ",m.jsx(lt,{to:"/privacy",className:"underline hover:text-cyan-700",children:"Privacy Policy"}),"."]})]})]})}function Mk(){return m.jsx(ri,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(Pk,{})})})}function kk(){const[n,e]=B.useState(""),[t,r]=B.useState(""),[i,a]=B.useState(!1),[o,u]=B.useState(!1),c=Un(),d=async p=>{p.preventDefault(),r(""),a(!0);try{await NA(Bt,n),u(!0)}catch(g){g.code==="auth/user-not-found"?r("No account found with that email."):g.code==="auth/invalid-email"?r("Please enter a valid email address."):r(g.message)}finally{a(!1)}};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"w-full flex flex-row justify-between items-center mb-6 px-2",children:[m.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none",type:"button","aria-label":"Back to login",onClick:()=>c("/login"),children:m.jsx(Pf,{size:20})}),m.jsx(lt,{to:"/help",className:"text-xs text-cyan-700 hover:underline font-semibold",children:"Need Help?"})]}),m.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Reset Password"}),o?m.jsx("div",{className:"w-full text-center text-green-700 font-semibold mb-4",children:"Check your email for a password reset link."}):m.jsxs("form",{onSubmit:d,className:"w-full flex flex-col items-center",children:[m.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:p=>e(p.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",required:!0}),t&&m.jsx("div",{className:"text-red-500 mb-4 text-sm w-full text-center",children:t}),m.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold px-6 py-3 rounded-full shadow transition mb-4",disabled:i,children:i?"Sending...":"Send Reset Email"})]}),m.jsxs("div",{className:"w-full flex flex-col gap-2 mt-2 text-center",children:[m.jsxs("span",{className:"text-sm text-gray-600",children:["Remembered your password?"," ",m.jsx(lt,{to:"/login",className:"text-cyan-700 font-semibold hover:underline",children:"Back to Login"})]}),m.jsx("span",{className:"text-sm",children:m.jsx(lt,{to:"/signup",className:"text-cyan-700 hover:underline",children:"Don't have an account? Let's Get Started"})})]})]})}function Lk(){const n=m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-white/80 text-base",children:[m.jsxs(lt,{to:"/login",className:"hover:underline",children:["Back to ",m.jsx("span",{className:"font-semibold text-white",children:"Login"})]}),m.jsx("span",{className:"hidden sm:inline",children:""}),m.jsxs(lt,{to:"/signup",className:"hover:underline",children:["Don't have an account? ",m.jsx("span",{className:"font-semibold text-white",children:"Let's Get Started"})]})]});return m.jsx(ri,{footerLinks:n,contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(kk,{})})})}const hh=[{key:"40m_dash",label:"40M Dash",unit:"sec",lowerIsBetter:!0},{key:"vertical_jump",label:"Vertical Jump",unit:"in",lowerIsBetter:!1},{key:"catching",label:"Catching",unit:"pts",lowerIsBetter:!1},{key:"throwing",label:"Throwing",unit:"pts",lowerIsBetter:!1},{key:"agility",label:"Agility",unit:"pts",lowerIsBetter:!1}];function jk(){const{selectedEvent:n}=za(),{user:e}=pn(),[t,r]=B.useState(""),[i,a]=B.useState(""),[o,u]=B.useState(""),[c,d]=B.useState(""),[p,g]=B.useState(""),[x,_]=B.useState(!1),[E,A]=B.useState([]),[S,I]=B.useState([]),[N,P]=B.useState([]),[V,F]=B.useState(null),[W,D]=B.useState(!1),R=B.useRef(null),M=B.useRef(null);B.useEffect(()=>{n&&L()},[n]);const L=async()=>{try{const ne=await Zt.get(`/players?event_id=${n.id}`);A(ne.data)}catch(ne){console.error("Error fetching players:",ne)}};B.useEffect(()=>{if(i&&E.length>0){const ne=E.filter(Ee=>Ee.number&&Ee.number.toString().startsWith(i));I(ne);const ve=E.find(Ee=>Ee.number&&Ee.number.toString()===i);ve?(u(ve.name),d(ve.id)):(u(""),d(""))}else I([]),u(""),d("")},[i,E]);const H=B.useCallback((ne,ve)=>{const Ee=E.find(q=>q.id===ne);return Ee&&Ee[ve]!=null?{existingScore:Ee[ve],playerName:Ee.name,drill:hh.find(q=>q.key===ve)}:null},[E]),G=async ne=>{if(ne.preventDefault(),!t||!c||!p)return;const ve=H(c,t);if(ve){F({...ve,newScore:parseFloat(p)}),D(!0);return}await U()},U=async(ne=!1)=>{_(!0);try{await Zt.post("/drill-results/",{player_id:c,type:t,value:parseFloat(p),event_id:n.id});const ve={id:Date.now(),playerNumber:i,playerName:o,drill:hh.find(Ee=>Ee.key===t),score:parseFloat(p),timestamp:new Date,overridden:ne};P(Ee=>[ve,...Ee.slice(0,9)]),a(""),g(""),D(!1),F(null),await L(),setTimeout(()=>{var Ee;(Ee=R.current)==null||Ee.focus()},100)}catch(ve){console.error("Error submitting score:",ve),alert("Error submitting score. Please try again.")}finally{_(!1)}},Ie=async()=>{if(N.length===0)return;const ne=N[0];confirm(`Undo entry for ${ne.playerName}?`)&&P(ve=>ve.slice(1))},Be=ne=>{a(ne.number.toString()),u(ne.name),d(ne.id),I([]),setTimeout(()=>{var ve;(ve=M.current)==null||ve.focus()},100)};if(!n)return m.jsx("div",{className:"min-h-screen bg-gray-50 p-4 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Event Selected"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Please select an event first."}),m.jsx(lt,{to:"/dashboard",className:"bg-blue-500 text-white px-6 py-3 rounded-lg",children:"Go to Dashboard"})]})});const te=hh.find(ne=>ne.key===t);return m.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[m.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-3",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(lt,{to:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:m.jsx(Pf,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Live Entry Mode"}),m.jsx("p",{className:"text-sm text-gray-600",children:n.name})]})]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[m.jsx(lC,{className:"w-4 h-4"}),N.length," entries"]})]})}),m.jsx("div",{className:"max-w-lg mx-auto p-4 space-y-6",children:t?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-blue-500 text-white rounded-xl p-4 text-center",children:[m.jsx("h2",{className:"text-xl font-bold",children:te.label}),m.jsx("p",{className:"text-blue-100",children:"Entry Mode Active"}),m.jsx("button",{onClick:()=>r(""),className:"mt-2 text-blue-200 hover:text-white text-sm underline",children:"Change Drill"})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:m.jsxs("form",{onSubmit:G,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Number"}),m.jsx("input",{ref:R,type:"number",value:i,onChange:ne=>a(ne.target.value),placeholder:"Enter player #",className:"w-full text-2xl p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-center",autoFocus:!0,required:!0}),S.length>0&&m.jsx("div",{className:"mt-2 bg-gray-50 border border-gray-200 rounded-lg max-h-40 overflow-y-auto",children:S.slice(0,5).map(ne=>m.jsxs("button",{type:"button",onClick:()=>Be(ne),className:"w-full p-3 text-left hover:bg-blue-50 border-b border-gray-200 last:border-b-0",children:[m.jsxs("div",{className:"font-medium",children:["#",ne.number," - ",ne.name]}),m.jsx("div",{className:"text-sm text-gray-600",children:ne.age_group})]},ne.id))})]}),o&&m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(vM,{className:"w-5 h-5 text-green-600"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-green-900",children:o}),m.jsxs("div",{className:"text-sm text-green-700",children:["Player #",i]})]})]})}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Score (",te.unit,")"]}),m.jsx("input",{ref:M,type:"number",step:"0.1",value:p,onChange:ne=>g(ne.target.value),placeholder:`Enter ${te.unit}`,className:"w-full text-3xl p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-center",required:!0})]}),m.jsx("button",{type:"submit",disabled:x||!c||!p,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-bold text-xl py-4 rounded-lg transition",children:x?"Saving...":"Submit & Next"})]})}),N.length>0&&m.jsxs("button",{onClick:Ie,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 rounded-lg flex items-center justify-center gap-2",children:[m.jsx($M,{className:"w-5 h-5"}),"Undo Last Entry"]}),N.length>0&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[m.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[m.jsx(Pa,{className:"w-4 h-4"}),"Recent Entries"]}),m.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:N.map(ne=>m.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"font-medium",children:["#",ne.playerNumber," ",ne.playerName]}),m.jsxs("div",{className:"text-sm text-gray-600",children:[ne.drill.label,": ",ne.score," ",ne.drill.unit,ne.overridden&&m.jsx("span",{className:"text-orange-600 ml-1",children:"(Updated)"})]})]}),m.jsx("div",{className:"text-xs text-gray-500",children:ne.timestamp.toLocaleTimeString()})]},ne.id))})]})]}):m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Select Drill"}),m.jsx("div",{className:"grid grid-cols-1 gap-3",children:hh.map(ne=>m.jsxs("button",{onClick:()=>r(ne.key),className:"p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-left transition",children:[m.jsx("div",{className:"font-semibold text-gray-900",children:ne.label}),m.jsxs("div",{className:"text-sm text-gray-600",children:["Unit: ",ne.unit]})]},ne.key))})]})}),W&&V&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(XM,{className:"w-6 h-6 text-orange-500"}),m.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Existing Score Found"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("p",{className:"text-gray-700 mb-2",children:[m.jsx("strong",{children:V.playerName})," already has a ",V.drill.label," score:"]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[m.jsxs("div",{className:"text-lg font-medium",children:["Current: ",V.existingScore," ",V.drill.unit]}),m.jsxs("div",{className:"text-lg font-medium text-blue-600",children:["New: ",V.newScore," ",V.drill.unit]})]})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>D(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-lg",children:"Keep Current"}),m.jsx("button",{onClick:()=>U(!0),className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 rounded-lg",children:"Replace Score"})]})]})})]})}function ba({children:n}){const{user:e,loading:t,roleChecking:r,userRole:i}=pn(),a=yi();return t||r?m.jsx(W0,{title:"Verifying access...",subtitle:"Checking your authentication",size:"large"}):e?e.emailVerified?e.emailVerified&&!i&&a.pathname!=="/select-role"?m.jsx(Bi,{to:"/select-role",replace:!0}):n:m.jsx(Bi,{to:"/verify-email",replace:!0}):m.jsx(Bi,{to:"/welcome",replace:!0})}function Bk({onCreated:n}){const{user:e,addLeague:t}=pn(),r=Un(),[i,a]=B.useState(""),[o,u]=B.useState(!1),[c,d]=B.useState(""),p=async g=>{g.preventDefault(),u(!0),d("");try{const{data:x}=await Zt.post("/leagues",{name:i,user_id:e==null?void 0:e.uid,email:e==null?void 0:e.email});t&&t({id:x.league_id,name:i,role:"organizer"}),n&&n(x.league_id),r("/onboarding/event")}catch(x){d(x.message||"Error creating league")}finally{u(!1)}};return m.jsxs("div",{className:"w-full max-w-md text-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Create a New Event"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Create your event and start evaluating players."}),m.jsxs("form",{onSubmit:p,className:"space-y-4",children:[m.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-cmf-primary/30 rounded-xl focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary transition",placeholder:"Event Name",value:i,onChange:g=>a(g.target.value),required:!0}),m.jsx("button",{type:"submit",className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",disabled:o,children:o?"Creating...":"Create Event & Continue"}),c&&m.jsx("div",{className:"text-red-500 text-sm mt-2",children:c})]})]})}function Vk(){return m.jsx(ri,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(Bk,{})})})}function Uk(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function Fk(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Hk=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zk=function(n){Hk(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Uk(a,i.prototype),Fk(a),a}return e}(Error),Gk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rr=function(n){Gk(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(zk),qk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rn=function(n){qk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Rr),Xk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oe=function(n){Xk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Rr),bC=function(){function n(e){if(this.binarizer=e,e===null)throw new Oe("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Wk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hn=function(n){Wk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Rr),$k=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Rt=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Yk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zv=function(n){Yk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Rr),Kk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BE=function(n){Kk(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(Zv),Qk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tn=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Oe("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new BE(t);if(r>e)throw new BE(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=Qk(e),o=a.next();!o.done;o=a.next()){var u=o.value;i=31*i+u}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Rt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,u=r(t,e[o]);if(u>0)i=o+1;else if(u<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),Ye=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Bn=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Rt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var u=i*32+Ye.numberOfTrailingZeros(a);return u>t?t:u},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var u=i*32+Ye.numberOfTrailingZeros(a);return u>t?t:u},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Oe;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var u=o>r?0:e&31,c=o<i?31:t&31,d=(2<<c)-(1<<u);a[o]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Oe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,u=i;u<=a;u++){var c=u>i?0:e&31,d=u<a?31:t&31,p=(2<<d)-(1<<c)&4294967295;if((o[u]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Oe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Oe("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,u=0;u<8;u++)this.get(e)&&(o|=1<<7-u),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var u=r*32-this.size,c=e[0]>>>u,a=1;a<r;a++){var d=e[a];c|=d<<32-u,e[a-1]=c,c=d>>>u}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Tn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Tn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),Cg;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Cg||(Cg={}));const Ot=Cg;var Zk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_e=function(n){Zk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Rr),Jk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(wt||(wt={}));var An=function(){function n(e,t,r){for(var i,a,o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,p=c.length;d!==p;d++){var g=c[d];n.VALUES_TO_ECI.set(g,this)}try{for(var x=Jk(o),_=x.next();!_.done;_=x.next()){var E=_.value;n.NAME_TO_ECI.set(E,this)}}catch(A){i={error:A}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new _e("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new _e("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new _e("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(wt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(wt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(wt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(wt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(wt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(wt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(wt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(wt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(wt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(wt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(wt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(wt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(wt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(wt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(wt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(wt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(wt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(wt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(wt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(wt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(wt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(wt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(wt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(wt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(wt.Big5,28,"Big5"),n.GB18030=new n(wt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(wt.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),eL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ph=function(n){eL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Rr),ti=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof An?e:An.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var u=e[a].toString(16);u.length<2&&(u="0"+u),i+="%"+u}return decodeURIComponent(i)}if(r.equals(An.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ph("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(An.UTF8)||e.equals(An.ISO8859_1)||e.equals(An.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),at=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return ti.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Ot.CHARACTER_SET)!==void 0)return t.get(Ot.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,u=0,c=0,d=0,p=0,g=0,x=0,_=0,E=0,A=0,S=0,I=0,N=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,P=0;P<r&&(i||a||o);P++){var V=e[P]&255;o&&(u>0?(V&128)===0?o=!1:u--:(V&128)!==0&&((V&64)===0?o=!1:(u++,(V&32)===0?c++:(u++,(V&16)===0?d++:(u++,(V&8)===0?p++:o=!1))))),i&&(V>127&&V<160?i=!1:V>159&&(V<192||V===215||V===247)&&I++),a&&(g>0?V<64||V===127||V>252?a=!1:g--:V===128||V===160||V>239?a=!1:V>160&&V<224?(x++,E=0,_++,_>A&&(A=_)):V>127?(g++,_=0,E++,E>S&&(S=E)):(_=0,E=0))}return o&&u>0&&(o=!1),a&&g>0&&(a=!1),o&&(N||c+d+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||A>=3||S>=3)?n.SHIFT_JIS:i&&a?A===2&&x===2||I*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(u,c,d,p,g,x){if(u==="%%")return"%";if(t[++i]!==void 0){u=p?parseInt(p.substr(1)):void 0;var _=g?parseInt(g.substr(1)):void 0,E;switch(x){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(u);break;case"p":E=parseFloat(t[i]).toPrecision(u);break;case"e":E=parseFloat(t[i]).toExponential(u);break;case"x":E=parseInt(t[i]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[i],_||10).toPrecision(u)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var A=parseInt(d),S=d&&d[0]+""=="0"?"0":" ";E.length<A;)E=c!==void 0?E+S:S+E;return E}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return ti.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=An.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=An.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=An.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Xe=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=at.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),$i=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Oe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],u=0;u<r;u++)o[u]&&i.set(u,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Oe("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,u=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>o){if(u===-1)u=a-o;else if(a-o!==u)throw new Oe("row lengths do not match");o=a,c++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Oe("illegal character encountered: "+e.substring(d));if(a>o){if(u===-1)u=a-o;else if(a-o!==u)throw new Oe("row lengths do not match");c++}for(var p=new n(u,c),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%u),Math.floor(g/u));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Oe("input matrix dimensions do not match");for(var t=new Bn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var u=a*r,c=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[u+d]^=c[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Oe("Left and top must be nonnegative");if(i<1||r<1)throw new Oe("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Oe("The region must fit inside the matrix");for(var u=this.rowSize,c=this.bits,d=t;d<o;d++)for(var p=d*u,g=e;g<a;g++)c[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Bn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Rt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Bn(e),i=new Bn(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,u=-1,c=-1,d=0;d<t;d++)for(var p=0;p<r;p++){var g=i[d*r+p];if(g!==0){if(d<o&&(o=d),d>c&&(c=d),p*32<a){for(var x=0;(g<<31-x&4294967295)===0;)x++;p*32+x<a&&(a=p*32+x)}if(p*32+31>u){for(var x=31;!(g>>>x);)x--;p*32+x>u&&(u=p*32+x)}}}return u<a||c<o?null:Int32Array.from([a,o,u-a+1,c-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],u=0;(o<<31-u&4294967295)===0;)u++;return a+=u,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],u=31;!(o>>>u);)u--;return a+=u,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Tn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Tn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Xe,a=0,o=this.height;a<o;a++){for(var u=0,c=this.width;u<c;u++)i.append(this.get(u,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),tL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),se=function(n){tL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Rr),nL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rL=function(n){nL(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Bn(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),u=this.buckets,c=0;c<a;c++)u[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(u);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<d&&r.set(c);else for(var p=o[0]&255,g=o[1]&255,c=1;c<a-1;c++){var x=o[c+1]&255;(g*4-p-x)/2<d&&r.set(c),p=g,g=x}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new $i(r,i);this.initArrays(r);for(var o=this.buckets,u=1;u<5;u++)for(var c=Math.floor(i*u/5),d=t.getRow(c,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var x=d[g]&255;o[x>>e.LUMINANCE_SHIFT]++}for(var _=e.estimateBlackPoint(o),E=t.getMatrix(),u=0;u<i;u++)for(var A=u*r,g=0;g<r;g++){var x=E[A+g]&255;x<_&&a.set(g,u)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,u=0;u<r;u++)t[u]>o&&(a=u,o=t[u]),t[u]>i&&(i=t[u]);for(var c=0,d=0,u=0;u<r;u++){var p=u-a,g=t[u]*p*p;g>d&&(c=u,d=g)}if(a>c){var x=a;a=c,c=x}if(c-a<=r/16)throw new se;for(var _=c-1,E=-1,u=c-1;u>a;u--){var A=u-a,g=A*A*(c-u)*(i-t[u]);g>E&&(_=u,E=g)}return _<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}($k),iL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AC=function(n){iL(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var u=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&u++;var c=e.calculateBlackPoints(a,o,u,r,i),d=new $i(r,i);e.calculateThresholdForBlock(a,o,u,r,i,c,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,u,c){for(var d=o-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,g=0;g<i;g++){var x=g<<e.BLOCK_SIZE_POWER;x>d&&(x=d);for(var _=e.cap(g,2,i-3),E=0;E<r;E++){var A=E<<e.BLOCK_SIZE_POWER;A>p&&(A=p);for(var S=e.cap(E,2,r-3),I=0,N=-2;N<=2;N++){var P=u[_+N];I+=P[S-2]+P[S-1]+P[S]+P[S+1]+P[S+2]}var V=I/25;e.thresholdBlock(t,A,x,V,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,u){for(var c=0,d=i*o+r;c<e.BLOCK_SIZE;c++,d+=o)for(var p=0;p<e.BLOCK_SIZE;p++)(t[d+p]&255)<=a&&u.set(r+p,i+c)},e.calculateBlackPoints=function(t,r,i,a,o){for(var u=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),p=0;p<i;p++){d[p]=new Int32Array(r);var g=p<<e.BLOCK_SIZE_POWER;g>u&&(g=u);for(var x=0;x<r;x++){var _=x<<e.BLOCK_SIZE_POWER;_>c&&(_=c);for(var E=0,A=255,S=0,I=0,N=g*a+_;I<e.BLOCK_SIZE;I++,N+=a){for(var P=0;P<e.BLOCK_SIZE;P++){var V=t[N+P]&255;E+=V,V<A&&(A=V),V>S&&(S=V)}if(S-A>e.MIN_DYNAMIC_RANGE)for(I++,N+=a;I<e.BLOCK_SIZE;I++,N+=a)for(var P=0;P<e.BLOCK_SIZE;P++)E+=t[N+P]&255}var F=E>>e.BLOCK_SIZE_POWER*2;if(S-A<=e.MIN_DYNAMIC_RANGE&&(F=A/2,p>0&&x>0)){var W=(d[p-1][x]+2*d[p][x-1]+d[p-1][x-1])/4;A<W&&(F=W)}d[p][x]=F}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(rL),kf=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Ph("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Ph("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Ph("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Xe,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,u=void 0;o<64?u="#":o<128?u="+":o<192?u=".":u=" ",t.append(u)}t.append(`
`)}return t.toString()},n}(),aL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$0=function(n){aL(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(kf),sL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oL=function(n){sL(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var u=0,c=0,d=t.length;u<d;u+=4,c++){var p=void 0,g=t[u+3];if(g===0)p=255;else{var x=t[u],_=t[u+1],E=t[u+2];p=306*x+601*_+117*E+512>>10}o[c]=p}else for(var u=0,c=0,A=t.length;u<A;u+=4,c++){var p=void 0,g=t[u+3];if(g===0)p=255;else{var x=t[u],_=t[u+1],E=t[u+2];p=306*x+601*_+117*E+512>>10}o[c]=255-p}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Oe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,u=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*u),d=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*u);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,o/-2,u/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new $0(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(kf),lL=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),pr=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function u(p){try{d(r.next(p))}catch(g){o(g)}}function c(p){try{d(r.throw(p))}catch(g){o(g)}}function d(p){p.done?a(p.value):i(p.value).then(u,c)}d((r=r.apply(n,e||[])).next())})},mr=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(p){return c([d,p])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},uL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xu=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return pr(this,void 0,void 0,function(){var e,t,r,i,a,o,u,c,d,p,g,x;return mr(this,function(_){switch(_.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=uL(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(u=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),d=a.groupId,p={deviceId:u,label:c,kind:o,groupId:d},t.push(p))}catch(E){g={error:E}}finally{try{i&&!i.done&&(x=r.return)&&x.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return pr(this,void 0,void 0,function(){var e;return mr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new lL(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return pr(this,void 0,void 0,function(){var t;return mr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return pr(this,void 0,void 0,function(){return mr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return pr(this,void 0,void 0,function(){var r,i;return mr(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return pr(this,void 0,void 0,function(){var r;return mr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return pr(this,void 0,void 0,function(){var r,i;return mr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return pr(this,void 0,void 0,function(){return mr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return pr(this,void 0,void 0,function(){var i,a;return mr(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return pr(this,void 0,void 0,function(){var i;return mr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return pr(this,void 0,void 0,function(){var i;return mr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return pr(this,void 0,void 0,function(){var r;return mr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return pr(this,void 0,void 0,function(){return mr(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new rn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new rn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new rn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new rn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new rn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new rn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new rn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new rn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new rn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new rn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return pr(this,void 0,void 0,function(){return mr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return pr(this,void 0,void 0,function(){return mr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,u){if(i._stopAsyncDecode){u(new se("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(x){var d=t&&x instanceof se,p=x instanceof hn||x instanceof _e,g=p&&r;if(d||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,u);u(x)}};return new Promise(function(o,u){return a(o,u)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var o=c instanceof hn||c instanceof _e,u=c instanceof se;(o||u)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new oL(r,t),a=new AC(i);return new bC(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),lr=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Rt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Rt.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Rt.arraycopy(t,0,r,0,t.length),Rt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Ig;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ig||(Ig={}));const Re=Ig;var Ng;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ng||(Ng={}));const Qn=Ng;var Y0=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Hc=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Oe;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Rs=function(){function n(e,t){if(t.length===0)throw new Oe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Rt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=Hc.addOrSubtract(r,o)}return r}r=t[0];for(var u=t.length,c=this.field,i=1;i<u;i++)r=Hc.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Oe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Rt.arraycopy(r,0,a,0,o);for(var u=o;u<r.length;u++)a[u]=Hc.addOrSubtract(t[u-o],r[u]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Oe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),u=this.field,c=0;c<r;c++)for(var d=t[c],p=0;p<a;p++)o[c+p]=Hc.addOrSubtract(o[c+p],u.multiply(d,i[p]));return new n(u,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Oe;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,u=0;u<i;u++)a[u]=o.multiply(r[u],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Oe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Oe("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var u=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),o),d=e.multiplyByMonomial(u,c),p=t.buildMonomial(u,c);r=r.addOrSubtract(p),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),cL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SC=function(n){cL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Rr),fL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tr=function(n){fL(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),u=1,c=0;c<r;c++)o[c]=u,u*=2,u>=r&&(u^=t,u&=r-1);a.expTable=o;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[o[c]]=c;return a.logTable=d,a.zero=new Rs(a,Int32Array.from([0])),a.one=new Rs(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Oe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Rs(this,i)},e.prototype.inverse=function(t){if(t===0)throw new SC;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ye.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Hc),dL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ph=function(n){dL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Rr),hL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lf=function(n){hL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Rr),K0=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Rs(r,e),a=new Int32Array(t),o=!0,u=0;u<t;u++){var c=i.evaluateAt(r.exp(u+r.getGeneratorBase()));a[a.length-1-u]=c,c!==0&&(o=!1)}if(!o)for(var d=new Rs(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),g=p[0],x=p[1],_=this.findErrorLocations(g),E=this.findErrorMagnitudes(x,_),u=0;u<_.length;u++){var A=e.length-1-r.log(_[u]);if(A<0)throw new ph("Bad error location");e[A]=Tr.addOrSubtract(e[A],E[u])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,u=t,c=a.getZero(),d=a.getOne();u.getDegree()>=(r/2|0);){var p=o,g=c;if(o=u,c=d,o.isZero())throw new ph("r_{i-1} was zero");u=p;for(var x=a.getZero(),_=o.getCoefficient(o.getDegree()),E=a.inverse(_);u.getDegree()>=o.getDegree()&&!u.isZero();){var A=u.getDegree()-o.getDegree(),S=a.multiply(u.getCoefficient(u.getDegree()),E);x=x.addOrSubtract(a.buildMonomial(A,S)),u=u.addOrSubtract(o.multiplyByMonomial(A,S))}if(d=x.multiply(c).addOrSubtract(g),u.getDegree()>=o.getDegree())throw new Lf("Division algorithm failed to reduce polynomial?")}var I=d.getCoefficient(0);if(I===0)throw new ph("sigmaTilde(0) was zero");var N=a.inverse(I),P=d.multiplyScalar(N),V=u.multiplyScalar(N);return[P,V]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new ph("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var u=a.inverse(t[o]),c=1,d=0;d<r;d++)if(o!==d){var p=a.multiply(t[d],u),g=(p&1)===0?p|1:p&-2;c=a.multiply(c,g)}i[o]=a.multiply(e.evaluateAt(u),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],u))}return i},n}(),Wn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Wn||(Wn={}));var VE=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),u=new Y0(a,o,null,null);return u.setNumBits(i.length),u},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Wn.UPPER,i=Wn.UPPER,a="",o=0;o<t;)if(i===Wn.BINARY){if(t-o<5)break;var u=n.readCode(e,o,5);if(o+=5,u===0){if(t-o<11)break;u=n.readCode(e,o,11)+31,o+=11}for(var c=0;c<u;c++){if(t-o<8){o=t;break}var d=n.readCode(e,o,8);a+=at.castAsNonUtf8Char(d),o+=8}i=r}else{var p=i===Wn.DIGIT?4:5;if(t-o<p)break;var d=n.readCode(e,o,p);o+=p;var g=n.getCharacter(i,d);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Wn.LOWER;case"P":return Wn.PUNCT;case"M":return Wn.MIXED;case"D":return Wn.DIGIT;case"B":return Wn.BINARY;case"U":default:return Wn.UPPER}},n.getCharacter=function(e,t){switch(e){case Wn.UPPER:return n.UPPER_TABLE[t];case Wn.LOWER:return n.LOWER_TABLE[t];case Wn.MIXED:return n.MIXED_TABLE[t];case Wn.PUNCT:return n.PUNCT_TABLE[t];case Wn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Lf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Tr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Tr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Tr.AZTEC_DATA_10):(r=12,t=Tr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new _e;for(var o=e.length%r,u=new Int32Array(a),c=0;c<a;c++,o+=r)u[c]=n.readCode(e,o,r);try{var d=new K0(t);d.decode(u,a-i)}catch(S){throw new _e(S)}for(var p=(1<<r)-1,g=0,c=0;c<i;c++){var x=u[c];if(x===0||x===p)throw new _e;(x===1||x===p-1)&&g++}for(var _=new Array(i*r-g),E=0,c=0;c<i;c++){var x=u[c];if(x===1||x===p-1)_.fill(x>1,E,E+r-1),E+=r-1;else for(var A=r-1;A>=0;--A)_[E++]=(x&1<<A)!==0}return _},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var u=0;u<a.length;u++)a[u]=u;else for(var c=i+1+2*Ye.truncDivision(Ye.truncDivision(i,2)-1,15),d=i/2,p=Ye.truncDivision(c,2),u=0;u<d;u++){var g=u+Ye.truncDivision(u,15);a[d-u-1]=p-g-1,a[d+u]=p+g+1}for(var u=0,x=0;u<r;u++){for(var _=(r-u)*4+(t?9:12),E=u*2,A=i-1-E,S=0;S<_;S++)for(var I=S*2,N=0;N<2;N++)o[x+I+N]=e.get(a[E+N],a[E+S]),o[x+2*_+I+N]=e.get(a[E+S],a[A-N]),o[x+4*_+I+N]=e.get(a[A-N],a[A-S]),o[x+6*_+I+N]=e.get(a[A-S],a[E+N]);x+=_*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),ft=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),Rg=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Se=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Rg.floatToIntBits(this.x)+Rg.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,u;if(r>=t&&r>=i?(o=e[0],a=e[1],u=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],u=e[2]):(o=e[2],a=e[0],u=e[1]),this.crossProductZ(a,o,u)<0){var c=a;a=u,u=c}e[0]=a,e[1]=o,e[2]=u},n.distance=function(e,t){return ft.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),Jv=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),pL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mL=function(n){pL(e,n);function e(t,r,i,a,o){var u=n.call(this,t,r)||this;return u.compact=i,u.nbDatablocks=a,u.nbLayers=o,u}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Jv),Og=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,u=!1,c=!1,d=!1,p=!1,g=!1,x=this.width,_=this.height;o;){o=!1;for(var E=!0;(E||!c)&&t<x;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,o=!0,c=!0):c||t++;if(t>=x){a=!0;break}for(var A=!0;(A||!d)&&i<_;)A=this.containsBlackPoint(e,t,i,!0),A?(i++,o=!0,d=!0):d||i++;if(i>=_){a=!0;break}for(var S=!0;(S||!p)&&e>=0;)S=this.containsBlackPoint(r,i,e,!1),S?(e--,o=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var I=!0;(I||!g)&&r>=0;)I=this.containsBlackPoint(e,t,r,!0),I?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(u=!0)}if(!a&&u){for(var N=t-e,P=null,V=1;P===null&&V<N;V++)P=this.getBlackPointOnSegment(e,i-V,e+V,i);if(P==null)throw new se;for(var F=null,V=1;F===null&&V<N;V++)F=this.getBlackPointOnSegment(e,r+V,e+V,r);if(F==null)throw new se;for(var W=null,V=1;W===null&&V<N;V++)W=this.getBlackPointOnSegment(t,r+V,t-V,r);if(W==null)throw new se;for(var D=null,V=1;D===null&&V<N;V++)D=this.getBlackPointOnSegment(t,i-V,t-V,i);if(D==null)throw new se;return this.centerEdges(D,P,W,F)}else throw new se},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=ft.round(ft.distance(e,t,r,i)),o=(r-e)/a,u=(i-t)/a,c=this.image,d=0;d<a;d++){var p=ft.round(e+d*o),g=ft.round(t+d*u);if(c.get(p,g))return new Se(p,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),u=t.getX(),c=t.getY(),d=r.getX(),p=r.getY(),g=i.getX(),x=i.getY(),_=n.CORR;return a<this.width/2?[new Se(g-_,x+_),new Se(u+_,c+_),new Se(d-_,p-_),new Se(a+_,o-_)]:[new Se(g+_,x+_),new Se(u+_,c-_),new Se(d-_,p+_),new Se(a-_,o-_)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var u=e;u<=t;u++)if(a.get(r,u))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),UE=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var u=Math.floor(t[o]),c=Math.floor(t[o+1]);if(u<-1||u>r||c<-1||c>i)throw new se;a=!1,u===-1?(t[o]=0,a=!0):u===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var u=Math.floor(t[o]),c=Math.floor(t[o+1]);if(u<-1||u>r||c<-1||c>i)throw new se;a=!1,u===-1?(t[o]=0,a=!0):u===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}},n}(),TC=function(){function n(e,t,r,i,a,o,u,c,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=u,this.a23=c,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,u,c,d,p,g,x,_,E,A,S){var I=n.quadrilateralToSquare(e,t,r,i,a,o,u,c),N=n.squareToQuadrilateral(d,p,g,x,_,E,A,S);return N.times(I)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,u=this.a22,c=this.a23,d=this.a31,p=this.a32,g=this.a33,x=0;x<t;x+=2){var _=e[x],E=e[x+1],A=a*_+c*E+g;e[x]=(r*_+o*E+d)/A,e[x+1]=(i*_+u*E+p)/A}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,u=this.a22,c=this.a23,d=this.a31,p=this.a32,g=this.a33,x=e.length,_=0;_<x;_++){var E=e[_],A=t[_],S=a*E+c*A+g;e[_]=(r*E+o*A+d)/S,t[_]=(i*E+u*A+p)/S}},n.squareToQuadrilateral=function(e,t,r,i,a,o,u,c){var d=e-r+a-u,p=t-i+o-c;if(d===0&&p===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var g=r-a,x=u-a,_=i-o,E=c-o,A=g*E-x*_,S=(d*E-x*p)/A,I=(g*p-d*_)/A;return new n(r-e+S*r,u-e+I*u,e,i-t+S*i,c-t+I*c,t,S,I,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,u,c){return n.squareToQuadrilateral(e,t,r,i,a,o,u,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),gL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vL=function(n){gL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,u,c,d,p,g,x,_,E,A,S,I,N,P,V){var F=TC.quadrilateralToQuadrilateral(a,o,u,c,d,p,g,x,_,E,A,S,I,N,P,V);return this.sampleGridWithTransform(t,r,i,F)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new se;for(var o=new $i(r,i),u=new Float32Array(2*r),c=0;c<i;c++){for(var d=u.length,p=c+.5,g=0;g<d;g+=2)u[g]=g/2+.5,u[g+1]=p;a.transformPoints(u),UE.checkAndNudgePoints(t,u);try{for(var g=0;g<d;g+=2)t.get(Math.floor(u[g]),Math.floor(u[g+1]))&&o.set(g/2,c)}catch{throw new se}}return o},e}(UE),ey=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new vL,n}(),Ar=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Se(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),yL=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new mL(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new se;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var u=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,u){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ye.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new se},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),u=r-1;u>=0;--u)o[u]=e&15,e>>=4;try{var c=new K0(Tr.AZTEC_PARAM);c.decode(o,a)}catch{throw new se}for(var d=0,u=0;u<i;u++)d=(d<<4)+o[u];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var u=this.getFirstDifferent(t,o,1,-1),c=this.getFirstDifferent(r,o,1,1),d=this.getFirstDifferent(i,o,-1,1),p=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,u)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(u,c,d,p))break}t=u,r=c,i=d,a=p,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;var x=new Se(t.getX()+.5,t.getY()-.5),_=new Se(r.getX()+.5,r.getY()+.5),E=new Se(i.getX()-.5,i.getY()+.5),A=new Se(a.getX()-.5,a.getY()-.5);return this.expandSquare([x,_,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new Og(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,u=this.image.getHeight()/2;e=this.getFirstDifferent(new Ar(o+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ar(o+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ar(o-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ar(o-7,u-7),!1,-1,-1).toResultPoint()}var c=ft.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=ft.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new Og(this.image,15,c,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Ar(c+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ar(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ar(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ar(c-7,d-7),!1,-1,-1).toResultPoint()}return c=ft.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=ft.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Ar(c,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=ey.getInstance(),u=this.getDimension(),c=u/2-this.nbCenterLayers,d=u/2+this.nbCenterLayers;return o.sampleGrid(e,u,u,c,c,d,c,d,d,c,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,u=e.getX(),c=e.getY(),d=o*(t.getX()-e.getX())/a,p=o*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(ft.round(u+g*d),ft.round(c+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Ar(e.getX()-a,e.getY()+a),t=new Ar(t.getX()-a,t.getY()-a),r=new Ar(r.getX()+a,r.getY()-a),i=new Ar(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var u=this.getColor(e,t);return u!==o||(u=this.getColor(t,r),u!==o)?!1:(u=this.getColor(r,i),u===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,u=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),g=0;g<p;g++)u+=i,c+=a,this.image.get(ft.round(u),ft.round(c))!==d&&o++;var x=o/r;return x>.1&&x<.9?0:x<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new Ar(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new Se(u+i*a,c+i*o),p=new Se(u-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var g=new Se(u+i*a,c+i*o),x=new Se(u-i*a,c-i*o),_=[d,g,p,x];return _},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=ft.round(e.getX()),r=ft.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return ft.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return ft.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ye.truncDivision(this.nbLayers-4,8)+1)+15},n}(),u0=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new yL(e.getBlackMatrix()),a=null,o=null;try{var u=i.detectMirror(!1);a=u.getPoints(),this.reportFoundResultPoints(t,a),o=new VE().decode(u)}catch(g){r=g}if(o==null)try{var u=i.detectMirror(!0);a=u.getPoints(),this.reportFoundResultPoints(t,a),o=new VE().decode(u)}catch(g){throw r??g}var c=new lr(o.getText(),o.getRawBytes(),o.getNumBits(),a,Re.AZTEC,Rt.currentTimeMillis()),d=o.getByteSegments();d!=null&&c.putMetadata(Qn.BYTE_SEGMENTS,d);var p=o.getECLevel();return p!=null&&c.putMetadata(Qn.ERROR_CORRECTION_LEVEL,p),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Ot.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),xL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){xL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new u0,t)||this}return e})(xu);var Cn=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Ot.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),u=270;o!==null&&o.get(Qn.ORIENTATION)===!0&&(u=u+o.get(Qn.ORIENTATION)%360),a.putMetadata(Qn.ORIENTATION,u);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),p=0;p<c.length;p++)c[p]=new Se(d-c[p].getY()-1,c[p].getX());return a}else throw new se}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Bn(r),o=t&&t.get(Ot.TRY_HARDER)===!0,u=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var d=Math.trunc(i/2),p=0;p<c;p++){var g=Math.trunc((p+1)/2),x=(p&1)===0,_=d+u*(x?g:-g);if(_<0||_>=i)break;try{a=e.getBlackRow(_,a)}catch{continue}for(var E=function(N){if(N===1&&(a.reverse(),t&&t.get(Ot.NEED_RESULT_POINT_CALLBACK)===!0)){var P=new Map;t.forEach(function(W,D){return P.set(D,W)}),P.delete(Ot.NEED_RESULT_POINT_CALLBACK),t=P}try{var V=A.decodeRow(_,a,t);if(N===1){V.putMetadata(Qn.ORIENTATION,180);var F=V.getResultPoints();F!==null&&(F[0]=new Se(r-F[0].getX()-1,F[0].getY()),F[1]=new Se(r-F[1].getX()-1,F[1].getY()))}return{value:V}}catch{}},A=this,S=0;S<2;S++){var I=E(S);if(typeof I=="object")return I.value}}throw new se},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new se;for(var u=!e.get(t),c=0,d=t;d<o;){if(e.get(d)!==u)r[c]++;else{if(++c===i)break;r[c]=1,u=!u}d++}if(!(c===i||c===i-1&&d===o))throw new se},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new se;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,u=0;u<i;u++)a+=e[u],o+=t[u];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;r*=c;for(var d=0,p=0;p<i;p++){var g=e[p],x=t[p]*c,_=g>x?g-x:x-g;if(_>r)return Number.POSITIVE_INFINITY;d+=_}return d/a},n}(),_L=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FE=function(n){_L(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),u=i,c=!1,d=6,p=i;p<r;p++)if(t.get(p)!==c)o[a]++;else{if(a===d-1){for(var g=e.MAX_AVG_VARIANCE,x=-1,_=e.CODE_START_A;_<=e.CODE_START_C;_++){var E=Cn.patternMatchVariance(o,e.CODE_PATTERNS[_],e.MAX_INDIVIDUAL_VARIANCE);E<g&&(g=E,x=_)}if(x>=0&&t.isRange(Math.max(0,u-(p-u)/2),u,!1))return Int32Array.from([u,p,x]);u+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new se},e.decodeCode=function(t,r,i){Cn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,u=0;u<e.CODE_PATTERNS.length;u++){var c=e.CODE_PATTERNS[u],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,o=u)}if(o>=0)return o;throw new se},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Ot.ASSUME_GS1)===!0,o=e.findStartPattern(r),u=o[2],c=0,d=new Uint8Array(20);d[c++]=u;var p;switch(u){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new _e}for(var g=!1,x=!1,_="",E=o[0],A=o[1],S=Int32Array.from([0,0,0,0,0,0]),I=0,N=0,P=u,V=0,F=!0,W=!1,D=!1;!g;){var R=x;switch(x=!1,I=N,N=e.decodeCode(r,S,A),d[c++]=N,N!==e.CODE_STOP&&(F=!0),N!==e.CODE_STOP&&(V++,P+=V*N),E=A,A+=S.reduce(function(ne,ve){return ne+ve},0),N){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new _e}switch(p){case e.CODE_CODE_A:if(N<64)D===W?_+=String.fromCharCode(32+N):_+=String.fromCharCode(32+N+128),D=!1;else if(N<96)D===W?_+=String.fromCharCode(N-64):_+=String.fromCharCode(N+64),D=!1;else switch(N!==e.CODE_STOP&&(F=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!W&&D?(W=!0,D=!1):W&&D?(W=!1,D=!1):D=!0;break;case e.CODE_SHIFT:x=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(N<96)D===W?_+=String.fromCharCode(32+N):_+=String.fromCharCode(32+N+128),D=!1;else switch(N!==e.CODE_STOP&&(F=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!W&&D?(W=!0,D=!1):W&&D?(W=!1,D=!1):D=!0;break;case e.CODE_SHIFT:x=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(N<100)N<10&&(_+="0"),_+=N;else switch(N!==e.CODE_STOP&&(F=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}R&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var M=A-E;if(A=r.getNextUnset(A),!r.isRange(A,Math.min(r.getSize(),A+(A-E)/2),!1))throw new se;if(P-=V*I,P%103!==I)throw new hn;var L=_.length;if(L===0)throw new se;L>0&&F&&(p===e.CODE_CODE_C?_=_.substring(0,L-2):_=_.substring(0,L-1));for(var H=(o[1]+o[0])/2,G=E+M/2,U=d.length,Ie=new Uint8Array(U),Be=0;Be<U;Be++)Ie[Be]=d[Be];var te=[new Se(H,t),new Se(G,t)];return new lr(_,Ie,0,te,Re.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Cn),wL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HE=function(n){wL(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,u,c,d=this.counters;d.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,d),g=r.getNextSet(p[1]),x=r.getSize(),_,E;do{e.recordPattern(r,g,d);var A=e.toNarrowWidePattern(d);if(A<0)throw new se;_=e.patternToChar(A),this.decodeRowResult+=_,E=g;try{for(var S=(a=void 0,Bm(d)),I=S.next();!I.done;I=S.next()){var N=I.value;g+=N}}catch(U){a={error:U}}finally{try{I&&!I.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var V=Bm(d),F=V.next();!F.done;F=V.next()){var N=F.value;P+=N}}catch(U){u={error:U}}finally{try{F&&!F.done&&(c=V.return)&&c.call(V)}finally{if(u)throw u.error}}var W=g-E-P;if(g!==x&&W*2<P)throw new se;if(this.usingCheckDigit){for(var D=this.decodeRowResult.length-1,R=0,M=0;M<D;M++)R+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(D)!==e.ALPHABET_STRING.charAt(R%43))throw new hn;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new se;var L;this.extendedMode?L=e.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;var H=(p[1]+p[0])/2,G=E+P/2;return new lr(L,null,0,[new Se(H,t),new Se(G,t)],Re.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,u=a,c=!1,d=r.length,p=a;p<i;p++)if(t.get(p)!==c)r[o]++;else{if(o===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,u-Math.floor((p-u)/2)),u,!1))return[u,p];u+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,c=!c}throw new se},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,u;do{var c=2147483647;try{for(var d=(r=void 0,Bm(t)),p=d.next();!p.done;p=d.next()){var g=p.value;g<c&&g>o&&(c=g)}}catch(A){r={error:A}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o=c,u=0;for(var x=0,_=0,E=0;E<a;E++){var g=t[E];g>o&&(_|=1<<a-1-E,u++,x+=g)}if(u===3){for(var E=0;E<a&&u>0;E++){var g=t[E];if(g>o&&(u--,g*2>=x))return-1}return _}}while(u>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new se},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var u=t.charAt(a+1),c="\0";switch(o){case"+":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new _e;break;case"$":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new _e;break;case"%":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u==="X"||u==="Y"||u==="Z")c="";else throw new _e;break;case"/":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new _e;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Cn),EL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zE=function(n){EL(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,u,c,d=this.findAsteriskPattern(r),p=r.getNextSet(d[1]),g=r.getSize(),x=this.counters;x.fill(0),this.decodeRowResult="";var _,E;do{e.recordPattern(r,p,x);var A=this.toPattern(x);if(A<0)throw new se;_=this.patternToChar(A),this.decodeRowResult+=_,E=p;try{for(var S=(a=void 0,Vm(x)),I=S.next();!I.done;I=S.next()){var N=I.value;p+=N}}catch(M){a={error:M}}finally{try{I&&!I.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var V=Vm(x),F=V.next();!F.done;F=V.next()){var N=F.value;P+=N}}catch(M){u={error:M}}finally{try{F&&!F.done&&(c=V.return)&&c.call(V)}finally{if(u)throw u.error}}if(p===g||!r.get(p))throw new se;if(this.decodeRowResult.length<2)throw new se;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var W=this.decodeExtended(this.decodeRowResult),D=(d[1]+d[0])/2,R=E+P/2;return new lr(W,null,0,[new Se(D,t),new Se(R,t)],Re.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,u=!1,c=a.length,d=0,p=i;p<r;p++)if(t.get(p)!==u)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,p]);o+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,u=!u}throw new se},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Vm(t),u=o.next();!u.done;u=o.next()){var c=u.value;a+=c}}catch(E){r={error:E}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var d=0,p=t.length,g=0;g<p;g++){var x=Math.round(t[g]*9/a);if(x<1||x>4)return-1;if((g&1)===0)for(var _=0;_<x;_++)d=d<<1|1;else d<<=x}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new se},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new _e;var u=t.charAt(a+1),c="\0";switch(o){case"d":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new _e;break;case"a":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new _e;break;case"b":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u>="X"&&u<="Z")c="";else throw new _e;break;case"c":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new _e;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,u=r-1;u>=0;u--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(u)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new hn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Cn),bL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GE=function(n){bL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,u=this.decodeStart(r),c=this.decodeEnd(r),d=new Xe;e.decodeMiddle(r,u[1],c[0],d);var p=d.toString(),g=null;i!=null&&(g=i.get(Ot.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var x=p.length,_=!1,E=0;try{for(var A=AL(g),S=A.next();!S.done;S=A.next()){var I=S.value;if(x===I){_=!0;break}I>E&&(E=I)}}catch(V){a={error:V}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}if(!_&&x>E&&(_=!0),!_)throw new _e;var N=[new Se(u[1],t),new Se(c[0],t)],P=new lr(p,null,0,N,Re.ITF,new Date().getTime());return P},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),u=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),u.fill(0),c.fill(0);r<i;){Cn.recordPattern(t,r,o);for(var d=0;d<5;d++){var p=2*d;u[d]=o[p],c[d]=o[p+1]}var g=e.decodeDigit(u);a.append(g.toString()),g=this.decodeDigit(c),a.append(g.toString()),o.forEach(function(x){r+=x})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new se},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new se;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof se&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),u=t.getSize(),c=!1,d=0,p=r;o.fill(0);for(var g=r;g<u;g++)if(t.get(g)!==c)o[d]++;else{if(d===a-1){if(Cn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,g];p+=o[0]+o[1],Rt.arraycopy(o,2,o,0,d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,c=!c}throw new se},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var u=e.PATTERNS[o],c=Cn.patternMatchVariance(t,u,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=o):c===r&&(i=-1)}if(i>=0)return i%10;throw new se},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Cn),SL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ru=function(n){SL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var u=i[0];a=i[1];var c=u-(a-u);c>=0&&(r=t.isRange(c,u,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var u=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,d=r,p=a.length,g=i,x=r;x<u;x++)if(t.get(x)!==g)o[c]++;else{if(c===p-1){if(Cn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,x]);d+=o[0]+o[1];for(var _=o.slice(2,o.length),E=0;E<c-1;E++)o[E]=_[E];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,g=!g}throw new se},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,u=-1,c=a.length,d=0;d<c;d++){var p=a[d],g=Cn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,u=d)}if(u>=0)return u;throw new se},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Cn),TL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CL=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),u=n.parseExtensionString(o),c=[new Se((r[0]+r[1])/2,e),new Se(a,e)],d=new lr(o,null,0,c,Re.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&d.putAllMetadata(u),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var u=e.getSize(),c=t[1],d=0,p=0;p<5&&c<u;p++){var g=ru.decodeDigit(e,o,c,ru.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var x=(i=void 0,TL(o)),_=x.next();!_.done;_=x.next()){var E=_.value;c+=E}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}g>=10&&(d|=1<<4-p),p!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new se;var A=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==A)throw new se;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new se},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Qn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),IL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NL=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),u=n.parseExtensionString(o),c=[new Se((r[0]+r[1])/2,e),new Se(a,e)],d=new lr(o,null,0,c,Re.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&d.putAllMetadata(u),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var u=e.getSize(),c=t[1],d=0,p=0;p<2&&c<u;p++){var g=ru.decodeDigit(e,o,c,ru.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var x=(i=void 0,IL(o)),_=x.next();!_.done;_=x.next()){var E=_.value;c+=E}}catch(A){i={error:A}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}g>=10&&(d|=1<<1-p),p!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new se;if(parseInt(r.toString())%4!==d)throw new se;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Qn.ISSUE_NUMBER,parseInt(e)]])},n}(),RL=function(){function n(){}return n.decodeRow=function(e,t,r){var i=ru.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new CL;return a.decodeRow(e,t,i)}catch{var o=new NL;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),OL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bn=function(n){OL(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(u){return Int32Array.from(u)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Ot.NEED_RESULT_POINT_CALLBACK);if(o!=null){var u=new Se((a[0]+a[1])/2,t);o.foundPossibleResultPoint(u)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,p=c.resultString;if(o!=null){var g=new Se(d,t);o.foundPossibleResultPoint(g)}var x=e.decodeEnd(r,d);if(o!=null){var _=new Se((x[0]+x[1])/2,t);o.foundPossibleResultPoint(_)}var E=x[1],A=E+(E-x[0]);if(A>=r.getSize()||!r.isRange(E,A,!1))throw new se;var S=p.toString();if(S.length<8)throw new _e;if(!e.checkChecksum(S))throw new hn;var I=(a[1]+a[0])/2,N=(x[1]+x[0])/2,P=this.getBarcodeFormat(),V=[new Se(I,t),new Se(N,t)],F=new lr(S,null,0,V,P,new Date().getTime()),W=0;try{var D=RL.decodeRow(t,r,x[1]);F.putMetadata(Qn.UPC_EAN_EXTENSION,D.getText()),F.putAllMetadata(D.getResultMetadata()),F.addResultPoints(D.getResultPoints()),W=D.getText().length}catch{}var R=i==null?null:i.get(Ot.ALLOWED_EAN_EXTENSIONS);if(R!=null){var M=!1;for(var L in R)if(W.toString()===L){M=!0;break}if(!M)throw new se}return P===Re.EAN_13||Re.UPC_A,F},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(ru),DL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dg=function(n){DL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,u,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],x=0,_=0;_<6&&g<p;_++){var E=bn.decodeDigit(t,d,g,bn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var A=(a=void 0,qE(d)),S=A.next();!S.done;S=A.next()){var I=S.value;g+=I}}catch(F){a={error:F}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}E>=10&&(x|=1<<5-_)}i=e.determineFirstDigit(i,x);var N=bn.findGuardPattern(t,g,!0,bn.MIDDLE_PATTERN,new Int32Array(bn.MIDDLE_PATTERN.length).fill(0));g=N[1];for(var _=0;_<6&&g<p;_++){var E=bn.decodeDigit(t,d,g,bn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var P=(u=void 0,qE(d)),V=P.next();!V.done;V=P.next()){var I=V.value;g+=I}}catch(D){u={error:D}}finally{try{V&&!V.done&&(c=P.return)&&c.call(P)}finally{if(u)throw u.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Re.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new se},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(bn),PL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WE=function(n){PL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,u,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],x=0;x<4&&g<p;x++){var _=bn.decodeDigit(t,d,g,bn.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var E=(a=void 0,XE(d)),A=E.next();!A.done;A=E.next()){var S=A.value;g+=S}}catch(V){a={error:V}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}}var I=bn.findGuardPattern(t,g,!0,bn.MIDDLE_PATTERN,new Int32Array(bn.MIDDLE_PATTERN.length).fill(0));g=I[1];for(var x=0;x<4&&g<p;x++){var _=bn.decodeDigit(t,d,g,bn.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var N=(u=void 0,XE(d)),P=N.next();!P.done;P=N.next()){var S=P.value;g+=S}}catch(W){u={error:W}}finally{try{P&&!P.done&&(c=N.return)&&c.call(N)}finally{if(u)throw u.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Re.EAN_8},e}(bn),ML=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$E=function(n){ML(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Dg,t}return e.prototype.getBarcodeFormat=function(){return Re.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new lr(r.substring(1),null,null,t.getResultPoints(),Re.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new se},e.prototype.reset=function(){this.ean13Reader.reset()},e}(bn),kL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YE=function(n){kL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,u=this.decodeMiddleCounters.map(function(S){return S});u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),d=r[1],p=0,g=0;g<6&&d<c;g++){var x=e.decodeDigit(t,u,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var _=(a=void 0,LL(u)),E=_.next();!E.done;E=_.next()){var A=E.value;d+=A}}catch(S){a={error:S}}finally{try{E&&!E.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}x>=10&&(p|=1<<5-g)}return e.determineNumSysAndCheckDigit(new Xe(i),p),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return bn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw se.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Re.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new Xe;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(bn),jL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Um=function(n){jL(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Ot.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Re.EAN_13)>-1&&a.push(new Dg),i.indexOf(Re.UPC_A)>-1&&a.push(new $E),i.indexOf(Re.EAN_8)>-1&&a.push(new WE),i.indexOf(Re.UPC_E)>-1&&a.push(new YE)),a.length===0&&(a.push(new Dg),a.push(new $E),a.push(new WE),a.push(new YE)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var u=KE(this.readers),c=u.next();!c.done;c=u.next()){var d=c.value;try{var p=d.decodeRow(t,r,i),g=p.getBarcodeFormat()===Re.EAN_13&&p.getText().charAt(0)==="0",x=i==null?null:i.get(Ot.POSSIBLE_FORMATS),_=x==null||x.includes(Re.UPC_A);if(g&&_){var E=p.getRawBytes(),A=new lr(p.getText().substring(1),E,E?E.length:null,p.getResultPoints(),Re.UPC_A);return A.putAllMetadata(p.getResultMetadata()),A}return p}catch{}}}catch(S){a={error:S}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}throw new se},e.prototype.reset=function(){var t,r;try{for(var i=KE(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Cn),BL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VL=function(n){BL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new se;var o=this.codaBarDecodeRow(a.row);if(!o)throw new se;return new lr(o,null,0,[new Se(a.left,t),new Se(a.right,t)],Re.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],u=r[0],c=1,d=1;d<r.length;d++)r[d]===u?c++:(u=r[d],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,d){return(c+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var u=r.join("");return this.validCodaBarString(u)?u:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Cn),UL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ao=function(n){UL(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Cn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new se},e.count=function(t){return ft.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],u=a/o;if(u>=e.MIN_FINDER_PATTERN_RATIO&&u<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var p=FL(t),g=p.next();!g.done;g=p.next()){var x=g.value;x>d&&(d=x),x<c&&(c=x)}}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Cn),c0=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),CC=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Se(r,a)),this.resultPoints.push(new Se(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),HL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vl=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var u=HL(e),c=u.next();!c.done;c=u.next()){var d=c.value;o+=d}}catch(N){i={error:N}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}for(var p=0,g=0,x=e.length,_=0;_<x-1;_++){var E=void 0;for(E=1,g|=1<<_;E<e[_];E++,g&=~(1<<_)){var A=n.combins(o-E-1,x-_-2);if(r&&g===0&&o-E-(x-_-1)>=x-_-1&&(A-=n.combins(o-E-(x-_),x-_-2)),x-_-1>1){for(var S=0,I=o-E-(x-_-2);I>t;I--)S+=n.combins(o-E-I-1,x-_-3);A-=S*(x-1-_)}else o-E>t&&A--;p+=A}o-=E}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,u=e;u>r;u--)a*=u,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),zL=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Bn(r),a=0,o=e[0],u=o.getRightChar().getValue(),c=11;c>=0;--c)(u&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],p=d.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var x=d.getRightChar().getValue(),g=11;g>=0;--g)(x&1<<g)!==0&&i.set(a),a++}return i},n}(),wo=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),ty=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),GL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ci=function(n){GL(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(ty),qL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Eo=function(n){qL(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(ty),XL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ml=function(n){XL(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new _e;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(ty),mh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WL=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,u,c,d;if(!e)return null;if(e.length<2)throw new se;var p=e.substring(0,2);try{for(var g=mh(n.TWO_DIGIT_DATA_LENGTH),x=g.next();!x.done;x=g.next()){var _=x.value;if(_[0]===p)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,_[2],e):n.processFixedAI(2,_[1],e)}}catch(W){t={error:W}}finally{try{x&&!x.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new se;var E=e.substring(0,3);try{for(var A=mh(n.THREE_DIGIT_DATA_LENGTH),S=A.next();!S.done;S=A.next()){var _=S.value;if(_[0]===E)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,_[2],e):n.processFixedAI(3,_[1],e)}}catch(W){i={error:W}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}try{for(var I=mh(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),N=I.next();!N.done;N=I.next()){var _=N.value;if(_[0]===E)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(W){o={error:W}}finally{try{N&&!N.done&&(u=I.return)&&u.call(I)}finally{if(o)throw o.error}}if(e.length<4)throw new se;var P=e.substring(0,4);try{for(var V=mh(n.FOUR_DIGIT_DATA_LENGTH),F=V.next();!F.done;F=V.next()){var _=F.value;if(_[0]===P)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(W){c={error:W}}finally{try{F&&!F.done&&(d=V.return)&&d.call(V)}finally{if(c)throw c.error}}throw new se},n.processFixedAI=function(e,t,r){if(r.length<e)throw new se;var i=r.substring(0,e);if(r.length<e+t)throw new se;var a=r.substring(e,e+t),o=r.substring(e+t),u="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(o);return c==null?u:u+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),u=r.substring(a),c="("+i+")"+o,d=n.parseFieldsInGeneralPurpose(u);return d==null?c:c+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Mh=function(){function n(e){this.buffer=new Xe,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=WL.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Ml(this.information.getSize(),Ml.FNC1,Ml.FNC1):new Ml(this.information.getSize(),t-1,Ml.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Ml(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Eo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Eo(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Eo(this.current.getPosition(),this.buffer.toString()):t=new Eo(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Eo(this.current.getPosition(),this.buffer.toString());return new wo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Eo(this.current.getPosition(),this.buffer.toString());return new wo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Eo(this.current.getPosition(),this.buffer.toString());return new wo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ci(e+7,""+(r+1));if(r>=90&&r<116)return new ci(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new _e}return new ci(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ci(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Lf("Decoding invalid alphanumeric value: "+r)}return new ci(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),IC=function(){function n(e){this.information=e,this.generalDecoder=new Mh(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),$L=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fi=function(n){$L(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(IC),YL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KL=function(n){YL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Xe;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(fi),QL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZL=function(n){QL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Xe;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(IC),JL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kh=function(n){JL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),u=1e5,c=0;c<5;++c)o/u===0&&t.append("0"),u/=10;t.append(o)},e}(fi),ej=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NC=function(n){ej(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+kh.GTIN_SIZE+e.WEIGHT_SIZE)throw new se;var t=new Xe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+kh.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(kh),tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nj=function(n){tj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(NC),rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ij=function(n){rj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(NC),aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sj=function(n){aj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+fi.GTIN_SIZE)throw new se;var t=new Xe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(fi),oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lj=function(n){oj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+fi.GTIN_SIZE)throw new se;var t=new Xe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(fi),uj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xs=function(n){uj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new se;var t=new Xe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var u=i;u/10===0&&t.append("0"),t.append(u),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(kh);function cj(n){try{if(n.get(1))return new KL(n);if(!n.get(2))return new ZL(n);var e=Mh.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new nj(n);case 5:return new ij(n)}var t=Mh.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new sj(n);case 13:return new lj(n)}var r=Mh.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new xs(n,"310","11");case 57:return new xs(n,"320","11");case 58:return new xs(n,"310","13");case 59:return new xs(n,"320","13");case 60:return new xs(n,"310","15");case 61:return new xs(n,"320","15");case 62:return new xs(n,"310","17");case 63:return new xs(n,"320","17")}}catch(i){throw console.log(i),new Lf("unknown decoder: "+n)}}var QE=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),fj=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),dj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_s=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hj=function(n){dj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(u){if(u instanceof se){if(!this.pairs.length)throw new se;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new se},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var u=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,_s(t)),d=c.next();!d.done;d=c.next()){var p=d.value;this.pairs.push(p.getPairs())}}catch(x){i={error:x}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(u.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(u);try{return this.checkRows(g,o+1)}catch(x){console.log(x)}}}throw new se},e.isValidSequence=function(t){var r,i;try{for(var a=_s(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var u=o.value;if(!(t.length>u.length)){for(var c=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==u[d]){c=!1;break}if(c)return!0}}}catch(p){r={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var u=this.rows[i];if(u.getRowNumber()>t){o=u.isEquivalent(this.pairs);break}a=u.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new fj(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,u,c,d;try{for(var p=_s(r),g=p.next();!g.done;g=p.next()){var x=g.value;if(x.getPairs().length!==t.length){var _=!0;try{for(var E=(o=void 0,_s(x.getPairs())),A=E.next();!A.done;A=E.next()){var S=A.value,I=!1;try{for(var N=(c=void 0,_s(t)),P=N.next();!P.done;P=N.next()){var V=P.value;if(QE.equals(S,V)){I=!0;break}}}catch(F){c={error:F}}finally{try{P&&!P.done&&(d=N.return)&&d.call(N)}finally{if(c)throw c.error}}I||(_=!1)}}catch(F){o={error:F}}finally{try{A&&!A.done&&(u=E.return)&&u.call(E)}finally{if(o)throw o.error}}}}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,u,c,d;try{for(var p=_s(r),g=p.next();!g.done;g=p.next()){var x=g.value,_=!0;try{for(var E=(o=void 0,_s(t)),A=E.next();!A.done;A=E.next()){var S=A.value,I=!1;try{for(var N=(c=void 0,_s(x.getPairs())),P=N.next();!P.done;P=N.next()){var V=P.value;if(S.equals(V)){I=!0;break}}}catch(F){c={error:F}}finally{try{P&&!P.done&&(d=N.return)&&d.call(N)}finally{if(c)throw c.error}}if(!I){_=!1;break}}}catch(F){o={error:F}}finally{try{A&&!A.done&&(u=E.return)&&u.call(E)}finally{if(o)throw o.error}}if(_)return!0}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=zL.buildBitArray(t),i=cj(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),u=t[t.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],u[0],u[1]];return new lr(a,null,null,c,Re.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,u=1;u<this.pairs.size();++u){var c=this.pairs.get(u);a+=c.getLeftChar().getChecksumPortion(),o++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),o++)}a%=211;var p=211*(o-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,u=!0,c=-1;do this.findNextPair(t,r,c),o=this.parseFoundFinderPattern(t,i,a),o===null?c=e.getNextSecondBar(t,this.startEnd[0]):u=!1;while(u);var d=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new se;var p;try{p=this.decodeDataCharacter(t,o,a,!1)}catch(g){p=null,console.log(g)}return new QE(d,p,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),u;if(i>=0)u=i;else if(this.isEmptyPair(r))u=0;else{var c=r[r.length-1];u=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var p=!1;u<o&&(p=!t.get(u),!!p);)u++;for(var g=0,x=u,_=u;_<o;_++)if(t.get(_)!==p)a[g]++;else{if(g===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=x,this.startEnd[1]=_;return}d&&e.reverseCounters(a),x+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new se},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,u;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,u=this.startEnd[1]}else o=this.startEnd[0],u=t.getNextUnset(this.startEnd[1]+1),a=u-this.startEnd[1];var d=this.getDecodeFinderCounters();Rt.arraycopy(d,0,d,1,d.length-1),d[0]=a;var p;try{p=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new CC(p,[o,u],o,u,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),u=0;u<o.length;u++)o[u]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var c=0,d=o.length-1;c<d;c++,d--){var p=o[c];o[c]=o[d],o[d]=p}}var g=17,x=ft.sum(new Int32Array(o))/g,_=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(x-_)/_>.3)throw new se;for(var E=this.getOddCounts(),A=this.getEvenCounts(),S=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var N=1*o[c]/x,P=N+.5;if(P<1){if(N<.3)throw new se;P=1}else if(P>8){if(N>8.7)throw new se;P=8}var V=c/2;(c&1)===0?(E[V]=P,S[V]=N-P):(A[V]=P,I[V]=N-P)}this.adjustOddEvenCounts(g);for(var F=4*r.getValue()+(i?0:2)+(a?0:1)-1,W=0,D=0,c=E.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[F][2*c];D+=E[c]*R}W+=E[c]}for(var M=0,c=A.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[F][2*c+1];M+=A[c]*R}var L=D+M;if((W&1)!==0||W>13||W<4)throw new se;var H=(13-W)/2,G=e.SYMBOL_WIDEST[H],U=9-G,Ie=Vl.getRSSvalue(E,G,!0),Be=Vl.getRSSvalue(A,U,!1),te=e.EVEN_TOTAL_SUBSET[H],ne=e.GSUM[H],ve=Ie*te+Be+ne;return new c0(ve,L)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=ft.sum(new Int32Array(this.getOddCounts())),i=ft.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var u=!1,c=!1;i>13?c=!0:i<4&&(u=!0);var d=r+i-t,p=(r&1)===1,g=(i&1)===0;if(d===1)if(p){if(g)throw new se;o=!0}else{if(!g)throw new se;c=!0}else if(d===-1)if(p){if(g)throw new se;a=!0}else{if(!g)throw new se;u=!0}else if(d===0){if(p){if(!g)throw new se;r<i?(a=!0,c=!0):(o=!0,u=!0)}else if(g)throw new se}else throw new se;if(a){if(o)throw new se;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(c)throw new se;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Ao),pj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mj=function(n){pj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(c0),gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZE=function(n){gj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,u,c,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=Fm(this.possibleLeftPairs),x=g.next();!x.done;x=g.next()){var _=x.value;if(_.getCount()>1)try{for(var E=(u=void 0,Fm(this.possibleRightPairs)),A=E.next();!A.done;A=E.next()){var S=A.value;if(S.getCount()>1&&e.checkChecksum(_,S))return e.constructResult(_,S)}}catch(I){u={error:I}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(u)throw u.error}}}}catch(I){a={error:I}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new se},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var u=Fm(t),c=u.next();!c.done;c=u.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),o=!0;break}}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new Xe,u=13-a.length;u>0;u--)o.append("0");o.append(a);for(var c=0,u=0;u<13;u++){var d=o.charAt(u).charCodeAt(0)-48;c+=(u&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),o.append(c.toString());var p=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new lr(o.toString(),null,0,[p[0],p[1],g[0],g[1]],Re.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),u=this.parseFoundFinderPattern(t,i,r,o),c=a==null?null:a.get(Ot.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(o[0]+o[1])/2;r&&(d=t.getSize()-1-d),c.foundPossibleResultPoint(new Se(d,i))}var p=this.decodeDataCharacter(t,u,!0),g=this.decodeDataCharacter(t,u,!1);return new mj(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),u)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Cn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Cn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var u=0,c=a.length-1;u<c;u++,c--){var d=a[u];a[u]=a[c],a[c]=d}}for(var p=i?16:15,g=ft.sum(new Int32Array(a))/p,x=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),u=0;u<a.length;u++){var S=a[u]/g,I=Math.floor(S+.5);I<1?I=1:I>8&&(I=8);var N=Math.floor(u/2);(u&1)===0?(x[N]=I,E[N]=S-I):(_[N]=I,A[N]=S-I)}this.adjustOddEvenCounts(i,p);for(var P=0,V=0,u=x.length-1;u>=0;u--)V*=9,V+=x[u],P+=x[u];for(var F=0,W=0,u=_.length-1;u>=0;u--)F*=9,F+=_[u],W+=_[u];var D=V+3*F;if(i){if((P&1)!==0||P>12||P<4)throw new se;var R=(12-P)/2,M=e.OUTSIDE_ODD_WIDEST[R],L=9-M,H=Vl.getRSSvalue(x,M,!1),G=Vl.getRSSvalue(_,L,!0),U=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],Ie=e.OUTSIDE_GSUM[R];return new c0(H*U+G+Ie,D)}else{if((W&1)!==0||W>10||W<4)throw new se;var R=(10-W)/2,M=e.INSIDE_ODD_WIDEST[R],L=9-M,H=Vl.getRSSvalue(x,M,!0),G=Vl.getRSSvalue(_,L,!1),Be=e.INSIDE_ODD_TOTAL_SUBSET[R],Ie=e.INSIDE_GSUM[R];return new c0(G*Be+H+Ie,D)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,u=0;u<a&&(o=!t.get(u),r!==o);)u++;for(var c=0,d=u,p=u;p<a;p++)if(t.get(p)!==o)i[c]++;else{if(c===3){if(Ao.isFinderPattern(i))return[d,p];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new se},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),u=a[0]-1;u>=0&&o!==t.get(u);)u--;u++;var c=a[0]-u,d=this.getDecodeFinderCounters(),p=new Int32Array(d.length);Rt.arraycopy(d,0,p,1,d.length-1),p[0]=c;var g=this.parseFinderValue(p,e.FINDER_PATTERNS),x=u,_=a[1];return i&&(x=t.getSize()-1-x,_=t.getSize()-1-_),new CC(g,[u,a[1]],x,_,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=ft.sum(new Int32Array(this.getOddCounts())),a=ft.sum(new Int32Array(this.getEvenCounts())),o=!1,u=!1,c=!1,d=!1;t?(i>12?u=!0:i<4&&(o=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?u=!0:i<5&&(o=!0),a>10?d=!0:a<4&&(c=!0));var p=i+a-r,g=(i&1)===(t?1:0),x=(a&1)===1;if(p===1)if(g){if(x)throw new se;u=!0}else{if(!x)throw new se;d=!0}else if(p===-1)if(g){if(x)throw new se;o=!0}else{if(!x)throw new se;c=!0}else if(p===0){if(g){if(!x)throw new se;i<a?(o=!0,d=!0):(u=!0,c=!0)}else if(x)throw new se}else throw new se;if(o){if(u)throw new se;Ao.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Ao.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new se;Ao.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Ao.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Ao),vj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ul=function(n){vj(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Ot.POSSIBLE_FORMATS):null,a=t&&t.get(Ot.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Ot.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Re.EAN_13)||i.includes(Re.UPC_A)||i.includes(Re.EAN_8)||i.includes(Re.UPC_E))&&r.readers.push(new Um(t)),i.includes(Re.CODE_39)&&r.readers.push(new HE(a,o)),i.includes(Re.CODE_93)&&r.readers.push(new zE),i.includes(Re.CODE_128)&&r.readers.push(new FE),i.includes(Re.ITF)&&r.readers.push(new GE),i.includes(Re.CODABAR)&&r.readers.push(new VL),i.includes(Re.RSS_14)&&r.readers.push(new ZE),i.includes(Re.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new hj))),r.readers.length===0&&(r.readers.push(new Um(t)),r.readers.push(new HE),r.readers.push(new zE),r.readers.push(new Um(t)),r.readers.push(new FE),r.readers.push(new GE),r.readers.push(new ZE)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new se},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Cn),yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){yj(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Ul(r),t,r)||this}return e})(xu);var JE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vt=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),pt=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),xj=function(){function n(e,t,r,i,a,o){var u,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var d=0,p=o.getECCodewords(),g=o.getECBlocks();try{for(var x=JE(g),_=x.next();!_.done;_=x.next()){var E=_.value;d+=E.getCount()*(E.getDataCodewords()+p)}}catch(A){u={error:A}}finally{try{_&&!_.done&&(c=x.return)&&c.call(x)}finally{if(u)throw u.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new _e;try{for(var a=JE(n.VERSIONS),o=a.next();!o.done;o=a.next()){var u=o.value;if(u.symbolSizeRows===e&&u.symbolSizeColumns===t)return u}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new _e},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new vt(5,new pt(1,3))),new n(2,12,12,10,10,new vt(7,new pt(1,5))),new n(3,14,14,12,12,new vt(10,new pt(1,8))),new n(4,16,16,14,14,new vt(12,new pt(1,12))),new n(5,18,18,16,16,new vt(14,new pt(1,18))),new n(6,20,20,18,18,new vt(18,new pt(1,22))),new n(7,22,22,20,20,new vt(20,new pt(1,30))),new n(8,24,24,22,22,new vt(24,new pt(1,36))),new n(9,26,26,24,24,new vt(28,new pt(1,44))),new n(10,32,32,14,14,new vt(36,new pt(1,62))),new n(11,36,36,16,16,new vt(42,new pt(1,86))),new n(12,40,40,18,18,new vt(48,new pt(1,114))),new n(13,44,44,20,20,new vt(56,new pt(1,144))),new n(14,48,48,22,22,new vt(68,new pt(1,174))),new n(15,52,52,24,24,new vt(42,new pt(2,102))),new n(16,64,64,14,14,new vt(56,new pt(2,140))),new n(17,72,72,16,16,new vt(36,new pt(4,92))),new n(18,80,80,18,18,new vt(48,new pt(4,114))),new n(19,88,88,20,20,new vt(56,new pt(4,144))),new n(20,96,96,22,22,new vt(68,new pt(4,174))),new n(21,104,104,24,24,new vt(56,new pt(6,136))),new n(22,120,120,18,18,new vt(68,new pt(6,175))),new n(23,132,132,20,20,new vt(62,new pt(8,163))),new n(24,144,144,22,22,new vt(62,new pt(8,156),new pt(2,155))),new n(25,8,18,6,16,new vt(7,new pt(1,5))),new n(26,8,32,6,14,new vt(11,new pt(1,10))),new n(27,12,26,10,24,new vt(14,new pt(1,16))),new n(28,12,36,10,16,new vt(18,new pt(1,22))),new n(29,16,36,14,16,new vt(24,new pt(1,32))),new n(30,16,48,14,22,new vt(28,new pt(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),_j=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new _e;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new $i(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return xj.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),u=!1,c=!1,d=!1,p=!1;do if(r===a&&i===0&&!u)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,u=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!c)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(o&7)===0&&!d)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(o&7)===4&&!p)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new _e;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Oe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,u=r/a|0,c=o*i,d=u*a,p=new $i(d,c),g=0;g<o;++g)for(var x=g*i,_=0;_<u;++_)for(var E=_*a,A=0;A<i;++A)for(var S=g*(i+2)+1+A,I=x+A,N=0;N<a;++N){var P=_*(a+2)+1+N;if(e.get(P,S)){var V=E+N;p.set(V,I)}}return p},n}(),eb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,u=t.getECBlocks(),c=0,d=u.getECBlocks();try{for(var p=eb(d),g=p.next();!g.done;g=p.next()){var x=g.value;c+=x.getCount()}}catch(Ie){r={error:Ie}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var _=new Array(c),E=0;try{for(var A=eb(d),S=A.next();!S.done;S=A.next())for(var x=S.value,I=0;I<x.getCount();I++){var N=x.getDataCodewords(),P=u.getECCodewords()+N;_[E++]=new n(N,new Uint8Array(P))}}catch(Ie){a={error:Ie}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}for(var V=_[0].codewords.length,F=V-u.getECCodewords(),W=F-1,D=0,I=0;I<W;I++)for(var R=0;R<E;R++)_[R].codewords[I]=e[D++];for(var M=t.getVersionNumber()===24,L=M?8:E,R=0;R<L;R++)_[R].codewords[F-1]=e[D++];for(var H=_[0].codewords.length,I=F;I<H;I++)for(var R=0;R<E;R++){var G=M?(R+8)%E:R,U=M&&G>7?I-1:I;_[G].codewords[U]=e[D++]}if(D!==e.length)throw new Oe;return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),RC=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Oe(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,u=e<o?e:o,c=o-u,d=255>>8-u<<c;t=(a[i]&d)>>c,e-=u,r+=u,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;t=t<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),wn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(wn||(wn={}));var Ej=function(){function n(){}return n.decode=function(e){var t=new RC(e),r=new Xe,i=new Xe,a=new Array,o=wn.ASCII_ENCODE;do if(o===wn.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case wn.C40_ENCODE:this.decodeC40Segment(t,r);break;case wn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case wn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case wn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case wn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new _e}o=wn.ASCII_ENCODE}while(o!==wn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Y0(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new _e;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),wn.ASCII_ENCODE;if(a===129)return wn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return wn.C40_ENCODE;case 231:return wn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return wn.ANSIX12_ENCODE;case 239:return wn.TEXT_ENCODE;case 240:return wn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new _e;break}}while(e.available()>0);return wn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new _e;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new _e}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new _e}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new _e;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new _e}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new _e;break;default:throw new _e}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new _e;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new _e;for(var u=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new _e;u[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(u);try{t.append(ti.decode(u,at.ISO88591))}catch(d){throw new Lf("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),bj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aj=function(){function n(){this.rsDecoder=new K0(Tr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new _j(e),a=i.getVersion(),o=i.readCodewords(),u=wj.getDataBlocks(o,a),c=0;try{for(var d=bj(u),p=d.next();!p.done;p=d.next()){var g=p.value;c+=g.getNumDataCodewords()}}catch(P){t={error:P}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var x=new Uint8Array(c),_=u.length,E=0;E<_;E++){var A=u[E],S=A.getCodewords(),I=A.getNumDataCodewords();this.correctErrors(S,I);for(var N=0;N<I;N++)x[N*_+E]=S[N]}return Ej.decode(x)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new hn}for(var i=0;i<t;i++)e[i]=r[i]},n}(),Sj=function(){function n(e){this.image=e,this.rectangleDetector=new Og(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new se;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],u=this.transitionsBetween(r,o)+1,c=this.transitionsBetween(a,o)+1;(u&1)===1&&(u+=1),(c&1)===1&&(c+=1),4*u<7*c&&4*c<7*u&&(u=c=Math.max(u,c));var d=n.sampleGrid(this.image,r,i,a,o,u,c);return new Jv(d,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Se(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Se(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),u=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),p=o,g=[a,t,r,i];return p>u&&(p=u,g[0]=t,g[1]=r,g[2]=i,g[3]=a),p>c&&(p=c,g[0]=r,g[1]=i,g[2]=a,g[3]=t),p>d&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),u=n.shiftPoint(r,i,(o+1)*4),c=n.shiftPoint(i,r,(o+1)*4),d=this.transitionsBetween(u,t),p=this.transitionsBetween(c,a);return d<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),u=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(u+1)*4),d=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(c,a),u=this.transitionsBetween(d,a);var p=new Se(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Se(a.getX()+(t.getX()-r.getX())/(u+1),a.getY()+(t.getY()-r.getY())/(u+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var x=this.transitionsBetween(c,p)+this.transitionsBetween(d,p),_=this.transitionsBetween(c,g)+this.transitionsBetween(d,g);return x>_?p:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,u=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,u*4),d=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(c,a)+1,u=this.transitionsBetween(d,a)+1,(o&1)===1&&(o+=1),(u&1)===1&&(u+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var x,_;return c=n.shiftPoint(t,r,u*4),c=n.shiftPoint(c,a,o*4),x=n.shiftPoint(r,t,u*4),x=n.shiftPoint(x,i,o*4),d=n.shiftPoint(i,a,u*4),d=n.shiftPoint(d,r,o*4),_=n.shiftPoint(a,i,u*4),_=n.shiftPoint(_,t,o*4),[c,x,d,_]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,u){var c=ey.getInstance();return c.sampleGrid(e,o,u,.5,.5,o-.5,.5,o-.5,u-.5,.5,u-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),u=Math.abs(o-i)>Math.abs(a-r);if(u){var c=r;r=i,i=c,c=a,a=o,o=c}for(var d=Math.abs(a-r),p=Math.abs(o-i),g=-d/2,x=i<o?1:-1,_=r<a?1:-1,E=0,A=this.image.get(u?i:r,u?r:i),S=r,I=i;S!==a;S+=_){var N=this.image.get(u?I:S,u?S:I);if(N!==A&&(E++,A=N),g+=p,g>0){if(I===o)break;I+=x,g-=d}}return E},n}(),f0=function(){function n(){this.decoder=new Aj}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Ot.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new Sj(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var u=r.getRawBytes(),c=new lr(r.getText(),u,8*u.length,i,Re.DATA_MATRIX,Rt.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(Qn.BYTE_SEGMENTS,d);var p=r.getECLevel();return p!=null&&c.putMetadata(Qn.ERROR_CORRECTION_LEVEL,p),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new se;var i=this.moduleSize(t,e),a=t[1],o=r[1],u=t[0],c=r[0],d=(c-u+1)/i,p=(o-a+1)/i;if(d<=0||p<=0)throw new se;var g=i/2;a+=g,u+=g;for(var x=new $i(d,p),_=0;_<p;_++)for(var E=a+_*i,A=0;A<d;A++)e.get(u+A*i,E)&&x.set(A,_);return x},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new se;var o=i-e[0];if(o===0)throw new se;return o},n.NO_POINTS=[],n}(),Tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Tj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new f0,t)||this}return e})(xu);var Fl;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Fl||(Fl={}));var Cj=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new rn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Oe;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Fl.L,"L",1),n.M=new n(Fl.M,"M",0),n.Q=new n(Fl.Q,"Q",3),n.H=new n(Fl.H,"H",2),n}(),Ij=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OC=function(){function n(e){this.errorCorrectionLevel=Cj.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ye.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var u=Ij(n.FORMAT_INFO_DECODE_LOOKUP),c=u.next();!c.done;c=u.next()){var d=c.value,p=d[0];if(p===e||p===t)return new n(d[1]);var g=n.numBitsDiffering(e,p);g<a&&(o=d[1],a=g),e!==t&&(g=n.numBitsDiffering(t,p),g<a&&(o=d[1],a=g))}}catch(x){r={error:x}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Nj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=Nj(i),o=a.next();!o.done;o=a.next()){var u=o.value;r+=u.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),j=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Rj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oo=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var u=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var p=Rj(d),g=p.next();!g.done;g=p.next()){var x=g.value;u+=x.getCount()*(x.getDataCodewords()+c)}}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new _e;try{return this.getVersionForNumber((e-17)/4)}catch{throw new _e}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Oe;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=OC.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new $i(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Z(7,new j(1,19)),new Z(10,new j(1,16)),new Z(13,new j(1,13)),new Z(17,new j(1,9))),new n(2,Int32Array.from([6,18]),new Z(10,new j(1,34)),new Z(16,new j(1,28)),new Z(22,new j(1,22)),new Z(28,new j(1,16))),new n(3,Int32Array.from([6,22]),new Z(15,new j(1,55)),new Z(26,new j(1,44)),new Z(18,new j(2,17)),new Z(22,new j(2,13))),new n(4,Int32Array.from([6,26]),new Z(20,new j(1,80)),new Z(18,new j(2,32)),new Z(26,new j(2,24)),new Z(16,new j(4,9))),new n(5,Int32Array.from([6,30]),new Z(26,new j(1,108)),new Z(24,new j(2,43)),new Z(18,new j(2,15),new j(2,16)),new Z(22,new j(2,11),new j(2,12))),new n(6,Int32Array.from([6,34]),new Z(18,new j(2,68)),new Z(16,new j(4,27)),new Z(24,new j(4,19)),new Z(28,new j(4,15))),new n(7,Int32Array.from([6,22,38]),new Z(20,new j(2,78)),new Z(18,new j(4,31)),new Z(18,new j(2,14),new j(4,15)),new Z(26,new j(4,13),new j(1,14))),new n(8,Int32Array.from([6,24,42]),new Z(24,new j(2,97)),new Z(22,new j(2,38),new j(2,39)),new Z(22,new j(4,18),new j(2,19)),new Z(26,new j(4,14),new j(2,15))),new n(9,Int32Array.from([6,26,46]),new Z(30,new j(2,116)),new Z(22,new j(3,36),new j(2,37)),new Z(20,new j(4,16),new j(4,17)),new Z(24,new j(4,12),new j(4,13))),new n(10,Int32Array.from([6,28,50]),new Z(18,new j(2,68),new j(2,69)),new Z(26,new j(4,43),new j(1,44)),new Z(24,new j(6,19),new j(2,20)),new Z(28,new j(6,15),new j(2,16))),new n(11,Int32Array.from([6,30,54]),new Z(20,new j(4,81)),new Z(30,new j(1,50),new j(4,51)),new Z(28,new j(4,22),new j(4,23)),new Z(24,new j(3,12),new j(8,13))),new n(12,Int32Array.from([6,32,58]),new Z(24,new j(2,92),new j(2,93)),new Z(22,new j(6,36),new j(2,37)),new Z(26,new j(4,20),new j(6,21)),new Z(28,new j(7,14),new j(4,15))),new n(13,Int32Array.from([6,34,62]),new Z(26,new j(4,107)),new Z(22,new j(8,37),new j(1,38)),new Z(24,new j(8,20),new j(4,21)),new Z(22,new j(12,11),new j(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Z(30,new j(3,115),new j(1,116)),new Z(24,new j(4,40),new j(5,41)),new Z(20,new j(11,16),new j(5,17)),new Z(24,new j(11,12),new j(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Z(22,new j(5,87),new j(1,88)),new Z(24,new j(5,41),new j(5,42)),new Z(30,new j(5,24),new j(7,25)),new Z(24,new j(11,12),new j(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Z(24,new j(5,98),new j(1,99)),new Z(28,new j(7,45),new j(3,46)),new Z(24,new j(15,19),new j(2,20)),new Z(30,new j(3,15),new j(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Z(28,new j(1,107),new j(5,108)),new Z(28,new j(10,46),new j(1,47)),new Z(28,new j(1,22),new j(15,23)),new Z(28,new j(2,14),new j(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Z(30,new j(5,120),new j(1,121)),new Z(26,new j(9,43),new j(4,44)),new Z(28,new j(17,22),new j(1,23)),new Z(28,new j(2,14),new j(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Z(28,new j(3,113),new j(4,114)),new Z(26,new j(3,44),new j(11,45)),new Z(26,new j(17,21),new j(4,22)),new Z(26,new j(9,13),new j(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Z(28,new j(3,107),new j(5,108)),new Z(26,new j(3,41),new j(13,42)),new Z(30,new j(15,24),new j(5,25)),new Z(28,new j(15,15),new j(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Z(28,new j(4,116),new j(4,117)),new Z(26,new j(17,42)),new Z(28,new j(17,22),new j(6,23)),new Z(30,new j(19,16),new j(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Z(28,new j(2,111),new j(7,112)),new Z(28,new j(17,46)),new Z(30,new j(7,24),new j(16,25)),new Z(24,new j(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Z(30,new j(4,121),new j(5,122)),new Z(28,new j(4,47),new j(14,48)),new Z(30,new j(11,24),new j(14,25)),new Z(30,new j(16,15),new j(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Z(30,new j(6,117),new j(4,118)),new Z(28,new j(6,45),new j(14,46)),new Z(30,new j(11,24),new j(16,25)),new Z(30,new j(30,16),new j(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Z(26,new j(8,106),new j(4,107)),new Z(28,new j(8,47),new j(13,48)),new Z(30,new j(7,24),new j(22,25)),new Z(30,new j(22,15),new j(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Z(28,new j(10,114),new j(2,115)),new Z(28,new j(19,46),new j(4,47)),new Z(28,new j(28,22),new j(6,23)),new Z(30,new j(33,16),new j(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Z(30,new j(8,122),new j(4,123)),new Z(28,new j(22,45),new j(3,46)),new Z(30,new j(8,23),new j(26,24)),new Z(30,new j(12,15),new j(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Z(30,new j(3,117),new j(10,118)),new Z(28,new j(3,45),new j(23,46)),new Z(30,new j(4,24),new j(31,25)),new Z(30,new j(11,15),new j(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Z(30,new j(7,116),new j(7,117)),new Z(28,new j(21,45),new j(7,46)),new Z(30,new j(1,23),new j(37,24)),new Z(30,new j(19,15),new j(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Z(30,new j(5,115),new j(10,116)),new Z(28,new j(19,47),new j(10,48)),new Z(30,new j(15,24),new j(25,25)),new Z(30,new j(23,15),new j(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Z(30,new j(13,115),new j(3,116)),new Z(28,new j(2,46),new j(29,47)),new Z(30,new j(42,24),new j(1,25)),new Z(30,new j(23,15),new j(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Z(30,new j(17,115)),new Z(28,new j(10,46),new j(23,47)),new Z(30,new j(10,24),new j(35,25)),new Z(30,new j(19,15),new j(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Z(30,new j(17,115),new j(1,116)),new Z(28,new j(14,46),new j(21,47)),new Z(30,new j(29,24),new j(19,25)),new Z(30,new j(11,15),new j(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Z(30,new j(13,115),new j(6,116)),new Z(28,new j(14,46),new j(23,47)),new Z(30,new j(44,24),new j(7,25)),new Z(30,new j(59,16),new j(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Z(30,new j(12,121),new j(7,122)),new Z(28,new j(12,47),new j(26,48)),new Z(30,new j(39,24),new j(14,25)),new Z(30,new j(22,15),new j(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Z(30,new j(6,121),new j(14,122)),new Z(28,new j(6,47),new j(34,48)),new Z(30,new j(46,24),new j(10,25)),new Z(30,new j(2,15),new j(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Z(30,new j(17,122),new j(4,123)),new Z(28,new j(29,46),new j(14,47)),new Z(30,new j(49,24),new j(10,25)),new Z(30,new j(24,15),new j(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Z(30,new j(4,122),new j(18,123)),new Z(28,new j(13,46),new j(32,47)),new Z(30,new j(48,24),new j(14,25)),new Z(30,new j(42,15),new j(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Z(30,new j(20,117),new j(4,118)),new Z(28,new j(40,47),new j(7,48)),new Z(30,new j(43,24),new j(22,25)),new Z(30,new j(10,15),new j(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Z(30,new j(19,118),new j(6,119)),new Z(28,new j(18,47),new j(31,48)),new Z(30,new j(34,24),new j(34,25)),new Z(30,new j(20,15),new j(61,16)))],n}(),kn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(kn||(kn={}));var tb=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[kn.DATA_MASK_000,new n(kn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[kn.DATA_MASK_001,new n(kn.DATA_MASK_001,function(e,t){return(e&1)===0})],[kn.DATA_MASK_010,new n(kn.DATA_MASK_010,function(e,t){return t%3===0})],[kn.DATA_MASK_011,new n(kn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[kn.DATA_MASK_100,new n(kn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[kn.DATA_MASK_101,new n(kn.DATA_MASK_101,function(e,t){return e*t%6===0})],[kn.DATA_MASK_110,new n(kn.DATA_MASK_110,function(e,t){return e*t%6<3})],[kn.DATA_MASK_111,new n(kn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),Oj=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new _e;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=OC.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new _e},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Oo.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var u=Oo.decodeVersionInformation(r);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(u=Oo.decodeVersionInformation(r),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new _e},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=tb.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,u=new Uint8Array(t.getTotalCodewords()),c=0,d=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var x=0;x<i;x++)for(var _=o?i-1-x:x,E=0;E<2;E++)a.get(g-E,_)||(p++,d<<=1,this.bitMatrix.get(g-E,_)&&(d|=1),p===8&&(u[c++]=d,p=0,d=0));o=!o}if(c!==t.getTotalCodewords())throw new _e;return u},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=tb.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),nb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,u;if(e.length!==t.getTotalCodewords())throw new Oe;var c=t.getECBlocksForLevel(r),d=0,p=c.getECBlocks();try{for(var g=nb(p),x=g.next();!x.done;x=g.next()){var _=x.value;d+=_.getCount()}}catch(U){i={error:U}}finally{try{x&&!x.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var E=new Array(d),A=0;try{for(var S=nb(p),I=S.next();!I.done;I=S.next())for(var _=I.value,N=0;N<_.getCount();N++){var P=_.getDataCodewords(),V=c.getECCodewordsPerBlock()+P;E[A++]=new n(P,new Uint8Array(V))}}catch(U){o={error:U}}finally{try{I&&!I.done&&(u=S.return)&&u.call(S)}finally{if(o)throw o.error}}for(var F=E[0].codewords.length,W=E.length-1;W>=0;){var D=E[W].codewords.length;if(D===F)break;W--}W++;for(var R=F-c.getECCodewordsPerBlock(),M=0,N=0;N<R;N++)for(var L=0;L<A;L++)E[L].codewords[N]=e[M++];for(var L=W;L<A;L++)E[L].codewords[R]=e[M++];for(var H=E[0].codewords.length,N=R;N<H;N++)for(var L=0;L<A;L++){var G=L<W?N:N+1;E[L].codewords[G]=e[M++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Qr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Qr||(Qr={}));var Pt=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Oe;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Qr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Qr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Qr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Qr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Qr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Qr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Qr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Qr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Qr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Qr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),Pj=function(){function n(){}return n.decode=function(e,t,r,i){var a=new RC(e),o=new Xe,u=new Array,c=-1,d=-1;try{var p=null,g=!1,x=void 0;do{if(a.available()<4)x=Pt.TERMINATOR;else{var _=a.readBits(4);x=Pt.forBits(_)}switch(x){case Pt.TERMINATOR:break;case Pt.FNC1_FIRST_POSITION:case Pt.FNC1_SECOND_POSITION:g=!0;break;case Pt.STRUCTURED_APPEND:if(a.available()<16)throw new _e;c=a.readBits(8),d=a.readBits(8);break;case Pt.ECI:var E=n.parseECIValue(a);if(p=An.getCharacterSetECIByValue(E),p===null)throw new _e;break;case Pt.HANZI:var A=a.readBits(4),S=a.readBits(x.getCharacterCountBits(t));A===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,S);break;default:var I=a.readBits(x.getCharacterCountBits(t));switch(x){case Pt.NUMERIC:n.decodeNumericSegment(a,o,I);break;case Pt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,I,g);break;case Pt.BYTE:n.decodeByteSegment(a,o,I,p,u,i);break;case Pt.KANJI:n.decodeKanjiSegment(a,o,I);break;default:throw new _e}break}}while(x!==Pt.TERMINATOR)}catch{throw new _e}return new Y0(e,o.toString(),u.length===0?null:u,r===null?null:r.toString(),c,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new _e;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),u=o/96<<8&4294967295|o%96;u<959?u+=41377:u+=42657,i[a]=u>>8&255,i[a+1]=u&255,a+=2,r--}try{t.append(ti.decode(i,at.GB2312))}catch(c){throw new _e(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new _e;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),u=o/192<<8&4294967295|o%192;u<7936?u+=33088:u+=49472,i[a]=u>>8,i[a+1]=u,a+=2,r--}try{t.append(ti.decode(i,at.SHIFT_JIS))}catch(c){throw new _e(c)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new _e;for(var u=new Uint8Array(r),c=0;c<r;c++)u[c]=e.readBits(8);var d;i===null?d=at.guessEncoding(u,o):d=i.getName();try{t.append(ti.decode(u,d))}catch(p){throw new _e(p)}a.push(u)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new _e;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new _e;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new _e;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var u=a;u<t.length();u++)t.charAt(u)==="%"&&(u<t.length()-1&&t.charAt(u+1)==="%"?t.deleteCharAt(u+1):t.setCharAt(u,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new _e;var i=e.readBits(10);if(i>=1e3)throw new _e;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new _e;var a=e.readBits(7);if(a>=100)throw new _e;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new _e;var o=e.readBits(4);if(o>=10)throw new _e;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new _e},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),DC=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),rb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mj=function(){function n(){this.rsDecoder=new K0(Tr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix($i.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new Oj(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new DC(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,u=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),p=Dj.getDataBlocks(d,u,c),g=0;try{for(var x=rb(p),_=x.next();!_.done;_=x.next()){var E=_.value;g+=E.getNumDataCodewords()}}catch(W){r={error:W}}finally{try{_&&!_.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}var A=new Uint8Array(g),S=0;try{for(var I=rb(p),N=I.next();!N.done;N=I.next()){var E=N.value,P=E.getCodewords(),V=E.getNumDataCodewords();this.correctErrors(P,V);for(var F=0;F<V;F++)A[S++]=P[F]}}catch(W){a={error:W}}finally{try{N&&!N.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}return Pj.decode(A,u,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new hn}for(var i=0;i<t;i++)e[i]=r[i]},n}(),kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lj=function(n){kj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,u=(this.estimatedModuleSize+i)/2;return new e(a,o,u)},e}(Se),jj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bj=function(){function n(e,t,r,i,a,o,u){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),u=this.image,c=0;c<t;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var p=e;p<i&&!u.get(p,d);)p++;for(var g=0;p<i;){if(u.get(p,d))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,d,p);if(x!==null)return x}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;p++}if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,d,i);if(x!==null)return x}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;for(var c=e;c>=0&&a.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c)&&u[1]<=r;)u[1]++,c++;if(c===o||u[1]>r)return NaN;for(;c<o&&!a.get(t,c)&&u[2]<=r;)u[2]++,c++;if(u[2]>r)return NaN;var d=u[0]+u[1]+u[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],u=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,u,2*e[1],o);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var p=jj(this.possibleCenters),g=p.next();!g.done;g=p.next()){var x=g.value;if(x.aboutEquals(d,c,u))return x.combineEstimate(c,u,d)}}catch(E){i={error:E}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var _=new Lj(u,c,d);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null},n}(),Vj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uj=function(n){Vj(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,u=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,u,c,a)},e}(Se),Fj=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),Pc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hj=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Ot.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ot.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),u=Math.floor(3*a/(4*n.MAX_MODULES));(u<n.MIN_SKIP||t)&&(u=n.MIN_SKIP);for(var c=!1,d=new Int32Array(5),p=u-1;p<a&&!c;p+=u){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var g=0,x=0;x<o;x++)if(i.get(x,p))(g&1)===1&&g++,d[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(d)){var _=this.handlePossibleCenter(d,p,x,r);if(_===!0)if(u=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>d[2]&&(p+=E-d[2]-u,x=o-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;continue}g=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;else d[++g]++;else d[g]++;if(n.foundPatternCross(d)){var _=this.handlePossibleCenter(d,p,o,r);_===!0&&(u=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var A=this.selectBestPatterns();return Se.orderBestPatterns(A),new Fj(A)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,u=this.image;e>=o&&t>=o&&u.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!u.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&u.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var c=u.getHeight(),d=u.getWidth();for(o=1;e+o<c&&t+o<d&&u.get(t+o,e+o);)a[2]++,o++;if(e+o>=c||t+o>=d)return!1;for(;e+o<c&&t+o<d&&!u.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=c||t+o>=d||a[3]>=r)return!1;for(;e+o<c&&t+o<d&&u.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),u=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c);)u[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(t,c)&&u[3]<r;)u[3]++,c++;if(c===o||u[3]>=r)return NaN;for(;c<o&&a.get(t,c)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var d=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),u=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<o&&a.get(c,t);)u[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,t)&&u[3]<r;)u[3]++,c++;if(c===o||u[3]>=r)return NaN;for(;c<o&&a.get(c,t)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var d=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(u)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(u),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(u),Math.floor(o),e[2],a)))){for(var c=a/7,d=!1,p=this.possibleCenters,g=0,x=p.length;g<x;g++){var _=p[g];if(_.aboutEquals(c,u,o)){p[g]=_.combineEstimate(u,o,c),d=!0;break}}if(!d){var E=new Uj(o,u,c);p.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Pc(this.possibleCenters),o=a.next();!o.done;o=a.next()){var u=o.value;if(u.getCount()>=n.CENTER_QUORUM)if(i==null)i=u;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-u.getX())-Math.abs(i.getY()-u.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,u=this.possibleCenters.length;try{for(var c=Pc(this.possibleCenters),d=c.next();!d.done;d=c.next()){var p=d.value;p.getCount()>=n.CENTER_QUORUM&&(a++,o+=p.getEstimatedModuleSize())}}catch(A){e={error:A}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var g=o/u,x=0;try{for(var _=Pc(this.possibleCenters),E=_.next();!E.done;E=_.next()){var p=E.value;x+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(A){r={error:A}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}return x<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new se;var o=this.possibleCenters,u;if(a>3){var c=0,d=0;try{for(var p=Pc(this.possibleCenters),g=p.next();!g.done;g=p.next()){var x=g.value,_=x.getEstimatedModuleSize();c+=_,d+=_*_}}catch(F){e={error:F}}finally{try{g&&!g.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}u=c/a;var E=Math.sqrt(d/a-u*u);o.sort(function(F,W){var D=Math.abs(W.getEstimatedModuleSize()-u),R=Math.abs(F.getEstimatedModuleSize()-u);return D<R?-1:D>R?1:0});for(var A=Math.max(.2*u,E),S=0;S<o.length&&o.length>3;S++){var I=o[S];Math.abs(I.getEstimatedModuleSize()-u)>A&&(o.splice(S,1),S--)}}if(o.length>3){var c=0;try{for(var N=Pc(o),P=N.next();!P.done;P=N.next()){var V=P.value;c+=V.getEstimatedModuleSize()}}catch(W){r={error:W}}finally{try{P&&!P.done&&(i=N.return)&&i.call(N)}finally{if(r)throw r.error}}u=c/o.length,o.sort(function(W,D){if(D.getCount()===W.getCount()){var R=Math.abs(D.getEstimatedModuleSize()-u),M=Math.abs(W.getEstimatedModuleSize()-u);return R<M?1:R>M?-1:0}else return D.getCount()-W.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),zj=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ot.NEED_RESULT_POINT_CALLBACK);var t=new Hj(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new se("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),u=Oo.getProvisionalVersionForDimension(o),c=u.getDimensionForVersion()-7,d=null;if(u.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),x=1-3/c,_=Math.floor(t.getX()+x*(p-t.getX())),E=Math.floor(t.getY()+x*(g-t.getY())),A=4;A<=16;A<<=1)try{d=this.findAlignmentInRegion(a,_,E,A);break}catch(P){if(!(P instanceof se))throw P}var S=n.createTransform(t,r,i,d,o),I=n.sampleGrid(this.image,S,o),N;return d===null?N=[i,t,r]:N=[i,t,r,d],new Jv(I,N)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,u,c,d,p;return i!==null?(u=i.getX(),c=i.getY(),d=o-3,p=d):(u=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),d=o,p=o),TC.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,d,p,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),u,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=ey.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=ft.round(Se.distance(e,t)/i),o=ft.round(Se.distance(e,r)/i),u=Math.floor((a+o)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new se("Dimensions could be not found.")}return u},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,u=e-(r-e);u<0?(o=e/(e-u),u=0):u>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*o);return o=1,c<0?(o=t/(t-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),u=Math.floor(e+(u-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,u,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var u=Math.abs(r-e),c=Math.abs(i-t),d=-u/2,p=e<r?1:-1,g=t<i?1:-1,x=0,_=r+p,E=e,A=t;E!==_;E+=p){var S=a?A:E,I=a?E:A;if(x===1===this.image.get(S,I)){if(x===2)return ft.distance(E,A,e,t);x++}if(d+=c,d>0){if(A===i)break;A+=g,d-=u}}return x===2?ft.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),u=Math.min(this.image.getWidth()-1,t+a);if(u-o<e*3)throw new se("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new se("Alignment bottom exceeds estimated module size.");var p=new Bj(this.image,o,c,u-o,d-c,e,this.resultPointCallback);return p.find()},n}(),d0=function(){function n(){this.decoder=new Mj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Ot.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new zj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof DC&&r.getOther().applyMirroredCorrection(i);var u=new lr(r.getText(),r.getRawBytes(),void 0,i,Re.QR_CODE,void 0),c=r.getByteSegments();c!==null&&u.putMetadata(Qn.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&u.putMetadata(Qn.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(u.putMetadata(Qn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),u.putMetadata(Qn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new se;var i=this.moduleSize(t,e),a=t[1],o=r[1],u=t[0],c=r[0];if(u>=c||a>=o)throw new se;if(o-a!==c-u&&(c=u+(o-a),c>=e.getWidth()))throw new se;var d=Math.round((c-u+1)/i),p=Math.round((o-a+1)/i);if(d<=0||p<=0)throw new se;if(p!==d)throw new se;var g=Math.floor(i/2);a+=g,u+=g;var x=u+Math.floor((d-1)*i)-c;if(x>0){if(x>g)throw new se;u-=x}var _=a+Math.floor((p-1)*i)-o;if(_>0){if(_>g)throw new se;a-=_}for(var E=new $i(d,p),A=0;A<p;A++)for(var S=a+Math.floor(A*i),I=0;I<d;I++)e.get(u+Math.floor(I*i),S)&&E.set(I,A);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],u=!0,c=0;a<i&&o<r;){if(u!==t.get(a,o)){if(++c===5)break;u=!u}a++,o++}if(a===i||o===r)throw new se;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),Gj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ot=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return ft.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=Gj(e),u=o.next();!u.done;u=o.next()){var c=u.value;i[a++]=c}}catch(d){t={error:d}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Tn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),qj=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Xj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wj=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new qj(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,u=0,c=!1;o<t.getHeight();){var d=n.findVertices(t,o,u);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,u=0;try{for(var p=(r=void 0,Xj(a)),g=p.next();!g.done;g=p.next()){var x=g.value;x[1]!=null&&(o=Math.trunc(Math.max(o,x[1].getY()))),x[3]!=null&&(o=Math.max(o,Math.trunc(x[3].getY())))}}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(u=Math.trunc(d[2].getX()),o=Math.trunc(d[2].getY())):(u=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var u=new Array(4),c=!1,d=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,o,d);if(p!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,o,d);if(g!=null)p=g;else{i++;break}}u[0]=new Se(p[0],i),u[1]=new Se(p[1],i),c=!0;break}}var x=i+1;if(c){for(var _=0,g=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);x<t;x++){var p=n.findGuardPattern(e,g[0],x,r,!1,o,d);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,_=0;else{if(_>n.SKIPPED_ROW_COUNT_MAX)break;_++}}x-=_+1,u[2]=new Se(g[0],x),u[3]=new Se(g[1],x)}return x-i<n.BARCODE_MIN_HEIGHT&&Tn.fill(u,null),u},n.findGuardPattern=function(e,t,r,i,a,o,u){Tn.fillWithin(u,0,u.length,0);for(var c=t,d=0;e.get(c,r)&&c>0&&d++<n.MAX_PIXEL_DRIFT;)c--;for(var p=c,g=0,x=o.length,_=a;p<i;p++){var E=e.get(p,r);if(E!==_)u[g]++;else{if(g===x-1){if(n.patternMatchVariance(u,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,p]);c+=u[0]+u[1],Rt.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,_=!_}}return g===x-1&&n.patternMatchVariance(u,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,u=0;u<i;u++)a+=e[u],o+=t[u];if(a<o)return 1/0;var c=a/o;r*=c;for(var d=0,p=0;p<i;p++){var g=e[p],x=t[p]*c,_=g>x?g-x:x-g;if(_>r)return 1/0;d+=_}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),$j=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=function(){function n(e,t){if(t.length===0)throw new Oe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Rt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=$j(this.coefficients),o=a.next();!o.done;o=a.next()){var u=o.value;i=this.field.add(i,u)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,p=1;p<d;p++)c=this.field.add(this.field.multiply(e,c),this.coefficients[p]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Oe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Rt.arraycopy(r,0,a,0,o);for(var u=o;u<r.length;u++)a[u]=this.field.add(t[u-o],r[u]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Oe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Oe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),u=0;u<r;u++)for(var c=t[u],d=0;d<a;d++)o[u+d]=this.field.add(o[u+d],this.field.multiply(c,i[d]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Oe;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Xe,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),Yj=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Oe;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new SC;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),Kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qj=function(n){Kj(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Io(i,new Int32Array([0])),i.one=new Io(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Oe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Io(this,i)},e.PDF417_GF=new e(ot.NUMBER_OF_CODEWORDS,3),e}(Yj),Zj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jj=function(){function n(){this.field=Qj.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Io(this.field,e),u=new Int32Array(t),c=!1,d=t;d>0;d--){var p=o.evaluateAt(this.field.exp(d));u[t-d]=p,p!==0&&(c=!0)}if(!c)return 0;var g=this.field.getOne();if(r!=null)try{for(var x=Zj(r),_=x.next();!_.done;_=x.next()){var E=_.value,A=this.field.exp(e.length-1-E),S=new Io(this.field,new Int32Array([this.field.subtract(0,A),1]));g=g.multiply(S)}}catch(R){i={error:R}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}for(var I=new Io(this.field,u),N=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),I,t),P=N[0],V=N[1],F=this.findErrorLocations(P),W=this.findErrorMagnitudes(V,P,F),d=0;d<F.length;d++){var D=e.length-1-this.field.log(F[d]);if(D<0)throw hn.getChecksumInstance();e[D]=this.field.subtract(e[D],W[d])}return F.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,u=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(r/2);){var d=a,p=u;if(a=o,u=c,a.isZero())throw hn.getChecksumInstance();o=d;for(var g=this.field.getZero(),x=a.getCoefficient(a.getDegree()),_=this.field.inverse(x);o.getDegree()>=a.getDegree()&&!o.isZero();){var E=o.getDegree()-a.getDegree(),A=this.field.multiply(o.getCoefficient(o.getDegree()),_);g=g.add(this.field.buildMonomial(E,A)),o=o.subtract(a.multiplyByMonomial(E,A))}c=g.multiply(u).subtract(p).negative()}var S=c.getCoefficient(0);if(S===0)throw hn.getChecksumInstance();var I=this.field.inverse(S),N=c.multiply(I),P=o.multiply(I);return[N,P]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw hn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var u=new Io(this.field,a),c=r.length,d=new Int32Array(c),o=0;o<c;o++){var p=this.field.inverse(r[o]),g=this.field.subtract(0,e.evaluateAt(p)),x=this.field.inverse(u.evaluateAt(p));d[o]=this.field.multiply(g,x)}return d},n}(),Pg=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,u=i==null||a==null;if(o&&u)throw new se;o?(t=new Se(0,i.getY()),r=new Se(0,a.getY())):u&&(i=new Se(e.getWidth()-1,t.getY()),a=new Se(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,u=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var p=new Se(c.getX(),d);r?i=p:o=p}if(t>0){var g=r?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+t);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);var _=new Se(g.getX(),x);r?a=_:u=_}return new n(this.image,i,a,o,u)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),eB=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),ny=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,u,c,d,p,g){if(o==="%%")return"%";if(t[++r]!==void 0){o=d?parseInt(d.substr(1)):void 0;var x=p?parseInt(p.substr(1)):void 0,_;switch(g){case"s":_=t[r];break;case"c":_=t[r][0];break;case"f":_=parseFloat(t[r]).toFixed(o);break;case"p":_=parseFloat(t[r]).toPrecision(o);break;case"e":_=parseFloat(t[r]).toExponential(o);break;case"x":_=parseInt(t[r]).toString(x||16);break;case"d":_=parseFloat(parseInt(t[r],x||10).toPrecision(o)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(x);for(var E=parseInt(c),A=c&&c[0]+""=="0"?"0":" ";_.length<E;)_=u!==void 0?_+A:A+_;return _}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),tB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PC=function(){function n(e){this.boundingBox=new Pg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new ny,i=0;try{for(var a=tB(this.codewords),o=a.next();!o.done;o=a.next()){var u=o.value;if(u==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,u.getRowNumber(),u.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),nB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rB=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},zc=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,x){var _={getKey:function(){return g},getValue:function(){return x}};_.getValue()>r?(r=_.getValue(),i=[],i.push(_.getKey())):_.getValue()===r&&i.push(_.getKey())};try{for(var o=nB(this.values.entries()),u=o.next();!u.done;u=o.next()){var c=rB(u.value,2),d=c[0],p=c[1];a(d,p)}}catch(g){e={error:g}}finally{try{u&&!u.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return ot.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),iB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ib=function(n){iB(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Hm(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=-1,p=1,g=0,x=u;x<c;x++)if(r[x]!=null){var _=r[x],E=_.getRowNumber()-d;if(E===0)g++;else if(E===1)p=Math.max(p,g),g=1,d=_.getRowNumber();else if(E<0||_.getRowNumber()>=t.getRowCount()||E>x)r[x]=null;else{var A=void 0;p>2?A=(p-2)*E:A=E;for(var S=A>=x,I=1;I<=A&&!S;I++)S=r[x-I]!=null;S?r[x]=null:(d=_.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Hm(this.getCodewords()),u=o.next();!u.done;u=o.next()){var c=u.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,p=o;p<u;p++)if(c[p]!=null){var g=c[p];g.setRowNumberAsRowIndicatorColumn();var x=g.getRowNumber()-d;x===0||(x===1?d=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?c[p]=null:d=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new zc,o=new zc,u=new zc,c=new zc;try{for(var d=Hm(i),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var x=g.getValue()%30,_=g.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:o.setValue(x*3+1);break;case 1:c.setValue(x/3),u.setValue(x%3);break;case 2:a.setValue(x+1);break}}}}catch(A){t={error:A}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||u.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+u.getValue()[0]<ot.MIN_ROWS_IN_BARCODE||o.getValue()[0]+u.getValue()[0]>ot.MAX_ROWS_IN_BARCODE)return null;var E=new eB(a.getValue()[0],o.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,u=a.getRowNumber();if(u>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(PC),aB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sB=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ot.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var u=this.detectionResultColumns[o].getCodewords()[r];u!=null&&(a=n.adjustRowNumberIfValid(i,a,u),u.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var u=this.detectionResultColumns[o].getCodewords()[r];u!=null&&(a=n.adjustRowNumberIfValid(i,a,u),u.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],u=this.detectionResultColumns[e-1].getCodewords(),c=u;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=u[t],d[3]=c[t],t>0&&(d[0]=r[t-1],d[4]=u[t-1],d[5]=c[t-1]),t>1&&(d[8]=r[t-2],d[10]=u[t-2],d[11]=c[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=u[t+1],d[7]=c[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=u[t+2],d[13]=c[t+2]);try{for(var p=aB(d),g=p.next();!g.done;g=p.next()){var x=g.value;if(n.adjustRowNumber(o,x))return}}catch(_){i={error:_}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new ny,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),oB=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),lB=function(){function n(){}return n.initialize=function(){for(var e=0;e<ot.SYMBOL_TABLE.length;e++)for(var t=ot.SYMBOL_TABLE[e],r=t&1,i=0;i<ot.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(ot.BARS_IN_MODULE)),n.RATIOS_TABLE[e][ot.BARS_IN_MODULE-i-1]=Math.fround(a/ot.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=ft.sum(e),r=new Int32Array(ot.BARS_IN_MODULE),i=0,a=0,o=0;o<ot.MODULES_IN_CODEWORD;o++){var u=t/(2*ot.MODULES_IN_CODEWORD)+o*t/ot.MODULES_IN_CODEWORD;a+e[i]<=u&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return ot.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=ft.sum(e),r=new Array(ot.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=Rg.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var u=0;u<n.RATIOS_TABLE.length;u++){for(var c=0,d=n.RATIOS_TABLE[u],p=0;p<ot.BARS_IN_MODULE;p++){var g=Math.fround(d[p]-r[p]);if(c+=Math.fround(g*g),c>=a)break}c<a&&(a=c,o=ot.SYMBOL_TABLE[u])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ot.SYMBOL_TABLE.length).map(function(e){return new Array(ot.BARS_IN_MODULE)}),n}(),uB=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),ab=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),cB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fB=function(n){cB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Rr),dB=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new fB;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Zv;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),hB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pB=function(n){hB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Rr),mB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gB=function(n){mB(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Oe("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new pB;i=Ye.MAX_VALUE}this.buf=Tn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Zv;this.ensureCapacity(this.count+i),Rt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Tn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(dB),Ct;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ct||(Ct={}));function MC(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var gh;function ws(n){if(typeof gh>"u"&&(gh=MC()),gh===null)throw new Error("BigInt is not supported!");return gh(n)}function vB(){var n=[];n[0]=ws(1);var e=ws(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var yB=function(){function n(){}return n.decode=function(e,t){var r=new Xe(""),i=An.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],u=new uB;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:An.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,u);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new _e;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw _e.getFormatInstance()}if(r.length()===0)throw _e.getFormatInstance();var c=new Y0(null,r.toString(),null,t);return c.setOther(u),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw _e.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Ye.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Xe;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var u=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Xe;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Xe;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Xe;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new Xe;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(Ye.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var x=new Xe;t=n.numericCompaction(e,t+1,x),r.setTimestamp(ab.parseLong(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var _=new Xe;t=n.numericCompaction(e,t+1,_),r.setChecksum(Ye.parseInt(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new Xe;t=n.numericCompaction(e,t+1,E),r.setFileSize(ab.parseLong(E.toString()));break;default:throw _e.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw _e.getFormatInstance()}if(u!==-1){var A=t-u;r.isLastSegment()&&A--,r.setOptionalData(Tn.copyOfRange(e,u,u+A))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,u=!1;t<e[0]&&!u;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,u=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[o]=c,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Ct.ALPHA,o=Ct.ALPHA,u=0;u<r;){var c=e[u],d="";switch(a){case Ct.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.LL:a=Ct.LOWER;break;case n.ML:a=Ct.MIXED;break;case n.PS:o=a,a=Ct.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ct.ALPHA;break}break;case Ct.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case n.AS:o=a,a=Ct.ALPHA_SHIFT;break;case n.ML:a=Ct.MIXED;break;case n.PS:o=a,a=Ct.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ct.ALPHA;break}break;case Ct.MIXED:if(c<n.PL)d=n.MIXED_CHARS[c];else switch(c){case n.PL:a=Ct.PUNCT;break;case 26:d=" ";break;case n.LL:a=Ct.LOWER;break;case n.AL:a=Ct.ALPHA;break;case n.PS:o=a,a=Ct.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ct.ALPHA;break}break;case Ct.PUNCT:if(c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Ct.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ct.ALPHA;break}break;case Ct.ALPHA_SHIFT:if(a=o,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ct.ALPHA;break}break;case Ct.PUNCT_SHIFT:if(a=o,c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Ct.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ct.ALPHA;break}break}d!==""&&i.append(d),u++}},n.byteCompaction=function(e,t,r,i,a){var o=new gB,u=0,c=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=t[i++];i<t[0]&&!d;)switch(p[u++]=g,c=900*c+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(u%5===0&&u>0){for(var x=0;x<6;++x)o.write(Number(ws(c)>>ws(8*(5-x))));c=0,u=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[u++]=g);for(var _=0;_<u;_++)o.write(p[_]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)u++,c=900*c+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(u%5===0&&u>0){for(var x=0;x<6;++x)o.write(Number(ws(c)>>ws(8*(5-x))));c=0,u=0}}break}return a.append(ti.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var u=e[t++];if(t===e[0]&&(a=!0),u<n.TEXT_COMPACTION_MODE_LATCH)o[i]=u,i++;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||u===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=ws(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*ws(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new _e;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=MC()?vB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),Mc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xB=function(){function n(){}return n.decode=function(e,t,r,i,a,o,u){for(var c=new Pg(e,t,r,i,a),d=null,p=null,g,x=!0;;x=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,c,t,!0,o,u)),i!=null&&(p=n.getRowIndicatorColumn(e,c,i,!1,o,u)),g=n.merge(d,p),g==null)throw se.getNotFoundInstance();var _=g.getBoundingBox();if(x&&_!=null&&(_.getMinY()<c.getMinY()||_.getMaxY()>c.getMaxY()))c=_;else break}g.setBoundingBox(c);var E=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,d),g.setDetectionResultColumn(E,p);for(var A=d!=null,S=1;S<=E;S++){var I=A?S:E-S;if(g.getDetectionResultColumn(I)===void 0){var N=void 0;I===0||I===E?N=new ib(c,I===0):N=new PC(c),g.setDetectionResultColumn(I,N);for(var P=-1,V=P,F=c.getMinY();F<=c.getMaxY();F++){if(P=n.getStartColumn(g,I,F,A),P<0||P>c.getMaxX()){if(V===-1)continue;P=V}var W=n.detectCodeword(e,c.getMinX(),c.getMaxX(),A,P,F,o,u);W!=null&&(N.setCodeword(F,W),V=P,o=Math.min(o,W.getWidth()),u=Math.max(u,W.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Pg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new sB(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var u=Mc(i),c=u.next();!c.done;c=u.next()){var d=c.value;if(o+=a-d,d>0)break}}catch(_){t={error:_}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),g=0;o>0&&p[g]==null;g++)o--;for(var x=0,g=i.length-1;g>=0&&(x+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;x>0&&p[g]==null;g--)x--;return e.getBoundingBox().addMissingRows(o,x,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Mc(e),o=a.next();!o.done;o=a.next()){var u=o.value;i=Math.max(i,u)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var u=new ib(t,i),c=0;c<2;c++)for(var d=c===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=d){var x=n.detectCodeword(e,0,e.getWidth(),i,p,g,a,o);x!=null&&(u.setCodeword(g,x),i?p=x.getStartX():p=x.getEndX())}return u},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>ot.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,u=0;u<e.getBarcodeRowCount();u++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=t[u][c+1].getValue(),p=u*e.getBarcodeColumnCount()+c;d.length===0?r.push(p):d.length===1?i[p]=d[0]:(o.push(p),a.push(d))}for(var g=new Array(a.length),x=0;x<g.length;x++)g[x]=a[x];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,ot.toIntArray(r),ot.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),u=100;u-- >0;){for(var c=0;c<o.length;c++)t[i[c]]=a[c][o[c]];try{return n.decodeCodewords(t,e,r)}catch(p){var d=p instanceof hn;if(!d)throw p}if(o.length===0)throw hn.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw hn.getChecksumInstance()}throw hn.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),u=0;u<o.length;u++)for(var c=0;c<o[u].length;c++)o[u][c]=new zc;var d=0;try{for(var p=Mc(e.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var x=g.value;if(x!=null)try{for(var _=(i=void 0,Mc(x.getCodewords())),E=_.next();!E.done;E=_.next()){var A=E.value;if(A!=null){var S=A.getRowNumber();if(S>=0){if(S>=o.length)continue;o[S][d].setValue(A.getValue())}}}}catch(I){i={error:I}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}d++}}catch(I){t={error:I}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,u=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-u);){t-=u;try{for(var p=(a=void 0,Mc(e.getDetectionResultColumn(t).getCodewords())),g=p.next();!g.done;g=p.next()){var x=g.value;if(x!=null)return(i?x.getEndX():x.getStartX())+u*d*(x.getEndX()-x.getStartX())}}catch(_){a={error:_}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,u,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var d=n.getModuleBitCount(e,t,r,i,a,o);if(d==null)return null;var p,g=ft.sum(d);if(i)p=a+g;else{for(var x=0;x<d.length/2;x++){var _=d[x];d[x]=d[d.length-1-x],d[d.length-1-x]=_}p=a,a=p-g}if(!n.checkCodewordSkew(g,u,c))return null;var E=lB.getDecodedValue(d),A=ot.getCodeword(E);return A===-1?null:new oB(a,p,n.getCodewordBucketNumber(E),A)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var u=a,c=new Int32Array(8),d=0,p=i?1:-1,g=i;(i?u<r:u>=t)&&d<c.length;)e.get(u,o)===g?(c[d]++,u+=p):(d++,g=!g);return d===c.length||u===(i?r:t)&&d===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var u=a,c=i?-1:1,d=0;d<2;d++){for(;(i?u>=t:u<r)&&i===e.get(u,o);){if(Math.abs(a-u)>n.CODEWORD_SKEW_SIZE)return a;u+=c}c=-c,i=!i}return u},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw _e.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=yB.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw hn.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw _e.getFormatInstance();var r=e[0];if(r>e.length)throw _e.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw _e.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new ny,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new Jj,n}(),_B=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h0=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw se.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof _e||r instanceof hn?se.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,u=Wj.detectMultiple(e,t,r);try{for(var c=_B(u.getPoints()),d=c.next();!d.done;d=c.next()){var p=d.value,g=xB.decode(u.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),x=new lr(g.getText(),g.getRawBytes(),void 0,p,Re.PDF_417);x.putMetadata(Qn.ERROR_CORRECTION_LEVEL,g.getECLevel());var _=g.getOther();_!=null&&x.putMetadata(Qn.PDF417_EXTRA_METADATA,_),o.push(x)}}catch(E){i={error:E}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ye.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),wB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sb=function(n){wB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Rr),ob=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kC=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Ot.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ot.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Re.UPC_A||o===Re.UPC_E||o===Re.EAN_13||o===Re.EAN_8||o===Re.CODABAR||o===Re.CODE_39||o===Re.CODE_93||o===Re.CODE_128||o===Re.ITF||o===Re.RSS_14||o===Re.RSS_EXPANDED});a&&!t&&i.push(new Ul(e)),r.includes(Re.QR_CODE)&&i.push(new d0),r.includes(Re.DATA_MATRIX)&&i.push(new f0),r.includes(Re.AZTEC)&&i.push(new u0),r.includes(Re.PDF_417)&&i.push(new h0),a&&t&&i.push(new Ul(e))}i.length===0&&(t||i.push(new Ul(e)),i.push(new d0),i.push(new f0),i.push(new u0),i.push(new h0),t&&i.push(new Ul(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=ob(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new sb("No readers where selected, nothing can be read.");try{for(var i=ob(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(u){if(u instanceof sb)continue}}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new se("No MultiFormat Readers were able to detect the code.")},n}(),EB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){EB(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new kC;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(xu);var bB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){bB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new h0,t)||this}return e})(xu);var AB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){AB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new d0,t)||this}return e})(xu);var Mg;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Mg||(Mg={}));const vh=Mg;var LC=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Rs(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new Rs(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Oe("No error correction bytes");var r=e.length-t;if(r<=0)throw new Oe("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Rt.arraycopy(e,0,a,0,r);var o=new Rs(this.field,a);o=o.multiplyByMonomial(t,1);for(var u=o.divide(i)[1],c=u.getCoefficients(),d=t-c.length,p=0;p<d;p++)e[r+p]=0;Rt.arraycopy(c,0,e,r+d,c.length)},n}(),Gc=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var u=r[o],c=0;c<i-1;c++){var d=u[c];d===u[c+1]&&d===r[o+1][c]&&d===r[o+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var u=0;u<i;u++){var c=r[o];u+6<i&&c[u]===1&&c[u+1]===0&&c[u+2]===1&&c[u+3]===1&&c[u+4]===1&&c[u+5]===0&&c[u+6]===1&&(n.isWhiteHorizontal(c,u-4,u)||n.isWhiteHorizontal(c,u+7,u+11))&&t++,o+6<a&&r[o][u]===1&&r[o+1][u]===0&&r[o+2][u]===1&&r[o+3][u]===1&&r[o+4][u]===1&&r[o+5][u]===0&&r[o+6][u]===1&&(n.isWhiteVertical(r,u,o-4,o)||n.isWhiteVertical(r,u,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var u=r[o],c=0;c<i;c++)u[c]===1&&t++;var d=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-d)*10/d);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Oe("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),u=0;u<i;u++){for(var c=0,d=-1,p=0;p<a;p++){var g=t?o[u][p]:o[p][u];g===d?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,d=g)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),SB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TB=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=SB(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Tn.fill(o,e)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],u=0,c=this.width;u<c;++u)if(a[u]!==o[u])return!1;return!0},n.prototype.toString=function(){for(var e=new Xe,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),kg=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Xe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),CB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dt=function(n){CB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Rr),lb=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Bn;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var u=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],d=c[0],p=c[1];if(r.setBoolean(d,p,u),a<8){var g=r.getWidth()-a-1,x=8;r.setBoolean(g,x,u)}else{var g=8,x=r.getHeight()-7+(a-8);r.setBoolean(g,x,u)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Bn;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var u=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,u),t.setBoolean(t.getHeight()-11+o,a,u)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,u=r.getHeight()-1;o>0;){for(o===6&&(o-=1);u>=0&&u<r.getHeight();){for(var c=0;c<2;++c){var d=o-c;if(n.isEmpty(r.get(d,u))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&Gc.getDataMaskBit(t,d,u)&&(p=!p),r.setBoolean(d,u,p)}}u+=a}a=-a,u+=a,o-=2}if(i!==e.getSize())throw new Dt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ye.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Oe("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!kg.isValidMaskPattern(t))throw new Dt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Bn;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Dt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Dt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Dt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Dt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Dt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var u=i[a];if(u>=0)for(var c=0;c!==o;c++){var d=i[c];d>=0&&n.isEmpty(t.get(d,u))&&n.embedPositionAdjustmentPattern(d-2,u-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),IB=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),ub=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Gc.applyMaskPenaltyRule1(e)+Gc.applyMaskPenaltyRule2(e)+Gc.applyMaskPenaltyRule3(e)+Gc.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(vh.CHARACTER_SET)!==void 0;a&&(i=r.get(vh.CHARACTER_SET).toString());var o=this.chooseMode(e,i),u=new Bn;if(o===Pt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=An.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,u)}this.appendModeInfo(o,u);var d=new Bn;this.appendBytes(e,o,d,i);var p;if(r!==null&&r.get(vh.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(vh.QR_VERSION).toString(),10);p=Oo.getVersionForNumber(g);var x=this.calculateBitsNeeded(o,u,d,p);if(!this.willFit(x,p,t))throw new Dt("Data too big for requested version")}else p=this.recommendVersion(t,o,u,d);var _=new Bn;_.appendBitArray(u);var E=o===Pt.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(E,p,o,_),_.appendBitArray(d);var A=p.getECBlocksForLevel(t),S=p.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(S,_);var I=this.interleaveWithECBytes(_,p.getTotalCodewords(),S,A.getNumBlocks()),N=new kg;N.setECLevel(t),N.setMode(o),N.setVersion(p);var P=p.getDimensionForVersion(),V=new TB(P,P),F=this.chooseMaskPattern(I,t,p,V);return N.setMaskPattern(F),lb.buildMatrix(I,t,p,F,V),N.setMatrix(V),N},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Oo.getVersionForNumber(1)),o=this.chooseVersion(a,e),u=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(u,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),An.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Pt.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var u=e.charAt(a);if(n.isDigit(u))r=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)i=!0;else return Pt.BYTE}return i?Pt.ALPHANUMERIC:r?Pt.NUMERIC:Pt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=ti.encode(e,An.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,u=0;u<kg.NUM_MASK_PATTERNS;u++){lb.buildMatrix(e,t,r,u,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=u)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Oo.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Dt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),u=i-o,c=(e+7)/8;return u>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Dt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Dt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Dt("Block ID too large");var u=e%r,c=r-u,d=Math.floor(e/r),p=d+1,g=Math.floor(t/r),x=g+1,_=d-g,E=p-x;if(_!==E)throw new Dt("EC bytes mismatch");if(r!==c+u)throw new Dt("RS blocks mismatch");if(e!==(g+_)*c+(x+E)*u)throw new Dt("Total bytes mismatch");i<c?(a[0]=g,o[0]=_):(a[0]=x,o[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,u,c;if(e.getSizeInBytes()!==r)throw new Dt("Number of bits and data bytes does not match");for(var d=0,p=0,g=0,x=new Array,_=0;_<i;++_){var E=new Int32Array(1),A=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,_,E,A);var S=E[0],I=new Uint8Array(S);e.toBytes(8*d,I,0,S);var N=n.generateECBytes(I,A[0]);x.push(new IB(I,N)),p=Math.max(p,S),g=Math.max(g,N.length),d+=E[0]}if(r!==d)throw new Dt("Data bytes does not match offset");for(var P=new Bn,_=0;_<p;++_)try{for(var V=(a=void 0,ub(x)),F=V.next();!F.done;F=V.next()){var W=F.value,I=W.getDataBytes();_<I.length&&P.appendBits(I[_],8)}}catch(L){a={error:L}}finally{try{F&&!F.done&&(o=V.return)&&o.call(V)}finally{if(a)throw a.error}}for(var _=0;_<g;++_)try{for(var D=(u=void 0,ub(x)),R=D.next();!R.done;R=D.next()){var W=R.value,N=W.getErrorCorrectionBytes();_<N.length&&P.appendBits(N[_],8)}}catch(L){u={error:L}}finally{try{R&&!R.done&&(c=D.return)&&c.call(D)}finally{if(u)throw u.error}}if(t!==P.getSizeInBytes())throw new Dt("Interleaving error: "+t+" and "+P.getSizeInBytes()+" differ.");return P},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new LC(Tr.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Dt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Pt.NUMERIC:n.appendNumericBytes(e,r);break;case Pt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Pt.BYTE:n.append8BitBytes(e,r,i);break;case Pt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Dt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),u=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+u,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Dt;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Dt;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=ti.encode(e,r)}catch(c){throw new Dt(c)}for(var a=0,o=i.length;a!==o;a++){var u=i[a];t.appendBits(u,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=ti.encode(e,An.SJIS)}catch(g){throw new Dt(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,u=r[a+1]&255,c=o<<8&4294967295|u,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new Dt("Invalid byte sequence");var p=(d>>8)*192+(d&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Pt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=An.UTF8.getName(),n})();var NB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){NB(e,n);function e(t,r,i,a,o,u,c,d){var p=n.call(this,u,c)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=o,a+u>r||o+c>i)throw new Oe("Crop rectangle does not fit within image data.");return d&&p.reverseHorizontal(u,c),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Oe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Rt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Rt.arraycopy(this.yuvData,o,a,0,i),a;for(var u=0;u<r;u++){var c=u*t;Rt.arraycopy(this.yuvData,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,u=0;u<r;u++){for(var c=u*t,d=0;d<t;d++){var p=a[o+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|p*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var u=o+t/2,c=o,d=o+t-1;c<u;c++,d--){var p=i[c];i[c]=i[d],i[d]=p}},e.prototype.invert=function(){return new $0(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(kf);var RB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){RB(e,n);function e(t,r,i,a,o,u,c){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=o,d.left=u,d.top=c,t.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),x=0;x<p;x++){var _=t[x],E=_>>16&255,A=_>>7&510,S=_&255;g[x]=(E+A+S)/4&255}d.luminances=g}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),o===void 0&&(d.dataHeight=i),u===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Oe("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Oe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Rt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Rt.arraycopy(this.luminances,o,a,0,i),a;for(var u=0;u<r;u++){var c=u*t;Rt.arraycopy(this.luminances,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new $0(this)},e})(kf);var OB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DB=function(n){OB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(An),PB=function(){function n(){}return n.ISO_8859_1=An.ISO8859_1,n}(),Lg,MB=301,kB=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=MB);return{LOG:n,ALOG:e}};Lg=kB([],[]),Lg.LOG;Lg.ALOG;var cb;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(cb||(cb={}));var fb=129,jC=230,LB=231,jB=235,BB=236,VB=237,UB=238,FB=239,HB=240,zm=254,zB=254,db="[)>05",hb="[)>06",pb="",Et=0,$n=1,gr=2,En=3,Ln=4,rr=5,GB=function(){function n(){}return n.prototype.getEncodingMode=function(){return Et},n.prototype.encode=function(e){var t=di.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case rr:e.writeCodeword(LB),e.signalEncoderChange(rr);return;case $n:e.writeCodeword(jC),e.signalEncoderChange($n);return;case En:e.writeCodeword(UB),e.signalEncoderChange(En);break;case gr:e.writeCodeword(FB),e.signalEncoderChange(gr);break;case Ln:e.writeCodeword(HB),e.signalEncoderChange(Ln);break;default:throw new Error("Illegal mode: "+i)}else di.isExtendedASCII(r)?(e.writeCodeword(jB),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(di.isDigit(e)&&di.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),qB=function(){function n(){}return n.prototype.getEncodingMode=function(){return rr},n.prototype.encode=function(e){var t=new Xe;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Et);break}}var a=t.length()-1,o=1,u=e.getCodewordCount()+a+o;e.updateSymbolInfo(u);var c=e.getSymbolInfo().getDataCapacity()-u>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,at.getCharAt(a));else if(a<=1555)t.setCharAt(0,at.getCharAt(Math.floor(a/250)+249)),t.insert(1,at.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),ry=function(){function n(){}return n.prototype.getEncodingMode=function(){return $n},n.prototype.encodeMaximal=function(e){for(var t=new Xe,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var u=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+u+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,p=Math.floor(t.length()%3);(p===2&&d!==2||p===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(jC),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Xe;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var u=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Xe;for(t.length()%3===2&&u!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||u!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var d=t.length();if(d%3===0){var p=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(Et);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var u=e.getCurrentChar();return i=this.encodeChar(u,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(zm)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(zm),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(zm)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Et)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Xe;return a.append(r),a.append(i),a.toString()},n}(),XB=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ln},n.prototype.encode=function(e){for(var t=new Xe;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Et);break}}}t.append(at.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,u=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),d=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+u.length))}d?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(u)}finally{e.signalEncoderChange(Et)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(at.getCharAt(e-64)):di.illegalCharacter(at.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,u=(r<<18)+(i<<12)+(a<<6)+o,c=u>>16&255,d=u>>8&255,p=u&255,g=new Xe;return g.append(c),t>=2&&g.append(d),t>=3&&g.append(p),g.toString()},n}(),WB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$B=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mt=function(){function n(e,t,r,i,a,o,u,c){u===void 0&&(u=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=u,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var o,u;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=$B(KB),d=c.next();!d.done;d=c.next()){var p=d.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(g){o={error:g}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),YB=function(n){WB(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(mt),KB=[new mt(!1,3,5,8,8,1),new mt(!1,5,7,10,10,1),new mt(!0,5,7,16,6,1),new mt(!1,8,10,12,12,1),new mt(!0,10,11,14,6,2),new mt(!1,12,12,14,14,1),new mt(!0,16,14,24,10,1),new mt(!1,18,14,16,16,1),new mt(!1,22,18,18,18,1),new mt(!0,22,18,16,10,2),new mt(!1,30,20,20,20,1),new mt(!0,32,24,16,14,2),new mt(!1,36,24,22,22,1),new mt(!1,44,28,24,24,1),new mt(!0,49,28,22,14,2),new mt(!1,62,36,14,14,4),new mt(!1,86,42,16,16,4),new mt(!1,114,48,18,18,4),new mt(!1,144,56,20,20,4),new mt(!1,174,68,22,22,4),new mt(!1,204,84,24,24,4,102,42),new mt(!1,280,112,14,14,16,140,56),new mt(!1,368,144,16,16,16,92,36),new mt(!1,456,192,18,18,16,114,48),new mt(!1,576,224,20,20,16,144,56),new mt(!1,696,272,22,22,16,174,68),new mt(!1,816,336,24,24,16,136,56),new mt(!1,1050,408,18,18,36,175,68),new mt(!1,1304,496,20,20,36,163,62),new YB],QB=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(u){return u.charCodeAt(0)}),r=new Xe,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new Xe,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=mt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),ZB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JB=function(n){ZB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return En},e.prototype.encode=function(t){for(var r=new Xe;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=di.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(Et);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):di.illegalCharacter(at.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(zB),t.getNewEncoding()<0&&t.signalEncoderChange(Et)},e}(ry),eV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tV=function(n){eV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return gr},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(ry),di=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=fb+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new ry,u=[new GB,o,new tV,new JB,new XB,new qB],c=new QB(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(db)&&e.endsWith(pb)?(c.writeCodeword(BB),c.setSkipAtEnd(2),c.pos+=db.length):e.startsWith(hb)&&e.endsWith(pb)&&(c.writeCodeword(VB),c.setSkipAtEnd(2),c.pos+=hb.length);var d=Et;for(a&&(o.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)u[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var p=c.getCodewordCount();c.updateSymbolInfo();var g=c.getSymbolInfo().getDataCapacity();p<g&&d!==Et&&d!==rr&&d!==Ln&&c.writeCodeword("");var x=c.getCodewords();for(x.length()<g&&x.append(fb);x.length()<g;)x.append(this.randomize253State(x.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===En&&i===En){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Et}else if(r===Ln&&i===Ln){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Et}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Et?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),u=[];;){if(t+a===e.length){Tn.fill(o,0),Tn.fill(u,0);var c=this.findMinimums(i,u,Ye.MAX_VALUE,o),d=this.getMinimumCount(o);if(u[Et]===c)return Et;if(d===1){if(o[rr]>0)return rr;if(o[Ln]>0)return Ln;if(o[gr]>0)return gr;if(o[En]>0)return En}return $n}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[Et]+=.5:this.isExtendedASCII(p)?(i[Et]=Math.ceil(i[Et]),i[Et]+=2):(i[Et]=Math.ceil(i[Et]),i[Et]++),this.isNativeC40(p)?i[$n]+=2/3:this.isExtendedASCII(p)?i[$n]+=8/3:i[$n]+=4/3,this.isNativeText(p)?i[gr]+=2/3:this.isExtendedASCII(p)?i[gr]+=8/3:i[gr]+=4/3,this.isNativeX12(p)?i[En]+=2/3:this.isExtendedASCII(p)?i[En]+=13/3:i[En]+=10/3,this.isNativeEDIFACT(p)?i[Ln]+=3/4:this.isExtendedASCII(p)?i[Ln]+=17/4:i[Ln]+=13/4,this.isSpecialB256(p)?i[rr]+=4:i[rr]++,a>=4){if(Tn.fill(o,0),Tn.fill(u,0),this.findMinimums(i,u,Ye.MAX_VALUE,o),u[Et]<this.min(u[rr],u[$n],u[gr],u[En],u[Ln]))return Et;if(u[rr]<u[Et]||u[rr]+1<this.min(u[$n],u[gr],u[En],u[Ln]))return rr;if(u[Ln]+1<this.min(u[rr],u[$n],u[gr],u[En],u[Et]))return Ln;if(u[gr]+1<this.min(u[rr],u[$n],u[Ln],u[En],u[Et]))return gr;if(u[En]+1<this.min(u[rr],u[$n],u[Ln],u[gr],u[Et]))return En;if(u[$n]+1<this.min(u[Et],u[rr],u[Ln],u[gr])){if(u[$n]<u[En])return $n;if(u[$n]===u[En]){for(var g=t+a+1;g<e.length;){var x=e.charCodeAt(g);if(this.isX12TermSep(x))return En;if(!this.isNativeX12(x))break;g++}return $n}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Tn.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ye.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Gm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mb=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return ti.encode(e,this.charset)!=null}catch{return!1}},n}(),nV=function(){function n(e,t,r){var i,a,o,u,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(M){return new mb(DB.forName(M))}),this.encoders=[];var p=[];p.push(new mb(PB.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),x=0;x<e.length;x++){var _=!1;try{for(var E=(i=void 0,Gm(p)),A=E.next();!A.done;A=E.next()){var S=A.value,I=e.charAt(x),N=I.charCodeAt(0);if(N===r||S.canEncode(I)){_=!0;break}}}catch(M){i={error:M}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}if(!_)try{for(var P=(o=void 0,Gm(this.ENCODERS)),V=P.next();!V.done;V=P.next()){var S=V.value;if(S.canEncode(e.charAt(x))){p.push(S),_=!0;break}}}catch(M){o={error:M}}finally{try{V&&!V.done&&(u=P.return)&&u.call(P)}finally{if(o)throw o.error}}_||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var F=0;try{for(var W=Gm(p),D=W.next();!D.done;D=W.next()){var S=D.value;this.encoders[F++]=S}}catch(M){c={error:M}}finally{try{D&&!D.done&&(d=W.return)&&d.call(W)}finally{if(c)throw c.error}}}var R=-1;if(t!=null){for(var x=0;x<this.encoders.length;x++)if(this.encoders[x]!=null&&t.name===this.encoders[x].name){R=x;break}}this.priorityEncoderIndex=R}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return ti.encode(at.getCharAt(e),this.encoders[t].name)},n}(),rV=3,iV=function(){function n(e,t,r){this.fnc1=r;var i=new nV(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Xe,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var u=e.charAt(i).charCodeAt(0),c=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(u===o||t.canEncode(u,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),d=c+1);for(var p=c;p<d;p++)(u===o||t.canEncode(u,p))&&this.addEdge(r,i+1,new gb(u,t,p,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new gb[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var u=0;u<t.length();u++)a[o][u]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][u],r);for(var u=0;u<t.length();u++)a[o-1][u]=null}for(var c=-1,d=Ye.MAX_VALUE,u=0;u<t.length();u++)if(a[i][u]!=null){var p=a[i][u];p.cachedTotalSize<d&&(d=p.cachedTotalSize,c=u)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],x=a[i][c];x!=null;){if(x.isFNC1())g.unshift(1e3);else for(var _=t.encode(x.c,x.encoderIndex),o=_.length-1;o>=0;o--)g.unshift(_[o]&255);var E=x.previous===null?0:x.previous.encoderIndex;E!==x.encoderIndex&&g.unshift(256+t.getECIValue(x.encoderIndex)),x=x.previous}for(var A=[],o=0;o<A.length;o++)A[o]=g[o];return A},n}(),gb=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,u=i===null?0:i.encoderIndex;u!==r&&(o+=rV),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),aV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var vb;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(vb||(vb={}));(function(n){aV(e,n);function e(t,r,i,a,o){var u=n.call(this,t,r,i)||this;return u.shape=a,u.macroId=o,u}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(iV);var sV=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),yb=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),oV=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),lV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iy=function(n){lV(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ye.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(oV),uV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cV=function(n){uV(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(iy);function fV(n,e,t){return new cV(n,e,t)}function kc(n,e,t){return new iy(n,e,t)}var dV=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Os=0,p0=1,Jr=2,BC=3,Hi=4,hV=new iy(null,0,0),qm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],pV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function mV(n){var e,t;try{for(var r=pV(n),i=r.next();!i.done;i=r.next()){var a=i.value;Tn.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Os][Hi]=0,n[p0][Hi]=0,n[p0][Os]=28,n[BC][Hi]=0,n[Jr][Hi]=0,n[Jr][Os]=15,n}var VC=mV(Tn.createInt32Array(6,6)),gV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vV=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=qm[this.mode][e];i=kc(i,a&65535,a>>16),r+=a>>16}var o=e===Jr?4:5;return i=kc(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Jr?4:5;return r=kc(r,VC[this.mode][e],i),r=kc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Hi||this.mode===Jr){var a=qm[r][Os];t=kc(t,a&65535,a>>16),i+=a>>16,r=Os}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new n(t,r,this.binaryShiftByteCount+1,i+o);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=fV(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(qm[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Bn;try{for(var u=gV(i),c=u.next();!c.done;c=u.next()){var d=c.value;d.appendTo(o,e)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return at.format("%s bits=%d bytes=%d",dV[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(hV,Os,0,0),n}();function yV(n){var e=at.getCharCode(" "),t=at.getCharCode("."),r=at.getCharCode(",");n[Os][e]=1;for(var i=at.getCharCode("Z"),a=at.getCharCode("A"),o=a;o<=i;o++)n[Os][o]=o-a+2;n[p0][e]=1;for(var u=at.getCharCode("z"),c=at.getCharCode("a"),o=c;o<=u;o++)n[p0][o]=o-c+2;n[Jr][e]=1;for(var d=at.getCharCode("9"),p=at.getCharCode("0"),o=p;o<=d;o++)n[Jr][o]=o-p+2;n[Jr][r]=12,n[Jr][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],x=0;x<g.length;x++)n[BC][at.getCharCode(g[x])]=x;for(var _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],x=0;x<_.length;x++)at.getCharCode(_[x])>0&&(n[Hi][at.getCharCode(_[x])]=x);return n}var Xm=yV(Tn.createInt32Array(5,256)),yh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xV=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=at.getCharCode(" "),t=at.getCharCode(`
`),r=yb.singletonList(vV.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case at.getCharCode("\r"):a=o===t?2:0;break;case at.getCharCode("."):a=o===e?3:0;break;case at.getCharCode(","):a=o===e?4:0;break;case at.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var u=yb.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return u.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=yh(e),u=o.next();!u.done;u=o.next()){var c=u.value;this.updateStateForChar(c,t,a)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Xm[e.getMode()][i]>0,o=null,u=0;u<=Hi;u++){var c=Xm[u][i];if(c>0){if(o==null&&(o=e.endBinaryShift(t)),!a||u===e.getMode()||u===Jr){var d=o.latchAndAppend(u,c);r.push(d)}if(!a&&VC[e.getMode()][u]>=0){var p=o.shiftAndAppend(u,c);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Xm[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var u=yh(e),c=u.next();!c.done;c=u.next()){var d=c.value;this.updateStateForPair(d,t,r,o)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Hi,r)),e.getMode()!==Hi&&i.push(a.shiftAndAppend(Hi,r)),r===3||r===4){var o=a.latchAndAppend(Jr,16-r).latchAndAppend(Jr,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var u=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(u)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var u=yh(e),c=u.next();!c.done;c=u.next()){var d=c.value,p=!0,g=function(S){if(S.isBetterThanOrEqualTo(d))return p=!1,"break";d.isBetterThanOrEqualTo(S)&&(o=o.filter(function(I){return I!==S}))};try{for(var x=(i=void 0,yh(o)),_=x.next();!_.done;_=x.next()){var E=_.value,A=g(E);if(A==="break")break}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}p&&o.push(d)}}catch(S){t={error:S}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return o},n}(),_V=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new xV(e).encode(),a=Ye.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,u,c,d,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(u=r<0,c=Math.abs(r),c>(u?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Oe(at.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(c,u),p=n.WORD_SIZE[c];var x=d-d%p;if(g=n.stuffBits(i,p),g.getSize()+a>x)throw new Oe("Data to large for user specified layer");if(u&&g.getSize()>p*64)throw new Oe("Data to large for user specified layer")}else{p=0,g=null;for(var _=0;;_++){if(_>n.MAX_NB_BITS)throw new Oe("Data too large for an Aztec code");if(u=_<=3,c=u?_+1:_,d=n.totalBitsInLayer(c,u),!(o>d)){(g==null||p!==n.WORD_SIZE[c])&&(p=n.WORD_SIZE[c],g=n.stuffBits(i,p));var x=d-d%p;if(!(u&&g.getSize()>p*64)&&g.getSize()+a<=x)break}}}var E=n.generateCheckWords(g,d,p),A=g.getSize()/p,S=n.generateModeMessage(u,c,A),I=(u?11:14)+c*4,N=new Int32Array(I),P;if(u){P=I;for(var _=0;_<N.length;_++)N[_]=_}else{P=I+1+2*Ye.truncDivision(Ye.truncDivision(I,2)-1,15);for(var V=Ye.truncDivision(I,2),F=Ye.truncDivision(P,2),_=0;_<V;_++){var W=_+Ye.truncDivision(_,15);N[V-_-1]=F-W-1,N[V+_]=F+W+1}}for(var D=new $i(P),_=0,R=0;_<c;_++){for(var M=(c-_)*4+(u?9:12),L=0;L<M;L++)for(var H=L*2,G=0;G<2;G++)E.get(R+H+G)&&D.set(N[_*2+G],N[_*2+L]),E.get(R+M*2+H+G)&&D.set(N[_*2+L],N[I-1-_*2-G]),E.get(R+M*4+H+G)&&D.set(N[I-1-_*2-G],N[I-1-_*2-L]),E.get(R+M*6+H+G)&&D.set(N[I-1-_*2-L],N[_*2+G]);R+=M*8}if(n.drawModeMessage(D,u,P,S),u)n.drawBullsEye(D,Ye.truncDivision(P,2),5);else{n.drawBullsEye(D,Ye.truncDivision(P,2),7);for(var _=0,L=0;_<Ye.truncDivision(I,2)-1;_+=15,L+=16)for(var G=Ye.truncDivision(P,2)&1;G<P;G+=2)D.set(Ye.truncDivision(P,2)-L,G),D.set(Ye.truncDivision(P,2)+L,G),D.set(G,Ye.truncDivision(P,2)-L),D.set(G,Ye.truncDivision(P,2)+L)}var U=new sV;return U.setCompact(u),U.setSize(P),U.setLayers(c),U.setCodeWords(A),U.setMatrix(D),U},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Bn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Ye.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var u=a-3+o;i.get(o)&&e.set(u,a-5),i.get(o+7)&&e.set(a+5,u),i.get(20-o)&&e.set(u,a+5),i.get(27-o)&&e.set(a-5,u)}else for(var o=0;o<10;o++){var u=a-5+o+Ye.truncDivision(o,5);i.get(o)&&e.set(u,a-7),i.get(o+10)&&e.set(a+7,u),i.get(29-o)&&e.set(u,a+7),i.get(39-o)&&e.set(a-7,u)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,u=new LC(n.getGF(r)),c=Ye.truncDivision(t,r),d=n.bitsToWords(e,r,c);u.encode(d,c-o);var p=t%r,g=new Bn;g.appendBits(0,p);try{for(var x=_V(Array.from(d)),_=x.next();!_.done;_=x.next()){var E=_.value;g.appendBits(E,r)}}catch(A){i={error:A}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var u=0,c=0;c<t;c++)u|=e.get(a*t+c)?1<<t-c-1:0;i[a]=u}return i},n.getGF=function(e){switch(e){case 4:return Tr.AZTEC_PARAM;case 6:return Tr.AZTEC_DATA_6;case 8:return Tr.AZTEC_DATA_8;case 10:return Tr.AZTEC_DATA_10;case 12:return Tr.AZTEC_DATA_12;default:throw new Oe("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Bn,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var u=0,c=0;c<t;c++)(o+c>=i||e.get(o+c))&&(u|=1<<t-1-c);(u&a)===a?(r.appendBits(u&a,t),o--):(u&a)===0?(r.appendBits(u|1,t),o--):r.appendBits(u,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var wV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EV=function(n){wV(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),o=0,u=0,c=t.length;o<c;o+=4,u++){var d=void 0,p=t[o+3];if(p===0)d=255;else{var g=t[o],x=t[o+1],_=t[o+2];d=306*g+601*x+117*_+512>>10}a[u]=d}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Oe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new $0(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),c=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);r.width=u,r.height=c;var d=r.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(u/2,c/2),d.rotate(i),d.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(kf);function UC(){return typeof navigator<"u"}function bV(){return UC()&&!!navigator.mediaDevices}function AV(){return!!(bV()&&navigator.mediaDevices.enumerateDevices)}var Hl=function(){return Hl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Hl.apply(this,arguments)},Ht=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function u(p){try{d(r.next(p))}catch(g){o(g)}}function c(p){try{d(r.throw(p))}catch(g){o(g)}}function d(p){p.done?a(p.value):i(p.value).then(u,c)}d((r=r.apply(n,e||[])).next())})},zt=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(p){return c([d,p])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Wm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SV={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},_u=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=Hl(Hl({},SV),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Ot.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return Ht(this,void 0,void 0,function(){return zt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Wm(i),o=a.next();!o.done;o=a.next()){var u=o.value;if(n.mediaStreamIsTorchCompatibleTrack(u))return!0}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new rn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new rn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new EV(e),r=new AC(t);return new bC(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new rn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return Ht(this,void 0,void 0,function(){var t;return zt(this,function(r){switch(r.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return Ht(this,void 0,void 0,function(){var e,t,r,i,a,o,u,c,d,p,g,x;return zt(this,function(_){switch(_.label){case 0:if(!UC())throw new Error("Can't enumerate devices, navigator is not present.");if(!AV())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=Wm(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(u=a.deviceId||a.id,c=a.label||"Video device ".concat(t.length+1),d=a.groupId,p={deviceId:u,label:c,kind:o,groupId:d},t.push(p))}catch(E){g={error:E}}finally{try{i&&!i.done&&(x=r.return)&&x.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return Ht(this,void 0,void 0,function(){var t;return zt(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return Ht(this,void 0,void 0,function(){var r;return zt(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,o){var u=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},t),c=function(){n.tryPlayVideo(e).then(function(d){clearTimeout(u),e.removeEventListener("canplay",c),a(d)})};e.addEventListener("canplay",c)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),Ht(this,void 0,void 0,function(){var i;return zt(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new rn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return Ht(this,void 0,void 0,function(){var t;return zt(this,function(r){switch(r.label){case 0:if(!e)throw new rn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return Ht(this,void 0,void 0,function(){var t;return zt(this,function(r){switch(r.label){case 0:if(!e)throw new rn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Ht(this,void 0,void 0,function(){var i,a;return zt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return Ht(this,void 0,void 0,function(){var i,a,o,u,c,d,p,g,x,_=this;return zt(this,function(E){switch(E.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=E.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},u=this.scan(a,r,o),c=e.getVideoTracks(),d=Hl(Hl({},u),{stop:function(){u.stop()},streamVideoConstraintsApply:function(A,S){return Ht(this,void 0,void 0,function(){var I,N,P,V,F,W,D;return zt(this,function(R){switch(R.label){case 0:I=S?c.filter(S):c,R.label=1;case 1:R.trys.push([1,6,7,8]),N=Wm(I),P=N.next(),R.label=2;case 2:return P.done?[3,5]:(V=P.value,[4,V.applyConstraints(A)]);case 3:R.sent(),R.label=4;case 4:return P=N.next(),[3,2];case 5:return[3,8];case 6:return F=R.sent(),W={error:F},[3,8];case 7:try{P&&!P.done&&(D=N.return)&&D.call(N)}finally{if(W)throw W.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(A){return c.find(A).getConstraints()},streamVideoSettingsGet:function(A){return c.find(A).getSettings()},streamVideoCapabilitiesGet:function(A){return c.find(A).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(g=c==null?void 0:c.find(function(A){return n.mediaStreamIsTorchCompatibleTrack(A)}),x=function(A){return Ht(_,void 0,void 0,function(){return zt(this,function(S){switch(S.label){case 0:return[4,n.mediaStreamSetTorch(g,A)];case 1:return S.sent(),[2]}})})},d.switchTorch=x,d.stop=function(){return Ht(_,void 0,void 0,function(){return zt(this,function(A){switch(A.label){case 0:return u.stop(),[4,x(!1)];case 1:return A.sent(),[2]}})})}),[2,d]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Ht(this,void 0,void 0,function(){var i,a;return zt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return Ht(this,void 0,void 0,function(){var r,i;return zt(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new rn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return Ht(this,void 0,void 0,function(){var r,i,a,o;return zt(this,function(u){switch(u.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new rn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return u.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Ht(this,void 0,void 0,function(){var r;return zt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Ht(this,void 0,void 0,function(){var r,i,a;return zt(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Ht(this,void 0,void 0,function(){var r,i;return zt(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return Ht(this,void 0,void 0,function(){var t,r;return zt(this,function(i){switch(i.label){case 0:if(!e)throw new rn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return Ht(this,void 0,void 0,function(){var t,r;return zt(this,function(i){switch(i.label){case 0:if(!e)throw new rn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,u){a.scan(e,function(c,d,p){if(c){o(c),p.stop();return}if(d){if(d instanceof se&&t||d instanceof hn&&r||d instanceof _e&&i)return;p.stop(),u(d)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var u=function(){o=void 0,a=void 0},c=!1,d,p=function(){c=!0,clearTimeout(d),u(),r&&r()},g={stop:p},x=function(){if(!c)try{n.drawImageOnCanvas(o,e);var _=i.decodeFromCanvas(a);t(_,void 0,g),d=setTimeout(x,i.options.delayBetweenScanSuccess)}catch(I){t(void 0,I,g);var E=I instanceof hn,A=I instanceof _e,S=I instanceof se;if(E||A||S){d=setTimeout(x,i.options.delayBetweenScanAttempts);return}u(),r&&r(I)}};return x(),g},n.prototype._decodeOnLoadImage=function(e){return Ht(this,void 0,void 0,function(){var t;return zt(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return Ht(this,void 0,void 0,function(){var t;return zt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}(),TV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){TV(e,n);function e(t,r){return n.call(this,new u0,t,r)||this}return e})(_u);var CV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){CV(e,n);function e(t,r){return n.call(this,new Ul(t),t,r)||this}return e})(_u);var IV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){IV(e,n);function e(t,r){return n.call(this,new f0,t,r)||this}return e})(_u);var NV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){NV(e,n);function e(t,r){var i=this,a=new kC;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Ot.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(_u);var RV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){RV(e,n);function e(t,r){return n.call(this,new h0,t,r)||this}return e})(_u);var OV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DV=function(n){OV(e,n);function e(t,r){return n.call(this,new d0,t,r)||this}return e}(_u);function PV(){const{user:n,addLeague:e}=pn(),t=Un(),{code:r}=Q4(),[i,a]=B.useState(r||""),[o,u]=B.useState(!1),[c,d]=B.useState(""),[p,g]=B.useState(!1),[x,_]=B.useState(""),[E,A]=B.useState(!1),[S,I]=B.useState(""),N=B.useRef(null),P=B.useRef(null);B.useEffect(()=>{const W=new URLSearchParams(window.location.search).get("code");W?a(W.toUpperCase()):r&&a(r)},[r]),B.useEffect(()=>(E&&N.current&&(I(""),P.current=new DV,P.current.decodeFromVideoDevice(void 0,N.current,(F,W)=>{if(F){let D="";try{const R=new URL(F.getText());D=R.searchParams.get("code")||R.pathname.split("/").pop()}catch{D=F.getText()}A(!1),P.current.reset(),t(`/join?code=${encodeURIComponent(D)}`)}else W&&I("Camera error: "+((W==null?void 0:W.message)||W))})),()=>{P.current&&P.current.reset()}),[E,t]);const V=async F=>{F.preventDefault(),u(!0),d(""),g(!1);try{const{data:W}=await Zt.post(`/leagues/join/${i}`,{user_id:n==null?void 0:n.uid,email:n==null?void 0:n.email});_(W.league_name),g(!0),e&&e({id:i,name:W.league_name,role:"coach"})}catch(W){d(W.message||"Error joining league")}finally{u(!1)}};return m.jsxs(ri,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:[m.jsxs("button",{className:"fixed bottom-6 right-6 z-50 bg-cmf-primary hover:bg-cmf-secondary text-white rounded-full shadow-lg p-4 flex items-center gap-2 text-lg font-bold transition",onClick:()=>A(!0),"aria-label":"Scan QR to Join",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},children:[m.jsx("span",{role:"img","aria-label":"scan",children:""})," Scan QR to Join"]}),E&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg flex flex-col items-center max-w-xs w-full",children:[m.jsx("h2",{className:"text-lg font-bold mb-2",children:"Scan Event QR Code"}),m.jsx("div",{className:"w-full h-64 mb-2 flex items-center justify-center",children:m.jsx("video",{ref:N,className:"w-full h-full rounded",style:{objectFit:"cover"}})}),S&&m.jsx("div",{className:"text-red-500 text-sm mb-2",children:S}),m.jsx("button",{className:"bg-cmf-primary hover:bg-cmf-secondary text-white px-4 py-2 rounded font-semibold mt-2 transition",onClick:()=>A(!1),children:"Cancel"})]})}),m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Join an Event"}),m.jsx("div",{className:"mb-2 text-gray-600",children:"Enter the event code provided by your organizer to join their event."}),m.jsx("div",{className:"mb-4 text-xs text-gray-500",children:"Need help? Ask your organizer for an event code or QR invite."}),p?m.jsxs("div",{className:"text-center w-full",children:[m.jsx("div",{className:"mb-4 text-green-600 font-semibold",children:"Successfully joined event!"}),m.jsxs("div",{className:"mb-2",children:["Welcome to ",m.jsx("span",{className:"font-bold",children:x})]}),m.jsx("button",{className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] mt-4",onClick:()=>t("/dashboard"),children:"Go to Dashboard"})]}):m.jsxs("form",{onSubmit:V,className:"space-y-4 w-full",children:[m.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-cmf-primary/30 rounded-xl focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary transition text-center font-mono text-lg tracking-widest",placeholder:"Enter Event Code",value:i,onChange:F=>a(F.target.value.toUpperCase()),required:!0,autoFocus:!0}),m.jsx("button",{type:"submit",className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",disabled:o,children:o?"Joining...":"Join Event"}),c&&m.jsx("div",{className:"text-red-500 text-sm mt-2",children:c})]})]})]})}const MV=()=>({welcomeVariant:(()=>{const e=localStorage.getItem("welcome_variant");if(e)return e;const t=["default","mojo-style","sports-focused"],r=t[Math.floor(Math.random()*t.length)];return localStorage.setItem("welcome_variant",r),r})()});function kV(){const n=Un(),{welcomeVariant:e}=MV(),r=(()=>{switch(e){case"mojo-style":return{title:"Dominate. Track. Win.",subtitle:"Elevate your game with precision tracking and real-time insights that champions demand.",buttonText:"Start Dominating"};case"sports-focused":return{title:"Train. Compete. Excel.",subtitle:"Professional-grade combine tracking and analytics for serious athletes and coaches.",buttonText:"Join the Elite"};default:return{title:"Coach. Manage. Excel.",subtitle:"Your all-in-one platform for team management, combine tracking, and athletic excellence.",buttonText:"Get Started"}}})();return m.jsx(ri,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4",children:r.title}),m.jsx("p",{className:"text-gray-600 text-base leading-relaxed mb-6",children:r.subtitle}),m.jsx("button",{className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] mb-6",onClick:()=>n("/signup"),children:r.buttonText})]}),m.jsxs("div",{className:"text-center space-y-3 text-sm",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs(lt,{to:"/login",className:"text-cyan-600 hover:text-cyan-800 font-medium transition-colors duration-200",children:["Already have an account? ",m.jsx("span",{className:"font-semibold",children:"Sign In"})]}),m.jsxs(lt,{to:"/claim",className:"text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200",children:["Need to claim an account? ",m.jsx("span",{className:"font-semibold",children:"Claim Account"})]})]}),m.jsx("div",{className:"pt-4 border-t border-gray-100",children:m.jsx(lt,{to:"/help",className:"text-gray-500 hover:text-gray-700 text-xs transition-colors duration-200",children:"Need Help?"})})]})]})})}const LV=()=>m.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mx-auto mb-8",children:[m.jsx("rect",{x:"25",y:"40",width:"60",height:"35",rx:"8",fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"2"}),m.jsx("rect",{x:"75",y:"35",width:"15",height:"8",rx:"2",fill:"#ec4899"}),m.jsx("rect",{x:"52",y:"75",width:"6",height:"25",fill:"#9ca3af"}),m.jsx("ellipse",{cx:"35",cy:"100",rx:"8",ry:"3",fill:"#10b981"}),m.jsx("ellipse",{cx:"55",cy:"102",rx:"6",ry:"2",fill:"#10b981"}),m.jsx("ellipse",{cx:"75",cy:"100",rx:"7",ry:"3",fill:"#10b981"}),m.jsx("rect",{x:"35",y:"48",width:"20",height:"12",rx:"2",fill:"white",stroke:"#6366f1",strokeWidth:"2"}),m.jsx("line",{x1:"37",y1:"52",x2:"53",y2:"52",stroke:"#6366f1",strokeWidth:"1"}),m.jsx("line",{x1:"37",y1:"55",x2:"48",y2:"55",stroke:"#6366f1",strokeWidth:"1"}),m.jsx("circle",{cx:"20",cy:"30",r:"2",fill:"#fbbf24"}),m.jsx("circle",{cx:"95",cy:"25",r:"1.5",fill:"#fbbf24"}),m.jsx("circle",{cx:"15",cy:"60",r:"1",fill:"#fbbf24"})]});function jV(){const{user:n,setUser:e}=pn(),[t,r]=B.useState(""),[i,a]=B.useState(!1),[o,u]=B.useState(!1),c=Un(),[d,p]=B.useState(!1),g=Df();B.useEffect(()=>{const A=async()=>{Bt.currentUser&&(await Bt.currentUser.reload(),p(Bt.currentUser.emailVerified),Bt.currentUser.emailVerified&&(await Bt.currentUser.getIdToken(!0),e(Bt.currentUser),c("/dashboard")))};A();const S=setInterval(A,1e4);return()=>clearInterval(S)},[c,e]),B.useEffect(()=>{if(!Bt.currentUser){const A=setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),c("/welcome",{replace:!0})},2500);return()=>clearTimeout(A)}},[c]);const x=async()=>{u(!0);try{Bt.currentUser&&(await Bt.currentUser.reload(),p(Bt.currentUser.emailVerified),Bt.currentUser.emailVerified?(await Bt.currentUser.getIdToken(!0),e(Bt.currentUser),c("/dashboard")):r("Still not verified. Please check your email."))}catch(A){console.error("Verification check error:",A),r("Error checking verification status.")}finally{u(!1)}},_=async()=>{a(!0),r("");try{Bt.currentUser?(await Bt.currentUser.reload(),await PA(Bt.currentUser),r("Verification email sent!")):r("User not found. Please log in again.")}catch(A){r("Failed to resend. Try again later."),console.error("Resend verification error:",A)}finally{a(!1)}},E=()=>{const A=navigator.userAgent.toLowerCase();try{A.includes("iphone")||A.includes("ipad")?window.location.href="message://":A.includes("android")?window.location.href="intent://view#Intent;scheme=mailto;end":alert(`Please open your email app manually to check for the verification email.

Look for an email from WooCombine and click the verification link inside.`)}catch{alert(`Please open your email app manually to check for the verification email.

Look for an email from WooCombine and click the verification link inside.`)}};return m.jsx(ri,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl mx-4 flex flex-col relative min-h-[600px]",children:[m.jsxs("div",{className:"w-full flex flex-row justify-between items-center p-6 pb-2",children:[m.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-900 focus:outline-none transition",type:"button","aria-label":"Back to welcome",onClick:()=>c("/welcome"),children:m.jsx(Pf,{size:20})}),m.jsx("button",{className:"text-sm text-cyan-600 hover:text-cyan-800 font-medium",onClick:()=>c("/help"),children:"Need Help?"})]}),m.jsxs("div",{className:"flex-1 flex flex-col px-6 pb-6",children:[m.jsx("div",{className:"text-center mt-4 mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h1",{className:"text-2xl font-black text-gray-900 text-center mb-6 tracking-tight",children:"CHECK YOUR EMAIL"}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsxs("p",{className:"text-gray-700 text-base leading-relaxed mb-4",children:["We sent an email to"," ",m.jsx("span",{className:"font-semibold text-gray-900 break-all",children:(n==null?void 0:n.email)||"your email address"})," ","with a link to verify your WooCombine account."]}),m.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"It might take a few minutes. If you don't see our email in your inbox, please check your spam or promo folders. If you see multiple emails, make sure you're selecting the most recent verification email."})]}),m.jsx("div",{className:"flex-1 flex items-center justify-center py-4",children:m.jsx(LV,{})}),m.jsxs("div",{className:"mt-8 space-y-4",children:[d?m.jsx("button",{onClick:()=>c("/dashboard"),className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:"Continue to App"}):m.jsx("button",{onClick:E,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:"Open Email App"}),!d&&m.jsx("button",{onClick:x,disabled:o,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-xl transition-colors duration-200 disabled:opacity-50",children:o?"Checking...":"I've verified my email"}),!d&&m.jsx("div",{className:"text-red-600 text-sm text-center",children:"We haven't detected your email verification yet. Please check your inbox and try again."}),t&&m.jsx("div",{className:`text-sm text-center ${t.includes("sent")?"text-green-600":"text-red-600"}`,children:t}),!Bt.currentUser&&m.jsx("div",{className:"text-red-600 text-sm text-center",children:"User session expired. Please log in again."})]})]}),m.jsxs("div",{className:"px-6 pb-6 pt-4 border-t border-gray-100 space-y-3",children:[m.jsx("button",{onClick:_,disabled:i,className:"w-full text-cyan-600 hover:text-cyan-800 font-medium py-2 transition-colors duration-200 disabled:opacity-50",children:i?"Sending...":"Resend Email"}),m.jsx("button",{onClick:()=>c("/help"),className:"w-full text-cyan-600 hover:text-cyan-800 font-medium py-2 transition-colors duration-200",children:"Contact Support"}),Bt.currentUser?m.jsx("button",{onClick:async()=>{try{await g(),c("/welcome")}catch(A){console.error("Logout failed:",A),c("/welcome")}},className:"w-full text-gray-500 hover:text-gray-700 font-medium py-2 transition-colors duration-200",children:"Log Out"}):m.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),c("/welcome",{replace:!0})},className:"w-full text-gray-500 hover:text-gray-700 font-medium py-2 transition-colors duration-200",children:"Return to Welcome"})]})]})})}function BV(){const{user:n,setSelectedLeagueId:e,leagues:t}=pn(),r=Df(),[i,a]=B.useState([]),[o,u]=B.useState(!0),[c,d]=B.useState(null),p=Un();B.useEffect(()=>{if(!n){console.error("[SelectLeague] No user found in context."),d("No user found. Please log in again."),u(!1);return}if(t&&t.length>0){console.log("[SelectLeague] Using leagues from AuthContext:",t.length),a(t),d(null),u(!1);return}(async()=>{var A,S,I;try{console.log("[SelectLeague] Fetching leagues from API...");const P=(await Zt.get("/leagues/me",{timeout:45e3,retry:2})).data.leagues||[];a(P),P.length===0?d("No leagues linked to this account. Try creating a new one."):d(null)}catch(N){console.error("[SelectLeague] Fetch error:",N.message,(A=N.response)==null?void 0:A.data),((S=N.response)==null?void 0:S.status)===404?(a([]),d("No leagues linked to this account. Try creating a new one.")):N.message.includes("timeout")||N.code==="ECONNABORTED"?(a([]),d("Server is starting up, which can take up to a minute. Please wait and refresh the page.")):((I=N.response)==null?void 0:I.status)>=500?(a([]),d("Server is temporarily unavailable during startup. Please try refreshing in 30 seconds.")):(a([]),d("Could not fetch leagues. Please check your connection and try again."))}finally{u(!1)}})()},[n,t]);const g=E=>{localStorage.setItem("selectedLeagueId",E.id),e(E.id),p("/dashboard")},x=async()=>{try{await r()}catch(E){console.error("Logout error:",E),p("/login")}},_=E=>{const A=["bg-gradient-to-br from-cmf-primary to-cmf-secondary","bg-gradient-to-br from-purple-500 to-purple-700","bg-gradient-to-br from-blue-500 to-blue-700","bg-gradient-to-br from-green-500 to-green-700","bg-gradient-to-br from-orange-500 to-orange-700","bg-gradient-to-br from-red-500 to-red-700"];return A[E%A.length]};return m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[m.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Select Event"}),m.jsx("button",{onClick:()=>p("/dashboard"),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition",children:m.jsx(Mf,{className:"w-5 h-5 text-gray-600"})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-3 border-gray-300 border-t-cmf-primary rounded-full mb-4"}),m.jsx("div",{className:"text-gray-500 text-lg",children:"Loading leagues..."}),m.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"This may take a moment during server startup"})]}):c?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-red-600 mb-4 text-lg",children:c}),c.includes("timeout")&&m.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Refresh Page"})]}):i.length===0?m.jsx("div",{className:"text-center py-12 text-gray-500 text-lg",children:"No leagues found. Create or join one below."}):m.jsx("div",{className:"space-y-3",children:i.map((E,A)=>m.jsxs("button",{onClick:()=>g(E),className:`w-full ${_(A)} rounded-2xl p-6 text-white text-left relative overflow-hidden transform hover:scale-105 transition-transform shadow-lg`,children:[m.jsxs("div",{className:"mb-2",children:[m.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Event Code"}),m.jsxs("div",{className:"text-white text-lg font-mono font-bold",children:["(",E.id.slice(-8).toUpperCase(),")"]})]}),m.jsx("div",{className:"text-2xl font-bold mb-2 pr-8",children:E.name}),m.jsxs("div",{className:"text-white/90 text-sm capitalize",children:["Role: ",E.role]}),m.jsx("div",{className:"absolute top-4 right-4 w-12 h-12 border-2 border-white/20 rounded-full"}),m.jsx("div",{className:"absolute -bottom-6 -right-6 w-24 h-24 border-2 border-white/10 rounded-full"}),E.role==="organizer"&&m.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-xs font-bold text-gray-800",children:"!"})})]},E.id))})}),m.jsxs("div",{className:"p-4 space-y-3 border-t border-gray-200",children:[m.jsxs("button",{onClick:()=>p("/create-league"),className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-bold py-4 px-6 rounded-2xl transition flex items-center justify-center gap-2 text-lg",children:[m.jsx(a0,{className:"w-5 h-5"}),"Create an Event"]}),m.jsxs("button",{onClick:()=>p("/join"),className:"w-full border-2 border-cmf-primary text-cmf-primary hover:bg-cmf-primary hover:text-white font-bold py-4 px-6 rounded-2xl transition flex items-center justify-center gap-2 text-lg",children:[m.jsx(l0,{className:"w-5 h-5"}),"Join an Event"]})]}),m.jsxs("div",{className:"px-4 pb-4 text-center",children:[m.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Logged in as: ",(n==null?void 0:n.email)||"Unknown"]}),m.jsx("button",{onClick:x,className:"text-sm text-red-600 hover:text-red-800 underline",children:"Log out and switch accounts"})]})]})})})}const VV=[{key:"organizer",label:" League Operator",desc:"Full access to admin tools and player management."},{key:"coach",label:" Coach",desc:"View and customize, but cannot manage all players."},{key:"viewer",label:" Viewer / Guest",desc:"Read-only access to league data."}];function UV(){const{user:n}=pn(),[e,t]=B.useState(null),[r,i]=B.useState(""),[a,o]=B.useState(!1),[u,c]=B.useState(!0),d=Un(),p=Df(),g=KT();if(jg.useEffect(()=>{c(!1)},[]),!n||u)return m.jsx(W0,{title:"Preparing role selection...",subtitle:"Setting up your account",size:"large"});const x=async()=>{if(i(""),!n){i("No user found. Please log in again.");return}if(!e){i("Please select a role.");return}o(!0);try{await Q9(YT(g,"users",n.uid),{id:n.uid,email:n.email,role:e,created_at:eM()},{merge:!0}),await n.getIdToken(!0),d("/dashboard",{replace:!0})}catch(E){i(E.message||"Failed to save role."),console.error(" Firestore write failed in SelectRole for UID:",n==null?void 0:n.uid,E)}finally{o(!1)}},_=async()=>{try{await p(),d("/welcome")}catch(E){console.error("[SelectRole] Logout error:",E),i("Logout failed. Please try again.")}};return m.jsx(ri,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Welcome! What's your role?"}),m.jsx("div",{className:"w-full flex flex-col gap-4 mb-6",children:VV.map(E=>m.jsxs("button",{className:`w-full border-2 rounded-xl p-4 text-left flex flex-col transition font-semibold ${e===E.key?"border-cyan-600 bg-cyan-50 text-cyan-900":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>t(E.key),disabled:a,children:[m.jsx("span",{className:"text-lg mb-1",children:E.label}),m.jsx("span",{className:"text-gray-600 text-sm",children:E.desc})]},E.key))}),r&&m.jsx("div",{className:"w-full bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded mb-4 text-sm",children:r}),m.jsxs("div",{className:"w-full space-y-3",children:[m.jsx("button",{className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:transform-none",onClick:x,disabled:a,children:a?"Saving...":"Continue"}),m.jsx("button",{className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 rounded-xl transition-colors duration-200 disabled:opacity-50",onClick:_,disabled:a,children:a?"Logging out...":"Logout"})]})]})})}function FV({event:n,league:e}){if(!n||!e)return null;const t=n.id,r=`https://woo-combine.com/join-event/${t}`,i=a=>{navigator.clipboard.writeText(a)};return m.jsxs("div",{className:"w-full max-w-md text-center mx-auto",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2 text-green-600",children:"Event Created Successfully!"}),m.jsxs("p",{className:"text-gray-600 mb-4",children:['Your combine event "',n.name,'" is ready.']})]}),m.jsxs("div",{className:"bg-white border-2 border-green-200 rounded-xl p-6 mb-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Event Join Code:"}),m.jsx("div",{className:"text-2xl font-mono bg-gray-100 rounded p-3 inline-block border",children:t})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("div",{className:"flex justify-center mb-2",children:m.jsx("div",{className:"bg-white p-4 rounded-lg border",children:m.jsx(EC,{value:r,size:160})})}),m.jsxs("div",{className:"text-xs text-gray-500",children:["Scan to join: ",r]})]}),m.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[m.jsxs("button",{onClick:()=>i(t),className:"bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition flex items-center justify-center gap-2",children:[m.jsx(uC,{className:"w-4 h-4"}),"Copy Event Code"]}),m.jsxs("button",{onClick:()=>i(r),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition flex items-center justify-center gap-2",children:[m.jsx(s0,{className:"w-4 h-4"}),"Copy Join Link"]})]}),m.jsx("div",{className:"text-green-700 font-semibold text-sm",children:" Share this code or QR with coaches to join this combine event!"})]}),m.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[m.jsx("strong",{children:"Next steps:"}),m.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[m.jsx("li",{children:"Share the code/QR with your coaches"}),m.jsx("li",{children:"Upload player roster in the Admin section"}),m.jsx("li",{children:"Start recording drill results"})]})]})]})}function HV(){const n=Un(),{selectedEvent:e}=za(),{leagues:t,selectedLeagueId:r}=pn(),[i,a]=B.useState(!1),[o,u]=B.useState(null),c=t==null?void 0:t.find(g=>g.id===r),d=g=>{u(g),a(!0)},p=()=>{n("/admin#player-upload-section")};return i&&o?m.jsx(ri,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsx(FV,{event:o,league:c}),m.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:m.jsx("button",{onClick:p,className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] w-full",children:"Continue to Import Players"})})]})}):m.jsx(ri,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Select or Create an Event"}),m.jsx("p",{className:"mb-6 text-gray-600",children:"Choose an existing event or create a new combine event for your team."}),m.jsx(uk,{onEventSelected:d}),e&&m.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[m.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Selected: ",m.jsx("strong",{children:e.name})]}),m.jsx("button",{onClick:p,className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] w-full",children:"Continue to Import Players"})]})]})})}function zV(){return m.jsx(LI,{children:m.jsx(ek,{children:m.jsx(nk,{children:m.jsx(ik,{children:m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs(dI,{children:[m.jsx(Gt,{path:"/",element:m.jsx(Bi,{to:"/welcome",replace:!0})}),m.jsx(Gt,{path:"/welcome",element:m.jsx(kV,{})}),m.jsx(Gt,{path:"/coach-dashboard",element:m.jsx(Bi,{to:"/players?tab=rankings",replace:!0})}),m.jsx(Gt,{path:"/roster",element:m.jsx(Bi,{to:"/players?tab=players",replace:!0})}),m.jsx(Gt,{path:"/schedule",element:m.jsx(Bi,{to:"/players?tab=players",replace:!0})}),m.jsx(Gt,{path:"/dashboard",element:m.jsx(ba,{children:m.jsxs(m.Fragment,{children:[m.jsx(Am,{}),m.jsx(sk,{})]})})}),m.jsx(Gt,{path:"/players",element:m.jsx(ba,{children:m.jsxs(m.Fragment,{children:[m.jsx(Am,{}),m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx(dk,{})})]})})}),m.jsx(Gt,{path:"/admin",element:m.jsx(ba,{children:m.jsxs(m.Fragment,{children:[m.jsx(Am,{}),m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx(Ck,{})})]})})}),m.jsx(Gt,{path:"/live-entry",element:m.jsx(ba,{children:m.jsx(jk,{})})}),m.jsx(Gt,{path:"/login",element:m.jsx(Nk,{})}),m.jsx(Gt,{path:"/signup",element:m.jsx(Mk,{})}),m.jsx(Gt,{path:"/forgot-password",element:m.jsx(Lk,{})}),m.jsx(Gt,{path:"/claim",element:m.jsx(ri,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-6",style:{objectFit:"contain"}}),m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Account Claim"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Account claiming feature coming soon."}),m.jsx(lt,{to:"/welcome",className:"text-cyan-600 hover:text-cyan-700 underline font-semibold",children:" Back to Welcome"})]})})}),m.jsx(Gt,{path:"/create-league",element:m.jsx(ba,{children:m.jsx(Vk,{})})}),m.jsx(Gt,{path:"/join",element:m.jsx(ba,{children:m.jsx(PV,{})})}),m.jsx(Gt,{path:"/verify-email",element:m.jsx(jV,{})}),m.jsx(Gt,{path:"/select-league",element:m.jsx(ba,{children:m.jsx(BV,{})})}),m.jsx(Gt,{path:"/select-role",element:m.jsx(ba,{children:m.jsx(UV,{})})}),m.jsx(Gt,{path:"/onboarding/event",element:m.jsx(ba,{children:m.jsx(HV,{})})}),m.jsx(Gt,{path:"/help",element:m.jsx(Bi,{to:"/welcome",replace:!0})}),m.jsx(Gt,{path:"/terms",element:m.jsx(Bi,{to:"/welcome",replace:!0})}),m.jsx(Gt,{path:"/privacy",element:m.jsx(Bi,{to:"/welcome",replace:!0})})]})})})})})})}_4.createRoot(document.getElementById("root")).render(m.jsx(B.StrictMode,{children:m.jsx(zV,{})}));
