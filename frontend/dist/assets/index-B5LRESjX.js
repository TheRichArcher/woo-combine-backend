(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Sb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zp={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function w4(){if(v_)return Ou;v_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Ou.Fragment=e,Ou.jsx=t,Ou.jsxs=t,Ou}var y_;function E4(){return y_||(y_=1,Zp.exports=w4()),Zp.exports}var m=E4(),Jp={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function b4(){if(x_)return Xe;x_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function S($,ae,he){this.props=$,this.context=ae,this.refs=A,this.updater=he||_}S.prototype.isReactComponent={},S.prototype.setState=function($,ae){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ae,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function I(){}I.prototype=S.prototype;function N($,ae,he){this.props=$,this.context=ae,this.refs=A,this.updater=he||_}var O=N.prototype=new I;O.constructor=N,E(O,S.prototype),O.isPureReactComponent=!0;var j=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function P($,ae,he,fe,Te,Ve){return he=Ve.ref,{$$typeof:n,type:$,key:ae,ref:he!==void 0?he:null,props:Ve}}function R($,ae){return P($.type,ae,void 0,void 0,void 0,$.props)}function M($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function V($){var ae={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(he){return ae[he]})}var H=/\/+/g;function z($,ae){return typeof $=="object"&&$!==null&&$.key!=null?V(""+$.key):ae.toString(36)}function U(){}function _e($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(U,U):($.status="pending",$.then(function(ae){$.status==="pending"&&($.status="fulfilled",$.value=ae)},function(ae){$.status==="pending"&&($.status="rejected",$.reason=ae)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function Ee($,ae,he,fe,Te){var Ve=typeof $;(Ve==="undefined"||Ve==="boolean")&&($=null);var Ne=!1;if($===null)Ne=!0;else switch(Ve){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch($.$$typeof){case n:case e:Ne=!0;break;case p:return Ne=$._init,Ee(Ne($._payload),ae,he,fe,Te)}}if(Ne)return Te=Te($),Ne=fe===""?"."+z($,0):fe,j(Te)?(he="",Ne!=null&&(he=Ne.replace(H,"$&/")+"/"),Ee(Te,ae,he,"",function(Et){return Et})):Te!=null&&(M(Te)&&(Te=R(Te,he+(Te.key==null||$&&$.key===Te.key?"":(""+Te.key).replace(H,"$&/")+"/")+Ne)),ae.push(Te)),1;Ne=0;var Bt=fe===""?".":fe+":";if(j($))for(var ht=0;ht<$.length;ht++)fe=$[ht],Ve=Bt+z(fe,ht),Ne+=Ee(fe,ae,he,Ve,Te);else if(ht=x($),typeof ht=="function")for($=ht.call($),ht=0;!(fe=$.next()).done;)fe=fe.value,Ve=Bt+z(fe,ht++),Ne+=Ee(fe,ae,he,Ve,Te);else if(Ve==="object"){if(typeof $.then=="function")return Ee(_e($),ae,he,fe,Te);throw ae=String($),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function X($,ae,he){if($==null)return $;var fe=[],Te=0;return Ee($,fe,"","",function(Ve){return ae.call(he,Ve,Te++)}),fe}function le($){if($._status===-1){var ae=$._result;ae=ae(),ae.then(function(he){($._status===0||$._status===-1)&&($._status=1,$._result=he)},function(he){($._status===0||$._status===-1)&&($._status=2,$._result=he)}),$._status===-1&&($._status=0,$._result=ae)}if($._status===1)return $._result.default;throw $._result}var de=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function He(){}return Xe.Children={map:X,forEach:function($,ae,he){X($,function(){ae.apply(this,arguments)},he)},count:function($){var ae=0;return X($,function(){ae++}),ae},toArray:function($){return X($,function(ae){return ae})||[]},only:function($){if(!M($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Xe.Component=S,Xe.Fragment=t,Xe.Profiler=i,Xe.PureComponent=N,Xe.StrictMode=r,Xe.Suspense=u,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Xe.__COMPILER_RUNTIME={__proto__:null,c:function($){return F.H.useMemoCache($)}},Xe.cache=function($){return function(){return $.apply(null,arguments)}},Xe.cloneElement=function($,ae,he){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var fe=E({},$.props),Te=$.key,Ve=void 0;if(ae!=null)for(Ne in ae.ref!==void 0&&(Ve=void 0),ae.key!==void 0&&(Te=""+ae.key),ae)!q.call(ae,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ae.ref===void 0||(fe[Ne]=ae[Ne]);var Ne=arguments.length-2;if(Ne===1)fe.children=he;else if(1<Ne){for(var Bt=Array(Ne),ht=0;ht<Ne;ht++)Bt[ht]=arguments[ht+2];fe.children=Bt}return P($.type,Te,void 0,void 0,Ve,fe)},Xe.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:a,_context:$},$},Xe.createElement=function($,ae,he){var fe,Te={},Ve=null;if(ae!=null)for(fe in ae.key!==void 0&&(Ve=""+ae.key),ae)q.call(ae,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Te[fe]=ae[fe]);var Ne=arguments.length-2;if(Ne===1)Te.children=he;else if(1<Ne){for(var Bt=Array(Ne),ht=0;ht<Ne;ht++)Bt[ht]=arguments[ht+2];Te.children=Bt}if($&&$.defaultProps)for(fe in Ne=$.defaultProps,Ne)Te[fe]===void 0&&(Te[fe]=Ne[fe]);return P($,Ve,void 0,void 0,null,Te)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function($){return{$$typeof:c,render:$}},Xe.isValidElement=M,Xe.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:le}},Xe.memo=function($,ae){return{$$typeof:d,type:$,compare:ae===void 0?null:ae}},Xe.startTransition=function($){var ae=F.T,he={};F.T=he;try{var fe=$(),Te=F.S;Te!==null&&Te(he,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(He,de)}catch(Ve){de(Ve)}finally{F.T=ae}},Xe.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Xe.use=function($){return F.H.use($)},Xe.useActionState=function($,ae,he){return F.H.useActionState($,ae,he)},Xe.useCallback=function($,ae){return F.H.useCallback($,ae)},Xe.useContext=function($){return F.H.useContext($)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function($,ae){return F.H.useDeferredValue($,ae)},Xe.useEffect=function($,ae,he){var fe=F.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect($,ae)},Xe.useId=function(){return F.H.useId()},Xe.useImperativeHandle=function($,ae,he){return F.H.useImperativeHandle($,ae,he)},Xe.useInsertionEffect=function($,ae){return F.H.useInsertionEffect($,ae)},Xe.useLayoutEffect=function($,ae){return F.H.useLayoutEffect($,ae)},Xe.useMemo=function($,ae){return F.H.useMemo($,ae)},Xe.useOptimistic=function($,ae){return F.H.useOptimistic($,ae)},Xe.useReducer=function($,ae,he){return F.H.useReducer($,ae,he)},Xe.useRef=function($){return F.H.useRef($)},Xe.useState=function($){return F.H.useState($)},Xe.useSyncExternalStore=function($,ae,he){return F.H.useSyncExternalStore($,ae,he)},Xe.useTransition=function(){return F.H.useTransition()},Xe.version="19.1.0",Xe}var __;function wf(){return __||(__=1,Jp.exports=b4()),Jp.exports}var k=wf();const Tb=Sb(k);var em={exports:{}},Du={},tm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function A4(){return w_||(w_=1,function(n){function e(X,le){var de=X.length;X.push(le);e:for(;0<de;){var He=de-1>>>1,$=X[He];if(0<i($,le))X[He]=le,X[de]=$,de=He;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var le=X[0],de=X.pop();if(de!==le){X[0]=de;e:for(var He=0,$=X.length,ae=$>>>1;He<ae;){var he=2*(He+1)-1,fe=X[he],Te=he+1,Ve=X[Te];if(0>i(fe,de))Te<$&&0>i(Ve,fe)?(X[He]=Ve,X[Te]=de,He=Te):(X[He]=fe,X[he]=de,He=he);else if(Te<$&&0>i(Ve,de))X[He]=Ve,X[Te]=de,He=Te;else break e}}return le}function i(X,le){var de=X.sortIndex-le.sortIndex;return de!==0?de:X.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,g=null,x=3,_=!1,E=!1,A=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function j(X){for(var le=t(d);le!==null;){if(le.callback===null)r(d);else if(le.startTime<=X)r(d),le.sortIndex=le.expirationTime,e(u,le);else break;le=t(d)}}function F(X){if(A=!1,j(X),!E)if(t(u)!==null)E=!0,q||(q=!0,z());else{var le=t(d);le!==null&&Ee(F,le.startTime-X)}}var q=!1,P=-1,R=5,M=-1;function V(){return S?!0:!(n.unstable_now()-M<R)}function H(){if(S=!1,q){var X=n.unstable_now();M=X;var le=!0;try{e:{E=!1,A&&(A=!1,N(P),P=-1),_=!0;var de=x;try{t:{for(j(X),g=t(u);g!==null&&!(g.expirationTime>X&&V());){var He=g.callback;if(typeof He=="function"){g.callback=null,x=g.priorityLevel;var $=He(g.expirationTime<=X);if(X=n.unstable_now(),typeof $=="function"){g.callback=$,j(X),le=!0;break t}g===t(u)&&r(u),j(X)}else r(u);g=t(u)}if(g!==null)le=!0;else{var ae=t(d);ae!==null&&Ee(F,ae.startTime-X),le=!1}}break e}finally{g=null,x=de,_=!1}le=void 0}}finally{le?z():q=!1}}}var z;if(typeof O=="function")z=function(){O(H)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,_e=U.port2;U.port1.onmessage=H,z=function(){_e.postMessage(null)}}else z=function(){I(H,0)};function Ee(X,le){P=I(function(){X(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(X){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var de=x;x=le;try{return X()}finally{x=de}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(X,le){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=x;x=X;try{return le()}finally{x=de}},n.unstable_scheduleCallback=function(X,le,de){var He=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?He+de:He):de=He,X){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=de+$,X={id:p++,callback:le,priorityLevel:X,startTime:de,expirationTime:$,sortIndex:-1},de>He?(X.sortIndex=de,e(d,X),t(u)===null&&X===t(d)&&(A?(N(P),P=-1):A=!0,Ee(F,de-He))):(X.sortIndex=$,e(u,X),E||_||(E=!0,q||(q=!0,z()))),X},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(X){var le=x;return function(){var de=x;x=le;try{return X.apply(this,arguments)}finally{x=de}}}}(nm)),nm}var E_;function S4(){return E_||(E_=1,tm.exports=A4()),tm.exports}var rm={exports:{}},lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function T4(){if(b_)return lr;b_=1;var n=wf();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,lr.createPortal=function(u,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,p)},lr.flushSync=function(u){var d=o.T,p=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=p,r.d.f()}},lr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},lr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},lr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:_}):p==="script"&&r.d.X(u,{crossOrigin:g,integrity:x,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},lr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},lr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin);r.d.L(u,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},lr.preloadModule=function(u,d){if(typeof u=="string")if(d){var p=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},lr.requestFormReset=function(u){r.d.r(u)},lr.unstable_batchedUpdates=function(u,d){return u(d)},lr.useFormState=function(u,d,p){return o.H.useFormState(u,d,p)},lr.useFormStatus=function(){return o.H.useHostTransitionStatus()},lr.version="19.1.0",lr}var A_;function C4(){if(A_)return rm.exports;A_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rm.exports=T4(),rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function I4(){if(S_)return Du;S_=1;var n=S4(),e=wf(),t=C4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(a(s)!==s)throw Error(r(188))}function u(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,h=l;;){var y=f.return;if(y===null)break;var w=y.alternate;if(w===null){if(h=y.return,h!==null){f=h;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===f)return c(y),s;if(w===h)return c(y),l;w=w.sibling}throw Error(r(188))}if(f.return!==h.return)f=y,h=w;else{for(var C=!1,D=y.child;D;){if(D===f){C=!0,f=y,h=w;break}if(D===h){C=!0,h=y,f=w;break}D=D.sibling}if(!C){for(D=w.child;D;){if(D===f){C=!0,f=w,h=y;break}if(D===h){C=!0,h=w,f=y;break}D=D.sibling}if(!C)throw Error(r(189))}}if(f.alternate!==h)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function d(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=d(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var U=Symbol.for("react.client.reference");function _e(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===U?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case F:return"Suspense";case q:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case O:return(s.displayName||"Context")+".Provider";case N:return(s._context.displayName||"Context")+".Consumer";case j:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return l=s.displayName||null,l!==null?l:_e(s.type)||"Memo";case R:l=s._payload,s=s._init;try{return _e(s(l))}catch{}}return null}var Ee=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},He=[],$=-1;function ae(s){return{current:s}}function he(s){0>$||(s.current=He[$],He[$]=null,$--)}function fe(s,l){$++,He[$]=s.current,s.current=l}var Te=ae(null),Ve=ae(null),Ne=ae(null),Bt=ae(null);function ht(s,l){switch(fe(Ne,l),fe(Ve,s),fe(Te,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?q2(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=q2(l),s=$2(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}he(Te),fe(Te,s)}function Et(){he(Te),he(Ve),he(Ne)}function gr(s){s.memoizedState!==null&&fe(Bt,s);var l=Te.current,f=$2(l,s.type);l!==f&&(fe(Ve,s),fe(Te,f))}function Vn(s){Ve.current===s&&(he(Te),he(Ve)),Bt.current===s&&(he(Bt),Tu._currentValue=de)}var Tr=Object.prototype.hasOwnProperty,me=n.unstable_scheduleCallback,ve=n.unstable_cancelCallback,we=n.unstable_shouldYield,be=n.unstable_requestPaint,Ie=n.unstable_now,ze=n.unstable_getCurrentPriorityLevel,rt=n.unstable_ImmediatePriority,Vt=n.unstable_UserBlockingPriority,zt=n.unstable_NormalPriority,Jt=n.unstable_LowPriority,Cr=n.unstable_IdlePriority,Re=n.log,ot=n.unstable_setDisableYieldValue,it=null,Me=null;function Rt(s){if(typeof Re=="function"&&ot(s),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(it,s)}catch{}}var pt=Math.clz32?Math.clz32:Vr,hi=Math.log,vr=Math.LN2;function Vr(s){return s>>>=0,s===0?32:31-(hi(s)/vr|0)|0}var aa=256,pi=4194304;function Ur(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Wo(s,l,f){var h=s.pendingLanes;if(h===0)return 0;var y=0,w=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var D=h&134217727;return D!==0?(h=D&~w,h!==0?y=Ur(h):(C&=D,C!==0?y=Ur(C):f||(f=D&~s,f!==0&&(y=Ur(f))))):(D=h&~w,D!==0?y=Ur(D):C!==0?y=Ur(C):f||(f=h&~s,f!==0&&(y=Ur(f)))),y===0?0:l!==0&&l!==y&&(l&w)===0&&(w=y&-y,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:y}function $s(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Tc(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var s=aa;return aa<<=1,(aa&4194048)===0&&(aa=256),s}function Ic(){var s=pi;return pi<<=1,(pi&62914560)===0&&(pi=4194304),s}function sa(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function oa(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Nc(s,l,f,h,y,w){var C=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var D=s.entanglements,G=s.expirationTimes,Z=s.hiddenUpdates;for(f=C&~f;0<f;){var se=31-pt(f),ce=1<<se;D[se]=0,G[se]=-1;var ee=Z[se];if(ee!==null)for(Z[se]=null,se=0;se<ee.length;se++){var te=ee[se];te!==null&&(te.lane&=-536870913)}f&=~ce}h!==0&&Oi(s,h,0),w!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=w&~(C&~l))}function Oi(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var h=31-pt(l);s.entangledLanes|=l,s.entanglements[h]=s.entanglements[h]|1073741824|f&4194090}function Rc(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var h=31-pt(f),y=1<<h;y&l|s[h]&l&&(s[h]|=l),f&=~y}}function Qa(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xo(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Za(){var s=le.p;return s!==0?s:(s=window.event,s===void 0?32:f_(s.type))}function Ff(s,l){var f=le.p;try{return le.p=s,l()}finally{le.p=f}}var Yt=Math.random().toString(36).slice(2),An="__reactFiber$"+Yt,gn="__reactProps$"+Yt,Yr="__reactContainer$"+Yt,Oc="__reactEvents$"+Yt,t1="__reactListeners$"+Yt,Ja="__reactHandles$"+Yt,Hf="__reactResources$"+Yt,Ws="__reactMarker$"+Yt;function es(s){delete s[An],delete s[gn],delete s[Oc],delete s[t1],delete s[Ja]}function la(s){var l=s[An];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Yr]||f[An]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=K2(s);s!==null;){if(f=s[An])return f;s=K2(s)}return l}s=f,f=s.parentNode}return null}function Di(s){if(s=s[An]||s[Yr]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function Pi(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function yr(s){var l=s[Hf];return l||(l=s[Hf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function un(s){s[Ws]=!0}var Dc=new Set,Yo={};function mi(s,l){ca(s,l),ca(s+"Capture",l)}function ca(s,l){for(Yo[s]=l,s=0;s<l.length;s++)Dc.add(l[s])}var zf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gf={},Xs={};function qf(s){return Tr.call(Xs,s)?!0:Tr.call(Gf,s)?!1:zf.test(s)?Xs[s]=!0:(Gf[s]=!0,!1)}function ts(s,l,f){if(qf(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Mi(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function Kn(s,l,f,h){if(h===null)s.removeAttribute(f);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+h)}}var Ys,$f;function ua(s){if(Ys===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ys=l&&l[1]||"",$f=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ys+s+$f}var Ko=!1;function Qo(s,l){if(!s||Ko)return"";Ko=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(te){var ee=te}Reflect.construct(s,[],ce)}else{try{ce.call()}catch(te){ee=te}s.call(ce.prototype)}}else{try{throw Error()}catch(te){ee=te}(ce=s())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),C=w[0],D=w[1];if(C&&D){var G=C.split(`
`),Z=D.split(`
`);for(y=h=0;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;for(;y<Z.length&&!Z[y].includes("DetermineComponentFrameRoot");)y++;if(h===G.length||y===Z.length)for(h=G.length-1,y=Z.length-1;1<=h&&0<=y&&G[h]!==Z[y];)y--;for(;1<=h&&0<=y;h--,y--)if(G[h]!==Z[y]){if(h!==1||y!==1)do if(h--,y--,0>y||G[h]!==Z[y]){var se=`
`+G[h].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=h&&0<=y);break}}}finally{Ko=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?ua(f):""}function Pc(s){switch(s.tag){case 26:case 27:case 5:return ua(s.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 15:return Qo(s.type,!1);case 11:return Qo(s.type.render,!1);case 1:return Qo(s.type,!0);case 31:return ua("Activity");default:return""}}function Zo(s){try{var l="";do l+=Pc(s),s=s.return;while(s);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function xr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Mc(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function n1(s){var l=Mc(s)?"checked":"value",f=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),h=""+s[l];if(!s.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,w=f.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(C){h=""+C,w.call(this,C)}}),Object.defineProperty(s,l,{enumerable:f.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Jo(s){s._valueTracker||(s._valueTracker=n1(s))}function kc(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),h="";return s&&(h=Mc(s)?s.checked?"true":"false":s.value),s=h,s!==f?(l.setValue(s),!0):!1}function Ks(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var r1=/[\n"\\]/g;function vn(s){return s.replace(r1,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Fr(s,l,f,h,y,w,C,D){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),l!=null?C==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+xr(l)):s.value!==""+xr(l)&&(s.value=""+xr(l)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),l!=null?ns(s,C,xr(l)):f!=null?ns(s,C,xr(f)):h!=null&&s.removeAttribute("value"),y==null&&w!=null&&(s.defaultChecked=!!w),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+xr(D):s.removeAttribute("name")}function Qs(s,l,f,h,y,w,C,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;f=f!=null?""+xr(f):"",l=l!=null?""+xr(l):f,D||l===s.value||(s.value=l),s.defaultValue=l}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=D?s.checked:!!h,s.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function ns(s,l,f){l==="number"&&Ks(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function fa(s,l,f,h){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&h&&(s[f].defaultSelected=!0)}else{for(f=""+xr(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,h&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function Ot(s,l,f){if(l!=null&&(l=""+xr(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+xr(f):""}function Zs(s,l,f,h){if(l==null){if(h!=null){if(f!=null)throw Error(r(92));if(Ee(h)){if(1<h.length)throw Error(r(93));h=h[0]}f=h}f==null&&(f=""),l=f}f=xr(l),s.defaultValue=f,h=s.textContent,h===f&&h!==""&&h!==null&&(s.value=h)}function Kr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wf(s,l,f){var h=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?h?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":h?s.setProperty(l,f):typeof f!="number"||f===0||Js.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function Lc(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var h in f)!f.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var y in l)h=l[y],l.hasOwnProperty(y)&&f[y]!==h&&Wf(s,y,h)}else for(var w in l)l.hasOwnProperty(w)&&Wf(s,w,l[w])}function jc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),a1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(s){return a1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var da=null;function Qr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ha=null,pa=null;function Bc(s){var l=Di(s);if(l&&(s=l.stateNode)){var f=s[gn]||null;e:switch(s=l.stateNode,l.type){case"input":if(Fr(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+vn(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var h=f[l];if(h!==s&&h.form===s.form){var y=h[gn]||null;if(!y)throw Error(r(90));Fr(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)h=f[l],h.form===s.form&&kc(h)}break e;case"textarea":Ot(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&fa(s,!!f.multiple,l,!1)}}}var ki=!1;function Xf(s,l,f){if(ki)return s(l,f);ki=!0;try{var h=s(l);return h}finally{if(ki=!1,(ha!==null||pa!==null)&&(Fd(),ha&&(l=ha,s=pa,pa=ha=null,Bc(l),s)))for(l=0;l<s.length;l++)Bc(s[l])}}function eo(s,l){var f=s.stateNode;if(f===null)return null;var h=f[gn]||null;if(h===null)return null;f=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zr=!1;if(gi)try{var to={};Object.defineProperty(to,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{Zr=!1}var Li=null,rs=null,ma=null;function Vc(){if(ma)return ma;var s,l=rs,f=l.length,h,y="value"in Li?Li.value:Li.textContent,w=y.length;for(s=0;s<f&&l[s]===y[s];s++);var C=f-s;for(h=1;h<=C&&l[f-h]===y[w-h];h++);return ma=y.slice(s,1<h?1-h:void 0)}function ji(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Bi(){return!0}function Uc(){return!1}function Un(s){function l(f,h,y,w,C){this._reactName=f,this._targetInst=y,this.type=h,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(f=s[D],this[D]=f?f(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Bi:Uc,this.isPropagationStopped=Uc,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),l}var bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Un(bt),no=p({},bt,{view:0,detail:0}),Yf=Un(no),nl,rl,Vi,ro=p({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:so,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Vi&&(Vi&&s.type==="mousemove"?(nl=s.screenX-Vi.screenX,rl=s.screenY-Vi.screenY):rl=nl=0,Vi=s),nl)},movementY:function(s){return"movementY"in s?s.movementY:rl}}),Jr=Un(ro),Kf=p({},ro,{dataTransfer:0}),s1=Un(Kf),io=p({},no,{relatedTarget:0}),il=Un(io),Fc=p({},bt,{animationName:0,elapsedTime:0,pseudoElement:0}),al=Un(Fc),Qf=p({},bt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),sl=Un(Qf),o1=p({},bt,{data:0}),Hc=Un(o1),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zc(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Jf[s])?!!l[s]:!1}function so(){return zc}var ed=p({},no,{key:function(s){if(s.key){var l=ao[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=ji(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Zf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:so,charCode:function(s){return s.type==="keypress"?ji(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ji(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ol=Un(ed),td=p({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gc=Un(td),ga=p({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:so}),nd=Un(ga),rd=p({},bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),id=Un(rd),ad=p({},ro,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ll=Un(ad),_r=p({},bt,{newState:0,oldState:0}),sd=Un(_r),od=[9,13,27,32],Ui=gi&&"CompositionEvent"in window,v=null;gi&&"documentMode"in document&&(v=document.documentMode);var b=gi&&"TextEvent"in window&&!v,T=gi&&(!Ui||v&&8<v&&11>=v),L=" ",K=!1;function ne(s,l){switch(s){case"keyup":return od.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var lt=!1;function Sn(s,l){switch(s){case"compositionend":return ye(l);case"keypress":return l.which!==32?null:(K=!0,L);case"textInput":return s=l.data,s===L&&K?null:s;default:return null}}function ct(s,l){if(lt)return s==="compositionend"||!Ui&&ne(s,l)?(s=Vc(),ma=rs=Li=null,lt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return T&&l.locale!=="ko"?null:l.data;default:return null}}var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tn(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Fn[s.type]:l==="textarea"}function va(s,l,f,h){ha?pa?pa.push(h):pa=[h]:ha=h,l=Wd(l,"onChange"),0<l.length&&(f=new tl("onChange","change",null,f,h),s.push({event:f,listeners:l}))}var Qn=null,Fi=null;function qc(s){U2(s,0)}function ld(s){var l=Pi(s);if(kc(l))return s}function oy(s,l){if(s==="change")return l}var ly=!1;if(gi){var l1;if(gi){var c1="oninput"in document;if(!c1){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),c1=typeof cy.oninput=="function"}l1=c1}else l1=!1;ly=l1&&(!document.documentMode||9<document.documentMode)}function uy(){Qn&&(Qn.detachEvent("onpropertychange",fy),Fi=Qn=null)}function fy(s){if(s.propertyName==="value"&&ld(Fi)){var l=[];va(l,Fi,s,Qr(s)),Xf(qc,l)}}function QC(s,l,f){s==="focusin"?(uy(),Qn=l,Fi=f,Qn.attachEvent("onpropertychange",fy)):s==="focusout"&&uy()}function ZC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ld(Fi)}function JC(s,l){if(s==="click")return ld(l)}function e3(s,l){if(s==="input"||s==="change")return ld(l)}function t3(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Hr=typeof Object.is=="function"?Object.is:t3;function $c(s,l){if(Hr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),h=Object.keys(l);if(f.length!==h.length)return!1;for(h=0;h<f.length;h++){var y=f[h];if(!Tr.call(l,y)||!Hr(s[y],l[y]))return!1}return!0}function dy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function hy(s,l){var f=dy(s);s=0;for(var h;f;){if(f.nodeType===3){if(h=s+f.textContent.length,s<=l&&h>=l)return{node:f,offset:l-s};s=h}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=dy(f)}}function py(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?py(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function my(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ks(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Ks(s.document)}return l}function u1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var n3=gi&&"documentMode"in document&&11>=document.documentMode,cl=null,f1=null,Wc=null,d1=!1;function gy(s,l,f){var h=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;d1||cl==null||cl!==Ks(h)||(h=cl,"selectionStart"in h&&u1(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Wc&&$c(Wc,h)||(Wc=h,h=Wd(f1,"onSelect"),0<h.length&&(l=new tl("onSelect","select",null,l,f),s.push({event:l,listeners:h}),l.target=cl)))}function oo(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var ul={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},h1={},vy={};gi&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function lo(s){if(h1[s])return h1[s];if(!ul[s])return s;var l=ul[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in vy)return h1[s]=l[f];return s}var yy=lo("animationend"),xy=lo("animationiteration"),_y=lo("animationstart"),r3=lo("transitionrun"),i3=lo("transitionstart"),a3=lo("transitioncancel"),wy=lo("transitionend"),Ey=new Map,p1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");p1.push("scrollEnd");function vi(s,l){Ey.set(s,l),mi(l,[s])}var by=new WeakMap;function ei(s,l){if(typeof s=="object"&&s!==null){var f=by.get(s);return f!==void 0?f:(l={value:s,source:l,stack:Zo(l)},by.set(s,l),l)}return{value:s,source:l,stack:Zo(l)}}var ti=[],fl=0,m1=0;function cd(){for(var s=fl,l=m1=fl=0;l<s;){var f=ti[l];ti[l++]=null;var h=ti[l];ti[l++]=null;var y=ti[l];ti[l++]=null;var w=ti[l];if(ti[l++]=null,h!==null&&y!==null){var C=h.pending;C===null?y.next=y:(y.next=C.next,C.next=y),h.pending=y}w!==0&&Ay(f,y,w)}}function ud(s,l,f,h){ti[fl++]=s,ti[fl++]=l,ti[fl++]=f,ti[fl++]=h,m1|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function g1(s,l,f,h){return ud(s,l,f,h),fd(s)}function dl(s,l){return ud(s,null,null,l),fd(s)}function Ay(s,l,f){s.lanes|=f;var h=s.alternate;h!==null&&(h.lanes|=f);for(var y=!1,w=s.return;w!==null;)w.childLanes|=f,h=w.alternate,h!==null&&(h.childLanes|=f),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(y=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,y&&l!==null&&(y=31-pt(f),s=w.hiddenUpdates,h=s[y],h===null?s[y]=[l]:h.push(l),l.lane=f|536870912),w):null}function fd(s){if(50<yu)throw yu=0,Ep=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var hl={};function s3(s,l,f,h){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(s,l,f,h){return new s3(s,l,f,h)}function v1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ya(s,l){var f=s.alternate;return f===null?(f=zr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function Sy(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function dd(s,l,f,h,y,w){var C=0;if(h=s,typeof s=="function")v1(s)&&(C=1);else if(typeof s=="string")C=l4(s,f,Te.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=zr(31,f,l,y),s.elementType=M,s.lanes=w,s;case E:return co(f.children,y,w,l);case A:C=8,y|=24;break;case S:return s=zr(12,f,l,y|2),s.elementType=S,s.lanes=w,s;case F:return s=zr(13,f,l,y),s.elementType=F,s.lanes=w,s;case q:return s=zr(19,f,l,y),s.elementType=q,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case O:C=10;break e;case N:C=9;break e;case j:C=11;break e;case P:C=14;break e;case R:C=16,h=null;break e}C=29,f=Error(r(130,s===null?"null":typeof s,"")),h=null}return l=zr(C,f,l,y),l.elementType=s,l.type=h,l.lanes=w,l}function co(s,l,f,h){return s=zr(7,s,h,l),s.lanes=f,s}function y1(s,l,f){return s=zr(6,s,null,l),s.lanes=f,s}function x1(s,l,f){return l=zr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var pl=[],ml=0,hd=null,pd=0,ni=[],ri=0,uo=null,xa=1,_a="";function fo(s,l){pl[ml++]=pd,pl[ml++]=hd,hd=s,pd=l}function Ty(s,l,f){ni[ri++]=xa,ni[ri++]=_a,ni[ri++]=uo,uo=s;var h=xa;s=_a;var y=32-pt(h)-1;h&=~(1<<y),f+=1;var w=32-pt(l)+y;if(30<w){var C=y-y%5;w=(h&(1<<C)-1).toString(32),h>>=C,y-=C,xa=1<<32-pt(l)+y|f<<y|h,_a=w+s}else xa=1<<w|f<<y|h,_a=s}function _1(s){s.return!==null&&(fo(s,1),Ty(s,1,0))}function w1(s){for(;s===hd;)hd=pl[--ml],pl[ml]=null,pd=pl[--ml],pl[ml]=null;for(;s===uo;)uo=ni[--ri],ni[ri]=null,_a=ni[--ri],ni[ri]=null,xa=ni[--ri],ni[ri]=null}var wr=null,sn=null,xt=!1,ho=null,Hi=!1,E1=Error(r(519));function po(s){var l=Error(r(418,""));throw Kc(ei(l,s)),E1}function Cy(s){var l=s.stateNode,f=s.type,h=s.memoizedProps;switch(l[An]=s,l[gn]=h,f){case"dialog":nt("cancel",l),nt("close",l);break;case"iframe":case"object":case"embed":nt("load",l);break;case"video":case"audio":for(f=0;f<_u.length;f++)nt(_u[f],l);break;case"source":nt("error",l);break;case"img":case"image":case"link":nt("error",l),nt("load",l);break;case"details":nt("toggle",l);break;case"input":nt("invalid",l),Qs(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Jo(l);break;case"select":nt("invalid",l);break;case"textarea":nt("invalid",l),Zs(l,h.value,h.defaultValue,h.children),Jo(l)}f=h.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||h.suppressHydrationWarning===!0||G2(l.textContent,f)?(h.popover!=null&&(nt("beforetoggle",l),nt("toggle",l)),h.onScroll!=null&&nt("scroll",l),h.onScrollEnd!=null&&nt("scrollend",l),h.onClick!=null&&(l.onclick=Xd),l=!0):l=!1,l||po(s)}function Iy(s){for(wr=s.return;wr;)switch(wr.tag){case 5:case 13:Hi=!1;return;case 27:case 3:Hi=!0;return;default:wr=wr.return}}function Xc(s){if(s!==wr)return!1;if(!xt)return Iy(s),xt=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||Bp(s.type,s.memoizedProps)),f=!f),f&&sn&&po(s),Iy(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(f=s.data,f==="/$"){if(l===0){sn=xi(s.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;s=s.nextSibling}sn=null}}else l===27?(l=sn,xs(s.type)?(s=Hp,Hp=null,sn=s):sn=l):sn=wr?xi(s.stateNode.nextSibling):null;return!0}function Yc(){sn=wr=null,xt=!1}function Ny(){var s=ho;return s!==null&&(Rr===null?Rr=s:Rr.push.apply(Rr,s),ho=null),s}function Kc(s){ho===null?ho=[s]:ho.push(s)}var b1=ae(null),mo=null,wa=null;function is(s,l,f){fe(b1,l._currentValue),l._currentValue=f}function Ea(s){s._currentValue=b1.current,he(b1)}function A1(s,l,f){for(;s!==null;){var h=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),s===f)break;s=s.return}}function S1(s,l,f,h){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var w=y.dependencies;if(w!==null){var C=y.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=y;for(var G=0;G<l.length;G++)if(D.context===l[G]){w.lanes|=f,D=w.alternate,D!==null&&(D.lanes|=f),A1(w.return,f,s),h||(C=null);break e}w=D.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=f,w=C.alternate,w!==null&&(w.lanes|=f),A1(C,f,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Qc(s,l,f,h){s=null;for(var y=l,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var D=y.type;Hr(y.pendingProps.value,C.value)||(s!==null?s.push(D):s=[D])}}else if(y===Bt.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Tu):s=[Tu])}y=y.return}s!==null&&S1(l,s,f,h),l.flags|=262144}function md(s){for(s=s.firstContext;s!==null;){if(!Hr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function go(s){mo=s,wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function or(s){return Ry(mo,s)}function gd(s,l){return mo===null&&go(s),Ry(s,l)}function Ry(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},wa===null){if(s===null)throw Error(r(308));wa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else wa=wa.next=l;return f}var o3=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,h){s.push(h)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},l3=n.unstable_scheduleCallback,c3=n.unstable_NormalPriority,Cn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function T1(){return{controller:new o3,data:new Map,refCount:0}}function Zc(s){s.refCount--,s.refCount===0&&l3(c3,function(){s.controller.abort()})}var Jc=null,C1=0,gl=0,vl=null;function u3(s,l){if(Jc===null){var f=Jc=[];C1=0,gl=Np(),vl={status:"pending",value:void 0,then:function(h){f.push(h)}}}return C1++,l.then(Oy,Oy),l}function Oy(){if(--C1===0&&Jc!==null){vl!==null&&(vl.status="fulfilled");var s=Jc;Jc=null,gl=0,vl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function f3(s,l){var f=[],h={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){h.status="fulfilled",h.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(h.status="rejected",h.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),h}var Dy=X.S;X.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&u3(s,l),Dy!==null&&Dy(s,l)};var vo=ae(null);function I1(){var s=vo.current;return s!==null?s:Ut.pooledCache}function vd(s,l){l===null?fe(vo,vo.current):fe(vo,l.pool)}function Py(){var s=I1();return s===null?null:{parent:Cn._currentValue,pool:s}}var eu=Error(r(460)),My=Error(r(474)),yd=Error(r(542)),N1={then:function(){}};function ky(s){return s=s.status,s==="fulfilled"||s==="rejected"}function xd(){}function Ly(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(xd,xd),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,By(s),s;default:if(typeof l.status=="string")l.then(xd,xd);else{if(s=Ut,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(h){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=h}},function(h){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,By(s),s}throw tu=l,eu}}var tu=null;function jy(){if(tu===null)throw Error(r(459));var s=tu;return tu=null,s}function By(s){if(s===eu||s===yd)throw Error(r(483))}var as=!1;function R1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function O1(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ss(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function os(s,l,f){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Tt&2)!==0){var y=h.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),h.pending=l,l=fd(s),Ay(s,null,f),l}return ud(s,h,l,f),fd(s)}function nu(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Rc(s,f)}}function D1(s,l){var f=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,f===h)){var y=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var C={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?y=w=C:w=w.next=C,f=f.next}while(f!==null);w===null?y=w=l:w=w.next=l}else y=w=l;f={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var P1=!1;function ru(){if(P1){var s=vl;if(s!==null)throw s}}function iu(s,l,f,h){P1=!1;var y=s.updateQueue;as=!1;var w=y.firstBaseUpdate,C=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var G=D,Z=G.next;G.next=null,C===null?w=Z:C.next=Z,C=G;var se=s.alternate;se!==null&&(se=se.updateQueue,D=se.lastBaseUpdate,D!==C&&(D===null?se.firstBaseUpdate=Z:D.next=Z,se.lastBaseUpdate=G))}if(w!==null){var ce=y.baseState;C=0,se=Z=G=null,D=w;do{var ee=D.lane&-536870913,te=ee!==D.lane;if(te?(ut&ee)===ee:(h&ee)===ee){ee!==0&&ee===gl&&(P1=!0),se!==null&&(se=se.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ue=s,ke=D;ee=l;var Mt=f;switch(ke.tag){case 1:if(Ue=ke.payload,typeof Ue=="function"){ce=Ue.call(Mt,ce,ee);break e}ce=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=ke.payload,ee=typeof Ue=="function"?Ue.call(Mt,ce,ee):Ue,ee==null)break e;ce=p({},ce,ee);break e;case 2:as=!0}}ee=D.callback,ee!==null&&(s.flags|=64,te&&(s.flags|=8192),te=y.callbacks,te===null?y.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:D.tag,payload:D.payload,callback:D.callback,next:null},se===null?(Z=se=te,G=ce):se=se.next=te,C|=ee;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;te=D,D=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);se===null&&(G=ce),y.baseState=G,y.firstBaseUpdate=Z,y.lastBaseUpdate=se,w===null&&(y.shared.lanes=0),ms|=C,s.lanes=C,s.memoizedState=ce}}function Vy(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function Uy(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)Vy(f[s],l)}var yl=ae(null),_d=ae(0);function Fy(s,l){s=Na,fe(_d,s),fe(yl,l),Na=s|l.baseLanes}function M1(){fe(_d,Na),fe(yl,yl.current)}function k1(){Na=_d.current,he(yl),he(_d)}var ls=0,Ye=null,Dt=null,yn=null,wd=!1,xl=!1,yo=!1,Ed=0,au=0,_l=null,d3=0;function fn(){throw Error(r(321))}function L1(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Hr(s[f],l[f]))return!1;return!0}function j1(s,l,f,h,y,w){return ls=w,Ye=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,X.H=s===null||s.memoizedState===null?Ax:Sx,yo=!1,w=f(h,y),yo=!1,xl&&(w=zy(l,f,h,y)),Hy(s),w}function Hy(s){X.H=Id;var l=Dt!==null&&Dt.next!==null;if(ls=0,yn=Dt=Ye=null,wd=!1,au=0,_l=null,l)throw Error(r(300));s===null||Hn||(s=s.dependencies,s!==null&&md(s)&&(Hn=!0))}function zy(s,l,f,h){Ye=s;var y=0;do{if(xl&&(_l=null),au=0,xl=!1,25<=y)throw Error(r(301));if(y+=1,yn=Dt=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}X.H=x3,w=l(f,h)}while(xl);return w}function h3(){var s=X.H,l=s.useState()[0];return l=typeof l.then=="function"?su(l):l,s=s.useState()[0],(Dt!==null?Dt.memoizedState:null)!==s&&(Ye.flags|=1024),l}function B1(){var s=Ed!==0;return Ed=0,s}function V1(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function U1(s){if(wd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}wd=!1}ls=0,yn=Dt=Ye=null,xl=!1,au=Ed=0,_l=null}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Ye.memoizedState=yn=s:yn=yn.next=s,yn}function xn(){if(Dt===null){var s=Ye.alternate;s=s!==null?s.memoizedState:null}else s=Dt.next;var l=yn===null?Ye.memoizedState:yn.next;if(l!==null)yn=l,Dt=s;else{if(s===null)throw Ye.alternate===null?Error(r(467)):Error(r(310));Dt=s,s={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},yn===null?Ye.memoizedState=yn=s:yn=yn.next=s}return yn}function F1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(s){var l=au;return au+=1,_l===null&&(_l=[]),s=Ly(_l,s,l),l=Ye,(yn===null?l.memoizedState:yn.next)===null&&(l=l.alternate,X.H=l===null||l.memoizedState===null?Ax:Sx),s}function bd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return su(s);if(s.$$typeof===O)return or(s)}throw Error(r(438,String(s)))}function H1(s){var l=null,f=Ye.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var h=Ye.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=F1(),Ye.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),h=0;h<s;h++)f[h]=V;return l.index++,f}function ba(s,l){return typeof l=="function"?l(s):l}function Ad(s){var l=xn();return z1(l,Dt,s)}function z1(s,l,f){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=f;var y=s.baseQueue,w=h.pending;if(w!==null){if(y!==null){var C=y.next;y.next=w.next,w.next=C}l.baseQueue=y=w,h.pending=null}if(w=s.baseState,y===null)s.memoizedState=w;else{l=y.next;var D=C=null,G=null,Z=l,se=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(ut&ce)===ce:(ls&ce)===ce){var ee=Z.revertLane;if(ee===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===gl&&(se=!0);else if((ls&ee)===ee){Z=Z.next,ee===gl&&(se=!0);continue}else ce={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},G===null?(D=G=ce,C=w):G=G.next=ce,Ye.lanes|=ee,ms|=ee;ce=Z.action,yo&&f(w,ce),w=Z.hasEagerState?Z.eagerState:f(w,ce)}else ee={lane:ce,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},G===null?(D=G=ee,C=w):G=G.next=ee,Ye.lanes|=ce,ms|=ce;Z=Z.next}while(Z!==null&&Z!==l);if(G===null?C=w:G.next=D,!Hr(w,s.memoizedState)&&(Hn=!0,se&&(f=vl,f!==null)))throw f;s.memoizedState=w,s.baseState=C,s.baseQueue=G,h.lastRenderedState=w}return y===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function G1(s){var l=xn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var h=f.dispatch,y=f.pending,w=l.memoizedState;if(y!==null){f.pending=null;var C=y=y.next;do w=s(w,C.action),C=C.next;while(C!==y);Hr(w,l.memoizedState)||(Hn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,h]}function Gy(s,l,f){var h=Ye,y=xn(),w=xt;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var C=!Hr((Dt||y).memoizedState,f);C&&(y.memoizedState=f,Hn=!0),y=y.queue;var D=Wy.bind(null,h,y,s);if(ou(2048,8,D,[s]),y.getSnapshot!==l||C||yn!==null&&yn.memoizedState.tag&1){if(h.flags|=2048,wl(9,Sd(),$y.bind(null,h,y,f,l),null),Ut===null)throw Error(r(349));w||(ls&124)!==0||qy(h,l,f)}return f}function qy(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=Ye.updateQueue,l===null?(l=F1(),Ye.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function $y(s,l,f,h){l.value=f,l.getSnapshot=h,Xy(l)&&Yy(s)}function Wy(s,l,f){return f(function(){Xy(l)&&Yy(s)})}function Xy(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Hr(s,f)}catch{return!0}}function Yy(s){var l=dl(s,2);l!==null&&Xr(l,s,2)}function q1(s){var l=Ir();if(typeof s=="function"){var f=s;if(s=f(),yo){Rt(!0);try{f()}finally{Rt(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:s},l}function Ky(s,l,f,h){return s.baseState=f,z1(s,Dt,typeof h=="function"?h:ba)}function p3(s,l,f,h,y){if(Cd(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};X.T!==null?f(!0):w.isTransition=!1,h(w),f=l.pending,f===null?(w.next=l.pending=w,Qy(l,w)):(w.next=f.next,l.pending=f.next=w)}}function Qy(s,l){var f=l.action,h=l.payload,y=s.state;if(l.isTransition){var w=X.T,C={};X.T=C;try{var D=f(y,h),G=X.S;G!==null&&G(C,D),Zy(s,l,D)}catch(Z){$1(s,l,Z)}finally{X.T=w}}else try{w=f(y,h),Zy(s,l,w)}catch(Z){$1(s,l,Z)}}function Zy(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(h){Jy(s,l,h)},function(h){return $1(s,l,h)}):Jy(s,l,f)}function Jy(s,l,f){l.status="fulfilled",l.value=f,ex(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,Qy(s,f)))}function $1(s,l,f){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=f,ex(l),l=l.next;while(l!==h)}s.action=null}function ex(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function tx(s,l){return l}function nx(s,l){if(xt){var f=Ut.formState;if(f!==null){e:{var h=Ye;if(xt){if(sn){t:{for(var y=sn,w=Hi;y.nodeType!==8;){if(!w){y=null;break t}if(y=xi(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){sn=xi(y.nextSibling),h=y.data==="F!";break e}}po(h)}h=!1}h&&(l=f[0])}}return f=Ir(),f.memoizedState=f.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tx,lastRenderedState:l},f.queue=h,f=wx.bind(null,Ye,h),h.dispatch=f,h=q1(!1),w=Q1.bind(null,Ye,!1,h.queue),h=Ir(),y={state:l,dispatch:null,action:s,pending:null},h.queue=y,f=p3.bind(null,Ye,y,w,f),y.dispatch=f,h.memoizedState=s,[l,f,!1]}function rx(s){var l=xn();return ix(l,Dt,s)}function ix(s,l,f){if(l=z1(s,l,tx)[0],s=Ad(ba)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=su(l)}catch(C){throw C===eu?yd:C}else h=l;l=xn();var y=l.queue,w=y.dispatch;return f!==l.memoizedState&&(Ye.flags|=2048,wl(9,Sd(),m3.bind(null,y,f),null)),[h,w,s]}function m3(s,l){s.action=l}function ax(s){var l=xn(),f=Dt;if(f!==null)return ix(l,f,s);xn(),l=l.memoizedState,f=xn();var h=f.queue.dispatch;return f.memoizedState=s,[l,h,!1]}function wl(s,l,f,h){return s={tag:s,create:f,deps:h,inst:l,next:null},l=Ye.updateQueue,l===null&&(l=F1(),Ye.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(h=f.next,f.next=s,s.next=h,l.lastEffect=s),s}function Sd(){return{destroy:void 0,resource:void 0}}function sx(){return xn().memoizedState}function Td(s,l,f,h){var y=Ir();h=h===void 0?null:h,Ye.flags|=s,y.memoizedState=wl(1|l,Sd(),f,h)}function ou(s,l,f,h){var y=xn();h=h===void 0?null:h;var w=y.memoizedState.inst;Dt!==null&&h!==null&&L1(h,Dt.memoizedState.deps)?y.memoizedState=wl(l,w,f,h):(Ye.flags|=s,y.memoizedState=wl(1|l,w,f,h))}function ox(s,l){Td(8390656,8,s,l)}function lx(s,l){ou(2048,8,s,l)}function cx(s,l){return ou(4,2,s,l)}function ux(s,l){return ou(4,4,s,l)}function fx(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function dx(s,l,f){f=f!=null?f.concat([s]):null,ou(4,4,fx.bind(null,l,s),f)}function W1(){}function hx(s,l){var f=xn();l=l===void 0?null:l;var h=f.memoizedState;return l!==null&&L1(l,h[1])?h[0]:(f.memoizedState=[s,l],s)}function px(s,l){var f=xn();l=l===void 0?null:l;var h=f.memoizedState;if(l!==null&&L1(l,h[1]))return h[0];if(h=s(),yo){Rt(!0);try{s()}finally{Rt(!1)}}return f.memoizedState=[h,l],h}function X1(s,l,f){return f===void 0||(ls&1073741824)!==0?s.memoizedState=l:(s.memoizedState=f,s=v2(),Ye.lanes|=s,ms|=s,f)}function mx(s,l,f,h){return Hr(f,l)?f:yl.current!==null?(s=X1(s,f,h),Hr(s,l)||(Hn=!0),s):(ls&42)===0?(Hn=!0,s.memoizedState=f):(s=v2(),Ye.lanes|=s,ms|=s,l)}function gx(s,l,f,h,y){var w=le.p;le.p=w!==0&&8>w?w:8;var C=X.T,D={};X.T=D,Q1(s,!1,l,f);try{var G=y(),Z=X.S;if(Z!==null&&Z(D,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var se=f3(G,h);lu(s,l,se,Wr(s))}else lu(s,l,h,Wr(s))}catch(ce){lu(s,l,{then:function(){},status:"rejected",reason:ce},Wr())}finally{le.p=w,X.T=C}}function g3(){}function Y1(s,l,f,h){if(s.tag!==5)throw Error(r(476));var y=vx(s).queue;gx(s,y,l,de,f===null?g3:function(){return yx(s),f(h)})}function vx(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:de},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function yx(s){var l=vx(s).next.queue;lu(s,l,{},Wr())}function K1(){return or(Tu)}function xx(){return xn().memoizedState}function _x(){return xn().memoizedState}function v3(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Wr();s=ss(f);var h=os(l,s,f);h!==null&&(Xr(h,l,f),nu(h,l,f)),l={cache:T1()},s.payload=l;return}l=l.return}}function y3(s,l,f){var h=Wr();f={lane:h,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Cd(s)?Ex(l,f):(f=g1(s,l,f,h),f!==null&&(Xr(f,s,h),bx(f,l,h)))}function wx(s,l,f){var h=Wr();lu(s,l,f,h)}function lu(s,l,f,h){var y={lane:h,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Cd(s))Ex(l,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var C=l.lastRenderedState,D=w(C,f);if(y.hasEagerState=!0,y.eagerState=D,Hr(D,C))return ud(s,l,y,0),Ut===null&&cd(),!1}catch{}finally{}if(f=g1(s,l,y,h),f!==null)return Xr(f,s,h),bx(f,l,h),!0}return!1}function Q1(s,l,f,h){if(h={lane:2,revertLane:Np(),action:h,hasEagerState:!1,eagerState:null,next:null},Cd(s)){if(l)throw Error(r(479))}else l=g1(s,f,h,2),l!==null&&Xr(l,s,2)}function Cd(s){var l=s.alternate;return s===Ye||l!==null&&l===Ye}function Ex(s,l){xl=wd=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function bx(s,l,f){if((f&4194048)!==0){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Rc(s,f)}}var Id={readContext:or,use:bd,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn},Ax={readContext:or,use:bd,useCallback:function(s,l){return Ir().memoizedState=[s,l===void 0?null:l],s},useContext:or,useEffect:ox,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Td(4194308,4,fx.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Td(4194308,4,s,l)},useInsertionEffect:function(s,l){Td(4,2,s,l)},useMemo:function(s,l){var f=Ir();l=l===void 0?null:l;var h=s();if(yo){Rt(!0);try{s()}finally{Rt(!1)}}return f.memoizedState=[h,l],h},useReducer:function(s,l,f){var h=Ir();if(f!==void 0){var y=f(l);if(yo){Rt(!0);try{f(l)}finally{Rt(!1)}}}else y=l;return h.memoizedState=h.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},h.queue=s,s=s.dispatch=y3.bind(null,Ye,s),[h.memoizedState,s]},useRef:function(s){var l=Ir();return s={current:s},l.memoizedState=s},useState:function(s){s=q1(s);var l=s.queue,f=wx.bind(null,Ye,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:W1,useDeferredValue:function(s,l){var f=Ir();return X1(f,s,l)},useTransition:function(){var s=q1(!1);return s=gx.bind(null,Ye,s.queue,!0,!1),Ir().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var h=Ye,y=Ir();if(xt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Ut===null)throw Error(r(349));(ut&124)!==0||qy(h,l,f)}y.memoizedState=f;var w={value:f,getSnapshot:l};return y.queue=w,ox(Wy.bind(null,h,w,s),[s]),h.flags|=2048,wl(9,Sd(),$y.bind(null,h,w,f,l),null),f},useId:function(){var s=Ir(),l=Ut.identifierPrefix;if(xt){var f=_a,h=xa;f=(h&~(1<<32-pt(h)-1)).toString(32)+f,l="«"+l+"R"+f,f=Ed++,0<f&&(l+="H"+f.toString(32)),l+="»"}else f=d3++,l="«"+l+"r"+f.toString(32)+"»";return s.memoizedState=l},useHostTransitionStatus:K1,useFormState:nx,useActionState:nx,useOptimistic:function(s){var l=Ir();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Q1.bind(null,Ye,!0,f),f.dispatch=l,[s,l]},useMemoCache:H1,useCacheRefresh:function(){return Ir().memoizedState=v3.bind(null,Ye)}},Sx={readContext:or,use:bd,useCallback:hx,useContext:or,useEffect:lx,useImperativeHandle:dx,useInsertionEffect:cx,useLayoutEffect:ux,useMemo:px,useReducer:Ad,useRef:sx,useState:function(){return Ad(ba)},useDebugValue:W1,useDeferredValue:function(s,l){var f=xn();return mx(f,Dt.memoizedState,s,l)},useTransition:function(){var s=Ad(ba)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:su(s),l]},useSyncExternalStore:Gy,useId:xx,useHostTransitionStatus:K1,useFormState:rx,useActionState:rx,useOptimistic:function(s,l){var f=xn();return Ky(f,Dt,s,l)},useMemoCache:H1,useCacheRefresh:_x},x3={readContext:or,use:bd,useCallback:hx,useContext:or,useEffect:lx,useImperativeHandle:dx,useInsertionEffect:cx,useLayoutEffect:ux,useMemo:px,useReducer:G1,useRef:sx,useState:function(){return G1(ba)},useDebugValue:W1,useDeferredValue:function(s,l){var f=xn();return Dt===null?X1(f,s,l):mx(f,Dt.memoizedState,s,l)},useTransition:function(){var s=G1(ba)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:su(s),l]},useSyncExternalStore:Gy,useId:xx,useHostTransitionStatus:K1,useFormState:ax,useActionState:ax,useOptimistic:function(s,l){var f=xn();return Dt!==null?Ky(f,Dt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:H1,useCacheRefresh:_x},El=null,cu=0;function Nd(s){var l=cu;return cu+=1,El===null&&(El=[]),Ly(El,s,l)}function uu(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Rd(s,l){throw l.$$typeof===g?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Tx(s){var l=s._init;return l(s._payload)}function Cx(s){function l(Y,W){if(s){var Q=Y.deletions;Q===null?(Y.deletions=[W],Y.flags|=16):Q.push(W)}}function f(Y,W){if(!s)return null;for(;W!==null;)l(Y,W),W=W.sibling;return null}function h(Y){for(var W=new Map;Y!==null;)Y.key!==null?W.set(Y.key,Y):W.set(Y.index,Y),Y=Y.sibling;return W}function y(Y,W){return Y=ya(Y,W),Y.index=0,Y.sibling=null,Y}function w(Y,W,Q){return Y.index=Q,s?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<W?(Y.flags|=67108866,W):Q):(Y.flags|=67108866,W)):(Y.flags|=1048576,W)}function C(Y){return s&&Y.alternate===null&&(Y.flags|=67108866),Y}function D(Y,W,Q,oe){return W===null||W.tag!==6?(W=y1(Q,Y.mode,oe),W.return=Y,W):(W=y(W,Q),W.return=Y,W)}function G(Y,W,Q,oe){var Se=Q.type;return Se===E?se(Y,W,Q.props.children,oe,Q.key):W!==null&&(W.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&Tx(Se)===W.type)?(W=y(W,Q.props),uu(W,Q),W.return=Y,W):(W=dd(Q.type,Q.key,Q.props,null,Y.mode,oe),uu(W,Q),W.return=Y,W)}function Z(Y,W,Q,oe){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=x1(Q,Y.mode,oe),W.return=Y,W):(W=y(W,Q.children||[]),W.return=Y,W)}function se(Y,W,Q,oe,Se){return W===null||W.tag!==7?(W=co(Q,Y.mode,oe,Se),W.return=Y,W):(W=y(W,Q),W.return=Y,W)}function ce(Y,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=y1(""+W,Y.mode,Q),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return Q=dd(W.type,W.key,W.props,null,Y.mode,Q),uu(Q,W),Q.return=Y,Q;case _:return W=x1(W,Y.mode,Q),W.return=Y,W;case R:var oe=W._init;return W=oe(W._payload),ce(Y,W,Q)}if(Ee(W)||z(W))return W=co(W,Y.mode,Q,null),W.return=Y,W;if(typeof W.then=="function")return ce(Y,Nd(W),Q);if(W.$$typeof===O)return ce(Y,gd(Y,W),Q);Rd(Y,W)}return null}function ee(Y,W,Q,oe){var Se=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Se!==null?null:D(Y,W,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return Q.key===Se?G(Y,W,Q,oe):null;case _:return Q.key===Se?Z(Y,W,Q,oe):null;case R:return Se=Q._init,Q=Se(Q._payload),ee(Y,W,Q,oe)}if(Ee(Q)||z(Q))return Se!==null?null:se(Y,W,Q,oe,null);if(typeof Q.then=="function")return ee(Y,W,Nd(Q),oe);if(Q.$$typeof===O)return ee(Y,W,gd(Y,Q),oe);Rd(Y,Q)}return null}function te(Y,W,Q,oe,Se){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Y=Y.get(Q)||null,D(W,Y,""+oe,Se);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return Y=Y.get(oe.key===null?Q:oe.key)||null,G(W,Y,oe,Se);case _:return Y=Y.get(oe.key===null?Q:oe.key)||null,Z(W,Y,oe,Se);case R:var Je=oe._init;return oe=Je(oe._payload),te(Y,W,Q,oe,Se)}if(Ee(oe)||z(oe))return Y=Y.get(Q)||null,se(W,Y,oe,Se,null);if(typeof oe.then=="function")return te(Y,W,Q,Nd(oe),Se);if(oe.$$typeof===O)return te(Y,W,Q,gd(W,oe),Se);Rd(W,oe)}return null}function Ue(Y,W,Q,oe){for(var Se=null,Je=null,Oe=W,Be=W=0,Gn=null;Oe!==null&&Be<Q.length;Be++){Oe.index>Be?(Gn=Oe,Oe=null):Gn=Oe.sibling;var vt=ee(Y,Oe,Q[Be],oe);if(vt===null){Oe===null&&(Oe=Gn);break}s&&Oe&&vt.alternate===null&&l(Y,Oe),W=w(vt,W,Be),Je===null?Se=vt:Je.sibling=vt,Je=vt,Oe=Gn}if(Be===Q.length)return f(Y,Oe),xt&&fo(Y,Be),Se;if(Oe===null){for(;Be<Q.length;Be++)Oe=ce(Y,Q[Be],oe),Oe!==null&&(W=w(Oe,W,Be),Je===null?Se=Oe:Je.sibling=Oe,Je=Oe);return xt&&fo(Y,Be),Se}for(Oe=h(Oe);Be<Q.length;Be++)Gn=te(Oe,Y,Be,Q[Be],oe),Gn!==null&&(s&&Gn.alternate!==null&&Oe.delete(Gn.key===null?Be:Gn.key),W=w(Gn,W,Be),Je===null?Se=Gn:Je.sibling=Gn,Je=Gn);return s&&Oe.forEach(function(As){return l(Y,As)}),xt&&fo(Y,Be),Se}function ke(Y,W,Q,oe){if(Q==null)throw Error(r(151));for(var Se=null,Je=null,Oe=W,Be=W=0,Gn=null,vt=Q.next();Oe!==null&&!vt.done;Be++,vt=Q.next()){Oe.index>Be?(Gn=Oe,Oe=null):Gn=Oe.sibling;var As=ee(Y,Oe,vt.value,oe);if(As===null){Oe===null&&(Oe=Gn);break}s&&Oe&&As.alternate===null&&l(Y,Oe),W=w(As,W,Be),Je===null?Se=As:Je.sibling=As,Je=As,Oe=Gn}if(vt.done)return f(Y,Oe),xt&&fo(Y,Be),Se;if(Oe===null){for(;!vt.done;Be++,vt=Q.next())vt=ce(Y,vt.value,oe),vt!==null&&(W=w(vt,W,Be),Je===null?Se=vt:Je.sibling=vt,Je=vt);return xt&&fo(Y,Be),Se}for(Oe=h(Oe);!vt.done;Be++,vt=Q.next())vt=te(Oe,Y,Be,vt.value,oe),vt!==null&&(s&&vt.alternate!==null&&Oe.delete(vt.key===null?Be:vt.key),W=w(vt,W,Be),Je===null?Se=vt:Je.sibling=vt,Je=vt);return s&&Oe.forEach(function(_4){return l(Y,_4)}),xt&&fo(Y,Be),Se}function Mt(Y,W,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===E&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:e:{for(var Se=Q.key;W!==null;){if(W.key===Se){if(Se=Q.type,Se===E){if(W.tag===7){f(Y,W.sibling),oe=y(W,Q.props.children),oe.return=Y,Y=oe;break e}}else if(W.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&Tx(Se)===W.type){f(Y,W.sibling),oe=y(W,Q.props),uu(oe,Q),oe.return=Y,Y=oe;break e}f(Y,W);break}else l(Y,W);W=W.sibling}Q.type===E?(oe=co(Q.props.children,Y.mode,oe,Q.key),oe.return=Y,Y=oe):(oe=dd(Q.type,Q.key,Q.props,null,Y.mode,oe),uu(oe,Q),oe.return=Y,Y=oe)}return C(Y);case _:e:{for(Se=Q.key;W!==null;){if(W.key===Se)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){f(Y,W.sibling),oe=y(W,Q.children||[]),oe.return=Y,Y=oe;break e}else{f(Y,W);break}else l(Y,W);W=W.sibling}oe=x1(Q,Y.mode,oe),oe.return=Y,Y=oe}return C(Y);case R:return Se=Q._init,Q=Se(Q._payload),Mt(Y,W,Q,oe)}if(Ee(Q))return Ue(Y,W,Q,oe);if(z(Q)){if(Se=z(Q),typeof Se!="function")throw Error(r(150));return Q=Se.call(Q),ke(Y,W,Q,oe)}if(typeof Q.then=="function")return Mt(Y,W,Nd(Q),oe);if(Q.$$typeof===O)return Mt(Y,W,gd(Y,Q),oe);Rd(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,W!==null&&W.tag===6?(f(Y,W.sibling),oe=y(W,Q),oe.return=Y,Y=oe):(f(Y,W),oe=y1(Q,Y.mode,oe),oe.return=Y,Y=oe),C(Y)):f(Y,W)}return function(Y,W,Q,oe){try{cu=0;var Se=Mt(Y,W,Q,oe);return El=null,Se}catch(Oe){if(Oe===eu||Oe===yd)throw Oe;var Je=zr(29,Oe,null,Y.mode);return Je.lanes=oe,Je.return=Y,Je}finally{}}}var bl=Cx(!0),Ix=Cx(!1),ii=ae(null),zi=null;function cs(s){var l=s.alternate;fe(In,In.current&1),fe(ii,s),zi===null&&(l===null||yl.current!==null||l.memoizedState!==null)&&(zi=s)}function Nx(s){if(s.tag===22){if(fe(In,In.current),fe(ii,s),zi===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(zi=s)}}else us()}function us(){fe(In,In.current),fe(ii,ii.current)}function Aa(s){he(ii),zi===s&&(zi=null),he(In)}var In=ae(0);function Od(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Fp(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Z1(s,l,f,h){l=s.memoizedState,f=f(h,l),f=f==null?l:p({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var J1={enqueueSetState:function(s,l,f){s=s._reactInternals;var h=Wr(),y=ss(h);y.payload=l,f!=null&&(y.callback=f),l=os(s,y,h),l!==null&&(Xr(l,s,h),nu(l,s,h))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var h=Wr(),y=ss(h);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=os(s,y,h),l!==null&&(Xr(l,s,h),nu(l,s,h))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Wr(),h=ss(f);h.tag=2,l!=null&&(h.callback=l),l=os(s,h,f),l!==null&&(Xr(l,s,f),nu(l,s,f))}};function Rx(s,l,f,h,y,w,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,w,C):l.prototype&&l.prototype.isPureReactComponent?!$c(f,h)||!$c(y,w):!0}function Ox(s,l,f,h){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,h),l.state!==s&&J1.enqueueReplaceState(l,l.state,null)}function xo(s,l){var f=l;if("ref"in l){f={};for(var h in l)h!=="ref"&&(f[h]=l[h])}if(s=s.defaultProps){f===l&&(f=p({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}var Dd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Dx(s){Dd(s)}function Px(s){console.error(s)}function Mx(s){Dd(s)}function Pd(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function kx(s,l,f){try{var h=s.onCaughtError;h(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ep(s,l,f){return f=ss(f),f.tag=3,f.payload={element:null},f.callback=function(){Pd(s,l)},f}function Lx(s){return s=ss(s),s.tag=3,s}function jx(s,l,f,h){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;s.payload=function(){return y(w)},s.callback=function(){kx(l,f,h)}}var C=f.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){kx(l,f,h),typeof y!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var D=h.stack;this.componentDidCatch(h.value,{componentStack:D!==null?D:""})})}function _3(s,l,f,h,y){if(f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=f.alternate,l!==null&&Qc(l,f,y,!0),f=ii.current,f!==null){switch(f.tag){case 13:return zi===null?Ap():f.alternate===null&&on===0&&(on=3),f.flags&=-257,f.flags|=65536,f.lanes=y,h===N1?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([h]):l.add(h),Tp(s,h,y)),!1;case 22:return f.flags|=65536,h===N1?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([h]):f.add(h)),Tp(s,h,y)),!1}throw Error(r(435,f.tag))}return Tp(s,h,y),Ap(),!1}if(xt)return l=ii.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,h!==E1&&(s=Error(r(422),{cause:h}),Kc(ei(s,f)))):(h!==E1&&(l=Error(r(423),{cause:h}),Kc(ei(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,h=ei(h,f),y=ep(s.stateNode,h,y),D1(s,y),on!==4&&(on=2)),!1;var w=Error(r(520),{cause:h});if(w=ei(w,f),vu===null?vu=[w]:vu.push(w),on!==4&&(on=2),l===null)return!0;h=ei(h,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=ep(f.stateNode,h,s),D1(f,s),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(gs===null||!gs.has(w))))return f.flags|=65536,y&=-y,f.lanes|=y,y=Lx(y),jx(y,s,f,h),D1(f,y),!1}f=f.return}while(f!==null);return!1}var Bx=Error(r(461)),Hn=!1;function Zn(s,l,f,h){l.child=s===null?Ix(l,null,f,h):bl(l,s.child,f,h)}function Vx(s,l,f,h,y){f=f.render;var w=l.ref;if("ref"in h){var C={};for(var D in h)D!=="ref"&&(C[D]=h[D])}else C=h;return go(l),h=j1(s,l,f,C,w,y),D=B1(),s!==null&&!Hn?(V1(s,l,y),Sa(s,l,y)):(xt&&D&&_1(l),l.flags|=1,Zn(s,l,h,y),l.child)}function Ux(s,l,f,h,y){if(s===null){var w=f.type;return typeof w=="function"&&!v1(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,Fx(s,l,w,h,y)):(s=dd(f.type,null,h,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!lp(s,y)){var C=w.memoizedProps;if(f=f.compare,f=f!==null?f:$c,f(C,h)&&s.ref===l.ref)return Sa(s,l,y)}return l.flags|=1,s=ya(w,h),s.ref=l.ref,s.return=l,l.child=s}function Fx(s,l,f,h,y){if(s!==null){var w=s.memoizedProps;if($c(w,h)&&s.ref===l.ref)if(Hn=!1,l.pendingProps=h=w,lp(s,y))(s.flags&131072)!==0&&(Hn=!0);else return l.lanes=s.lanes,Sa(s,l,y)}return tp(s,l,f,h,y)}function Hx(s,l,f){var h=l.pendingProps,y=h.children,w=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((l.flags&128)!==0){if(h=w!==null?w.baseLanes|f:f,s!==null){for(y=l.child=s.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;l.childLanes=w&~h}else l.childLanes=0,l.child=null;return zx(s,l,h,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&vd(l,w!==null?w.cachePool:null),w!==null?Fy(l,w):M1(),Nx(l);else return l.lanes=l.childLanes=536870912,zx(s,l,w!==null?w.baseLanes|f:f,f)}else w!==null?(vd(l,w.cachePool),Fy(l,w),us(),l.memoizedState=null):(s!==null&&vd(l,null),M1(),us());return Zn(s,l,y,f),l.child}function zx(s,l,f,h){var y=I1();return y=y===null?null:{parent:Cn._currentValue,pool:y},l.memoizedState={baseLanes:f,cachePool:y},s!==null&&vd(l,null),M1(),Nx(l),s!==null&&Qc(s,l,h,!0),null}function Md(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function tp(s,l,f,h,y){return go(l),f=j1(s,l,f,h,void 0,y),h=B1(),s!==null&&!Hn?(V1(s,l,y),Sa(s,l,y)):(xt&&h&&_1(l),l.flags|=1,Zn(s,l,f,y),l.child)}function Gx(s,l,f,h,y,w){return go(l),l.updateQueue=null,f=zy(l,h,f,y),Hy(s),h=B1(),s!==null&&!Hn?(V1(s,l,w),Sa(s,l,w)):(xt&&h&&_1(l),l.flags|=1,Zn(s,l,f,w),l.child)}function qx(s,l,f,h,y){if(go(l),l.stateNode===null){var w=hl,C=f.contextType;typeof C=="object"&&C!==null&&(w=or(C)),w=new f(h,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=J1,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=h,w.state=l.memoizedState,w.refs={},R1(l),C=f.contextType,w.context=typeof C=="object"&&C!==null?or(C):hl,w.state=l.memoizedState,C=f.getDerivedStateFromProps,typeof C=="function"&&(Z1(l,f,C,h),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&J1.enqueueReplaceState(w,w.state,null),iu(l,h,w,y),ru(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(s===null){w=l.stateNode;var D=l.memoizedProps,G=xo(f,D);w.props=G;var Z=w.context,se=f.contextType;C=hl,typeof se=="object"&&se!==null&&(C=or(se));var ce=f.getDerivedStateFromProps;se=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=l.pendingProps!==D,se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||Z!==C)&&Ox(l,w,h,C),as=!1;var ee=l.memoizedState;w.state=ee,iu(l,h,w,y),ru(),Z=l.memoizedState,D||ee!==Z||as?(typeof ce=="function"&&(Z1(l,f,ce,h),Z=l.memoizedState),(G=as||Rx(l,f,G,h,ee,Z,C))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=Z),w.props=h,w.state=Z,w.context=C,h=G):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{w=l.stateNode,O1(s,l),C=l.memoizedProps,se=xo(f,C),w.props=se,ce=l.pendingProps,ee=w.context,Z=f.contextType,G=hl,typeof Z=="object"&&Z!==null&&(G=or(Z)),D=f.getDerivedStateFromProps,(Z=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ce||ee!==G)&&Ox(l,w,h,G),as=!1,ee=l.memoizedState,w.state=ee,iu(l,h,w,y),ru();var te=l.memoizedState;C!==ce||ee!==te||as||s!==null&&s.dependencies!==null&&md(s.dependencies)?(typeof D=="function"&&(Z1(l,f,D,h),te=l.memoizedState),(se=as||Rx(l,f,se,h,ee,te,G)||s!==null&&s.dependencies!==null&&md(s.dependencies))?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,te,G),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,te,G)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=te),w.props=h,w.state=te,w.context=G,h=se):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=1024),h=!1)}return w=h,Md(s,l),h=(l.flags&128)!==0,w||h?(w=l.stateNode,f=h&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&h?(l.child=bl(l,s.child,null,y),l.child=bl(l,null,f,y)):Zn(s,l,f,y),l.memoizedState=w.state,s=l.child):s=Sa(s,l,y),s}function $x(s,l,f,h){return Yc(),l.flags|=256,Zn(s,l,f,h),l.child}var np={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rp(s){return{baseLanes:s,cachePool:Py()}}function ip(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=ai),s}function Wx(s,l,f){var h=l.pendingProps,y=!1,w=(l.flags&128)!==0,C;if((C=w)||(C=s!==null&&s.memoizedState===null?!1:(In.current&2)!==0),C&&(y=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,s===null){if(xt){if(y?cs(l):us(),xt){var D=sn,G;if(G=D){e:{for(G=D,D=Hi;G.nodeType!==8;){if(!D){D=null;break e}if(G=xi(G.nextSibling),G===null){D=null;break e}}D=G}D!==null?(l.memoizedState={dehydrated:D,treeContext:uo!==null?{id:xa,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},G=zr(18,null,null,0),G.stateNode=D,G.return=l,l.child=G,wr=l,sn=null,G=!0):G=!1}G||po(l)}if(D=l.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return Fp(D)?l.lanes=32:l.lanes=536870912,null;Aa(l)}return D=h.children,h=h.fallback,y?(us(),y=l.mode,D=kd({mode:"hidden",children:D},y),h=co(h,y,f,null),D.return=l,h.return=l,D.sibling=h,l.child=D,y=l.child,y.memoizedState=rp(f),y.childLanes=ip(s,C,f),l.memoizedState=np,h):(cs(l),ap(l,D))}if(G=s.memoizedState,G!==null&&(D=G.dehydrated,D!==null)){if(w)l.flags&256?(cs(l),l.flags&=-257,l=sp(s,l,f)):l.memoizedState!==null?(us(),l.child=s.child,l.flags|=128,l=null):(us(),y=h.fallback,D=l.mode,h=kd({mode:"visible",children:h.children},D),y=co(y,D,f,null),y.flags|=2,h.return=l,y.return=l,h.sibling=y,l.child=h,bl(l,s.child,null,f),h=l.child,h.memoizedState=rp(f),h.childLanes=ip(s,C,f),l.memoizedState=np,l=y);else if(cs(l),Fp(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var Z=C.dgst;C=Z,h=Error(r(419)),h.stack="",h.digest=C,Kc({value:h,source:null,stack:null}),l=sp(s,l,f)}else if(Hn||Qc(s,l,f,!1),C=(f&s.childLanes)!==0,Hn||C){if(C=Ut,C!==null&&(h=f&-f,h=(h&42)!==0?1:Qa(h),h=(h&(C.suspendedLanes|f))!==0?0:h,h!==0&&h!==G.retryLane))throw G.retryLane=h,dl(s,h),Xr(C,s,h),Bx;D.data==="$?"||Ap(),l=sp(s,l,f)}else D.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=G.treeContext,sn=xi(D.nextSibling),wr=l,xt=!0,ho=null,Hi=!1,s!==null&&(ni[ri++]=xa,ni[ri++]=_a,ni[ri++]=uo,xa=s.id,_a=s.overflow,uo=l),l=ap(l,h.children),l.flags|=4096);return l}return y?(us(),y=h.fallback,D=l.mode,G=s.child,Z=G.sibling,h=ya(G,{mode:"hidden",children:h.children}),h.subtreeFlags=G.subtreeFlags&65011712,Z!==null?y=ya(Z,y):(y=co(y,D,f,null),y.flags|=2),y.return=l,h.return=l,h.sibling=y,l.child=h,h=y,y=l.child,D=s.child.memoizedState,D===null?D=rp(f):(G=D.cachePool,G!==null?(Z=Cn._currentValue,G=G.parent!==Z?{parent:Z,pool:Z}:G):G=Py(),D={baseLanes:D.baseLanes|f,cachePool:G}),y.memoizedState=D,y.childLanes=ip(s,C,f),l.memoizedState=np,h):(cs(l),f=s.child,s=f.sibling,f=ya(f,{mode:"visible",children:h.children}),f.return=l,f.sibling=null,s!==null&&(C=l.deletions,C===null?(l.deletions=[s],l.flags|=16):C.push(s)),l.child=f,l.memoizedState=null,f)}function ap(s,l){return l=kd({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function kd(s,l){return s=zr(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function sp(s,l,f){return bl(l,s.child,null,f),s=ap(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Xx(s,l,f){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l),A1(s.return,l,f)}function op(s,l,f,h,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:f,tailMode:y}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=f,w.tailMode=y)}function Yx(s,l,f){var h=l.pendingProps,y=h.revealOrder,w=h.tail;if(Zn(s,l,h.children,f),h=In.current,(h&2)!==0)h=h&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Xx(s,f,l);else if(s.tag===19)Xx(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(fe(In,h),y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&Od(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),op(l,!1,y,f,w);break;case"backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Od(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}op(l,!0,f,null,w);break;case"together":op(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Sa(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),ms|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Qc(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=ya(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=ya(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function lp(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&md(s)))}function w3(s,l,f){switch(l.tag){case 3:ht(l,l.stateNode.containerInfo),is(l,Cn,s.memoizedState.cache),Yc();break;case 27:case 5:gr(l);break;case 4:ht(l,l.stateNode.containerInfo);break;case 10:is(l,l.type,l.memoizedProps.value);break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(cs(l),l.flags|=128,null):(f&l.child.childLanes)!==0?Wx(s,l,f):(cs(l),s=Sa(s,l,f),s!==null?s.sibling:null);cs(l);break;case 19:var y=(s.flags&128)!==0;if(h=(f&l.childLanes)!==0,h||(Qc(s,l,f,!1),h=(f&l.childLanes)!==0),y){if(h)return Yx(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(In,In.current),h)break;return null;case 22:case 23:return l.lanes=0,Hx(s,l,f);case 24:is(l,Cn,s.memoizedState.cache)}return Sa(s,l,f)}function Kx(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Hn=!0;else{if(!lp(s,f)&&(l.flags&128)===0)return Hn=!1,w3(s,l,f);Hn=(s.flags&131072)!==0}else Hn=!1,xt&&(l.flags&1048576)!==0&&Ty(l,pd,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var h=l.elementType,y=h._init;if(h=y(h._payload),l.type=h,typeof h=="function")v1(h)?(s=xo(h,s),l.tag=1,l=qx(null,l,h,s,f)):(l.tag=0,l=tp(null,l,h,s,f));else{if(h!=null){if(y=h.$$typeof,y===j){l.tag=11,l=Vx(null,l,h,s,f);break e}else if(y===P){l.tag=14,l=Ux(null,l,h,s,f);break e}}throw l=_e(h)||h,Error(r(306,l,""))}}return l;case 0:return tp(s,l,l.type,l.pendingProps,f);case 1:return h=l.type,y=xo(h,l.pendingProps),qx(s,l,h,y,f);case 3:e:{if(ht(l,l.stateNode.containerInfo),s===null)throw Error(r(387));h=l.pendingProps;var w=l.memoizedState;y=w.element,O1(s,l),iu(l,h,null,f);var C=l.memoizedState;if(h=C.cache,is(l,Cn,h),h!==w.cache&&S1(l,[Cn],f,!0),ru(),h=C.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=$x(s,l,h,f);break e}else if(h!==y){y=ei(Error(r(424)),l),Kc(y),l=$x(s,l,h,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(sn=xi(s.firstChild),wr=l,xt=!0,ho=null,Hi=!0,f=Ix(l,null,h,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Yc(),h===y){l=Sa(s,l,f);break e}Zn(s,l,h,f)}l=l.child}return l;case 26:return Md(s,l),s===null?(f=e_(l.type,null,l.pendingProps,null))?l.memoizedState=f:xt||(f=l.type,s=l.pendingProps,h=Yd(Ne.current).createElement(f),h[An]=l,h[gn]=s,er(h,f,s),un(h),l.stateNode=h):l.memoizedState=e_(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return gr(l),s===null&&xt&&(h=l.stateNode=Q2(l.type,l.pendingProps,Ne.current),wr=l,Hi=!0,y=sn,xs(l.type)?(Hp=y,sn=xi(h.firstChild)):sn=y),Zn(s,l,l.pendingProps.children,f),Md(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&xt&&((y=h=sn)&&(h=Y3(h,l.type,l.pendingProps,Hi),h!==null?(l.stateNode=h,wr=l,sn=xi(h.firstChild),Hi=!1,y=!0):y=!1),y||po(l)),gr(l),y=l.type,w=l.pendingProps,C=s!==null?s.memoizedProps:null,h=w.children,Bp(y,w)?h=null:C!==null&&Bp(y,C)&&(l.flags|=32),l.memoizedState!==null&&(y=j1(s,l,h3,null,null,f),Tu._currentValue=y),Md(s,l),Zn(s,l,h,f),l.child;case 6:return s===null&&xt&&((s=f=sn)&&(f=K3(f,l.pendingProps,Hi),f!==null?(l.stateNode=f,wr=l,sn=null,s=!0):s=!1),s||po(l)),null;case 13:return Wx(s,l,f);case 4:return ht(l,l.stateNode.containerInfo),h=l.pendingProps,s===null?l.child=bl(l,null,h,f):Zn(s,l,h,f),l.child;case 11:return Vx(s,l,l.type,l.pendingProps,f);case 7:return Zn(s,l,l.pendingProps,f),l.child;case 8:return Zn(s,l,l.pendingProps.children,f),l.child;case 12:return Zn(s,l,l.pendingProps.children,f),l.child;case 10:return h=l.pendingProps,is(l,l.type,h.value),Zn(s,l,h.children,f),l.child;case 9:return y=l.type._context,h=l.pendingProps.children,go(l),y=or(y),h=h(y),l.flags|=1,Zn(s,l,h,f),l.child;case 14:return Ux(s,l,l.type,l.pendingProps,f);case 15:return Fx(s,l,l.type,l.pendingProps,f);case 19:return Yx(s,l,f);case 31:return h=l.pendingProps,f=l.mode,h={mode:h.mode,children:h.children},s===null?(f=kd(h,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=ya(s.child,h),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return Hx(s,l,f);case 24:return go(l),h=or(Cn),s===null?(y=I1(),y===null&&(y=Ut,w=T1(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=f),y=w),l.memoizedState={parent:h,cache:y},R1(l),is(l,Cn,y)):((s.lanes&f)!==0&&(O1(s,l),iu(l,null,null,f),ru()),y=s.memoizedState,w=l.memoizedState,y.parent!==h?(y={parent:h,cache:h},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),is(l,Cn,h)):(h=w.cache,is(l,Cn,h),h!==y.cache&&S1(l,[Cn],f,!0))),Zn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ta(s){s.flags|=4}function Qx(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!a_(l)){if(l=ii.current,l!==null&&((ut&4194048)===ut?zi!==null:(ut&62914560)!==ut&&(ut&536870912)===0||l!==zi))throw tu=N1,My;s.flags|=8192}}function Ld(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ic():536870912,s.lanes|=l,Cl|=l)}function fu(s,l){if(!xt)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var h=null;f!==null;)f.alternate!==null&&(h=f),f=f.sibling;h===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function en(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,h=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=h,s.childLanes=f,l}function E3(s,l,f){var h=l.pendingProps;switch(w1(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(l),null;case 1:return en(l),null;case 3:return f=l.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Ea(Cn),Et(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Xc(l)?Ta(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ny())),en(l),null;case 26:return f=l.memoizedState,s===null?(Ta(l),f!==null?(en(l),Qx(l,f)):(en(l),l.flags&=-16777217)):f?f!==s.memoizedState?(Ta(l),en(l),Qx(l,f)):(en(l),l.flags&=-16777217):(s.memoizedProps!==h&&Ta(l),en(l),l.flags&=-16777217),null;case 27:Vn(l),f=Ne.current;var y=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Ta(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return en(l),null}s=Te.current,Xc(l)?Cy(l):(s=Q2(y,h,f),l.stateNode=s,Ta(l))}return en(l),null;case 5:if(Vn(l),f=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Ta(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return en(l),null}if(s=Te.current,Xc(l))Cy(l);else{switch(y=Yd(Ne.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?y.createElement("select",{is:h.is}):y.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?y.createElement(f,{is:h.is}):y.createElement(f)}}s[An]=l,s[gn]=h;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=s;e:switch(er(s,f,h),f){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ta(l)}}return en(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==h&&Ta(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(s=Ne.current,Xc(l)){if(s=l.stateNode,f=l.memoizedProps,h=null,y=wr,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}s[An]=l,s=!!(s.nodeValue===f||h!==null&&h.suppressHydrationWarning===!0||G2(s.nodeValue,f)),s||po(l)}else s=Yd(s).createTextNode(h),s[An]=l,l.stateNode=s}return en(l),null;case 13:if(h=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Xc(l),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[An]=l}else Yc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;en(l),y=!1}else y=Ny(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Aa(l),l):(Aa(l),null)}if(Aa(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=h!==null,s=s!==null&&s.memoizedState!==null,f){h=l.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048)}return f!==s&&f&&(l.child.flags|=8192),Ld(l,l.updateQueue),en(l),null;case 4:return Et(),s===null&&Pp(l.stateNode.containerInfo),en(l),null;case 10:return Ea(l.type),en(l),null;case 19:if(he(In),y=l.memoizedState,y===null)return en(l),null;if(h=(l.flags&128)!==0,w=y.rendering,w===null)if(h)fu(y,!1);else{if(on!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=Od(s),w!==null){for(l.flags|=128,fu(y,!1),s=w.updateQueue,l.updateQueue=s,Ld(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)Sy(f,s),f=f.sibling;return fe(In,In.current&1|2),l.child}s=s.sibling}y.tail!==null&&Ie()>Vd&&(l.flags|=128,h=!0,fu(y,!1),l.lanes=4194304)}else{if(!h)if(s=Od(w),s!==null){if(l.flags|=128,h=!0,s=s.updateQueue,l.updateQueue=s,Ld(l,s),fu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!xt)return en(l),null}else 2*Ie()-y.renderingStartTime>Vd&&f!==536870912&&(l.flags|=128,h=!0,fu(y,!1),l.lanes=4194304);y.isBackwards?(w.sibling=l.child,l.child=w):(s=y.last,s!==null?s.sibling=w:l.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=Ie(),l.sibling=null,s=In.current,fe(In,h?s&1|2:s&1),l):(en(l),null);case 22:case 23:return Aa(l),k1(),h=l.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(f&536870912)!==0&&(l.flags&128)===0&&(en(l),l.subtreeFlags&6&&(l.flags|=8192)):en(l),f=l.updateQueue,f!==null&&Ld(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==f&&(l.flags|=2048),s!==null&&he(vo),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ea(Cn),en(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function b3(s,l){switch(w1(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ea(Cn),Et(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Vn(l),null;case 13:if(Aa(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Yc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return he(In),null;case 4:return Et(),null;case 10:return Ea(l.type),null;case 22:case 23:return Aa(l),k1(),s!==null&&he(vo),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ea(Cn),null;case 25:return null;default:return null}}function Zx(s,l){switch(w1(l),l.tag){case 3:Ea(Cn),Et();break;case 26:case 27:case 5:Vn(l);break;case 4:Et();break;case 13:Aa(l);break;case 19:he(In);break;case 10:Ea(l.type);break;case 22:case 23:Aa(l),k1(),s!==null&&he(vo);break;case 24:Ea(Cn)}}function du(s,l){try{var f=l.updateQueue,h=f!==null?f.lastEffect:null;if(h!==null){var y=h.next;f=y;do{if((f.tag&s)===s){h=void 0;var w=f.create,C=f.inst;h=w(),C.destroy=h}f=f.next}while(f!==y)}}catch(D){jt(l,l.return,D)}}function fs(s,l,f){try{var h=l.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&s)===s){var C=h.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,y=l;var G=f,Z=D;try{Z()}catch(se){jt(y,G,se)}}}h=h.next}while(h!==w)}}catch(se){jt(l,l.return,se)}}function Jx(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{Uy(l,f)}catch(h){jt(s,s.return,h)}}}function e2(s,l,f){f.props=xo(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(h){jt(s,l,h)}}function hu(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof f=="function"?s.refCleanup=f(h):f.current=h}}catch(y){jt(s,l,y)}}function Gi(s,l){var f=s.ref,h=s.refCleanup;if(f!==null)if(typeof h=="function")try{h()}catch(y){jt(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){jt(s,l,y)}else f.current=null}function t2(s){var l=s.type,f=s.memoizedProps,h=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&h.focus();break e;case"img":f.src?h.src=f.src:f.srcSet&&(h.srcset=f.srcSet)}}catch(y){jt(s,s.return,y)}}function cp(s,l,f){try{var h=s.stateNode;G3(h,s.type,f,l),h[gn]=l}catch(y){jt(s,s.return,y)}}function n2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&xs(s.type)||s.tag===4}function up(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||n2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&xs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function fp(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Xd));else if(h!==4&&(h===27&&xs(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(fp(s,l,f),s=s.sibling;s!==null;)fp(s,l,f),s=s.sibling}function jd(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(h!==4&&(h===27&&xs(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(jd(s,l,f),s=s.sibling;s!==null;)jd(s,l,f),s=s.sibling}function r2(s){var l=s.stateNode,f=s.memoizedProps;try{for(var h=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);er(l,h,f),l[An]=s,l[gn]=f}catch(w){jt(s,s.return,w)}}var Ca=!1,dn=!1,dp=!1,i2=typeof WeakSet=="function"?WeakSet:Set,zn=null;function A3(s,l){if(s=s.containerInfo,Lp=th,s=my(s),u1(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var h=f.getSelection&&f.getSelection();if(h&&h.rangeCount!==0){f=h.anchorNode;var y=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var C=0,D=-1,G=-1,Z=0,se=0,ce=s,ee=null;t:for(;;){for(var te;ce!==f||y!==0&&ce.nodeType!==3||(D=C+y),ce!==w||h!==0&&ce.nodeType!==3||(G=C+h),ce.nodeType===3&&(C+=ce.nodeValue.length),(te=ce.firstChild)!==null;)ee=ce,ce=te;for(;;){if(ce===s)break t;if(ee===f&&++Z===y&&(D=C),ee===w&&++se===h&&(G=C),(te=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=te}f=D===-1||G===-1?null:{start:D,end:G}}else f=null}f=f||{start:0,end:0}}else f=null;for(jp={focusedElem:s,selectionRange:f},th=!1,zn=l;zn!==null;)if(l=zn,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,zn=s;else for(;zn!==null;){switch(l=zn,w=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,f=l,y=w.memoizedProps,w=w.memoizedState,h=f.stateNode;try{var Ue=xo(f.type,y,f.elementType===f.type);s=h.getSnapshotBeforeUpdate(Ue,w),h.__reactInternalSnapshotBeforeUpdate=s}catch(ke){jt(f,f.return,ke)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Up(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Up(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,zn=s;break}zn=l.return}}function a2(s,l,f){var h=f.flags;switch(f.tag){case 0:case 11:case 15:ds(s,f),h&4&&du(5,f);break;case 1:if(ds(s,f),h&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(C){jt(f,f.return,C)}else{var y=xo(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(C){jt(f,f.return,C)}}h&64&&Jx(f),h&512&&hu(f,f.return);break;case 3:if(ds(s,f),h&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{Uy(s,l)}catch(C){jt(f,f.return,C)}}break;case 27:l===null&&h&4&&r2(f);case 26:case 5:ds(s,f),l===null&&h&4&&t2(f),h&512&&hu(f,f.return);break;case 12:ds(s,f);break;case 13:ds(s,f),h&4&&l2(s,f),h&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=P3.bind(null,f),Q3(s,f))));break;case 22:if(h=f.memoizedState!==null||Ca,!h){l=l!==null&&l.memoizedState!==null||dn,y=Ca;var w=dn;Ca=h,(dn=l)&&!w?hs(s,f,(f.subtreeFlags&8772)!==0):ds(s,f),Ca=y,dn=w}break;case 30:break;default:ds(s,f)}}function s2(s){var l=s.alternate;l!==null&&(s.alternate=null,s2(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&es(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Kt=null,Nr=!1;function Ia(s,l,f){for(f=f.child;f!==null;)o2(s,l,f),f=f.sibling}function o2(s,l,f){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(it,f)}catch{}switch(f.tag){case 26:dn||Gi(f,l),Ia(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:dn||Gi(f,l);var h=Kt,y=Nr;xs(f.type)&&(Kt=f.stateNode,Nr=!1),Ia(s,l,f),Eu(f.stateNode),Kt=h,Nr=y;break;case 5:dn||Gi(f,l);case 6:if(h=Kt,y=Nr,Kt=null,Ia(s,l,f),Kt=h,Nr=y,Kt!==null)if(Nr)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(f.stateNode)}catch(w){jt(f,l,w)}else try{Kt.removeChild(f.stateNode)}catch(w){jt(f,l,w)}break;case 18:Kt!==null&&(Nr?(s=Kt,Y2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Ru(s)):Y2(Kt,f.stateNode));break;case 4:h=Kt,y=Nr,Kt=f.stateNode.containerInfo,Nr=!0,Ia(s,l,f),Kt=h,Nr=y;break;case 0:case 11:case 14:case 15:dn||fs(2,f,l),dn||fs(4,f,l),Ia(s,l,f);break;case 1:dn||(Gi(f,l),h=f.stateNode,typeof h.componentWillUnmount=="function"&&e2(f,l,h)),Ia(s,l,f);break;case 21:Ia(s,l,f);break;case 22:dn=(h=dn)||f.memoizedState!==null,Ia(s,l,f),dn=h;break;default:Ia(s,l,f)}}function l2(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ru(s)}catch(f){jt(l,l.return,f)}}function S3(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new i2),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new i2),l;default:throw Error(r(435,s.tag))}}function hp(s,l){var f=S3(s);l.forEach(function(h){var y=M3.bind(null,s,h);f.has(h)||(f.add(h),h.then(y,y))})}function Gr(s,l){var f=l.deletions;if(f!==null)for(var h=0;h<f.length;h++){var y=f[h],w=s,C=l,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(xs(D.type)){Kt=D.stateNode,Nr=!1;break e}break;case 5:Kt=D.stateNode,Nr=!1;break e;case 3:case 4:Kt=D.stateNode.containerInfo,Nr=!0;break e}D=D.return}if(Kt===null)throw Error(r(160));o2(w,C,y),Kt=null,Nr=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)c2(l,s),l=l.sibling}var yi=null;function c2(s,l){var f=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Gr(l,s),qr(s),h&4&&(fs(3,s,s.return),du(3,s),fs(5,s,s.return));break;case 1:Gr(l,s),qr(s),h&512&&(dn||f===null||Gi(f,f.return)),h&64&&Ca&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?h:f.concat(h))));break;case 26:var y=yi;if(Gr(l,s),qr(s),h&512&&(dn||f===null||Gi(f,f.return)),h&4){var w=f!==null?f.memoizedState:null;if(h=s.memoizedState,f===null)if(h===null)if(s.stateNode===null){e:{h=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":w=y.getElementsByTagName("title")[0],(!w||w[Ws]||w[An]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(h),y.head.insertBefore(w,y.querySelector("head > title"))),er(w,h,f),w[An]=s,un(w),h=w;break e;case"link":var C=r_("link","href",y).get(h+(f.href||""));if(C){for(var D=0;D<C.length;D++)if(w=C[D],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){C.splice(D,1);break t}}w=y.createElement(h),er(w,h,f),y.head.appendChild(w);break;case"meta":if(C=r_("meta","content",y).get(h+(f.content||""))){for(D=0;D<C.length;D++)if(w=C[D],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){C.splice(D,1);break t}}w=y.createElement(h),er(w,h,f),y.head.appendChild(w);break;default:throw Error(r(468,h))}w[An]=s,un(w),h=w}s.stateNode=h}else i_(y,s.type,s.stateNode);else s.stateNode=n_(y,h,s.memoizedProps);else w!==h?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,h===null?i_(y,s.type,s.stateNode):n_(y,h,s.memoizedProps)):h===null&&s.stateNode!==null&&cp(s,s.memoizedProps,f.memoizedProps)}break;case 27:Gr(l,s),qr(s),h&512&&(dn||f===null||Gi(f,f.return)),f!==null&&h&4&&cp(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Gr(l,s),qr(s),h&512&&(dn||f===null||Gi(f,f.return)),s.flags&32){y=s.stateNode;try{Kr(y,"")}catch(te){jt(s,s.return,te)}}h&4&&s.stateNode!=null&&(y=s.memoizedProps,cp(s,y,f!==null?f.memoizedProps:y)),h&1024&&(dp=!0);break;case 6:if(Gr(l,s),qr(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,f=s.stateNode;try{f.nodeValue=h}catch(te){jt(s,s.return,te)}}break;case 3:if(Zd=null,y=yi,yi=Kd(l.containerInfo),Gr(l,s),yi=y,qr(s),h&4&&f!==null&&f.memoizedState.isDehydrated)try{Ru(l.containerInfo)}catch(te){jt(s,s.return,te)}dp&&(dp=!1,u2(s));break;case 4:h=yi,yi=Kd(s.stateNode.containerInfo),Gr(l,s),qr(s),yi=h;break;case 12:Gr(l,s),qr(s);break;case 13:Gr(l,s),qr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(xp=Ie()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,hp(s,h)));break;case 22:y=s.memoizedState!==null;var G=f!==null&&f.memoizedState!==null,Z=Ca,se=dn;if(Ca=Z||y,dn=se||G,Gr(l,s),dn=se,Ca=Z,qr(s),h&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||G||Ca||dn||_o(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){G=f=l;try{if(w=G.stateNode,y)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=G.stateNode;var ce=G.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;D.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){jt(G,G.return,te)}}}else if(l.tag===6){if(f===null){G=l;try{G.stateNode.nodeValue=y?"":G.memoizedProps}catch(te){jt(G,G.return,te)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=s.updateQueue,h!==null&&(f=h.retryQueue,f!==null&&(h.retryQueue=null,hp(s,f))));break;case 19:Gr(l,s),qr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,hp(s,h)));break;case 30:break;case 21:break;default:Gr(l,s),qr(s)}}function qr(s){var l=s.flags;if(l&2){try{for(var f,h=s.return;h!==null;){if(n2(h)){f=h;break}h=h.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,w=up(s);jd(s,w,y);break;case 5:var C=f.stateNode;f.flags&32&&(Kr(C,""),f.flags&=-33);var D=up(s);jd(s,D,C);break;case 3:case 4:var G=f.stateNode.containerInfo,Z=up(s);fp(s,Z,G);break;default:throw Error(r(161))}}catch(se){jt(s,s.return,se)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function u2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;u2(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function ds(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)a2(s,l.alternate,l),l=l.sibling}function _o(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:fs(4,l,l.return),_o(l);break;case 1:Gi(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&e2(l,l.return,f),_o(l);break;case 27:Eu(l.stateNode);case 26:case 5:Gi(l,l.return),_o(l);break;case 22:l.memoizedState===null&&_o(l);break;case 30:_o(l);break;default:_o(l)}s=s.sibling}}function hs(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,y=s,w=l,C=w.flags;switch(w.tag){case 0:case 11:case 15:hs(y,w,f),du(4,w);break;case 1:if(hs(y,w,f),h=w,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){jt(h,h.return,Z)}if(h=w,y=h.updateQueue,y!==null){var D=h.stateNode;try{var G=y.shared.hiddenCallbacks;if(G!==null)for(y.shared.hiddenCallbacks=null,y=0;y<G.length;y++)Vy(G[y],D)}catch(Z){jt(h,h.return,Z)}}f&&C&64&&Jx(w),hu(w,w.return);break;case 27:r2(w);case 26:case 5:hs(y,w,f),f&&h===null&&C&4&&t2(w),hu(w,w.return);break;case 12:hs(y,w,f);break;case 13:hs(y,w,f),f&&C&4&&l2(y,w);break;case 22:w.memoizedState===null&&hs(y,w,f),hu(w,w.return);break;case 30:break;default:hs(y,w,f)}l=l.sibling}}function pp(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&Zc(f))}function mp(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Zc(s))}function qi(s,l,f,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)f2(s,l,f,h),l=l.sibling}function f2(s,l,f,h){var y=l.flags;switch(l.tag){case 0:case 11:case 15:qi(s,l,f,h),y&2048&&du(9,l);break;case 1:qi(s,l,f,h);break;case 3:qi(s,l,f,h),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Zc(s)));break;case 12:if(y&2048){qi(s,l,f,h),s=l.stateNode;try{var w=l.memoizedProps,C=w.id,D=w.onPostCommit;typeof D=="function"&&D(C,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){jt(l,l.return,G)}}else qi(s,l,f,h);break;case 13:qi(s,l,f,h);break;case 23:break;case 22:w=l.stateNode,C=l.alternate,l.memoizedState!==null?w._visibility&2?qi(s,l,f,h):pu(s,l):w._visibility&2?qi(s,l,f,h):(w._visibility|=2,Al(s,l,f,h,(l.subtreeFlags&10256)!==0)),y&2048&&pp(C,l);break;case 24:qi(s,l,f,h),y&2048&&mp(l.alternate,l);break;default:qi(s,l,f,h)}}function Al(s,l,f,h,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=s,C=l,D=f,G=h,Z=C.flags;switch(C.tag){case 0:case 11:case 15:Al(w,C,D,G,y),du(8,C);break;case 23:break;case 22:var se=C.stateNode;C.memoizedState!==null?se._visibility&2?Al(w,C,D,G,y):pu(w,C):(se._visibility|=2,Al(w,C,D,G,y)),y&&Z&2048&&pp(C.alternate,C);break;case 24:Al(w,C,D,G,y),y&&Z&2048&&mp(C.alternate,C);break;default:Al(w,C,D,G,y)}l=l.sibling}}function pu(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,h=l,y=h.flags;switch(h.tag){case 22:pu(f,h),y&2048&&pp(h.alternate,h);break;case 24:pu(f,h),y&2048&&mp(h.alternate,h);break;default:pu(f,h)}l=l.sibling}}var mu=8192;function Sl(s){if(s.subtreeFlags&mu)for(s=s.child;s!==null;)d2(s),s=s.sibling}function d2(s){switch(s.tag){case 26:Sl(s),s.flags&mu&&s.memoizedState!==null&&u4(yi,s.memoizedState,s.memoizedProps);break;case 5:Sl(s);break;case 3:case 4:var l=yi;yi=Kd(s.stateNode.containerInfo),Sl(s),yi=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=mu,mu=16777216,Sl(s),mu=l):Sl(s));break;default:Sl(s)}}function h2(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function gu(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];zn=h,m2(h,s)}h2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)p2(s),s=s.sibling}function p2(s){switch(s.tag){case 0:case 11:case 15:gu(s),s.flags&2048&&fs(9,s,s.return);break;case 3:gu(s);break;case 12:gu(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Bd(s)):gu(s);break;default:gu(s)}}function Bd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];zn=h,m2(h,s)}h2(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:fs(8,l,l.return),Bd(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Bd(l));break;default:Bd(l)}s=s.sibling}}function m2(s,l){for(;zn!==null;){var f=zn;switch(f.tag){case 0:case 11:case 15:fs(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var h=f.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Zc(f.memoizedState.cache)}if(h=f.child,h!==null)h.return=f,zn=h;else e:for(f=s;zn!==null;){h=zn;var y=h.sibling,w=h.return;if(s2(h),h===f){zn=null;break e}if(y!==null){y.return=w,zn=y;break e}zn=w}}}var T3={getCacheForType:function(s){var l=or(Cn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f}},C3=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Ut=null,tt=null,ut=0,Ct=0,$r=null,ps=!1,Tl=!1,gp=!1,Na=0,on=0,ms=0,wo=0,vp=0,ai=0,Cl=0,vu=null,Rr=null,yp=!1,xp=0,Vd=1/0,Ud=null,gs=null,Jn=0,vs=null,Il=null,Nl=0,_p=0,wp=null,g2=null,yu=0,Ep=null;function Wr(){if((Tt&2)!==0&&ut!==0)return ut&-ut;if(X.T!==null){var s=gl;return s!==0?s:Np()}return Za()}function v2(){ai===0&&(ai=(ut&536870912)===0||xt?Cc():536870912);var s=ii.current;return s!==null&&(s.flags|=32),ai}function Xr(s,l,f){(s===Ut&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)&&(Rl(s,0),ys(s,ut,ai,!1)),oa(s,f),((Tt&2)===0||s!==Ut)&&(s===Ut&&((Tt&2)===0&&(wo|=f),on===4&&ys(s,ut,ai,!1)),$i(s))}function y2(s,l,f){if((Tt&6)!==0)throw Error(r(327));var h=!f&&(l&124)===0&&(l&s.expiredLanes)===0||$s(s,l),y=h?R3(s,l):Sp(s,l,!0),w=h;do{if(y===0){Tl&&!h&&ys(s,l,0,!1);break}else{if(f=s.current.alternate,w&&!I3(f)){y=Sp(s,l,!1),w=!1;continue}if(y===2){if(w=l,s.errorRecoveryDisabledLanes&w)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var D=s;y=vu;var G=D.current.memoizedState.isDehydrated;if(G&&(Rl(D,C).flags|=256),C=Sp(D,C,!1),C!==2){if(gp&&!G){D.errorRecoveryDisabledLanes|=w,wo|=w,y=4;break e}w=Rr,Rr=y,w!==null&&(Rr===null?Rr=w:Rr.push.apply(Rr,w))}y=C}if(w=!1,y!==2)continue}}if(y===1){Rl(s,0),ys(s,l,0,!0);break}e:{switch(h=s,w=y,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:ys(h,l,ai,!ps);break e;case 2:Rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=xp+300-Ie(),10<y)){if(ys(h,l,ai,!ps),Wo(h,0,!0)!==0)break e;h.timeoutHandle=W2(x2.bind(null,h,f,Rr,Ud,yp,l,ai,wo,Cl,ps,w,2,-0,0),y);break e}x2(h,f,Rr,Ud,yp,l,ai,wo,Cl,ps,w,0,-0,0)}}break}while(!0);$i(s)}function x2(s,l,f,h,y,w,C,D,G,Z,se,ce,ee,te){if(s.timeoutHandle=-1,ce=l.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(Su={stylesheets:null,count:0,unsuspend:c4},d2(l),ce=f4(),ce!==null)){s.cancelPendingCommit=ce(T2.bind(null,s,l,w,f,h,y,C,D,G,se,1,ee,te)),ys(s,w,C,!Z);return}T2(s,l,w,f,h,y,C,D,G)}function I3(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var h=0;h<f.length;h++){var y=f[h],w=y.getSnapshot;y=y.value;try{if(!Hr(w(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ys(s,l,f,h){l&=~vp,l&=~wo,s.suspendedLanes|=l,s.pingedLanes&=~l,h&&(s.warmLanes|=l),h=s.expirationTimes;for(var y=l;0<y;){var w=31-pt(y),C=1<<w;h[w]=-1,y&=~C}f!==0&&Oi(s,f,l)}function Fd(){return(Tt&6)===0?(xu(0),!1):!0}function bp(){if(tt!==null){if(Ct===0)var s=tt.return;else s=tt,wa=mo=null,U1(s),El=null,cu=0,s=tt;for(;s!==null;)Zx(s.alternate,s),s=s.return;tt=null}}function Rl(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,$3(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),bp(),Ut=s,tt=f=ya(s.current,null),ut=l,Ct=0,$r=null,ps=!1,Tl=$s(s,l),gp=!1,Cl=ai=vp=wo=ms=on=0,Rr=vu=null,yp=!1,(l&8)!==0&&(l|=l&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=l;0<h;){var y=31-pt(h),w=1<<y;l|=s[y],h&=~w}return Na=l,cd(),f}function _2(s,l){Ye=null,X.H=Id,l===eu||l===yd?(l=jy(),Ct=3):l===My?(l=jy(),Ct=4):Ct=l===Bx?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,$r=l,tt===null&&(on=1,Pd(s,ei(l,s.current)))}function w2(){var s=X.H;return X.H=Id,s===null?Id:s}function E2(){var s=X.A;return X.A=T3,s}function Ap(){on=4,ps||(ut&4194048)!==ut&&ii.current!==null||(Tl=!0),(ms&134217727)===0&&(wo&134217727)===0||Ut===null||ys(Ut,ut,ai,!1)}function Sp(s,l,f){var h=Tt;Tt|=2;var y=w2(),w=E2();(Ut!==s||ut!==l)&&(Ud=null,Rl(s,l)),l=!1;var C=on;e:do try{if(Ct!==0&&tt!==null){var D=tt,G=$r;switch(Ct){case 8:bp(),C=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(l=!0);var Z=Ct;if(Ct=0,$r=null,Ol(s,D,G,Z),f&&Tl){C=0;break e}break;default:Z=Ct,Ct=0,$r=null,Ol(s,D,G,Z)}}N3(),C=on;break}catch(se){_2(s,se)}while(!0);return l&&s.shellSuspendCounter++,wa=mo=null,Tt=h,X.H=y,X.A=w,tt===null&&(Ut=null,ut=0,cd()),C}function N3(){for(;tt!==null;)b2(tt)}function R3(s,l){var f=Tt;Tt|=2;var h=w2(),y=E2();Ut!==s||ut!==l?(Ud=null,Vd=Ie()+500,Rl(s,l)):Tl=$s(s,l);e:do try{if(Ct!==0&&tt!==null){l=tt;var w=$r;t:switch(Ct){case 1:Ct=0,$r=null,Ol(s,l,w,1);break;case 2:case 9:if(ky(w)){Ct=0,$r=null,A2(l);break}l=function(){Ct!==2&&Ct!==9||Ut!==s||(Ct=7),$i(s)},w.then(l,l);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:ky(w)?(Ct=0,$r=null,A2(l)):(Ct=0,$r=null,Ol(s,l,w,7));break;case 5:var C=null;switch(tt.tag){case 26:C=tt.memoizedState;case 5:case 27:var D=tt;if(!C||a_(C)){Ct=0,$r=null;var G=D.sibling;if(G!==null)tt=G;else{var Z=D.return;Z!==null?(tt=Z,Hd(Z)):tt=null}break t}}Ct=0,$r=null,Ol(s,l,w,5);break;case 6:Ct=0,$r=null,Ol(s,l,w,6);break;case 8:bp(),on=6;break e;default:throw Error(r(462))}}O3();break}catch(se){_2(s,se)}while(!0);return wa=mo=null,X.H=h,X.A=y,Tt=f,tt!==null?0:(Ut=null,ut=0,cd(),on)}function O3(){for(;tt!==null&&!we();)b2(tt)}function b2(s){var l=Kx(s.alternate,s,Na);s.memoizedProps=s.pendingProps,l===null?Hd(s):tt=l}function A2(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=Gx(f,l,l.pendingProps,l.type,void 0,ut);break;case 11:l=Gx(f,l,l.pendingProps,l.type.render,l.ref,ut);break;case 5:U1(l);default:Zx(f,l),l=tt=Sy(l,Na),l=Kx(f,l,Na)}s.memoizedProps=s.pendingProps,l===null?Hd(s):tt=l}function Ol(s,l,f,h){wa=mo=null,U1(l),El=null,cu=0;var y=l.return;try{if(_3(s,y,l,f,ut)){on=1,Pd(s,ei(f,s.current)),tt=null;return}}catch(w){if(y!==null)throw tt=y,w;on=1,Pd(s,ei(f,s.current)),tt=null;return}l.flags&32768?(xt||h===1?s=!0:Tl||(ut&536870912)!==0?s=!1:(ps=s=!0,(h===2||h===9||h===3||h===6)&&(h=ii.current,h!==null&&h.tag===13&&(h.flags|=16384))),S2(l,s)):Hd(l)}function Hd(s){var l=s;do{if((l.flags&32768)!==0){S2(l,ps);return}s=l.return;var f=E3(l.alternate,l,Na);if(f!==null){tt=f;return}if(l=l.sibling,l!==null){tt=l;return}tt=l=s}while(l!==null);on===0&&(on=5)}function S2(s,l){do{var f=b3(s.alternate,s);if(f!==null){f.flags&=32767,tt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){tt=s;return}tt=s=f}while(s!==null);on=6,tt=null}function T2(s,l,f,h,y,w,C,D,G){s.cancelPendingCommit=null;do zd();while(Jn!==0);if((Tt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=m1,Nc(s,f,w,C,D,G),s===Ut&&(tt=Ut=null,ut=0),Il=l,vs=s,Nl=f,_p=w,wp=y,g2=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,k3(zt,function(){return O2(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=X.T,X.T=null,y=le.p,le.p=2,C=Tt,Tt|=4;try{A3(s,l,f)}finally{Tt=C,le.p=y,X.T=h}}Jn=1,C2(),I2(),N2()}}function C2(){if(Jn===1){Jn=0;var s=vs,l=Il,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=X.T,X.T=null;var h=le.p;le.p=2;var y=Tt;Tt|=4;try{c2(l,s);var w=jp,C=my(s.containerInfo),D=w.focusedElem,G=w.selectionRange;if(C!==D&&D&&D.ownerDocument&&py(D.ownerDocument.documentElement,D)){if(G!==null&&u1(D)){var Z=G.start,se=G.end;if(se===void 0&&(se=Z),"selectionStart"in D)D.selectionStart=Z,D.selectionEnd=Math.min(se,D.value.length);else{var ce=D.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),Ue=D.textContent.length,ke=Math.min(G.start,Ue),Mt=G.end===void 0?ke:Math.min(G.end,Ue);!te.extend&&ke>Mt&&(C=Mt,Mt=ke,ke=C);var Y=hy(D,ke),W=hy(D,Mt);if(Y&&W&&(te.rangeCount!==1||te.anchorNode!==Y.node||te.anchorOffset!==Y.offset||te.focusNode!==W.node||te.focusOffset!==W.offset)){var Q=ce.createRange();Q.setStart(Y.node,Y.offset),te.removeAllRanges(),ke>Mt?(te.addRange(Q),te.extend(W.node,W.offset)):(Q.setEnd(W.node,W.offset),te.addRange(Q))}}}}for(ce=[],te=D;te=te.parentNode;)te.nodeType===1&&ce.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ce.length;D++){var oe=ce[D];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}th=!!Lp,jp=Lp=null}finally{Tt=y,le.p=h,X.T=f}}s.current=l,Jn=2}}function I2(){if(Jn===2){Jn=0;var s=vs,l=Il,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=X.T,X.T=null;var h=le.p;le.p=2;var y=Tt;Tt|=4;try{a2(s,l.alternate,l)}finally{Tt=y,le.p=h,X.T=f}}Jn=3}}function N2(){if(Jn===4||Jn===3){Jn=0,be();var s=vs,l=Il,f=Nl,h=g2;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Jn=5:(Jn=0,Il=vs=null,R2(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(gs=null),Xo(f),l=l.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(it,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=X.T,y=le.p,le.p=2,X.T=null;try{for(var w=s.onRecoverableError,C=0;C<h.length;C++){var D=h[C];w(D.value,{componentStack:D.stack})}}finally{X.T=l,le.p=y}}(Nl&3)!==0&&zd(),$i(s),y=s.pendingLanes,(f&4194090)!==0&&(y&42)!==0?s===Ep?yu++:(yu=0,Ep=s):yu=0,xu(0)}}function R2(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Zc(l)))}function zd(s){return C2(),I2(),N2(),O2()}function O2(){if(Jn!==5)return!1;var s=vs,l=_p;_p=0;var f=Xo(Nl),h=X.T,y=le.p;try{le.p=32>f?32:f,X.T=null,f=wp,wp=null;var w=vs,C=Nl;if(Jn=0,Il=vs=null,Nl=0,(Tt&6)!==0)throw Error(r(331));var D=Tt;if(Tt|=4,p2(w.current),f2(w,w.current,C,f),Tt=D,xu(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(it,w)}catch{}return!0}finally{le.p=y,X.T=h,R2(s,l)}}function D2(s,l,f){l=ei(f,l),l=ep(s.stateNode,l,2),s=os(s,l,2),s!==null&&(oa(s,2),$i(s))}function jt(s,l,f){if(s.tag===3)D2(s,s,f);else for(;l!==null;){if(l.tag===3){D2(l,s,f);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(gs===null||!gs.has(h))){s=ei(f,s),f=Lx(2),h=os(l,f,2),h!==null&&(jx(f,h,l,s),oa(h,2),$i(h));break}}l=l.return}}function Tp(s,l,f){var h=s.pingCache;if(h===null){h=s.pingCache=new C3;var y=new Set;h.set(l,y)}else y=h.get(l),y===void 0&&(y=new Set,h.set(l,y));y.has(f)||(gp=!0,y.add(f),s=D3.bind(null,s,l,f),l.then(s,s))}function D3(s,l,f){var h=s.pingCache;h!==null&&h.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Ut===s&&(ut&f)===f&&(on===4||on===3&&(ut&62914560)===ut&&300>Ie()-xp?(Tt&2)===0&&Rl(s,0):vp|=f,Cl===ut&&(Cl=0)),$i(s)}function P2(s,l){l===0&&(l=Ic()),s=dl(s,l),s!==null&&(oa(s,l),$i(s))}function P3(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),P2(s,f)}function M3(s,l){var f=0;switch(s.tag){case 13:var h=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),P2(s,f)}function k3(s,l){return me(s,l)}var Gd=null,Dl=null,Cp=!1,qd=!1,Ip=!1,Eo=0;function $i(s){s!==Dl&&s.next===null&&(Dl===null?Gd=Dl=s:Dl=Dl.next=s),qd=!0,Cp||(Cp=!0,j3())}function xu(s,l){if(!Ip&&qd){Ip=!0;do for(var f=!1,h=Gd;h!==null;){if(s!==0){var y=h.pendingLanes;if(y===0)var w=0;else{var C=h.suspendedLanes,D=h.pingedLanes;w=(1<<31-pt(42|s)+1)-1,w&=y&~(C&~D),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,j2(h,w))}else w=ut,w=Wo(h,h===Ut?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||$s(h,w)||(f=!0,j2(h,w));h=h.next}while(f);Ip=!1}}function L3(){M2()}function M2(){qd=Cp=!1;var s=0;Eo!==0&&(q3()&&(s=Eo),Eo=0);for(var l=Ie(),f=null,h=Gd;h!==null;){var y=h.next,w=k2(h,l);w===0?(h.next=null,f===null?Gd=y:f.next=y,y===null&&(Dl=f)):(f=h,(s!==0||(w&3)!==0)&&(qd=!0)),h=y}xu(s)}function k2(s,l){for(var f=s.suspendedLanes,h=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var C=31-pt(w),D=1<<C,G=y[C];G===-1?((D&f)===0||(D&h)!==0)&&(y[C]=Tc(D,l)):G<=l&&(s.expiredLanes|=D),w&=~D}if(l=Ut,f=ut,f=Wo(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,f===0||s===l&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&ve(h),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||$s(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(h!==null&&ve(h),Xo(f)){case 2:case 8:f=Vt;break;case 32:f=zt;break;case 268435456:f=Cr;break;default:f=zt}return h=L2.bind(null,s),f=me(f,h),s.callbackPriority=l,s.callbackNode=f,l}return h!==null&&h!==null&&ve(h),s.callbackPriority=2,s.callbackNode=null,2}function L2(s,l){if(Jn!==0&&Jn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(zd()&&s.callbackNode!==f)return null;var h=ut;return h=Wo(s,s===Ut?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(y2(s,h,l),k2(s,Ie()),s.callbackNode!=null&&s.callbackNode===f?L2.bind(null,s):null)}function j2(s,l){if(zd())return null;y2(s,l,!0)}function j3(){W3(function(){(Tt&6)!==0?me(rt,L3):M2()})}function Np(){return Eo===0&&(Eo=Cc()),Eo}function B2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:el(""+s)}function V2(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function B3(s,l,f,h,y){if(l==="submit"&&f&&f.stateNode===y){var w=B2((y[gn]||null).action),C=h.submitter;C&&(l=(l=C[gn]||null)?B2(l.formAction):C.getAttribute("formAction"),l!==null&&(w=l,C=null));var D=new tl("action","action",null,h,y);s.push({event:D,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Eo!==0){var G=C?V2(y,C):new FormData(y);Y1(f,{pending:!0,data:G,method:y.method,action:w},null,G)}}else typeof w=="function"&&(D.preventDefault(),G=C?V2(y,C):new FormData(y),Y1(f,{pending:!0,data:G,method:y.method,action:w},w,G))},currentTarget:y}]})}}for(var Rp=0;Rp<p1.length;Rp++){var Op=p1[Rp],V3=Op.toLowerCase(),U3=Op[0].toUpperCase()+Op.slice(1);vi(V3,"on"+U3)}vi(yy,"onAnimationEnd"),vi(xy,"onAnimationIteration"),vi(_y,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(r3,"onTransitionRun"),vi(i3,"onTransitionStart"),vi(a3,"onTransitionCancel"),vi(wy,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function U2(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var h=s[f],y=h.event;h=h.listeners;e:{var w=void 0;if(l)for(var C=h.length-1;0<=C;C--){var D=h[C],G=D.instance,Z=D.currentTarget;if(D=D.listener,G!==w&&y.isPropagationStopped())break e;w=D,y.currentTarget=Z;try{w(y)}catch(se){Dd(se)}y.currentTarget=null,w=G}else for(C=0;C<h.length;C++){if(D=h[C],G=D.instance,Z=D.currentTarget,D=D.listener,G!==w&&y.isPropagationStopped())break e;w=D,y.currentTarget=Z;try{w(y)}catch(se){Dd(se)}y.currentTarget=null,w=G}}}}function nt(s,l){var f=l[Oc];f===void 0&&(f=l[Oc]=new Set);var h=s+"__bubble";f.has(h)||(F2(l,s,2,!1),f.add(h))}function Dp(s,l,f){var h=0;l&&(h|=4),F2(f,s,h,l)}var $d="_reactListening"+Math.random().toString(36).slice(2);function Pp(s){if(!s[$d]){s[$d]=!0,Dc.forEach(function(f){f!=="selectionchange"&&(F3.has(f)||Dp(f,!1,s),Dp(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[$d]||(l[$d]=!0,Dp("selectionchange",!1,l))}}function F2(s,l,f,h){switch(f_(l)){case 2:var y=p4;break;case 8:y=m4;break;default:y=Wp}f=y.bind(null,l,f,s),y=void 0,!Zr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),h?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function Mp(s,l,f,h,y){var w=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var D=h.stateNode.containerInfo;if(D===y)break;if(C===4)for(C=h.return;C!==null;){var G=C.tag;if((G===3||G===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;D!==null;){if(C=la(D),C===null)return;if(G=C.tag,G===5||G===6||G===26||G===27){h=w=C;continue e}D=D.parentNode}}h=h.return}Xf(function(){var Z=w,se=Qr(f),ce=[];e:{var ee=Ey.get(s);if(ee!==void 0){var te=tl,Ue=s;switch(s){case"keypress":if(ji(f)===0)break e;case"keydown":case"keyup":te=ol;break;case"focusin":Ue="focus",te=il;break;case"focusout":Ue="blur",te=il;break;case"beforeblur":case"afterblur":te=il;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=s1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=nd;break;case yy:case xy:case _y:te=al;break;case wy:te=id;break;case"scroll":case"scrollend":te=Yf;break;case"wheel":te=ll;break;case"copy":case"cut":case"paste":te=sl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Gc;break;case"toggle":case"beforetoggle":te=sd}var ke=(l&4)!==0,Mt=!ke&&(s==="scroll"||s==="scrollend"),Y=ke?ee!==null?ee+"Capture":null:ee;ke=[];for(var W=Z,Q;W!==null;){var oe=W;if(Q=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Q===null||Y===null||(oe=eo(W,Y),oe!=null&&ke.push(wu(W,oe,Q))),Mt)break;W=W.return}0<ke.length&&(ee=new te(ee,Ue,null,f,se),ce.push({event:ee,listeners:ke}))}}if((l&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",te=s==="mouseout"||s==="pointerout",ee&&f!==da&&(Ue=f.relatedTarget||f.fromElement)&&(la(Ue)||Ue[Yr]))break e;if((te||ee)&&(ee=se.window===se?se:(ee=se.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(Ue=f.relatedTarget||f.toElement,te=Z,Ue=Ue?la(Ue):null,Ue!==null&&(Mt=a(Ue),ke=Ue.tag,Ue!==Mt||ke!==5&&ke!==27&&ke!==6)&&(Ue=null)):(te=null,Ue=Z),te!==Ue)){if(ke=Jr,oe="onMouseLeave",Y="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(ke=Gc,oe="onPointerLeave",Y="onPointerEnter",W="pointer"),Mt=te==null?ee:Pi(te),Q=Ue==null?ee:Pi(Ue),ee=new ke(oe,W+"leave",te,f,se),ee.target=Mt,ee.relatedTarget=Q,oe=null,la(se)===Z&&(ke=new ke(Y,W+"enter",Ue,f,se),ke.target=Q,ke.relatedTarget=Mt,oe=ke),Mt=oe,te&&Ue)t:{for(ke=te,Y=Ue,W=0,Q=ke;Q;Q=Pl(Q))W++;for(Q=0,oe=Y;oe;oe=Pl(oe))Q++;for(;0<W-Q;)ke=Pl(ke),W--;for(;0<Q-W;)Y=Pl(Y),Q--;for(;W--;){if(ke===Y||Y!==null&&ke===Y.alternate)break t;ke=Pl(ke),Y=Pl(Y)}ke=null}else ke=null;te!==null&&H2(ce,ee,te,ke,!1),Ue!==null&&Mt!==null&&H2(ce,Mt,Ue,ke,!0)}}e:{if(ee=Z?Pi(Z):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var Se=oy;else if(Tn(ee))if(ly)Se=e3;else{Se=ZC;var Je=QC}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&jc(Z.elementType)&&(Se=oy):Se=JC;if(Se&&(Se=Se(s,Z))){va(ce,Se,f,se);break e}Je&&Je(s,ee,Z),s==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&ns(ee,"number",ee.value)}switch(Je=Z?Pi(Z):window,s){case"focusin":(Tn(Je)||Je.contentEditable==="true")&&(cl=Je,f1=Z,Wc=null);break;case"focusout":Wc=f1=cl=null;break;case"mousedown":d1=!0;break;case"contextmenu":case"mouseup":case"dragend":d1=!1,gy(ce,f,se);break;case"selectionchange":if(n3)break;case"keydown":case"keyup":gy(ce,f,se)}var Oe;if(Ui)e:{switch(s){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else lt?ne(s,f)&&(Be="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Be="onCompositionStart");Be&&(T&&f.locale!=="ko"&&(lt||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&lt&&(Oe=Vc()):(Li=se,rs="value"in Li?Li.value:Li.textContent,lt=!0)),Je=Wd(Z,Be),0<Je.length&&(Be=new Hc(Be,s,null,f,se),ce.push({event:Be,listeners:Je}),Oe?Be.data=Oe:(Oe=ye(f),Oe!==null&&(Be.data=Oe)))),(Oe=b?Sn(s,f):ct(s,f))&&(Be=Wd(Z,"onBeforeInput"),0<Be.length&&(Je=new Hc("onBeforeInput","beforeinput",null,f,se),ce.push({event:Je,listeners:Be}),Je.data=Oe)),B3(ce,s,Z,f,se)}U2(ce,l)})}function wu(s,l,f){return{instance:s,listener:l,currentTarget:f}}function Wd(s,l){for(var f=l+"Capture",h=[];s!==null;){var y=s,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=eo(s,f),y!=null&&h.unshift(wu(s,y,w)),y=eo(s,l),y!=null&&h.push(wu(s,y,w))),s.tag===3)return h;s=s.return}return[]}function Pl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function H2(s,l,f,h,y){for(var w=l._reactName,C=[];f!==null&&f!==h;){var D=f,G=D.alternate,Z=D.stateNode;if(D=D.tag,G!==null&&G===h)break;D!==5&&D!==26&&D!==27||Z===null||(G=Z,y?(Z=eo(f,w),Z!=null&&C.unshift(wu(f,Z,G))):y||(Z=eo(f,w),Z!=null&&C.push(wu(f,Z,G)))),f=f.return}C.length!==0&&s.push({event:l,listeners:C})}var H3=/\r\n?/g,z3=/\u0000|\uFFFD/g;function z2(s){return(typeof s=="string"?s:""+s).replace(H3,`
`).replace(z3,"")}function G2(s,l){return l=z2(l),z2(s)===l}function Xd(){}function Pt(s,l,f,h,y,w){switch(f){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Kr(s,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Kr(s,""+h);break;case"className":Mi(s,"class",h);break;case"tabIndex":Mi(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Mi(s,f,h);break;case"style":Lc(s,h,w);break;case"data":if(l!=="object"){Mi(s,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=el(""+h),s.setAttribute(f,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&Pt(s,l,"name",y.name,y,null),Pt(s,l,"formEncType",y.formEncType,y,null),Pt(s,l,"formMethod",y.formMethod,y,null),Pt(s,l,"formTarget",y.formTarget,y,null)):(Pt(s,l,"encType",y.encType,y,null),Pt(s,l,"method",y.method,y,null),Pt(s,l,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=el(""+h),s.setAttribute(f,h);break;case"onClick":h!=null&&(s.onclick=Xd);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}f=el(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""+h):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":h===!0?s.setAttribute(f,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,h):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(f,h):s.removeAttribute(f);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(f):s.setAttribute(f,h);break;case"popover":nt("beforetoggle",s),nt("toggle",s),ts(s,"popover",h);break;case"xlinkActuate":Kn(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Kn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Kn(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Kn(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Kn(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Kn(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Kn(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Kn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Kn(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ts(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=i1.get(f)||f,ts(s,f,h))}}function kp(s,l,f,h,y,w){switch(f){case"style":Lc(s,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof h=="string"?Kr(s,h):(typeof h=="number"||typeof h=="bigint")&&Kr(s,""+h);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Xd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yo.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),w=s[gn]||null,w=w!=null?w[f]:null,typeof w=="function"&&s.removeEventListener(l,w,y),typeof h=="function")){typeof w!="function"&&w!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,h,y);break e}f in s?s[f]=h:h===!0?s.setAttribute(f,""):ts(s,f,h)}}}function er(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var h=!1,y=!1,w;for(w in f)if(f.hasOwnProperty(w)){var C=f[w];if(C!=null)switch(w){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Pt(s,l,w,C,f,null)}}y&&Pt(s,l,"srcSet",f.srcSet,f,null),h&&Pt(s,l,"src",f.src,f,null);return;case"input":nt("invalid",s);var D=w=C=y=null,G=null,Z=null;for(h in f)if(f.hasOwnProperty(h)){var se=f[h];if(se!=null)switch(h){case"name":y=se;break;case"type":C=se;break;case"checked":G=se;break;case"defaultChecked":Z=se;break;case"value":w=se;break;case"defaultValue":D=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,l));break;default:Pt(s,l,h,se,f,null)}}Qs(s,w,D,G,Z,C,y,!1),Jo(s);return;case"select":nt("invalid",s),h=C=w=null;for(y in f)if(f.hasOwnProperty(y)&&(D=f[y],D!=null))switch(y){case"value":w=D;break;case"defaultValue":C=D;break;case"multiple":h=D;default:Pt(s,l,y,D,f,null)}l=w,f=C,s.multiple=!!h,l!=null?fa(s,!!h,l,!1):f!=null&&fa(s,!!h,f,!0);return;case"textarea":nt("invalid",s),w=y=h=null;for(C in f)if(f.hasOwnProperty(C)&&(D=f[C],D!=null))switch(C){case"value":h=D;break;case"defaultValue":y=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:Pt(s,l,C,D,f,null)}Zs(s,h,y,w),Jo(s);return;case"option":for(G in f)if(f.hasOwnProperty(G)&&(h=f[G],h!=null))switch(G){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Pt(s,l,G,h,f,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(h=0;h<_u.length;h++)nt(_u[h],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in f)if(f.hasOwnProperty(Z)&&(h=f[Z],h!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Pt(s,l,Z,h,f,null)}return;default:if(jc(l)){for(se in f)f.hasOwnProperty(se)&&(h=f[se],h!==void 0&&kp(s,l,se,h,f,void 0));return}}for(D in f)f.hasOwnProperty(D)&&(h=f[D],h!=null&&Pt(s,l,D,h,f,null))}function G3(s,l,f,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,C=null,D=null,G=null,Z=null,se=null;for(te in f){var ce=f[te];if(f.hasOwnProperty(te)&&ce!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":G=ce;default:h.hasOwnProperty(te)||Pt(s,l,te,null,h,ce)}}for(var ee in h){var te=h[ee];if(ce=f[ee],h.hasOwnProperty(ee)&&(te!=null||ce!=null))switch(ee){case"type":w=te;break;case"name":y=te;break;case"checked":Z=te;break;case"defaultChecked":se=te;break;case"value":C=te;break;case"defaultValue":D=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:te!==ce&&Pt(s,l,ee,te,h,ce)}}Fr(s,C,D,G,Z,se,w,y);return;case"select":te=C=D=ee=null;for(w in f)if(G=f[w],f.hasOwnProperty(w)&&G!=null)switch(w){case"value":break;case"multiple":te=G;default:h.hasOwnProperty(w)||Pt(s,l,w,null,h,G)}for(y in h)if(w=h[y],G=f[y],h.hasOwnProperty(y)&&(w!=null||G!=null))switch(y){case"value":ee=w;break;case"defaultValue":D=w;break;case"multiple":C=w;default:w!==G&&Pt(s,l,y,w,h,G)}l=D,f=C,h=te,ee!=null?fa(s,!!f,ee,!1):!!h!=!!f&&(l!=null?fa(s,!!f,l,!0):fa(s,!!f,f?[]:"",!1));return;case"textarea":te=ee=null;for(D in f)if(y=f[D],f.hasOwnProperty(D)&&y!=null&&!h.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Pt(s,l,D,null,h,y)}for(C in h)if(y=h[C],w=f[C],h.hasOwnProperty(C)&&(y!=null||w!=null))switch(C){case"value":ee=y;break;case"defaultValue":te=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==w&&Pt(s,l,C,y,h,w)}Ot(s,ee,te);return;case"option":for(var Ue in f)if(ee=f[Ue],f.hasOwnProperty(Ue)&&ee!=null&&!h.hasOwnProperty(Ue))switch(Ue){case"selected":s.selected=!1;break;default:Pt(s,l,Ue,null,h,ee)}for(G in h)if(ee=h[G],te=f[G],h.hasOwnProperty(G)&&ee!==te&&(ee!=null||te!=null))switch(G){case"selected":s.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Pt(s,l,G,ee,h,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in f)ee=f[ke],f.hasOwnProperty(ke)&&ee!=null&&!h.hasOwnProperty(ke)&&Pt(s,l,ke,null,h,ee);for(Z in h)if(ee=h[Z],te=f[Z],h.hasOwnProperty(Z)&&ee!==te&&(ee!=null||te!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,l));break;default:Pt(s,l,Z,ee,h,te)}return;default:if(jc(l)){for(var Mt in f)ee=f[Mt],f.hasOwnProperty(Mt)&&ee!==void 0&&!h.hasOwnProperty(Mt)&&kp(s,l,Mt,void 0,h,ee);for(se in h)ee=h[se],te=f[se],!h.hasOwnProperty(se)||ee===te||ee===void 0&&te===void 0||kp(s,l,se,ee,h,te);return}}for(var Y in f)ee=f[Y],f.hasOwnProperty(Y)&&ee!=null&&!h.hasOwnProperty(Y)&&Pt(s,l,Y,null,h,ee);for(ce in h)ee=h[ce],te=f[ce],!h.hasOwnProperty(ce)||ee===te||ee==null&&te==null||Pt(s,l,ce,ee,h,te)}var Lp=null,jp=null;function Yd(s){return s.nodeType===9?s:s.ownerDocument}function q2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $2(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Bp(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Vp=null;function q3(){var s=window.event;return s&&s.type==="popstate"?s===Vp?!1:(Vp=s,!0):(Vp=null,!1)}var W2=typeof setTimeout=="function"?setTimeout:void 0,$3=typeof clearTimeout=="function"?clearTimeout:void 0,X2=typeof Promise=="function"?Promise:void 0,W3=typeof queueMicrotask=="function"?queueMicrotask:typeof X2<"u"?function(s){return X2.resolve(null).then(s).catch(X3)}:W2;function X3(s){setTimeout(function(){throw s})}function xs(s){return s==="head"}function Y2(s,l){var f=l,h=0,y=0;do{var w=f.nextSibling;if(s.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(0<h&&8>h){f=h;var C=s.ownerDocument;if(f&1&&Eu(C.documentElement),f&2&&Eu(C.body),f&4)for(f=C.head,Eu(f),C=f.firstChild;C;){var D=C.nextSibling,G=C.nodeName;C[Ws]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&C.rel.toLowerCase()==="stylesheet"||f.removeChild(C),C=D}}if(y===0){s.removeChild(w),Ru(l);return}y--}else f==="$"||f==="$?"||f==="$!"?y++:h=f.charCodeAt(0)-48;else h=0;f=w}while(f);Ru(l)}function Up(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Up(f),es(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function Y3(s,l,f,h){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Ws])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=xi(s.nextSibling),s===null)break}return null}function K3(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=xi(s.nextSibling),s===null))return null;return s}function Fp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Q3(s,l){var f=s.ownerDocument;if(s.data!=="$?"||f.readyState==="complete")l();else{var h=function(){l(),f.removeEventListener("DOMContentLoaded",h)};f.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function xi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var Hp=null;function K2(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return s;l--}else f==="/$"&&l++}s=s.previousSibling}return null}function Q2(s,l,f){switch(l=Yd(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Eu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);es(s)}var si=new Map,Z2=new Set;function Kd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ra=le.d;le.d={f:Z3,r:J3,D:e4,C:t4,L:n4,m:r4,X:a4,S:i4,M:s4};function Z3(){var s=Ra.f(),l=Fd();return s||l}function J3(s){var l=Di(s);l!==null&&l.tag===5&&l.type==="form"?yx(l):Ra.r(s)}var Ml=typeof document>"u"?null:document;function J2(s,l,f){var h=Ml;if(h&&typeof l=="string"&&l){var y=vn(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),Z2.has(y)||(Z2.add(y),s={rel:s,crossOrigin:f,href:l},h.querySelector(y)===null&&(l=h.createElement("link"),er(l,"link",s),un(l),h.head.appendChild(l)))}}function e4(s){Ra.D(s),J2("dns-prefetch",s,null)}function t4(s,l){Ra.C(s,l),J2("preconnect",s,l)}function n4(s,l,f){Ra.L(s,l,f);var h=Ml;if(h&&s&&l){var y='link[rel="preload"][as="'+vn(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+vn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+vn(f.imageSizes)+'"]')):y+='[href="'+vn(s)+'"]';var w=y;switch(l){case"style":w=kl(s);break;case"script":w=Ll(s)}si.has(w)||(s=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),si.set(w,s),h.querySelector(y)!==null||l==="style"&&h.querySelector(bu(w))||l==="script"&&h.querySelector(Au(w))||(l=h.createElement("link"),er(l,"link",s),un(l),h.head.appendChild(l)))}}function r4(s,l){Ra.m(s,l);var f=Ml;if(f&&s){var h=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+vn(h)+'"][href="'+vn(s)+'"]',w=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ll(s)}if(!si.has(w)&&(s=p({rel:"modulepreload",href:s},l),si.set(w,s),f.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Au(w)))return}h=f.createElement("link"),er(h,"link",s),un(h),f.head.appendChild(h)}}}function i4(s,l,f){Ra.S(s,l,f);var h=Ml;if(h&&s){var y=yr(h).hoistableStyles,w=kl(s);l=l||"default";var C=y.get(w);if(!C){var D={loading:0,preload:null};if(C=h.querySelector(bu(w)))D.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},f),(f=si.get(w))&&zp(s,f);var G=C=h.createElement("link");un(G),er(G,"link",s),G._p=new Promise(function(Z,se){G.onload=Z,G.onerror=se}),G.addEventListener("load",function(){D.loading|=1}),G.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Qd(C,l,h)}C={type:"stylesheet",instance:C,count:1,state:D},y.set(w,C)}}}function a4(s,l){Ra.X(s,l);var f=Ml;if(f&&s){var h=yr(f).hoistableScripts,y=Ll(s),w=h.get(y);w||(w=f.querySelector(Au(y)),w||(s=p({src:s,async:!0},l),(l=si.get(y))&&Gp(s,l),w=f.createElement("script"),un(w),er(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function s4(s,l){Ra.M(s,l);var f=Ml;if(f&&s){var h=yr(f).hoistableScripts,y=Ll(s),w=h.get(y);w||(w=f.querySelector(Au(y)),w||(s=p({src:s,async:!0,type:"module"},l),(l=si.get(y))&&Gp(s,l),w=f.createElement("script"),un(w),er(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function e_(s,l,f,h){var y=(y=Ne.current)?Kd(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=kl(f.href),f=yr(y).hoistableStyles,h=f.get(l),h||(h={type:"style",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=kl(f.href);var w=yr(y).hoistableStyles,C=w.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,C),(w=y.querySelector(bu(s)))&&!w._p&&(C.instance=w,C.state.loading=5),si.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},si.set(s,f),w||o4(y,s,f,C.state))),l&&h===null)throw Error(r(528,""));return C}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ll(f),f=yr(y).hoistableScripts,h=f.get(l),h||(h={type:"script",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function kl(s){return'href="'+vn(s)+'"'}function bu(s){return'link[rel="stylesheet"]['+s+"]"}function t_(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function o4(s,l,f,h){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=s.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),er(l,"link",f),un(l),s.head.appendChild(l))}function Ll(s){return'[src="'+vn(s)+'"]'}function Au(s){return"script[async]"+s}function n_(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var h=s.querySelector('style[data-href~="'+vn(f.href)+'"]');if(h)return l.instance=h,un(h),h;var y=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),un(h),er(h,"style",y),Qd(h,f.precedence,s),l.instance=h;case"stylesheet":y=kl(f.href);var w=s.querySelector(bu(y));if(w)return l.state.loading|=4,l.instance=w,un(w),w;h=t_(f),(y=si.get(y))&&zp(h,y),w=(s.ownerDocument||s).createElement("link"),un(w);var C=w;return C._p=new Promise(function(D,G){C.onload=D,C.onerror=G}),er(w,"link",h),l.state.loading|=4,Qd(w,f.precedence,s),l.instance=w;case"script":return w=Ll(f.src),(y=s.querySelector(Au(w)))?(l.instance=y,un(y),y):(h=f,(y=si.get(w))&&(h=p({},f),Gp(h,y)),s=s.ownerDocument||s,y=s.createElement("script"),un(y),er(y,"link",h),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,Qd(h,f.precedence,s));return l.instance}function Qd(s,l,f){for(var h=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,w=y,C=0;C<h.length;C++){var D=h[C];if(D.dataset.precedence===l)w=D;else if(w!==y)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function zp(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Gp(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Zd=null;function r_(s,l,f){if(Zd===null){var h=new Map,y=Zd=new Map;y.set(f,h)}else y=Zd,h=y.get(f),h||(h=new Map,y.set(f,h));if(h.has(s))return h;for(h.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var w=f[y];if(!(w[Ws]||w[An]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(l)||"";C=s+C;var D=h.get(C);D?D.push(w):h.set(C,[w])}}return h}function i_(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function l4(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function a_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Su=null;function c4(){}function u4(s,l,f){if(Su===null)throw Error(r(475));var h=Su;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=kl(f.href),w=s.querySelector(bu(y));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Jd.bind(h),s.then(h,h)),l.state.loading|=4,l.instance=w,un(w);return}w=s.ownerDocument||s,f=t_(f),(y=si.get(y))&&zp(f,y),w=w.createElement("link"),un(w);var C=w;C._p=new Promise(function(D,G){C.onload=D,C.onerror=G}),er(w,"link",f),l.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(h.count++,l=Jd.bind(h),s.addEventListener("load",l),s.addEventListener("error",l))}}function f4(){if(Su===null)throw Error(r(475));var s=Su;return s.stylesheets&&s.count===0&&qp(s,s.stylesheets),0<s.count?function(l){var f=setTimeout(function(){if(s.stylesheets&&qp(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(f)}}:null}function Jd(){if(this.count--,this.count===0){if(this.stylesheets)qp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var eh=null;function qp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,eh=new Map,l.forEach(d4,s),eh=null,Jd.call(s))}function d4(s,l){if(!(l.state.loading&4)){var f=eh.get(s);if(f)var h=f.get(null);else{f=new Map,eh.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var C=y[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(f.set(C.dataset.precedence,C),h=C)}h&&f.set(null,h)}y=l.instance,C=y.getAttribute("data-precedence"),w=f.get(C)||h,w===h&&f.set(null,y),f.set(C,y),this.count++,h=Jd.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),w?w.parentNode.insertBefore(y,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Tu={$$typeof:O,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function h4(s,l,f,h,y,w,C,D){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.hiddenUpdates=sa(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function s_(s,l,f,h,y,w,C,D,G,Z,se,ce){return s=new h4(s,l,f,C,D,G,Z,ce),l=1,w===!0&&(l|=24),w=zr(3,null,null,l),s.current=w,w.stateNode=s,l=T1(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:h,isDehydrated:f,cache:l},R1(w),s}function o_(s){return s?(s=hl,s):hl}function l_(s,l,f,h,y,w){y=o_(y),h.context===null?h.context=y:h.pendingContext=y,h=ss(l),h.payload={element:f},w=w===void 0?null:w,w!==null&&(h.callback=w),f=os(s,h,l),f!==null&&(Xr(f,s,l),nu(f,s,l))}function c_(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function $p(s,l){c_(s,l),(s=s.alternate)&&c_(s,l)}function u_(s){if(s.tag===13){var l=dl(s,67108864);l!==null&&Xr(l,s,67108864),$p(s,67108864)}}var th=!0;function p4(s,l,f,h){var y=X.T;X.T=null;var w=le.p;try{le.p=2,Wp(s,l,f,h)}finally{le.p=w,X.T=y}}function m4(s,l,f,h){var y=X.T;X.T=null;var w=le.p;try{le.p=8,Wp(s,l,f,h)}finally{le.p=w,X.T=y}}function Wp(s,l,f,h){if(th){var y=Xp(h);if(y===null)Mp(s,l,h,nh,f),d_(s,h);else if(v4(y,s,l,f,h))h.stopPropagation();else if(d_(s,h),l&4&&-1<g4.indexOf(s)){for(;y!==null;){var w=Di(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Ur(w.pendingLanes);if(C!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var G=1<<31-pt(C);D.entanglements[1]|=G,C&=~G}$i(w),(Tt&6)===0&&(Vd=Ie()+500,xu(0))}}break;case 13:D=dl(w,2),D!==null&&Xr(D,w,2),Fd(),$p(w,2)}if(w=Xp(h),w===null&&Mp(s,l,h,nh,f),w===y)break;y=w}y!==null&&h.stopPropagation()}else Mp(s,l,h,null,f)}}function Xp(s){return s=Qr(s),Yp(s)}var nh=null;function Yp(s){if(nh=null,s=la(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return nh=s,null}function f_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case rt:return 2;case Vt:return 8;case zt:case Jt:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var Kp=!1,_s=null,ws=null,Es=null,Cu=new Map,Iu=new Map,bs=[],g4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d_(s,l){switch(s){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Cu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(l.pointerId)}}function Nu(s,l,f,h,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:f,eventSystemFlags:h,nativeEvent:w,targetContainers:[y]},l!==null&&(l=Di(l),l!==null&&u_(l)),s):(s.eventSystemFlags|=h,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function v4(s,l,f,h,y){switch(l){case"focusin":return _s=Nu(_s,s,l,f,h,y),!0;case"dragenter":return ws=Nu(ws,s,l,f,h,y),!0;case"mouseover":return Es=Nu(Es,s,l,f,h,y),!0;case"pointerover":var w=y.pointerId;return Cu.set(w,Nu(Cu.get(w)||null,s,l,f,h,y)),!0;case"gotpointercapture":return w=y.pointerId,Iu.set(w,Nu(Iu.get(w)||null,s,l,f,h,y)),!0}return!1}function h_(s){var l=la(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Ff(s.priority,function(){if(f.tag===13){var h=Wr();h=Qa(h);var y=dl(f,h);y!==null&&Xr(y,f,h),$p(f,h)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rh(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=Xp(s.nativeEvent);if(f===null){f=s.nativeEvent;var h=new f.constructor(f.type,f);da=h,f.target.dispatchEvent(h),da=null}else return l=Di(f),l!==null&&u_(l),s.blockedOn=f,!1;l.shift()}return!0}function p_(s,l,f){rh(s)&&f.delete(l)}function y4(){Kp=!1,_s!==null&&rh(_s)&&(_s=null),ws!==null&&rh(ws)&&(ws=null),Es!==null&&rh(Es)&&(Es=null),Cu.forEach(p_),Iu.forEach(p_)}function ih(s,l){s.blockedOn===l&&(s.blockedOn=null,Kp||(Kp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,y4)))}var ah=null;function m_(s){ah!==s&&(ah=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ah===s&&(ah=null);for(var l=0;l<s.length;l+=3){var f=s[l],h=s[l+1],y=s[l+2];if(typeof h!="function"){if(Yp(h||f)===null)continue;break}var w=Di(f);w!==null&&(s.splice(l,3),l-=3,Y1(w,{pending:!0,data:y,method:f.method,action:h},h,y))}}))}function Ru(s){function l(G){return ih(G,s)}_s!==null&&ih(_s,s),ws!==null&&ih(ws,s),Es!==null&&ih(Es,s),Cu.forEach(l),Iu.forEach(l);for(var f=0;f<bs.length;f++){var h=bs[f];h.blockedOn===s&&(h.blockedOn=null)}for(;0<bs.length&&(f=bs[0],f.blockedOn===null);)h_(f),f.blockedOn===null&&bs.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(h=0;h<f.length;h+=3){var y=f[h],w=f[h+1],C=y[gn]||null;if(typeof w=="function")C||m_(f);else if(C){var D=null;if(w&&w.hasAttribute("formAction")){if(y=w,C=w[gn]||null)D=C.formAction;else if(Yp(y)!==null)continue}else D=C.action;typeof D=="function"?f[h+1]=D:(f.splice(h,3),h-=3),m_(f)}}}function Qp(s){this._internalRoot=s}sh.prototype.render=Qp.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,h=Wr();l_(f,h,s,l,null,null)},sh.prototype.unmount=Qp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;l_(s.current,2,null,s,null,null),Fd(),l[Yr]=null}};function sh(s){this._internalRoot=s}sh.prototype.unstable_scheduleHydration=function(s){if(s){var l=Za();s={blockedOn:null,target:s,priority:l};for(var f=0;f<bs.length&&l!==0&&l<bs[f].priority;f++);bs.splice(f,0,s),f===0&&h_(s)}};var g_=e.version;if(g_!=="19.1.0")throw Error(r(527,g_,"19.1.0"));le.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=u(l),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var x4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{it=oh.inject(x4),Me=oh}catch{}}return Du.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,h="",y=Dx,w=Px,C=Mx,D=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks)),l=s_(s,1,!1,null,null,f,h,y,w,C,D,null),s[Yr]=l.current,Pp(s),new Qp(l)},Du.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var h=!1,y="",w=Dx,C=Px,D=Mx,G=null,Z=null;return f!=null&&(f.unstable_strictMode===!0&&(h=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(C=f.onCaughtError),f.onRecoverableError!==void 0&&(D=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(G=f.unstable_transitionCallbacks),f.formState!==void 0&&(Z=f.formState)),l=s_(s,1,!0,l,f??null,h,y,w,C,D,G,Z),l.context=o_(null),f=l.current,h=Wr(),h=Qa(h),y=ss(h),y.callback=null,os(f,y,h),f=h,l.current.lanes=f,oa(l,f),$i(l),s[Yr]=l.current,Pp(s),new sh(l)},Du.version="19.1.0",Du}var T_;function N4(){if(T_)return em.exports;T_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),em.exports=I4(),em.exports}var R4=N4(),Pu={},C_;function O4(){if(C_)return Pu;C_=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.parse=o,Pu.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function o(x,_){const E=new a,A=x.length;if(A<2)return E;const S=(_==null?void 0:_.decode)||p;let I=0;do{const N=x.indexOf("=",I);if(N===-1)break;const O=x.indexOf(";",I),j=O===-1?A:O;if(N>j){I=x.lastIndexOf(";",N-1)+1;continue}const F=c(x,I,N),q=u(x,N,F),P=x.slice(F,q);if(E[P]===void 0){let R=c(x,N+1,j),M=u(x,j,R);const V=S(x.slice(R,M));E[P]=V}I=j+1}while(I<A);return E}function c(x,_,E){do{const A=x.charCodeAt(_);if(A!==32&&A!==9)return _}while(++_<E);return E}function u(x,_,E){for(;_>E;){const A=x.charCodeAt(--_);if(A!==32&&A!==9)return _+1}return E}function d(x,_,E){const A=(E==null?void 0:E.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const S=A(_);if(!e.test(S))throw new TypeError(`argument val is invalid: ${_}`);let I=x+"="+S;if(!E)return I;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);I+="; Max-Age="+E.maxAge}if(E.domain){if(!t.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);I+="; Domain="+E.domain}if(E.path){if(!r.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);I+="; Path="+E.path}if(E.expires){if(!g(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);I+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(I+="; HttpOnly"),E.secure&&(I+="; Secure"),E.partitioned&&(I+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return I}function p(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function g(x){return i.call(x)==="[object Date]"}return Pu}O4();var I_="popstate";function D4(n={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return Km("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:af(i)}return M4(e,t,null,n)}function Zt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ti(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function P4(){return Math.random().toString(36).substring(2,10)}function N_(n,e){return{usr:n.state,key:n.key,idx:e}}function Km(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?cc(e):e,state:t,key:e&&e.key||r||P4()}}function af({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function cc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function M4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function g(){c="POP";let S=p(),I=S==null?null:S-d;d=S,u&&u({action:c,location:A.location,delta:I})}function x(S,I){c="PUSH";let N=Km(A.location,S,I);d=p()+1;let O=N_(N,d),j=A.createHref(N);try{o.pushState(O,"",j)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(j)}a&&u&&u({action:c,location:A.location,delta:1})}function _(S,I){c="REPLACE";let N=Km(A.location,S,I);d=p();let O=N_(N,d),j=A.createHref(N);o.replaceState(O,"",j),a&&u&&u({action:c,location:A.location,delta:0})}function E(S){return k4(S)}let A={get action(){return c},get location(){return n(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(I_,g),u=S,()=>{i.removeEventListener(I_,g),u=null}},createHref(S){return e(i,S)},createURL:E,encodeLocation(S){let I=E(S);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:x,replace:_,go(S){return o.go(S)}};return A}function k4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:af(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Cb(n,e,t="/"){return L4(n,e,t,!1)}function L4(n,e,t,r){let i=typeof e=="string"?cc(e):e,a=Ha(i.pathname||"/",t);if(a==null)return null;let o=Ib(n);j4(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=X4(a);c=$4(o[u],d,r)}return c}function Ib(n,e=[],t=[],r=""){let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Zt(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Ba([r,u.relativePath]),p=t.concat(u);a.children&&a.children.length>0&&(Zt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Ib(a.children,e,p,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:G4(d,a.index),routesMeta:p})};return n.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of Nb(a.path))i(a,o,u)}),e}function Nb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Nb(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function j4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:q4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var B4=/^:[\w-]+$/,V4=3,U4=2,F4=1,H4=10,z4=-2,R_=n=>n==="*";function G4(n,e){let t=n.split("/"),r=t.length;return t.some(R_)&&(r+=z4),e&&(r+=U4),t.filter(i=>!R_(i)).reduce((i,a)=>i+(B4.test(a)?V4:a===""?F4:H4),r)}function q4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function $4(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Uh({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),x=u.route;if(!g&&d&&t&&!r[r.length-1].route.index&&(g=Uh({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Ba([a,g.pathname]),pathnameBase:Z4(Ba([a,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(a=Ba([a,g.pathnameBase]))}return o}function Uh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=W4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:g},x)=>{if(p==="*"){let E=c[x]||"";o=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const _=c[x];return g&&!_?d[p]=void 0:d[p]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:n}}function W4(n,e=!1,t=!0){Ti(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function X4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ti(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ha(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Y4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?cc(n):n;return{pathname:t?t.startsWith("/")?t:K4(t,e):e,search:J4(r),hash:eI(i)}}function K4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function im(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ug(n){let e=Q4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Fg(n,e,t,r=!1){let i;typeof n=="string"?i=cc(n):(i={...n},Zt(!i.pathname||!i.pathname.includes("?"),im("?","pathname","search",i)),Zt(!i.pathname||!i.pathname.includes("#"),im("#","pathname","hash",i)),Zt(!i.search||!i.search.includes("#"),im("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}c=g>=0?e[g]:"/"}let u=Y4(i,c),d=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}var Ba=n=>n.join("/").replace(/\/\/+/g,"/"),Z4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),J4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Rb=["POST","PUT","PATCH","DELETE"];new Set(Rb);var nI=["GET",...Rb];new Set(nI);var uc=k.createContext(null);uc.displayName="DataRouter";var y0=k.createContext(null);y0.displayName="DataRouterState";var Ob=k.createContext({isTransitioning:!1});Ob.displayName="ViewTransition";var rI=k.createContext(new Map);rI.displayName="Fetchers";var iI=k.createContext(null);iI.displayName="Await";var Ci=k.createContext(null);Ci.displayName="Navigation";var Ef=k.createContext(null);Ef.displayName="Location";var Ii=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ii.displayName="Route";var Hg=k.createContext(null);Hg.displayName="RouteError";function aI(n,{relative:e}={}){Zt(fc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=k.useContext(Ci),{hash:i,pathname:a,search:o}=bf(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Ba([t,a])),r.createHref({pathname:c,search:o,hash:i})}function fc(){return k.useContext(Ef)!=null}function Ni(){return Zt(fc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Ef).location}var Db="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pb(n){k.useContext(Ci).static||k.useLayoutEffect(n)}function Bn(){let{isDataRoute:n}=k.useContext(Ii);return n?yI():sI()}function sI(){Zt(fc(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(uc),{basename:e,navigator:t}=k.useContext(Ci),{matches:r}=k.useContext(Ii),{pathname:i}=Ni(),a=JSON.stringify(Ug(r)),o=k.useRef(!1);return Pb(()=>{o.current=!0}),k.useCallback((u,d={})=>{if(Ti(o.current,Db),!o.current)return;if(typeof u=="number"){t.go(u);return}let p=Fg(u,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ba([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,a,i,n])}k.createContext(null);function Mb(){let{matches:n}=k.useContext(Ii),e=n[n.length-1];return e?e.params:{}}function bf(n,{relative:e}={}){let{matches:t}=k.useContext(Ii),{pathname:r}=Ni(),i=JSON.stringify(Ug(t));return k.useMemo(()=>Fg(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function oI(n,e){return kb(n,e)}function kb(n,e,t,r){var I;Zt(fc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=k.useContext(Ci),{matches:a}=k.useContext(Ii),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",p=o&&o.route;{let N=p&&p.path||"";Lb(u,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let g=Ni(),x;if(e){let N=typeof e=="string"?cc(e):e;Zt(d==="/"||((I=N.pathname)==null?void 0:I.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=g;let _=x.pathname||"/",E=_;if(d!=="/"){let N=d.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let A=Cb(n,{pathname:E});Ti(p||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ti(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=dI(A&&A.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Ba([d,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?d:Ba([d,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,t,r);return e&&S?k.createElement(Ef.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},S):S}function lI(){let n=vI(),e=tI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,o)}var cI=k.createElement(lI,null),uI=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?k.createElement(Ii.Provider,{value:this.props.routeContext},k.createElement(Hg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fI({routeContext:n,match:e,children:t}){let r=k.useContext(uc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Ii.Provider,{value:n},t)}function dI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let u=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);Zt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,c=-1;if(t)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:g}=t,x=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||x){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,p)=>{let g,x=!1,_=null,E=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,_=d.route.errorElement||cI,o&&(c<0&&p===0?(Lb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,E=null):c===p&&(x=!0,E=d.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,p+1)),S=()=>{let I;return g?I=_:x?I=E:d.route.Component?I=k.createElement(d.route.Component,null):d.route.element?I=d.route.element:I=u,k.createElement(fI,{match:d,routeContext:{outlet:u,matches:A,isDataRoute:t!=null},children:I})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?k.createElement(uI,{location:t.location,revalidation:t.revalidation,component:_,error:g,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}function zg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hI(n){let e=k.useContext(uc);return Zt(e,zg(n)),e}function pI(n){let e=k.useContext(y0);return Zt(e,zg(n)),e}function mI(n){let e=k.useContext(Ii);return Zt(e,zg(n)),e}function Gg(n){let e=mI(n),t=e.matches[e.matches.length-1];return Zt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function gI(){return Gg("useRouteId")}function vI(){var r;let n=k.useContext(Hg),e=pI("useRouteError"),t=Gg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function yI(){let{router:n}=hI("useNavigate"),e=Gg("useNavigate"),t=k.useRef(!1);return Pb(()=>{t.current=!0}),k.useCallback(async(i,a={})=>{Ti(t.current,Db),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var O_={};function Lb(n,e,t){!e&&!O_[n]&&(O_[n]=!0,Ti(!1,t))}k.memo(xI);function xI({routes:n,future:e,state:t}){return kb(n,void 0,t,e)}function Xi({to:n,replace:e,state:t,relative:r}){Zt(fc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(Ci);Ti(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(Ii),{pathname:o}=Ni(),c=Bn(),u=Fg(n,Ug(a),o,r==="path"),d=JSON.stringify(u);return k.useEffect(()=>{c(JSON.parse(d),{replace:e,state:t,relative:r})},[c,d,r,e,t]),null}function Gt(n){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _I({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Zt(!fc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=cc(t));let{pathname:u="/",search:d="",hash:p="",state:g=null,key:x="default"}=t,_=k.useMemo(()=>{let E=Ha(u,o);return E==null?null:{location:{pathname:E,search:d,hash:p,state:g,key:x},navigationType:r}},[o,u,d,p,g,x,r]);return Ti(_!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:k.createElement(Ci.Provider,{value:c},k.createElement(Ef.Provider,{children:e,value:_}))}function wI({children:n,location:e}){return oI(Qm(n),e)}function Qm(n,e=[]){let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let a=[...e,i];if(r.type===k.Fragment){t.push.apply(t,Qm(r.props.children,a));return}Zt(r.type===Gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qm(r.props.children,a)),t.push(o)}),t}var bh="get",Ah="application/x-www-form-urlencoded";function x0(n){return n!=null&&typeof n.tagName=="string"}function EI(n){return x0(n)&&n.tagName.toLowerCase()==="button"}function bI(n){return x0(n)&&n.tagName.toLowerCase()==="form"}function AI(n){return x0(n)&&n.tagName.toLowerCase()==="input"}function SI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function TI(n,e){return n.button===0&&(!e||e==="_self")&&!SI(n)}var lh=null;function CI(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var II=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function am(n){return n!=null&&!II.has(n)?(Ti(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ah}"`),null):n}function NI(n,e){let t,r,i,a,o;if(bI(n)){let c=n.getAttribute("action");r=c?Ha(c,e):null,t=n.getAttribute("method")||bh,i=am(n.getAttribute("enctype"))||Ah,a=new FormData(n)}else if(EI(n)||AI(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?Ha(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||bh,i=am(n.getAttribute("formenctype"))||am(c.getAttribute("enctype"))||Ah,a=new FormData(c,n),!CI()){let{name:d,type:p,value:g}=n;if(p==="image"){let x=d?`${d}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else d&&a.append(d,g)}}else{if(x0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bh,r=null,i=Ah,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function qg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function RI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function DI(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await RI(a,t);return o.links?o.links():[]}return[]}));return LI(r.flat(1).filter(OI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function D_(n,e,t,r,i,a){let o=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>{var p;return t[d].pathname!==u.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{var g;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function PI(n,e,{includeHydrateFallback:t}={}){return MI(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function MI(n){return[...new Set(n)]}function kI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function LI(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(kI(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jI=new Set([100,101,204,205]);function BI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ha(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function jb(){let n=k.useContext(uc);return qg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function VI(){let n=k.useContext(y0);return qg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $g=k.createContext(void 0);$g.displayName="FrameworkContext";function Bb(){let n=k.useContext($g);return qg(n,"You must render this element inside a <HydratedRouter> element"),n}function UI(n,e){let t=k.useContext($g),[r,i]=k.useState(!1),[a,o]=k.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,x=k.useRef(null);k.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let A=I=>{I.forEach(N=>{o(N.isIntersecting)})},S=new IntersectionObserver(A,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[n]),k.useEffect(()=>{if(r){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[r]);let _=()=>{i(!0)},E=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:Mu(c,_),onBlur:Mu(u,E),onMouseEnter:Mu(d,_),onMouseLeave:Mu(p,E),onTouchStart:Mu(g,_)}]:[!1,x,{}]}function Mu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function FI({page:n,...e}){let{router:t}=jb(),r=k.useMemo(()=>Cb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?k.createElement(zI,{page:n,matches:r,...e}):null}function HI(n){let{manifest:e,routeModules:t}=Bb(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return DI(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function zI({page:n,matches:e,...t}){let r=Ni(),{manifest:i,routeModules:a}=Bb(),{basename:o}=jb(),{loaderData:c,matches:u}=VI(),d=k.useMemo(()=>D_(n,e,u,i,r,"data"),[n,e,u,i,r]),p=k.useMemo(()=>D_(n,e,u,i,r,"assets"),[n,e,u,i,r]),g=k.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,A=!1;if(e.forEach(I=>{var O;let N=i.routes[I.route.id];!N||!N.hasLoader||(!d.some(j=>j.route.id===I.route.id)&&I.route.id in c&&((O=a[I.route.id])!=null&&O.shouldRevalidate)||N.hasClientLoader?A=!0:E.add(I.route.id))}),E.size===0)return[];let S=BI(n,o);return A&&E.size>0&&S.searchParams.set("_routes",e.filter(I=>E.has(I.route.id)).map(I=>I.route.id).join(",")),[S.pathname+S.search]},[o,c,r,i,d,e,n,a]),x=k.useMemo(()=>PI(p,i),[p,i]),_=HI(p);return k.createElement(k.Fragment,null,g.map(E=>k.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),x.map(E=>k.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),_.map(({key:E,link:A})=>k.createElement("link",{key:E,...A})))}function GI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vb&&(window.__reactRouterVersion="7.6.1")}catch{}function qI({basename:n,children:e,window:t}){let r=k.useRef();r.current==null&&(r.current=D4({window:t,v5Compat:!0}));let i=r.current,[a,o]=k.useState({action:i.action,location:i.location}),c=k.useCallback(u=>{k.startTransition(()=>o(u))},[o]);return k.useLayoutEffect(()=>i.listen(c),[i,c]),k.createElement(_I,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Ub=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=k.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:p,viewTransition:g,...x},_){let{basename:E}=k.useContext(Ci),A=typeof d=="string"&&Ub.test(d),S,I=!1;if(typeof d=="string"&&A&&(S=d,Vb))try{let M=new URL(window.location.href),V=d.startsWith("//")?new URL(M.protocol+d):new URL(d),H=Ha(V.pathname,E);V.origin===M.origin&&H!=null?d=H+V.search+V.hash:I=!0}catch{Ti(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=aI(d,{relative:i}),[O,j,F]=UI(r,x),q=YI(d,{replace:o,state:c,target:u,preventScrollReset:p,relative:i,viewTransition:g});function P(M){e&&e(M),M.defaultPrevented||q(M)}let R=k.createElement("a",{...x,...F,href:S||N,onClick:I||a?e:P,ref:GI(_,j),target:u,"data-discover":!A&&t==="render"?"true":void 0});return O&&!A?k.createElement(k.Fragment,null,R,k.createElement(FI,{page:N})):R});gt.displayName="Link";var $I=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},p){let g=bf(o,{relative:d.relative}),x=Ni(),_=k.useContext(y0),{navigator:E,basename:A}=k.useContext(Ci),S=_!=null&&eN(g)&&c===!0,I=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,N=x.pathname,O=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(N=N.toLowerCase(),O=O?O.toLowerCase():null,I=I.toLowerCase()),O&&A&&(O=Ha(O,A)||O);const j=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let F=N===I||!i&&N.startsWith(I)&&N.charAt(j)==="/",q=O!=null&&(O===I||!i&&O.startsWith(I)&&O.charAt(I.length)==="/"),P={isActive:F,isPending:q,isTransitioning:S},R=F?e:void 0,M;typeof r=="function"?M=r(P):M=[r,F?"active":null,q?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(P):a;return k.createElement(gt,{...d,"aria-current":R,className:M,ref:p,style:V,to:o,viewTransition:c},typeof u=="function"?u(P):u)});$I.displayName="NavLink";var WI=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=bh,action:c,onSubmit:u,relative:d,preventScrollReset:p,viewTransition:g,...x},_)=>{let E=ZI(),A=JI(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",I=typeof c=="string"&&Ub.test(c),N=O=>{if(u&&u(O),O.defaultPrevented)return;O.preventDefault();let j=O.nativeEvent.submitter,F=(j==null?void 0:j.getAttribute("formmethod"))||o;E(j||O.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return k.createElement("form",{ref:_,method:S,action:A,onSubmit:r?u:N,...x,"data-discover":!I&&n==="render"?"true":void 0})});WI.displayName="Form";function XI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fb(n){let e=k.useContext(uc);return Zt(e,XI(n)),e}function YI(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Bn(),u=Ni(),d=bf(n,{relative:a});return k.useCallback(p=>{if(TI(p,e)){p.preventDefault();let g=t!==void 0?t:af(u)===af(d);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,t,r,e,n,i,a,o])}var KI=0,QI=()=>`__${String(++KI)}__`;function ZI(){let{router:n}=Fb("useSubmit"),{basename:e}=k.useContext(Ci),t=gI();return k.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=NI(r,e);if(i.navigate===!1){let p=i.fetcherKey||QI();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function JI(n,{relative:e}={}){let{basename:t}=k.useContext(Ci),r=k.useContext(Ii);Zt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...bf(n||".",{relative:e})},o=Ni();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ba([t,a.pathname])),af(a)}function eN(n,e={}){let t=k.useContext(Ob);Zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Fb("useViewTransitionState"),i=bf(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Ha(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ha(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Uh(i.pathname,o)!=null||Uh(i.pathname,a)!=null}[...jI];const tN=()=>{};var P_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},nN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},zb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,p=a>>2,g=(a&3)<<4|c>>4;let x=(c&15)<<2|d>>6,_=d&63;u||(_=64,o||(x=64)),r.push(t[p],t[g],t[x],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new rN;const x=a<<2|c>>4;if(r.push(x),d!==64){const _=c<<4&240|d>>2;if(r.push(_),g!==64){const E=d<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iN=function(n){const e=Hb(n);return zb.encodeByteArray(e,!0)},Fh=function(n){return iN(n).replace(/\./g,"")},Gb=function(n){try{return zb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=()=>aN().__FIREBASE_DEFAULTS__,oN=()=>{if(typeof process>"u"||typeof P_>"u")return;const n=P_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gb(n[1]);return e&&JSON.parse(e)},_0=()=>{try{return tN()||sN()||oN()||lN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qb=n=>{var e,t;return(t=(e=_0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},cN=n=>{const e=qb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$b=()=>{var n;return(n=_0())===null||n===void 0?void 0:n.config},Wb=n=>{var e;return(e=_0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n){return n.endsWith(".cloudworkstations.dev")}async function Xb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fh(JSON.stringify(t)),Fh(JSON.stringify(o)),""].join(".")}const Yu={};function dN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yu))Yu[e]?n.emulator.push(e):n.prod.push(e);return n}function hN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let M_=!1;function Yb(n,e){if(typeof window>"u"||typeof document>"u"||!Af(window.location.host)||Yu[n]===e||Yu[n]||M_)return;Yu[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=dN().prod.length>0;function o(){const x=document.getElementById(r);x&&x.remove()}function c(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function u(x,_){x.setAttribute("width","24"),x.setAttribute("id",_),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function d(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{M_=!0,o()},x}function p(x,_){x.setAttribute("id",_),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function g(){const x=hN(r),_=t("text"),E=document.getElementById(_)||document.createElement("span"),A=t("learnmore"),S=document.getElementById(A)||document.createElement("a"),I=t("preprendIcon"),N=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const O=x.element;c(O),p(S,A);const j=d();u(N,I),O.append(N,E,S,j),document.body.appendChild(O)}a?(E.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pr())}function mN(){var n;const e=(n=_0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xN(){const n=pr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _N(){return!mN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wN(){try{return typeof indexedDB=="object"}catch{return!1}}function EN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="FirebaseError";class Xa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=bN,Object.setPrototypeOf(this,Xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sf.prototype.create)}}class Sf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?AN(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Xa(i,c,r)}}function AN(n,e){return n.replace(SN,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const SN=/\{\$([^}]+)}/g;function TN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(k_(a)&&k_(o)){if(!Lo(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function k_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Fu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function CN(n,e){const t=new IN(n,e);return t.subscribe.bind(t)}class IN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");NN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sm),i.error===void 0&&(i.error=sm),i.complete===void 0&&(i.complete=sm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n){return n&&n._delegate?n._delegate:n}class jo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DN(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ON(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ON(n){return n===So?void 0:n}function DN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new RN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(at||(at={}));const MN={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},kN=at.INFO,LN={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},jN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=LN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wg{constructor(e){this.name=e,this._logLevel=kN,this._logHandler=jN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const BN=(n,e)=>e.some(t=>n instanceof t);let L_,j_;function VN(){return L_||(L_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UN(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kb=new WeakMap,Zm=new WeakMap,Qb=new WeakMap,om=new WeakMap,Xg=new WeakMap;function FN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Rs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Kb.set(t,n)}).catch(()=>{}),Xg.set(e,n),e}function HN(n){if(Zm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Zm.set(n,e)}let Jm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Qb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zN(n){Jm=n(Jm)}function GN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(lm(this),e,...t);return Qb.set(r,e.sort?e.sort():[e]),Rs(r)}:UN().includes(n)?function(...e){return n.apply(lm(this),e),Rs(Kb.get(this))}:function(...e){return Rs(n.apply(lm(this),e))}}function qN(n){return typeof n=="function"?GN(n):(n instanceof IDBTransaction&&HN(n),BN(n,VN())?new Proxy(n,Jm):n)}function Rs(n){if(n instanceof IDBRequest)return FN(n);if(om.has(n))return om.get(n);const e=qN(n);return e!==n&&(om.set(n,e),Xg.set(e,n)),e}const lm=n=>Xg.get(n);function $N(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Rs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Rs(o.result),u.oldVersion,u.newVersion,Rs(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const WN=["get","getKey","getAll","getAllKeys","count"],XN=["put","add","delete","clear"],cm=new Map;function B_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cm.get(e))return cm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=XN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WN.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return cm.set(e,a),a}zN(n=>({...n,get:(e,t,r)=>B_(e,t)||n.get(e,t,r),has:(e,t)=>!!B_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(KN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function KN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eg="@firebase/app",V_="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Wg("@firebase/app"),QN="@firebase/app-compat",ZN="@firebase/analytics-compat",JN="@firebase/analytics",e6="@firebase/app-check-compat",t6="@firebase/app-check",n6="@firebase/auth",r6="@firebase/auth-compat",i6="@firebase/database",a6="@firebase/data-connect",s6="@firebase/database-compat",o6="@firebase/functions",l6="@firebase/functions-compat",c6="@firebase/installations",u6="@firebase/installations-compat",f6="@firebase/messaging",d6="@firebase/messaging-compat",h6="@firebase/performance",p6="@firebase/performance-compat",m6="@firebase/remote-config",g6="@firebase/remote-config-compat",v6="@firebase/storage",y6="@firebase/storage-compat",x6="@firebase/firestore",_6="@firebase/ai",w6="@firebase/firestore-compat",E6="firebase",b6="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="[DEFAULT]",A6={[eg]:"fire-core",[QN]:"fire-core-compat",[JN]:"fire-analytics",[ZN]:"fire-analytics-compat",[t6]:"fire-app-check",[e6]:"fire-app-check-compat",[n6]:"fire-auth",[r6]:"fire-auth-compat",[i6]:"fire-rtdb",[a6]:"fire-data-connect",[s6]:"fire-rtdb-compat",[o6]:"fire-fn",[l6]:"fire-fn-compat",[c6]:"fire-iid",[u6]:"fire-iid-compat",[f6]:"fire-fcm",[d6]:"fire-fcm-compat",[h6]:"fire-perf",[p6]:"fire-perf-compat",[m6]:"fire-rc",[g6]:"fire-rc-compat",[v6]:"fire-gcs",[y6]:"fire-gcs-compat",[x6]:"fire-fst",[w6]:"fire-fst-compat",[_6]:"fire-vertex","fire-js":"fire-js",[E6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new Map,S6=new Map,ng=new Map;function U_(n,e){try{n.container.addComponent(e)}catch(t){za.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zl(n){const e=n.name;if(ng.has(e))return za.debug(`There were multiple attempts to register component ${e}.`),!1;ng.set(e,n);for(const t of Hh.values())U_(t,n);for(const t of S6.values())U_(t,n);return!0}function Yg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new Sf("app","Firebase",T6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=b6;function Zb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Os.create("bad-app-name",{appName:String(i)});if(t||(t=$b()),!t)throw Os.create("no-options");const a=Hh.get(i);if(a){if(Lo(t,a.options)&&Lo(r,a.config))return a;throw Os.create("duplicate-app",{appName:i})}const o=new PN(i);for(const u of ng.values())o.addComponent(u);const c=new C6(t,r,o);return Hh.set(i,c),c}function Jb(n=tg){const e=Hh.get(n);if(!e&&n===tg&&$b())return Zb();if(!e)throw Os.create("no-app",{appName:n});return e}function Ds(n,e,t){var r;let i=(r=A6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),za.warn(c.join(" "));return}Zl(new jo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="firebase-heartbeat-database",N6=1,sf="firebase-heartbeat-store";let um=null;function eA(){return um||(um=$N(I6,N6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Os.create("idb-open",{originalErrorMessage:n.message})})),um}async function R6(n){try{const t=(await eA()).transaction(sf),r=await t.objectStore(sf).get(tA(n));return await t.done,r}catch(e){if(e instanceof Xa)za.warn(e.message);else{const t=Os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});za.warn(t.message)}}}async function F_(n,e){try{const r=(await eA()).transaction(sf,"readwrite");await r.objectStore(sf).put(e,tA(n)),await r.done}catch(t){if(t instanceof Xa)za.warn(t.message);else{const r=Os.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});za.warn(r.message)}}}function tA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=1024,D6=30;class P6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new k6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=H_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>D6){const o=L6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){za.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=H_(),{heartbeatsToSend:r,unsentEntries:i}=M6(this._heartbeatsCache.heartbeats),a=Fh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return za.warn(t),""}}}function H_(){return new Date().toISOString().substring(0,10)}function M6(n,e=O6){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),z_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),z_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class k6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wN()?EN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await R6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return F_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return F_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function z_(n){return Fh(JSON.stringify({version:2,heartbeats:n})).length}function L6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(n){Zl(new jo("platform-logger",e=>new YN(e),"PRIVATE")),Zl(new jo("heartbeat",e=>new P6(e),"PRIVATE")),Ds(eg,V_,n),Ds(eg,V_,"esm2017"),Ds("fire-js","")}j6("");var B6="firebase",V6="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(B6,V6,"app");function Kg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={PHONE:"phone",TOTP:"totp"},F6={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H6={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},z6={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},G6={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function nA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $6=q6,rA=nA,iA=new Sf("auth","Firebase",nA()),W6={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Wg("@firebase/auth");function X6(n,...e){zh.logLevel<=at.WARN&&zh.warn(`Auth (${hc}): ${n}`,...e)}function Sh(n,...e){zh.logLevel<=at.ERROR&&zh.error(`Auth (${hc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n,...e){throw Zg(n,...e)}function Sr(n,...e){return Zg(n,...e)}function Qg(n,e,t){const r=Object.assign(Object.assign({},rA()),{[e]:t});return new Sf("auth","Firebase",r).create(e,{appName:n.name})}function Yn(n){return Qg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pc(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&jr(n,"argument-error"),Qg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iA.create(n,...e)}function ge(n,e,...t){if(!n)throw Zg(e,...t)}function Ki(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sh(e),new Error(e)}function Ga(n,e){n||Ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Jg(){return G_()==="http:"||G_()==="https:"}function G_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jg()||vN()||"connection"in navigator)?navigator.onLine:!0}function K6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ga(t>e,"Short delay should be less than long delay!"),this.isMobile=pN()||yN()}get(){return Y6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n,e){Ga(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J6=new Tf(3e4,6e4);function Wt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xt(n,e,t,r,i={}){return sA(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=dc(Object.assign({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:u},a);return gN()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Af(n.emulatorConfig.host)&&(d.credentials="include"),aA.fetch()(await oA(n,n.config.apiHost,t,c),d)})}async function sA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Q6),e);try{const i=new tR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Hu(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Hu(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Hu(n,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Qg(n,p,d);jr(n,p)}}catch(i){if(i instanceof Xa)throw i;jr(n,"network-request-failed",{message:String(i)})}}async function Ya(n,e,t,r,i={}){const a=await Xt(n,e,t,r,i);return"mfaPendingCredential"in a&&jr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function oA(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?ev(n.config,i):`${n.config.apiScheme}://${i}`;return Z6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function eR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),J6.get())})}}function Hu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Sr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(n){return n!==void 0&&n.getResponse!==void 0}function $_(n){return n!==void 0&&n.enterprise!==void 0}class lA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(n){return(await Xt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function cA(n,e){return Xt(n,"GET","/v2/recaptchaConfig",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(n,e){return Xt(n,"POST","/v1/accounts:delete",e)}async function iR(n,e){return Xt(n,"POST","/v1/accounts:update",e)}async function Gh(n,e){return Xt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n,e=!1){return qe(n).getIdToken(e)}async function uA(n,e=!1){const t=qe(n),r=await t.getIdToken(e),i=w0(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Ku(fm(i.auth_time)),issuedAtTime:Ku(fm(i.iat)),expirationTime:Ku(fm(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function fm(n){return Number(n)*1e3}function w0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Sh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gb(t);return i?JSON.parse(i):(Sh("Failed to decode base64 JWT payload"),null)}catch(i){return Sh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function W_(n){const e=w0(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xa&&sR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function sR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await qa(n,Gh(t,{idToken:r}));ge(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?dA(a.providerUserInfo):[],c=lR(n.providerData,o),u=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),p=u?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new rg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function fA(n){const e=qe(n);await lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dA(n){return n.map(e=>{var{providerId:t}=e,r=Kg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(n,e){const t=await sA(n,{},async()=>{const r=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await oA(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",aA.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uR(n,e){return Xt(n,"POST","/v2/accounts:revokeToken",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const t=W_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await cR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new Wl;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ge(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ai{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await qa(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uA(this,e)}reload(){return fA(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(Yn(this.auth));const e=await this.getIdToken();return await qa(this,rR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,c,u,d,p;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(i=t.email)!==null&&i!==void 0?i:void 0,_=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,A=(c=t.tenantId)!==null&&c!==void 0?c:void 0,S=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,I=(d=t.createdAt)!==null&&d!==void 0?d:void 0,N=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:O,emailVerified:j,isAnonymous:F,providerData:q,stsTokenManager:P}=t;ge(O&&P,e,"internal-error");const R=Wl.fromJSON(this.name,P);ge(typeof O=="string",e,"internal-error"),Ss(g,e.name),Ss(x,e.name),ge(typeof j=="boolean",e,"internal-error"),ge(typeof F=="boolean",e,"internal-error"),Ss(_,e.name),Ss(E,e.name),Ss(A,e.name),Ss(S,e.name),Ss(I,e.name),Ss(N,e.name);const M=new Ai({uid:O,auth:e,email:x,emailVerified:j,displayName:g,isAnonymous:F,photoURL:E,phoneNumber:_,tenantId:A,stsTokenManager:R,createdAt:I,lastLoginAt:N});return q&&Array.isArray(q)&&(M.providerData=q.map(V=>Object.assign({},V))),S&&(M._redirectEventId=S),M}static async _fromIdTokenResponse(e,t,r=!1){const i=new Wl;i.updateFromServerResponse(t);const a=new Ai({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lf(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ge(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?dA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Wl;c.updateFromIdToken(r);const u=new Ai({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new rg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;function La(n){Ga(n instanceof Function,"Expected a class definition");let e=X_.get(n);return e?(Ga(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,X_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hA.type="NONE";const ig=hA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(n,e,t){return`firebase:${n}:${e}:${t}`}class Xl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Th(this.userKey,i.apiKey,a),this.fullPersistenceKey=Th("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gh(this.auth,{idToken:e}).catch(()=>{});return t?Ai._fromGetAccountInfoResponse(this.auth,t,e):null}return Ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xl(La(ig),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||La(ig);const o=Th(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const p=await d._get(o);if(p){let g;if(typeof p=="string"){const x=await Gh(e,{idToken:p}).catch(()=>{});if(!x)break;g=await Ai._fromGetAccountInfoResponse(e,x,p)}else g=Ai._fromJSON(e,p);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Xl(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Xl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xA(e))return"Blackberry";if(_A(e))return"Webos";if(mA(e))return"Safari";if((e.includes("chrome/")||gA(e))&&!e.includes("edge/"))return"Chrome";if(yA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pA(n=pr()){return/firefox\//i.test(n)}function mA(n=pr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gA(n=pr()){return/crios\//i.test(n)}function vA(n=pr()){return/iemobile/i.test(n)}function yA(n=pr()){return/android/i.test(n)}function xA(n=pr()){return/blackberry/i.test(n)}function _A(n=pr()){return/webos/i.test(n)}function tv(n=pr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fR(n=pr()){var e;return tv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dR(){return xN()&&document.documentMode===10}function wA(n=pr()){return tv(n)||yA(n)||_A(n)||xA(n)||/windows phone/i.test(n)||vA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n,e=[]){let t;switch(n){case"Browser":t=Y_(pr());break;case"Worker":t=`${Y_(pr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(n,e={}){return Xt(n,"GET","/v2/passwordPolicy",Wt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=6;class gR{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:mR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new hR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=La(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gh(this,{idToken:e}),r=await Ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(Yn(this));const t=e?qe(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(Yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(Yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(La(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pR(this),t=new gR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await uR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&La(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[La(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&X6(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function cn(n){return qe(n)}class K_{constructor(e){this.auth=e,this.observer=null,this.addObserver=CN(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yR(n){Cf=n}function nv(n){return Cf.loadJS(n)}function xR(){return Cf.recaptchaV2Script}function _R(){return Cf.recaptchaEnterpriseScript}function wR(){return Cf.gapiScript}function bA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=500,bR=6e4,ch=1e12;class AR{constructor(e){this.auth=e,this.counter=ch,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new CR(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||ch;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||ch;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||ch;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class SR{constructor(){this.enterprise=new TR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class CR{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ge(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=IR(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},bR)},ER))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function IR(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const NR="recaptcha-enterprise",Qu="NO_RECAPTCHA";class AA{constructor(e){this.type=NR,this.auth=cn(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{cA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new lA(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;$_(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(Qu)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SR().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&$_(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=_R();u.length!==0&&(u+=c),nv(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function ku(n,e,t,r=!1,i=!1){const a=new AA(n);let o;if(i)o=Qu;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ps(n,e,t,r,i){var a,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ku(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ku(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await ku(n,e,t);return r(n,c).catch(async u=>{var d;if(((d=n._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await ku(n,e,t,!1,!0);return r(n,p)}return Promise.reject(u)})}else{const c=await ku(n,e,t,!1,!0);return r(n,c)}else return Promise.reject(i+" provider is not supported.")}async function SA(n){const e=cn(n),t=await cA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lA(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new AA(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n,e){const t=Yg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Lo(a,e??{}))return i;jr(i,"already-initialized")}return t.initialize({options:e})}function RR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(La);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CA(n,e,t){const r=cn(n);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),a=IA(e),{host:o,port:c}=OR(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(Lo(d,r.config.emulator)&&Lo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Af(o)?(Xb(`${a}//${o}${u}`),Yb("Auth",!0)):i||DR()}function IA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OR(n){const e=IA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Q_(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Q_(o)}}}function Q_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function DR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,t){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(n,e){return Xt(n,"POST","/v1/accounts:resetPassword",Wt(n,e))}async function PR(n,e){return Xt(n,"POST","/v1/accounts:update",e)}async function MR(n,e){return Xt(n,"POST","/v1/accounts:signUp",e)}async function kR(n,e){return Xt(n,"POST","/v1/accounts:update",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(n,e){return Ya(n,"POST","/v1/accounts:signInWithPassword",Wt(n,e))}async function E0(n,e){return Xt(n,"POST","/v1/accounts:sendOobCode",Wt(n,e))}async function jR(n,e){return E0(n,e)}async function BR(n,e){return E0(n,e)}async function VR(n,e){return E0(n,e)}async function UR(n,e){return E0(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e){return Ya(n,"POST","/v1/accounts:signInWithEmailLink",Wt(n,e))}async function HR(n,e){return Ya(n,"POST","/v1/accounts:signInWithEmailLink",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends mc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Jl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Jl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ps(e,t,"signInWithPassword",LR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return FR(e,{email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ps(e,r,"signUpPassword",MR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return HR(e,{idToken:t,email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n,e){return Ya(n,"POST","/v1/accounts:signInWithIdp",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="http://localhost";class ea extends mc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Kg(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ea(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Va(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Va(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}buildRequest(){const e={requestUri:zR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z_(n,e){return Xt(n,"POST","/v1/accounts:sendVerificationCode",Wt(n,e))}async function GR(n,e){return Ya(n,"POST","/v1/accounts:signInWithPhoneNumber",Wt(n,e))}async function qR(n,e){const t=await Ya(n,"POST","/v1/accounts:signInWithPhoneNumber",Wt(n,e));if(t.temporaryProof)throw Hu(n,"account-exists-with-different-credential",t);return t}const $R={USER_NOT_FOUND:"user-not-found"};async function WR(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ya(n,"POST","/v1/accounts:signInWithPhoneNumber",Wt(n,t),$R)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends mc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ms({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ms({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return GR(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return qR(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return WR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new Ms({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YR(n){const e=Uu(Fu(n)).link,t=e?Uu(Fu(e)).deep_link_id:null,r=Uu(Fu(n)).deep_link_id;return(r?Uu(Fu(r)).link:null)||r||t||e||n}class gc{constructor(e){var t,r,i,a,o,c;const u=Uu(Fu(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,g=XR((i=u.mode)!==null&&i!==void 0?i:null);ge(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=YR(e);try{return new gc(t)}catch{return null}}}function KR(n){return gc.parseLink(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.providerId=qs.PROVIDER_ID}static credential(e,t){return Jl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=gc.parseLink(t);return ge(r,"argument-error"),Jl._fromEmailAndCode(e,r.code,r.tenantId)}}qs.PROVIDER_ID="password";qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Ka{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zu extends vc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ge("providerId"in t&&"signInMethod"in t,"argument-error"),ea._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ge(e.idToken||e.accessToken,"argument-error"),ea._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Zu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Zu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:o,providerId:c}=e;if(!r&&!i&&!t&&!a||!c)return null;try{return new Zu(c)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends vc{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Da.credentialFromTaggedObject(e)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Da.credential(e.oauthAccessToken)}catch{return null}}}Da.FACEBOOK_SIGN_IN_METHOD="facebook.com";Da.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ea._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pa.credentialFromTaggedObject(e)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Pa.credential(t,r)}catch{return null}}}Pa.GOOGLE_SIGN_IN_METHOD="google.com";Pa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends vc{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ma.credentialFromTaggedObject(e)}static credentialFromError(e){return Ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ma.credential(e.oauthAccessToken)}catch{return null}}}Ma.GITHUB_SIGN_IN_METHOD="github.com";Ma.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="http://localhost";class cf extends mc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Va(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Va(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new cf(r,a)}static _create(e,t){return new cf(e,t)}buildRequest(){return{requestUri:QR,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="saml.";class qh extends Ka{constructor(e){ge(e.startsWith(ZR),"argument-error"),super(e)}static credentialFromResult(e){return qh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return qh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=cf.fromJSON(e);return ge(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return cf._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends vc{constructor(){super("twitter.com")}static credential(e,t){return ea._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ka.credential(t,r)}catch{return null}}}ka.TWITTER_SIGN_IN_METHOD="twitter.com";ka.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(n,e){return Ya(n,"POST","/v1/accounts:signUp",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ai._fromIdTokenResponse(e,r,i),o=J_(r);return new di({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=J_(r);return new di({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function J_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n){var e;if(rn(n.app))return Promise.reject(Yn(n));const t=cn(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new di({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await RA(t,{returnSecureToken:!0}),i=await di._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Xa{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new $h(e,t,r,i)}}function OA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(n,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(n,e){const t=qe(n);await b0(!0,t,e);const{providerUserInfo:r}=await iR(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=DA(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function rv(n,e,t=!1){const r=await qa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return di._forOperation(n,"link",r)}async function b0(n,e,t){await lf(e);const r=DA(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";ge(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n,e,t=!1){const{auth:r}=n;if(rn(r.app))return Promise.reject(Yn(r));const i="reauthenticate";try{const a=await qa(n,OA(r,i,e,n),t);ge(a.idToken,r,"internal-error");const o=w0(a.idToken);ge(o,r,"internal-error");const{sub:c}=o;return ge(n.uid===c,r,"user-mismatch"),di._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&jr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(n,e,t=!1){if(rn(n.app))return Promise.reject(Yn(n));const r="signIn",i=await OA(n,r,e),a=await di._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function A0(n,e){return MA(cn(n),e)}async function kA(n,e){const t=qe(n);return await b0(!1,t,e.providerId),rv(t,e)}async function LA(n,e){return PA(qe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(n,e){return Ya(n,"POST","/v1/accounts:signInWithCustomToken",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(n,e){if(rn(n.app))return Promise.reject(Yn(n));const t=cn(n),r=await t8(t,{token:e,returnSecureToken:!0}),i=await di._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?iv._fromServerResponse(e,t):"totpInfo"in t?av._fromServerResponse(e,t):jr(e,"internal-error")}}class iv extends If{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new iv(t)}}class av extends If{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new av(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(n,e,t){var r;ge(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),ge(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ge(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ge(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ge(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sv(n){const e=cn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jA(n,e,t){const r=cn(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&S0(r,i,t),await Ps(r,i,"getOobCode",BR,"EMAIL_PASSWORD_PROVIDER")}async function r8(n,e,t){await NA(qe(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sv(n),r})}async function i8(n,e){await kR(qe(n),{oobCode:e})}async function BA(n,e){const t=qe(n),r=await NA(t,{oobCode:e}),i=r.requestType;switch(ge(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ge(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ge(r.mfaInfo,t,"internal-error");default:ge(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=If._fromServerResponse(cn(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function a8(n,e){const{data:t}=await BA(qe(n),e);return t.email}async function VA(n,e,t){if(rn(n.app))return Promise.reject(Yn(n));const r=cn(n),o=await Ps(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RA,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&sv(n),u}),c=await di._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function UA(n,e,t){return rn(n.app)?Promise.reject(Yn(n)):A0(qe(n),qs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s8(n,e,t){const r=cn(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,c){ge(c.handleCodeInApp,r,"argument-error"),c&&S0(r,o,c)}a(i,t),await Ps(r,i,"getOobCode",VR,"EMAIL_PASSWORD_PROVIDER")}function o8(n,e){const t=gc.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function l8(n,e,t){if(rn(n.app))return Promise.reject(Yn(n));const r=qe(n),i=qs.credentialWithLink(e,t||of());return ge(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),A0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(n,e){return Xt(n,"POST","/v1/accounts:createAuthUri",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8(n,e){const t=Jg()?of():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await c8(qe(n),r);return i||[]}async function FA(n,e){const t=qe(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&S0(t.auth,i,e);const{email:a}=await jR(t.auth,i);a!==n.email&&await n.reload()}async function f8(n,e,t){const r=qe(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&S0(r.auth,a,t);const{email:o}=await UR(r.auth,a);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(n,e){return Xt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=qe(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await qa(r,d8(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function p8(n,e){const t=qe(n);return rn(t.auth.app)?Promise.reject(Yn(t.auth)):HA(t,e,null)}function m8(n,e){return HA(qe(n),null,e)}async function HA(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const o=await qa(n,PR(r,a));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=w0(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const c=o!=="anonymous"&&o!=="custom"?o:null;return new Yl(a,c)}}if(!r)return null;switch(r){case"facebook.com":return new v8(a,i);case"github.com":return new y8(a,i);case"google.com":return new x8(a,i);case"twitter.com":return new _8(a,i,n.screenName||null);case"custom":case"anonymous":return new Yl(a,null);default:return new Yl(a,r,i)}}class Yl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class zA extends Yl{constructor(e,t,r,i){super(e,t,r),this.username=i}}class v8 extends Yl{constructor(e,t){super(e,"facebook.com",t)}}class y8 extends zA{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class x8 extends Yl{constructor(e,t){super(e,"google.com",t)}}class _8 extends zA{constructor(e,t,r){super(e,"twitter.com",t,r)}}function w8(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:g8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(n,e){return qe(n).setPersistence(e)}function b8(n){return SA(n)}async function A8(n,e){return cn(n).validatePassword(e)}function GA(n,e,t,r){return qe(n).onIdTokenChanged(e,t,r)}function qA(n,e,t){return qe(n).beforeAuthStateChanged(e,t)}function $A(n,e,t,r){return qe(n).onAuthStateChanged(e,t,r)}function S8(n){qe(n).useDeviceLanguage()}function T8(n,e){return qe(n).updateCurrentUser(e)}function WA(n){return qe(n).signOut()}function C8(n,e){return cn(n).revokeAccessToken(e)}async function I8(n){return qe(n).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Co("enroll",e,t)}static _fromMfaPendingCredential(e){return new Co("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Co._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Co._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=cn(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(c=>If._fromServerResponse(r,c));ge(i.mfaPendingCredential,r,"internal-error");const o=Co._fromMfaPendingCredential(i.mfaPendingCredential);return new ov(o,a,async c=>{const u=await c._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const d=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(t.operationType){case"signIn":const p=await di._fromIdTokenResponse(r,t.operationType,d);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return ge(t.user,r,"internal-error"),di._forOperation(t.user,t.operationType,d);default:jr(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function N8(n,e){var t;const r=qe(n),i=e;return ge(e.customData.operationType,r,"argument-error"),ge((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),ov._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n,e){return Xt(n,"POST","/v2/accounts/mfaEnrollment:start",Wt(n,e))}function R8(n,e){return Xt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(n,e))}function O8(n,e){return Xt(n,"POST","/v2/accounts/mfaEnrollment:start",Wt(n,e))}function D8(n,e){return Xt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(n,e))}function P8(n,e){return Xt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(n,e))}class lv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>If._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new lv(e)}async getSession(){return Co._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await qa(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await qa(this.user,P8(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const dm=new WeakMap;function M8(n){const e=qe(n);return dm.has(e)||dm.set(e,lv._fromUser(e)),dm.get(e)}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=1e3,L8=10;class YA extends XA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);dR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,L8):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},k8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}YA.type="LOCAL";const KA=YA;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=1e3;function hm(n){var e,t;const r=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return(t=(e=document.cookie.match(i))===null||e===void 0?void 0:e[1])!==null&&t!==void 0?t:null}function pm(n){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${n.split(":")[3]}`}class QA{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:(e=navigator.cookieEnabled)!==null&&e!==void 0?e:!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=pm(e);if(window.cookieStore){const r=await window.cookieStore.get(t);return r==null?void 0:r.value}return hm(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=pm(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const r=pm(e);if(window.cookieStore){const c=d=>{const p=d.changed.find(x=>x.name===r);p&&t(p.value),d.deleted.find(x=>x.name===r)&&t(null)},u=()=>window.cookieStore.removeEventListener("change",c);return this.listenerUnsubscribes.set(t,u),window.cookieStore.addEventListener("change",c)}let i=hm(r);const a=setInterval(()=>{const c=hm(r);c!==i&&(t(c),i=c)},j8),o=()=>clearInterval(a);this.listenerUnsubscribes.set(t,o)}_removeListener(e,t){const r=this.listenerUnsubscribes.get(t);r&&(r(),this.listenerUnsubscribes.delete(t))}}QA.type="COOKIE";const B8=QA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA extends XA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZA.type="SESSION";const cv=ZA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new T0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(t.origin,a)),u=await V8(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}T0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=C0("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const x=g;if(x.data.eventId===d)switch(x.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(x.data.response);break;default:clearTimeout(p),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function F8(n){wn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function H8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function G8(){return uv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="firebaseLocalStorageDb",q8=1,Xh="firebaseLocalStorage",eS="fbase_key";class Nf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function I0(n,e){return n.transaction([Xh],e?"readwrite":"readonly").objectStore(Xh)}function $8(){const n=indexedDB.deleteDatabase(JA);return new Nf(n).toPromise()}function ag(){const n=indexedDB.open(JA,q8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Xh,{keyPath:eS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Xh)?e(r):(r.close(),await $8(),e(await ag()))})})}async function tw(n,e,t){const r=I0(n,!0).put({[eS]:e,value:t});return new Nf(r).toPromise()}async function W8(n,e){const t=I0(n,!1).get(e),r=await new Nf(t).toPromise();return r===void 0?null:r.value}function nw(n,e){const t=I0(n,!0).delete(e);return new Nf(t).toPromise()}const X8=800,Y8=3;class tS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ag(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Y8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=T0._getInstance(G8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await H8(),!this.activeServiceWorker)return;this.sender=new U8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ag();return await tw(e,Wh,"1"),await nw(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>W8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=I0(i,!1).getAll();return new Nf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tS.type="LOCAL";const nS=tS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n,e){return Xt(n,"POST","/v2/accounts/mfaSignIn:start",Wt(n,e))}function K8(n,e){return Xt(n,"POST","/v2/accounts/mfaSignIn:finalize",Wt(n,e))}function Q8(n,e){return Xt(n,"POST","/v2/accounts/mfaSignIn:finalize",Wt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=bA("rcb"),Z8=new Tf(3e4,6e4);class J8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=wn().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ge(eO(t),e,"argument-error"),this.shouldResolveImmediately(t)&&q_(wn().grecaptcha)?Promise.resolve(wn().grecaptcha):new Promise((r,i)=>{const a=wn().setTimeout(()=>{i(Sr(e,"network-request-failed"))},Z8.get());wn()[mm]=()=>{wn().clearTimeout(a),delete wn()[mm];const c=wn().grecaptcha;if(!c||!q_(c)){i(Sr(e,"internal-error"));return}const u=c.render;c.render=(d,p)=>{const g=u(d,p);return this.counter++,g},this.hostLanguage=t,r(c)};const o=`${xR()}?${dc({onload:mm,render:"explicit",hl:t})}`;nv(o).catch(()=>{clearTimeout(a),i(Sr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=wn().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function eO(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class tO{async load(e){return new AR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="recaptcha",nO={theme:"light",type:"image"};class rO{constructor(e,t,r=Object.assign({},nO)){this.parameters=r,this.type=Ju,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(e),this.isInvisible=this.parameters.size==="invisible",ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;ge(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tO:new J8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=wn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ge(Jg()&&!uv(),this.auth,"internal-error"),await iO(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await nR(this.auth);ge(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function iO(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ms._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function aO(n,e,t){if(rn(n.app))return Promise.reject(Yn(n));const r=cn(n),i=await N0(r,e,qe(t));return new fv(i,a=>A0(r,a))}async function sO(n,e,t){const r=qe(n);await b0(!1,r,"phone");const i=await N0(r.auth,e,qe(t));return new fv(i,a=>kA(r,a))}async function oO(n,e,t){const r=qe(n);if(rn(r.auth.app))return Promise.reject(Yn(r.auth));const i=await N0(r.auth,e,qe(t));return new fv(i,a=>LA(r,a))}async function N0(n,e,t){var r;if(!n._getRecaptchaConfig())try{await SA(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i){ge(a.type==="enroll",n,"internal-error");const o={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ps(n,o,"mfaSmsEnrollment",async(p,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Qu){ge((t==null?void 0:t.type)===Ju,p,"argument-error");const x=await gm(p,g,t);return ew(p,x)}return ew(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{ge(a.type==="signin",n,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;ge(o,n,"missing-multi-factor-info");const c={mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ps(n,c,"mfaSmsSignIn",async(g,x)=>{if(x.phoneSignInInfo.captchaResponse===Qu){ge((t==null?void 0:t.type)===Ju,g,"argument-error");const _=await gm(g,x,t);return rw(g,_)}return rw(g,x)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ps(n,a,"sendVerificationCode",async(d,p)=>{if(p.captchaResponse===Qu){ge((t==null?void 0:t.type)===Ju,d,"argument-error");const g=await gm(d,p,t);return Z_(d,g)}return Z_(d,p)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{t==null||t._reset()}}async function lO(n,e){const t=qe(n);if(rn(t.auth.app))return Promise.reject(Yn(t.auth));await rv(t,e)}async function gm(n,e,t){ge(t.type===Ju,n,"argument-error");const r=await t.verify();ge(typeof r=="string",n,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const a=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,c=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r,captchaResponse:o,clientType:c,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const a=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,c=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:a,clientType:o,recaptchaVersion:c}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.providerId=Po.PROVIDER_ID,this.auth=cn(e)}verifyPhoneNumber(e,t){return N0(this.auth,e,qe(t))}static credential(e,t){return Ms._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Po.credentialFromTaggedObject(t)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Ms._fromTokenResponse(t,r):null}}Po.PROVIDER_ID="phone";Po.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n,e){return e?La(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends mc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cO(n){return MA(n.auth,new dv(n),n.bypassAuthState)}function uO(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),PA(t,new dv(n),n.bypassAuthState)}async function fO(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),rv(t,new dv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cO;case"linkViaPopup":case"linkViaRedirect":return fO;case"reauthViaPopup":case"reauthViaRedirect":return uO;default:jr(this.auth,"internal-error")}}resolve(e){Ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Tf(2e3,1e4);async function hO(n,e,t){if(rn(n.app))return Promise.reject(Sr(n,"operation-not-supported-in-this-environment"));const r=cn(n);pc(n,e,Ka);const i=Ho(r,t);return new ja(r,"signInViaPopup",e,i).executeNotNull()}async function pO(n,e,t){const r=qe(n);if(rn(r.auth.app))return Promise.reject(Sr(r.auth,"operation-not-supported-in-this-environment"));pc(r.auth,e,Ka);const i=Ho(r.auth,t);return new ja(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function mO(n,e,t){const r=qe(n);pc(r.auth,e,Ka);const i=Ho(r.auth,t);return new ja(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ja extends rS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Ga(this.filter.length===1,"Popup operations only handle one event");const e=C0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dO.get())};e()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="pendingRedirect",Ch=new Map;class vO extends rS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{const r=await yO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yO(n,e){const t=aS(e),r=iS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function hv(n,e){return iS(n)._set(aS(e),"true")}function xO(n,e){Ch.set(n._key(),e)}function iS(n){return La(n._redirectPersistence)}function aS(n){return Th(gO,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(n,e,t){return wO(n,e,t)}async function wO(n,e,t){if(rn(n.app))return Promise.reject(Yn(n));const r=cn(n);pc(n,e,Ka),await r._initializationPromise;const i=Ho(r,t);return await hv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function EO(n,e,t){return bO(n,e,t)}async function bO(n,e,t){const r=qe(n);if(pc(r.auth,e,Ka),rn(r.auth.app))return Promise.reject(Yn(r.auth));await r.auth._initializationPromise;const i=Ho(r.auth,t);await hv(i,r.auth);const a=await oS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function AO(n,e,t){return SO(n,e,t)}async function SO(n,e,t){const r=qe(n);pc(r.auth,e,Ka),await r.auth._initializationPromise;const i=Ho(r.auth,t);await b0(!1,r,e.providerId),await hv(i,r.auth);const a=await oS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function TO(n,e){return await cn(n)._initializationPromise,sS(n,e,!1)}async function sS(n,e,t=!1){if(rn(n.app))return Promise.reject(Yn(n));const r=cn(n),i=Ho(r,e),o=await new vO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function oS(n){const e=C0(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=10*60*1e3;class IO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Sr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CO&&this.cachedEventUids.clear(),this.cachedEventUids.has(iw(e))}saveEventToCache(e){this.cachedEventUids.add(iw(e)),this.lastProcessedEventTime=Date.now()}}function iw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(n,e={}){return Xt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DO=/^https?/;async function PO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RO(n);for(const t of e)try{if(MO(t))return}catch{}jr(n,"unauthorized-domain")}function MO(n){const e=of(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!DO.test(t))return!1;if(OO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new Tf(3e4,6e4);function aw(){const n=wn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function LO(n){return new Promise((e,t)=>{var r,i,a;function o(){aw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aw(),t(Sr(n,"network-request-failed"))},timeout:kO.get()})}if(!((i=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=wn().gapi)===null||a===void 0)&&a.load)o();else{const c=bA("iframefcb");return wn()[c]=()=>{gapi.load?o():t(Sr(n,"network-request-failed"))},nv(`${wR()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function jO(n){return Ih=Ih||LO(n),Ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new Tf(5e3,15e3),VO="__/auth/iframe",UO="emulator/auth/iframe",FO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zO(n){const e=n.config;ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ev(e,UO):`https://${n.config.authDomain}/${VO}`,r={apiKey:e.apiKey,appName:n.name,v:hc},i=HO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${dc(r).slice(1)}`}async function GO(n){const e=await jO(n),t=wn().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:zO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Sr(n,"network-request-failed"),c=wn().setTimeout(()=>{a(o)},BO.get());function u(){wn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$O=500,WO=600,XO="_blank",YO="http://localhost";class sw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KO(n,e,t,r=$O,i=WO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},qO),{width:r.toString(),height:i.toString(),top:a,left:o}),d=pr().toLowerCase();t&&(c=gA(d)?XO:t),pA(d)&&(e=e||YO,u.scrollbars="yes");const p=Object.entries(u).reduce((x,[_,E])=>`${x}${_}=${E},`,"");if(fR(d)&&c!=="_self")return QO(e||"",c),new sw(null);const g=window.open(e||"",c,p);ge(g,n,"popup-blocked");try{g.focus()}catch{}return new sw(g)}function QO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="__/auth/handler",JO="emulator/auth/handler",e5=encodeURIComponent("fac");async function ow(n,e,t,r,i,a){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hc,eventId:i};if(e instanceof Ka){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",TN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof vc){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await n._getAppCheckToken(),d=u?`#${e5}=${encodeURIComponent(u)}`:"";return`${t5(n)}?${dc(c).slice(1)}${d}`}function t5({config:n}){return n.emulator?ev(n,JO):`https://${n.authDomain}/${ZO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class n5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cv,this._completeRedirectFn=sS,this._overrideRedirectResult=xO}async _openPopup(e,t,r,i){var a;Ga((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await ow(e,t,r,of(),i);return KO(e,o,C0())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await ow(e,t,r,of(),i);return F8(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Ga(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await GO(e),r=new IO(e);return t.register("authEvent",i=>(ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vm,{type:vm},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[vm];o!==void 0&&t(!!o),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wA()||mA()||tv()}}const cS=n5;class uS{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ki("unexpected MultiFactorSessionType")}}}class pv extends uS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new pv(e)}_finalizeEnroll(e,t,r){return R8(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return K8(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class fS{constructor(){}static assertion(e){return pv._fromCredential(e)}}fS.FACTOR_ID="phone";class dS{static assertionForEnrollment(e,t){return uf._fromSecret(e,t)}static assertionForSignIn(e,t){return uf._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const r=e;ge(typeof((t=r.user)===null||t===void 0?void 0:t.auth)<"u","internal-error");const i=await O8(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return R0._fromStartTotpMfaEnrollmentResponse(i,r.user.auth)}}dS.FACTOR_ID="totp";class uf extends uS{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new uf(t,void 0,e)}static _fromEnrollmentId(e,t){return new uf(t,e)}async _finalizeEnroll(e,t,r){return ge(typeof this.secret<"u",e,"argument-error"),D8(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){ge(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return Q8(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class R0{constructor(e,t,r,i,a,o,c){this.sessionInfo=o,this.auth=c,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}static _fromStartTotpMfaEnrollmentResponse(e,t){return new R0(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let i=!1;return(uh(e)||uh(t))&&(i=!0),i&&(uh(e)&&(e=((r=this.auth.currentUser)===null||r===void 0?void 0:r.email)||"unknownuser"),uh(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function uh(n){return typeof n>"u"||(n==null?void 0:n.length)===0}var lw="@firebase/auth",cw="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a5(n){Zl(new jo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EA(n)},d=new vR(r,i,a,u);return RR(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zl(new jo("auth-internal",e=>{const t=cn(e.getProvider("auth").getImmediate());return(r=>new r5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(lw,cw,i5(n)),Ds(lw,cw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=5*60,o5=Wb("authIdTokenMaxAge")||s5;let uw=null;const l5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>o5)return;const i=t==null?void 0:t.token;uw!==i&&(uw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hS(n=Jb()){const e=Yg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TA(n,{popupRedirectResolver:cS,persistence:[nS,KA,cv]}),r=Wb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=l5(a.toString());qA(t,o,()=>o(t.currentUser)),GA(t,c=>o(c))}}const i=qb("auth");return i&&CA(t,`http://${i}`),t}function c5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}yR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Sr("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",c5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a5("Browser");const u5=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:G6,ActionCodeURL:gc,AuthCredential:mc,AuthErrorCodes:W6,EmailAuthCredential:Jl,EmailAuthProvider:qs,FacebookAuthProvider:Da,FactorId:U6,GithubAuthProvider:Ma,GoogleAuthProvider:Pa,OAuthCredential:ea,OAuthProvider:Zu,OperationType:z6,PhoneAuthCredential:Ms,PhoneAuthProvider:Po,PhoneMultiFactorGenerator:fS,ProviderId:F6,RecaptchaVerifier:rO,SAMLAuthProvider:qh,SignInMethod:H6,TotpMultiFactorGenerator:dS,TotpSecret:R0,TwitterAuthProvider:ka,applyActionCode:i8,beforeAuthStateChanged:qA,browserCookiePersistence:B8,browserLocalPersistence:KA,browserPopupRedirectResolver:cS,browserSessionPersistence:cv,checkActionCode:BA,confirmPasswordReset:r8,connectAuthEmulator:CA,createUserWithEmailAndPassword:VA,debugErrorMap:$6,deleteUser:I8,fetchSignInMethodsForEmail:u8,getAdditionalUserInfo:w8,getAuth:hS,getIdToken:aR,getIdTokenResult:uA,getMultiFactorResolver:N8,getRedirectResult:TO,inMemoryPersistence:ig,indexedDBLocalPersistence:nS,initializeAuth:TA,initializeRecaptchaConfig:b8,isSignInWithEmailLink:o8,linkWithCredential:kA,linkWithPhoneNumber:sO,linkWithPopup:mO,linkWithRedirect:AO,multiFactor:M8,onAuthStateChanged:$A,onIdTokenChanged:GA,parseActionCodeURL:KR,prodErrorMap:rA,reauthenticateWithCredential:LA,reauthenticateWithPhoneNumber:oO,reauthenticateWithPopup:pO,reauthenticateWithRedirect:EO,reload:fA,revokeAccessToken:C8,sendEmailVerification:FA,sendPasswordResetEmail:jA,sendSignInLinkToEmail:s8,setPersistence:E8,signInAnonymously:JR,signInWithCredential:A0,signInWithCustomToken:n8,signInWithEmailAndPassword:UA,signInWithEmailLink:l8,signInWithPhoneNumber:aO,signInWithPopup:hO,signInWithRedirect:_O,signOut:WA,unlink:e8,updateCurrentUser:T8,updateEmail:p8,updatePassword:m8,updatePhoneNumber:lO,updateProfile:h8,useDeviceLanguage:S8,validatePassword:A8,verifyBeforeUpdateEmail:f8,verifyPasswordResetCode:a8},Symbol.toStringTag,{value:"Module"})),f5={apiKey:"AIzaSyDT9F4cCRxuO--Fi6nmHCiPqLFra9aj-AU",authDomain:"woo-combine.firebaseapp.com",projectId:"woo-combine",storageBucket:"woo-combine.appspot.com",messagingSenderId:"94939411053",appId:"1:94939411053:web:9441e73b88c1985e5c8564"},d5=Zb(f5),Qt=hS(d5);function pS(n,e){return function(){return n.apply(e,arguments)}}const{toString:h5}=Object.prototype,{getPrototypeOf:mv}=Object,{iterator:O0,toStringTag:mS}=Symbol,D0=(n=>e=>{const t=h5.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ri=n=>(n=n.toLowerCase(),e=>D0(e)===n),P0=n=>e=>typeof e===n,{isArray:yc}=Array,ff=P0("undefined");function p5(n){return n!==null&&!ff(n)&&n.constructor!==null&&!ff(n.constructor)&&Mr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const gS=Ri("ArrayBuffer");function m5(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&gS(n.buffer),e}const g5=P0("string"),Mr=P0("function"),vS=P0("number"),M0=n=>n!==null&&typeof n=="object",v5=n=>n===!0||n===!1,Nh=n=>{if(D0(n)!=="object")return!1;const e=mv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mS in n)&&!(O0 in n)},y5=Ri("Date"),x5=Ri("File"),_5=Ri("Blob"),w5=Ri("FileList"),E5=n=>M0(n)&&Mr(n.pipe),b5=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Mr(n.append)&&((e=D0(n))==="formdata"||e==="object"&&Mr(n.toString)&&n.toString()==="[object FormData]"))},A5=Ri("URLSearchParams"),[S5,T5,C5,I5]=["ReadableStream","Request","Response","Headers"].map(Ri),N5=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rf(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),yc(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),o=a.length;let c;for(r=0;r<o;r++)c=a[r],e.call(null,n[c],c,n)}}function yS(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Io=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xS=n=>!ff(n)&&n!==Io;function sg(){const{caseless:n}=xS(this)&&this||{},e={},t=(r,i)=>{const a=n&&yS(e,i)||i;Nh(e[a])&&Nh(r)?e[a]=sg(e[a],r):Nh(r)?e[a]=sg({},r):yc(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Rf(arguments[r],t);return e}const R5=(n,e,t,{allOwnKeys:r}={})=>(Rf(e,(i,a)=>{t&&Mr(i)?n[a]=pS(i,t):n[a]=i},{allOwnKeys:r}),n),O5=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),D5=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},P5=(n,e,t,r)=>{let i,a,o;const c={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)o=i[a],(!r||r(o,n,e))&&!c[o]&&(e[o]=n[o],c[o]=!0);n=t!==!1&&mv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},M5=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},k5=n=>{if(!n)return null;if(yc(n))return n;let e=n.length;if(!vS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},L5=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&mv(Uint8Array)),j5=(n,e)=>{const r=(n&&n[O0]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},B5=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},V5=Ri("HTMLFormElement"),U5=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),fw=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),F5=Ri("RegExp"),_S=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Rf(t,(i,a)=>{let o;(o=e(i,a,n))!==!1&&(r[a]=o||i)}),Object.defineProperties(n,r)},H5=n=>{_S(n,(e,t)=>{if(Mr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Mr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},z5=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return yc(n)?r(n):r(String(n).split(e)),t},G5=()=>{},q5=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function $5(n){return!!(n&&Mr(n.append)&&n[mS]==="FormData"&&n[O0])}const W5=n=>{const e=new Array(10),t=(r,i)=>{if(M0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=yc(r)?[]:{};return Rf(r,(o,c)=>{const u=t(o,i+1);!ff(u)&&(a[c]=u)}),e[i]=void 0,a}}return r};return t(n,0)},X5=Ri("AsyncFunction"),Y5=n=>n&&(M0(n)||Mr(n))&&Mr(n.then)&&Mr(n.catch),wS=((n,e)=>n?setImmediate:e?((t,r)=>(Io.addEventListener("message",({source:i,data:a})=>{i===Io&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Io.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Mr(Io.postMessage)),K5=typeof queueMicrotask<"u"?queueMicrotask.bind(Io):typeof process<"u"&&process.nextTick||wS,Q5=n=>n!=null&&Mr(n[O0]),re={isArray:yc,isArrayBuffer:gS,isBuffer:p5,isFormData:b5,isArrayBufferView:m5,isString:g5,isNumber:vS,isBoolean:v5,isObject:M0,isPlainObject:Nh,isReadableStream:S5,isRequest:T5,isResponse:C5,isHeaders:I5,isUndefined:ff,isDate:y5,isFile:x5,isBlob:_5,isRegExp:F5,isFunction:Mr,isStream:E5,isURLSearchParams:A5,isTypedArray:L5,isFileList:w5,forEach:Rf,merge:sg,extend:R5,trim:N5,stripBOM:O5,inherits:D5,toFlatObject:P5,kindOf:D0,kindOfTest:Ri,endsWith:M5,toArray:k5,forEachEntry:j5,matchAll:B5,isHTMLForm:V5,hasOwnProperty:fw,hasOwnProp:fw,reduceDescriptors:_S,freezeMethods:H5,toObjectSet:z5,toCamelCase:U5,noop:G5,toFiniteNumber:q5,findKey:yS,global:Io,isContextDefined:xS,isSpecCompliantForm:$5,toJSONObject:W5,isAsyncFn:X5,isThenable:Y5,setImmediate:wS,asap:K5,isIterable:Q5};function We(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}re.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const ES=We.prototype,bS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{bS[n]={value:n}});Object.defineProperties(We,bS);Object.defineProperty(ES,"isAxiosError",{value:!0});We.from=(n,e,t,r,i,a)=>{const o=Object.create(ES);return re.toFlatObject(n,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),We.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,a&&Object.assign(o,a),o};const Z5=null;function og(n){return re.isPlainObject(n)||re.isArray(n)}function AS(n){return re.endsWith(n,"[]")?n.slice(0,-2):n}function dw(n,e,t){return n?n.concat(e).map(function(i,a){return i=AS(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function J5(n){return re.isArray(n)&&!n.some(og)}const eD=re.toFlatObject(re,{},null,function(e){return/^is[A-Z]/.test(e)});function k0(n,e,t){if(!re.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=re.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,S){return!re.isUndefined(S[A])});const r=t.metaTokens,i=t.visitor||p,a=t.dots,o=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(e);if(!re.isFunction(i))throw new TypeError("visitor must be a function");function d(E){if(E===null)return"";if(re.isDate(E))return E.toISOString();if(!u&&re.isBlob(E))throw new We("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(E)||re.isTypedArray(E)?u&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,A,S){let I=E;if(E&&!S&&typeof E=="object"){if(re.endsWith(A,"{}"))A=r?A:A.slice(0,-2),E=JSON.stringify(E);else if(re.isArray(E)&&J5(E)||(re.isFileList(E)||re.endsWith(A,"[]"))&&(I=re.toArray(E)))return A=AS(A),I.forEach(function(O,j){!(re.isUndefined(O)||O===null)&&e.append(o===!0?dw([A],j,a):o===null?A:A+"[]",d(O))}),!1}return og(E)?!0:(e.append(dw(S,A,a),d(E)),!1)}const g=[],x=Object.assign(eD,{defaultVisitor:p,convertValue:d,isVisitable:og});function _(E,A){if(!re.isUndefined(E)){if(g.indexOf(E)!==-1)throw Error("Circular reference detected in "+A.join("."));g.push(E),re.forEach(E,function(I,N){(!(re.isUndefined(I)||I===null)&&i.call(e,I,re.isString(N)?N.trim():N,A,x))===!0&&_(I,A?A.concat(N):[N])}),g.pop()}}if(!re.isObject(n))throw new TypeError("data must be an object");return _(n),e}function hw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function gv(n,e){this._pairs=[],n&&k0(n,this,e)}const SS=gv.prototype;SS.append=function(e,t){this._pairs.push([e,t])};SS.toString=function(e){const t=e?function(r){return e.call(this,r,hw)}:hw;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function tD(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function TS(n,e,t){if(!e)return n;const r=t&&t.encode||tD;re.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=re.isURLSearchParams(e)?e.toString():new gv(e,t).toString(r),a){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class pw{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){re.forEach(this.handlers,function(r){r!==null&&e(r)})}}const CS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nD=typeof URLSearchParams<"u"?URLSearchParams:gv,rD=typeof FormData<"u"?FormData:null,iD=typeof Blob<"u"?Blob:null,aD={isBrowser:!0,classes:{URLSearchParams:nD,FormData:rD,Blob:iD},protocols:["http","https","file","blob","url","data"]},vv=typeof window<"u"&&typeof document<"u",lg=typeof navigator=="object"&&navigator||void 0,sD=vv&&(!lg||["ReactNative","NativeScript","NS"].indexOf(lg.product)<0),oD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lD=vv&&window.location.href||"http://localhost",cD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vv,hasStandardBrowserEnv:sD,hasStandardBrowserWebWorkerEnv:oD,navigator:lg,origin:lD},Symbol.toStringTag,{value:"Module"})),hr={...cD,...aD};function uD(n,e){return k0(n,new hr.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,a){return hr.isNode&&re.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function fD(n){return re.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function dD(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function IS(n){function e(t,r,i,a){let o=t[a++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=a>=t.length;return o=!o&&re.isArray(i)?i.length:o,u?(re.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!c):((!i[o]||!re.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],a)&&re.isArray(i[o])&&(i[o]=dD(i[o])),!c)}if(re.isFormData(n)&&re.isFunction(n.entries)){const t={};return re.forEachEntry(n,(r,i)=>{e(fD(r),i,t,0)}),t}return null}function hD(n,e,t){if(re.isString(n))try{return(e||JSON.parse)(n),re.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Of={transitional:CS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=re.isObject(e);if(a&&re.isHTMLForm(e)&&(e=new FormData(e)),re.isFormData(e))return i?JSON.stringify(IS(e)):e;if(re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e)||re.isReadableStream(e))return e;if(re.isArrayBufferView(e))return e.buffer;if(re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return uD(e,this.formSerializer).toString();if((c=re.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return k0(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),hD(e)):e}],transformResponse:[function(e){const t=this.transitional||Of.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(re.isResponse(e)||re.isReadableStream(e))return e;if(e&&re.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(o)throw c.name==="SyntaxError"?We.from(c,We.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hr.classes.FormData,Blob:hr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],n=>{Of.headers[n]={}});const pD=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mD=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&pD[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},mw=Symbol("internals");function Lu(n){return n&&String(n).trim().toLowerCase()}function Rh(n){return n===!1||n==null?n:re.isArray(n)?n.map(Rh):String(n)}function gD(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const vD=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ym(n,e,t,r,i){if(re.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!re.isString(e)){if(re.isString(r))return e.indexOf(r)!==-1;if(re.isRegExp(r))return r.test(e)}}function yD(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function xD(n,e){const t=re.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,o){return this[r].call(this,e,i,a,o)},configurable:!0})})}let kr=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(c,u,d){const p=Lu(u);if(!p)throw new Error("header name must be a non-empty string");const g=re.findKey(i,p);(!g||i[g]===void 0||d===!0||d===void 0&&i[g]!==!1)&&(i[g||u]=Rh(c))}const o=(c,u)=>re.forEach(c,(d,p)=>a(d,p,u));if(re.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(re.isString(e)&&(e=e.trim())&&!vD(e))o(mD(e),t);else if(re.isObject(e)&&re.isIterable(e)){let c={},u,d;for(const p of e){if(!re.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[d=p[0]]=(u=c[d])?re.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}o(c,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=Lu(e),e){const r=re.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return gD(i);if(re.isFunction(t))return t.call(this,i,r);if(re.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Lu(e),e){const r=re.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||ym(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(o){if(o=Lu(o),o){const c=re.findKey(r,o);c&&(!t||ym(r,r[c],c,t))&&(delete r[c],i=!0)}}return re.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||ym(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return re.forEach(this,(i,a)=>{const o=re.findKey(r,a);if(o){t[o]=Rh(i),delete t[a];return}const c=e?yD(a):String(a).trim();c!==a&&delete t[a],t[c]=Rh(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return re.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&re.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[mw]=this[mw]={accessors:{}}).accessors,i=this.prototype;function a(o){const c=Lu(o);r[c]||(xD(i,o),r[c]=!0)}return re.isArray(e)?e.forEach(a):a(e),this}};kr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(kr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});re.freezeMethods(kr);function xm(n,e){const t=this||Of,r=e||t,i=kr.from(r.headers);let a=r.data;return re.forEach(n,function(c){a=c.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function NS(n){return!!(n&&n.__CANCEL__)}function xc(n,e,t){We.call(this,n??"canceled",We.ERR_CANCELED,e,t),this.name="CanceledError"}re.inherits(xc,We,{__CANCEL__:!0});function RS(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new We("Request failed with status code "+t.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function _D(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function wD(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),p=r[a];o||(o=d),t[i]=u,r[i]=d;let g=a,x=0;for(;g!==i;)x+=t[g++],g=g%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),d-o<e)return;const _=p&&d-p;return _?Math.round(x*1e3/_):void 0}}function ED(n,e){let t=0,r=1e3/e,i,a;const o=(d,p=Date.now())=>{t=p,i=null,a&&(clearTimeout(a),a=null),n.apply(null,d)};return[(...d)=>{const p=Date.now(),g=p-t;g>=r?o(d,p):(i=d,a||(a=setTimeout(()=>{a=null,o(i)},r-g)))},()=>i&&o(i)]}const Yh=(n,e,t=3)=>{let r=0;const i=wD(50,250);return ED(a=>{const o=a.loaded,c=a.lengthComputable?a.total:void 0,u=o-r,d=i(u),p=o<=c;r=o;const g={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&p?(c-o)/d:void 0,event:a,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(g)},t)},gw=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},vw=n=>(...e)=>re.asap(()=>n(...e)),bD=hr.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,hr.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(hr.origin),hr.navigator&&/(msie|trident)/i.test(hr.navigator.userAgent)):()=>!0,AD=hr.hasStandardBrowserEnv?{write(n,e,t,r,i,a){const o=[n+"="+encodeURIComponent(e)];re.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),re.isString(r)&&o.push("path="+r),re.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function SD(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function TD(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function OS(n,e,t){let r=!SD(e);return n&&(r||t==!1)?TD(n,e):e}const yw=n=>n instanceof kr?{...n}:n;function Bo(n,e){e=e||{};const t={};function r(d,p,g,x){return re.isPlainObject(d)&&re.isPlainObject(p)?re.merge.call({caseless:x},d,p):re.isPlainObject(p)?re.merge({},p):re.isArray(p)?p.slice():p}function i(d,p,g,x){if(re.isUndefined(p)){if(!re.isUndefined(d))return r(void 0,d,g,x)}else return r(d,p,g,x)}function a(d,p){if(!re.isUndefined(p))return r(void 0,p)}function o(d,p){if(re.isUndefined(p)){if(!re.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function c(d,p,g){if(g in e)return r(d,p);if(g in n)return r(void 0,d)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,p,g)=>i(yw(d),yw(p),g,!0)};return re.forEach(Object.keys(Object.assign({},n,e)),function(p){const g=u[p]||i,x=g(n[p],e[p],p);re.isUndefined(x)&&g!==c||(t[p]=x)}),t}const DS=n=>{const e=Bo({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:c}=e;e.headers=o=kr.from(o),e.url=TS(OS(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(re.isFormData(t)){if(hr.hasStandardBrowserEnv||hr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[d,...p]=u?u.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(hr.hasStandardBrowserEnv&&(r&&re.isFunction(r)&&(r=r(e)),r||r!==!1&&bD(e.url))){const d=i&&a&&AD.read(a);d&&o.set(i,d)}return e},CD=typeof XMLHttpRequest<"u",ID=CD&&function(n){return new Promise(function(t,r){const i=DS(n);let a=i.data;const o=kr.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=i,p,g,x,_,E;function A(){_&&_(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function I(){if(!S)return;const O=kr.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),F={data:!c||c==="text"||c==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:O,config:n,request:S};RS(function(P){t(P),A()},function(P){r(P),A()},F),S=null}"onloadend"in S?S.onloadend=I:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(I)},S.onabort=function(){S&&(r(new We("Request aborted",We.ECONNABORTED,n,S)),S=null)},S.onerror=function(){r(new We("Network Error",We.ERR_NETWORK,n,S)),S=null},S.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const F=i.transitional||CS;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new We(j,F.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,n,S)),S=null},a===void 0&&o.setContentType(null),"setRequestHeader"in S&&re.forEach(o.toJSON(),function(j,F){S.setRequestHeader(F,j)}),re.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),c&&c!=="json"&&(S.responseType=i.responseType),d&&([x,E]=Yh(d,!0),S.addEventListener("progress",x)),u&&S.upload&&([g,_]=Yh(u),S.upload.addEventListener("progress",g),S.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(p=O=>{S&&(r(!O||O.type?new xc(null,n,S):O),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const N=_D(i.url);if(N&&hr.protocols.indexOf(N)===-1){r(new We("Unsupported protocol "+N+":",We.ERR_BAD_REQUEST,n));return}S.send(a||null)})},ND=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(d){if(!i){i=!0,c();const p=d instanceof Error?d:this.reason;r.abort(p instanceof We?p:new xc(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,a(new We(`timeout ${e} of ms exceeded`,We.ETIMEDOUT))},e);const c=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),n=null)};n.forEach(d=>d.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>re.asap(c),u}},RD=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},OD=async function*(n,e){for await(const t of DD(n))yield*RD(t,e)},DD=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},xw=(n,e,t,r)=>{const i=OD(n,e);let a=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:p}=await i.next();if(d){c(),u.close();return}let g=p.byteLength;if(t){let x=a+=g;t(x)}u.enqueue(new Uint8Array(p))}catch(d){throw c(d),d}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},L0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",PS=L0&&typeof ReadableStream=="function",PD=L0&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),MS=(n,...e)=>{try{return!!n(...e)}catch{return!1}},MD=PS&&MS(()=>{let n=!1;const e=new Request(hr.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),_w=64*1024,cg=PS&&MS(()=>re.isReadableStream(new Response("").body)),Kh={stream:cg&&(n=>n.body)};L0&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Kh[e]&&(Kh[e]=re.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new We(`Response type '${e}' is not supported`,We.ERR_NOT_SUPPORT,r)})})})(new Response);const kD=async n=>{if(n==null)return 0;if(re.isBlob(n))return n.size;if(re.isSpecCompliantForm(n))return(await new Request(hr.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(re.isArrayBufferView(n)||re.isArrayBuffer(n))return n.byteLength;if(re.isURLSearchParams(n)&&(n=n+""),re.isString(n))return(await PD(n)).byteLength},LD=async(n,e)=>{const t=re.toFiniteNumber(n.getContentLength());return t??kD(e)},jD=L0&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:a,timeout:o,onDownloadProgress:c,onUploadProgress:u,responseType:d,headers:p,withCredentials:g="same-origin",fetchOptions:x}=DS(n);d=d?(d+"").toLowerCase():"text";let _=ND([i,a&&a.toAbortSignal()],o),E;const A=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let S;try{if(u&&MD&&t!=="get"&&t!=="head"&&(S=await LD(p,r))!==0){let F=new Request(e,{method:"POST",body:r,duplex:"half"}),q;if(re.isFormData(r)&&(q=F.headers.get("content-type"))&&p.setContentType(q),F.body){const[P,R]=gw(S,Yh(vw(u)));r=xw(F.body,_w,P,R)}}re.isString(g)||(g=g?"include":"omit");const I="credentials"in Request.prototype;E=new Request(e,{...x,signal:_,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:I?g:void 0});let N=await fetch(E);const O=cg&&(d==="stream"||d==="response");if(cg&&(c||O&&A)){const F={};["status","statusText","headers"].forEach(M=>{F[M]=N[M]});const q=re.toFiniteNumber(N.headers.get("content-length")),[P,R]=c&&gw(q,Yh(vw(c),!0))||[];N=new Response(xw(N.body,_w,P,()=>{R&&R(),A&&A()}),F)}d=d||"text";let j=await Kh[re.findKey(Kh,d)||"text"](N,n);return!O&&A&&A(),await new Promise((F,q)=>{RS(F,q,{data:j,headers:kr.from(N.headers),status:N.status,statusText:N.statusText,config:n,request:E})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,n,E),{cause:I.cause||I}):We.from(I,I&&I.code,n,E)}}),ug={http:Z5,xhr:ID,fetch:jD};re.forEach(ug,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const ww=n=>`- ${n}`,BD=n=>re.isFunction(n)||n===null||n===!1,kS={getAdapter:n=>{n=re.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let a=0;a<e;a++){t=n[a];let o;if(r=t,!BD(t)&&(r=ug[(o=String(t)).toLowerCase()],r===void 0))throw new We(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+a]=r}if(!r){const a=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(ww).join(`
`):" "+ww(a[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:ug};function _m(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new xc(null,n)}function Ew(n){return _m(n),n.headers=kr.from(n.headers),n.data=xm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),kS.getAdapter(n.adapter||Of.adapter)(n).then(function(r){return _m(n),r.data=xm.call(n,n.transformResponse,r),r.headers=kr.from(r.headers),r},function(r){return NS(r)||(_m(n),r&&r.response&&(r.response.data=xm.call(n,n.transformResponse,r.response),r.response.headers=kr.from(r.response.headers))),Promise.reject(r)})}const LS="1.9.0",j0={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{j0[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const bw={};j0.transitional=function(e,t,r){function i(a,o){return"[Axios v"+LS+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,c)=>{if(e===!1)throw new We(i(o," has been removed"+(t?" in "+t:"")),We.ERR_DEPRECATED);return t&&!bw[o]&&(bw[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,o,c):!0}};j0.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function VD(n,e,t){if(typeof n!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],o=e[a];if(o){const c=n[a],u=c===void 0||o(c,a,n);if(u!==!0)throw new We("option "+a+" must be "+u,We.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new We("Unknown option "+a,We.ERR_BAD_OPTION)}}const Oh={assertOptions:VD,validators:j0},Wi=Oh.validators;let Mo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new pw,response:new pw}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Bo(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&Oh.assertOptions(r,{silentJSONParsing:Wi.transitional(Wi.boolean),forcedJSONParsing:Wi.transitional(Wi.boolean),clarifyTimeoutError:Wi.transitional(Wi.boolean)},!1),i!=null&&(re.isFunction(i)?t.paramsSerializer={serialize:i}:Oh.assertOptions(i,{encode:Wi.function,serialize:Wi.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Oh.assertOptions(t,{baseUrl:Wi.spelling("baseURL"),withXsrfToken:Wi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&re.merge(a.common,a[t.method]);a&&re.forEach(["delete","get","head","post","put","patch","common"],E=>{delete a[E]}),t.headers=kr.concat(o,a);const c=[];let u=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(u=u&&A.synchronous,c.unshift(A.fulfilled,A.rejected))});const d=[];this.interceptors.response.forEach(function(A){d.push(A.fulfilled,A.rejected)});let p,g=0,x;if(!u){const E=[Ew.bind(this),void 0];for(E.unshift.apply(E,c),E.push.apply(E,d),x=E.length,p=Promise.resolve(t);g<x;)p=p.then(E[g++],E[g++]);return p}x=c.length;let _=t;for(g=0;g<x;){const E=c[g++],A=c[g++];try{_=E(_)}catch(S){A.call(this,S);break}}try{p=Ew.call(this,_)}catch(E){return Promise.reject(E)}for(g=0,x=d.length;g<x;)p=p.then(d[g++],d[g++]);return p}getUri(e){e=Bo(this.defaults,e);const t=OS(e.baseURL,e.url,e.allowAbsoluteUrls);return TS(t,e.params,e.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(e){Mo.prototype[e]=function(t,r){return this.request(Bo(r||{},{method:e,url:t,data:(r||{}).data}))}});re.forEach(["post","put","patch"],function(e){function t(r){return function(a,o,c){return this.request(Bo(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Mo.prototype[e]=t(),Mo.prototype[e+"Form"]=t(!0)});let UD=class jS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(c=>{r.subscribe(c),a=c}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},e(function(a,o,c){r.reason||(r.reason=new xc(a,o,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new jS(function(i){e=i}),cancel:e}}};function FD(n){return function(t){return n.apply(null,t)}}function HD(n){return re.isObject(n)&&n.isAxiosError===!0}const fg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fg).forEach(([n,e])=>{fg[e]=n});function BS(n){const e=new Mo(n),t=pS(Mo.prototype.request,e);return re.extend(t,Mo.prototype,e,{allOwnKeys:!0}),re.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return BS(Bo(n,i))},t}const mn=BS(Of);mn.Axios=Mo;mn.CanceledError=xc;mn.CancelToken=UD;mn.isCancel=NS;mn.VERSION=LS;mn.toFormData=k0;mn.AxiosError=We;mn.Cancel=mn.CanceledError;mn.all=function(e){return Promise.all(e)};mn.spread=FD;mn.isAxiosError=HD;mn.mergeConfig=Bo;mn.AxiosHeaders=kr;mn.formToJSON=n=>IS(re.isHTMLForm(n)?new FormData(n):n);mn.getAdapter=kS.getAdapter;mn.HttpStatusCode=fg;mn.default=mn;const{Axios:mU,AxiosError:gU,CanceledError:vU,isCancel:yU,CancelToken:xU,VERSION:_U,all:wU,Cancel:EU,isAxiosError:bU,spread:AU,toFormData:SU,AxiosHeaders:TU,HttpStatusCode:CU,formToJSON:IU,getAdapter:NU,mergeConfig:RU}=mn,Lt=mn.create({baseURL:"https://woo-combine-backend.onrender.com/api",withCredentials:!1,timeout:45e3});Lt.interceptors.response.use(n=>n,async n=>{var a,o,c,u;const e=n.config;e._retryCount||(e._retryCount=0);const t=(o=(a=n.config)==null?void 0:a.url)!=null&&o.includes("/leagues/me")?1:2;if(!(e._retryCount<t&&(n.code==="ECONNABORTED"||n.message.includes("timeout")||n.message.includes("Network Error")||((c=n.response)==null?void 0:c.status)>=500||!n.response)))return Promise.reject(n);e._retryCount+=1;let i=Math.pow(2,e._retryCount)*3e3;return n.code==="ECONNABORTED"||n.message.includes("timeout")?i=Math.min(i*2,15e3):n.response?((u=n.response)==null?void 0:u.status)>=500&&(i=Math.min(i*1.5,1e4)):i=Math.min(i*1.5,12e3),await new Promise(d=>setTimeout(d,i)),Lt(e)});Lt.interceptors.request.use(async n=>{const e=Qt.currentUser;if(e)try{const t=await e.getIdToken();n.headers=n.headers||{},n.headers.Authorization=`Bearer ${t}`}catch(t){console.warn("[API] Failed to get auth token:",t)}return n},n=>Promise.reject(n));Lt.interceptors.response.use(n=>n,n=>{var t,r,i,a,o,c,u;return((t=n.response)==null?void 0:t.status)===404&&(((i=(r=n.config)==null?void 0:r.url)==null?void 0:i.includes("/leagues/me"))||((o=(a=n.config)==null?void 0:a.url)==null?void 0:o.includes("/players?event_id=")))||((u=(c=n.response)==null?void 0:c.data)!=null&&u.detail?console.error("[API] Server Error:",n.response.data.detail):n.code==="ECONNABORTED"?console.error("[API] Request timeout - server may be starting up"):n.message.includes("Network Error")?console.error("[API] Network connectivity issue"):console.error("[API] Request failed:",n.message)),Promise.reject(n)});var Aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,VS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function M(){}M.prototype=R.prototype,P.D=R.prototype,P.prototype=new M,P.prototype.constructor=P,P.C=function(V,H,z){for(var U=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)U[_e-2]=arguments[_e];return R.prototype[H].apply(V,U)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,R,M){M||(M=0);var V=Array(16);if(typeof R=="string")for(var H=0;16>H;++H)V[H]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(H=0;16>H;++H)V[H]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=P.g[0],M=P.g[1],H=P.g[2];var z=P.g[3],U=R+(z^M&(H^z))+V[0]+3614090360&4294967295;R=M+(U<<7&4294967295|U>>>25),U=z+(H^R&(M^H))+V[1]+3905402710&4294967295,z=R+(U<<12&4294967295|U>>>20),U=H+(M^z&(R^M))+V[2]+606105819&4294967295,H=z+(U<<17&4294967295|U>>>15),U=M+(R^H&(z^R))+V[3]+3250441966&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(z^M&(H^z))+V[4]+4118548399&4294967295,R=M+(U<<7&4294967295|U>>>25),U=z+(H^R&(M^H))+V[5]+1200080426&4294967295,z=R+(U<<12&4294967295|U>>>20),U=H+(M^z&(R^M))+V[6]+2821735955&4294967295,H=z+(U<<17&4294967295|U>>>15),U=M+(R^H&(z^R))+V[7]+4249261313&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(z^M&(H^z))+V[8]+1770035416&4294967295,R=M+(U<<7&4294967295|U>>>25),U=z+(H^R&(M^H))+V[9]+2336552879&4294967295,z=R+(U<<12&4294967295|U>>>20),U=H+(M^z&(R^M))+V[10]+4294925233&4294967295,H=z+(U<<17&4294967295|U>>>15),U=M+(R^H&(z^R))+V[11]+2304563134&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(z^M&(H^z))+V[12]+1804603682&4294967295,R=M+(U<<7&4294967295|U>>>25),U=z+(H^R&(M^H))+V[13]+4254626195&4294967295,z=R+(U<<12&4294967295|U>>>20),U=H+(M^z&(R^M))+V[14]+2792965006&4294967295,H=z+(U<<17&4294967295|U>>>15),U=M+(R^H&(z^R))+V[15]+1236535329&4294967295,M=H+(U<<22&4294967295|U>>>10),U=R+(H^z&(M^H))+V[1]+4129170786&4294967295,R=M+(U<<5&4294967295|U>>>27),U=z+(M^H&(R^M))+V[6]+3225465664&4294967295,z=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(z^R))+V[11]+643717713&4294967295,H=z+(U<<14&4294967295|U>>>18),U=M+(z^R&(H^z))+V[0]+3921069994&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(H^z&(M^H))+V[5]+3593408605&4294967295,R=M+(U<<5&4294967295|U>>>27),U=z+(M^H&(R^M))+V[10]+38016083&4294967295,z=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(z^R))+V[15]+3634488961&4294967295,H=z+(U<<14&4294967295|U>>>18),U=M+(z^R&(H^z))+V[4]+3889429448&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(H^z&(M^H))+V[9]+568446438&4294967295,R=M+(U<<5&4294967295|U>>>27),U=z+(M^H&(R^M))+V[14]+3275163606&4294967295,z=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(z^R))+V[3]+4107603335&4294967295,H=z+(U<<14&4294967295|U>>>18),U=M+(z^R&(H^z))+V[8]+1163531501&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(H^z&(M^H))+V[13]+2850285829&4294967295,R=M+(U<<5&4294967295|U>>>27),U=z+(M^H&(R^M))+V[2]+4243563512&4294967295,z=R+(U<<9&4294967295|U>>>23),U=H+(R^M&(z^R))+V[7]+1735328473&4294967295,H=z+(U<<14&4294967295|U>>>18),U=M+(z^R&(H^z))+V[12]+2368359562&4294967295,M=H+(U<<20&4294967295|U>>>12),U=R+(M^H^z)+V[5]+4294588738&4294967295,R=M+(U<<4&4294967295|U>>>28),U=z+(R^M^H)+V[8]+2272392833&4294967295,z=R+(U<<11&4294967295|U>>>21),U=H+(z^R^M)+V[11]+1839030562&4294967295,H=z+(U<<16&4294967295|U>>>16),U=M+(H^z^R)+V[14]+4259657740&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(M^H^z)+V[1]+2763975236&4294967295,R=M+(U<<4&4294967295|U>>>28),U=z+(R^M^H)+V[4]+1272893353&4294967295,z=R+(U<<11&4294967295|U>>>21),U=H+(z^R^M)+V[7]+4139469664&4294967295,H=z+(U<<16&4294967295|U>>>16),U=M+(H^z^R)+V[10]+3200236656&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(M^H^z)+V[13]+681279174&4294967295,R=M+(U<<4&4294967295|U>>>28),U=z+(R^M^H)+V[0]+3936430074&4294967295,z=R+(U<<11&4294967295|U>>>21),U=H+(z^R^M)+V[3]+3572445317&4294967295,H=z+(U<<16&4294967295|U>>>16),U=M+(H^z^R)+V[6]+76029189&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(M^H^z)+V[9]+3654602809&4294967295,R=M+(U<<4&4294967295|U>>>28),U=z+(R^M^H)+V[12]+3873151461&4294967295,z=R+(U<<11&4294967295|U>>>21),U=H+(z^R^M)+V[15]+530742520&4294967295,H=z+(U<<16&4294967295|U>>>16),U=M+(H^z^R)+V[2]+3299628645&4294967295,M=H+(U<<23&4294967295|U>>>9),U=R+(H^(M|~z))+V[0]+4096336452&4294967295,R=M+(U<<6&4294967295|U>>>26),U=z+(M^(R|~H))+V[7]+1126891415&4294967295,z=R+(U<<10&4294967295|U>>>22),U=H+(R^(z|~M))+V[14]+2878612391&4294967295,H=z+(U<<15&4294967295|U>>>17),U=M+(z^(H|~R))+V[5]+4237533241&4294967295,M=H+(U<<21&4294967295|U>>>11),U=R+(H^(M|~z))+V[12]+1700485571&4294967295,R=M+(U<<6&4294967295|U>>>26),U=z+(M^(R|~H))+V[3]+2399980690&4294967295,z=R+(U<<10&4294967295|U>>>22),U=H+(R^(z|~M))+V[10]+4293915773&4294967295,H=z+(U<<15&4294967295|U>>>17),U=M+(z^(H|~R))+V[1]+2240044497&4294967295,M=H+(U<<21&4294967295|U>>>11),U=R+(H^(M|~z))+V[8]+1873313359&4294967295,R=M+(U<<6&4294967295|U>>>26),U=z+(M^(R|~H))+V[15]+4264355552&4294967295,z=R+(U<<10&4294967295|U>>>22),U=H+(R^(z|~M))+V[6]+2734768916&4294967295,H=z+(U<<15&4294967295|U>>>17),U=M+(z^(H|~R))+V[13]+1309151649&4294967295,M=H+(U<<21&4294967295|U>>>11),U=R+(H^(M|~z))+V[4]+4149444226&4294967295,R=M+(U<<6&4294967295|U>>>26),U=z+(M^(R|~H))+V[11]+3174756917&4294967295,z=R+(U<<10&4294967295|U>>>22),U=H+(R^(z|~M))+V[2]+718787259&4294967295,H=z+(U<<15&4294967295|U>>>17),U=M+(z^(H|~R))+V[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(H+(U<<21&4294967295|U>>>11))&4294967295,P.g[2]=P.g[2]+H&4294967295,P.g[3]=P.g[3]+z&4294967295}r.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var M=R-this.blockSize,V=this.B,H=this.h,z=0;z<R;){if(H==0)for(;z<=M;)i(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<R;)if(V[H++]=P.charCodeAt(z++),H==this.blockSize){i(this,V),H=0;break}}else for(;z<R;)if(V[H++]=P[z++],H==this.blockSize){i(this,V),H=0;break}}this.h=H,this.o+=R},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var M=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=M&255,M/=256;for(this.u(P),P=Array(16),R=M=0;4>R;++R)for(var V=0;32>V;V+=8)P[M++]=this.g[R]>>>V&255;return P};function a(P,R){var M=c;return Object.prototype.hasOwnProperty.call(M,P)?M[P]:M[P]=R(P)}function o(P,R){this.h=R;for(var M=[],V=!0,H=P.length-1;0<=H;H--){var z=P[H]|0;V&&z==R||(M[H]=z,V=!1)}this.g=M}var c={};function u(P){return-128<=P&&128>P?a(P,function(R){return new o([R|0],0>R?-1:0)}):new o([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return g;if(0>P)return S(d(-P));for(var R=[],M=1,V=0;P>=M;V++)R[V]=P/M|0,M*=4294967296;return new o(R,0)}function p(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return S(p(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=d(Math.pow(R,8)),V=g,H=0;H<P.length;H+=8){var z=Math.min(8,P.length-H),U=parseInt(P.substring(H,H+z),R);8>z?(z=d(Math.pow(R,z)),V=V.j(z).add(d(U))):(V=V.j(M),V=V.add(d(U)))}return V}var g=u(0),x=u(1),_=u(16777216);n=o.prototype,n.m=function(){if(A(this))return-S(this).m();for(var P=0,R=1,M=0;M<this.g.length;M++){var V=this.i(M);P+=(0<=V?V:4294967296+V)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(A(this))return"-"+S(this).toString(P);for(var R=d(Math.pow(P,6)),M=this,V="";;){var H=j(M,R).g;M=I(M,H.j(R));var z=((0<M.g.length?M.g[0]:M.h)>>>0).toString(P);if(M=H,E(M))return z+V;for(;6>z.length;)z="0"+z;V=z+V}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function A(P){return P.h==-1}n.l=function(P){return P=I(this,P),A(P)?-1:E(P)?0:1};function S(P){for(var R=P.g.length,M=[],V=0;V<R;V++)M[V]=~P.g[V];return new o(M,~P.h).add(x)}n.abs=function(){return A(this)?S(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],V=0,H=0;H<=R;H++){var z=V+(this.i(H)&65535)+(P.i(H)&65535),U=(z>>>16)+(this.i(H)>>>16)+(P.i(H)>>>16);V=U>>>16,z&=65535,U&=65535,M[H]=U<<16|z}return new o(M,M[M.length-1]&-2147483648?-1:0)};function I(P,R){return P.add(S(R))}n.j=function(P){if(E(this)||E(P))return g;if(A(this))return A(P)?S(this).j(S(P)):S(S(this).j(P));if(A(P))return S(this.j(S(P)));if(0>this.l(_)&&0>P.l(_))return d(this.m()*P.m());for(var R=this.g.length+P.g.length,M=[],V=0;V<2*R;V++)M[V]=0;for(V=0;V<this.g.length;V++)for(var H=0;H<P.g.length;H++){var z=this.i(V)>>>16,U=this.i(V)&65535,_e=P.i(H)>>>16,Ee=P.i(H)&65535;M[2*V+2*H]+=U*Ee,N(M,2*V+2*H),M[2*V+2*H+1]+=z*Ee,N(M,2*V+2*H+1),M[2*V+2*H+1]+=U*_e,N(M,2*V+2*H+1),M[2*V+2*H+2]+=z*_e,N(M,2*V+2*H+2)}for(V=0;V<R;V++)M[V]=M[2*V+1]<<16|M[2*V];for(V=R;V<2*R;V++)M[V]=0;return new o(M,0)};function N(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function O(P,R){this.g=P,this.h=R}function j(P,R){if(E(R))throw Error("division by zero");if(E(P))return new O(g,g);if(A(P))return R=j(S(P),R),new O(S(R.g),S(R.h));if(A(R))return R=j(P,S(R)),new O(S(R.g),R.h);if(30<P.g.length){if(A(P)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var M=x,V=R;0>=V.l(P);)M=F(M),V=F(V);var H=q(M,1),z=q(V,1);for(V=q(V,2),M=q(M,2);!E(V);){var U=z.add(V);0>=U.l(P)&&(H=H.add(M),z=U),V=q(V,1),M=q(M,1)}return R=I(P,H.j(R)),new O(H,R)}for(H=g;0<=P.l(R);){for(M=Math.max(1,Math.floor(P.m()/R.m())),V=Math.ceil(Math.log(M)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),z=d(M),U=z.j(R);A(U)||0<U.l(P);)M-=V,z=d(M),U=z.j(R);E(z)&&(z=x),H=H.add(z),P=I(P,U)}return new O(H,P)}n.A=function(P){return j(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],V=0;V<R;V++)M[V]=this.i(V)&P.i(V);return new o(M,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],V=0;V<R;V++)M[V]=this.i(V)|P.i(V);return new o(M,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),M=[],V=0;V<R;V++)M[V]=this.i(V)^P.i(V);return new o(M,this.h^P.h)};function F(P){for(var R=P.g.length+1,M=[],V=0;V<R;V++)M[V]=P.i(V)<<1|P.i(V-1)>>>31;return new o(M,P.h)}function q(P,R){var M=R>>5;R%=32;for(var V=P.g.length-M,H=[],z=0;z<V;z++)H[z]=0<R?P.i(z+M)>>>R|P.i(z+M+1)<<32-R:P.i(z+M);return new o(H,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,ks=o}).apply(typeof Aw<"u"?Aw:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var US,zu,FS,Dh,dg,HS,zS,GS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,b,T){return v==Array.prototype||v==Object.prototype||(v[b]=T.value),v};function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var b=0;b<v.length;++b){var T=v[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(v,b){if(b)e:{var T=r;v=v.split(".");for(var L=0;L<v.length-1;L++){var K=v[L];if(!(K in T))break e;T=T[K]}v=v[v.length-1],L=T[v],b=b(L),b!=L&&b!=null&&e(T,v,{configurable:!0,writable:!0,value:b})}}function a(v,b){v instanceof String&&(v+="");var T=0,L=!1,K={next:function(){if(!L&&T<v.length){var ne=T++;return{value:b(ne,v[ne]),done:!1}}return L=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(v){return v||function(){return a(this,function(b,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(v){var b=typeof v;return b=b!="object"?b:v?Array.isArray(v)?"array":b:"null",b=="array"||b=="object"&&typeof v.length=="number"}function d(v){var b=typeof v;return b=="object"&&v!=null||b=="function"}function p(v,b,T){return v.call.apply(v.bind,arguments)}function g(v,b,T){if(!v)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,L),v.apply(b,K)}}return function(){return v.apply(b,arguments)}}function x(v,b,T){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,x.apply(null,arguments)}function _(v,b){var T=Array.prototype.slice.call(arguments,1);return function(){var L=T.slice();return L.push.apply(L,arguments),v.apply(this,L)}}function E(v,b){function T(){}T.prototype=b.prototype,v.aa=b.prototype,v.prototype=new T,v.prototype.constructor=v,v.Qb=function(L,K,ne){for(var ye=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ye[lt-2]=arguments[lt];return b.prototype[K].apply(L,ye)}}function A(v){const b=v.length;if(0<b){const T=Array(b);for(let L=0;L<b;L++)T[L]=v[L];return T}return[]}function S(v,b){for(let T=1;T<arguments.length;T++){const L=arguments[T];if(u(L)){const K=v.length||0,ne=L.length||0;v.length=K+ne;for(let ye=0;ye<ne;ye++)v[K+ye]=L[ye]}else v.push(L)}}class I{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function N(v){return/^[\s\xa0]*$/.test(v)}function O(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function j(v){return j[" "](v),v}j[" "]=function(){};var F=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function q(v,b,T){for(const L in v)b.call(T,v[L],L,v)}function P(v,b){for(const T in v)b.call(void 0,v[T],T,v)}function R(v){const b={};for(const T in v)b[T]=v[T];return b}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(v,b){let T,L;for(let K=1;K<arguments.length;K++){L=arguments[K];for(T in L)v[T]=L[T];for(let ne=0;ne<M.length;ne++)T=M[ne],Object.prototype.hasOwnProperty.call(L,T)&&(v[T]=L[T])}}function H(v){var b=1;v=v.split(":");const T=[];for(;0<b&&v.length;)T.push(v.shift()),b--;return v.length&&T.push(v.join(":")),T}function z(v){c.setTimeout(()=>{throw v},0)}function U(){var v=He;let b=null;return v.g&&(b=v.g,v.g=v.g.next,v.g||(v.h=null),b.next=null),b}class _e{constructor(){this.h=this.g=null}add(b,T){const L=Ee.get();L.set(b,T),this.h?this.h.next=L:this.g=L,this.h=L}}var Ee=new I(()=>new X,v=>v.reset());class X{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let le,de=!1,He=new _e,$=()=>{const v=c.Promise.resolve(void 0);le=()=>{v.then(ae)}};var ae=()=>{for(var v;v=U();){try{v.h.call(v.g)}catch(T){z(T)}var b=Ee;b.j(v),100>b.h&&(b.h++,v.next=b.g,b.g=v)}de=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(v,b){this.type=v,this.g=this.target=b,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,b=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const T=()=>{};c.addEventListener("test",T,b),c.removeEventListener("test",T,b)}catch{}return v}();function Ve(v,b){if(fe.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var T=this.type=v.type,L=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=b,b=v.relatedTarget){if(F){e:{try{j(b.nodeName);var K=!0;break e}catch{}K=!1}K||(b=null)}}else T=="mouseover"?b=v.fromElement:T=="mouseout"&&(b=v.toElement);this.relatedTarget=b,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Ne[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Ve.aa.h.call(this)}}E(Ve,fe);var Ne={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Bt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function Et(v,b,T,L,K){this.listener=v,this.proxy=null,this.src=b,this.type=T,this.capture=!!L,this.ha=K,this.key=++ht,this.da=this.fa=!1}function gr(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Vn(v){this.src=v,this.g={},this.h=0}Vn.prototype.add=function(v,b,T,L,K){var ne=v.toString();v=this.g[ne],v||(v=this.g[ne]=[],this.h++);var ye=me(v,b,L,K);return-1<ye?(b=v[ye],T||(b.fa=!1)):(b=new Et(b,this.src,ne,!!L,K),b.fa=T,v.push(b)),b};function Tr(v,b){var T=b.type;if(T in v.g){var L=v.g[T],K=Array.prototype.indexOf.call(L,b,void 0),ne;(ne=0<=K)&&Array.prototype.splice.call(L,K,1),ne&&(gr(b),v.g[T].length==0&&(delete v.g[T],v.h--))}}function me(v,b,T,L){for(var K=0;K<v.length;++K){var ne=v[K];if(!ne.da&&ne.listener==b&&ne.capture==!!T&&ne.ha==L)return K}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),we={};function be(v,b,T,L,K){if(Array.isArray(b)){for(var ne=0;ne<b.length;ne++)be(v,b[ne],T,L,K);return null}return T=ot(T),v&&v[Bt]?v.K(b,T,d(L)?!!L.capture:!1,K):Ie(v,b,T,!1,L,K)}function Ie(v,b,T,L,K,ne){if(!b)throw Error("Invalid event type");var ye=d(K)?!!K.capture:!!K,lt=Cr(v);if(lt||(v[ve]=lt=new Vn(v)),T=lt.add(b,T,L,ye,ne),T.proxy)return T;if(L=ze(),T.proxy=L,L.src=v,L.listener=T,v.addEventListener)Te||(K=ye),K===void 0&&(K=!1),v.addEventListener(b.toString(),L,K);else if(v.attachEvent)v.attachEvent(zt(b.toString()),L);else if(v.addListener&&v.removeListener)v.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ze(){function v(T){return b.call(v.src,v.listener,T)}const b=Jt;return v}function rt(v,b,T,L,K){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)rt(v,b[ne],T,L,K);else L=d(L)?!!L.capture:!!L,T=ot(T),v&&v[Bt]?(v=v.i,b=String(b).toString(),b in v.g&&(ne=v.g[b],T=me(ne,T,L,K),-1<T&&(gr(ne[T]),Array.prototype.splice.call(ne,T,1),ne.length==0&&(delete v.g[b],v.h--)))):v&&(v=Cr(v))&&(b=v.g[b.toString()],v=-1,b&&(v=me(b,T,L,K)),(T=-1<v?b[v]:null)&&Vt(T))}function Vt(v){if(typeof v!="number"&&v&&!v.da){var b=v.src;if(b&&b[Bt])Tr(b.i,v);else{var T=v.type,L=v.proxy;b.removeEventListener?b.removeEventListener(T,L,v.capture):b.detachEvent?b.detachEvent(zt(T),L):b.addListener&&b.removeListener&&b.removeListener(L),(T=Cr(b))?(Tr(T,v),T.h==0&&(T.src=null,b[ve]=null)):gr(v)}}}function zt(v){return v in we?we[v]:we[v]="on"+v}function Jt(v,b){if(v.da)v=!0;else{b=new Ve(b,this);var T=v.listener,L=v.ha||v.src;v.fa&&Vt(v),v=T.call(L,b)}return v}function Cr(v){return v=v[ve],v instanceof Vn?v:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(v){return typeof v=="function"?v:(v[Re]||(v[Re]=function(b){return v.handleEvent(b)}),v[Re])}function it(){he.call(this),this.i=new Vn(this),this.M=this,this.F=null}E(it,he),it.prototype[Bt]=!0,it.prototype.removeEventListener=function(v,b,T,L){rt(this,v,b,T,L)};function Me(v,b){var T,L=v.F;if(L)for(T=[];L;L=L.F)T.push(L);if(v=v.M,L=b.type||b,typeof b=="string")b=new fe(b,v);else if(b instanceof fe)b.target=b.target||v;else{var K=b;b=new fe(L,v),V(b,K)}if(K=!0,T)for(var ne=T.length-1;0<=ne;ne--){var ye=b.g=T[ne];K=Rt(ye,L,!0,b)&&K}if(ye=b.g=v,K=Rt(ye,L,!0,b)&&K,K=Rt(ye,L,!1,b)&&K,T)for(ne=0;ne<T.length;ne++)ye=b.g=T[ne],K=Rt(ye,L,!1,b)&&K}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var v=this.i,b;for(b in v.g){for(var T=v.g[b],L=0;L<T.length;L++)gr(T[L]);delete v.g[b],v.h--}}this.F=null},it.prototype.K=function(v,b,T,L){return this.i.add(String(v),b,!1,T,L)},it.prototype.L=function(v,b,T,L){return this.i.add(String(v),b,!0,T,L)};function Rt(v,b,T,L){if(b=v.i.g[String(b)],!b)return!0;b=b.concat();for(var K=!0,ne=0;ne<b.length;++ne){var ye=b[ne];if(ye&&!ye.da&&ye.capture==T){var lt=ye.listener,Sn=ye.ha||ye.src;ye.fa&&Tr(v.i,ye),K=lt.call(Sn,L)!==!1&&K}}return K&&!L.defaultPrevented}function pt(v,b,T){if(typeof v=="function")T&&(v=x(v,T));else if(v&&typeof v.handleEvent=="function")v=x(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:c.setTimeout(v,b||0)}function hi(v){v.g=pt(()=>{v.g=null,v.i&&(v.i=!1,hi(v))},v.l);const b=v.h;v.h=null,v.m.apply(null,b)}class vr extends he{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:hi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(v){he.call(this),this.h=v,this.g={}}E(Vr,he);var aa=[];function pi(v){q(v.g,function(b,T){this.g.hasOwnProperty(T)&&Vt(b)},v),v.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),pi(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ur=c.JSON.stringify,Wo=c.JSON.parse,$s=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Tc(){}Tc.prototype.h=null;function Cc(v){return v.h||(v.h=v.i())}function Ic(){}var sa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oa(){fe.call(this,"d")}E(oa,fe);function Nc(){fe.call(this,"c")}E(Nc,fe);var Oi={},Rc=null;function Qa(){return Rc=Rc||new it}Oi.La="serverreachability";function Xo(v){fe.call(this,Oi.La,v)}E(Xo,fe);function Za(v){const b=Qa();Me(b,new Xo(b))}Oi.STAT_EVENT="statevent";function Ff(v,b){fe.call(this,Oi.STAT_EVENT,v),this.stat=b}E(Ff,fe);function Yt(v){const b=Qa();Me(b,new Ff(b,v))}Oi.Ma="timingevent";function An(v,b){fe.call(this,Oi.Ma,v),this.size=b}E(An,fe);function gn(v,b){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},b)}function Yr(){this.g=!0}Yr.prototype.xa=function(){this.g=!1};function Oc(v,b,T,L,K,ne){v.info(function(){if(v.g)if(ne)for(var ye="",lt=ne.split("&"),Sn=0;Sn<lt.length;Sn++){var ct=lt[Sn].split("=");if(1<ct.length){var Fn=ct[0];ct=ct[1];var Tn=Fn.split("_");ye=2<=Tn.length&&Tn[1]=="type"?ye+(Fn+"="+ct+"&"):ye+(Fn+"=redacted&")}}else ye=null;else ye=ne;return"XMLHTTP REQ ("+L+") [attempt "+K+"]: "+b+`
`+T+`
`+ye})}function t1(v,b,T,L,K,ne,ye){v.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+K+"]: "+b+`
`+T+`
`+ne+" "+ye})}function Ja(v,b,T,L){v.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ws(v,T)+(L?" "+L:"")})}function Hf(v,b){v.info(function(){return"TIMEOUT: "+b})}Yr.prototype.info=function(){};function Ws(v,b){if(!v.g)return b;if(!b)return null;try{var T=JSON.parse(b);if(T){for(v=0;v<T.length;v++)if(Array.isArray(T[v])){var L=T[v];if(!(2>L.length)){var K=L[1];if(Array.isArray(K)&&!(1>K.length)){var ne=K[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ye=1;ye<K.length;ye++)K[ye]=""}}}}return Ur(T)}catch{return b}}var es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},la={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Di;function Pi(){}E(Pi,Tc),Pi.prototype.g=function(){return new XMLHttpRequest},Pi.prototype.i=function(){return{}},Di=new Pi;function yr(v,b,T,L){this.j=v,this.i=b,this.l=T,this.R=L||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var Dc={},Yo={};function mi(v,b,T){v.L=1,v.v=Zs(Fr(b)),v.m=T,v.P=!0,ca(v,null)}function ca(v,b){v.F=Date.now(),Xs(v),v.A=Fr(v.v);var T=v.A,L=v.R;Array.isArray(L)||(L=[String(L)]),Bc(T.i,"t",L),v.C=0,T=v.j.J,v.h=new un,v.g=id(v.j,T?b:null,!v.m),0<v.O&&(v.M=new vr(x(v.Y,v,v.g),v.O)),b=v.U,T=v.g,L=v.ca;var K="readystatechange";Array.isArray(K)||(K&&(aa[0]=K.toString()),K=aa);for(var ne=0;ne<K.length;ne++){var ye=be(T,K[ne],L||b.handleEvent,!1,b.h||b);if(!ye)break;b.g[ye.key]=ye}b=v.H?R(v.H):{},v.m?(v.u||(v.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,b)):(v.u="GET",v.g.ea(v.A,v.u,null,b)),Za(),Oc(v.i,v.u,v.A,v.l,v.R,v.m)}yr.prototype.ca=function(v){v=v.target;const b=this.M;b&&Jr(v)==3?b.j():this.Y(v)},yr.prototype.Y=function(v){try{if(v==this.g)e:{const Tn=Jr(this.g);var b=this.g.Ba();const va=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||Kf(this.g)))){this.J||Tn!=4||b==7||(b==8||0>=va?Za(3):Za(2)),ts(this);var T=this.g.Z();this.X=T;t:if(zf(this)){var L=Kf(this.g);v="";var K=L.length,ne=Jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kn(this),Mi(this);var ye="";break t}this.h.i=new c.TextDecoder}for(b=0;b<K;b++)this.h.h=!0,v+=this.h.i.decode(L[b],{stream:!(ne&&b==K-1)});L.length=0,this.h.g+=v,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=T==200,t1(this.i,this.u,this.A,this.l,this.R,Tn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,Sn=this.g;if((lt=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(lt)){var ct=lt;break t}}ct=null}if(T=ct)Ja(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ys(this,T);else{this.o=!1,this.s=3,Yt(12),Kn(this),Mi(this);break e}}if(this.P){T=!0;let Qn;for(;!this.J&&this.C<ye.length;)if(Qn=Gf(this,ye),Qn==Yo){Tn==4&&(this.s=4,Yt(14),T=!1),Ja(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==Dc){this.s=4,Yt(15),Ja(this.i,this.l,ye,"[Invalid Chunk]"),T=!1;break}else Ja(this.i,this.l,Qn,null),Ys(this,Qn);if(zf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||ye.length!=0||this.h.h||(this.s=1,Yt(16),T=!1),this.o=this.o&&T,!T)Ja(this.i,this.l,ye,"[Invalid Chunked Response]"),Kn(this),Mi(this);else if(0<ye.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),so(Fn),Fn.M=!0,Yt(11))}}else Ja(this.i,this.l,ye,null),Ys(this,ye);Tn==4&&Kn(this),this.o&&!this.J&&(Tn==4?td(this.j,this):(this.o=!1,Xs(this)))}else s1(this.g),T==400&&0<ye.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Kn(this),Mi(this)}}}catch{}finally{}};function zf(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function Gf(v,b){var T=v.C,L=b.indexOf(`
`,T);return L==-1?Yo:(T=Number(b.substring(T,L)),isNaN(T)?Dc:(L+=1,L+T>b.length?Yo:(b=b.slice(L,L+T),v.C=L+T,b)))}yr.prototype.cancel=function(){this.J=!0,Kn(this)};function Xs(v){v.S=Date.now()+v.I,qf(v,v.I)}function qf(v,b){if(v.B!=null)throw Error("WatchDog timer not null");v.B=gn(x(v.ba,v),b)}function ts(v){v.B&&(c.clearTimeout(v.B),v.B=null)}yr.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Hf(this.i,this.A),this.L!=2&&(Za(),Yt(17)),Kn(this),this.s=2,Mi(this)):qf(this,this.S-v)};function Mi(v){v.j.G==0||v.J||td(v.j,v)}function Kn(v){ts(v);var b=v.M;b&&typeof b.ma=="function"&&b.ma(),v.M=null,pi(v.U),v.g&&(b=v.g,v.g=null,b.abort(),b.ma())}function Ys(v,b){try{var T=v.j;if(T.G!=0&&(T.g==v||Pc(T.h,v))){if(!v.K&&Pc(T.h,v)&&T.G==3){try{var L=T.Da.g.parse(b)}catch{L=null}if(Array.isArray(L)&&L.length==3){var K=L;if(K[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<v.F)ol(T),al(T);else break e;zc(T),Yt(18)}}else T.za=K[1],0<T.za-T.T&&37500>K[2]&&T.F&&T.v==0&&!T.C&&(T.C=gn(x(T.Za,T),6e3));if(1>=Qo(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ga(T,11)}else if((v.K||T.g==v)&&ol(T),!N(b))for(K=T.Da.g.parse(b),b=0;b<K.length;b++){let ct=K[b];if(T.T=ct[0],ct=ct[1],T.G==2)if(ct[0]=="c"){T.K=ct[1],T.ia=ct[2];const Fn=ct[3];Fn!=null&&(T.la=Fn,T.j.info("VER="+T.la));const Tn=ct[4];Tn!=null&&(T.Aa=Tn,T.j.info("SVER="+T.Aa));const va=ct[5];va!=null&&typeof va=="number"&&0<va&&(L=1.5*va,T.L=L,T.j.info("backChannelRequestTimeoutMs_="+L)),L=T;const Qn=v.g;if(Qn){const Fi=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var ne=L.h;ne.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Zo(ne,ne.h),ne.h=null))}if(L.D){const qc=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;qc&&(L.ya=qc,Ot(L.I,L.D,qc))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-v.F,T.j.info("Handshake RTT: "+T.R+"ms")),L=T;var ye=v;if(L.qa=rd(L,L.J?L.ia:null,L.W),ye.K){xr(L.h,ye);var lt=ye,Sn=L.L;Sn&&(lt.I=Sn),lt.B&&(ts(lt),Xs(lt)),L.g=ye}else Jf(L);0<T.i.length&&sl(T)}else ct[0]!="stop"&&ct[0]!="close"||ga(T,7);else T.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ga(T,7):Fc(T):ct[0]!="noop"&&T.l&&T.l.ta(ct),T.v=0)}}Za(4)}catch{}}var $f=class{constructor(v,b){this.g=v,this.map=b}};function ua(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ko(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Qo(v){return v.h?1:v.g?v.g.size:0}function Pc(v,b){return v.h?v.h==b:v.g?v.g.has(b):!1}function Zo(v,b){v.g?v.g.add(b):v.h=b}function xr(v,b){v.h&&v.h==b?v.h=null:v.g&&v.g.has(b)&&v.g.delete(b)}ua.prototype.cancel=function(){if(this.i=Mc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Mc(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let b=v.i;for(const T of v.g.values())b=b.concat(T.D);return b}return A(v.i)}function n1(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(u(v)){for(var b=[],T=v.length,L=0;L<T;L++)b.push(v[L]);return b}b=[],T=0;for(L in v)b[T++]=v[L];return b}function Jo(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(u(v)||typeof v=="string"){var b=[];v=v.length;for(var T=0;T<v;T++)b.push(T);return b}b=[],T=0;for(const L in v)b[T++]=L;return b}}}function kc(v,b){if(v.forEach&&typeof v.forEach=="function")v.forEach(b,void 0);else if(u(v)||typeof v=="string")Array.prototype.forEach.call(v,b,void 0);else for(var T=Jo(v),L=n1(v),K=L.length,ne=0;ne<K;ne++)b.call(void 0,L[ne],T&&T[ne],v)}var Ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r1(v,b){if(v){v=v.split("&");for(var T=0;T<v.length;T++){var L=v[T].indexOf("="),K=null;if(0<=L){var ne=v[T].substring(0,L);K=v[T].substring(L+1)}else ne=v[T];b(ne,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function vn(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof vn){this.h=v.h,Qs(this,v.j),this.o=v.o,this.g=v.g,ns(this,v.s),this.l=v.l;var b=v.i,T=new da;T.i=b.i,b.g&&(T.g=new Map(b.g),T.h=b.h),fa(this,T),this.m=v.m}else v&&(b=String(v).match(Ks))?(this.h=!1,Qs(this,b[1]||"",!0),this.o=Kr(b[2]||""),this.g=Kr(b[3]||"",!0),ns(this,b[4]),this.l=Kr(b[5]||"",!0),fa(this,b[6]||"",!0),this.m=Kr(b[7]||"")):(this.h=!1,this.i=new da(null,this.h))}vn.prototype.toString=function(){var v=[],b=this.j;b&&v.push(Js(b,Lc,!0),":");var T=this.g;return(T||b=="file")&&(v.push("//"),(b=this.o)&&v.push(Js(b,Lc,!0),"@"),v.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&v.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&v.push("/"),v.push(Js(T,T.charAt(0)=="/"?i1:jc,!0))),(T=this.i.toString())&&v.push("?",T),(T=this.m)&&v.push("#",Js(T,el)),v.join("")};function Fr(v){return new vn(v)}function Qs(v,b,T){v.j=T?Kr(b,!0):b,v.j&&(v.j=v.j.replace(/:$/,""))}function ns(v,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);v.s=b}else v.s=null}function fa(v,b,T){b instanceof da?(v.i=b,Xf(v.i,v.h)):(T||(b=Js(b,a1)),v.i=new da(b,v.h))}function Ot(v,b,T){v.i.set(b,T)}function Zs(v){return Ot(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Kr(v,b){return v?b?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Js(v,b,T){return typeof v=="string"?(v=encodeURI(v).replace(b,Wf),T&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Wf(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Lc=/[#\/\?@]/g,jc=/[#\?:]/g,i1=/[#\?]/g,a1=/[#\?@]/g,el=/#/g;function da(v,b){this.h=this.g=null,this.i=v||null,this.j=!!b}function Qr(v){v.g||(v.g=new Map,v.h=0,v.i&&r1(v.i,function(b,T){v.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}n=da.prototype,n.add=function(v,b){Qr(this),this.i=null,v=ki(this,v);var T=this.g.get(v);return T||this.g.set(v,T=[]),T.push(b),this.h+=1,this};function ha(v,b){Qr(v),b=ki(v,b),v.g.has(b)&&(v.i=null,v.h-=v.g.get(b).length,v.g.delete(b))}function pa(v,b){return Qr(v),b=ki(v,b),v.g.has(b)}n.forEach=function(v,b){Qr(this),this.g.forEach(function(T,L){T.forEach(function(K){v.call(b,K,L,this)},this)},this)},n.na=function(){Qr(this);const v=Array.from(this.g.values()),b=Array.from(this.g.keys()),T=[];for(let L=0;L<b.length;L++){const K=v[L];for(let ne=0;ne<K.length;ne++)T.push(b[L])}return T},n.V=function(v){Qr(this);let b=[];if(typeof v=="string")pa(this,v)&&(b=b.concat(this.g.get(ki(this,v))));else{v=Array.from(this.g.values());for(let T=0;T<v.length;T++)b=b.concat(v[T])}return b},n.set=function(v,b){return Qr(this),this.i=null,v=ki(this,v),pa(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[b]),this.h+=1,this},n.get=function(v,b){return v?(v=this.V(v),0<v.length?String(v[0]):b):b};function Bc(v,b,T){ha(v,b),0<T.length&&(v.i=null,v.g.set(ki(v,b),A(T)),v.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],b=Array.from(this.g.keys());for(var T=0;T<b.length;T++){var L=b[T];const ne=encodeURIComponent(String(L)),ye=this.V(L);for(L=0;L<ye.length;L++){var K=ne;ye[L]!==""&&(K+="="+encodeURIComponent(String(ye[L]))),v.push(K)}}return this.i=v.join("&")};function ki(v,b){return b=String(b),v.j&&(b=b.toLowerCase()),b}function Xf(v,b){b&&!v.j&&(Qr(v),v.i=null,v.g.forEach(function(T,L){var K=L.toLowerCase();L!=K&&(ha(this,L),Bc(this,K,T))},v)),v.j=b}function eo(v,b){const T=new Yr;if(c.Image){const L=new Image;L.onload=_(Zr,T,"TestLoadImage: loaded",!0,b,L),L.onerror=_(Zr,T,"TestLoadImage: error",!1,b,L),L.onabort=_(Zr,T,"TestLoadImage: abort",!1,b,L),L.ontimeout=_(Zr,T,"TestLoadImage: timeout",!1,b,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=v}else b(!1)}function gi(v,b){const T=new Yr,L=new AbortController,K=setTimeout(()=>{L.abort(),Zr(T,"TestPingServer: timeout",!1,b)},1e4);fetch(v,{signal:L.signal}).then(ne=>{clearTimeout(K),ne.ok?Zr(T,"TestPingServer: ok",!0,b):Zr(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(K),Zr(T,"TestPingServer: error",!1,b)})}function Zr(v,b,T,L,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),L(T)}catch{}}function to(){this.g=new $s}function Li(v,b,T){const L=T||"";try{kc(v,function(K,ne){let ye=K;d(K)&&(ye=Ur(K)),b.push(L+ne+"="+encodeURIComponent(ye))})}catch(K){throw b.push(L+"type="+encodeURIComponent("_badmap")),K}}function rs(v){this.l=v.Ub||null,this.j=v.eb||!1}E(rs,Tc),rs.prototype.g=function(){return new ma(this.l,this.j)},rs.prototype.i=function(v){return function(){return v}}({});function ma(v,b){it.call(this),this.D=v,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(ma,it),n=ma.prototype,n.open=function(v,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=b,this.readyState=1,Bi(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(b.body=v),(this.D||c).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vc(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vc(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var b=v.value?v.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!v.done}))&&(this.response=this.responseText+=b)}v.done?ji(this):Bi(this),this.readyState==3&&Vc(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,ji(this))},n.Qa=function(v){this.g&&(this.response=v,ji(this))},n.ga=function(){this.g&&ji(this)};function ji(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Bi(v)}n.setRequestHeader=function(v,b){this.u.append(v,b)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,v.push(T[0]+": "+T[1]),T=b.next();return v.join(`\r
`)};function Bi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Uc(v){let b="";return q(v,function(T,L){b+=L,b+=":",b+=T,b+=`\r
`}),b}function Un(v,b,T){e:{for(L in T){var L=!1;break e}L=!0}L||(T=Uc(T),typeof v=="string"?T!=null&&encodeURIComponent(String(T)):Ot(v,b,T))}function bt(v){it.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(bt,it);var tl=/^https?$/i,no=["POST","PUT"];n=bt.prototype,n.Ha=function(v){this.J=v},n.ea=function(v,b,T,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);b=b?b.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Di.g(),this.v=this.o?Cc(this.o):Cc(Di),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(b,String(v),!0),this.B=!1}catch(ne){Yf(this,ne);return}if(v=T||"",T=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var K in L)T.set(K,L[K]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ne of L.keys())T.set(ne,L.get(ne));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),K=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(no,b,void 0))||L||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ye]of T)this.g.setRequestHeader(ne,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(v),this.u=!1}catch(ne){Yf(this,ne)}};function Yf(v,b){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=b,v.m=5,nl(v),Vi(v)}function nl(v){v.A||(v.A=!0,Me(v,"complete"),Me(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Me(this,"complete"),Me(this,"abort"),Vi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vi(this,!0)),bt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rl(this):this.bb())},n.bb=function(){rl(this)};function rl(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Jr(v)!=4||v.Z()!=2)){if(v.u&&Jr(v)==4)pt(v.Ea,0,v);else if(Me(v,"readystatechange"),Jr(v)==4){v.h=!1;try{const ye=v.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var L;if(L=ye===0){var K=String(v.D).match(Ks)[1]||null;!K&&c.self&&c.self.location&&(K=c.self.location.protocol.slice(0,-1)),L=!tl.test(K?K.toLowerCase():"")}T=L}if(T)Me(v,"complete"),Me(v,"success");else{v.m=6;try{var ne=2<Jr(v)?v.g.statusText:""}catch{ne=""}v.l=ne+" ["+v.Z()+"]",nl(v)}}finally{Vi(v)}}}}function Vi(v,b){if(v.g){ro(v);const T=v.g,L=v.v[0]?()=>{}:null;v.g=null,v.v=null,b||Me(v,"ready");try{T.onreadystatechange=L}catch{}}}function ro(v){v.I&&(c.clearTimeout(v.I),v.I=null)}n.isActive=function(){return!!this.g};function Jr(v){return v.g?v.g.readyState:0}n.Z=function(){try{return 2<Jr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var b=this.g.responseText;return v&&b.indexOf(v)==0&&(b=b.substring(v.length)),Wo(b)}};function Kf(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function s1(v){const b={};v=(v.g&&2<=Jr(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<v.length;L++){if(N(v[L]))continue;var T=H(v[L]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=b[K]||[];b[K]=ne,ne.push(T)}P(b,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(v,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[v]||b}function il(v){this.Aa=0,this.i=[],this.j=new Yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,v),this.cb=io("retryDelaySeedMs",1e4,v),this.Wa=io("forwardChannelMaxRetries",2,v),this.wa=io("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new ua(v&&v.concurrentRequestLimit),this.Da=new to,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=il.prototype,n.la=8,n.G=1,n.connect=function(v,b,T,L){Yt(0),this.W=v,this.H=b||{},T&&L!==void 0&&(this.H.OSID=T,this.H.OAID=L),this.F=this.X,this.I=rd(this,null,this.W),sl(this)};function Fc(v){if(Qf(v),v.G==3){var b=v.U++,T=Fr(v.I);if(Ot(T,"SID",v.K),Ot(T,"RID",b),Ot(T,"TYPE","terminate"),ao(v,T),b=new yr(v,v.j,b),b.L=2,b.v=Zs(Fr(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(b.v.toString(),"")}catch{}!T&&c.Image&&(new Image().src=b.v,T=!0),T||(b.g=id(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Xs(b)}nd(v)}function al(v){v.g&&(so(v),v.g.cancel(),v.g=null)}function Qf(v){al(v),v.u&&(c.clearTimeout(v.u),v.u=null),ol(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function sl(v){if(!Ko(v.h)&&!v.s){v.s=!0;var b=v.Ga;le||$(),de||(le(),de=!0),He.add(b,v),v.B=0}}function o1(v,b){return Qo(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=b.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=gn(x(v.Ga,v,b),Gc(v,v.B)),v.B++,!0)}n.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const K=new yr(this,this.j,v);let ne=this.o;if(this.S&&(ne?(ne=R(ne),V(ne,this.S)):ne=this.S),this.m!==null||this.O||(K.H=ne,ne=null),this.P)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var L=this.i[T];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(b+=L,4096<b){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=Zf(this,K,b),T=Fr(this.I),Ot(T,"RID",v),Ot(T,"CVER",22),this.D&&Ot(T,"X-HTTP-Session-Id",this.D),ao(this,T),ne&&(this.O?b="headers="+encodeURIComponent(String(Uc(ne)))+"&"+b:this.m&&Un(T,this.m,ne)),Zo(this.h,K),this.Ua&&Ot(T,"TYPE","init"),this.P?(Ot(T,"$req",b),Ot(T,"SID","null"),K.T=!0,mi(K,T,null)):mi(K,T,b),this.G=2}}else this.G==3&&(v?Hc(this,v):this.i.length==0||Ko(this.h)||Hc(this))};function Hc(v,b){var T;b?T=b.l:T=v.U++;const L=Fr(v.I);Ot(L,"SID",v.K),Ot(L,"RID",T),Ot(L,"AID",v.T),ao(v,L),v.m&&v.o&&Un(L,v.m,v.o),T=new yr(v,v.j,T,v.B+1),v.m===null&&(T.H=v.o),b&&(v.i=b.D.concat(v.i)),b=Zf(v,T,1e3),T.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Zo(v.h,T),mi(T,L,b)}function ao(v,b){v.H&&q(v.H,function(T,L){Ot(b,L,T)}),v.l&&kc({},function(T,L){Ot(b,L,T)})}function Zf(v,b,T){T=Math.min(v.i.length,T);var L=v.l?x(v.l.Na,v.l,v):null;e:{var K=v.i;let ne=-1;for(;;){const ye=["count="+T];ne==-1?0<T?(ne=K[0].g,ye.push("ofs="+ne)):ne=0:ye.push("ofs="+ne);let lt=!0;for(let Sn=0;Sn<T;Sn++){let ct=K[Sn].g;const Fn=K[Sn].map;if(ct-=ne,0>ct)ne=Math.max(0,K[Sn].g-100),lt=!1;else try{Li(Fn,ye,"req"+ct+"_")}catch{L&&L(Fn)}}if(lt){L=ye.join("&");break e}}}return v=v.i.splice(0,T),b.D=v,L}function Jf(v){if(!v.g&&!v.u){v.Y=1;var b=v.Fa;le||$(),de||(le(),de=!0),He.add(b,v),v.v=0}}function zc(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=gn(x(v.Fa,v),Gc(v,v.v)),v.v++,!0)}n.Fa=function(){if(this.u=null,ed(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=gn(x(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),al(this),ed(this))};function so(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function ed(v){v.g=new yr(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var b=Fr(v.qa);Ot(b,"RID","rpc"),Ot(b,"SID",v.K),Ot(b,"AID",v.T),Ot(b,"CI",v.F?"0":"1"),!v.F&&v.ja&&Ot(b,"TO",v.ja),Ot(b,"TYPE","xmlhttp"),ao(v,b),v.m&&v.o&&Un(b,v.m,v.o),v.L&&(v.g.I=v.L);var T=v.g;v=v.ia,T.L=1,T.v=Zs(Fr(b)),T.m=null,T.P=!0,ca(T,v)}n.Za=function(){this.C!=null&&(this.C=null,al(this),zc(this),Yt(19))};function ol(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function td(v,b){var T=null;if(v.g==b){ol(v),so(v),v.g=null;var L=2}else if(Pc(v.h,b))T=b.D,xr(v.h,b),L=1;else return;if(v.G!=0){if(b.o)if(L==1){T=b.m?b.m.length:0,b=Date.now()-b.F;var K=v.B;L=Qa(),Me(L,new An(L,T)),sl(v)}else Jf(v);else if(K=b.s,K==3||K==0&&0<b.X||!(L==1&&o1(v,b)||L==2&&zc(v)))switch(T&&0<T.length&&(b=v.h,b.i=b.i.concat(T)),K){case 1:ga(v,5);break;case 4:ga(v,10);break;case 3:ga(v,6);break;default:ga(v,2)}}}function Gc(v,b){let T=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(T*=2),T*b}function ga(v,b){if(v.j.info("Error code "+b),b==2){var T=x(v.fb,v),L=v.Xa;const K=!L;L=new vn(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qs(L,"https"),Zs(L),K?eo(L.toString(),T):gi(L.toString(),T)}else Yt(2);v.G=0,v.l&&v.l.sa(b),nd(v),Qf(v)}n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function nd(v){if(v.G=0,v.ka=[],v.l){const b=Mc(v.h);(b.length!=0||v.i.length!=0)&&(S(v.ka,b),S(v.ka,v.i),v.h.i.length=0,A(v.i),v.i.length=0),v.l.ra()}}function rd(v,b,T){var L=T instanceof vn?Fr(T):new vn(T);if(L.g!="")b&&(L.g=b+"."+L.g),ns(L,L.s);else{var K=c.location;L=K.protocol,b=b?b+"."+K.hostname:K.hostname,K=+K.port;var ne=new vn(null);L&&Qs(ne,L),b&&(ne.g=b),K&&ns(ne,K),T&&(ne.l=T),L=ne}return T=v.D,b=v.ya,T&&b&&Ot(L,T,b),Ot(L,"VER",v.la),ao(v,L),L}function id(v,b,T){if(b&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=v.Ca&&!v.pa?new bt(new rs({eb:T})):new bt(v.pa),b.Ha(v.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ad(){}n=ad.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ll(){}ll.prototype.g=function(v,b){return new _r(v,b)};function _r(v,b){it.call(this),this.g=new il(b),this.l=v,this.h=b&&b.messageUrlParams||null,v=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(v?v["X-WebChannel-Content-Type"]=b.messageContentType:v={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(v?v["X-WebChannel-Client-Profile"]=b.va:v={"X-WebChannel-Client-Profile":b.va}),this.g.S=v,(v=b&&b.Sb)&&!N(v)&&(this.g.m=v),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.D=b,v=this.h,v!==null&&b in v&&(v=this.h,b in v&&delete v[b])),this.j=new Ui(this)}E(_r,it),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Fc(this.g)},_r.prototype.o=function(v){var b=this.g;if(typeof v=="string"){var T={};T.__data__=v,v=T}else this.u&&(T={},T.__data__=Ur(v),v=T);b.i.push(new $f(b.Ya++,v)),b.G==3&&sl(b)},_r.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,_r.aa.N.call(this)};function sd(v){oa.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var b=v.__sm__;if(b){e:{for(const T in b){v=T;break e}v=void 0}(this.i=v)&&(v=this.i,b=b!==null&&v in b?b[v]:void 0),this.data=b}else this.data=v}E(sd,oa);function od(){Nc.call(this),this.status=1}E(od,Nc);function Ui(v){this.g=v}E(Ui,ad),Ui.prototype.ua=function(){Me(this.g,"a")},Ui.prototype.ta=function(v){Me(this.g,new sd(v))},Ui.prototype.sa=function(v){Me(this.g,new od)},Ui.prototype.ra=function(){Me(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,GS=function(){return new ll},zS=function(){return Qa()},HS=Oi,dg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,Dh=es,la.COMPLETE="complete",FS=la,Ic.EventType=sa,sa.OPEN="a",sa.CLOSE="b",sa.ERROR="c",sa.MESSAGE="d",it.prototype.listen=it.prototype.K,zu=Ic,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,US=bt}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});const Sw="@firebase/firestore",Tw="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Wg("@firebase/firestore");function Vl(){return Vo.logLevel}function Ae(n,...e){if(Vo.logLevel<=at.DEBUG){const t=e.map(yv);Vo.debug(`Firestore (${_c}): ${n}`,...t)}}function $a(n,...e){if(Vo.logLevel<=at.ERROR){const t=e.map(yv);Vo.error(`Firestore (${_c}): ${n}`,...t)}}function ec(n,...e){if(Vo.logLevel<=at.WARN){const t=e.map(yv);Vo.warn(`Firestore (${_c}): ${n}`,...t)}}function yv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,qS(n,r,t)}function qS(n,e,t){let r=`FIRESTORE (${_c}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $a(r),new Error(r)}function St(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||qS(e,i,r)}function $e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Xa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class GD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qD{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){St(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ls,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ls)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new $S(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class $D{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $D(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){St(this.o===void 0,3512);const r=a=>{a.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=YD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function hg(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Qe(r,i);{const a=WS(),o=KD(a.encode(Iw(n,t)),a.encode(Iw(e,t)));return o!==0?o:Qe(r,i)}}t+=r>65535?2:1}return Qe(n.length,e.length)}function Iw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function KD(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Qe(n[t],e[t]);return Qe(n.length,e.length)}function tc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=-62135596800,Rw=1e6;class Ln{static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Rw);return new Ln(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Nw)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rw}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Nw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Ln(0,0))}static max(){return new Ge(new Ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="__name__";class Yi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Yi.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Qe(e.length,t.length)}static compareSegments(e,t){const r=Yi.isNumericId(e),i=Yi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Yi.extractNumericId(e).compare(Yi.extractNumericId(t)):hg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}}class ln extends Yi{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const QD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Yi{construct(e,t,r){return new ir(e,t,r)}static isValidIdentifier(e){return QD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ow}static keyField(){return new ir([Ow])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Le(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Le(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Le(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Le(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(t)}static emptyPath(){return new ir([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(ln.fromString(e))}static fromName(e){return new je(ln.fromString(e).popFirst(5))}static empty(){return new je(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ln.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new ln(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=-1;function ZD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ge.fromTimestamp(r===1e9?new Ln(t+1,0):new Ln(t,r));return new Vs(i,je.empty(),e)}function JD(n){return new Vs(n.readTime,n.key,df)}class Vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vs(Ge.min(),je.empty(),df)}static max(){return new Vs(Ge.max(),je.empty(),df)}}function e7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==t7)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&t()},u=>r(u))}),o=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;t(e[d]).next(p=>{o[d]=p,++c,c===a&&r(o)},p=>i(p))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function r7(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ec(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}B0.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=-1;function V0(n){return n==null}function Qh(n){return n===0&&1/n==-1/0}function i7(n){return typeof n=="number"&&Number.isInteger(n)&&!Qh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="";function a7(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dw(e)),e=s7(n.get(t),e);return Dw(e)}function s7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case YS:t+="";break;default:t+=a}}return t}function Dw(n){return n+YS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new an(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??rr.RED,this.left=i??rr.EMPTY,this.right=a??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new rr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mw(this.data.getIterator())}getIteratorFrom(e){return new Mw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class Mw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new Si([])}unionWith(e){let t=new jn(ir.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Si(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new QS("Invalid base64 string: "+a):a}}(e);return new sr(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const o7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(n){if(St(!!n,39018),typeof n=="string"){let e=0;const t=o7.exec(n);if(St(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(n.seconds),nanos:pn(n.nanos)}}function pn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fs(n){return typeof n=="string"?sr.fromBase64String(n):sr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="server_timestamp",JS="__type__",eT="__previous_value__",tT="__local_write_time__";function _v(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[JS])===null||t===void 0?void 0:t.stringValue)===ZS}function U0(n){const e=n.mapValue.fields[eT];return _v(e)?U0(e):e}function hf(n){const e=Us(n.mapValue.fields[tT].timestampValue);return new Ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,t,r,i,a,o,c,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p}}const Zh="(default)";class pf{constructor(e,t){this.projectId=e,this.database=t||Zh}static empty(){return new pf("","")}get isDefaultDatabase(){return this.database===Zh}isEqual(e){return e instanceof pf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="__type__",c7="__max__",hh={mapValue:{}},rT="__vector__",Jh="value";function Hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_v(n)?4:f7(n)?9007199254740991:u7(n)?10:11:Fe(28295,{value:n})}function ta(n,e){if(n===e)return!0;const t=Hs(n);if(t!==Hs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hf(n).isEqual(hf(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Us(i.timestampValue),c=Us(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Fs(i.bytesValue).isEqual(Fs(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return pn(i.geoPointValue.latitude)===pn(a.geoPointValue.latitude)&&pn(i.geoPointValue.longitude)===pn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return pn(i.integerValue)===pn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=pn(i.doubleValue),c=pn(a.doubleValue);return o===c?Qh(o)===Qh(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return tc(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Pw(o)!==Pw(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!ta(o[u],c[u])))return!1;return!0}(n,e);default:return Fe(52216,{left:n})}}function mf(n,e){return(n.values||[]).find(t=>ta(t,e))!==void 0}function nc(n,e){if(n===e)return 0;const t=Hs(n),r=Hs(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return function(a,o){const c=pn(a.integerValue||a.doubleValue),u=pn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return kw(n.timestampValue,e.timestampValue);case 4:return kw(hf(n),hf(e));case 5:return hg(n.stringValue,e.stringValue);case 6:return function(a,o){const c=Fs(a),u=Fs(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=Qe(c[d],u[d]);if(p!==0)return p}return Qe(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const c=Qe(pn(a.latitude),pn(o.latitude));return c!==0?c:Qe(pn(a.longitude),pn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Lw(n.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,d,p;const g=a.fields||{},x=o.fields||{},_=(c=g[Jh])===null||c===void 0?void 0:c.arrayValue,E=(u=x[Jh])===null||u===void 0?void 0:u.arrayValue,A=Qe(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0);return A!==0?A:Lw(_,E)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===hh.mapValue&&o===hh.mapValue)return 0;if(a===hh.mapValue)return 1;if(o===hh.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const x=hg(u[g],p[g]);if(x!==0)return x;const _=nc(c[u[g]],d[p[g]]);if(_!==0)return _}return Qe(u.length,p.length)}(n.mapValue,e.mapValue);default:throw Fe(23264,{Pe:t})}}function kw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=Us(n),r=Us(e),i=Qe(t.seconds,r.seconds);return i!==0?i:Qe(t.nanos,r.nanos)}function Lw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=nc(t[i],r[i]);if(a)return a}return Qe(t.length,r.length)}function rc(n){return pg(n)}function pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Us(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return je.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=pg(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${pg(t.fields[o])}`;return i+"}"}(n.mapValue):Fe(61005,{value:n})}function Ph(n){switch(Hs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=U0(n);return e?16+Ph(e):16;case 5:return 2*n.stringValue.length;case 6:return Fs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Ph(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return zo(r.fields,(a,o)=>{i+=a.length+Ph(o)}),i}(n.mapValue);default:throw Fe(13486,{value:n})}}function mg(n){return!!n&&"integerValue"in n}function wv(n){return!!n&&"arrayValue"in n}function jw(n){return!!n&&"nullValue"in n}function Bw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mh(n){return!!n&&"mapValue"in n}function u7(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nT])===null||t===void 0?void 0:t.stringValue)===rT}function ef(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ef(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ef(n.arrayValue.values[t]);return e}return Object.assign({},n)}function f7(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===c7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ef(t)}setAll(e){let t=ir.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=ef(o):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zo(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new li(ef(this.value))}}function iT(n){const e=[];return zo(n.fields,(t,r)=>{const i=new ir([t]);if(Mh(r)){const a=iT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Si(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new dr(e,0,Ge.min(),Ge.min(),Ge.min(),li.empty(),0)}static newFoundDocument(e,t,r,i){return new dr(e,1,t,Ge.min(),r,i,0)}static newNoDocument(e,t){return new dr(e,2,t,Ge.min(),Ge.min(),li.empty(),0)}static newUnknownDocument(e,t){return new dr(e,3,t,Ge.min(),Ge.min(),li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this.position=e,this.inclusive=t}}function Vw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=je.comparator(je.fromName(o.referenceValue),t.key):r=nc(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t="asc"){this.field=e,this.dir=t}}function d7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{}class Pn extends aT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new p7(e,t,r):t==="array-contains"?new v7(e,r):t==="in"?new y7(e,r):t==="not-in"?new x7(e,r):t==="array-contains-any"?new _7(e,r):new Pn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new m7(e,r):new g7(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nc(t,this.value)):t!==null&&Hs(this.value)===Hs(t)&&this.matchesComparison(nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class na extends aT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new na(e,t)}matches(e){return sT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sT(n){return n.op==="and"}function oT(n){return h7(n)&&sT(n)}function h7(n){for(const e of n.filters)if(e instanceof na)return!1;return!0}function gg(n){if(n instanceof Pn)return n.field.canonicalString()+n.op.toString()+rc(n.value);if(oT(n))return n.filters.map(e=>gg(e)).join(",");{const e=n.filters.map(t=>gg(t)).join(",");return`${n.op}(${e})`}}function lT(n,e){return n instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.field.isEqual(i.field)&&ta(r.value,i.value)}(n,e):n instanceof na?function(r,i){return i instanceof na&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,c)=>a&&lT(o,i.filters[c]),!0):!1}(n,e):void Fe(19439)}function cT(n){return n instanceof Pn?function(t){return`${t.field.canonicalString()} ${t.op} ${rc(t.value)}`}(n):n instanceof na?function(t){return t.op.toString()+" {"+t.getFilters().map(cT).join(" ,")+"}"}(n):"Filter"}class p7 extends Pn{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class m7 extends Pn{constructor(e,t){super(e,"in",t),this.keys=uT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class g7 extends Pn{constructor(e,t){super(e,"not-in",t),this.keys=uT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class v7 extends Pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wv(t)&&mf(t.arrayValue,this.value)}}class y7 extends Pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mf(this.value.arrayValue,t)}}class x7 extends Pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(mf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mf(this.value.arrayValue,t)}}class _7 extends Pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Ie=null}}function Fw(n,e=null,t=[],r=[],i=null,a=null,o=null){return new w7(n,e,t,r,i,a,o)}function Ev(n){const e=$e(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),V0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rc(r)).join(",")),e.Ie=t}return e.Ie}function bv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!d7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Uw(n.startAt,e.startAt)&&Uw(n.endAt,e.endAt)}function vg(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function E7(n,e,t,r,i,a,o,c){return new F0(n,e,t,r,i,a,o,c)}function Av(n){return new F0(n)}function Hw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function b7(n){return n.collectionGroup!==null}function tf(n){const e=$e(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new jn(ir.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new t0(a,r))}),t.has(ir.keyField().canonicalString())||e.Ee.push(new t0(ir.keyField(),r))}return e.Ee}function Zi(n){const e=$e(n);return e.de||(e.de=A7(e,tf(n))),e.de}function A7(n,e){if(n.limitType==="F")return Fw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new t0(i.field,a)});const t=n.endAt?new e0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new e0(n.startAt.position,n.startAt.inclusive):null;return Fw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yg(n,e,t){return new F0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function H0(n,e){return bv(Zi(n),Zi(e))&&n.limitType===e.limitType}function fT(n){return`${Ev(Zi(n))}|lt:${n.limitType}`}function Ul(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>cT(i)).join(", ")}]`),V0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>rc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>rc(i)).join(",")),`Target(${r})`}(Zi(n))}; limitType=${n.limitType})`}function z0(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of tf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=Vw(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,tf(r),i)||r.endAt&&!function(o,c,u){const d=Vw(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,tf(r),i))}(n,e)}function S7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dT(n){return(e,t)=>{let r=!1;for(const i of tf(n)){const a=T7(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function T7(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?nc(u,d):Fe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return KS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=new an(je.comparator);function Wa(){return C7}const hT=new an(je.comparator);function Gu(...n){let e=hT;for(const t of n)e=e.insert(t.key,t);return e}function pT(n){let e=hT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function No(){return nf()}function mT(){return nf()}function nf(){return new Go(n=>n.toString(),(n,e)=>n.isEqual(e))}const I7=new an(je.comparator),N7=new jn(je.comparator);function st(...n){let e=N7;for(const t of n)e=e.add(t);return e}const R7=new jn(Qe);function O7(){return R7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function gT(n){return{integerValue:""+n}}function D7(n,e){return i7(e)?gT(e):Sv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this._=void 0}}function P7(n,e,t){return n instanceof gf?function(i,a){const o={fields:{[JS]:{stringValue:ZS},[tT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&_v(a)&&(a=U0(a)),a&&(o.fields[eT]=a),{mapValue:o}}(t,e):n instanceof vf?yT(n,e):n instanceof yf?xT(n,e):function(i,a){const o=vT(i,a),c=zw(o)+zw(i.Re);return mg(o)&&mg(i.Re)?gT(c):Sv(i.serializer,c)}(n,e)}function M7(n,e,t){return n instanceof vf?yT(n,e):n instanceof yf?xT(n,e):t}function vT(n,e){return n instanceof n0?function(r){return mg(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class gf extends G0{}class vf extends G0{constructor(e){super(),this.elements=e}}function yT(n,e){const t=_T(e);for(const r of n.elements)t.some(i=>ta(i,r))||t.push(r);return{arrayValue:{values:t}}}class yf extends G0{constructor(e){super(),this.elements=e}}function xT(n,e){let t=_T(e);for(const r of n.elements)t=t.filter(i=>!ta(i,r));return{arrayValue:{values:t}}}class n0 extends G0{constructor(e,t){super(),this.serializer=e,this.Re=t}}function zw(n){return pn(n.integerValue||n.doubleValue)}function _T(n){return wv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e,t){this.field=e,this.transform=t}}function L7(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof vf&&i instanceof vf||r instanceof yf&&i instanceof yf?tc(r.elements,i.elements,ta):r instanceof n0&&i instanceof n0?ta(r.Re,i.Re):r instanceof gf&&i instanceof gf}(n.transform,e.transform)}class j7{constructor(e,t){this.version=e,this.transformResults=t}}class Ua{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ua}static exists(e){return new Ua(void 0,e)}static updateTime(e){return new Ua(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class q0{}function wT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bT(n.key,Ua.none()):new Df(n.key,n.data,Ua.none());{const t=n.data,r=li.empty();let i=new jn(ir.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new qo(n.key,r,new Si(i.toArray()),Ua.none())}}function B7(n,e,t){n instanceof Df?function(i,a,o){const c=i.value.clone(),u=qw(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof qo?function(i,a,o){if(!kh(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=qw(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(ET(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function rf(n,e,t,r){return n instanceof Df?function(a,o,c,u){if(!kh(a.precondition,o))return c;const d=a.value.clone(),p=$w(a.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof qo?function(a,o,c,u){if(!kh(a.precondition,o))return c;const d=$w(a.fieldTransforms,u,o),p=o.data;return p.setAll(ET(a)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(a,o,c){return kh(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function V7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=vT(r.transform,i||null);a!=null&&(t===null&&(t=li.empty()),t.set(r.field,a))}return t||null}function Gw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tc(r,i,(a,o)=>L7(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Df extends q0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qo extends q0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ET(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function qw(n,e,t){const r=new Map;St(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,M7(o,c,t[i]))}return r}function $w(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,P7(a,o,e))}return r}class bT extends q0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U7 extends q0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&B7(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mT();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=wT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),st())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,(t,r)=>Gw(t,r))&&tc(this.baseMutations,e.baseMutations,(t,r)=>Gw(t,r))}}class Tv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return I7}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Tv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,ft;function G7(n){switch(n){case pe.OK:return Fe(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Fe(15467,{code:n})}}function AT(n){if(n===void 0)return $a("GRPC error has no .code"),pe.UNKNOWN;switch(n){case _n.OK:return pe.OK;case _n.CANCELLED:return pe.CANCELLED;case _n.UNKNOWN:return pe.UNKNOWN;case _n.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case _n.INTERNAL:return pe.INTERNAL;case _n.UNAVAILABLE:return pe.UNAVAILABLE;case _n.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case _n.NOT_FOUND:return pe.NOT_FOUND;case _n.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case _n.ABORTED:return pe.ABORTED;case _n.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case _n.DATA_LOSS:return pe.DATA_LOSS;default:return Fe(39323,{code:n})}}(ft=_n||(_n={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7=new ks([4294967295,4294967295],0);function Ww(n){const e=WS().encode(n),t=new VS;return t.update(e),new Uint8Array(t.digest())}function Xw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ks([t,r],0),new ks([i,a],0)]}class Cv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qu(`Invalid padding: ${t}`);if(r<0)throw new qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ks.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(ks.fromNumber(r)));return i.compare(q7)===1&&(i=new ks([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Ww(e),[r,i]=Xw(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.Se(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Cv(a,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.pe===0)return;const t=Ww(e),[r,i]=Xw(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.be(o)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Pf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $0(Ge.min(),i,new an(Qe),Wa(),st())}}class Pf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Pf(r,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class ST{constructor(e,t){this.targetId=e,this.Ce=t}}class TT{constructor(e,t,r=sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Yw{constructor(){this.Fe=0,this.Me=Kw(),this.xe=sr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=st(),t=st(),r=st();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}}),new Pf(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Kw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,St(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class $7{constructor(e){this.ze=e,this.je=new Map,this.He=Wa(),this.Je=ph(),this.Ye=ph(),this.Ze=new an(Qe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(vg(a))if(r===0){const o=new je(a.path);this.tt(t,o,dr.newNoDocument(o,Ge.min()))}else St(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const c=this.ct(e),u=c?this.lt(c,e,o):1;if(u!==0){this.st(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=Fs(r).toUint8Array()}catch(u){if(u instanceof QS)return ec("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Cv(o,i,a)}catch(u){return ec(u instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const c=this._t(o);if(c){if(a.current&&vg(c.target)){const u=new je(c.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,dr.newNoDocument(u,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=st();this.Ye.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new $0(e,t,this.Ze,this.He,r);return this.He=Wa(),this.Je=ph(),this.Ye=ph(),this.Ze=new an(Qe),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Yw,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new jn(Qe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new jn(Qe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Yw),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ph(){return new an(je.comparator)}function Kw(){return new an(je.comparator)}const W7={asc:"ASCENDING",desc:"DESCENDING"},X7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y7={and:"AND",or:"OR"};class K7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xg(n,e){return n.useProto3Json||V0(e)?e:{value:e}}function r0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Q7(n,e){return r0(n,e.toTimestamp())}function Ji(n){return St(!!n,49232),Ge.fromTimestamp(function(t){const r=Us(t);return new Ln(r.seconds,r.nanos)}(n))}function Iv(n,e){return _g(n,e).canonicalString()}function _g(n,e){const t=function(i){return new ln(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function IT(n){const e=ln.fromString(n);return St(PT(e),10190,{key:e.toString()}),e}function wg(n,e){return Iv(n.databaseId,e.path)}function wm(n,e){const t=IT(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(RT(t))}function NT(n,e){return Iv(n.databaseId,e)}function Z7(n){const e=IT(n);return e.length===4?ln.emptyPath():RT(e)}function Eg(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RT(n){return St(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Qw(n,e,t){return{name:wg(n,e),fields:t.value.mapValue.fields}}function J7(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Fe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,p){return d.useProto3Json?(St(p===void 0||typeof p=="string",58123),sr.fromBase64String(p||"")):(St(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),sr.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const p=d.code===void 0?pe.UNKNOWN:AT(d.code);return new Le(p,d.message||"")}(o);t=new TT(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wm(n,r.document.name),a=Ji(r.document.updateTime),o=r.document.createTime?Ji(r.document.createTime):Ge.min(),c=new li({mapValue:{fields:r.document.fields}}),u=dr.newFoundDocument(i,a,o,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new Lh(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wm(n,r.document),a=r.readTime?Ji(r.readTime):Ge.min(),o=dr.newNoDocument(i,a),c=r.removedTargetIds||[];t=new Lh([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wm(n,r.document),a=r.removedTargetIds||[];t=new Lh([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new z7(i,a),c=r.targetId;t=new ST(c,o)}}return t}function eP(n,e){let t;if(e instanceof Df)t={update:Qw(n,e.key,e.value)};else if(e instanceof bT)t={delete:wg(n,e.key)};else if(e instanceof qo)t={update:Qw(n,e.key,e.data),updateMask:cP(e.fieldMask)};else{if(!(e instanceof U7))return Fe(16599,{ft:e.type});t={verify:wg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof gf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof yf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof n0)return{fieldPath:o.field.canonicalString(),increment:c.Re};throw Fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:Q7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)}(n,e.precondition)),t}function tP(n,e){return n&&n.length>0?(St(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?Ji(i.updateTime):Ji(a);return o.isEqual(Ge.min())&&(o=Ji(a)),new j7(o,i.transformResults||[])}(t,e))):[]}function nP(n,e){return{documents:[NT(n,e.path)]}}function rP(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NT(n,i);const a=function(d){if(d.length!==0)return DT(na.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(p=>function(x){return{field:Fl(x.field),direction:sP(x.dir)}}(p))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=xg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function iP(n){let e=Z7(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=function(g){const x=OT(g);return x instanceof na&&oT(x)?x.getFilters():[x]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(x=>function(E){return new t0(Hl(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(x))}(t.orderBy));let c=null;t.limit&&(c=function(g){let x;return x=typeof g=="object"?g.value:g,V0(x)?null:x}(t.limit));let u=null;t.startAt&&(u=function(g){const x=!!g.before,_=g.values||[];return new e0(_,x)}(t.startAt));let d=null;return t.endAt&&(d=function(g){const x=!g.before,_=g.values||[];return new e0(_,x)}(t.endAt)),E7(e,i,o,a,c,"F",u,d)}function aP(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Hl(t.unaryFilter.field);return Pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hl(t.unaryFilter.field);return Pn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Hl(t.unaryFilter.field);return Pn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hl(t.unaryFilter.field);return Pn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}}(n):n.fieldFilter!==void 0?function(t){return Pn.create(Hl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return na.create(t.compositeFilter.filters.map(r=>OT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}}(t.compositeFilter.op))}(n):Fe(30097,{filter:n})}function sP(n){return W7[n]}function oP(n){return X7[n]}function lP(n){return Y7[n]}function Fl(n){return{fieldPath:n.canonicalString()}}function Hl(n){return ir.fromServerFormat(n.fieldPath)}function DT(n){return n instanceof Pn?function(t){if(t.op==="=="){if(Bw(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NAN"}};if(jw(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bw(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NAN"}};if(jw(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(t.field),op:oP(t.op),value:t.value}}}(n):n instanceof na?function(t){const r=t.getFilters().map(i=>DT(i));return r.length===1?r[0]:{compositeFilter:{op:lP(t.op),filters:r}}}(n):Fe(54877,{filter:n})}function cP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r,i,a=Ge.min(),o=Ge.min(),c=sr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.wt=e}}function fP(n){const e=iP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(){this.Cn=new hP}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Vs.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class hP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(ln.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(ln.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MT=41943040;class Dr{static withCacheSize(e){return new Dr(e,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(MT,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ic(0)}static lr(){return new ic(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="LruGarbageCollector",pP=1048576;function eE([n,e],[t,r]){const i=Qe(n,t);return i===0?Qe(e,r):i}class mP{constructor(e){this.Er=e,this.buffer=new jn(eE),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ae(Jw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ec(t)?Ae(Jw,"Ignoring IndexedDB error during garbage collection: ",t):await wc(t)}await this.mr(3e5)})}}class vP{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(B0.le);const r=new mP(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Zw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zw):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Vl()<=at.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g})))}}function yP(n,e){return new vP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.changes=new Go(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&rf(r.mutation,i,Si.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,t,r=st()){const i=No();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=Gu();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=No();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,st()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let a=Wa();const o=nf(),c=function(){return nf()}();return t.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof qo)?a=a.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),rf(p.mutation,d,p.mutation.getFieldMask(),Ln.now())):o.set(d.key,Si.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,p)=>o.set(d,p)),t.forEach((d,p)=>{var g;return c.set(d,new _P(p,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){const r=nf();let i=new an((o,c)=>o-c),a=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=t.get(u);if(d===null)return;let p=r.get(u)||Si.empty();p=c.applyToLocalView(d,p),r.set(u,p);const g=(i.get(c.batchId)||st()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,g=mT();p.forEach(x=>{if(!a.has(x)){const _=wT(t.get(x),r.get(x));_!==null&&g.set(x,_),a=a.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return ue.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return je.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):b7(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(No());let c=df,u=a;return o.next(d=>ue.forEach(d,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(p)?ue.resolve():this.remoteDocumentCache.getEntry(e,p).next(x=>{u=u.insert(p,x)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,st())).next(p=>({batchId:c,changes:pT(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let i=Gu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=Gu();return this.indexManager.getCollectionParents(e,a).next(c=>ue.forEach(c,u=>{const d=function(g,x){return new F0(x,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,x)=>{o=o.insert(g,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,dr.newInvalidDocument(p)))});let c=Gu();return o.forEach((u,d)=>{const p=a.get(u);p!==void 0&&rf(p.mutation,d,Si.empty(),Ln.now()),z0(t,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ue.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ji(i.createTime)}}(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:fP(i.bundledQuery),readTime:Ji(i.readTime)}}(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.overlays=new an(je.comparator),this.Qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=No();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.bt(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=No(),a=t.length+1,o=new je(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new an((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=a.get(d.largestBatchId);p===null&&(p=No(),a=a.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=No(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return ue.resolve(c)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new H7(t,r));let a=this.Qr.get(t);a===void 0&&(a=st(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.$r=new jn(Wn.Ur),this.Kr=new jn(Wn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Wn(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Wn(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new je(new ln([])),r=new Wn(t,e),i=new Wn(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new je(new ln([])),r=new Wn(t,e),i=new Wn(t,e+1);let a=st();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Wn(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return je.comparator(e.key,t.key)||Qe(e.Zr,t.Zr)}static Wr(e,t){return Qe(e.Zr,t.Zr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new jn(Wn.Ur)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new F7(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Xr=this.Xr.add(new Wn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ue.resolve(o)}lookupMutationBatch(e,t){return ue.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?xv:this.nr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wn(t,0),i=new Wn(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const c=this.ei(o.Zr);a.push(c)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Qe);return t.forEach(i=>{const a=new Wn(i,0),o=new Wn(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],c=>{r=r.add(c.Zr)})}),ue.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;je.isDocumentKey(a)||(a=a.child(""));const o=new Wn(new je(a),0);let c=new jn(Qe);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Zr)),!0)},o),ue.resolve(this.ni(c))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){St(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ue.forEach(t.mutations,i=>{const a=new Wn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Wn(t,0),i=this.Xr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.ii=e,this.docs=function(){return new an(je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(t))}getEntries(e,t){let r=Wa();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dr.newInvalidDocument(i))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Wa();const o=t.path,c=new je(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||e7(JD(p),r)<=0||(i.has(p.key)||z0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Fe(9500)}si(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CP(this)}getSize(e){return ue.resolve(this.size)}}class CP extends xP{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.persistence=e,this.oi=new Go(t=>Ev(t),bv),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this._i=0,this.ai=new Nv,this.targetCount=0,this.ui=ic.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),ue.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new ic(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Tr(t),ue.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t){this.ci={},this.overlays={},this.li=new B0(0),this.hi=!1,this.hi=!0,this.Pi=new AP,this.referenceDelegate=e(this),this.Ti=new IP(this),this.indexManager=new dP,this.remoteDocumentCache=function(i){return new TP(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new uP(t),this.Ei=new EP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new SP(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new NP(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return ue.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class NP extends n7{constructor(e){super(),this.currentSequenceNumber=e}}class Rv{constructor(e){this.persistence=e,this.Vi=new Nv,this.mi=null}static fi(e){return new Rv(e)}get gi(){if(this.mi)return this.mi;throw Fe(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.gi,r=>{const i=je.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Ge.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return ue.or([()=>ue.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class i0{constructor(e,t){this.persistence=e,this.yi=new Go(r=>a7(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=yP(this,t)}static fi(e,t){return new i0(e,t)}di(){}Ai(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return ue.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?ue.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(c=>{c||(r++,a.removeEntry(o,Ge.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ue.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}Dr(e,t,r){return ue.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return ue.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=st(),i=st();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ov(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return _N()?8:r7(pr())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Ss(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new RP;return this.bs(e,t,o).next(c=>{if(a.result=c,this.fs)return this.Ds(e,t,o,c.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Vl()<=at.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",Ul(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ue.resolve()):(Vl()<=at.DEBUG&&Ae("QueryEngine","Query:",Ul(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Vl()<=at.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",Ul(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zi(t))):ue.resolve())}ws(e,t){if(Hw(t))return ue.resolve(null);let r=Zi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=yg(t,null,"F"),r=Zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=st(...a);return this.ys.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(t,c);return this.Cs(t,d,o,u.readTime)?this.ws(e,yg(t,null,"F")):this.Fs(e,d,t,u)}))})))}Ss(e,t,r,i){return Hw(t)||i.isEqual(Ge.min())?ue.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?ue.resolve(null):(Vl()<=at.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ul(t)),this.Fs(e,o,t,ZD(i,df)).next(c=>c))})}vs(e,t){let r=new jn(dT(e));return t.forEach((i,a)=>{z0(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}bs(e,t,r){return Vl()<=at.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",Ul(t)),this.ys.getDocumentsMatchingQuery(e,t,Vs.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="LocalStore",DP=3e8;class PP{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new an(Qe),this.Os=new Go(a=>Ev(a),bv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function MP(n,e,t,r){return new PP(n,e,t,r)}async function LT(n,e){const t=$e(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=st();for(const d of i){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of a){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:c}))})})}function kP(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const g=d.batch,x=g.keys();let _=ue.resolve();return x.forEach(E=>{_=_.next(()=>p.getEntry(u,E)).next(A=>{const S=d.docVersions.get(E);St(S!==null,48541),A.version.compareTo(S)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),p.addEntry(A)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=st();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function jT(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function LP(n,e){const t=$e(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const c=[];e.targetChanges.forEach((p,g)=>{const x=i.get(g);if(!x)return;c.push(t.Ti.removeMatchingKeys(a,p.removedDocuments,g).next(()=>t.Ti.addMatchingKeys(a,p.addedDocuments,g)));let _=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(sr.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),i=i.insert(g,_),function(A,S,I){return A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=DP?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(x,_,p)&&c.push(t.Ti.updateTargetData(a,_))});let u=Wa(),d=st();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))}),c.push(jP(a,o,e.documentUpdates).next(p=>{u=p.qs,d=p.Qs})),!r.isEqual(Ge.min())){const p=t.Ti.getLastRemoteSnapshotVersion(a).next(g=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(p)}return ue.waitFor(c).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(t.xs=i,a))}function jP(n,e,t){let r=st(),i=st();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Wa();return t.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Ge.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ae(Dv,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:i}})}function BP(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VP(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Ns(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function bg(n,e,t){const r=$e(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ec(o))throw o;Ae(Dv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function tE(n,e,t){const r=$e(n);let i=Ge.min(),a=st();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const g=$e(u),x=g.Os.get(p);return x!==void 0?ue.resolve(g.xs.get(x)):g.Ti.getTargetData(d,p)}(r,o,Zi(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Ge.min(),t?a:st())).next(c=>(UP(r,S7(e),c),{documents:c,$s:a})))}function UP(n,e,t){let r=n.Ns.get(e)||Ge.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class nE{constructor(){this.activeTargetIds=O7()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FP{constructor(){this.xo=new nE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new nE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="ConnectivityMonitor";class iE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ae(rE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ae(rE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Ag(){return mh===null?mh=function(){return 268435456+Math.round(2147483648*Math.random())}():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="RestConnection",zP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Zh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=Ag(),c=this.jo(e,t.toUriEncodedString());Ae(Em,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,a);const{host:d}=new URL(c),p=Af(d);return this.Jo(e,c,u,r,p).then(g=>(Ae(Em,`Received RPC '${e}' ${o}: `,g),g),g=>{throw ec(Em,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_c}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=zP[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="WebChannelConnection";class $P extends GP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=Ag();return new Promise((c,u)=>{const d=new US;d.setWithCredentials(!0),d.listenOnce(FS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Dh.NO_ERROR:const g=d.getResponseJson();Ae(cr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Dh.TIMEOUT:Ae(cr,`RPC '${e}' ${o} timed out`),u(new Le(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const x=d.getStatus();if(Ae(cr,`RPC '${e}' ${o} failed with status:`,x,"response text:",d.getResponseText()),x>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const A=function(I){const N=I.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(N)>=0?N:pe.UNKNOWN}(E.status);u(new Le(A,E.message))}else u(new Le(pe.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Le(pe.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Ae(cr,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);Ae(cr,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",p,r,15)})}T_(e,t,r){const i=Ag(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GS(),c=zS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const p=a.join("");Ae(cr,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);let x=!1,_=!1;const E=new qP({Zo:S=>{_?Ae(cr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(x||(Ae(cr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),x=!0),Ae(cr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},Xo:()=>g.close()}),A=(S,I,N)=>{S.listen(I,O=>{try{N(O)}catch(j){setTimeout(()=>{throw j},0)}})};return A(g,zu.EventType.OPEN,()=>{_||(Ae(cr,`RPC '${e}' stream ${i} transport opened.`),E.__())}),A(g,zu.EventType.CLOSE,()=>{_||(_=!0,Ae(cr,`RPC '${e}' stream ${i} transport closed`),E.u_())}),A(g,zu.EventType.ERROR,S=>{_||(_=!0,ec(cr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.u_(new Le(pe.UNAVAILABLE,"The operation could not be completed")))}),A(g,zu.EventType.MESSAGE,S=>{var I;if(!_){const N=S.data[0];St(!!N,16349);const O=N,j=(O==null?void 0:O.error)||((I=O[0])===null||I===void 0?void 0:I.error);if(j){Ae(cr,`RPC '${e}' stream ${i} received error:`,j);const F=j.status;let q=function(M){const V=_n[M];if(V!==void 0)return AT(V)}(F),P=j.message;q===void 0&&(q=pe.INTERNAL,P="Unknown error status: "+F+" with message "+j.message),_=!0,E.u_(new Le(q,P)),g.close()}else Ae(cr,`RPC '${e}' stream ${i} received:`,N),E.c_(N)}}),A(c,HS.STAT_EVENT,S=>{S.stat===dg.PROXY?Ae(cr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===dg.NOPROXY&&Ae(cr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.a_()},0),E}}function bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n){return new K7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=i,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="PersistentStream";class VT{constructor(e,t,r,i,a,o,c,u){this.xi=e,this.y_=r,this.w_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new BT(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?($a(t.toString()),$a("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===t&&this.K_(r,i)},r=>{e(()=>{const i=new Le(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Ae(aE,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(Ae(aE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WP extends VT{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=J7(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ge.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?Ji(o.readTime):Ge.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=Eg(this.serializer),t.addTarget=function(a,o){let c;const u=o.target;if(c=vg(u)?{documents:nP(a,u)}:{query:rP(a,u).gt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=CT(a,o.resumeToken);const d=xg(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ge.min())>0){c.readTime=r0(a,o.snapshotVersion.toTimestamp());const d=xg(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=aP(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=Eg(this.serializer),t.removeTarget=e,this.L_(t)}}class XP extends VT{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=tP(e.writeResults,e.commitTime),r=Ji(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=Eg(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>eP(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{}class KP extends YP{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,_g(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(pe.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Yo(e,_g(t,r),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Le(pe.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class QP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?($a(t),this.oa=!1):Ae("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RemoteStore";class ZP{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(o=>{r.enqueueAndForget(async()=>{$o(this)&&(Ae(Uo,"Restarting streams for network reachability change."),await async function(u){const d=$e(u);d.Ta.add(4),await Mf(d),d.da.set("Unknown"),d.Ta.delete(4),await X0(d)}(this))})}),this.da=new QP(r,i)}}async function X0(n){if($o(n))for(const e of n.Ia)await e(!0)}async function Mf(n){for(const e of n.Ia)await e(!1)}function UT(n,e){const t=$e(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),Lv(t)?kv(t):bc(t).M_()&&Mv(t,e))}function Pv(n,e){const t=$e(n),r=bc(t);t.Pa.delete(e),r.M_()&&FT(t,e),t.Pa.size===0&&(r.M_()?r.N_():$o(t)&&t.da.set("Unknown"))}function Mv(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bc(n).H_(e)}function FT(n,e){n.Aa.Ke(e),bc(n).J_(e)}function kv(n){n.Aa=new $7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),bc(n).start(),n.da._a()}function Lv(n){return $o(n)&&!bc(n).F_()&&n.Pa.size>0}function $o(n){return $e(n).Ta.size===0}function HT(n){n.Aa=void 0}async function JP(n){n.da.set("Online")}async function e9(n){n.Pa.forEach((e,t)=>{Mv(n,e)})}async function t9(n,e){HT(n),Lv(n)?(n.da.ca(e),kv(n)):n.da.set("Unknown")}async function n9(n,e,t){if(n.da.set("Online"),e instanceof TT&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Pa.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Pa.delete(c),i.Aa.removeTarget(c))}(n,e)}catch(r){Ae(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await a0(n,r)}else if(e instanceof Lh?n.Aa.Xe(e):e instanceof ST?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Ge.min()))try{const r=await jT(n.localStore);t.compareTo(r)>=0&&await function(a,o){const c=a.Aa.It(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=a.Pa.get(d);p&&a.Pa.set(d,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const p=a.Pa.get(u);if(!p)return;a.Pa.set(u,p.withResumeToken(sr.EMPTY_BYTE_STRING,p.snapshotVersion)),FT(a,u);const g=new Ns(p.target,u,d,p.sequenceNumber);Mv(a,g)}),a.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){Ae(Uo,"Failed to raise snapshot:",r),await a0(n,r)}}async function a0(n,e,t){if(!Ec(e))throw e;n.Ta.add(1),await Mf(n),n.da.set("Offline"),t||(t=()=>jT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ae(Uo,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await X0(n)})}function zT(n,e){return e().catch(t=>a0(n,t,e))}async function Y0(n){const e=$e(n),t=zs(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:xv;for(;r9(e);)try{const i=await BP(e.localStore,r);if(i===null){e.ha.length===0&&t.N_();break}r=i.batchId,i9(e,i)}catch(i){await a0(e,i)}GT(e)&&qT(e)}function r9(n){return $o(n)&&n.ha.length<10}function i9(n,e){n.ha.push(e);const t=zs(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function GT(n){return $o(n)&&!zs(n).F_()&&n.ha.length>0}function qT(n){zs(n).start()}async function a9(n){zs(n).ta()}async function s9(n){const e=zs(n);for(const t of n.ha)e.Z_(t.mutations)}async function o9(n,e,t){const r=n.ha.shift(),i=Tv.from(r,e,t);await zT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Y0(n)}async function l9(n,e){e&&zs(n).Y_&&await async function(r,i){if(function(o){return G7(o)&&o!==pe.ABORTED}(i.code)){const a=r.ha.shift();zs(r).O_(),await zT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Y0(r)}}(n,e),GT(n)&&qT(n)}async function sE(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Ae(Uo,"RemoteStore received new credentials");const r=$o(t);t.Ta.add(3),await Mf(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await X0(t)}async function c9(n,e){const t=$e(n);e?(t.Ta.delete(2),await X0(t)):e||(t.Ta.add(2),await Mf(t),t.da.set("Unknown"))}function bc(n){return n.Ra||(n.Ra=function(t,r,i){const a=$e(t);return a.ra(),new WP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:JP.bind(null,n),n_:e9.bind(null,n),i_:t9.bind(null,n),j_:n9.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),Lv(n)?kv(n):n.da.set("Unknown")):(await n.Ra.stop(),HT(n))})),n.Ra}function zs(n){return n.Va||(n.Va=function(t,r,i){const a=$e(t);return a.ra(),new XP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:a9.bind(null,n),i_:l9.bind(null,n),X_:s9.bind(null,n),ea:o9.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Y0(n)):(await n.Va.stop(),n.ha.length>0&&(Ae(Uo,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new jv(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bv(n,e){if($a("AsyncQueue",`${e}: ${n}`),Ec(n))return new Le(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{static emptySet(e){return new Kl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Gu(),this.sortedSet=new an(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Kl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.ma=new an(je.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Fe(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class ac{constructor(e,t,r,i,a,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new ac(e,t,Kl.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&H0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class f9{constructor(){this.queries=lE(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const i=$e(t),a=i.queries;i.queries=lE(),a.forEach((o,c)=>{for(const u of c.ya)u.onError(r)})})(this,new Le(pe.ABORTED,"Firestore shutting down"))}}function lE(){return new Go(n=>fT(n),H0)}async function d9(n,e){const t=$e(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.wa()&&e.Sa()&&(r=2):(a=new u9,r=e.Sa()?0:1);try{switch(r){case 0:a.pa=await t.onListen(i,!0);break;case 1:a.pa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=Bv(o,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&Vv(t)}async function h9(n,e){const t=$e(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.ya.indexOf(e);o>=0&&(a.ya.splice(o,1),a.ya.length===0?i=e.Sa()?0:1:!a.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function p9(n,e){const t=$e(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.ya)c.va(i)&&(r=!0);o.pa=i}}r&&Vv(t)}function m9(n,e,t){const r=$e(n),i=r.queries.get(e);if(i)for(const a of i.ya)a.onError(t);r.queries.delete(e)}function Vv(n){n.ba.forEach(e=>{e.next()})}var Sg,cE;(cE=Sg||(Sg={})).Ca="default",cE.Cache="cache";class g9{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ac(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.key=e}}class WT{constructor(e){this.key=e}}class v9{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=st(),this.mutatedKeys=st(),this.Ha=dT(e),this.Ja=new Kl(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new oE,i=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const x=i.get(p),_=z0(this.query,g)?g:null,E=!!x&&this.mutatedKeys.has(x.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;x&&_?x.data.isEqual(_.data)?E!==A&&(r.track({type:3,doc:_}),S=!0):this.eu(x,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Ha(_,u)>0||d&&this.Ha(_,d)<0)&&(c=!0)):!x&&_?(r.track({type:0,doc:_}),S=!0):x&&!_&&(r.track({type:1,doc:x}),S=!0,(u||d)&&(c=!0)),S&&(_?(o=o.add(_),a=A?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Ja:o,Xa:r,Cs:c,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((p,g)=>function(_,E){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:S})}};return A(_)-A(E)}(p.type,g.type)||this.Ha(p.doc,g.doc)),this.tu(r),i=i!=null&&i;const c=t&&!i?this.nu():[],u=this.ja.size===0&&this.current&&!i?1:0,d=u!==this.za;return this.za=u,o.length!==0||d?{snapshot:new ac(this.query,e.Ja,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:c}:{ru:c}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new oE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=st(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new WT(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new $T(r))}),t}su(e){this.Ga=e.$s,this.ja=st();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return ac.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Uv="SyncEngine";class y9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class x9{constructor(e){this.key=e,this._u=!1}}class _9{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Go(c=>fT(c),H0),this.cu=new Map,this.lu=new Set,this.hu=new an(je.comparator),this.Pu=new Map,this.Tu=new Nv,this.Iu={},this.Eu=new Map,this.du=ic.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function w9(n,e,t=!0){const r=JT(n);let i;const a=r.uu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.ou()):i=await XT(r,e,t,!0),i}async function E9(n,e){const t=JT(n);await XT(t,e,!0,!1)}async function XT(n,e,t,r){const i=await VP(n.localStore,Zi(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await b9(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&UT(n.remoteStore,i),c}async function b9(n,e,t,r,i){n.Ru=(g,x,_)=>async function(A,S,I,N){let O=S.view.Za(I);O.Cs&&(O=await tE(A.localStore,S.query,!1).then(({documents:P})=>S.view.Za(P,O)));const j=N&&N.targetChanges.get(S.targetId),F=N&&N.targetMismatches.get(S.targetId)!=null,q=S.view.applyChanges(O,A.isPrimaryClient,j,F);return fE(A,S.targetId,q.ru),q.snapshot}(n,g,x,_);const a=await tE(n.localStore,e,!0),o=new v9(e,a.$s),c=o.Za(a.documents),u=Pf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);fE(n,t,d.ru);const p=new y9(e,t,o);return n.uu.set(e,p),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),d.snapshot}async function A9(n,e,t){const r=$e(n),i=r.uu.get(e),a=r.cu.get(i.targetId);if(a.length>1)return r.cu.set(i.targetId,a.filter(o=>!H0(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pv(r.remoteStore,i.targetId),Tg(r,i.targetId)}).catch(wc)):(Tg(r,i.targetId),await bg(r.localStore,i.targetId,!0))}async function S9(n,e){const t=$e(n),r=t.uu.get(e),i=t.cu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pv(t.remoteStore,r.targetId))}async function T9(n,e,t){const r=P9(n);try{const i=await function(o,c){const u=$e(o),d=Ln.now(),p=c.reduce((_,E)=>_.add(E.key),st());let g,x;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Wa(),A=st();return u.Bs.getEntries(_,p).next(S=>{E=S,E.forEach((I,N)=>{N.isValidDocument()||(A=A.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,E)).next(S=>{g=S;const I=[];for(const N of c){const O=V7(N,g.get(N.key).overlayedDocument);O!=null&&I.push(new qo(N.key,O,iT(O.value.mapValue),Ua.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,I,c)}).next(S=>{x=S;const I=S.applyToLocalDocumentSet(g,A);return u.documentOverlayCache.saveOverlays(_,S.batchId,I)})}).then(()=>({batchId:x.batchId,changes:pT(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Iu[o.currentUser.toKey()];d||(d=new an(Qe)),d=d.insert(c,u),o.Iu[o.currentUser.toKey()]=d}(r,i.batchId,t),await kf(r,i.changes),await Y0(r.remoteStore)}catch(i){const a=Bv(i,"Failed to persist write");t.reject(a)}}async function YT(n,e){const t=$e(n);try{const r=await LP(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Pu.get(a);o&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o._u=!0:i.modifiedDocuments.size>0?St(o._u,14607):i.removedDocuments.size>0&&(St(o._u,42227),o._u=!1))}),await kf(t,r,e)}catch(r){await wc(r)}}function uE(n,e,t){const r=$e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.uu.forEach((a,o)=>{const c=o.view.Da(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=$e(o);u.onlineState=c;let d=!1;u.queries.forEach((p,g)=>{for(const x of g.ya)x.Da(c)&&(d=!0)}),d&&Vv(u)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function C9(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Pu.get(e),a=i&&i.key;if(a){let o=new an(je.comparator);o=o.insert(a,dr.newNoDocument(a,Ge.min()));const c=st().add(a),u=new $0(Ge.min(),new Map,new an(Qe),o,c);await YT(r,u),r.hu=r.hu.remove(a),r.Pu.delete(e),Fv(r)}else await bg(r.localStore,e,!1).then(()=>Tg(r,e,t)).catch(wc)}async function I9(n,e){const t=$e(n),r=e.batch.batchId;try{const i=await kP(t.localStore,e);QT(t,r,null),KT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await kf(t,i)}catch(i){await wc(i)}}async function N9(n,e,t){const r=$e(n);try{const i=await function(o,c){const u=$e(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(St(g!==null,37113),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);QT(r,e,t),KT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await kf(r,i)}catch(i){await wc(i)}}function KT(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function QT(n,e,t){const r=$e(n);let i=r.Iu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function Tg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||ZT(n,r)})}function ZT(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(Pv(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),Fv(n))}function fE(n,e,t){for(const r of t)r instanceof $T?(n.Tu.addReference(r.key,e),R9(n,r)):r instanceof WT?(Ae(Uv,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||ZT(n,r.key)):Fe(19791,{mu:r})}function R9(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(Ae(Uv,"New document in limbo: "+t),n.lu.add(r),Fv(n))}function Fv(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new je(ln.fromString(e)),r=n.du.next();n.Pu.set(r,new x9(t)),n.hu=n.hu.insert(t,r),UT(n.remoteStore,new Ns(Zi(Av(t.path)),r,"TargetPurposeLimboResolution",B0.le))}}async function kf(n,e,t){const r=$e(n),i=[],a=[],o=[];r.uu.isEmpty()||(r.uu.forEach((c,u)=>{o.push(r.Ru(u,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=t==null?void 0:t.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);const g=Ov.Rs(u.targetId,d);a.push(g)}}))}),await Promise.all(o),r.au.j_(i),await async function(u,d){const p=$e(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ue.forEach(d,x=>ue.forEach(x.ds,_=>p.persistence.referenceDelegate.addReference(g,x.targetId,_)).next(()=>ue.forEach(x.As,_=>p.persistence.referenceDelegate.removeReference(g,x.targetId,_)))))}catch(g){if(!Ec(g))throw g;Ae(Dv,"Failed to update sequence numbers: "+g)}for(const g of d){const x=g.targetId;if(!g.fromCache){const _=p.xs.get(x),E=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(E);p.xs=p.xs.insert(x,A)}}}(r.localStore,a))}async function O9(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Ae(Uv,"User change. New user:",e.toKey());const r=await LT(t.localStore,e);t.currentUser=e,function(a,o){a.Eu.forEach(c=>{c.forEach(u=>{u.reject(new Le(pe.CANCELLED,o))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kf(t,r.ks)}}function D9(n,e){const t=$e(n),r=t.Pu.get(e);if(r&&r._u)return st().add(r.key);{let i=st();const a=t.cu.get(e);if(!a)return i;for(const o of a){const c=t.uu.get(o);i=i.unionWith(c.view.Ya)}return i}}function JT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C9.bind(null,e),e.au.j_=p9.bind(null,e.eventManager),e.au.Vu=m9.bind(null,e.eventManager),e}function P9(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N9.bind(null,e),e}class s0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=W0(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return MP(this.persistence,new OP,e.initialUser,this.serializer)}yu(e){return new kT(Rv.fi,this.serializer)}pu(e){return new FP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}s0.provider={build:()=>new s0};class M9 extends s0{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){St(this.persistence.referenceDelegate instanceof i0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gP(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new kT(r=>i0.fi(r,t),this.serializer)}}class Cg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O9.bind(null,this.syncEngine),await c9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new f9}()}createDatastore(e){const t=W0(e.databaseInfo.databaseId),r=function(a){return new $P(a)}(e.databaseInfo);return function(a,o,c,u){return new KP(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,c){return new ZP(r,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>uE(this.syncEngine,t,0),function(){return iE.C()?new iE:new HP}())}createSyncEngine(e,t){return function(i,a,o,c,u,d,p){const g=new _9(i,a,o,c,u,d);return p&&(g.Au=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=$e(i);Ae(Uo,"RemoteStore shutting down."),a.Ta.add(5),await Mf(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Cg.provider={build:()=>new Cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):$a("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class L9{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=XS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Ae(Gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ae(Gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Bv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Am(n,e){n.asyncQueue.verifyOperationInProgress(),Ae(Gs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await LT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function dE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await j9(n);Ae(Gs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>sE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>sE(e.remoteStore,i)),n._onlineComponents=e}async function j9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae(Gs,"Using user provided OfflineComponentProvider");try{await Am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ec("Error using user provided cache. Falling back to memory cache: "+t),await Am(n,new s0)}}else Ae(Gs,"Using default OfflineComponentProvider"),await Am(n,new M9(void 0));return n._offlineComponents}async function eC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae(Gs,"Using user provided OnlineComponentProvider"),await dE(n,n._uninitializedComponentsProvider._online)):(Ae(Gs,"Using default OnlineComponentProvider"),await dE(n,new Cg))),n._onlineComponents}function B9(n){return eC(n).then(e=>e.syncEngine)}async function V9(n){const e=await eC(n),t=e.eventManager;return t.onListen=w9.bind(null,e.syncEngine),t.onUnlisten=A9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S9.bind(null,e.syncEngine),t}function U9(n,e,t={}){const r=new Ls;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const p=new k9({next:x=>{p.Cu(),o.enqueueAndForget(()=>h9(a,g));const _=x.docs.has(c);!_&&x.fromCache?d.reject(new Le(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&x.fromCache&&u&&u.source==="server"?d.reject(new Le(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(x)},error:x=>d.reject(x)}),g=new g9(Av(c.path),p,{includeMetadataChanges:!0,La:!0});return d9(a,g)}(await V9(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(n,e,t){if(!t)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function H9(n,e,t,r){if(e===!0&&r===!0)throw new Le(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pE(n){if(!je.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Hv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Fe(12329,{type:typeof n})}function xf(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hv(n);throw new Le(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firestore.googleapis.com",mE=!0;class gE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Le(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nC,this.ssl=mE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pP)throw new Le(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Le(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Le(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Le(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zD;switch(r.type){case"firstParty":return new WD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Le(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hE.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),hE.delete(t),r.terminate())}(this),Promise.resolve()}}function z9(n,e,t,r={}){var i;n=xf(n,zv);const a=Af(e),o=n._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;a&&(Xb(`https://${u}`),Yb("Firestore",!0)),o.host!==nC&&o.host!==u&&ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:a,emulatorOptions:r});if(!Lo(d,c)&&(n._setSettings(d),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=fr.MOCK_USER;else{p=fN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new Le(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new fr(x)}n._authCredentials=new GD(new $S(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gv(this.firestore,e,this._query)}}class ui{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _f(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ui(this.firestore,e,this._key)}}class _f extends Gv{constructor(e,t,r){super(e,t,Av(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ui(this.firestore,null,new je(e))}withConverter(e){return new _f(this.firestore,e,this._path)}}function rC(n,e,...t){if(n=qe(n),arguments.length===1&&(e=XS.newId()),F9("doc","path",e),n instanceof zv){const r=ln.fromString(e,...t);return pE(r),new ui(n,null,new je(r))}{if(!(n instanceof ui||n instanceof _f))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return pE(r),new ui(n.firestore,n instanceof _f?n.converter:null,new je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="AsyncQueue";class yE{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new BT(this,"async_queue_retry"),this.ec=()=>{const r=bm();r&&Ae(vE,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Ls;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Ec(e))throw e;Ae(vE,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,$a("INTERNAL UNHANDLED ERROR: ",xE(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const i=jv.createAndSchedule(this,e,t,r,a=>this.oc(a));return this.Hu.push(i),i}nc(){this.Ju&&Fe(47125,{_c:xE(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function xE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class qv extends zv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yE(e),this._firestoreClient=void 0,await e}}}function iC(n,e){const t=Jb(),r=Zh,i=Yg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=cN("firestore");a&&z9(i,...a)}return i}function aC(n){if(n._terminated)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G9(n),n._firestoreClient}function G9(n){var e,t,r;const i=n._freezeSettings(),a=function(c,u,d,p){return new l7(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,tC(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new L9(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sc(sr.fromBase64String(e))}catch(t){throw new Le(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sc(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Le(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=/^__.*__$/;class $9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Df(e,this.data,t,this.fieldTransforms)}}function sC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{hc:n})}}class Kv{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Kv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return o0(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(sC(this.hc)&&q9.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class W9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||W0(e)}gc(e,t,r,i=!1){return new Kv({hc:e,methodName:t,fc:r,path:ir.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function X9(n){const e=n._freezeSettings(),t=W0(n._databaseId);return new W9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Y9(n,e,t,r,i,a={}){const o=n.gc(a.merge||a.mergeFields?2:0,e,t,i);uC("Data must be an object, but it was:",o,r);const c=lC(r,o);let u,d;if(a.merge)u=new Si(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const x=K9(e,g,t);if(!o.contains(x))throw new Le(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Z9(p,x)||p.push(x)}u=new Si(p),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new $9(new li(c),u,d)}class Qv extends Wv{_toFieldTransform(e){return new k7(e.path,new gf)}isEqual(e){return e instanceof Qv}}function oC(n,e){if(cC(n=qe(n)))return uC("Unsupported field value:",e,n),lC(n,e);if(n instanceof Wv)return function(r,i){if(!sC(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const c of r){let u=oC(c,i.Rc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return D7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ln.fromDate(r);return{timestampValue:r0(i.serializer,a)}}if(r instanceof Ln){const a=new Ln(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:r0(i.serializer,a)}}if(r instanceof Xv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sc)return{bytesValue:CT(i.serializer,r._byteString)};if(r instanceof ui){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Iv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yv)return function(o,c){return{mapValue:{fields:{[nT]:{stringValue:rT},[Jh]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Vc("VectorValues must only contain numeric values.");return Sv(c.serializer,d)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${Hv(r)}`)}(n,e)}function lC(n,e){const t={};return KS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(n,(r,i)=>{const a=oC(i,e.Ic(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function cC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof Xv||n instanceof sc||n instanceof ui||n instanceof Wv||n instanceof Yv)}function uC(n,e,t){if(!cC(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Hv(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function K9(n,e,t){if((e=qe(e))instanceof $v)return e._internalPath;if(typeof e=="string")return fC(n,e);throw o0("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q9=new RegExp("[~\\*/\\[\\]]");function fC(n,e,t){if(e.search(Q9)>=0)throw o0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $v(...e.split("."))._internalPath}catch{throw o0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function o0(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Le(pe.INVALID_ARGUMENT,c+n+u)}function Z9(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class J9 extends dC{data(){return super.data()}}function hC(n,e){return typeof e=="string"?fC(n,e):e instanceof $v?e._internalPath:e._delegate._internalPath}class eM{convertValue(e,t="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zo(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Jh].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>pn(o.doubleValue));return new Yv(a)}convertGeoPoint(e){return new Xv(pn(e.latitude),pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=U0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hf(e));default:return null}}convertTimestamp(e){const t=Us(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);St(PT(r),9688,{name:e});const i=new pf(r.get(1),r.get(3)),a=new je(r.popFirst(5));return i.isEqual(t)||$a(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pC extends dC{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rM extends pC{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n){n=xf(n,ui);const e=xf(n.firestore,qv);return U9(aC(e),n._key).then(t=>lM(e,n,t))}class aM extends eM{constructor(e){super(),this.firestore=e}convertBytes(e){return new sc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ui(this.firestore,null,t)}}function sM(n,e,t){n=xf(n,ui);const r=xf(n.firestore,qv),i=tM(n.converter,e,t);return oM(r,[Y9(X9(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ua.none())])}function oM(n,e){return function(r,i){const a=new Ls;return r.asyncQueue.enqueueAndForget(async()=>T9(await B9(r),i,a)),a.promise}(aC(n),e)}function lM(n,e,t){const r=t.docs.get(e._key),i=new aM(n);return new pC(n,i,e._key,r,new nM(t.hasPendingWrites,t.fromCache),e.converter)}function cM(){return new Qv("serverTimestamp")}(function(e,t=!0){(function(i){_c=i})(hc),Zl(new jo("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new qv(new qD(r.getProvider("auth-internal")),new XD(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Le(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pf(d.options.projectId,p)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Ds(Sw,Tw,e),Ds(Sw,Tw,"esm2017")})();function Lf(){const{setUser:n,setLeagues:e,setSelectedLeagueId:t,setRole:r,setUserRole:i,setError:a}=bn();return async function(){try{await WA(Qt),n(null),e([]),t(""),r(null),i(null),a(null),localStorage.removeItem("selectedLeagueId"),localStorage.removeItem("selectedEventId"),localStorage.removeItem("pendingEventJoin")}catch{n(null),e([]),t(""),r(null),i(null),localStorage.removeItem("selectedLeagueId"),localStorage.removeItem("selectedEventId"),localStorage.removeItem("pendingEventJoin")}}}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),_E=n=>{const e=fM(n);return e.charAt(0).toUpperCase()+e.slice(1)},mC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),dM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=k.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>k.createElement("svg",{ref:u,...hM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:mC("lucide",i),...!a&&!dM(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,p])=>k.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(n,e)=>{const t=k.forwardRef(({className:r,...i},a)=>k.createElement(pM,{ref:a,iconNode:e,className:mC(`lucide-${uM(_E(n))}`,`lucide-${n}`,r),...i}));return t.displayName=_E(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Fo=Ze("arrow-left",mM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wE=Ze("arrow-right",gM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],yM=Ze("award",vM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],_M=Ze("bell-off",xM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],EM=Ze("bell",wM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Sm=Ze("calendar",bM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zv=Ze("chart-column",AM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],TM=Ze("chevron-down",SM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gC=Ze("circle-alert",CM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],K0=Ze("circle-check-big",IM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],RM=Ze("circle-help",NM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],DM=Ze("circle-x",OM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],vC=Ze("clock",PM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],yC=Ze("copy",MM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],LM=Ze("credit-card",kM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xC=Ze("download",jM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_C=Ze("eye-off",BM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wC=Ze("eye",VM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],FM=Ze("funnel",UM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],zM=Ze("hash",HM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],qM=Ze("heart",GM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],WM=Ze("link-2",$M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],EE=Ze("list",XM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],l0=Ze("log-out",YM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],QM=Ze("menu",KM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],JM=Ze("message-circle",ZM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],c0=Ze("plus",ek);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Ro=Ze("qr-code",tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],bE=Ze("refresh-ccw",nk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],AE=Ze("rocket",rk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],u0=Ze("settings",ik);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Jv=Ze("square-pen",ak);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ig=Ze("trending-up",sk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lk=Ze("triangle-alert",ok);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],uk=Ze("undo-2",ck);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ql=Ze("upload",fk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],oc=Ze("user-plus",dk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fa=Ze("users",hk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jf=Ze("x",pk),mk=({message:n,type:e="info",duration:t=5e3,onClose:r})=>{const[i,a]=k.useState(!0),o=k.useCallback(()=>{a(!1),setTimeout(()=>{r&&r()},300)},[r]);k.useEffect(()=>{if(t>0){const d=setTimeout(()=>{o()},t);return()=>clearTimeout(d)}},[t,o]);const c={info:"bg-blue-50 border-blue-200 text-blue-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",error:"bg-red-50 border-red-200 text-red-800",success:"bg-green-50 border-green-200 text-green-800"},u={info:m.jsx(gC,{className:"w-5 h-5"}),warning:m.jsx(vC,{className:"w-5 h-5"}),error:m.jsx(DM,{className:"w-5 h-5"}),success:m.jsx(K0,{className:"w-5 h-5"})};return m.jsx("div",{className:`max-w-sm p-4 border rounded-lg shadow-lg transition-all duration-300 ${i?"opacity-100 translate-x-0":"opacity-0 translate-x-full"} ${c[e]}`,children:m.jsxs("div",{className:"flex items-start gap-3",children:[u[e],m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-sm font-medium",children:n})}),m.jsx("button",{onClick:o,className:"flex-shrink-0 p-1 hover:bg-black/10 rounded-full transition",children:m.jsx(jf,{className:"w-4 h-4"})})]})})},EC=k.createContext();function gk({children:n}){const[e,t]=k.useState([]),[r,i]=k.useState(null),a=k.useCallback((O,j="info",F=5e3)=>{const q=Date.now()+Math.random(),P={id:q,message:O,type:j,duration:F};return t(R=>[...R,P]),q},[]),o=k.useCallback(O=>{t(j=>j.filter(F=>F.id!==O)),O===r&&i(null)},[r]),c=k.useCallback((O,j=4e3)=>a(O,"success",j),[a]),u=k.useCallback((O,j=6e3)=>a(O,"error",j),[a]),d=k.useCallback((O,j=5e3)=>a(O,"info",j),[a]),p=k.useCallback((O,j=5e3)=>a(O,"warning",j),[a]),g=k.useCallback(()=>{const O=e.find(F=>F.message.includes("Server is starting up after inactivity"));if(O||r)return r||(O==null?void 0:O.id);const j=a("Server is starting up after inactivity. This may take up to a minute...","warning",15e3);return i(j),j},[a,r,e]),x=k.useCallback(O=>c(`✅ ${O} added successfully!`),[c]),_=k.useCallback(O=>c(`✅ ${O} players uploaded successfully!`),[c]),E=k.useCallback(O=>c(`🎉 Event "${O}" created successfully!`),[c]),A=k.useCallback(O=>c(`✅ Event "${O}" updated successfully!`),[c]),S=k.useCallback((O,j)=>c(`📊 Score recorded for ${O} - ${j}`),[c]),I=k.useCallback(O=>{var F,q;const j=((q=(F=O==null?void 0:O.response)==null?void 0:F.data)==null?void 0:q.detail)||(O==null?void 0:O.message)||"An error occurred";return u(`❌ ${j}`)},[u]),N={addToast:a,removeToast:o,showSuccess:c,showError:u,showInfo:d,showWarning:p,showColdStartNotification:g,notifyPlayerAdded:x,notifyPlayersUploaded:_,notifyEventCreated:E,notifyEventUpdated:A,notifyScoreAdded:S,notifyError:I,toasts:e};return m.jsxs(EC.Provider,{value:N,children:[n,m.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:e.map(O=>m.jsx(mk,{message:O.message,type:O.type,duration:O.duration,onClose:()=>o(O.id)},O.id))})]})}function Q0(){const n=k.useContext(EC);if(!n)throw new Error("useToast must be used within a ToastProvider");return n}const Bf=({size:n="large",message:e="Loading..."})=>{const[t,r]=k.useState(!1),[i,a]=k.useState(!1);k.useEffect(()=>{const u=setTimeout(()=>{r(!0)},1e4),d=setTimeout(()=>{a(!0)},2e4);return()=>{clearTimeout(u),clearTimeout(d)}},[]);const o={small:"h-32 w-32",medium:"h-48 w-48",large:"h-64 w-64"},c={small:"w-6 h-6",medium:"w-8 h-8",large:"w-12 h-12"};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:`mx-auto mb-8 ${o[n]} flex items-center justify-center`,children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"WooCombine",className:"max-w-full max-h-full object-contain"})}),m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:`${c[n]} border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin`})}),m.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:e}),t&&!i&&m.jsxs("div",{className:"text-gray-500 text-sm max-w-md mx-auto",children:[m.jsx("p",{className:"mb-2",children:"This is taking longer than usual..."}),m.jsx("p",{children:"The server may be starting up."})]}),i&&m.jsxs("div",{className:"text-gray-500 text-sm max-w-md mx-auto bg-blue-50 p-4 rounded-lg border border-blue-200",children:[m.jsxs("p",{className:"mb-2",children:["🚀 ",m.jsx("strong",{children:"Server is starting up"})]}),m.jsx("p",{className:"mb-2",children:"This can take up to a minute on the first visit."}),m.jsx("p",{className:"text-xs",children:"Free hosting services need time to initialize."})]})]})})},bC=k.createContext();function vk({children:n}){const[e,t]=k.useState(null),[r,i]=k.useState(!0),[a,o]=k.useState(!1),[c,u]=k.useState(!1),[d,p]=k.useState(null),[g,x]=k.useState([]),[_,E]=k.useState(()=>localStorage.getItem("selectedLeagueId")||""),[A,S]=k.useState(null),[I,N]=k.useState(null),O=Bn(),{showColdStartNotification:j}=Q0(),[F,q]=k.useState(!1),P=k.useCallback(async H=>H?(t(H),o(!0),H.emailVerified?!0:(window.location.pathname!=="/verify-email"&&O("/verify-email"),!1)):(t(null),o(!0),!1),[O,t,o]),R=k.useCallback(async H=>{var z,U;try{const _e=iC(),Ee=await Promise.race([iM(rC(_e,"users",H.uid)),new Promise((ae,he)=>setTimeout(()=>he(new Error("Role check timeout")),2e4))]);if(!Ee.exists()||!Ee.data().role){N(null),x([]),S(null),u(!0);const ae=window.location.pathname;if(ae.startsWith("/join-event/")){const he=ae.replace("/join-event/","");localStorage.setItem("pendingEventJoin",he)}O("/select-role");return}const X=Ee.data().role;if(N(X),F)return;q(!0);let le=null,de=null;try{de=setTimeout(()=>{le||(le=j())},5e3);const ae=await Lt.get("/leagues/me",{timeout:45e3,retry:1});de&&(clearTimeout(de),de=null);const he=ae.data.leagues||[];x(he);let fe=_;if(he.length>0){(!fe||!he.some(Ve=>Ve.id===fe))&&(fe=he[0].id),E(fe),localStorage.setItem("selectedLeagueId",fe);const Te=he.find(Ve=>Ve.id===fe);S((Te==null?void 0:Te.role)||null)}else E(""),S(null),localStorage.removeItem("selectedLeagueId")}catch(ae){if(de&&(clearTimeout(de),de=null),((z=ae.response)==null?void 0:z.status)===404){x([]),E(""),S(null),localStorage.removeItem("selectedLeagueId"),q(!1),console.info("[AUTH] New user detected - no leagues found (expected for guided setup)");return}le||(le=j()),ae.message.includes("timeout")||ae.code==="ECONNABORTED"?p("Server is starting up. Please refresh the page in a moment."):((U=ae.response)==null?void 0:U.status)>=500&&p("Server is temporarily unavailable. Please try again shortly."),x([]),E(""),S(null),localStorage.removeItem("selectedLeagueId")}finally{q(!1)}u(!0);const He=window.location.pathname;["/login","/signup","/verify-email","/select-role","/"].includes(He)&&O("/dashboard")}catch(_e){if(p(_e.message),N(null),x([]),S(null),u(!0),_e.message.includes("Role check timeout")){const Ee=window.location.pathname;if(Ee.startsWith("/join-event/")){const X=Ee.replace("/join-event/","");localStorage.setItem("pendingEventJoin",X)}O("/select-role")}}finally{i(!1)}},[O,_]);k.useEffect(()=>{const H=$A(Qt,async z=>{if(!z){t(null),N(null),x([]),E(""),S(null),o(!0),u(!0),i(!1),p(null),localStorage.removeItem("selectedLeagueId");return}await P(z)?await R(z):i(!1)});return()=>H()},[P,R]);const M=k.useCallback(H=>{x(z=>z.some(Ee=>Ee.id===H.id)?z:[...z,H])},[]),V={user:e,userRole:I,role:A,leagues:g,selectedLeagueId:_,setSelectedLeagueId:H=>{if(E(H),localStorage.setItem("selectedLeagueId",H),g.length>0){const z=g.find(U=>U.id===H);S((z==null?void 0:z.role)||null)}},addLeague:M,authChecked:a,roleChecked:c,error:d,setError:p,setUser:t,setUserRole:N,setRole:S,setLeagues:x,setAuthChecked:o,setRoleChecked:u};return r?m.jsx(Bf,{size:"large"}):m.jsx(bC.Provider,{value:V,children:n})}function bn(){const n=k.useContext(bC);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}function yk({className:n=""}){return m.jsx("div",{className:`font-extrabold text-2xl text-cyan-700 min-w-0 ${n}`,children:"Woo-Combine"})}function Lr({children:n,footerLinks:e,backgroundColor:t,contentClassName:r,hideHeader:i,showOverlay:a=!0,useBackgroundVideo:o=!1,backgroundVideoUrl:c}){const u=t||"bg-gradient-to-br from-cyan-900 via-blue-900 to-cyan-700";return m.jsxs("div",{className:`min-h-screen flex flex-col ${o?"bg-black":u} relative overflow-hidden`,children:[o&&c&&m.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover z-0",children:[m.jsx("source",{src:c,type:"video/mp4"}),m.jsx("div",{className:`absolute inset-0 ${u}`})]}),!i&&m.jsx("header",{className:"absolute top-0 left-0 p-6 z-10",children:m.jsx(yk,{className:"text-white drop-shadow-lg"})}),m.jsx("main",{className:`flex flex-1 flex-col justify-center items-center px-4 relative z-10 ${r||""}`,children:n}),m.jsx("footer",{className:"w-full flex flex-col items-center gap-2 pb-8 mt-auto relative z-10",children:e}),a!==!1&&m.jsx("div",{className:"absolute inset-0 bg-black/40 pointer-events-none z-5"})]})}function SE(){var p;const n=Bn(),{user:e,userRole:t}=bn(),r=Lf(),[i,a]=k.useState(""),o=async()=>{if(t==="organizer"){a("Starting guided setup...");try{console.info("[GUIDED-SETUP] Navigating to onboarding/event for organizer guided setup"),n("/onboarding/event")}catch(g){console.error("[GUIDED-SETUP] Navigation error:",g),a(`Navigation error: ${g.message}`)}}else{a("Redirecting to Create League...");try{n("/create-league")}catch(g){a(`Navigation error: ${g.message}`)}}},c=()=>{a("Redirecting to Join League...");try{n("/join")}catch{a("Navigation error. Please try again.")}},u=()=>{a("Loading your leagues...");try{n("/select-league")}catch{a("Navigation error. Please try again.")}},d=async()=>{a("Logging out...");try{await r(),n("/welcome")}catch{a("Logout error. Please refresh the page.")}};return m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 mx-4",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}}),m.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Fa,{className:"w-6 h-6 text-cyan-600"})}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No League Selected"}),m.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"You need to join or create a league to access WooCombine features"})]}),i&&m.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 text-blue-700 px-4 py-3 rounded mb-6 text-sm",children:i}),m.jsxs("div",{className:"space-y-3 mb-6",children:[t==="organizer"&&m.jsx("div",{className:"border-2 border-green-300 bg-green-50 rounded-xl p-3 hover:border-green-400 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(AE,{className:"w-4 h-4 text-green-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900",children:"🚀 Start Guided Setup"}),m.jsx("span",{className:"bg-green-200 text-green-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Recommended"})]}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Create event → Import players → Share with coaches"}),m.jsxs("button",{onClick:o,className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-3 py-1.5 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2 text-sm",children:[m.jsx(AE,{className:"w-3 h-3"}),"Get Started"]})]})]})}),t!=="organizer"&&m.jsx("div",{className:"border-2 border-cyan-300 bg-cyan-50 rounded-xl p-3 hover:border-cyan-400 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-cyan-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(Ro,{className:"w-4 h-4 text-cyan-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900",children:"Join with Invite Code"}),m.jsx("span",{className:"bg-cyan-200 text-cyan-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Recommended"})]}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Ask your organizer for an invite code"}),m.jsxs("button",{onClick:c,className:"bg-cyan-600 hover:bg-cyan-700 text-white font-semibold px-3 py-1.5 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2 text-sm",children:[m.jsx(Ro,{className:"w-3 h-3"}),"Join League"]})]})]})}),m.jsx("div",{className:"border border-gray-200 rounded-xl p-3 hover:border-blue-300 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(EE,{className:"w-4 h-4 text-blue-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Choose from Your Leagues"}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Select from leagues you've already created or joined"}),m.jsxs("button",{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-3 py-1.5 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2 text-sm",children:[m.jsx(EE,{className:"w-3 h-3"}),"Choose League"]})]})]})}),t==="organizer"?m.jsx("div",{className:"border border-gray-200 rounded-xl p-3 hover:border-cyan-300 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-cyan-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(Ro,{className:"w-4 h-4 text-cyan-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Join Existing League"}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"If you were invited by another organizer"}),m.jsxs("button",{onClick:c,className:"bg-cyan-600 hover:bg-cyan-700 text-white font-semibold px-3 py-1.5 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2 text-sm",children:[m.jsx(Ro,{className:"w-3 h-3"}),"Join League"]})]})]})}):m.jsx("div",{className:"border border-gray-200 rounded-xl p-3 hover:border-green-300 transition",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.jsx(c0,{className:"w-4 h-4 text-green-600"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Create New League"}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Start your own league and invite players to join"}),m.jsxs("button",{onClick:o,className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-3 py-1.5 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2 text-sm",children:[m.jsx(c0,{className:"w-3 h-3"}),"Create League"]})]})]})})]}),m.jsx("div",{className:"border-t border-gray-200 pt-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-gray-600 font-medium text-xs",children:((p=e==null?void 0:e.email)==null?void 0:p.charAt(0).toUpperCase())||"U"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-medium text-gray-900",children:"Logged in as:"}),m.jsx("p",{className:"text-xs text-gray-600",children:(e==null?void 0:e.email)||"Unknown"})]})]}),m.jsxs("button",{onClick:d,className:"flex items-center gap-1 text-red-600 hover:text-red-700 font-medium text-xs transition",children:[m.jsx(l0,{className:"w-3 h-3"}),"Log Out"]})]})})]})})}const AC=k.createContext();function xk({children:n}){const{selectedLeagueId:e,user:t,authChecked:r,roleChecked:i}=bn(),[a,o]=k.useState([]),[c,u]=k.useState(null),[d,p]=k.useState(!1),[g,x]=k.useState(!1),[_,E]=k.useState(null),A=Ni(),S=["/welcome","/login","/signup","/verify-email","/select-role","/select-league","/claim","/create-league","/join","/onboarding/event"],I=A.pathname.startsWith("/join-event");k.useEffect(()=>{async function j(){var F,q,P;if(!(!r||!i)){if(!e||e.trim()===""||!t){p(!0),o([]),u(null);return}p(!1),x(!0),E(null);try{const R=new AbortController,M=setTimeout(()=>R.abort(),2e4),V=`/leagues/${e}/events`;console.info(`[EVENT-CONTEXT] Fetching events from: ${V}`);const{data:H}=await Lt.get(V,{signal:R.signal,retry:2});clearTimeout(M);const z=H.events||[];o(Array.isArray(z)?z:[]);const U=localStorage.getItem("selectedEventId"),_e=Array.isArray(z)?z.find(Ee=>Ee.id===U):null;_e?u(_e):Array.isArray(z)&&z.length>0?u(z[0]):u(null),E(null)}catch(R){console.error(`[EVENT-CONTEXT] Failed to fetch events for league ${e}:`,R),o([]),u(null),R.name==="AbortError"?E("Request timed out. Please try again."):((F=R.response)==null?void 0:F.status)===401?E("Authentication failed. Please refresh the page."):E(((P=(q=R.response)==null?void 0:q.data)==null?void 0:P.detail)||R.message||"Failed to load events")}finally{x(!1)}}}j()},[e,t,r,i]),k.useEffect(()=>{c&&localStorage.setItem("selectedEventId",c.id)},[c]);const N=async()=>{var j,F;if(!(!e||e.trim()===""||!t)){x(!0),E(null);try{const q=`/leagues/${e}/events`;console.info(`[EVENT-CONTEXT] Refreshing events from: ${q}`);const{data:P}=await Lt.get(q,{retry:2}),R=P.events||[];o(Array.isArray(R)?R:[]),E(null)}catch(q){console.error(`[EVENT-CONTEXT] Failed to refresh events for league ${e}:`,q),E(((F=(j=q.response)==null?void 0:j.data)==null?void 0:F.detail)||q.message||"Failed to refresh events")}finally{x(!1)}}},O=r&&i&&d&&!S.includes(A.pathname)&&!I;return m.jsx(AC.Provider,{value:{events:a,selectedEvent:c,setSelectedEvent:u,setEvents:o,noLeague:d,loading:g,error:_,refreshEvents:N,LeagueFallback:SE},children:O?m.jsx(SE,{}):n})}function ia(){return k.useContext(AC)}const SC="woo-combine-notifications-enabled",_k=()=>{const n=localStorage.getItem(SC);return n?JSON.parse(n):!1},wk=n=>{localStorage.setItem(SC,JSON.stringify(n))};function Ek({isOpen:n,onClose:e,user:t,userRole:r,onLogout:i}){const a=Bn(),{showSuccess:o,showInfo:c}=Q0(),[u,d]=k.useState(_k());if(!n)return null;const p=()=>{if(!(t!=null&&t.email))return"U";const A=t.email,S=A.split("@")[0].split(".");return S.length>=2?(S[0][0]+S[1][0]).toUpperCase():A[0].toUpperCase()},g=()=>t!=null&&t.displayName?t.displayName:t!=null&&t.email?t.email.split("@")[0].split(".").map(S=>S.charAt(0).toUpperCase()+S.slice(1)).join(" "):"User",x=A=>{e(),a(A)},_=()=>{const A=!u;d(A),wk(A),A?o("🔔 Notifications enabled! You'll receive updates about events and results."):c("🔕 Notifications disabled. You can re-enable them anytime.")},E=()=>{c("💡 Check your browser settings to allow notifications from woo-combine.com")};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"bg-white rounded-t-2xl p-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Profile"}),m.jsx("button",{onClick:e,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition",children:m.jsx(jf,{className:"w-5 h-5 text-gray-600"})})]}),m.jsxs("div",{className:"bg-gradient-to-br from-cmf-primary to-cmf-secondary px-6 py-8 text-center text-white",children:[m.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4",children:p()}),m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx("h3",{className:"text-xl font-bold",children:g()}),m.jsx("button",{className:"p-1 hover:bg-white/20 rounded-full transition",children:m.jsx(Jv,{className:"w-4 h-4"})})]}),m.jsx("p",{className:"text-cmf-light text-sm mt-1",children:t==null?void 0:t.email})]}),m.jsxs("div",{className:"p-4 space-y-2",children:[m.jsxs("button",{onClick:()=>x("/select-league"),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(Fa,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"My Events"})]}),r==="organizer"&&m.jsxs("button",{onClick:()=>x("/create-league"),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(c0,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Create an Event"})]}),m.jsxs("button",{onClick:()=>x("/join"),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(oc,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Join an Event"})]}),m.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 rounded-lg transition",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[u?m.jsx(EM,{className:"w-5 h-5 text-green-500"}):m.jsx(_M,{className:"w-5 h-5 text-red-500"}),m.jsxs("div",{children:[m.jsxs("div",{className:"font-medium text-gray-900",children:["Notifications are ",u?"on":"off"]}),m.jsx("div",{className:"text-sm text-gray-500",children:u?"You'll receive event updates":"You will miss event updates"})]})]}),m.jsx("button",{onClick:_,className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${u?"bg-green-500":"bg-gray-200"}`,children:m.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-0.5 shadow transition-transform duration-200 ${u?"translate-x-6":"translate-x-0.5"}`})})]}),m.jsx("div",{className:"mt-2 text-sm text-gray-500",children:u?"Get notified about event updates, new events, and score results":"Enable notifications for event updates, new events, and messages"}),m.jsx("button",{onClick:E,className:"text-cmf-primary text-sm font-medium mt-1 hover:underline",children:u?"Manage browser settings":"Open device settings"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(LM,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Subscription"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(RM,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Help Center"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(JM,{className:"w-5 h-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Contact Us"})]}),m.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition",children:[m.jsx(qM,{className:"w-5 h-5 text-red-500"}),m.jsx("span",{className:"font-medium text-gray-900",children:"Love WooCombine?"})]}),m.jsxs("button",{onClick:()=>{e(),i()},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-red-50 rounded-lg transition mt-4 border-t border-gray-200 pt-4",children:[m.jsx(l0,{className:"w-5 h-5 text-red-600"}),m.jsx("span",{className:"font-medium text-red-600",children:"Log Out"})]})]})]})})}function Tm(){const{user:n,userRole:e}=bn(),{selectedEvent:t}=ia(),[r,i]=k.useState(!1),[a,o]=k.useState(!1),[c,u]=k.useState(!1),d=Lf(),p=Bn(),g=()=>i(!1),x=()=>{if(!(n!=null&&n.email))return"U";const A=n.email,S=A.split("@")[0].split(".");return S.length>=2?(S[0][0]+S[1][0]).toUpperCase():A[0].toUpperCase()},_=()=>{o(!a),p("/select-league")},E=async()=>{try{await d(),p("/welcome")}catch{p("/welcome")}};return m.jsxs(m.Fragment,{children:[m.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-3",children:m.jsxs("div",{className:"flex items-center max-w-7xl mx-auto gap-4",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("button",{onClick:()=>u(!0),className:"w-10 h-10 bg-cmf-primary rounded-full flex items-center justify-center text-white font-bold text-sm hover:bg-cmf-secondary transition",children:x()})}),m.jsx("div",{className:"flex-1 flex justify-start min-w-0",children:m.jsxs("button",{onClick:_,className:"flex items-center gap-1 px-2 py-2 rounded-lg hover:bg-gray-50 transition max-w-[200px]",children:[m.jsxs("div",{className:"text-left min-w-0",children:[m.jsx("div",{className:"font-bold text-sm md:text-lg text-gray-900 truncate",children:(t==null?void 0:t.name)||"Select Event"}),(t==null?void 0:t.location)&&m.jsx("div",{className:"text-xs text-gray-500 truncate hidden sm:block",children:t.location})]}),m.jsx(TM,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-400 flex-shrink-0"})]})}),m.jsxs("div",{className:"flex items-center gap-3 md:gap-6",children:[m.jsx(gt,{to:"/dashboard",className:"text-gray-700 hover:text-cmf-primary font-medium transition whitespace-nowrap text-sm md:text-base",children:"Home"}),m.jsx(gt,{to:"/players",className:"text-gray-700 hover:text-cmf-primary font-medium transition whitespace-nowrap text-sm md:text-base",children:"Players"}),e==="organizer"&&m.jsx(gt,{to:"/admin",className:"text-gray-700 hover:text-cmf-primary font-medium transition whitespace-nowrap text-sm md:text-base",children:"Admin"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"hidden sm:block relative",children:[m.jsx("button",{onClick:()=>i(!r),className:"p-2 rounded-lg hover:bg-gray-50 transition","aria-label":"Settings",children:m.jsx(u0,{className:"w-6 h-6 text-gray-600"})}),r&&m.jsxs("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[m.jsx(gt,{to:"/select-league",className:"block px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>i(!1),children:"Switch Event"}),m.jsx("hr",{className:"my-2"}),m.jsxs("button",{onClick:()=>{i(!1),E()},className:"flex items-center gap-2 w-full px-4 py-2 text-left text-red-600 hover:bg-red-50",children:[m.jsx(l0,{className:"w-4 h-4"}),"Log Out"]})]})]}),m.jsx("button",{className:"sm:hidden p-2 rounded-lg hover:bg-gray-50",onClick:()=>i(!r),"aria-label":"Open menu",children:m.jsx(QM,{className:"w-6 h-6 text-gray-600"})})]})]})}),r&&m.jsx("div",{className:"sm:hidden fixed top-16 left-0 w-full bg-white shadow-lg z-50 border-t border-gray-200",children:m.jsxs("div",{className:"flex flex-col py-4",children:[m.jsx(gt,{to:"/select-league",className:"px-4 py-3 text-gray-700 hover:bg-gray-50 border-b border-gray-100",onClick:g,children:"Switch Event"}),m.jsxs("button",{onClick:()=>{g(),E()},className:"flex items-center gap-2 px-4 py-3 text-left text-red-600 hover:bg-red-50",children:[m.jsx(l0,{className:"w-4 h-4"}),"Log Out"]})]})}),m.jsx(Ek,{isOpen:c,onClose:()=>u(!1),user:n,userRole:e,onLogout:E})]})}function bk(){const{user:n,userRole:e}=bn(),{selectedEvent:t}=ia(),r=Bn(),[i,a]=Tb.useState(!1),o=t&&t.date&&!isNaN(Date.parse(t.date))?new Date(t.date).toLocaleDateString():"No date set",c=u=>{a(!0),setTimeout(()=>{r(u)},0)};return i?m.jsx(Bf,{title:"Navigating...",subtitle:"Taking you to your destination",size:"medium"}):t?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-cmf-primary/30",children:[m.jsx("h1",{className:"text-2xl font-bold text-cmf-secondary mb-2",children:"Welcome to WooCombine!"}),m.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[m.jsx(Sm,{className:"w-4 h-4"}),m.jsxs("span",{children:[m.jsx("strong",{children:t.name})," - ",o]})]}),t.location&&m.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["📍 ",t.location]}),m.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e==="organizer"&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>c("/admin"),className:"bg-cmf-secondary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-primary transition flex items-center justify-center gap-3 text-lg",children:[m.jsx(Zv,{className:"w-6 h-6"}),"Manage Event"]}),m.jsxs("button",{onClick:()=>c("/players"),className:"bg-cmf-primary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-secondary transition flex items-center justify-center gap-3 text-lg",children:[m.jsx(Fa,{className:"w-6 h-6"}),"View Players & Rankings"]})]}),e==="coach"&&m.jsxs("button",{onClick:()=>c("/players"),className:"bg-cmf-primary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-secondary transition flex items-center justify-center gap-3 text-lg",children:[m.jsx(Fa,{className:"w-6 h-6"}),"View Players & Rankings"]}),e==="player"&&t&&m.jsx("button",{onClick:()=>c("/drill-input"),className:"bg-cmf-secondary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-primary transition flex items-center justify-center gap-3 text-lg",children:"📝 Submit Drill Results"})]})]}),t&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx(Sm,{className:"w-5 h-5 text-cmf-primary"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Event Details"})]}),m.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Name:"})," ",t.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",o]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Location:"})," ",t.location||"Location TBD"]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Getting Started"}),m.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"w-6 h-6 bg-cmf-primary text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),m.jsxs("span",{children:["Event selected: ",m.jsx("strong",{children:t.name})," ✓"]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"w-6 h-6 bg-cmf-primary text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),m.jsxs("span",{children:[e==="organizer"&&"Import players and manage event settings",e==="coach"&&"View player rankings and adjust drill weights",e==="player"&&"Submit your drill results"]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"w-6 h-6 bg-cmf-primary text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),m.jsx("span",{children:"View real-time rankings and results"})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Sm,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-secondary mb-4",children:"Welcome to WooCombine!"}),e==="organizer"?m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-gray-600 mb-6",children:"Ready to create your first event? Our guided setup will walk you through creating an event, adding players, and sharing with coaches."}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:()=>r("/onboarding/event"),className:"w-full bg-cmf-primary text-white font-bold px-6 py-4 rounded-xl shadow hover:bg-cmf-secondary transition flex items-center justify-center gap-2",children:"🚀 Start Guided Setup"}),m.jsx("button",{onClick:()=>r("/select-league"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-6 py-3 rounded-lg transition",children:"Select Existing Event"})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-gray-600 mb-6",children:'Click on "Select Event" in the header above to choose an event and get started.'}),m.jsx("button",{onClick:()=>r("/select-league"),className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Select Event"})]})]})})})}const Ak=[{value:"40m_dash",label:"40M Dash"},{value:"vertical_jump",label:"Vertical Jump"},{value:"catching",label:"Catching"},{value:"throwing",label:"Throwing"},{value:"agility",label:"Agility"}];function Sk({playerId:n,onSuccess:e}){const{user:t,selectedLeagueId:r}=bn(),{selectedEvent:i}=ia(),[a,o]=k.useState(""),[c,u]=k.useState(""),[d,p]=k.useState(!1),[g,x]=k.useState(""),[_,E]=k.useState(""),A=async S=>{if(S.preventDefault(),x(""),E(""),!a||!c){x("Please select a drill type and enter a value.");return}if(!i){x("No event selected. Please select an event first.");return}p(!0);try{await Lt.post("/drill-results/",{player_id:n,type:a,value:parseFloat(c),event_id:i.id}),E("Drill result submitted!"),o(""),u(""),e&&e()}catch(I){x(I.message)}finally{p(!1)}};return m.jsxs("form",{onSubmit:A,className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md mx-auto mb-6",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-cmf-primary",children:"Submit Drill Result"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block mb-1 font-semibold",children:"Drill Type"}),m.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0,children:[m.jsx("option",{value:"",children:"Select a drill"}),Ak.map(S=>m.jsx("option",{value:S.value,children:S.label},S.value))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block mb-1 font-semibold",children:"Value"}),m.jsx("input",{type:"number",step:"any",value:c,onChange:S=>u(S.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),g&&m.jsx("div",{className:"text-red-500 mb-2 text-sm",children:g}),_&&m.jsx("div",{className:"text-green-600 mb-2 text-sm",children:_}),m.jsx("button",{type:"submit",className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-bold py-2 rounded-lg shadow transition",disabled:d,children:d?"Submitting...":"Submit Result"})]})}function Tk({onEventSelected:n}){const{events:e,selectedEvent:t,setSelectedEvent:r,setEvents:i,loading:a,error:o,refreshEvents:c}=ia(),{selectedLeagueId:u,user:d}=bn(),[p,g]=k.useState(!1),[x,_]=k.useState(""),[E,A]=k.useState(""),[S,I]=k.useState(""),[N,O]=k.useState(!1),[j,F]=k.useState(""),q=R=>{if(!Array.isArray(e))return;const M=e.find(V=>V.id===R.target.value);M&&(r(M),n&&n(M))},P=async R=>{var M,V;R.preventDefault(),O(!0),F("");try{const H=E?new Date(E).toISOString().slice(0,10):"",U={id:(await Lt.post(`/leagues/${u}/events`,{name:x,date:H,location:S})).data.event_id,name:x,date:H,created_at:new Date().toISOString()};i(_e=>[U,..._e]),r(U),g(!1),_(""),A(""),I(""),n&&n(U)}catch(H){F(((V=(M=H.response)==null?void 0:M.data)==null?void 0:V.detail)||H.message||"Failed to create event")}finally{O(!1)}};return a?m.jsx("div",{className:"flex flex-col gap-2 mb-6",children:m.jsxs("div",{className:"text-center text-gray-500 py-4",children:[m.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full"}),m.jsx("div",{className:"mt-2",children:"Loading events..."})]})}):o?m.jsx("div",{className:"flex flex-col gap-2 mb-6",children:m.jsxs("div",{className:"text-center text-red-500 py-4 bg-red-50 rounded-lg border border-red-200",children:[m.jsx("div",{className:"mb-2",children:"⚠️ Failed to load events"}),m.jsx("div",{className:"text-sm text-red-400 mb-3",children:o}),m.jsx("button",{onClick:c,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition text-sm",children:"Try Again"})]})}):m.jsxs("div",{className:"flex flex-col gap-2 mb-6","data-event-selector":!0,children:[e.length===0&&m.jsx("div",{className:"text-center text-cmf-secondary text-lg font-semibold py-2",children:"No events found. Please create a new event."}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("select",{value:(t==null?void 0:t.id)||"",onChange:q,className:"border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",disabled:!Array.isArray(e)||e.length===0,"data-event-selector-dropdown":!0,children:[m.jsx("option",{value:"",children:"Select an event..."}),Array.isArray(e)&&e.map(R=>{let M="Invalid Date";return R.date&&!isNaN(Date.parse(R.date))&&(M=new Date(R.date).toLocaleDateString()),m.jsxs("option",{value:R.id,children:[R.name," – ",M]},R.id)})]}),m.jsx("button",{onClick:()=>g(!0),className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Create New Event"})]}),p&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[m.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create New Event"}),m.jsxs("form",{onSubmit:P,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Event Name"}),m.jsx("input",{type:"text",value:x,onChange:R=>_(R.target.value),className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Event Date"}),m.jsx("input",{type:"date",value:E,onChange:R=>A(R.target.value),className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),m.jsx("input",{type:"text",value:S,onChange:R=>I(R.target.value),placeholder:"e.g., Central Park Football Field",className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary"})]}),j&&m.jsx("div",{className:"text-red-500 text-sm mb-4",children:j}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",disabled:N,className:"bg-cmf-primary text-white px-4 py-2 rounded hover:bg-cmf-secondary transition disabled:opacity-50",children:N?"Creating...":"Create"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})]})}const wi=[{key:"40m_dash",label:"40M Dash",unit:"sec"},{key:"vertical_jump",label:"Vertical Jump",unit:"in"},{key:"catching",label:"Catching",unit:"pts"},{key:"throwing",label:"Throwing",unit:"pts"},{key:"agility",label:"Agility",unit:"pts"}],Ng={"40m_dash":.3,vertical_jump:.2,catching:.15,throwing:.15,agility:.2},Oo={balanced:{name:"Balanced",description:"Equal emphasis on all skills",weights:{"40m_dash":.2,vertical_jump:.2,catching:.2,throwing:.2,agility:.2}},speed:{name:"Speed Focused",description:"Emphasizes speed and athleticism",weights:{"40m_dash":.4,vertical_jump:.3,catching:.1,throwing:.1,agility:.1}},skills:{name:"Skills Focused",description:"Emphasizes catching and throwing",weights:{"40m_dash":.1,vertical_jump:.1,catching:.35,throwing:.35,agility:.1}},athletic:{name:"Athletic",description:"Default weighting system",weights:{"40m_dash":.3,vertical_jump:.2,catching:.15,throwing:.15,agility:.2}}},TE=[{id:"players",label:"Player Management",icon:Fa,description:"View, edit, and manage individual players"},{id:"rankings",label:"Rankings & Analysis",icon:Zv,description:"Age group rankings with weight adjustments"},{id:"exports",label:"Export & Reports",icon:xC,description:"Export data and view analytics"}];function Ck({player:n,allPlayers:e,onClose:t,onSave:r}){const[i,a]=k.useState({name:(n==null?void 0:n.name)||"",number:(n==null?void 0:n.number)||"",age_group:(n==null?void 0:n.age_group)||""}),[o,c]=k.useState(!1),[u,d]=k.useState(""),p=[...new Set(e.map(_=>_.age_group).filter(_=>_&&_.trim()!==""))].sort(),g=(_,E)=>{a(A=>({...A,[_]:E})),d("")},x=async()=>{var _,E;if(!i.name.trim()){d("Player name is required");return}c(!0),d("");try{const A={name:i.name.trim(),number:i.number?parseInt(i.number):null,age_group:i.age_group.trim()||null};await Lt.put(`/players/${n.id}?event_id=${n.event_id}`,A),r(),t()}catch(A){d(((E=(_=A.response)==null?void 0:_.data)==null?void 0:E.detail)||"Failed to update player")}finally{c(!1)}};return n?m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[m.jsxs("div",{className:"bg-cmf-primary text-white p-6 rounded-t-xl flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Jv,{className:"w-5 h-5"}),m.jsx("h2",{className:"text-xl font-bold",children:"Edit Player"})]}),m.jsx("button",{onClick:t,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition",children:m.jsx(jf,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6 space-y-4",children:[u&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:u}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Name *"}),m.jsx("input",{type:"text",value:i.name,onChange:_=>g("name",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter player name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Number"}),m.jsx("input",{type:"number",value:i.number,onChange:_=>g("number",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter player number",min:"1",max:"999"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Group"}),m.jsx("input",{type:"text",list:"age-group-suggestions",value:i.age_group,onChange:_=>g("age_group",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"e.g., 6U, U8, 7-8, 9-10 years old"}),m.jsxs("datalist",{id:"age-group-suggestions",children:[p.map(_=>m.jsx("option",{value:_},_)),m.jsx("option",{value:"6U"}),m.jsx("option",{value:"U6"}),m.jsx("option",{value:"8U"}),m.jsx("option",{value:"U8"}),m.jsx("option",{value:"10U"}),m.jsx("option",{value:"U10"}),m.jsx("option",{value:"12U"}),m.jsx("option",{value:"U12"}),m.jsx("option",{value:"5-6"}),m.jsx("option",{value:"7-8"}),m.jsx("option",{value:"9-10"}),m.jsx("option",{value:"11-12"}),m.jsx("option",{value:"13-14"}),m.jsx("option",{value:"15-16"}),m.jsx("option",{value:"17-18"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type any format your league uses (6U, U8, 7-8 years old, etc.)"})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{onClick:t,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 rounded-lg transition",disabled:o,children:"Cancel"}),m.jsx("button",{onClick:x,disabled:o,className:"flex-1 bg-cmf-primary hover:bg-cmf-secondary text-white font-medium py-2 rounded-lg transition disabled:opacity-50",children:o?"Saving...":"Save Changes"})]})]})]})}):null}function Ik({player:n,allPlayers:e,onClose:t}){const[r,i]=k.useState({...Ng}),[a,o]=k.useState("athletic");if(!n||!e||e.length===0)return null;const c=()=>{const S=Object.values(r).reduce((N,O)=>N+O,0);if(S===0)return{};const I={};return wi.forEach(N=>{I[N.key]=Math.round(r[N.key]/S*100)}),I},u=(S,I)=>{const N={...c(),[S]:I},O=Object.values(N).reduce((F,q)=>F+q,0);if(O===0)return;const j={};wi.forEach(F=>{j[F.key]=N[F.key]/O}),i(j),o(null)},d=S=>{i({...Oo[S].weights}),o(S)},p={};wi.forEach(S=>{try{const I=e.filter(j=>j&&j.id&&j.age_group===n.age_group&&j[S.key]!=null&&typeof j[S.key]=="number");if(I.length===0){p[S.key]=null;return}const O=I.sort((j,F)=>S.key==="40m_dash"?j[S.key]-F[S.key]:F[S.key]-j[S.key]).findIndex(j=>j.id===n.id)+1;p[S.key]=O>0?O:null}catch{p[S.key]=null}});const g=wi.map(S=>{try{const I=n[S.key]!=null&&typeof n[S.key]=="number"?n[S.key]:null,N=r[S.key]||0,O=I!=null?I*N:0;return{...S,rawScore:I,weight:N,weightedScore:O,rank:p[S.key]}}catch{return{...S,rawScore:null,weight:r[S.key]||0,weightedScore:0,rank:null}}}),x=g.reduce((S,I)=>S+(I.weightedScore||0),0),_=c();let E=1,A=[];try{if(A=e.filter(S=>S&&S.id&&S.age_group===n.age_group),A.length>0){const I=A.map(N=>{try{const O=wi.reduce((j,F)=>{const q=N[F.key]!=null&&typeof N[F.key]=="number"?N[F.key]:0,P=r[F.key]||0;return j+q*P},0);return{...N,currentScore:O}}catch{return{...N,currentScore:0}}}).sort((N,O)=>(O.currentScore||0)-(N.currentScore||0)).findIndex(N=>N.id===n.id);E=I>=0?I+1:1}}catch{E=1,A=[n]}return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] flex flex-col",children:[m.jsxs("div",{className:"bg-cmf-primary text-white px-6 py-3 rounded-t-xl flex justify-between items-center flex-shrink-0",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold",children:n.name}),m.jsxs("p",{className:"text-cmf-light text-sm",children:["Player #",n.number," • Age Group: ",n.age_group]})]}),m.jsxs("div",{className:"text-right mr-4",children:[m.jsx("div",{className:"text-sm opacity-75",children:"Overall Score"}),m.jsxs("div",{className:"text-2xl font-bold text-cmf-primary",children:[x.toFixed(2)," pts"]}),m.jsxs("div",{className:"text-xs opacity-75",children:["Rank #",E," of ",A.length]})]}),m.jsx("button",{onClick:t,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition",children:m.jsx(jf,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"flex-1 overflow-hidden",children:m.jsxs("div",{className:"h-full flex",children:[m.jsx("div",{className:"flex-1 p-4",children:m.jsxs("div",{className:"h-full flex flex-col",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[m.jsx(Ig,{className:"w-5 h-5 text-cmf-primary"}),"Drill Performance & Weight Control"]}),m.jsx("div",{className:"grid grid-cols-1 gap-2 flex-1 overflow-y-auto",children:g.map(S=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-200",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:S.label}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-base font-bold text-cmf-primary",children:S.rawScore!=null?`${S.rawScore} ${S.unit}`:"No score"}),S.rank&&m.jsxs("span",{className:"bg-cmf-primary text-white px-1.5 py-0.5 rounded-full text-xs font-medium",children:["#",S.rank]})]})]})}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-xs text-gray-600",children:"Contribution"}),m.jsxs("div",{className:"text-base font-bold text-cmf-secondary",children:[S.weightedScore.toFixed(2)," pts"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"text-xs font-medium text-gray-600 w-16",children:[_[S.key],"%"]}),m.jsx("input",{type:"range",min:0,max:100,value:_[S.key],onChange:I=>u(S.key,parseInt(I.target.value)),className:"flex-1 accent-cmf-primary h-2 rounded-lg"}),m.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-cmf-primary to-cmf-secondary transition-all duration-300",style:{width:`${Math.min(S.weightedScore/Math.max(...g.map(I=>I.weightedScore))*100,100)}%`}})})]})]},S.key))}),m.jsx("div",{className:"mt-2 p-2 bg-cmf-primary/10 rounded-lg border-2 border-cmf-primary/20 flex-shrink-0",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Total Composite Score:"}),m.jsxs("span",{className:"text-lg font-bold text-cmf-primary",children:[x.toFixed(2)," pts (Rank #",E,")"]})]})})]})}),m.jsx("div",{className:"w-80 bg-gray-50 p-4 border-l border-gray-200 overflow-y-auto",children:m.jsxs("div",{className:"h-full flex flex-col",children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[m.jsx(u0,{className:"w-4 h-4 text-cmf-primary"}),"Weight Scenarios"]}),m.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(Oo).map(([S,I])=>m.jsxs("button",{onClick:()=>d(S),className:`p-2 text-left rounded-lg border-2 transition-all ${a===S?"border-cmf-primary bg-cmf-primary/5 text-cmf-primary":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[m.jsx("div",{className:"font-medium text-sm",children:I.name}),m.jsx("div",{className:"text-xs text-gray-500",children:I.description})]},S))})]}),m.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200 flex-1 min-h-0",children:[m.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[m.jsx(yM,{className:"w-4 h-4 text-yellow-500"}),"Ranking Analysis"]}),m.jsxs("div",{className:"space-y-2 text-sm overflow-y-auto max-h-96",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Age Group Rank:"}),m.jsxs("span",{className:"font-bold text-cmf-primary",children:["#",E," of ",A.length]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-600",children:"Overall Score:"}),m.jsxs("span",{className:"font-bold text-cmf-secondary",children:[x.toFixed(2)," pts"]})]}),m.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[m.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Score Breakdown:"}),g.map(S=>m.jsxs("div",{className:"flex justify-between text-xs",children:[m.jsxs("span",{className:"text-gray-600",children:[S.label,":"]}),m.jsxs("span",{className:"font-mono",children:[S.weightedScore.toFixed(2)," pts"]})]},S.key))]}),m.jsx("div",{className:"pt-2 border-t border-gray-200",children:m.jsx("div",{className:"text-xs text-gray-500",children:a?`Using ${Oo[a].name} preset`:"Using custom weights"})})]})]}),m.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center flex-shrink-0",children:"💡 Adjust sliders for real-time changes"})]})})]})})]})})}function Nk(){var gr,Vn,Tr;const{selectedEvent:n}=ia(),{user:e,selectedLeagueId:t,userRole:r}=bn(),[i,a]=k.useState([]),[o,c]=k.useState(!0),[u,d]=k.useState(null),[p,g]=k.useState({}),[x,_]=k.useState(null),[E,A]=k.useState(null),S=Bn(),I=Ni(),[N,O]=k.useState("players");k.useEffect(()=>{const ve=new URLSearchParams(I.search).get("tab");ve&&["players","rankings","exports"].includes(ve)&&O(ve)},[I.search]);const[j,F]=k.useState(""),[q,P]=k.useState([]),[R,M]=k.useState(!1),[V,H]=k.useState(null),[z,U]=k.useState({...Ng}),[_e,Ee]=k.useState("athletic"),[X,le]=k.useState({...Ng}),[de,He]=k.useState("athletic"),$=()=>{const me=Object.values(z).reduce((we,be)=>we+be,0),ve={};return wi.forEach(we=>{ve[we.key]=Math.round(z[we.key]/me*100)}),ve},ae=(me,ve)=>{const we={...$(),[me]:ve},be=Object.values(we).reduce((ze,rt)=>ze+rt,0);if(be===0)return;const Ie={};wi.forEach(ze=>{Ie[ze.key]=we[ze.key]/be}),U(Ie),Ee(null)},he=me=>{U({...Oo[me].weights}),Ee(me)},fe=me=>{le({...Oo[me].weights}),He(me)},Te=(me,ve)=>{try{let we=0,be=0;if(wi.forEach(rt=>{const Vt=me[rt.key],zt=ve[rt.key]||0;if(Vt!=null&&typeof Vt=="number"&&Vt!==0){if(rt.key==="40m_dash"){const Jt=Math.max(0,30-Vt);we+=Jt*zt}else we+=Vt*zt;be+=zt}}),be===0)return 0;const Ie=Object.values(ve).reduce((rt,Vt)=>rt+Vt,0);return we/be*Ie}catch{return 0}},Ve=(me,ve)=>{try{return me.map(be=>({...be,weightedScore:Te(be,ve)})).sort((be,Ie)=>be.weightedScore!==Ie.weightedScore?Ie.weightedScore-be.weightedScore:be.name.localeCompare(Ie.name))}catch{return me.sort((we,be)=>we.composite_score!==be.composite_score?(be.composite_score||0)-(we.composite_score||0):we.name.localeCompare(be.name))}},Ne=k.useCallback(async()=>{var me;if(!n||!e||!t){a([]),c(!1);return}c(!0),d(null);try{const{data:ve}=await Lt.get(`/players?event_id=${n.id}`);if(a(ve),x){const we=ve.find(be=>be.id===x.id);we&&_(we)}}catch(ve){((me=ve.response)==null?void 0:me.status)===404?(d(null),a([])):d(ve.message)}finally{c(!1)}},[n,e,t,x]);k.useEffect(()=>{Ne()},[Ne]),k.useEffect(()=>{const ve=setTimeout(async()=>{var we;if(!j||!e||!t||!n||N!=="rankings"){P([]);return}M(!0),H(null);try{const be=new URLSearchParams({age_group:j,event_id:n.id});be.append("weight_40m_dash",z["40m_dash"]),be.append("weight_vertical_jump",z.vertical_jump),be.append("weight_catching",z.catching),be.append("weight_throwing",z.throwing),be.append("weight_agility",z.agility);const Ie=await Lt.get(`/rankings?${be.toString()}`);P(Ie.data)}catch(be){((we=be.response)==null?void 0:we.status)===404?(H(null),P([])):H(be.message)}finally{M(!1)}},300);return()=>clearTimeout(ve)},[j,z,e,t,n,N]);const Bt=[...new Set(i.map(me=>me.age_group))].sort(),ht=me=>{g(ve=>({...ve,[me]:!ve[me]}))},Et=(i||[]).reduce((me,ve)=>{const we=ve.age_group||"Unassigned";return me[we]=me[we]||[],me[we].push(ve),me},{});return!n||!n.id?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Ig,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Event Selected"}),m.jsx("p",{className:"text-gray-600 mb-6",children:r==="organizer"?"Select or create an event to manage players and drills.":"Ask your league operator to assign you to an event."}),m.jsx("button",{onClick:()=>S("/select-league"),className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Select Event"})]})})}):o?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center",children:[m.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full mb-2"}),m.jsx("div",{className:"text-gray-500",children:"Loading players..."})]})})}):u?u.includes("422")?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Players Found"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Use the Admin tab to upload or import players to get started."}),m.jsx(gt,{to:"/admin",className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Go to Admin"})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:m.jsxs("div",{className:"text-red-500 font-semibold",children:["Error: ",u]})})})}):i.length===0?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Ig,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Players Found Yet"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"You can upload a CSV or add them manually to get started."}),m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsx(gt,{to:"/admin#player-upload-section",className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Upload CSV"}),m.jsx(gt,{to:"/admin#player-upload-section",className:"bg-cmf-secondary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-primary transition",children:"Add Player"})]})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-cmf-primary/30",children:[m.jsx("h1",{className:"text-2xl font-bold text-cmf-secondary mb-2",children:"WooCombine: Players & Rankings"}),m.jsxs("p",{className:"text-gray-600 mb-4",children:["Managing: ",m.jsx("strong",{children:n.name})," - ",new Date(n.event_date).toLocaleDateString()]}),m.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m.jsx(gt,{to:"/live-entry",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2",children:"🚀 Live Entry"}),r==="organizer"&&m.jsx(gt,{to:"/admin",className:"bg-cmf-primary hover:bg-cmf-secondary text-white px-4 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2",children:"⚙️ Admin Tools"})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 overflow-hidden",children:[m.jsx("div",{className:"flex border-b border-gray-200",children:TE.map(me=>{const ve=me.icon;return m.jsxs("button",{onClick:()=>O(me.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors ${N===me.id?"bg-cmf-primary text-white border-b-2 border-cmf-primary":"text-gray-600 hover:text-cmf-primary hover:bg-gray-50"}`,children:[m.jsx(ve,{className:"w-4 h-4"}),m.jsx("span",{className:"hidden sm:inline",children:me.label}),m.jsx("span",{className:"sm:hidden",children:me.label.split(" ")[0]})]},me.id)})}),m.jsx("div",{className:"px-4 py-2 bg-gray-50 text-xs text-gray-600",children:(gr=TE.find(me=>me.id===N))==null?void 0:gr.description})]}),N==="players"&&m.jsxs(m.Fragment,{children:[r==="organizer"&&Object.keys(Et).length>0&&m.jsxs("div",{className:"bg-gradient-to-r from-cmf-primary/10 to-cmf-secondary/10 rounded-xl border-2 border-cmf-primary/30 p-4 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(u0,{className:"w-5 h-5 text-cmf-primary"}),m.jsx("h2",{className:"text-lg font-semibold text-cmf-secondary",children:"Weight Adjustment Controls"})]}),m.jsxs("p",{className:"text-cmf-primary text-sm mb-3",children:["Click preset buttons below to instantly adjust player rankings with different weight priorities.",m.jsxs("span",{className:"block text-xs mt-1 opacity-75",children:["Currently using: ",m.jsx("strong",{children:((Vn=Oo[de])==null?void 0:Vn.name)||"Custom"})]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[m.jsx("button",{onClick:()=>fe("balanced"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${de==="balanced"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"⚖️ Balanced"}),m.jsx("button",{onClick:()=>fe("speed"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${de==="speed"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"⚡ Speed Focused"}),m.jsx("button",{onClick:()=>fe("skills"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${de==="skills"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"🎯 Skills Focused"}),m.jsx("button",{onClick:()=>fe("athletic"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${de==="athletic"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"🏃 Athletic"})]})]}),x&&m.jsx(Ik,{player:x,allPlayers:i,onClose:()=>_(null)}),E&&m.jsx(Ck,{player:E,allPlayers:i,onClose:()=>A(null),onSave:Ne}),Object.keys(Et).length===0?m.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center",children:m.jsx("p",{className:"text-gray-500",children:"No players found for this event."})}):Object.entries(Et).sort(([me],[ve])=>me.localeCompare(ve)).map(([me,ve])=>{const we=Ve(ve,X);return m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:["🏆 Age Group: ",me]}),m.jsx("div",{className:"space-y-2",children:we.map((be,Ie)=>m.jsxs(Tb.Fragment,{children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[m.jsx("div",{className:"flex items-center justify-between mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:`font-bold text-lg ${Ie===0?"text-yellow-500":Ie===1?"text-gray-500":Ie===2?"text-orange-500":"text-gray-400"}`,children:Ie===0?"🥇":Ie===1?"🥈":Ie===2?"🥉":`#${Ie+1}`}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900",children:be.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Player #",be.number||"N/A"," • Weighted Score: ",be.weightedScore!=null?be.weightedScore.toFixed(2):"No scores yet"]})]})]})}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{onClick:()=>_(be),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-md text-sm font-medium transition",disabled:r!=="organizer"&&!be.composite_score&&!Object.values(be).some(ze=>typeof ze=="number"&&ze>0),children:r==="organizer"?"View Stats & Weights":"View Stats"}),m.jsx("button",{onClick:()=>A(be),className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-md text-sm font-medium transition",children:"Edit"}),m.jsx("button",{onClick:()=>ht(be.id),className:"bg-cyan-100 hover:bg-cyan-200 text-cyan-700 px-3 py-1 rounded-md text-sm font-medium transition",children:"Add Result"})]})]}),p[be.id]&&m.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200 ml-4",children:m.jsx(Sk,{playerId:be.id,onSuccess:()=>{ht(be.id),Ne()}})})]},be.id))})]},me)})]}),N==="rankings"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[m.jsx(FM,{className:"w-5 h-5 text-cmf-primary"}),"Select Age Group"]}),m.jsxs("select",{value:j,onChange:me=>F(me.target.value),className:"w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",children:[m.jsx("option",{value:"",children:"Choose an age group to view rankings"}),Bt.map(me=>m.jsx("option",{value:me,children:me},me))]})]}),r==="organizer"&&m.jsxs("div",{className:"bg-gradient-to-r from-cmf-primary/10 to-cmf-secondary/10 rounded-xl border-2 border-cmf-primary/30 p-4 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(u0,{className:"w-5 h-5 text-cmf-primary"}),m.jsx("h2",{className:"text-lg font-semibold text-cmf-secondary",children:"Ranking Priorities"})]}),m.jsxs("p",{className:"text-cmf-primary text-sm mb-3",children:["Click preset buttons below to instantly adjust player rankings with different weight priorities.",m.jsxs("span",{className:"block text-xs mt-1 opacity-75",children:["Currently using: ",m.jsx("strong",{children:((Tr=Oo[_e])==null?void 0:Tr.name)||"Custom"})]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs mb-6",children:[m.jsx("button",{onClick:()=>he("balanced"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${_e==="balanced"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"⚖️ Balanced"}),m.jsx("button",{onClick:()=>he("speed"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${_e==="speed"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"⚡ Speed Focused"}),m.jsx("button",{onClick:()=>he("skills"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${_e==="skills"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"🎯 Skills Focused"}),m.jsx("button",{onClick:()=>he("athletic"),className:`px-2 py-1 rounded-full transition-colors cursor-pointer ${_e==="athletic"?"bg-cmf-primary text-white ring-2 ring-cmf-primary/50":"bg-cmf-primary/10 hover:bg-cmf-primary/20 text-cmf-primary"}`,children:"🏃 Athletic"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-cmf-secondary mb-3",children:"Custom Weight Adjustments:"}),m.jsx("div",{className:"space-y-4",children:(()=>{const me=$();return wi.map(ve=>m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:ve.label}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("input",{type:"range",min:0,max:100,value:me[ve.key],onChange:we=>ae(ve.key,parseInt(we.target.value)),className:"flex-1 accent-cmf-primary h-2 rounded-lg bg-gray-100"}),m.jsx("div",{className:"w-12 text-right",children:m.jsxs("span",{className:"text-sm font-mono text-cmf-primary",children:[me[ve.key],"%"]})})]})]})},ve.key))})()}),m.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"Rankings update automatically as you adjust priorities"})]})]}),R?m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center",children:[m.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full mb-2"}),m.jsx("div",{className:"text-gray-500",children:"Updating rankings..."})]}):V?m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700",children:[m.jsx("strong",{children:"Error:"})," ",V]}):j===""?m.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6 text-center text-gray-500",children:"👆 Please select an age group above to view rankings and adjust weights."}):q.length===0?m.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center text-yellow-700",children:["No players found for the ",m.jsx("strong",{children:j})," age group. Players may not have drill scores yet."]}):m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Rankings (",j,")"]}),m.jsx("button",{onClick:()=>{if(!j||q.length===0)return;let me=`Rank,Name,Player Number,Composite Score
`;q.forEach(rt=>{me+=`${rt.rank},"${rt.name}",${rt.number},${rt.composite_score.toFixed(2)}
`});const ve=n?new Date(n.date).toISOString().slice(0,10):"event",we=`rankings_${j}_${ve}.csv`,be=new Blob([me],{type:"text/csv"}),Ie=URL.createObjectURL(be),ze=document.createElement("a");ze.href=Ie,ze.download=we,document.body.appendChild(ze),ze.click(),document.body.removeChild(ze),URL.revokeObjectURL(Ie)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm",disabled:q.length===0,children:"Export as CSV"})]}),m.jsx("div",{className:"space-y-3",children:q.map(me=>{const ve={};return wi.forEach(we=>{const Ie=q.filter(ze=>ze[we.key]!=null).map(ze=>({player_id:ze.player_id,score:ze[we.key]})).sort((ze,rt)=>we.key==="40m_dash"?ze.score-rt.score:rt.score-ze.score).findIndex(ze=>ze.player_id===me.player_id)+1;ve[we.key]=Ie>0?Ie:null}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[m.jsxs("div",{className:"flex justify-between items-start mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:`font-bold text-lg ${me.rank===1?"text-yellow-500":me.rank===2?"text-gray-500":me.rank===3?"text-orange-500":"text-gray-400"}`,children:me.rank===1?"🥇":me.rank===2?"🥈":me.rank===3?"🥉":`#${me.rank}`}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900",children:me.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Player #",me.number]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-xs text-gray-500",children:"Overall Score"}),m.jsx("div",{className:"font-mono font-bold text-lg text-cmf-primary",children:me.composite_score.toFixed(2)})]})]}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2 text-xs",children:wi.map(we=>m.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[m.jsx("div",{className:"font-medium text-gray-700 mb-1",children:we.label}),me[we.key]!=null?m.jsxs("div",{children:[m.jsx("div",{className:"font-mono text-sm",children:me[we.key]}),m.jsxs("div",{className:"text-xs text-gray-500",children:["#",ve[we.key]||"-"]})]}):m.jsx("span",{className:"text-gray-400",children:"No score"})]},we.key))})]},me.player_id)})})]})]}),N==="exports"&&m.jsxs(m.Fragment,{children:[Object.keys(Et).length>0&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsx("div",{className:"flex justify-between items-center mb-4",children:m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[m.jsx(xC,{className:"w-5 h-5 text-cmf-primary"}),"Export Rankings by Age Group"]})}),m.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.keys(Et).sort().map(me=>{const ve=Et[me].filter(be=>be.composite_score!=null),we=()=>{if(ve.length===0)return;let be=`Rank,Name,Player Number,Composite Score,40M Dash,Vertical Jump,Catching,Throwing,Agility
`;ve.sort((Jt,Cr)=>(Cr.composite_score||0)-(Jt.composite_score||0)).forEach((Jt,Cr)=>{be+=`${Cr+1},"${Jt.name}",${Jt.number||"N/A"},${(Jt.composite_score||0).toFixed(2)},${Jt["40m_dash"]||"N/A"},${Jt.vertical_jump||"N/A"},${Jt.catching||"N/A"},${Jt.throwing||"N/A"},${Jt.agility||"N/A"}
`});const Ie=n?new Date(n.date).toISOString().slice(0,10):"event",ze=`rankings_${me}_${Ie}.csv`,rt=new Blob([be],{type:"text/csv"}),Vt=URL.createObjectURL(rt),zt=document.createElement("a");zt.href=Vt,zt.download=ze,document.body.appendChild(zt),zt.click(),document.body.removeChild(zt),URL.revokeObjectURL(Vt)};return m.jsxs("button",{onClick:we,disabled:ve.length===0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-6 py-4 rounded-lg font-medium transition text-left flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"font-semibold",children:["Export ",me," Rankings"]}),m.jsx("div",{className:"text-sm opacity-75",children:"Full rankings with drill scores"})]}),m.jsxs("div",{className:"text-sm opacity-75",children:["(",ve.length," players)"]})]},me)})}),Object.keys(Et).length===0&&m.jsx("div",{className:"text-center py-8 text-gray-500",children:"No player data available for export. Upload players first."})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(Zv,{className:"w-5 h-5 text-cmf-primary"}),"Event Analytics"]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),m.jsx("div",{className:"text-sm text-blue-700",children:"Total Players"})]}),m.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-green-600",children:Object.keys(Et).length}),m.jsx("div",{className:"text-sm text-green-700",children:"Age Groups"})]}),m.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.filter(me=>me.composite_score!=null).length}),m.jsx("div",{className:"text-sm text-purple-700",children:"With Scores"})]}),m.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[m.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(i.filter(me=>me.composite_score!=null).length/i.length*100),"%"]}),m.jsx("div",{className:"text-sm text-orange-700",children:"Completion"})]})]})]})]})]})})}var jl={},Cm={exports:{}},Im,CE;function Rk(){if(CE)return Im;CE=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Im=n,Im}var Nm,IE;function Ok(){if(IE)return Nm;IE=1;var n=Rk();function e(){}function t(){}return t.resetWarningCache=e,Nm=function(){function r(o,c,u,d,p,g){if(g!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Nm}var NE;function TC(){return NE||(NE=1,Cm.exports=Ok()()),Cm.exports}var Rm,RE;function CC(){return RE||(RE=1,Rm={L:1,M:0,Q:3,H:2}),Rm}var Om,OE;function IC(){return OE||(OE=1,Om={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Om}var Dm,DE;function Dk(){if(DE)return Dm;DE=1;var n=IC();function e(t){this.mode=n.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var r=0;r<this.data.length;r++)t.put(this.data.charCodeAt(r),8)}},Dm=e,Dm}var Pm,PE;function Pk(){if(PE)return Pm;PE=1;var n=CC();function e(t,r){this.totalCount=t,this.dataCount=r}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,r){var i=e.getRsBlockTable(t,r);if(i==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+r);for(var a=i.length/3,o=new Array,c=0;c<a;c++)for(var u=i[c*3+0],d=i[c*3+1],p=i[c*3+2],g=0;g<u;g++)o.push(new e(d,p));return o},e.getRsBlockTable=function(t,r){switch(r){case n.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case n.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case n.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case n.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},Pm=e,Pm}var Mm,ME;function Mk(){if(ME)return Mm;ME=1;function n(){this.buffer=new Array,this.length=0}return n.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Mm=n,Mm}var km,kE;function NC(){if(kE)return km;kE=1;for(var n={glog:function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)n.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)n.EXP_TABLE[e]=n.EXP_TABLE[e-4]^n.EXP_TABLE[e-5]^n.EXP_TABLE[e-6]^n.EXP_TABLE[e-8];for(var e=0;e<255;e++)n.LOG_TABLE[n.EXP_TABLE[e]]=e;return km=n,km}var Lm,LE;function RC(){if(LE)return Lm;LE=1;var n=NC();function e(t,r){if(t.length==null)throw new Error(t.length+"/"+r);for(var i=0;i<t.length&&t[i]==0;)i++;this.num=new Array(t.length-i+r);for(var a=0;a<t.length-i;a++)this.num[a]=t[a+i]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var r=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var a=0;a<t.getLength();a++)r[i+a]^=n.gexp(n.glog(this.get(i))+n.glog(t.get(a)));return new e(r,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var r=n.glog(this.get(0))-n.glog(t.get(0)),i=new Array(this.getLength()),a=0;a<this.getLength();a++)i[a]=this.get(a);for(var a=0;a<t.getLength();a++)i[a]^=n.gexp(n.glog(t.get(a))+r);return new e(i,0).mod(t)}},Lm=e,Lm}var jm,jE;function kk(){if(jE)return jm;jE=1;var n=IC(),e=RC(),t=NC(),r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var o=a<<10;i.getBCHDigit(o)-i.getBCHDigit(i.G15)>=0;)o^=i.G15<<i.getBCHDigit(o)-i.getBCHDigit(i.G15);return(a<<10|o)^i.G15_MASK},getBCHTypeNumber:function(a){for(var o=a<<12;i.getBCHDigit(o)-i.getBCHDigit(i.G18)>=0;)o^=i.G18<<i.getBCHDigit(o)-i.getBCHDigit(i.G18);return a<<12|o},getBCHDigit:function(a){for(var o=0;a!=0;)o++,a>>>=1;return o},getPatternPosition:function(a){return i.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,o,c){switch(a){case r.PATTERN000:return(o+c)%2==0;case r.PATTERN001:return o%2==0;case r.PATTERN010:return c%3==0;case r.PATTERN011:return(o+c)%3==0;case r.PATTERN100:return(Math.floor(o/2)+Math.floor(c/3))%2==0;case r.PATTERN101:return o*c%2+o*c%3==0;case r.PATTERN110:return(o*c%2+o*c%3)%2==0;case r.PATTERN111:return(o*c%3+(o+c)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var o=new e([1],0),c=0;c<a;c++)o=o.multiply(new e([1,t.gexp(c)],0));return o},getLengthInBits:function(a,o){if(1<=o&&o<10)switch(a){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(o<27)switch(a){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else if(o<41)switch(a){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}else throw new Error("type:"+o)},getLostPoint:function(a){for(var o=a.getModuleCount(),c=0,u=0;u<o;u++)for(var d=0;d<o;d++){for(var p=0,g=a.isDark(u,d),x=-1;x<=1;x++)if(!(u+x<0||o<=u+x))for(var _=-1;_<=1;_++)d+_<0||o<=d+_||x==0&&_==0||g==a.isDark(u+x,d+_)&&p++;p>5&&(c+=3+p-5)}for(var u=0;u<o-1;u++)for(var d=0;d<o-1;d++){var E=0;a.isDark(u,d)&&E++,a.isDark(u+1,d)&&E++,a.isDark(u,d+1)&&E++,a.isDark(u+1,d+1)&&E++,(E==0||E==4)&&(c+=3)}for(var u=0;u<o;u++)for(var d=0;d<o-6;d++)a.isDark(u,d)&&!a.isDark(u,d+1)&&a.isDark(u,d+2)&&a.isDark(u,d+3)&&a.isDark(u,d+4)&&!a.isDark(u,d+5)&&a.isDark(u,d+6)&&(c+=40);for(var d=0;d<o;d++)for(var u=0;u<o-6;u++)a.isDark(u,d)&&!a.isDark(u+1,d)&&a.isDark(u+2,d)&&a.isDark(u+3,d)&&a.isDark(u+4,d)&&!a.isDark(u+5,d)&&a.isDark(u+6,d)&&(c+=40);for(var A=0,d=0;d<o;d++)for(var u=0;u<o;u++)a.isDark(u,d)&&A++;var S=Math.abs(100*A/o/o-50)/5;return c+=S*10,c}};return jm=i,jm}var Bm,BE;function Lk(){if(BE)return Bm;BE=1;var n=Dk(),e=Pk(),t=Mk(),r=kk(),i=RC();function a(c,u){this.typeNumber=c,this.errorCorrectLevel=u,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var o=a.prototype;return o.addData=function(c){var u=new n(c);this.dataList.push(u),this.dataCache=null},o.isDark=function(c,u){if(c<0||this.moduleCount<=c||u<0||this.moduleCount<=u)throw new Error(c+","+u);return this.modules[c][u]},o.getModuleCount=function(){return this.moduleCount},o.make=function(){if(this.typeNumber<1){var c=1;for(c=1;c<40;c++){for(var u=e.getRSBlocks(c,this.errorCorrectLevel),d=new t,p=0,g=0;g<u.length;g++)p+=u[g].dataCount;for(var g=0;g<this.dataList.length;g++){var x=this.dataList[g];d.put(x.mode,4),d.put(x.getLength(),r.getLengthInBits(x.mode,c)),x.write(d)}if(d.getLengthInBits()<=p*8)break}this.typeNumber=c}this.makeImpl(!1,this.getBestMaskPattern())},o.makeImpl=function(c,u){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[d][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(c,u),this.typeNumber>=7&&this.setupTypeNumber(c),this.dataCache==null&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,u)},o.setupPositionProbePattern=function(c,u){for(var d=-1;d<=7;d++)if(!(c+d<=-1||this.moduleCount<=c+d))for(var p=-1;p<=7;p++)u+p<=-1||this.moduleCount<=u+p||(0<=d&&d<=6&&(p==0||p==6)||0<=p&&p<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=p&&p<=4?this.modules[c+d][u+p]=!0:this.modules[c+d][u+p]=!1)},o.getBestMaskPattern=function(){for(var c=0,u=0,d=0;d<8;d++){this.makeImpl(!0,d);var p=r.getLostPoint(this);(d==0||c>p)&&(c=p,u=d)}return u},o.createMovieClip=function(c,u,d){var p=c.createEmptyMovieClip(u,d),g=1;this.make();for(var x=0;x<this.modules.length;x++)for(var _=x*g,E=0;E<this.modules[x].length;E++){var A=E*g,S=this.modules[x][E];S&&(p.beginFill(0,100),p.moveTo(A,_),p.lineTo(A+g,_),p.lineTo(A+g,_+g),p.lineTo(A,_+g),p.endFill())}return p},o.setupTimingPattern=function(){for(var c=8;c<this.moduleCount-8;c++)this.modules[c][6]==null&&(this.modules[c][6]=c%2==0);for(var u=8;u<this.moduleCount-8;u++)this.modules[6][u]==null&&(this.modules[6][u]=u%2==0)},o.setupPositionAdjustPattern=function(){for(var c=r.getPatternPosition(this.typeNumber),u=0;u<c.length;u++)for(var d=0;d<c.length;d++){var p=c[u],g=c[d];if(this.modules[p][g]==null)for(var x=-2;x<=2;x++)for(var _=-2;_<=2;_++)x==-2||x==2||_==-2||_==2||x==0&&_==0?this.modules[p+x][g+_]=!0:this.modules[p+x][g+_]=!1}},o.setupTypeNumber=function(c){for(var u=r.getBCHTypeNumber(this.typeNumber),d=0;d<18;d++){var p=!c&&(u>>d&1)==1;this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=p}for(var d=0;d<18;d++){var p=!c&&(u>>d&1)==1;this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=p}},o.setupTypeInfo=function(c,u){for(var d=this.errorCorrectLevel<<3|u,p=r.getBCHTypeInfo(d),g=0;g<15;g++){var x=!c&&(p>>g&1)==1;g<6?this.modules[g][8]=x:g<8?this.modules[g+1][8]=x:this.modules[this.moduleCount-15+g][8]=x}for(var g=0;g<15;g++){var x=!c&&(p>>g&1)==1;g<8?this.modules[8][this.moduleCount-g-1]=x:g<9?this.modules[8][15-g-1+1]=x:this.modules[8][15-g-1]=x}this.modules[this.moduleCount-8][8]=!c},o.mapData=function(c,u){for(var d=-1,p=this.moduleCount-1,g=7,x=0,_=this.moduleCount-1;_>0;_-=2)for(_==6&&_--;;){for(var E=0;E<2;E++)if(this.modules[p][_-E]==null){var A=!1;x<c.length&&(A=(c[x]>>>g&1)==1);var S=r.getMask(u,p,_-E);S&&(A=!A),this.modules[p][_-E]=A,g--,g==-1&&(x++,g=7)}if(p+=d,p<0||this.moduleCount<=p){p-=d,d=-d;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(c,u,d){for(var p=e.getRSBlocks(c,u),g=new t,x=0;x<d.length;x++){var _=d[x];g.put(_.mode,4),g.put(_.getLength(),r.getLengthInBits(_.mode,c)),_.write(g)}for(var E=0,x=0;x<p.length;x++)E+=p[x].dataCount;if(g.getLengthInBits()>E*8)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+E*8+")");for(g.getLengthInBits()+4<=E*8&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=E*8||(g.put(a.PAD0,8),g.getLengthInBits()>=E*8));)g.put(a.PAD1,8);return a.createBytes(g,p)},a.createBytes=function(c,u){for(var d=0,p=0,g=0,x=new Array(u.length),_=new Array(u.length),E=0;E<u.length;E++){var A=u[E].dataCount,S=u[E].totalCount-A;p=Math.max(p,A),g=Math.max(g,S),x[E]=new Array(A);for(var I=0;I<x[E].length;I++)x[E][I]=255&c.buffer[I+d];d+=A;var N=r.getErrorCorrectPolynomial(S),O=new i(x[E],N.getLength()-1),j=O.mod(N);_[E]=new Array(N.getLength()-1);for(var I=0;I<_[E].length;I++){var F=I+j.getLength()-_[E].length;_[E][I]=F>=0?j.get(F):0}}for(var q=0,I=0;I<u.length;I++)q+=u[I].totalCount;for(var P=new Array(q),R=0,I=0;I<p;I++)for(var E=0;E<u.length;E++)I<x[E].length&&(P[R++]=x[E][I]);for(var I=0;I<g;I++)for(var E=0;E<u.length;E++)I<_[E].length&&(P[R++]=_[E][I]);return P},Bm=a,Bm}var gh={},VE;function jk(){if(VE)return gh;VE=1,Object.defineProperty(gh,"__esModule",{value:!0});var n=Object.assign||function(d){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(d[x]=g[x])}return d},e=TC(),t=a(e),r=wf(),i=a(r);function a(d){return d&&d.__esModule?d:{default:d}}function o(d,p){var g={};for(var x in d)p.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(d,x)&&(g[x]=d[x]);return g}var c={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},u=(0,r.forwardRef)(function(d,p){var g=d.bgColor,x=d.bgD,_=d.fgD,E=d.fgColor,A=d.size,S=d.title,I=d.viewBoxSize,N=d.xmlns,O=N===void 0?"http://www.w3.org/2000/svg":N,j=o(d,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return i.default.createElement("svg",n({},j,{height:A,ref:p,viewBox:"0 0 "+I+" "+I,width:A,xmlns:O}),S?i.default.createElement("title",null,S):null,i.default.createElement("path",{d:x,fill:g}),i.default.createElement("path",{d:_,fill:E}))});return u.displayName="QRCodeSvg",u.propTypes=c,gh.default=u,gh}var UE;function Bk(){if(UE)return jl;UE=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.QRCode=void 0;var n=Object.assign||function(A){for(var S=1;S<arguments.length;S++){var I=arguments[S];for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&(A[N]=I[N])}return A},e=TC(),t=g(e),r=CC(),i=g(r),a=Lk(),o=g(a),c=wf(),u=g(c),d=jk(),p=g(d);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,S){var I={};for(var N in A)S.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(A,N)&&(I[N]=A[N]);return I}var _={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},E=(0,c.forwardRef)(function(A,S){var I=A.bgColor,N=I===void 0?"#FFFFFF":I,O=A.fgColor,j=O===void 0?"#000000":O,F=A.level,q=F===void 0?"L":F,P=A.size,R=P===void 0?256:P,M=A.value,V=x(A,["bgColor","fgColor","level","size","value"]),H=new o.default(-1,i.default[q]);H.addData(M),H.make();var z=H.modules;return u.default.createElement(p.default,n({},V,{bgColor:N,bgD:z.map(function(U,_e){return U.map(function(Ee,X){return Ee?"":"M "+X+" "+_e+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:j,fgD:z.map(function(U,_e){return U.map(function(Ee,X){return Ee?"M "+X+" "+_e+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:S,size:R,viewBoxSize:z.length}))});return jl.QRCode=E,E.displayName="QRCode",E.propTypes=_,jl.default=E,jl}var Vk=Bk();const OC=Sb(Vk);function Uk({open:n,onClose:e,event:t,onUpdated:r}){const{selectedLeagueId:i}=bn(),{setSelectedEvent:a,setEvents:o}=ia(),[c,u]=k.useState(""),[d,p]=k.useState(""),[g,x]=k.useState(""),[_,E]=k.useState(!1),[A,S]=k.useState("");if(k.useEffect(()=>{t&&(u(t.name||""),p(t.date||""),x(t.location||""))},[t]),!n||!t)return null;const I=async N=>{var O,j;N.preventDefault(),E(!0),S("");try{const F=d?new Date(d).toISOString().slice(0,10):"";await Lt.put(`/leagues/${i}/events/${t.id}`,{name:c,date:F,location:g});const q={...t,name:c,date:F,location:g,updated_at:new Date().toISOString()};o(P=>P.map(R=>R.id===t.id?q:R)),a(P=>P&&P.id===t.id?q:P),r&&r(q),e&&e()}catch(F){S(((j=(O=F.response)==null?void 0:O.data)==null?void 0:j.detail)||F.message||"Failed to update event")}finally{E(!1)}};return m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-sm relative",children:[m.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-400 hover:text-cmf-primary text-2xl font-bold",children:"×"}),m.jsx("h2",{className:"text-xl font-bold mb-4 text-cmf-primary",children:"Edit Event"}),m.jsxs("form",{onSubmit:I,children:[m.jsx("label",{className:"block mb-2 font-semibold",children:"Event Name"}),m.jsx("input",{type:"text",value:c,onChange:N=>u(N.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary",required:!0}),m.jsx("label",{className:"block mb-2 font-semibold",children:"Event Date"}),m.jsx("input",{type:"date",value:d,onChange:N=>p(N.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary",required:!0}),m.jsx("label",{className:"block mb-2 font-semibold",children:"Location"}),m.jsx("input",{type:"text",value:g,onChange:N=>x(N.target.value),placeholder:"e.g., Central Park Football Field",className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary"}),m.jsx("small",{className:"text-gray-500 text-xs mb-4 block",children:"Leave location blank if not determined yet"}),A&&m.jsx("div",{className:"text-red-500 mb-2 text-sm",children:A}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition disabled:opacity-50",disabled:_,children:_?"Updating...":"Update Event"}),m.jsx("button",{type:"button",onClick:e,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})}const DC=n=>{if(!n||typeof n!="string")return 99;const e=n.toLowerCase().trim(),t=e.match(/(\d+)/);if(t){const i=parseInt(t[1]);return i<=5?5:i}return{"lil ballers":5,"lil' ballers":5,"little ballers":5,tots:3,"tiny tots":3,micro:4,rookies:20,beginners:21,novice:22,intermediate:23,advanced:24,elite:26,junior:15,juniors:15,senior:25,seniors:25,varsity:27,jv:16,freshman:14,sophomore:15,"jr varsity":16,"all stars":28,champions:29,select:30,travel:31,rec:32,recreational:32}[e]||99},Fk=(n,e=[],t=1)=>{const r=DC(n);let i=t,a;do if(a=r*100+i,i++,i>999){a=99*100+Math.floor(Math.random()*900)+100;break}while(e.includes(a));return a},f0=n=>{const e=n.filter(t=>t.number!=null).map(t=>parseInt(t.number));return n.map(t=>{if(t.number!=null&&t.number!=="")return t;const r=Fk(t.age_group,e);return e.push(r),{...t,number:r}})},Hk=n=>{const e=DC(n),t=e*100+1,r=e*100+99;return`${t}-${r}`},Vm=["first_name","last_name","age_group"],zk=[["Jane","Smith","9-10"],["Alex","Lee","U12"],["Sam","Jones","6U"],["Maria","Garcia",""]];function Gk(n){const e=n.trim().split(/\r?\n/),t=e[0].split(",").map(i=>i.trim()),r=e.slice(1).map(i=>i.split(",").map(a=>a.trim()));return{headers:t,rows:r}}function qk(n,e){const t=[],r={};return e.forEach((i,a)=>{r[i]=n[a]??""}),(!r.first_name||r.first_name.trim()==="")&&t.push("Missing first name"),(!r.last_name||r.last_name.trim()==="")&&t.push("Missing last name"),r.first_name&&r.last_name&&(r.name=`${r.first_name.trim()} ${r.last_name.trim()}`),{...r,warnings:t}}function $k(){const{user:n,userRole:e,selectedLeagueId:t}=bn(),{selectedEvent:r}=ia(),{notifyPlayerAdded:i,notifyPlayersUploaded:a,notifyError:o,showSuccess:c,showError:u,showInfo:d}=Q0(),[p,g]=k.useState(""),[x,_]=k.useState("idle"),[E,A]=k.useState(""),[S,I]=k.useState([]),[N,O]=k.useState([]),[j,F]=k.useState([]),[q,P]=k.useState(""),[R,M]=k.useState("idle"),[V,H]=k.useState(""),[z,U]=k.useState(!1),[_e,Ee]=k.useState({first_name:"",last_name:"",number:"",age_group:""}),[X,le]=k.useState([]),[de,He]=k.useState("idle"),[$,ae]=k.useState(""),[he,fe]=k.useState(0),[Te,Ve]=k.useState(!1),Ne=k.useRef(),[Bt,ht]=k.useState(!1),Et=!r||!t?"":`https://woo-combine.com/join-event/${t}/${r.id}`,[gr,Vn]=k.useState(!1);k.useEffect(()=>{const Re=()=>{if(window.location.hash==="#player-upload-section"){const ot=document.getElementById("player-upload-section");ot&&ot.scrollIntoView({behavior:"smooth"})}};return Re(),window.addEventListener("hashchange",Re),()=>window.removeEventListener("hashchange",Re)},[]),k.useEffect(()=>{},[e,r]);const Tr=async()=>{if(!(!r||!n||!t)){_("loading"),A("");try{await Lt.delete(`/players/reset?event_id=${r.id}`),_("success"),g(""),c(`🗑️ All player data for "${r.name}" has been reset`),we()}catch(Re){_("error"),A(Re.message||"Error during reset."),o(Re)}}},me=Re=>{const ot=Re.target.files[0];if(!ot)return;P(ot.name);const it=new FileReader;it.onload=Me=>{const Rt=Me.target.result,{headers:pt,rows:hi}=Gk(Rt),vr=[],Vr=Vm.filter(pi=>!pt.some(Ur=>Ur.toLowerCase().trim()===pi.toLowerCase()));Vr.length>0?(vr.push(`Missing required headers: ${Vr.join(", ")}. Headers must include: ${Vm.join(", ")}`),u(`❌ CSV Error: Missing headers ${Vr.join(", ")}`)):d(`📄 CSV loaded: ${hi.length} players found`);const aa=hi.map(pi=>qk(pi,pt));O(pt),I(aa),F(vr)},it.readAsText(ot)},ve=j.length===0&&S.length>0&&S.some(Re=>Re.name&&Re.name.trim()!==""),we=k.useCallback(async()=>{var Re;if(!(!r||!n||!t)){Ve(!0);try{const{data:ot}=await Lt.get(`/players?event_id=${r.id}`);fe(Array.isArray(ot)?ot.length:0)}catch(ot){(Re=ot.response)==null||Re.status,fe(0)}finally{Ve(!1)}}},[r,n,t]);k.useEffect(()=>{we()},[r,n,t,we]);const be=()=>{we()},Ie=async()=>{if(!r||!n||!t)return;M("loading"),H("");const Re=S.map(Me=>{const{warnings:Rt,...pt}=Me;return pt}),ot=f0(Re),it={event_id:r.id,players:ot};try{const Me=await Lt.post("/players/upload",it),{data:Rt}=Me;if(Rt.errors&&Rt.errors.length>0)M("error"),H("Some rows failed to upload. See errors below."),u(`❌ Upload partially failed: ${Rt.errors.length} errors`);else{M("success");const pt=ot.filter(hi=>!Re.find(vr=>vr.name===hi.name&&vr.number)).length;H(`✅ Upload successful! ${Rt.added} players added${pt>0?`, ${pt} auto-numbered`:""}.`),a(Rt.added),I([]),O([]),P(""),be()}}catch(Me){M("error"),H(`❌ ${Me.message||"Upload failed."}`),o(Me)}},ze=Re=>{Ee({..._e,[Re.target.name]:Re.target.value})},rt=()=>{const Re=[];return(!_e.first_name||_e.first_name.trim()==="")&&Re.push("Missing first name"),(!_e.last_name||_e.last_name.trim()==="")&&Re.push("Missing last name"),_e.number&&_e.number.trim()!==""&&isNaN(Number(_e.number))&&Re.push("Invalid number"),Re},Vt=async Re=>{Re.preventDefault(),le([]),He("idle"),ae("");const ot=rt();if(ot.length>0){le(ot),u(`❌ Please fix: ${ot.join(", ")}`);return}He("loading");try{const it=players.map(vr=>vr.number).filter(vr=>vr!=null);let Me=null;if(_e.number&&_e.number.trim()!=="")Me=Number(_e.number);else{const vr={age_group:_e.age_group.trim()||null},[Vr]=f0([vr]);Me=Vr.number}const Rt={name:`${_e.first_name.trim()} ${_e.last_name.trim()}`,number:Me,age_group:_e.age_group.trim()||null};await Lt.post(`/players?event_id=${r.id}`,Rt),He("success");const pt=!_e.number||_e.number.trim()==="";ae(`Player added${pt?` with auto-number #${Me}`:""}!`);const hi=`${_e.first_name} ${_e.last_name}`;i(hi),Ee({first_name:"",last_name:"",number:"",age_group:""}),be()}catch(it){He("error"),ae(it.message||"Failed to add player."),o(it)}},zt=()=>{let Re=Vm.join(",")+`
`;zk.forEach(Rt=>{Re+=Rt.join(",")+`
`});const ot=new Blob([Re],{type:"text/csv"}),it=URL.createObjectURL(ot),Me=document.createElement("a");Me.href=it,Me.download="sample_players.csv",document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(it),d("📥 Sample CSV downloaded - check your Downloads folder")},Jt=()=>{I([]),O([]),F([]),P(""),M("idle"),H(""),Ne.current&&(Ne.current.value=""),d("🔄 Ready for new CSV file")},Cr=()=>{navigator.clipboard.writeText(Et),c("📋 Invite link copied to clipboard!")};return e!=="organizer"?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-red-200",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Fa,{className:"w-8 h-8 text-red-500"})}),m.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Admin Access Required"}),m.jsx("p",{className:"text-gray-600",children:"You do not have permission to view this page. Organizer access required."})]})})}):!r||!r.id?m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-cmf-primary/30",children:[m.jsx("div",{className:"w-16 h-16 bg-cmf-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Fa,{className:"w-8 h-8 text-cmf-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No Event Selected"}),m.jsx("p",{className:"text-gray-600 mb-6",children:'Click on "Select Event" in the header above to choose an event before managing players.'}),m.jsx("button",{onClick:()=>window.location.href="/select-league",className:"bg-cmf-primary text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Select Event"})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-cmf-primary/30",children:[m.jsx("h1",{className:"text-2xl font-bold text-cmf-secondary mb-2",children:"Admin Tools"}),m.jsxs("p",{className:"text-gray-600 mb-4",children:["Managing: ",m.jsx("strong",{children:r.name})," - ",r.date&&!isNaN(Date.parse(r.date))?new Date(r.date).toLocaleDateString():"Invalid Date"]}),r&&m.jsx("div",{className:"bg-cmf-primary/10 rounded-lg p-4 border border-cmf-primary/20",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Fa,{className:"w-5 h-5 text-cmf-primary"}),m.jsx("span",{className:"text-cmf-primary font-semibold",children:Te?m.jsx("span",{className:"animate-pulse",children:"Loading players..."}):`${he} Players Uploaded`})]})})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Event Details"})]}),m.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Name:"})," ",r.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",r.date&&!isNaN(Date.parse(r.date))?new Date(r.date).toLocaleDateString():"Invalid Date"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Location:"})," ",r.location||"Location TBD"]})]})}),m.jsxs("button",{onClick:()=>Vn(!0),className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-medium px-4 py-2 rounded-lg transition flex items-center gap-2",children:[m.jsx(Jv,{className:"w-4 h-4"}),"Edit Event Details"]})]}),m.jsxs("div",{id:"player-upload-section",className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Players to Your Event"})]}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx("span",{className:"text-blue-600 text-sm",children:"💡"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-blue-800 font-medium text-sm mb-1",children:"Simplified Upload Process"}),m.jsx("p",{className:"text-blue-700 text-sm",children:"Only First Name, Last Name, and Age Group (optional) are needed. Drill results will be collected during your combine event using this program."})]})]})}),m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx(zM,{className:"w-4 h-4 text-green-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-green-800 font-medium text-sm mb-1",children:"Smart Auto-Numbering"}),m.jsx("p",{className:"text-green-700 text-sm mb-2",children:"Player numbers are automatically generated for easy Live Entry lookup:"}),m.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[m.jsxs("div",{children:["• ",m.jsx("strong",{children:"12U players:"})," 1201, 1202, 1203..."]}),m.jsxs("div",{children:["• ",m.jsx("strong",{children:"8U players:"})," 801, 802, 803..."]}),m.jsxs("div",{children:["• ",m.jsx("strong",{children:"Lil' Ballers:"})," 501, 502, 503..."]}),m.jsxs("div",{children:["• ",m.jsx("strong",{children:"Other groups:"})," Smart number ranges"]})]})]})]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[m.jsxs("button",{onClick:zt,className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-medium px-4 py-3 rounded-xl transition flex items-center justify-center gap-2",children:[m.jsx(Ql,{className:"w-5 h-5"}),"Sample CSV"]}),m.jsxs("button",{onClick:()=>U(Re=>!Re),className:"bg-cmf-secondary hover:bg-cmf-primary text-white font-medium px-4 py-3 rounded-xl transition flex items-center justify-center gap-2",children:[m.jsx(oc,{className:"w-5 h-5"}),"Add Manual"]})]}),m.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center bg-gray-50 hover:bg-gray-100 transition",children:[m.jsx(Ql,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("input",{ref:Ne,type:"file",accept:".csv",onChange:me,className:"hidden",id:"csv-upload"}),m.jsxs("label",{htmlFor:"csv-upload",className:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium px-6 py-3 rounded-lg cursor-pointer transition inline-flex items-center gap-2",children:[m.jsx(Ql,{className:"w-4 h-4"}),"Choose CSV File"]})]}),q&&m.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["📄 ",q]}),j.length>0&&m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:[m.jsx("p",{className:"text-red-700 text-sm font-medium",children:"❌ Upload Error"}),m.jsx("p",{className:"text-red-600 text-sm",children:j.join("; ")})]}),Array.isArray(S)&&S.length>0&&j.length===0&&m.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:[m.jsxs("h3",{className:"font-medium text-gray-900 mb-3",children:["Preview (",S.length," players)"]}),m.jsx("div",{className:"overflow-x-auto max-h-64",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),m.jsx("th",{className:"px-3 py-2 text-left",children:"#"}),Array.isArray(N)&&N.map(Re=>m.jsx("th",{className:"px-3 py-2 text-left",children:Re.replace(/_/g," ").replace(/\b\w/g,ot=>ot.toUpperCase())},Re)),m.jsx("th",{className:"px-3 py-2 text-left",children:"Issues"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map((Re,ot)=>{const it=Re.warnings.length>0,Me=Re.warnings.some(pt=>pt.includes("Missing first name")||pt.includes("Missing last name")),Rt=Re.name&&Re.name.trim()!=="";return m.jsxs("tr",{className:Me?"bg-red-50":it?"bg-yellow-50":"bg-green-50",children:[m.jsx("td",{className:"px-3 py-2 text-center",children:Rt?"✅":"❌"}),m.jsx("td",{className:"px-3 py-2 font-mono text-gray-500",children:ot+1}),N.map(pt=>m.jsx("td",{className:"px-3 py-2",children:Re[pt]},pt)),m.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:Re.warnings.length>0?Re.warnings.join(", "):"Valid"})]},ot)})})]})})]}),Array.isArray(S)&&S.length>0&&m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsxs("button",{onClick:Jt,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition flex items-center gap-2",children:[m.jsx(bE,{className:"w-4 h-4"}),"Upload Different File"]}),m.jsx("button",{disabled:!ve||R==="loading",onClick:Ie,className:"bg-cmf-primary hover:bg-cmf-secondary disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium px-6 py-2 rounded-lg transition",children:R==="loading"?"Uploading...":"Confirm Upload"})]}),R==="success"&&m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-green-600 text-sm",children:"✅"})}),m.jsx("p",{className:"text-green-800 font-medium",children:V})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("button",{onClick:Jt,className:"w-full bg-white border border-green-300 text-green-700 px-4 py-2 rounded-lg font-medium hover:bg-green-50 transition",children:"📂 Upload More Players"}),m.jsx(gt,{to:"/players",className:"block w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition text-center",children:"🏆 View Players & Rankings"})]})]}),R==="error"&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:m.jsx("p",{className:"text-red-700 font-medium",children:V})})]}),z&&m.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mt-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(oc,{className:"w-5 h-5 text-cmf-primary"}),"Add Player Manually"]}),m.jsxs("form",{onSubmit:Vt,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),m.jsx("input",{type:"text",name:"first_name",value:_e.first_name,onChange:ze,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter first name",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),m.jsx("input",{type:"text",name:"last_name",value:_e.last_name,onChange:ze,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter last name",required:!0})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Player Number",m.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(Auto-generated if empty)"})]}),m.jsx("input",{type:"number",name:"number",value:_e.number,onChange:ze,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:_e.age_group?`Auto: ${Hk(_e.age_group)}`:"Leave empty for auto-number",min:"1",max:"9999"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Group"}),m.jsx("input",{type:"text",name:"age_group",value:_e.age_group,onChange:ze,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"e.g., 6U, 7-8, U10"})]})]}),X.length>0&&m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[m.jsx("p",{className:"text-red-700 text-sm font-medium",children:"Please fix the following:"}),m.jsx("ul",{className:"text-red-600 text-sm mt-1 list-disc list-inside",children:X.map((Re,ot)=>m.jsx("li",{children:Re},ot))})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>U(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 rounded-lg transition",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:de==="loading",className:"flex-1 bg-cmf-primary hover:bg-cmf-secondary disabled:opacity-50 text-white font-medium py-2 rounded-lg transition",children:de==="loading"?"Adding...":"Add Player"})]}),de==="success"&&m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[m.jsxs("p",{className:"text-green-700 font-medium",children:["✅ ",$]}),m.jsx(gt,{to:"/players",className:"inline-block mt-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition text-sm",children:"View All Players"})]}),de==="error"&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-red-700 font-medium",children:["❌ ",$]})})]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Invite Coaches to Event"})]}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx("span",{className:"text-blue-600 text-sm",children:"🎯"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-blue-800 font-medium text-sm mb-1",children:"Direct Event Invitation"}),m.jsx("p",{className:"text-blue-700 text-sm",children:"Share the QR code or link to invite coaches directly to this specific event. They'll see Coach/Viewer role options only."})]})]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Invitation Link"}),m.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-3 text-sm text-center break-all",children:Et||"Loading..."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("button",{onClick:Cr,className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-medium px-4 py-2 rounded-lg transition flex items-center justify-center gap-2",disabled:!Et,children:[m.jsx(yC,{className:"w-4 h-4"}),"Copy Link"]}),m.jsxs("button",{onClick:()=>{ht(!Bt),Bt||d("📱 QR code displayed - coaches can scan to join")},className:"bg-cmf-secondary hover:bg-cmf-primary text-white font-medium px-4 py-2 rounded-lg transition flex items-center justify-center gap-2",children:[m.jsx(Ro,{className:"w-4 h-4"}),"Show QR"]})]}),Bt&&m.jsxs("div",{className:"bg-white rounded-lg p-4 text-center border border-gray-200",children:[m.jsx(OC,{value:Et,size:150,className:"mx-auto mb-2"},Et),m.jsx("p",{className:"text-xs text-gray-500",children:"Coaches can scan this QR code to join"})]})]})}),m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-green-800 text-sm",children:[m.jsx("strong",{children:"Share with coaches:"})," They can scan the QR code or click the invitation link to join this specific event directly."]})})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Live Drill Entry"})]}),m.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx("span",{className:"text-green-600 text-sm",children:"🚀"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-green-800 font-medium text-sm mb-1",children:"High-Speed Data Entry Mode"}),m.jsx("p",{className:"text-green-700 text-sm",children:"Optimized for live events - rapid player lookup, auto-focus, duplicate detection, and mobile-friendly interface for outdoor use."})]})]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:m.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[m.jsxs("p",{children:["• ",m.jsx("strong",{children:"5 Drill Types:"})," 40M Dash, Vertical Jump, Catching, Throwing, Agility"]}),m.jsxs("p",{children:["• ",m.jsx("strong",{children:"Auto-Complete:"})," Type player number for instant lookup"]}),m.jsxs("p",{children:["• ",m.jsx("strong",{children:"Smart Features:"})," Duplicate detection, undo functionality, recent entries"]}),m.jsxs("p",{children:["• ",m.jsx("strong",{children:"Mobile Optimized:"})," Large touch targets, number pad inputs"]})]})}),m.jsx(gt,{to:"/live-entry",className:"block w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold px-6 py-4 rounded-xl transition text-center shadow-lg",onClick:()=>d("🚀 Entering Live Entry mode - perfect for recording drill results during your event"),children:"🚀 Start Live Entry Mode"}),he>0&&m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-blue-800 text-sm",children:[m.jsx("strong",{children:"Ready to go!"})," ",he," players uploaded. You can now begin entering drill results during your combine event."]})}),he===0&&m.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-yellow-800 text-sm",children:[m.jsx("strong",{children:"Upload players first:"})," Add players in Step 2 before starting live drill entry."]})})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-8 h-8 bg-gray-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"5"}),m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Advanced Options"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[m.jsx(WM,{className:"w-4 h-4 text-gray-600"}),"Export & Share"]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(gt,{to:"/players",className:"block w-full bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded-lg transition text-center",onClick:()=>d("📊 Viewing comprehensive player rankings with export options"),children:"📊 View Rankings & Export CSV"}),m.jsx("p",{className:"text-xs text-gray-600",children:"Access comprehensive rankings with weight adjustments and CSV export functionality."})]})]}),m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[m.jsxs("h3",{className:"font-medium text-red-800 mb-2 flex items-center gap-2",children:[m.jsx(bE,{className:"w-4 h-4 text-red-600"}),"Reset Event Data"]}),m.jsx("p",{className:"text-red-700 text-sm mb-3",children:"⚠️ This will permanently delete all player data for this event. Use only for testing or starting over."}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{type:"text",value:p,onChange:Re=>g(Re.target.value),placeholder:"Type 'RESET' to confirm",className:"w-full border border-red-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),m.jsx("button",{onClick:Tr,disabled:p!=="RESET"||x==="loading",className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-2 rounded-lg transition",children:x==="loading"?"Resetting...":"Reset All Event Data"}),x==="success"&&m.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 py-2 rounded text-sm",children:"✅ Event data has been reset successfully."}),x==="error"&&m.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:["❌ ",E]})]})]})]})]}),gr&&m.jsx(Uk,{event:r,onClose:()=>Vn(!1),onSave:()=>{Vn(!1)}})]})})}function Wk(){const[n,e]=k.useState(""),[t,r]=k.useState(""),[i,a]=k.useState(!1),[o,c]=k.useState(""),[u,d]=k.useState(!1),{loading:p}=bn(),g=Bn(),x=async _=>{_.preventDefault(),c(""),d(!0);try{const E=await UA(Qt,n,t);await E.user.reload(),E.user.emailVerified||g("/verify-email")}catch(E){E.code==="auth/invalid-credential"?c("Account not found. Please sign up before logging in."):E.code==="auth/user-not-found"||E.code==="auth/wrong-password"?c("Invalid email or password."):c("Login failed. Please try again.")}finally{d(!1)}};return p?m.jsx("div",{children:"Loading..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"w-full flex flex-row justify-between items-center mb-6 px-2",children:[m.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none",type:"button","aria-label":"Back to welcome",onClick:()=>g("/welcome"),children:m.jsx(Fo,{size:20})}),m.jsx(gt,{to:"/help",className:"text-xs text-cyan-700 hover:underline font-semibold",children:"Need Help?"})]}),m.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Welcome Back"}),m.jsxs("form",{onSubmit:x,className:"w-full flex flex-col items-center",children:[m.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:_=>e(_.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"email",required:!0}),m.jsxs("div",{className:"relative w-full mb-6",children:[m.jsx("input",{type:i?"text":"password",placeholder:"Password",value:t,onChange:_=>r(_.target.value),className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition pr-12",autoComplete:"current-password",required:!0}),m.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-cyan-700 hover:text-cyan-900",tabIndex:-1,onClick:()=>a(_=>!_),"aria-label":i?"Hide password":"Show password",children:i?m.jsx(_C,{size:22}):m.jsx(wC,{size:22})})]}),o&&m.jsx("div",{className:"text-red-500 mb-4 text-sm w-full text-center",children:o}),m.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold px-6 py-3 rounded-full shadow transition mb-4",disabled:u,children:u?"Signing in...":"Sign In"}),m.jsxs("div",{className:"w-full flex flex-col gap-2 mt-2 text-center",children:[m.jsxs("span",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",m.jsx(gt,{to:"/signup",className:"text-cyan-700 font-semibold hover:underline",children:"Let's Get Started"})]}),m.jsx("span",{className:"text-sm",children:m.jsx(gt,{to:"/forgot-password",className:"text-cyan-700 hover:underline",children:"Forgot password?"})})]})]})]})}function Xk(){return m.jsx(Lr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(Wk,{})})})}const Yk="modulepreload",Kk=function(n){return"/"+n},FE={},Qk=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=o(t.map(d=>{if(d=Kk(d),d in FE)return;FE[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Yk,p||(x.as="script"),x.crossOrigin="",x.href=d,u&&x.setAttribute("nonce",u),document.head.appendChild(x),p)return new Promise((_,E)=>{x.addEventListener("load",_),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};function Zk(){const[n,e]=k.useState(""),[t,r]=k.useState(""),[i,a]=k.useState(""),[o,c]=k.useState(""),[u,d]=k.useState(!1),[p,g]=k.useState(""),[x,_]=k.useState(!1),{user:E,loading:A,error:S}=bn(),I=Bn(),N=async O=>{O.preventDefault(),g(""),_(!0);try{const j=await VA(Qt,i,o);if(j.user)try{await Qk(()=>Promise.resolve().then(()=>u5),[]).then(F=>F.sendEmailVerification(j.user))}catch{}I("/verify-email")}catch(j){g(j.message)}finally{_(!1)}};return A?m.jsx("div",{children:"Loading..."}):m.jsxs("div",{className:"w-full max-w-md flex flex-col items-center relative",children:[m.jsx("button",{className:"absolute left-4 top-4 w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none z-10",type:"button","aria-label":"Back to welcome",onClick:()=>I("/welcome"),style:{left:0,top:0,position:"absolute"},children:m.jsx(Fo,{size:20})}),m.jsx(gt,{to:"/help",className:"absolute right-4 top-4 text-xs text-cyan-700 hover:underline font-semibold",style:{right:0,top:0,position:"absolute"},children:"Need Help?"}),m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-20 h-20 mx-auto mb-4 mt-8",style:{objectFit:"contain"}}),m.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Let's Get Started"}),m.jsxs("form",{onSubmit:N,className:"w-full flex flex-col items-center",children:[m.jsxs("div",{className:"flex flex-row gap-4 w-full mb-6 min-w-0",children:[m.jsx("input",{type:"text",placeholder:"First Name",value:n,onChange:O=>e(O.target.value),className:"flex-1 min-w-0 box-border px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"given-name",required:!0}),m.jsx("input",{type:"text",placeholder:"Last Name",value:t,onChange:O=>r(O.target.value),className:"flex-1 min-w-0 box-border px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"family-name",required:!0})]}),m.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:O=>a(O.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"email",required:!0}),m.jsxs("div",{className:"relative w-full mb-6",children:[m.jsx("input",{type:u?"text":"password",placeholder:"Create Password",value:o,onChange:O=>c(O.target.value),className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition pr-12",autoComplete:"new-password",required:!0}),m.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-cyan-700 hover:text-cyan-900",tabIndex:-1,onClick:()=>d(O=>!O),"aria-label":u?"Hide password":"Show password",children:u?m.jsx(_C,{size:22}):m.jsx(wC,{size:22})})]}),p&&m.jsx("div",{className:"text-red-500 mb-4 text-sm",children:p}),S&&m.jsx("div",{className:"text-red-500 mb-4 text-sm",children:S.message}),m.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold py-3 rounded-full shadow transition mb-4",disabled:x,children:x?"Signing up...":"Sign Up"}),m.jsxs("div",{className:"text-xs text-gray-500 text-center mb-2",children:["By signing up for Woo-Combine, you agree to our"," ",m.jsx(gt,{to:"/terms",className:"underline hover:text-cyan-700",children:"Terms & Conditions"})," and"," ",m.jsx(gt,{to:"/privacy",className:"underline hover:text-cyan-700",children:"Privacy Policy"}),"."]})]})]})}function Jk(){return m.jsx(Lr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(Zk,{})})})}function eL(){const[n,e]=k.useState(""),[t,r]=k.useState(""),[i,a]=k.useState(!1),[o,c]=k.useState(!1),u=Bn(),d=async p=>{p.preventDefault(),r(""),a(!0);try{await jA(Qt,n),c(!0)}catch(g){g.code==="auth/user-not-found"?r("No account found with that email."):g.code==="auth/invalid-email"?r("Please enter a valid email address."):r(g.message)}finally{a(!1)}};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"w-full flex flex-row justify-between items-center mb-6 px-2",children:[m.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none",type:"button","aria-label":"Back to login",onClick:()=>u("/login"),children:m.jsx(Fo,{size:20})}),m.jsx(gt,{to:"/help",className:"text-xs text-cyan-700 hover:underline font-semibold",children:"Need Help?"})]}),m.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Reset Password"}),o?m.jsx("div",{className:"w-full text-center text-green-700 font-semibold mb-4",children:"Check your email for a password reset link."}):m.jsxs("form",{onSubmit:d,className:"w-full flex flex-col items-center",children:[m.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:p=>e(p.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",required:!0}),t&&m.jsx("div",{className:"text-red-500 mb-4 text-sm w-full text-center",children:t}),m.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold px-6 py-3 rounded-full shadow transition mb-4",disabled:i,children:i?"Sending...":"Send Reset Email"})]}),m.jsxs("div",{className:"w-full flex flex-col gap-2 mt-2 text-center",children:[m.jsxs("span",{className:"text-sm text-gray-600",children:["Remembered your password?"," ",m.jsx(gt,{to:"/login",className:"text-cyan-700 font-semibold hover:underline",children:"Back to Login"})]}),m.jsx("span",{className:"text-sm",children:m.jsx(gt,{to:"/signup",className:"text-cyan-700 hover:underline",children:"Don't have an account? Let's Get Started"})})]})]})}function tL(){const n=m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-white/80 text-base",children:[m.jsxs(gt,{to:"/login",className:"hover:underline",children:["Back to ",m.jsx("span",{className:"font-semibold text-white",children:"Login"})]}),m.jsx("span",{className:"hidden sm:inline",children:"·"}),m.jsxs(gt,{to:"/signup",className:"hover:underline",children:["Don't have an account? ",m.jsx("span",{className:"font-semibold text-white",children:"Let's Get Started"})]})]});return m.jsx(Lr,{footerLinks:n,contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(eL,{})})})}const vh=[{key:"40m_dash",label:"40M Dash",unit:"sec",lowerIsBetter:!0},{key:"vertical_jump",label:"Vertical Jump",unit:"in",lowerIsBetter:!1},{key:"catching",label:"Catching",unit:"pts",lowerIsBetter:!1},{key:"throwing",label:"Throwing",unit:"pts",lowerIsBetter:!1},{key:"agility",label:"Agility",unit:"pts",lowerIsBetter:!1}];function nL(){const{selectedEvent:n}=ia(),[e,t]=k.useState(""),[r,i]=k.useState(""),[a,o]=k.useState(""),[c,u]=k.useState(""),[d,p]=k.useState(""),[g,x]=k.useState(!1),[_,E]=k.useState([]),[A,S]=k.useState([]),[I,N]=k.useState([]),[O,j]=k.useState(null),[F,q]=k.useState(!1),P=k.useRef(null),R=k.useRef(null),M=k.useCallback(async()=>{if(n)try{const X=await Lt.get(`/players?event_id=${n.id}`);E(X.data)}catch{}},[n]);k.useEffect(()=>{M()},[M]),k.useEffect(()=>{if(r&&_.length>0){const X=_.filter(de=>de.number&&de.number.toString().startsWith(r));S(X);const le=_.find(de=>de.number&&de.number.toString()===r);le?(o(le.name),u(le.id)):(o(""),u(""))}else S([]),o(""),u("")},[r,_]);const V=k.useCallback((X,le)=>{const de=_.find(He=>He.id===X);return de&&de[le]!=null?{existingScore:de[le],playerName:de.name,drill:vh.find(He=>He.key===le)}:null},[_]),H=async X=>{if(X.preventDefault(),!e||!c||!d)return;const le=V(c,e);if(le){j({...le,newScore:parseFloat(d)}),q(!0);return}await z()},z=async(X=!1)=>{x(!0);try{await Lt.post("/drill-results/",{player_id:c,type:e,value:parseFloat(d),event_id:n.id});const le={id:Date.now(),playerNumber:r,playerName:a,drill:vh.find(de=>de.key===e),score:parseFloat(d),timestamp:new Date,overridden:X};N(de=>[le,...de.slice(0,9)]),i(""),p(""),q(!1),j(null),await M(),setTimeout(()=>{var de;(de=P.current)==null||de.focus()},100)}catch{alert("Error submitting score. Please try again.")}finally{x(!1)}},U=async()=>{if(I.length===0)return;const X=I[0];confirm(`Undo entry for ${X.playerName}?`)&&N(le=>le.slice(1))},_e=X=>{i(X.number.toString()),o(X.name),u(X.id),S([]),setTimeout(()=>{var le;(le=R.current)==null||le.focus()},100)};if(!n)return m.jsx("div",{className:"min-h-screen bg-gray-50 p-4 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Event Selected"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Please select an event first."}),m.jsx(gt,{to:"/dashboard",className:"bg-blue-500 text-white px-6 py-3 rounded-lg",children:"Go to Dashboard"})]})});const Ee=vh.find(X=>X.key===e);return m.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[m.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-3",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(gt,{to:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:m.jsx(Fo,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Live Entry Mode"}),m.jsx("p",{className:"text-sm text-gray-600",children:n.name})]})]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[m.jsx(vC,{className:"w-4 h-4"}),I.length," entries"]})]})}),m.jsx("div",{className:"max-w-lg mx-auto p-4 space-y-6",children:e?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-blue-500 text-white rounded-xl p-4 text-center",children:[m.jsx("h2",{className:"text-xl font-bold",children:Ee.label}),m.jsx("p",{className:"text-blue-100",children:"Entry Mode Active"}),m.jsx("button",{onClick:()=>t(""),className:"mt-2 text-blue-200 hover:text-white text-sm underline",children:"Change Drill"})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:m.jsxs("form",{onSubmit:H,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Number"}),m.jsx("input",{ref:P,type:"number",value:r,onChange:X=>i(X.target.value),placeholder:"Enter player #",className:"w-full text-2xl p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-center",autoFocus:!0,required:!0}),A.length>0&&m.jsx("div",{className:"mt-2 bg-gray-50 border border-gray-200 rounded-lg max-h-40 overflow-y-auto",children:A.slice(0,5).map(X=>m.jsxs("button",{type:"button",onClick:()=>_e(X),className:"w-full p-3 text-left hover:bg-blue-50 border-b border-gray-200 last:border-b-0",children:[m.jsxs("div",{className:"font-medium",children:["#",X.number," - ",X.name]}),m.jsx("div",{className:"text-sm text-gray-600",children:X.age_group})]},X.id))})]}),a&&m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(K0,{className:"w-5 h-5 text-green-600"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-green-900",children:a}),m.jsxs("div",{className:"text-sm text-green-700",children:["Player #",r]})]})]})}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Score (",Ee.unit,")"]}),m.jsx("input",{ref:R,type:"number",step:"0.1",value:d,onChange:X=>p(X.target.value),placeholder:`Enter ${Ee.unit}`,className:"w-full text-3xl p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-center",required:!0})]}),m.jsx("button",{type:"submit",disabled:g||!c||!d,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-bold text-xl py-4 rounded-lg transition",children:g?"Saving...":"Submit & Next"})]})}),I.length>0&&m.jsxs("button",{onClick:U,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 rounded-lg flex items-center justify-center gap-2",children:[m.jsx(uk,{className:"w-5 h-5"}),"Undo Last Entry"]}),I.length>0&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[m.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[m.jsx(Fa,{className:"w-4 h-4"}),"Recent Entries"]}),m.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:I.map(X=>m.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"font-medium",children:["#",X.playerNumber," ",X.playerName]}),m.jsxs("div",{className:"text-sm text-gray-600",children:[X.drill.label,": ",X.score," ",X.drill.unit,X.overridden&&m.jsx("span",{className:"text-orange-600 ml-1",children:"(Updated)"})]})]}),m.jsx("div",{className:"text-xs text-gray-500",children:X.timestamp.toLocaleTimeString()})]},X.id))})]})]}):m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Select Drill"}),m.jsx("div",{className:"grid grid-cols-1 gap-3",children:vh.map(X=>m.jsxs("button",{onClick:()=>t(X.key),className:"p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-left transition",children:[m.jsx("div",{className:"font-semibold text-gray-900",children:X.label}),m.jsxs("div",{className:"text-sm text-gray-600",children:["Unit: ",X.unit]})]},X.key))})]})}),F&&O&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(lk,{className:"w-6 h-6 text-orange-500"}),m.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Existing Score Found"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("p",{className:"text-gray-700 mb-2",children:[m.jsx("strong",{children:O.playerName})," already has a ",O.drill.label," score:"]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[m.jsxs("div",{className:"text-lg font-medium",children:["Current: ",O.existingScore," ",O.drill.unit]}),m.jsxs("div",{className:"text-lg font-medium text-blue-600",children:["New: ",O.newScore," ",O.drill.unit]})]})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>q(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-lg",children:"Keep Current"}),m.jsx("button",{onClick:()=>z(!0),className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 rounded-lg",children:"Replace Score"})]})]})})]})}function Oa({children:n}){const{user:e,initializing:t,authChecked:r,roleChecked:i,userRole:a}=bn(),o=Ni();if(t||!r||!i)return m.jsx(Bf,{title:"Verifying access...",subtitle:"Checking your authentication",size:"large"});if(!e)return m.jsx(Xi,{to:"/welcome",replace:!0});if(!e.emailVerified)return m.jsx(Xi,{to:"/verify-email",replace:!0});if(e.emailVerified&&!a&&o.pathname!=="/select-role"){if(o.pathname.startsWith("/join-event/")){const c=o.pathname.replace("/join-event/","");localStorage.setItem("pendingEventJoin",c)}return m.jsx(Xi,{to:"/select-role",replace:!0})}return n}function rL({onCreated:n}){const{user:e,addLeague:t}=bn(),r=Bn(),[i,a]=k.useState(""),[o,c]=k.useState(!1),[u,d]=k.useState(""),p=async g=>{g.preventDefault(),c(!0),d("");try{const{data:x}=await Lt.post("/leagues",{name:i,user_id:e==null?void 0:e.uid,email:e==null?void 0:e.email});t&&t({id:x.league_id,name:i,role:"organizer"}),n&&n(x.league_id),r("/onboarding/event")}catch(x){d(x.message||"Error creating league")}finally{c(!1)}};return m.jsxs("div",{className:"w-full max-w-md text-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Create a New League"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Create your league and start evaluating players."}),m.jsxs("form",{onSubmit:p,className:"space-y-4",children:[m.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-cmf-primary/30 rounded-xl focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary transition",placeholder:"League Name",value:i,onChange:g=>a(g.target.value),required:!0}),m.jsx("button",{type:"submit",className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",disabled:o,children:o?"Creating...":"Create League & Continue"}),u&&m.jsx("div",{className:"text-red-500 text-sm mt-2",children:u})]})]})}function iL(){return m.jsx(Lr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:m.jsx(rL,{})})})}function aL(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function sL(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var oL=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lL=function(n){oL(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),aL(a,i.prototype),sL(a),a}return e}(Error),cL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Br=function(n){cL(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(lL),uL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hn=function(n){uL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Br),fL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pe=function(n){fL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Br),PC=function(){function n(e){if(this.binarizer=e,e===null)throw new Pe("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),dL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),En=function(n){dL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Br),hL=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Ft=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),pL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ey=function(n){pL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Br),mL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HE=function(n){mL(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(ey),gL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mn=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Pe("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new HE(t);if(r>e)throw new HE(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=gL(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=31*i+c}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Ft.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,c=r(t,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),et=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Xn=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Ft.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var c=i*32+et.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var c=i*32+et.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Pe;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var c=o>r?0:e&31,u=o<i?31:t&31,d=(2<<u)-(1<<c);a[o]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Pe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,c=i;c<=a;c++){var u=c>i?0:e&31,d=c<a?31:t&31,p=(2<<d)-(1<<u)&4294967295;if((o[c]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Pe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Pe("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var c=r*32-this.size,u=e[0]>>>c,a=1;a<r;a++){var d=e[a];u|=d<<32-c,e[a-1]=u,u=d>>>c}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Mn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Mn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),Rg;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Rg||(Rg={}));const Ht=Rg;var vL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xe=function(n){vL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Br),yL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},It;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(It||(It={}));var Dn=function(){function n(e,t,r){for(var i,a,o=[],c=3;c<arguments.length;c++)o[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,d=0,p=u.length;d!==p;d++){var g=u[d];n.VALUES_TO_ECI.set(g,this)}try{for(var x=yL(o),_=x.next();!_.done;_=x.next()){var E=_.value;n.NAME_TO_ECI.set(E,this)}}catch(A){i={error:A}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new xe("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new xe("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new xe("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(It.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(It.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(It.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(It.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(It.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(It.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(It.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(It.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(It.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(It.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(It.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(It.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(It.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(It.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(It.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(It.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(It.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(It.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(It.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(It.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(It.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(It.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(It.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(It.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(It.Big5,28,"Big5"),n.GB18030=new n(It.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(It.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),xL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jh=function(n){xL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Br),fi=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Dn?e:Dn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Dn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new jh("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Dn.UTF8)||e.equals(Dn.ISO8859_1)||e.equals(Dn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),dt=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return fi.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Ht.CHARACTER_SET)!==void 0)return t.get(Ht.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,c=0,u=0,d=0,p=0,g=0,x=0,_=0,E=0,A=0,S=0,I=0,N=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,O=0;O<r&&(i||a||o);O++){var j=e[O]&255;o&&(c>0?(j&128)===0?o=!1:c--:(j&128)!==0&&((j&64)===0?o=!1:(c++,(j&32)===0?u++:(c++,(j&16)===0?d++:(c++,(j&8)===0?p++:o=!1))))),i&&(j>127&&j<160?i=!1:j>159&&(j<192||j===215||j===247)&&I++),a&&(g>0?j<64||j===127||j>252?a=!1:g--:j===128||j===160||j>239?a=!1:j>160&&j<224?(x++,E=0,_++,_>A&&(A=_)):j>127?(g++,_=0,E++,E>S&&(S=E)):(_=0,E=0))}return o&&c>0&&(o=!1),a&&g>0&&(a=!1),o&&(N||u+d+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||A>=3||S>=3)?n.SHIFT_JIS:i&&a?A===2&&x===2||I*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,u,d,p,g,x){if(c==="%%")return"%";if(t[++i]!==void 0){c=p?parseInt(p.substr(1)):void 0;var _=g?parseInt(g.substr(1)):void 0,E;switch(x){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(c);break;case"p":E=parseFloat(t[i]).toPrecision(c);break;case"e":E=parseFloat(t[i]).toExponential(c);break;case"x":E=parseInt(t[i]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[i],_||10).toPrecision(c)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var A=parseInt(d),S=d&&d[0]+""=="0"?"0":" ";E.length<A;)E=u!==void 0?E+S:S+E;return E}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return fi.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Dn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Dn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Dn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Ke=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=dt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),ra=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Pe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],c=0;c<r;c++)o[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Pe("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,c=-1,u=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");o=a,u++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Pe("illegal character encountered: "+e.substring(d));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");u++}for(var p=new n(c,u),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%c),Math.floor(g/c));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Pe("input matrix dimensions do not match");for(var t=new Xn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var c=a*r,u=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[c+d]^=u[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Pe("Left and top must be nonnegative");if(i<1||r<1)throw new Pe("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Pe("The region must fit inside the matrix");for(var c=this.rowSize,u=this.bits,d=t;d<o;d++)for(var p=d*c,g=e;g<a;g++)u[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Xn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Ft.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Xn(e),i=new Xn(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,c=-1,u=-1,d=0;d<t;d++)for(var p=0;p<r;p++){var g=i[d*r+p];if(g!==0){if(d<o&&(o=d),d>u&&(u=d),p*32<a){for(var x=0;(g<<31-x&4294967295)===0;)x++;p*32+x<a&&(a=p*32+x)}if(p*32+31>c){for(var x=31;!(g>>>x);)x--;p*32+x>c&&(c=p*32+x)}}}return c<a||u<o?null:Int32Array.from([a,o,c-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],c=0;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],c=31;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Mn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Mn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Ke,a=0,o=this.height;a<o;a++){for(var c=0,u=this.width;c<u;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),_L=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ie=function(n){_L(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Br),wL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EL=function(n){wL(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Xn(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),c=this.buckets,u=0;u<a;u++)c[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(c);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<d&&r.set(u);else for(var p=o[0]&255,g=o[1]&255,u=1;u<a-1;u++){var x=o[u+1]&255;(g*4-p-x)/2<d&&r.set(u),p=g,g=x}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new ra(r,i);this.initArrays(r);for(var o=this.buckets,c=1;c<5;c++)for(var u=Math.floor(i*c/5),d=t.getRow(u,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var x=d[g]&255;o[x>>e.LUMINANCE_SHIFT]++}for(var _=e.estimateBlackPoint(o),E=t.getMatrix(),c=0;c<i;c++)for(var A=c*r,g=0;g<r;g++){var x=E[A+g]&255;x<_&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,c=0;c<r;c++)t[c]>o&&(a=c,o=t[c]),t[c]>i&&(i=t[c]);for(var u=0,d=0,c=0;c<r;c++){var p=c-a,g=t[c]*p*p;g>d&&(u=c,d=g)}if(a>u){var x=a;a=u,u=x}if(u-a<=r/16)throw new ie;for(var _=u-1,E=-1,c=u-1;c>a;c--){var A=c-a,g=A*A*(u-c)*(i-t[c]);g>E&&(_=c,E=g)}return _<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(hL),bL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MC=function(n){bL(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var u=e.calculateBlackPoints(a,o,c,r,i),d=new ra(r,i);e.calculateThresholdForBlock(a,o,c,r,i,u,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,c,u){for(var d=o-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,g=0;g<i;g++){var x=g<<e.BLOCK_SIZE_POWER;x>d&&(x=d);for(var _=e.cap(g,2,i-3),E=0;E<r;E++){var A=E<<e.BLOCK_SIZE_POWER;A>p&&(A=p);for(var S=e.cap(E,2,r-3),I=0,N=-2;N<=2;N++){var O=c[_+N];I+=O[S-2]+O[S-1]+O[S]+O[S+1]+O[S+2]}var j=I/25;e.thresholdBlock(t,A,x,j,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,c){for(var u=0,d=i*o+r;u<e.BLOCK_SIZE;u++,d+=o)for(var p=0;p<e.BLOCK_SIZE;p++)(t[d+p]&255)<=a&&c.set(r+p,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var c=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,d=new Array(i),p=0;p<i;p++){d[p]=new Int32Array(r);var g=p<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var x=0;x<r;x++){var _=x<<e.BLOCK_SIZE_POWER;_>u&&(_=u);for(var E=0,A=255,S=0,I=0,N=g*a+_;I<e.BLOCK_SIZE;I++,N+=a){for(var O=0;O<e.BLOCK_SIZE;O++){var j=t[N+O]&255;E+=j,j<A&&(A=j),j>S&&(S=j)}if(S-A>e.MIN_DYNAMIC_RANGE)for(I++,N+=a;I<e.BLOCK_SIZE;I++,N+=a)for(var O=0;O<e.BLOCK_SIZE;O++)E+=t[N+O]&255}var F=E>>e.BLOCK_SIZE_POWER*2;if(S-A<=e.MIN_DYNAMIC_RANGE&&(F=A/2,p>0&&x>0)){var q=(d[p-1][x]+2*d[p][x-1]+d[p-1][x-1])/4;A<q&&(F=q)}d[p][x]=F}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(EL),Vf=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new jh("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new jh("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new jh("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ke,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,c=void 0;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n}(),AL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z0=function(n){AL(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Vf),SL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TL=function(n){SL(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,u=0,d=t.length;c<d;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var x=t[c],_=t[c+1],E=t[c+2];p=306*x+601*_+117*E+512>>10}o[u]=p}else for(var c=0,u=0,A=t.length;c<A;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var x=t[c],_=t[c+1],E=t[c+2];p=306*x+601*_+117*E+512>>10}o[u]=255-p}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,c=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*c),d=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*c);return r.width=u,r.height=d,i.translate(u/2,d/2),i.rotate(a),i.drawImage(this.canvas,o/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Z0(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Vf),CL=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Er=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{d(r.next(p))}catch(g){o(g)}}function u(p){try{d(r.throw(p))}catch(g){o(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,u)}d((r=r.apply(n,e||[])).next())})},br=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(p){return u([d,p])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},IL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ac=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Er(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,d,p,g,x;return br(this,function(_){switch(_.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=IL(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),d=a.groupId,p={deviceId:c,label:u,kind:o,groupId:d},t.push(p))}catch(E){g={error:E}}finally{try{i&&!i.done&&(x=r.return)&&x.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Er(this,void 0,void 0,function(){var e;return br(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new CL(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Er(this,void 0,void 0,function(){var t;return br(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Er(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Er(this,void 0,void 0,function(){var r,i;return br(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Er(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Er(this,void 0,void 0,function(){var r,i;return br(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Er(this,void 0,void 0,function(){return br(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Er(this,void 0,void 0,function(){var i,a;return br(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Er(this,void 0,void 0,function(){var i;return br(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Er(this,void 0,void 0,function(){var i;return br(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Er(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Er(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new hn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new hn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new hn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new hn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new hn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new hn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new hn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new hn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new hn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new hn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Er(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Er(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,c){if(i._stopAsyncDecode){c(new ie("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(x){var d=t&&x instanceof ie,p=x instanceof En||x instanceof xe,g=p&&r;if(d||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,c);c(x)}};return new Promise(function(o,c){return a(o,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof En||u instanceof xe,c=u instanceof ie;(o||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new TL(r,t),a=new MC(i);return new PC(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),mr=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Ft.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Ft.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Ft.arraycopy(t,0,r,0,t.length),Ft.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Og;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Og||(Og={}));const De=Og;var Dg;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Dg||(Dg={}));const ar=Dg;var J0=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),$u=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),js=function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ft.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=$u.addOrSubtract(r,o)}return r}r=t[0];for(var c=t.length,u=this.field,i=1;i<c;i++)r=$u.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Ft.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=$u.addOrSubtract(t[c-o],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field,u=0;u<r;u++)for(var d=t[u],p=0;p<a;p++)o[u+p]=$u.addOrSubtract(o[u+p],c.multiply(d,i[p]));return new n(c,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,c=0;c<i;c++)a[c]=o.multiply(r[c],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Pe("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),d=e.multiplyByMonomial(c,u),p=t.buildMonomial(c,u);r=r.addOrSubtract(p),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),NL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kC=function(n){NL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Br),RL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pr=function(n){RL(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),c=1,u=0;u<r;u++)o[u]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=o;for(var d=new Int32Array(r),u=0;u<r-1;u++)d[o[u]]=u;return a.logTable=d,a.zero=new js(a,Int32Array.from([0])),a.one=new js(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new js(this,i)},e.prototype.inverse=function(t){if(t===0)throw new kC;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+et.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}($u),OL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yh=function(n){OL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Br),DL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uf=function(n){DL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Br),e1=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new js(r,e),a=new Int32Array(t),o=!0,c=0;c<t;c++){var u=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=u,u!==0&&(o=!1)}if(!o)for(var d=new js(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),g=p[0],x=p[1],_=this.findErrorLocations(g),E=this.findErrorMagnitudes(x,_),c=0;c<_.length;c++){var A=e.length-1-r.log(_[c]);if(A<0)throw new yh("Bad error location");e[A]=Pr.addOrSubtract(e[A],E[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,c=t,u=a.getZero(),d=a.getOne();c.getDegree()>=(r/2|0);){var p=o,g=u;if(o=c,u=d,o.isZero())throw new yh("r_{i-1} was zero");c=p;for(var x=a.getZero(),_=o.getCoefficient(o.getDegree()),E=a.inverse(_);c.getDegree()>=o.getDegree()&&!c.isZero();){var A=c.getDegree()-o.getDegree(),S=a.multiply(c.getCoefficient(c.getDegree()),E);x=x.addOrSubtract(a.buildMonomial(A,S)),c=c.addOrSubtract(o.multiplyByMonomial(A,S))}if(d=x.multiply(u).addOrSubtract(g),c.getDegree()>=o.getDegree())throw new Uf("Division algorithm failed to reduce polynomial?")}var I=d.getCoefficient(0);if(I===0)throw new yh("sigmaTilde(0) was zero");var N=a.inverse(I),O=d.multiplyScalar(N),j=c.multiplyScalar(N);return[O,j]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new yh("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var c=a.inverse(t[o]),u=1,d=0;d<r;d++)if(o!==d){var p=a.multiply(t[d],c),g=(p&1)===0?p|1:p&-2;u=a.multiply(u,g)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i},n}(),tr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(tr||(tr={}));var zE=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),c=new J0(a,o,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=tr.UPPER,i=tr.UPPER,a="",o=0;o<t;)if(i===tr.BINARY){if(t-o<5)break;var c=n.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<c;u++){if(t-o<8){o=t;break}var d=n.readCode(e,o,8);a+=dt.castAsNonUtf8Char(d),o+=8}i=r}else{var p=i===tr.DIGIT?4:5;if(t-o<p)break;var d=n.readCode(e,o,p);o+=p;var g=n.getCharacter(i,d);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return tr.LOWER;case"P":return tr.PUNCT;case"M":return tr.MIXED;case"D":return tr.DIGIT;case"B":return tr.BINARY;case"U":default:return tr.UPPER}},n.getCharacter=function(e,t){switch(e){case tr.UPPER:return n.UPPER_TABLE[t];case tr.LOWER:return n.LOWER_TABLE[t];case tr.MIXED:return n.MIXED_TABLE[t];case tr.PUNCT:return n.PUNCT_TABLE[t];case tr.DIGIT:return n.DIGIT_TABLE[t];default:throw new Uf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Pr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Pr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Pr.AZTEC_DATA_10):(r=12,t=Pr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new xe;for(var o=e.length%r,c=new Int32Array(a),u=0;u<a;u++,o+=r)c[u]=n.readCode(e,o,r);try{var d=new e1(t);d.decode(c,a-i)}catch(S){throw new xe(S)}for(var p=(1<<r)-1,g=0,u=0;u<i;u++){var x=c[u];if(x===0||x===p)throw new xe;(x===1||x===p-1)&&g++}for(var _=new Array(i*r-g),E=0,u=0;u<i;u++){var x=c[u];if(x===1||x===p-1)_.fill(x>1,E,E+r-1),E+=r-1;else for(var A=r-1;A>=0;--A)_[E++]=(x&1<<A)!==0}return _},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var u=i+1+2*et.truncDivision(et.truncDivision(i,2)-1,15),d=i/2,p=et.truncDivision(u,2),c=0;c<d;c++){var g=c+et.truncDivision(c,15);a[d-c-1]=p-g-1,a[d+c]=p+g+1}for(var c=0,x=0;c<r;c++){for(var _=(r-c)*4+(t?9:12),E=c*2,A=i-1-E,S=0;S<_;S++)for(var I=S*2,N=0;N<2;N++)o[x+I+N]=e.get(a[E+N],a[E+S]),o[x+2*_+I+N]=e.get(a[E+S],a[A-N]),o[x+4*_+I+N]=e.get(a[A-N],a[A-S]),o[x+6*_+I+N]=e.get(a[A-S],a[E+N]);x+=_*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),yt=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),Pg=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ce=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Pg.floatToIntBits(this.x)+Pg.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,c;if(r>=t&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){var u=a;a=c,c=u}e[0]=a,e[1]=o,e[2]=c},n.distance=function(e,t){return yt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),ty=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),PL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ML=function(n){PL(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=o,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(ty),Mg=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,u=!1,d=!1,p=!1,g=!1,x=this.width,_=this.height;o;){o=!1;for(var E=!0;(E||!u)&&t<x;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,o=!0,u=!0):u||t++;if(t>=x){a=!0;break}for(var A=!0;(A||!d)&&i<_;)A=this.containsBlackPoint(e,t,i,!0),A?(i++,o=!0,d=!0):d||i++;if(i>=_){a=!0;break}for(var S=!0;(S||!p)&&e>=0;)S=this.containsBlackPoint(r,i,e,!1),S?(e--,o=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var I=!0;(I||!g)&&r>=0;)I=this.containsBlackPoint(e,t,r,!0),I?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){for(var N=t-e,O=null,j=1;O===null&&j<N;j++)O=this.getBlackPointOnSegment(e,i-j,e+j,i);if(O==null)throw new ie;for(var F=null,j=1;F===null&&j<N;j++)F=this.getBlackPointOnSegment(e,r+j,e+j,r);if(F==null)throw new ie;for(var q=null,j=1;q===null&&j<N;j++)q=this.getBlackPointOnSegment(t,r+j,t-j,r);if(q==null)throw new ie;for(var P=null,j=1;P===null&&j<N;j++)P=this.getBlackPointOnSegment(t,i-j,t-j,i);if(P==null)throw new ie;return this.centerEdges(P,O,q,F)}else throw new ie},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=yt.round(yt.distance(e,t,r,i)),o=(r-e)/a,c=(i-t)/a,u=this.image,d=0;d<a;d++){var p=yt.round(e+d*o),g=yt.round(t+d*c);if(u.get(p,g))return new Ce(p,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),d=r.getX(),p=r.getY(),g=i.getX(),x=i.getY(),_=n.CORR;return a<this.width/2?[new Ce(g-_,x+_),new Ce(c+_,u+_),new Ce(d-_,p-_),new Ce(a+_,o-_)]:[new Ce(g+_,x+_),new Ce(c+_,u-_),new Ce(d-_,p+_),new Ce(a-_,o-_)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),GE=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new ie;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new ie;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n}(),LC=function(){function n(e,t,r,i,a,o,c,u,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=u,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,c,u,d,p,g,x,_,E,A,S){var I=n.quadrilateralToSquare(e,t,r,i,a,o,c,u),N=n.squareToQuadrilateral(d,p,g,x,_,E,A,S);return N.times(I)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,d=this.a31,p=this.a32,g=this.a33,x=0;x<t;x+=2){var _=e[x],E=e[x+1],A=a*_+u*E+g;e[x]=(r*_+o*E+d)/A,e[x+1]=(i*_+c*E+p)/A}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,d=this.a31,p=this.a32,g=this.a33,x=e.length,_=0;_<x;_++){var E=e[_],A=t[_],S=a*E+u*A+g;e[_]=(r*E+o*A+d)/S,t[_]=(i*E+c*A+p)/S}},n.squareToQuadrilateral=function(e,t,r,i,a,o,c,u){var d=e-r+a-c,p=t-i+o-u;if(d===0&&p===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var g=r-a,x=c-a,_=i-o,E=u-o,A=g*E-x*_,S=(d*E-x*p)/A,I=(g*p-d*_)/A;return new n(r-e+S*r,c-e+I*c,e,i-t+S*i,u-t+I*u,t,S,I,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,c,u){return n.squareToQuadrilateral(e,t,r,i,a,o,c,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),kL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LL=function(n){kL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,c,u,d,p,g,x,_,E,A,S,I,N,O,j){var F=LC.quadrilateralToQuadrilateral(a,o,c,u,d,p,g,x,_,E,A,S,I,N,O,j);return this.sampleGridWithTransform(t,r,i,F)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ie;for(var o=new ra(r,i),c=new Float32Array(2*r),u=0;u<i;u++){for(var d=c.length,p=u+.5,g=0;g<d;g+=2)c[g]=g/2+.5,c[g+1]=p;a.transformPoints(c),GE.checkAndNudgePoints(t,c);try{for(var g=0;g<d;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&o.set(g/2,u)}catch{throw new ie}}return o},e}(GE),ny=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new LL,n}(),Or=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ce(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),jL=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new ML(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ie;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,c){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(et.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ie},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),c=r-1;c>=0;--c)o[c]=e&15,e>>=4;try{var u=new e1(Pr.AZTEC_PARAM);u.decode(o,a)}catch{throw new ie}for(var d=0,c=0;c<i;c++)d=(d<<4)+o[c];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),d=this.getFirstDifferent(i,o,-1,1),p=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,u,d,p))break}t=c,r=u,i=d,a=p,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;var x=new Ce(t.getX()+.5,t.getY()-.5),_=new Ce(r.getX()+.5,r.getY()+.5),E=new Ce(i.getX()-.5,i.getY()+.5),A=new Ce(a.getX()-.5,a.getY()-.5);return this.expandSquare([x,_,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new Mg(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new Or(o+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Or(o+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Or(o-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Or(o-7,c-7),!1,-1,-1).toResultPoint()}var u=yt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=yt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new Mg(this.image,15,u,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Or(u+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Or(u+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Or(u-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Or(u-7,d-7),!1,-1,-1).toResultPoint()}return u=yt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=yt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Or(u,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=ny.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,d=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,d,u,d,d,u,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,c=e.getX(),u=e.getY(),d=o*(t.getX()-e.getX())/a,p=o*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(yt.round(c+g*d),yt.round(u+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Or(e.getX()-a,e.getY()+a),t=new Or(t.getX()-a,t.getY()-a),r=new Or(r.getX()+a,r.getY()-a),i=new Or(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var c=this.getColor(e,t);return c!==o||(c=this.getColor(t,r),c!==o)?!1:(c=this.getColor(r,i),c===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,c=e.getX(),u=e.getY(),d=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),g=0;g<p;g++)c+=i,u+=a,this.image.get(yt.round(c),yt.round(u))!==d&&o++;var x=o/r;return x>.1&&x<.9?0:x<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new Or(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,d=new Ce(c+i*a,u+i*o),p=new Ce(c-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var g=new Ce(c+i*a,u+i*o),x=new Ce(c-i*a,u-i*o),_=[d,g,p,x];return _},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=yt.round(e.getX()),r=yt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return yt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return yt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(et.truncDivision(this.nbLayers-4,8)+1)+15},n}(),d0=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new jL(e.getBlackMatrix()),a=null,o=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new zE().decode(c)}catch(g){r=g}if(o==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new zE().decode(c)}catch(g){throw r??g}var u=new mr(o.getText(),o.getRawBytes(),o.getNumBits(),a,De.AZTEC,Ft.currentTimeMillis()),d=o.getByteSegments();d!=null&&u.putMetadata(ar.BYTE_SEGMENTS,d);var p=o.getECLevel();return p!=null&&u.putMetadata(ar.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Ht.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),BL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){BL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new d0,t)||this}return e})(Ac);var kn=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Ht.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),c=270;o!==null&&o.get(ar.ORIENTATION)===!0&&(c=c+o.get(ar.ORIENTATION)%360),a.putMetadata(ar.ORIENTATION,c);var u=a.getResultPoints();if(u!==null)for(var d=i.getHeight(),p=0;p<u.length;p++)u[p]=new Ce(d-u[p].getY()-1,u[p].getX());return a}else throw new ie}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Xn(r),o=t&&t.get(Ht.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var d=Math.trunc(i/2),p=0;p<u;p++){var g=Math.trunc((p+1)/2),x=(p&1)===0,_=d+c*(x?g:-g);if(_<0||_>=i)break;try{a=e.getBlackRow(_,a)}catch{continue}for(var E=function(N){if(N===1&&(a.reverse(),t&&t.get(Ht.NEED_RESULT_POINT_CALLBACK)===!0)){var O=new Map;t.forEach(function(q,P){return O.set(P,q)}),O.delete(Ht.NEED_RESULT_POINT_CALLBACK),t=O}try{var j=A.decodeRow(_,a,t);if(N===1){j.putMetadata(ar.ORIENTATION,180);var F=j.getResultPoints();F!==null&&(F[0]=new Ce(r-F[0].getX()-1,F[0].getY()),F[1]=new Ce(r-F[1].getX()-1,F[1].getY()))}return{value:j}}catch{}},A=this,S=0;S<2;S++){var I=E(S);if(typeof I=="object")return I.value}}throw new ie},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new ie;for(var c=!e.get(t),u=0,d=t;d<o;){if(e.get(d)!==c)r[u]++;else{if(++u===i)break;r[u]=1,c=!c}d++}if(!(u===i||u===i-1&&d===o))throw new ie},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ie;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var d=0,p=0;p<i;p++){var g=e[p],x=t[p]*u,_=g>x?g-x:x-g;if(_>r)return Number.POSITIVE_INFINITY;d+=_}return d/a},n}(),VL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qE=function(n){VL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),c=i,u=!1,d=6,p=i;p<r;p++)if(t.get(p)!==u)o[a]++;else{if(a===d-1){for(var g=e.MAX_AVG_VARIANCE,x=-1,_=e.CODE_START_A;_<=e.CODE_START_C;_++){var E=kn.patternMatchVariance(o,e.CODE_PATTERNS[_],e.MAX_INDIVIDUAL_VARIANCE);E<g&&(g=E,x=_)}if(x>=0&&t.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,x]);c+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new ie},e.decodeCode=function(t,r,i){kn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,c=0;c<e.CODE_PATTERNS.length;c++){var u=e.CODE_PATTERNS[c],d=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,o=c)}if(o>=0)return o;throw new ie},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Ht.ASSUME_GS1)===!0,o=e.findStartPattern(r),c=o[2],u=0,d=new Uint8Array(20);d[u++]=c;var p;switch(c){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new xe}for(var g=!1,x=!1,_="",E=o[0],A=o[1],S=Int32Array.from([0,0,0,0,0,0]),I=0,N=0,O=c,j=0,F=!0,q=!1,P=!1;!g;){var R=x;switch(x=!1,I=N,N=e.decodeCode(r,S,A),d[u++]=N,N!==e.CODE_STOP&&(F=!0),N!==e.CODE_STOP&&(j++,O+=j*N),E=A,A+=S.reduce(function(le,de){return le+de},0),N){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new xe}switch(p){case e.CODE_CODE_A:if(N<64)P===q?_+=String.fromCharCode(32+N):_+=String.fromCharCode(32+N+128),P=!1;else if(N<96)P===q?_+=String.fromCharCode(N-64):_+=String.fromCharCode(N+64),P=!1;else switch(N!==e.CODE_STOP&&(F=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!q&&P?(q=!0,P=!1):q&&P?(q=!1,P=!1):P=!0;break;case e.CODE_SHIFT:x=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(N<96)P===q?_+=String.fromCharCode(32+N):_+=String.fromCharCode(32+N+128),P=!1;else switch(N!==e.CODE_STOP&&(F=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!q&&P?(q=!0,P=!1):q&&P?(q=!1,P=!1):P=!0;break;case e.CODE_SHIFT:x=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(N<100)N<10&&(_+="0"),_+=N;else switch(N!==e.CODE_STOP&&(F=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}R&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var M=A-E;if(A=r.getNextUnset(A),!r.isRange(A,Math.min(r.getSize(),A+(A-E)/2),!1))throw new ie;if(O-=j*I,O%103!==I)throw new En;var V=_.length;if(V===0)throw new ie;V>0&&F&&(p===e.CODE_CODE_C?_=_.substring(0,V-2):_=_.substring(0,V-1));for(var H=(o[1]+o[0])/2,z=E+M/2,U=d.length,_e=new Uint8Array(U),Ee=0;Ee<U;Ee++)_e[Ee]=d[Ee];var X=[new Ce(H,t),new Ce(z,t)];return new mr(_,_e,0,X,De.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(kn),UL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Um=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$E=function(n){UL(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.counters;d.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,d),g=r.getNextSet(p[1]),x=r.getSize(),_,E;do{e.recordPattern(r,g,d);var A=e.toNarrowWidePattern(d);if(A<0)throw new ie;_=e.patternToChar(A),this.decodeRowResult+=_,E=g;try{for(var S=(a=void 0,Um(d)),I=S.next();!I.done;I=S.next()){var N=I.value;g+=N}}catch(U){a={error:U}}finally{try{I&&!I.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var j=Um(d),F=j.next();!F.done;F=j.next()){var N=F.value;O+=N}}catch(U){c={error:U}}finally{try{F&&!F.done&&(u=j.return)&&u.call(j)}finally{if(c)throw c.error}}var q=g-E-O;if(g!==x&&q*2<O)throw new ie;if(this.usingCheckDigit){for(var P=this.decodeRowResult.length-1,R=0,M=0;M<P;M++)R+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(P)!==e.ALPHABET_STRING.charAt(R%43))throw new En;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new ie;var V;this.extendedMode?V=e.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;var H=(p[1]+p[0])/2,z=E+O/2;return new mr(V,null,0,[new Ce(H,t),new Ce(z,t)],De.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,c=a,u=!1,d=r.length,p=a;p<i;p++)if(t.get(p)!==u)r[o]++;else{if(o===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new ie},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,c;do{var u=2147483647;try{for(var d=(r=void 0,Um(t)),p=d.next();!p.done;p=d.next()){var g=p.value;g<u&&g>o&&(u=g)}}catch(A){r={error:A}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o=u,c=0;for(var x=0,_=0,E=0;E<a;E++){var g=t[E];g>o&&(_|=1<<a-1-E,c++,x+=g)}if(c===3){for(var E=0;E<a&&c>0;E++){var g=t[E];if(g>o&&(c--,g*2>=x))return-1}return _}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ie},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var c=t.charAt(a+1),u="\0";switch(o){case"+":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new xe;break;case"$":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new xe;break;case"%":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c==="X"||c==="Y"||c==="Z")u="";else throw new xe;break;case"/":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new xe;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(kn),FL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WE=function(n){FL(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.findAsteriskPattern(r),p=r.getNextSet(d[1]),g=r.getSize(),x=this.counters;x.fill(0),this.decodeRowResult="";var _,E;do{e.recordPattern(r,p,x);var A=this.toPattern(x);if(A<0)throw new ie;_=this.patternToChar(A),this.decodeRowResult+=_,E=p;try{for(var S=(a=void 0,Fm(x)),I=S.next();!I.done;I=S.next()){var N=I.value;p+=N}}catch(M){a={error:M}}finally{try{I&&!I.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var j=Fm(x),F=j.next();!F.done;F=j.next()){var N=F.value;O+=N}}catch(M){c={error:M}}finally{try{F&&!F.done&&(u=j.return)&&u.call(j)}finally{if(c)throw c.error}}if(p===g||!r.get(p))throw new ie;if(this.decodeRowResult.length<2)throw new ie;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var q=this.decodeExtended(this.decodeRowResult),P=(d[1]+d[0])/2,R=E+O/2;return new mr(q,null,0,[new Ce(P,t),new Ce(R,t)],De.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,c=!1,u=a.length,d=0,p=i;p<r;p++)if(t.get(p)!==c)a[d]++;else{if(d===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,p]);o+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,c=!c}throw new ie},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Fm(t),c=o.next();!c.done;c=o.next()){var u=c.value;a+=u}}catch(E){r={error:E}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var d=0,p=t.length,g=0;g<p;g++){var x=Math.round(t[g]*9/a);if(x<1||x>4)return-1;if((g&1)===0)for(var _=0;_<x;_++)d=d<<1|1;else d<<=x}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ie},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new xe;var c=t.charAt(a+1),u="\0";switch(o){case"d":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new xe;break;case"a":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new xe;break;case"b":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c>="X"&&c<="Z")u="";else throw new xe;break;case"c":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new xe;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,c=r-1;c>=0;c--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new En},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(kn),HL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XE=function(n){HL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,c=this.decodeStart(r),u=this.decodeEnd(r),d=new Ke;e.decodeMiddle(r,c[1],u[0],d);var p=d.toString(),g=null;i!=null&&(g=i.get(Ht.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var x=p.length,_=!1,E=0;try{for(var A=zL(g),S=A.next();!S.done;S=A.next()){var I=S.value;if(x===I){_=!0;break}I>E&&(E=I)}}catch(j){a={error:j}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}if(!_&&x>E&&(_=!0),!_)throw new xe;var N=[new Ce(c[1],t),new Ce(u[0],t)],O=new mr(p,null,0,N,De.ITF,new Date().getTime());return O},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),c=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),c.fill(0),u.fill(0);r<i;){kn.recordPattern(t,r,o);for(var d=0;d<5;d++){var p=2*d;c[d]=o[p],u[d]=o[p+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(u),a.append(g.toString()),o.forEach(function(x){r+=x})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ie},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ie;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof ie&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),c=t.getSize(),u=!1,d=0,p=r;o.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==u)o[d]++;else{if(d===a-1){if(kn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,g];p+=o[0]+o[1],Ft.arraycopy(o,2,o,0,d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,u=!u}throw new ie},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var c=e.PATTERNS[o],u=kn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new ie},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(kn),GL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lc=function(n){GL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var c=i[0];a=i[1];var u=c-(a-c);u>=0&&(r=t.isRange(u,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,d=r,p=a.length,g=i,x=r;x<c;x++)if(t.get(x)!==g)o[u]++;else{if(u===p-1){if(kn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,x]);d+=o[0]+o[1];for(var _=o.slice(2,o.length),E=0;E<u-1;E++)o[E]=_[E];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,g=!g}throw new ie},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,c=-1,u=a.length,d=0;d<u;d++){var p=a[d],g=kn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,c=d)}if(c>=0)return c;throw new ie},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(kn),qL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$L=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Ce((r[0]+r[1])/2,e),new Ce(a,e)],d=new mr(o,null,0,u,De.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],d=0,p=0;p<5&&u<c;p++){var g=lc.decodeDigit(e,o,u,lc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var x=(i=void 0,qL(o)),_=x.next();!_.done;_=x.next()){var E=_.value;u+=E}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}g>=10&&(d|=1<<4-p),p!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new ie;var A=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==A)throw new ie;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ie},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[ar.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),WL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XL=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Ce((r[0]+r[1])/2,e),new Ce(a,e)],d=new mr(o,null,0,u,De.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],d=0,p=0;p<2&&u<c;p++){var g=lc.decodeDigit(e,o,u,lc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var x=(i=void 0,WL(o)),_=x.next();!_.done;_=x.next()){var E=_.value;u+=E}}catch(A){i={error:A}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}g>=10&&(d|=1<<1-p),p!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new ie;if(parseInt(r.toString())%4!==d)throw new ie;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[ar.ISSUE_NUMBER,parseInt(e)]])},n}(),YL=function(){function n(){}return n.decodeRow=function(e,t,r){var i=lc.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new $L;return a.decodeRow(e,t,i)}catch{var o=new XL;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),KL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),On=function(n){KL(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Ht.NEED_RESULT_POINT_CALLBACK);if(o!=null){var c=new Ce((a[0]+a[1])/2,t);o.foundPossibleResultPoint(c)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=u.rowOffset,p=u.resultString;if(o!=null){var g=new Ce(d,t);o.foundPossibleResultPoint(g)}var x=e.decodeEnd(r,d);if(o!=null){var _=new Ce((x[0]+x[1])/2,t);o.foundPossibleResultPoint(_)}var E=x[1],A=E+(E-x[0]);if(A>=r.getSize()||!r.isRange(E,A,!1))throw new ie;var S=p.toString();if(S.length<8)throw new xe;if(!e.checkChecksum(S))throw new En;var I=(a[1]+a[0])/2,N=(x[1]+x[0])/2,O=this.getBarcodeFormat(),j=[new Ce(I,t),new Ce(N,t)],F=new mr(S,null,0,j,O,new Date().getTime()),q=0;try{var P=YL.decodeRow(t,r,x[1]);F.putMetadata(ar.UPC_EAN_EXTENSION,P.getText()),F.putAllMetadata(P.getResultMetadata()),F.addResultPoints(P.getResultPoints()),q=P.getText().length}catch{}var R=i==null?null:i.get(Ht.ALLOWED_EAN_EXTENSIONS);if(R!=null){var M=!1;for(var V in R)if(q.toString()===V){M=!0;break}if(!M)throw new ie}return O===De.EAN_13||De.UPC_A,F},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(lc),QL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kg=function(n){QL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],x=0,_=0;_<6&&g<p;_++){var E=On.decodeDigit(t,d,g,On.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var A=(a=void 0,YE(d)),S=A.next();!S.done;S=A.next()){var I=S.value;g+=I}}catch(F){a={error:F}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}E>=10&&(x|=1<<5-_)}i=e.determineFirstDigit(i,x);var N=On.findGuardPattern(t,g,!0,On.MIDDLE_PATTERN,new Int32Array(On.MIDDLE_PATTERN.length).fill(0));g=N[1];for(var _=0;_<6&&g<p;_++){var E=On.decodeDigit(t,d,g,On.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var O=(c=void 0,YE(d)),j=O.next();!j.done;j=O.next()){var I=j.value;g+=I}}catch(P){c={error:P}}finally{try{j&&!j.done&&(u=O.return)&&u.call(O)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return De.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ie},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(On),ZL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QE=function(n){ZL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],x=0;x<4&&g<p;x++){var _=On.decodeDigit(t,d,g,On.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var E=(a=void 0,KE(d)),A=E.next();!A.done;A=E.next()){var S=A.value;g+=S}}catch(j){a={error:j}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}}var I=On.findGuardPattern(t,g,!0,On.MIDDLE_PATTERN,new Int32Array(On.MIDDLE_PATTERN.length).fill(0));g=I[1];for(var x=0;x<4&&g<p;x++){var _=On.decodeDigit(t,d,g,On.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var N=(c=void 0,KE(d)),O=N.next();!O.done;O=N.next()){var S=O.value;g+=S}}catch(q){c={error:q}}finally{try{O&&!O.done&&(u=N.return)&&u.call(N)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return De.EAN_8},e}(On),JL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZE=function(n){JL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new kg,t}return e.prototype.getBarcodeFormat=function(){return De.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new mr(r.substring(1),null,null,t.getResultPoints(),De.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ie},e.prototype.reset=function(){this.ean13Reader.reset()},e}(On),ej=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JE=function(n){ej(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c=this.decodeMiddleCounters.map(function(S){return S});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),d=r[1],p=0,g=0;g<6&&d<u;g++){var x=e.decodeDigit(t,c,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var _=(a=void 0,tj(c)),E=_.next();!E.done;E=_.next()){var A=E.value;d+=A}}catch(S){a={error:S}}finally{try{E&&!E.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}x>=10&&(p|=1<<5-g)}return e.determineNumSysAndCheckDigit(new Ke(i),p),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return On.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ie.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return De.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new Ke;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(On),nj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hm=function(n){nj(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Ht.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(De.EAN_13)>-1&&a.push(new kg),i.indexOf(De.UPC_A)>-1&&a.push(new ZE),i.indexOf(De.EAN_8)>-1&&a.push(new QE),i.indexOf(De.UPC_E)>-1&&a.push(new JE)),a.length===0&&(a.push(new kg),a.push(new ZE),a.push(new QE),a.push(new JE)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var c=eb(this.readers),u=c.next();!u.done;u=c.next()){var d=u.value;try{var p=d.decodeRow(t,r,i),g=p.getBarcodeFormat()===De.EAN_13&&p.getText().charAt(0)==="0",x=i==null?null:i.get(Ht.POSSIBLE_FORMATS),_=x==null||x.includes(De.UPC_A);if(g&&_){var E=p.getRawBytes(),A=new mr(p.getText().substring(1),E,E?E.length:null,p.getResultPoints(),De.UPC_A);return A.putAllMetadata(p.getResultMetadata()),A}return p}catch{}}}catch(S){a={error:S}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}throw new ie},e.prototype.reset=function(){var t,r;try{for(var i=eb(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(kn),rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ij=function(n){rj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ie;var o=this.codaBarDecodeRow(a.row);if(!o)throw new ie;return new mr(o,null,0,[new Ce(a.left,t),new Ce(a.right,t)],De.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],c=r[0],u=1,d=1;d<r.length;d++)r[d]===c?u++:(c=r[d],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,d){return(u+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(kn),aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},To=function(n){aj(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(kn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ie},e.count=function(t){return yt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],c=a/o;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var p=sj(t),g=p.next();!g.done;g=p.next()){var x=g.value;x>d&&(d=x),x<u&&(u=x)}}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return d<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(kn),h0=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),jC=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ce(r,a)),this.resultPoints.push(new Ce(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),oj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zl=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var c=oj(e),u=c.next();!u.done;u=c.next()){var d=u.value;o+=d}}catch(N){i={error:N}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var p=0,g=0,x=e.length,_=0;_<x-1;_++){var E=void 0;for(E=1,g|=1<<_;E<e[_];E++,g&=~(1<<_)){var A=n.combins(o-E-1,x-_-2);if(r&&g===0&&o-E-(x-_-1)>=x-_-1&&(A-=n.combins(o-E-(x-_),x-_-2)),x-_-1>1){for(var S=0,I=o-E-(x-_-2);I>t;I--)S+=n.combins(o-E-I-1,x-_-3);A-=S*(x-1-_)}else o-E>t&&A--;p+=A}o-=E}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),lj=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Xn(r),a=0,o=e[0],c=o.getRightChar().getValue(),u=11;u>=0;--u)(c&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var d=e[u],p=d.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var x=d.getRightChar().getValue(),g=11;g>=0;--g)(x&1<<g)!==0&&i.set(a),a++}return i},n}(),bo=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),ry=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),cj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_i=function(n){cj(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(ry),uj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ao=function(n){uj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(ry),fj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bl=function(n){fj(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new xe;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(ry),xh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dj=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,c,u,d;if(!e)return null;if(e.length<2)throw new ie;var p=e.substring(0,2);try{for(var g=xh(n.TWO_DIGIT_DATA_LENGTH),x=g.next();!x.done;x=g.next()){var _=x.value;if(_[0]===p)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,_[2],e):n.processFixedAI(2,_[1],e)}}catch(q){t={error:q}}finally{try{x&&!x.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new ie;var E=e.substring(0,3);try{for(var A=xh(n.THREE_DIGIT_DATA_LENGTH),S=A.next();!S.done;S=A.next()){var _=S.value;if(_[0]===E)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,_[2],e):n.processFixedAI(3,_[1],e)}}catch(q){i={error:q}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}try{for(var I=xh(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),N=I.next();!N.done;N=I.next()){var _=N.value;if(_[0]===E)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(q){o={error:q}}finally{try{N&&!N.done&&(c=I.return)&&c.call(I)}finally{if(o)throw o.error}}if(e.length<4)throw new ie;var O=e.substring(0,4);try{for(var j=xh(n.FOUR_DIGIT_DATA_LENGTH),F=j.next();!F.done;F=j.next()){var _=F.value;if(_[0]===O)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(q){u={error:q}}finally{try{F&&!F.done&&(d=j.return)&&d.call(j)}finally{if(u)throw u.error}}throw new ie},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ie;var i=r.substring(0,e);if(r.length<e+t)throw new ie;var a=r.substring(e,e+t),o=r.substring(e+t),c="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),c=r.substring(a),u="("+i+")"+o,d=n.parseFieldsInGeneralPurpose(c);return d==null?u:u+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Bh=function(){function n(e){this.buffer=new Ke,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=dj.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Bl(this.information.getSize(),Bl.FNC1,Bl.FNC1):new Bl(this.information.getSize(),t-1,Bl.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Bl(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Ao(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ao(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Ao(this.current.getPosition(),this.buffer.toString()):t=new Ao(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new bo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Ao(this.current.getPosition(),this.buffer.toString());return new bo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new bo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ao(this.current.getPosition(),this.buffer.toString());return new bo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new bo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ao(this.current.getPosition(),this.buffer.toString());return new bo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new bo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new _i(e+5,_i.FNC1);if(t>=5&&t<15)return new _i(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new _i(e+7,""+(r+1));if(r>=90&&r<116)return new _i(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new xe}return new _i(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new _i(e+5,_i.FNC1);if(t>=5&&t<15)return new _i(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new _i(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Uf("Decoding invalid alphanumeric value: "+r)}return new _i(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),BC=function(){function n(e){this.information=e,this.generalDecoder=new Bh(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),hj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ei=function(n){hj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(BC),pj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mj=function(n){pj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ke;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Ei),gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vj=function(n){gj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ke;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(BC),yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vh=function(n){yj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),c=1e5,u=0;u<5;++u)o/c===0&&t.append("0"),c/=10;t.append(o)},e}(Ei),xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VC=function(n){xj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Vh.GTIN_SIZE+e.WEIGHT_SIZE)throw new ie;var t=new Ke;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Vh.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Vh),_j=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wj=function(n){_j(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(VC),Ej=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bj=function(n){Ej(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(VC),Aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sj=function(n){Aj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ei.GTIN_SIZE)throw new ie;var t=new Ke;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ei.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ei.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Ei),Tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cj=function(n){Tj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ei.GTIN_SIZE)throw new ie;var t=new Ke;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ei.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ei.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ei.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Ei),Ij=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ts=function(n){Ij(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ie;var t=new Ke;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Vh);function Nj(n){try{if(n.get(1))return new mj(n);if(!n.get(2))return new vj(n);var e=Bh.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new wj(n);case 5:return new bj(n)}var t=Bh.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new Sj(n);case 13:return new Cj(n)}var r=Bh.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ts(n,"310","11");case 57:return new Ts(n,"320","11");case 58:return new Ts(n,"310","13");case 59:return new Ts(n,"320","13");case 60:return new Ts(n,"310","15");case 61:return new Ts(n,"320","15");case 62:return new Ts(n,"310","17");case 63:return new Ts(n,"320","17")}}catch(i){throw console.log(i),new Uf("unknown decoder: "+n)}}var tb=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),Rj=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),Oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cs=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dj=function(n){Oj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof ie){if(!this.pairs.length)throw new ie;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new ie},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var c=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,Cs(t)),d=u.next();!d.done;d=u.next()){var p=d.value;this.pairs.push(p.getPairs())}}catch(x){i={error:x}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,o+1)}catch(x){console.log(x)}}}throw new ie},e.isValidSequence=function(t){var r,i;try{for(var a=Cs(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var c=o.value;if(!(t.length>c.length)){for(var u=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==c[d]){u=!1;break}if(u)return!0}}}catch(p){r={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){o=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Rj(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,c,u,d;try{for(var p=Cs(r),g=p.next();!g.done;g=p.next()){var x=g.value;if(x.getPairs().length!==t.length){var _=!0;try{for(var E=(o=void 0,Cs(x.getPairs())),A=E.next();!A.done;A=E.next()){var S=A.value,I=!1;try{for(var N=(u=void 0,Cs(t)),O=N.next();!O.done;O=N.next()){var j=O.value;if(tb.equals(S,j)){I=!0;break}}}catch(F){u={error:F}}finally{try{O&&!O.done&&(d=N.return)&&d.call(N)}finally{if(u)throw u.error}}I||(_=!1)}}catch(F){o={error:F}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(o)throw o.error}}}}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,c,u,d;try{for(var p=Cs(r),g=p.next();!g.done;g=p.next()){var x=g.value,_=!0;try{for(var E=(o=void 0,Cs(t)),A=E.next();!A.done;A=E.next()){var S=A.value,I=!1;try{for(var N=(u=void 0,Cs(x.getPairs())),O=N.next();!O.done;O=N.next()){var j=O.value;if(S.equals(j)){I=!0;break}}}catch(F){u={error:F}}finally{try{O&&!O.done&&(d=N.return)&&d.call(N)}finally{if(u)throw u.error}}if(!I){_=!1;break}}}catch(F){o={error:F}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(o)throw o.error}}if(_)return!0}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=lj.buildBitArray(t),i=Nj(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],c[0],c[1]];return new mr(a,null,null,u,De.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,c=1;c<this.pairs.size();++c){var u=this.pairs.get(c);a+=u.getLeftChar().getChecksumPortion(),o++;var d=u.getRightChar();d!=null&&(a+=d.getChecksumPortion(),o++)}a%=211;var p=211*(o-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,c=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var d=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ie;var p;try{p=this.decodeDataCharacter(t,o,a,!1)}catch(g){p=null,console.log(g)}return new tb(d,p,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var u=r[r.length-1];c=u.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var p=!1;c<o&&(p=!t.get(c),!!p);)c++;for(var g=0,x=c,_=c;_<o;_++)if(t.get(_)!==p)a[g]++;else{if(g===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=x,this.startEnd[1]=_;return}d&&e.reverseCounters(a),x+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new ie},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,c;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,c=this.startEnd[1]}else o=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var d=this.getDecodeFinderCounters();Ft.arraycopy(d,0,d,1,d.length-1),d[0]=a;var p;try{p=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new jC(p,[o,c],o,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),c=0;c<o.length;c++)o[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,d=o.length-1;u<d;u++,d--){var p=o[u];o[u]=o[d],o[d]=p}}var g=17,x=yt.sum(new Int32Array(o))/g,_=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(x-_)/_>.3)throw new ie;for(var E=this.getOddCounts(),A=this.getEvenCounts(),S=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var N=1*o[u]/x,O=N+.5;if(O<1){if(N<.3)throw new ie;O=1}else if(O>8){if(N>8.7)throw new ie;O=8}var j=u/2;(u&1)===0?(E[j]=O,S[j]=N-O):(A[j]=O,I[j]=N-O)}this.adjustOddEvenCounts(g);for(var F=4*r.getValue()+(i?0:2)+(a?0:1)-1,q=0,P=0,u=E.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[F][2*u];P+=E[u]*R}q+=E[u]}for(var M=0,u=A.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[F][2*u+1];M+=A[u]*R}var V=P+M;if((q&1)!==0||q>13||q<4)throw new ie;var H=(13-q)/2,z=e.SYMBOL_WIDEST[H],U=9-z,_e=zl.getRSSvalue(E,z,!0),Ee=zl.getRSSvalue(A,U,!1),X=e.EVEN_TOTAL_SUBSET[H],le=e.GSUM[H],de=_e*X+Ee+le;return new h0(de,V)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=yt.sum(new Int32Array(this.getOddCounts())),i=yt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);var d=r+i-t,p=(r&1)===1,g=(i&1)===0;if(d===1)if(p){if(g)throw new ie;o=!0}else{if(!g)throw new ie;u=!0}else if(d===-1)if(p){if(g)throw new ie;a=!0}else{if(!g)throw new ie;c=!0}else if(d===0){if(p){if(!g)throw new ie;r<i?(a=!0,u=!0):(o=!0,c=!0)}else if(g)throw new ie}else throw new ie;if(a){if(o)throw new ie;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new ie;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(To),Pj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mj=function(n){Pj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(h0),kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nb=function(n){kj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=zm(this.possibleLeftPairs),x=g.next();!x.done;x=g.next()){var _=x.value;if(_.getCount()>1)try{for(var E=(c=void 0,zm(this.possibleRightPairs)),A=E.next();!A.done;A=E.next()){var S=A.value;if(S.getCount()>1&&e.checkChecksum(_,S))return e.constructResult(_,S)}}catch(I){c={error:I}}finally{try{A&&!A.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}}}catch(I){a={error:I}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new ie},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var c=zm(t),u=c.next();!u.done;u=c.next()){var d=u.value;if(d.getValue()===r.getValue()){d.incrementCount(),o=!0;break}}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new Ke,c=13-a.length;c>0;c--)o.append("0");o.append(a);for(var u=0,c=0;c<13;c++){var d=o.charAt(c).charCodeAt(0)-48;u+=(c&1)===0?3*d:d}u=10-u%10,u===10&&(u=0),o.append(u.toString());var p=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new mr(o.toString(),null,0,[p[0],p[1],g[0],g[1]],De.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(Ht.NEED_RESULT_POINT_CALLBACK);if(u!=null){var d=(o[0]+o[1])/2;r&&(d=t.getSize()-1-d),u.foundPossibleResultPoint(new Ce(d,i))}var p=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new Mj(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)kn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{kn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,u=a.length-1;c<u;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}}for(var p=i?16:15,g=yt.sum(new Int32Array(a))/p,x=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var S=a[c]/g,I=Math.floor(S+.5);I<1?I=1:I>8&&(I=8);var N=Math.floor(c/2);(c&1)===0?(x[N]=I,E[N]=S-I):(_[N]=I,A[N]=S-I)}this.adjustOddEvenCounts(i,p);for(var O=0,j=0,c=x.length-1;c>=0;c--)j*=9,j+=x[c],O+=x[c];for(var F=0,q=0,c=_.length-1;c>=0;c--)F*=9,F+=_[c],q+=_[c];var P=j+3*F;if(i){if((O&1)!==0||O>12||O<4)throw new ie;var R=(12-O)/2,M=e.OUTSIDE_ODD_WIDEST[R],V=9-M,H=zl.getRSSvalue(x,M,!1),z=zl.getRSSvalue(_,V,!0),U=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],_e=e.OUTSIDE_GSUM[R];return new h0(H*U+z+_e,P)}else{if((q&1)!==0||q>10||q<4)throw new ie;var R=(10-q)/2,M=e.INSIDE_ODD_WIDEST[R],V=9-M,H=zl.getRSSvalue(x,M,!0),z=zl.getRSSvalue(_,V,!1),Ee=e.INSIDE_ODD_TOTAL_SUBSET[R],_e=e.INSIDE_GSUM[R];return new h0(z*Ee+H+_e,P)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,c=0;c<a&&(o=!t.get(c),r!==o);)c++;for(var u=0,d=c,p=c;p<a;p++)if(t.get(p)!==o)i[u]++;else{if(u===3){if(To.isFinderPattern(i))return[d,p];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new ie},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),c=a[0]-1;c>=0&&o!==t.get(c);)c--;c++;var u=a[0]-c,d=this.getDecodeFinderCounters(),p=new Int32Array(d.length);Ft.arraycopy(d,0,p,1,d.length-1),p[0]=u;var g=this.parseFinderValue(p,e.FINDER_PATTERNS),x=c,_=a[1];return i&&(x=t.getSize()-1-x,_=t.getSize()-1-_),new jC(g,[c,a[1]],x,_,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=yt.sum(new Int32Array(this.getOddCounts())),a=yt.sum(new Int32Array(this.getEvenCounts())),o=!1,c=!1,u=!1,d=!1;t?(i>12?c=!0:i<4&&(o=!0),a>12?d=!0:a<4&&(u=!0)):(i>11?c=!0:i<5&&(o=!0),a>10?d=!0:a<4&&(u=!0));var p=i+a-r,g=(i&1)===(t?1:0),x=(a&1)===1;if(p===1)if(g){if(x)throw new ie;c=!0}else{if(!x)throw new ie;d=!0}else if(p===-1)if(g){if(x)throw new ie;o=!0}else{if(!x)throw new ie;u=!0}else if(p===0){if(g){if(!x)throw new ie;i<a?(o=!0,d=!0):(c=!0,u=!0)}else if(x)throw new ie}else throw new ie;if(o){if(c)throw new ie;To.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&To.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(d)throw new ie;To.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&To.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(To),Lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gl=function(n){Lj(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Ht.POSSIBLE_FORMATS):null,a=t&&t.get(Ht.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Ht.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(De.EAN_13)||i.includes(De.UPC_A)||i.includes(De.EAN_8)||i.includes(De.UPC_E))&&r.readers.push(new Hm(t)),i.includes(De.CODE_39)&&r.readers.push(new $E(a,o)),i.includes(De.CODE_93)&&r.readers.push(new WE),i.includes(De.CODE_128)&&r.readers.push(new qE),i.includes(De.ITF)&&r.readers.push(new XE),i.includes(De.CODABAR)&&r.readers.push(new ij),i.includes(De.RSS_14)&&r.readers.push(new nb),i.includes(De.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Dj))),r.readers.length===0&&(r.readers.push(new Hm(t)),r.readers.push(new $E),r.readers.push(new WE),r.readers.push(new Hm(t)),r.readers.push(new qE),r.readers.push(new XE),r.readers.push(new nb)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ie},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(kn),jj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){jj(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Gl(r),t,r)||this}return e})(Ac);var rb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},At=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),_t=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Bj=function(){function n(e,t,r,i,a,o){var c,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var d=0,p=o.getECCodewords(),g=o.getECBlocks();try{for(var x=rb(g),_=x.next();!_.done;_=x.next()){var E=_.value;d+=E.getCount()*(E.getDataCodewords()+p)}}catch(A){c={error:A}}finally{try{_&&!_.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new xe;try{for(var a=rb(n.VERSIONS),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new xe},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new At(5,new _t(1,3))),new n(2,12,12,10,10,new At(7,new _t(1,5))),new n(3,14,14,12,12,new At(10,new _t(1,8))),new n(4,16,16,14,14,new At(12,new _t(1,12))),new n(5,18,18,16,16,new At(14,new _t(1,18))),new n(6,20,20,18,18,new At(18,new _t(1,22))),new n(7,22,22,20,20,new At(20,new _t(1,30))),new n(8,24,24,22,22,new At(24,new _t(1,36))),new n(9,26,26,24,24,new At(28,new _t(1,44))),new n(10,32,32,14,14,new At(36,new _t(1,62))),new n(11,36,36,16,16,new At(42,new _t(1,86))),new n(12,40,40,18,18,new At(48,new _t(1,114))),new n(13,44,44,20,20,new At(56,new _t(1,144))),new n(14,48,48,22,22,new At(68,new _t(1,174))),new n(15,52,52,24,24,new At(42,new _t(2,102))),new n(16,64,64,14,14,new At(56,new _t(2,140))),new n(17,72,72,16,16,new At(36,new _t(4,92))),new n(18,80,80,18,18,new At(48,new _t(4,114))),new n(19,88,88,20,20,new At(56,new _t(4,144))),new n(20,96,96,22,22,new At(68,new _t(4,174))),new n(21,104,104,24,24,new At(56,new _t(6,136))),new n(22,120,120,18,18,new At(68,new _t(6,175))),new n(23,132,132,20,20,new At(62,new _t(8,163))),new n(24,144,144,22,22,new At(62,new _t(8,156),new _t(2,155))),new n(25,8,18,6,16,new At(7,new _t(1,5))),new n(26,8,32,6,14,new At(11,new _t(1,10))),new n(27,12,26,10,24,new At(14,new _t(1,16))),new n(28,12,36,10,16,new At(18,new _t(1,22))),new n(29,16,36,14,16,new At(24,new _t(1,32))),new n(30,16,48,14,22,new At(28,new _t(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),Vj=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new xe;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ra(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return Bj.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),c=!1,u=!1,d=!1,p=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!d)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(o&7)===4&&!p)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new xe;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Pe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,c=r/a|0,u=o*i,d=c*a,p=new ra(d,u),g=0;g<o;++g)for(var x=g*i,_=0;_<c;++_)for(var E=_*a,A=0;A<i;++A)for(var S=g*(i+2)+1+A,I=x+A,N=0;N<a;++N){var O=_*(a+2)+1+N;if(e.get(O,S)){var j=E+N;p.set(j,I)}}return p},n}(),ib=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,c=t.getECBlocks(),u=0,d=c.getECBlocks();try{for(var p=ib(d),g=p.next();!g.done;g=p.next()){var x=g.value;u+=x.getCount()}}catch(_e){r={error:_e}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var _=new Array(u),E=0;try{for(var A=ib(d),S=A.next();!S.done;S=A.next())for(var x=S.value,I=0;I<x.getCount();I++){var N=x.getDataCodewords(),O=c.getECCodewords()+N;_[E++]=new n(N,new Uint8Array(O))}}catch(_e){a={error:_e}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}for(var j=_[0].codewords.length,F=j-c.getECCodewords(),q=F-1,P=0,I=0;I<q;I++)for(var R=0;R<E;R++)_[R].codewords[I]=e[P++];for(var M=t.getVersionNumber()===24,V=M?8:E,R=0;R<V;R++)_[R].codewords[F-1]=e[P++];for(var H=_[0].codewords.length,I=F;I<H;I++)for(var R=0;R<E;R++){var z=M?(R+8)%E:R,U=M&&z>7?I-1:I;_[z].codewords[U]=e[P++]}if(P!==e.length)throw new Pe;return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),UC=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Pe(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,c=e<o?e:o,u=o-c,d=255>>8-c<<u;t=(a[i]&d)>>u,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,d=255>>u<<u;t=t<<e|(a[i]&d)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Nn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Nn||(Nn={}));var Fj=function(){function n(){}return n.decode=function(e){var t=new UC(e),r=new Ke,i=new Ke,a=new Array,o=Nn.ASCII_ENCODE;do if(o===Nn.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Nn.C40_ENCODE:this.decodeC40Segment(t,r);break;case Nn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Nn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Nn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Nn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new xe}o=Nn.ASCII_ENCODE}while(o!==Nn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new J0(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new xe;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Nn.ASCII_ENCODE;if(a===129)return Nn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Nn.C40_ENCODE;case 231:return Nn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Nn.ANSIX12_ENCODE;case 239:return Nn.TEXT_ENCODE;case 240:return Nn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new xe;break}}while(e.available()>0);return Nn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new xe;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new xe}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new xe}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new xe;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new xe}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new xe;break;default:throw new xe}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new xe;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new xe;for(var c=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new xe;c[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(fi.decode(c,dt.ISO88591))}catch(d){throw new Uf("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),Hj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zj=function(){function n(){this.rsDecoder=new e1(Pr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new Vj(e),a=i.getVersion(),o=i.readCodewords(),c=Uj.getDataBlocks(o,a),u=0;try{for(var d=Hj(c),p=d.next();!p.done;p=d.next()){var g=p.value;u+=g.getNumDataCodewords()}}catch(O){t={error:O}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var x=new Uint8Array(u),_=c.length,E=0;E<_;E++){var A=c[E],S=A.getCodewords(),I=A.getNumDataCodewords();this.correctErrors(S,I);for(var N=0;N<I;N++)x[N*_+E]=S[N]}return Fj.decode(x)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new En}for(var i=0;i<t;i++)e[i]=r[i]},n}(),Gj=function(){function n(e){this.image=e,this.rectangleDetector=new Mg(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ie;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],c=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));var d=n.sampleGrid(this.image,r,i,a,o,c,u);return new ty(d,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ce(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ce(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),p=o,g=[a,t,r,i];return p>c&&(p=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),p>u&&(p=u,g[0]=r,g[1]=i,g[2]=a,g[3]=t),p>d&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),d=this.transitionsBetween(c,t),p=this.transitionsBetween(u,a);return d<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(c+1)*4),d=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),c=this.transitionsBetween(d,a);var p=new Ce(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Ce(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var x=this.transitionsBetween(u,p)+this.transitionsBetween(d,p),_=this.transitionsBetween(u,g)+this.transitionsBetween(d,g);return x>_?p:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,c*4),d=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,c=this.transitionsBetween(d,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var x,_;return u=n.shiftPoint(t,r,c*4),u=n.shiftPoint(u,a,o*4),x=n.shiftPoint(r,t,c*4),x=n.shiftPoint(x,i,o*4),d=n.shiftPoint(i,a,c*4),d=n.shiftPoint(d,r,o*4),_=n.shiftPoint(a,i,c*4),_=n.shiftPoint(_,t,o*4),[u,x,d,_]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,c){var u=ny.getInstance();return u.sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){var u=r;r=i,i=u,u=a,a=o,o=u}for(var d=Math.abs(a-r),p=Math.abs(o-i),g=-d/2,x=i<o?1:-1,_=r<a?1:-1,E=0,A=this.image.get(c?i:r,c?r:i),S=r,I=i;S!==a;S+=_){var N=this.image.get(c?I:S,c?S:I);if(N!==A&&(E++,A=N),g+=p,g>0){if(I===o)break;I+=x,g-=d}}return E},n}(),p0=function(){function n(){this.decoder=new zj}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Ht.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new Gj(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var c=r.getRawBytes(),u=new mr(r.getText(),c,8*c.length,i,De.DATA_MATRIX,Ft.currentTimeMillis()),d=r.getByteSegments();d!=null&&u.putMetadata(ar.BYTE_SEGMENTS,d);var p=r.getECLevel();return p!=null&&u.putMetadata(ar.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ie;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0],d=(u-c+1)/i,p=(o-a+1)/i;if(d<=0||p<=0)throw new ie;var g=i/2;a+=g,c+=g;for(var x=new ra(d,p),_=0;_<p;_++)for(var E=a+_*i,A=0;A<d;A++)e.get(c+A*i,E)&&x.set(A,_);return x},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ie;var o=i-e[0];if(o===0)throw new ie;return o},n.NO_POINTS=[],n}(),qj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){qj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new p0,t)||this}return e})(Ac);var ql;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(ql||(ql={}));var $j=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new hn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Pe;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(ql.L,"L",1),n.M=new n(ql.M,"M",0),n.Q=new n(ql.Q,"Q",3),n.H=new n(ql.H,"H",2),n}(),Wj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FC=function(){function n(e){this.errorCorrectionLevel=$j.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return et.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var c=Wj(n.FORMAT_INFO_DECODE_LOOKUP),u=c.next();!u.done;u=c.next()){var d=u.value,p=d[0];if(p===e||p===t)return new n(d[1]);var g=n.numBitsDiffering(e,p);g<a&&(o=d[1],a=g),e!==t&&(g=n.numBitsDiffering(t,p),g<a&&(o=d[1],a=g))}}catch(x){r={error:x}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Xj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=Xj(i),o=a.next();!o.done;o=a.next()){var c=o.value;r+=c.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),B=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Yj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ko=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var p=Yj(d),g=p.next();!g.done;g=p.next()){var x=g.value;c+=x.getCount()*(x.getDataCodewords()+u)}}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new xe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new xe}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Pe;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=FC.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ra(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new J(7,new B(1,19)),new J(10,new B(1,16)),new J(13,new B(1,13)),new J(17,new B(1,9))),new n(2,Int32Array.from([6,18]),new J(10,new B(1,34)),new J(16,new B(1,28)),new J(22,new B(1,22)),new J(28,new B(1,16))),new n(3,Int32Array.from([6,22]),new J(15,new B(1,55)),new J(26,new B(1,44)),new J(18,new B(2,17)),new J(22,new B(2,13))),new n(4,Int32Array.from([6,26]),new J(20,new B(1,80)),new J(18,new B(2,32)),new J(26,new B(2,24)),new J(16,new B(4,9))),new n(5,Int32Array.from([6,30]),new J(26,new B(1,108)),new J(24,new B(2,43)),new J(18,new B(2,15),new B(2,16)),new J(22,new B(2,11),new B(2,12))),new n(6,Int32Array.from([6,34]),new J(18,new B(2,68)),new J(16,new B(4,27)),new J(24,new B(4,19)),new J(28,new B(4,15))),new n(7,Int32Array.from([6,22,38]),new J(20,new B(2,78)),new J(18,new B(4,31)),new J(18,new B(2,14),new B(4,15)),new J(26,new B(4,13),new B(1,14))),new n(8,Int32Array.from([6,24,42]),new J(24,new B(2,97)),new J(22,new B(2,38),new B(2,39)),new J(22,new B(4,18),new B(2,19)),new J(26,new B(4,14),new B(2,15))),new n(9,Int32Array.from([6,26,46]),new J(30,new B(2,116)),new J(22,new B(3,36),new B(2,37)),new J(20,new B(4,16),new B(4,17)),new J(24,new B(4,12),new B(4,13))),new n(10,Int32Array.from([6,28,50]),new J(18,new B(2,68),new B(2,69)),new J(26,new B(4,43),new B(1,44)),new J(24,new B(6,19),new B(2,20)),new J(28,new B(6,15),new B(2,16))),new n(11,Int32Array.from([6,30,54]),new J(20,new B(4,81)),new J(30,new B(1,50),new B(4,51)),new J(28,new B(4,22),new B(4,23)),new J(24,new B(3,12),new B(8,13))),new n(12,Int32Array.from([6,32,58]),new J(24,new B(2,92),new B(2,93)),new J(22,new B(6,36),new B(2,37)),new J(26,new B(4,20),new B(6,21)),new J(28,new B(7,14),new B(4,15))),new n(13,Int32Array.from([6,34,62]),new J(26,new B(4,107)),new J(22,new B(8,37),new B(1,38)),new J(24,new B(8,20),new B(4,21)),new J(22,new B(12,11),new B(4,12))),new n(14,Int32Array.from([6,26,46,66]),new J(30,new B(3,115),new B(1,116)),new J(24,new B(4,40),new B(5,41)),new J(20,new B(11,16),new B(5,17)),new J(24,new B(11,12),new B(5,13))),new n(15,Int32Array.from([6,26,48,70]),new J(22,new B(5,87),new B(1,88)),new J(24,new B(5,41),new B(5,42)),new J(30,new B(5,24),new B(7,25)),new J(24,new B(11,12),new B(7,13))),new n(16,Int32Array.from([6,26,50,74]),new J(24,new B(5,98),new B(1,99)),new J(28,new B(7,45),new B(3,46)),new J(24,new B(15,19),new B(2,20)),new J(30,new B(3,15),new B(13,16))),new n(17,Int32Array.from([6,30,54,78]),new J(28,new B(1,107),new B(5,108)),new J(28,new B(10,46),new B(1,47)),new J(28,new B(1,22),new B(15,23)),new J(28,new B(2,14),new B(17,15))),new n(18,Int32Array.from([6,30,56,82]),new J(30,new B(5,120),new B(1,121)),new J(26,new B(9,43),new B(4,44)),new J(28,new B(17,22),new B(1,23)),new J(28,new B(2,14),new B(19,15))),new n(19,Int32Array.from([6,30,58,86]),new J(28,new B(3,113),new B(4,114)),new J(26,new B(3,44),new B(11,45)),new J(26,new B(17,21),new B(4,22)),new J(26,new B(9,13),new B(16,14))),new n(20,Int32Array.from([6,34,62,90]),new J(28,new B(3,107),new B(5,108)),new J(26,new B(3,41),new B(13,42)),new J(30,new B(15,24),new B(5,25)),new J(28,new B(15,15),new B(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new J(28,new B(4,116),new B(4,117)),new J(26,new B(17,42)),new J(28,new B(17,22),new B(6,23)),new J(30,new B(19,16),new B(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new J(28,new B(2,111),new B(7,112)),new J(28,new B(17,46)),new J(30,new B(7,24),new B(16,25)),new J(24,new B(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new J(30,new B(4,121),new B(5,122)),new J(28,new B(4,47),new B(14,48)),new J(30,new B(11,24),new B(14,25)),new J(30,new B(16,15),new B(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new J(30,new B(6,117),new B(4,118)),new J(28,new B(6,45),new B(14,46)),new J(30,new B(11,24),new B(16,25)),new J(30,new B(30,16),new B(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new J(26,new B(8,106),new B(4,107)),new J(28,new B(8,47),new B(13,48)),new J(30,new B(7,24),new B(22,25)),new J(30,new B(22,15),new B(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new J(28,new B(10,114),new B(2,115)),new J(28,new B(19,46),new B(4,47)),new J(28,new B(28,22),new B(6,23)),new J(30,new B(33,16),new B(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new J(30,new B(8,122),new B(4,123)),new J(28,new B(22,45),new B(3,46)),new J(30,new B(8,23),new B(26,24)),new J(30,new B(12,15),new B(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new B(3,117),new B(10,118)),new J(28,new B(3,45),new B(23,46)),new J(30,new B(4,24),new B(31,25)),new J(30,new B(11,15),new B(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new B(7,116),new B(7,117)),new J(28,new B(21,45),new B(7,46)),new J(30,new B(1,23),new B(37,24)),new J(30,new B(19,15),new B(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new B(5,115),new B(10,116)),new J(28,new B(19,47),new B(10,48)),new J(30,new B(15,24),new B(25,25)),new J(30,new B(23,15),new B(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new B(13,115),new B(3,116)),new J(28,new B(2,46),new B(29,47)),new J(30,new B(42,24),new B(1,25)),new J(30,new B(23,15),new B(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new B(17,115)),new J(28,new B(10,46),new B(23,47)),new J(30,new B(10,24),new B(35,25)),new J(30,new B(19,15),new B(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new B(17,115),new B(1,116)),new J(28,new B(14,46),new B(21,47)),new J(30,new B(29,24),new B(19,25)),new J(30,new B(11,15),new B(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new B(13,115),new B(6,116)),new J(28,new B(14,46),new B(23,47)),new J(30,new B(44,24),new B(7,25)),new J(30,new B(59,16),new B(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new B(12,121),new B(7,122)),new J(28,new B(12,47),new B(26,48)),new J(30,new B(39,24),new B(14,25)),new J(30,new B(22,15),new B(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new B(6,121),new B(14,122)),new J(28,new B(6,47),new B(34,48)),new J(30,new B(46,24),new B(10,25)),new J(30,new B(2,15),new B(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new B(17,122),new B(4,123)),new J(28,new B(29,46),new B(14,47)),new J(30,new B(49,24),new B(10,25)),new J(30,new B(24,15),new B(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new B(4,122),new B(18,123)),new J(28,new B(13,46),new B(32,47)),new J(30,new B(48,24),new B(14,25)),new J(30,new B(42,15),new B(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new B(20,117),new B(4,118)),new J(28,new B(40,47),new B(7,48)),new J(30,new B(43,24),new B(22,25)),new J(30,new B(10,15),new B(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new B(19,118),new B(6,119)),new J(28,new B(18,47),new B(31,48)),new J(30,new B(34,24),new B(34,25)),new J(30,new B(20,15),new B(61,16)))],n}(),qn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(qn||(qn={}));var ab=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[qn.DATA_MASK_000,new n(qn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[qn.DATA_MASK_001,new n(qn.DATA_MASK_001,function(e,t){return(e&1)===0})],[qn.DATA_MASK_010,new n(qn.DATA_MASK_010,function(e,t){return t%3===0})],[qn.DATA_MASK_011,new n(qn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[qn.DATA_MASK_100,new n(qn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[qn.DATA_MASK_101,new n(qn.DATA_MASK_101,function(e,t){return e*t%6===0})],[qn.DATA_MASK_110,new n(qn.DATA_MASK_110,function(e,t){return e*t%6<3})],[qn.DATA_MASK_111,new n(qn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),Kj=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new xe;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=FC.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new xe},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ko.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var c=ko.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(c=ko.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new xe},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=ab.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,c=new Uint8Array(t.getTotalCodewords()),u=0,d=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var x=0;x<i;x++)for(var _=o?i-1-x:x,E=0;E<2;E++)a.get(g-E,_)||(p++,d<<=1,this.bitMatrix.get(g-E,_)&&(d|=1),p===8&&(c[u++]=d,p=0,d=0));o=!o}if(u!==t.getTotalCodewords())throw new xe;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=ab.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),sb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,c;if(e.length!==t.getTotalCodewords())throw new Pe;var u=t.getECBlocksForLevel(r),d=0,p=u.getECBlocks();try{for(var g=sb(p),x=g.next();!x.done;x=g.next()){var _=x.value;d+=_.getCount()}}catch(U){i={error:U}}finally{try{x&&!x.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var E=new Array(d),A=0;try{for(var S=sb(p),I=S.next();!I.done;I=S.next())for(var _=I.value,N=0;N<_.getCount();N++){var O=_.getDataCodewords(),j=u.getECCodewordsPerBlock()+O;E[A++]=new n(O,new Uint8Array(j))}}catch(U){o={error:U}}finally{try{I&&!I.done&&(c=S.return)&&c.call(S)}finally{if(o)throw o.error}}for(var F=E[0].codewords.length,q=E.length-1;q>=0;){var P=E[q].codewords.length;if(P===F)break;q--}q++;for(var R=F-u.getECCodewordsPerBlock(),M=0,N=0;N<R;N++)for(var V=0;V<A;V++)E[V].codewords[N]=e[M++];for(var V=q;V<A;V++)E[V].codewords[R]=e[M++];for(var H=E[0].codewords.length,N=R;N<H;N++)for(var V=0;V<A;V++){var z=V<q?N:N+1;E[V].codewords[z]=e[M++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),oi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(oi||(oi={}));var $t=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Pe;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(oi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(oi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(oi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(oi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(oi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(oi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(oi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(oi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(oi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(oi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),Zj=function(){function n(){}return n.decode=function(e,t,r,i){var a=new UC(e),o=new Ke,c=new Array,u=-1,d=-1;try{var p=null,g=!1,x=void 0;do{if(a.available()<4)x=$t.TERMINATOR;else{var _=a.readBits(4);x=$t.forBits(_)}switch(x){case $t.TERMINATOR:break;case $t.FNC1_FIRST_POSITION:case $t.FNC1_SECOND_POSITION:g=!0;break;case $t.STRUCTURED_APPEND:if(a.available()<16)throw new xe;u=a.readBits(8),d=a.readBits(8);break;case $t.ECI:var E=n.parseECIValue(a);if(p=Dn.getCharacterSetECIByValue(E),p===null)throw new xe;break;case $t.HANZI:var A=a.readBits(4),S=a.readBits(x.getCharacterCountBits(t));A===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,S);break;default:var I=a.readBits(x.getCharacterCountBits(t));switch(x){case $t.NUMERIC:n.decodeNumericSegment(a,o,I);break;case $t.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,I,g);break;case $t.BYTE:n.decodeByteSegment(a,o,I,p,c,i);break;case $t.KANJI:n.decodeKanjiSegment(a,o,I);break;default:throw new xe}break}}while(x!==$t.TERMINATOR)}catch{throw new xe}return new J0(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),u,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new xe;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(fi.decode(i,dt.GB2312))}catch(u){throw new xe(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new xe;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(fi.decode(i,dt.SHIFT_JIS))}catch(u){throw new xe(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new xe;for(var c=new Uint8Array(r),u=0;u<r;u++)c[u]=e.readBits(8);var d;i===null?d=dt.guessEncoding(c,o):d=i.getName();try{t.append(fi.decode(c,d))}catch(p){throw new xe(p)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new xe;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new xe;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new xe;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new xe;var i=e.readBits(10);if(i>=1e3)throw new xe;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new xe;var a=e.readBits(7);if(a>=100)throw new xe;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new xe;var o=e.readBits(4);if(o>=10)throw new xe;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new xe},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),HC=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),ob=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jj=function(){function n(){this.rsDecoder=new e1(Pr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ra.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new Kj(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new HC(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,c=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),p=Qj.getDataBlocks(d,c,u),g=0;try{for(var x=ob(p),_=x.next();!_.done;_=x.next()){var E=_.value;g+=E.getNumDataCodewords()}}catch(q){r={error:q}}finally{try{_&&!_.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}var A=new Uint8Array(g),S=0;try{for(var I=ob(p),N=I.next();!N.done;N=I.next()){var E=N.value,O=E.getCodewords(),j=E.getNumDataCodewords();this.correctErrors(O,j);for(var F=0;F<j;F++)A[S++]=O[F]}}catch(q){a={error:q}}finally{try{N&&!N.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}return Zj.decode(A,c,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new En}for(var i=0;i<t;i++)e[i]=r[i]},n}(),eB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tB=function(n){eB(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,o,c)},e}(Ce),nB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rB=function(){function n(e,t,r,i,a,o,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),c=this.image,u=0;u<t;u++){var d=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var p=e;p<i&&!c.get(p,d);)p++;for(var g=0;p<i;){if(c.get(p,d))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,d,p);if(x!==null)return x}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;p++}if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,d,i);if(x!==null)return x}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var u=e;u>=0&&a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&c[1]<=r;)c[1]++,u++;if(u===o||c[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&c[2]<=r;)c[2]++,u++;if(c[2]>r)return NaN;var d=c[0]+c[1]+c[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,c,2*e[1],o);if(!isNaN(u)){var d=(e[0]+e[1]+e[2])/3;try{for(var p=nB(this.possibleCenters),g=p.next();!g.done;g=p.next()){var x=g.value;if(x.aboutEquals(d,u,c))return x.combineEstimate(u,c,d)}}catch(E){i={error:E}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var _=new tB(c,u,d);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null},n}(),iB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aB=function(n){iB(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,c,u,a)},e}(Ce),sB=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),ju=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oB=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Ht.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ht.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var u=!1,d=new Int32Array(5),p=c-1;p<a&&!u;p+=c){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var g=0,x=0;x<o;x++)if(i.get(x,p))(g&1)===1&&g++,d[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(d)){var _=this.handlePossibleCenter(d,p,x,r);if(_===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>d[2]&&(p+=E-d[2]-c,x=o-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;continue}g=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;else d[++g]++;else d[g]++;if(n.foundPatternCross(d)){var _=this.handlePossibleCenter(d,p,o,r);_===!0&&(c=d[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var A=this.selectBestPatterns();return Ce.orderBestPatterns(A),new sB(A)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,c=this.image;e>=o&&t>=o&&c.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=c.getHeight(),d=c.getWidth();for(o=1;e+o<u&&t+o<d&&c.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=d)return!1;for(;e+o<u&&t+o<d&&!c.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=d||a[3]>=r)return!1;for(;e+o<u&&t+o<d&&c.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){for(var u=a/7,d=!1,p=this.possibleCenters,g=0,x=p.length;g<x;g++){var _=p[g];if(_.aboutEquals(u,c,o)){p[g]=_.combineEstimate(c,o,u),d=!0;break}}if(!d){var E=new aB(o,c,u);p.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=ju(this.possibleCenters),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,c=this.possibleCenters.length;try{for(var u=ju(this.possibleCenters),d=u.next();!d.done;d=u.next()){var p=d.value;p.getCount()>=n.CENTER_QUORUM&&(a++,o+=p.getEstimatedModuleSize())}}catch(A){e={error:A}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var g=o/c,x=0;try{for(var _=ju(this.possibleCenters),E=_.next();!E.done;E=_.next()){var p=E.value;x+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(A){r={error:A}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}return x<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ie;var o=this.possibleCenters,c;if(a>3){var u=0,d=0;try{for(var p=ju(this.possibleCenters),g=p.next();!g.done;g=p.next()){var x=g.value,_=x.getEstimatedModuleSize();u+=_,d+=_*_}}catch(F){e={error:F}}finally{try{g&&!g.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}c=u/a;var E=Math.sqrt(d/a-c*c);o.sort(function(F,q){var P=Math.abs(q.getEstimatedModuleSize()-c),R=Math.abs(F.getEstimatedModuleSize()-c);return P<R?-1:P>R?1:0});for(var A=Math.max(.2*c,E),S=0;S<o.length&&o.length>3;S++){var I=o[S];Math.abs(I.getEstimatedModuleSize()-c)>A&&(o.splice(S,1),S--)}}if(o.length>3){var u=0;try{for(var N=ju(o),O=N.next();!O.done;O=N.next()){var j=O.value;u+=j.getEstimatedModuleSize()}}catch(q){r={error:q}}finally{try{O&&!O.done&&(i=N.return)&&i.call(N)}finally{if(r)throw r.error}}c=u/o.length,o.sort(function(q,P){if(P.getCount()===q.getCount()){var R=Math.abs(P.getEstimatedModuleSize()-c),M=Math.abs(q.getEstimatedModuleSize()-c);return R<M?1:R>M?-1:0}else return P.getCount()-q.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),lB=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ht.NEED_RESULT_POINT_CALLBACK);var t=new oB(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ie("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),c=ko.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7,d=null;if(c.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),x=1-3/u,_=Math.floor(t.getX()+x*(p-t.getX())),E=Math.floor(t.getY()+x*(g-t.getY())),A=4;A<=16;A<<=1)try{d=this.findAlignmentInRegion(a,_,E,A);break}catch(O){if(!(O instanceof ie))throw O}var S=n.createTransform(t,r,i,d,o),I=n.sampleGrid(this.image,S,o),N;return d===null?N=[i,t,r]:N=[i,t,r,d],new ty(I,N)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,c,u,d,p;return i!==null?(c=i.getX(),u=i.getY(),d=o-3,p=d):(c=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),d=o,p=o),LC.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,d,p,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=ny.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=yt.round(Ce.distance(e,t)/i),o=yt.round(Ce.distance(e,r)/i),c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new ie("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var c=Math.abs(r-e),u=Math.abs(i-t),d=-c/2,p=e<r?1:-1,g=t<i?1:-1,x=0,_=r+p,E=e,A=t;E!==_;E+=p){var S=a?A:E,I=a?E:A;if(x===1===this.image.get(S,I)){if(x===2)return yt.distance(E,A,e,t);x++}if(d+=u,d>0){if(A===i)break;A+=g,d-=c}}return x===2?yt.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-o<e*3)throw new ie("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-u<e*3)throw new ie("Alignment bottom exceeds estimated module size.");var p=new rB(this.image,o,u,c-o,d-u,e,this.resultPointCallback);return p.find()},n}(),m0=function(){function n(){this.decoder=new Jj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Ht.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new lB(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof HC&&r.getOther().applyMirroredCorrection(i);var c=new mr(r.getText(),r.getRawBytes(),void 0,i,De.QR_CODE,void 0),u=r.getByteSegments();u!==null&&c.putMetadata(ar.BYTE_SEGMENTS,u);var d=r.getECLevel();return d!==null&&c.putMetadata(ar.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(c.putMetadata(ar.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(ar.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ie;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0];if(c>=u||a>=o)throw new ie;if(o-a!==u-c&&(u=c+(o-a),u>=e.getWidth()))throw new ie;var d=Math.round((u-c+1)/i),p=Math.round((o-a+1)/i);if(d<=0||p<=0)throw new ie;if(p!==d)throw new ie;var g=Math.floor(i/2);a+=g,c+=g;var x=c+Math.floor((d-1)*i)-u;if(x>0){if(x>g)throw new ie;c-=x}var _=a+Math.floor((p-1)*i)-o;if(_>0){if(_>g)throw new ie;a-=_}for(var E=new ra(d,p),A=0;A<p;A++)for(var S=a+Math.floor(A*i),I=0;I<d;I++)e.get(c+Math.floor(I*i),S)&&E.set(I,A);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],c=!0,u=0;a<i&&o<r;){if(c!==t.get(a,o)){if(++u===5)break;c=!c}a++,o++}if(a===i||o===r)throw new ie;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),cB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mt=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return yt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=cB(e),c=o.next();!c.done;c=o.next()){var u=c.value;i[a++]=u}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Mn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),uB=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),fB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dB=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new uB(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,c=0,u=!1;o<t.getHeight();){var d=n.findVertices(t,o,c);if(d[0]==null&&d[3]==null){if(!u)break;u=!1,c=0;try{for(var p=(r=void 0,fB(a)),g=p.next();!g.done;g=p.next()){var x=g.value;x[1]!=null&&(o=Math.trunc(Math.max(o,x[1].getY()))),x[3]!=null&&(o=Math.max(o,Math.trunc(x[3].getY())))}}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(d),!e)break;d[2]!=null?(c=Math.trunc(d[2].getX()),o=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var c=new Array(4),u=!1,d=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,o,d);if(p!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,o,d);if(g!=null)p=g;else{i++;break}}c[0]=new Ce(p[0],i),c[1]=new Ce(p[1],i),u=!0;break}}var x=i+1;if(u){for(var _=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);x<t;x++){var p=n.findGuardPattern(e,g[0],x,r,!1,o,d);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,_=0;else{if(_>n.SKIPPED_ROW_COUNT_MAX)break;_++}}x-=_+1,c[2]=new Ce(g[0],x),c[3]=new Ce(g[1],x)}return x-i<n.BARCODE_MIN_HEIGHT&&Mn.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,o,c){Mn.fillWithin(c,0,c.length,0);for(var u=t,d=0;e.get(u,r)&&u>0&&d++<n.MAX_PIXEL_DRIFT;)u--;for(var p=u,g=0,x=o.length,_=a;p<i;p++){var E=e.get(p,r);if(E!==_)c[g]++;else{if(g===x-1){if(n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,p]);u+=c[0]+c[1],Ft.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,_=!_}}return g===x-1&&n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return 1/0;var u=a/o;r*=u;for(var d=0,p=0;p<i;p++){var g=e[p],x=t[p]*u,_=g>x?g-x:x-g;if(_>r)return 1/0;d+=_}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),hB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Do=function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ft.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=hB(this.coefficients),o=a.next();!o.done;o=a.next()){var c=o.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],d=this.coefficients.length,p=1;p<d;p++)u=this.field.add(this.field.multiply(e,u),this.coefficients[p]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Ft.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=this.field.add(t[c-o],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=0;c<r;c++)for(var u=t[c],d=0;d<a;d++)o[c+d]=this.field.add(o[c+d],this.field.multiply(u,i[d]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Ke,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),pB=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new kC;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),mB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gB=function(n){mB(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Do(i,new Int32Array([0])),i.one=new Do(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Do(this,i)},e.PDF417_GF=new e(mt.NUMBER_OF_CODEWORDS,3),e}(pB),vB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yB=function(){function n(){this.field=gB.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Do(this.field,e),c=new Int32Array(t),u=!1,d=t;d>0;d--){var p=o.evaluateAt(this.field.exp(d));c[t-d]=p,p!==0&&(u=!0)}if(!u)return 0;var g=this.field.getOne();if(r!=null)try{for(var x=vB(r),_=x.next();!_.done;_=x.next()){var E=_.value,A=this.field.exp(e.length-1-E),S=new Do(this.field,new Int32Array([this.field.subtract(0,A),1]));g=g.multiply(S)}}catch(R){i={error:R}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}for(var I=new Do(this.field,c),N=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),I,t),O=N[0],j=N[1],F=this.findErrorLocations(O),q=this.findErrorMagnitudes(j,O,F),d=0;d<F.length;d++){var P=e.length-1-this.field.log(F[d]);if(P<0)throw En.getChecksumInstance();e[P]=this.field.subtract(e[P],q[d])}return F.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,c=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var d=a,p=c;if(a=o,c=u,a.isZero())throw En.getChecksumInstance();o=d;for(var g=this.field.getZero(),x=a.getCoefficient(a.getDegree()),_=this.field.inverse(x);o.getDegree()>=a.getDegree()&&!o.isZero();){var E=o.getDegree()-a.getDegree(),A=this.field.multiply(o.getCoefficient(o.getDegree()),_);g=g.add(this.field.buildMonomial(E,A)),o=o.subtract(a.multiplyByMonomial(E,A))}u=g.multiply(c).subtract(p).negative()}var S=u.getCoefficient(0);if(S===0)throw En.getChecksumInstance();var I=this.field.inverse(S),N=u.multiply(I),O=o.multiply(I);return[N,O]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw En.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var c=new Do(this.field,a),u=r.length,d=new Int32Array(u),o=0;o<u;o++){var p=this.field.inverse(r[o]),g=this.field.subtract(0,e.evaluateAt(p)),x=this.field.inverse(c.evaluateAt(p));d[o]=this.field.multiply(g,x)}return d},n}(),Lg=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,c=i==null||a==null;if(o&&c)throw new ie;o?(t=new Ce(0,i.getY()),r=new Ce(0,a.getY())):c&&(i=new Ce(e.getWidth()-1,t.getY()),a=new Ce(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,d=Math.trunc(u.getY()-e);d<0&&(d=0);var p=new Ce(u.getX(),d);r?i=p:o=p}if(t>0){var g=r?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+t);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);var _=new Ce(g.getX(),x);r?a=_:c=_}return new n(this.image,i,a,o,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),xB=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),iy=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,c,u,d,p,g){if(o==="%%")return"%";if(t[++r]!==void 0){o=d?parseInt(d.substr(1)):void 0;var x=p?parseInt(p.substr(1)):void 0,_;switch(g){case"s":_=t[r];break;case"c":_=t[r][0];break;case"f":_=parseFloat(t[r]).toFixed(o);break;case"p":_=parseFloat(t[r]).toPrecision(o);break;case"e":_=parseFloat(t[r]).toExponential(o);break;case"x":_=parseInt(t[r]).toString(x||16);break;case"d":_=parseFloat(parseInt(t[r],x||10).toPrecision(o)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(x);for(var E=parseInt(u),A=u&&u[0]+""=="0"?"0":" ";_.length<E;)_=c!==void 0?_+A:A+_;return _}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),_B=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zC=function(){function n(e){this.boundingBox=new Lg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new iy,i=0;try{for(var a=_B(this.codewords),o=a.next();!o.done;o=a.next()){var c=o.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),wB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EB=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},Wu=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,x){var _={getKey:function(){return g},getValue:function(){return x}};_.getValue()>r?(r=_.getValue(),i=[],i.push(_.getKey())):_.getValue()===r&&i.push(_.getKey())};try{for(var o=wB(this.values.entries()),c=o.next();!c.done;c=o.next()){var u=EB(c.value,2),d=u[0],p=u[1];a(d,p)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return mt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),bB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lb=function(n){bB(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Gm(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=-1,p=1,g=0,x=c;x<u;x++)if(r[x]!=null){var _=r[x],E=_.getRowNumber()-d;if(E===0)g++;else if(E===1)p=Math.max(p,g),g=1,d=_.getRowNumber();else if(E<0||_.getRowNumber()>=t.getRowCount()||E>x)r[x]=null;else{var A=void 0;p>2?A=(p-2)*E:A=E;for(var S=A>=x,I=1;I<=A&&!S;I++)S=r[x-I]!=null;S?r[x]=null:(d=_.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Gm(this.getCodewords()),c=o.next();!c.done;c=o.next()){var u=c.value;if(u!=null){var d=u.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),d=-1,p=o;p<c;p++)if(u[p]!=null){var g=u[p];g.setRowNumberAsRowIndicatorColumn();var x=g.getRowNumber()-d;x===0||(x===1?d=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?u[p]=null:d=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new Wu,o=new Wu,c=new Wu,u=new Wu;try{for(var d=Gm(i),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var x=g.getValue()%30,_=g.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:o.setValue(x*3+1);break;case 1:u.setValue(x/3),c.setValue(x%3);break;case 2:a.setValue(x+1);break}}}}catch(A){t={error:A}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<mt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>mt.MAX_ROWS_IN_BARCODE)return null;var E=new xB(a.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(zC),AB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SB=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=mt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=c[t],d[3]=u[t],t>0&&(d[0]=r[t-1],d[4]=c[t-1],d[5]=u[t-1]),t>1&&(d[8]=r[t-2],d[10]=c[t-2],d[11]=u[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=c[t+1],d[7]=u[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=c[t+2],d[13]=u[t+2]);try{for(var p=AB(d),g=p.next();!g.done;g=p.next()){var x=g.value;if(n.adjustRowNumber(o,x))return}}catch(_){i={error:_}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new iy,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),TB=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),CB=function(){function n(){}return n.initialize=function(){for(var e=0;e<mt.SYMBOL_TABLE.length;e++)for(var t=mt.SYMBOL_TABLE[e],r=t&1,i=0;i<mt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(mt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][mt.BARS_IN_MODULE-i-1]=Math.fround(a/mt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=yt.sum(e),r=new Int32Array(mt.BARS_IN_MODULE),i=0,a=0,o=0;o<mt.MODULES_IN_CODEWORD;o++){var c=t/(2*mt.MODULES_IN_CODEWORD)+o*t/mt.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return mt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=yt.sum(e),r=new Array(mt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=Pg.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var u=0,d=n.RATIOS_TABLE[c],p=0;p<mt.BARS_IN_MODULE;p++){var g=Math.fround(d[p]-r[p]);if(u+=Math.fround(g*g),u>=a)break}u<a&&(a=u,o=mt.SYMBOL_TABLE[c])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(mt.SYMBOL_TABLE.length).map(function(e){return new Array(mt.BARS_IN_MODULE)}),n}(),IB=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),cb=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),NB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RB=function(n){NB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Br),OB=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new RB;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new ey;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),DB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PB=function(n){DB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Br),MB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kB=function(n){MB(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Pe("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new PB;i=et.MAX_VALUE}this.buf=Mn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new ey;this.ensureCapacity(this.count+i),Ft.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Mn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(OB),kt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(kt||(kt={}));function GC(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var _h;function Is(n){if(typeof _h>"u"&&(_h=GC()),_h===null)throw new Error("BigInt is not supported!");return _h(n)}function LB(){var n=[];n[0]=Is(1);var e=Is(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var jB=function(){function n(){}return n.decode=function(e,t){var r=new Ke(""),i=Dn.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],c=new IB;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Dn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new xe;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw xe.getFormatInstance()}if(r.length()===0)throw xe.getFormatInstance();var u=new J0(null,r.toString(),null,t);return u.setOther(c),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw xe.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(et.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Ke;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new Ke;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Ke;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Ke;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new Ke;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(et.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var x=new Ke;t=n.numericCompaction(e,t+1,x),r.setTimestamp(cb.parseLong(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var _=new Ke;t=n.numericCompaction(e,t+1,_),r.setChecksum(et.parseInt(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new Ke;t=n.numericCompaction(e,t+1,E),r.setFileSize(cb.parseLong(E.toString()));break;default:throw xe.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw xe.getFormatInstance()}if(c!==-1){var A=t-c;r.isLastSegment()&&A--,r.setOptionalData(Mn.copyOfRange(e,c,c+A))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,c=!1;t<e[0]&&!c;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=kt.ALPHA,o=kt.ALPHA,c=0;c<r;){var u=e[c],d="";switch(a){case kt.ALPHA:if(u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.LL:a=kt.LOWER;break;case n.ML:a=kt.MIXED;break;case n.PS:o=a,a=kt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=kt.ALPHA;break}break;case kt.LOWER:if(u<26)d=String.fromCharCode(97+u);else switch(u){case 26:d=" ";break;case n.AS:o=a,a=kt.ALPHA_SHIFT;break;case n.ML:a=kt.MIXED;break;case n.PS:o=a,a=kt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=kt.ALPHA;break}break;case kt.MIXED:if(u<n.PL)d=n.MIXED_CHARS[u];else switch(u){case n.PL:a=kt.PUNCT;break;case 26:d=" ";break;case n.LL:a=kt.LOWER;break;case n.AL:a=kt.ALPHA;break;case n.PS:o=a,a=kt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=kt.ALPHA;break}break;case kt.PUNCT:if(u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=kt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=kt.ALPHA;break}break;case kt.ALPHA_SHIFT:if(a=o,u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=kt.ALPHA;break}break;case kt.PUNCT_SHIFT:if(a=o,u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=kt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=kt.ALPHA;break}break}d!==""&&i.append(d),c++}},n.byteCompaction=function(e,t,r,i,a){var o=new kB,c=0,u=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=t[i++];i<t[0]&&!d;)switch(p[c++]=g,u=900*u+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(c%5===0&&c>0){for(var x=0;x<6;++x)o.write(Number(Is(u)>>Is(8*(5-x))));u=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=g);for(var _=0;_<c;_++)o.write(p[_]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(c%5===0&&c>0){for(var x=0;x<6;++x)o.write(Number(Is(u)>>Is(8*(5-x))));u=0,c=0}}break}return a.append(fi.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Is(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Is(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new xe;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=GC()?LB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),Bu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BB=function(){function n(){}return n.decode=function(e,t,r,i,a,o,c){for(var u=new Lg(e,t,r,i,a),d=null,p=null,g,x=!0;;x=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,u,t,!0,o,c)),i!=null&&(p=n.getRowIndicatorColumn(e,u,i,!1,o,c)),g=n.merge(d,p),g==null)throw ie.getNotFoundInstance();var _=g.getBoundingBox();if(x&&_!=null&&(_.getMinY()<u.getMinY()||_.getMaxY()>u.getMaxY()))u=_;else break}g.setBoundingBox(u);var E=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,d),g.setDetectionResultColumn(E,p);for(var A=d!=null,S=1;S<=E;S++){var I=A?S:E-S;if(g.getDetectionResultColumn(I)===void 0){var N=void 0;I===0||I===E?N=new lb(u,I===0):N=new zC(u),g.setDetectionResultColumn(I,N);for(var O=-1,j=O,F=u.getMinY();F<=u.getMaxY();F++){if(O=n.getStartColumn(g,I,F,A),O<0||O>u.getMaxX()){if(j===-1)continue;O=j}var q=n.detectCodeword(e,u.getMinX(),u.getMaxX(),A,O,F,o,c);q!=null&&(N.setCodeword(F,q),j=O,o=Math.min(o,q.getWidth()),c=Math.max(c,q.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Lg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new SB(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var c=Bu(i),u=c.next();!u.done;u=c.next()){var d=u.value;if(o+=a-d,d>0)break}}catch(_){t={error:_}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),g=0;o>0&&p[g]==null;g++)o--;for(var x=0,g=i.length-1;g>=0&&(x+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;x>0&&p[g]==null;g--)x--;return e.getBoundingBox().addMissingRows(o,x,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Bu(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=Math.max(i,c)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var c=new lb(t,i),u=0;u<2;u++)for(var d=u===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=d){var x=n.detectCodeword(e,0,e.getWidth(),i,p,g,a,o);x!=null&&(c.setCodeword(g,x),i?p=x.getStartX():p=x.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>mt.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var u=0;u<e.getBarcodeColumnCount();u++){var d=t[c][u+1].getValue(),p=c*e.getBarcodeColumnCount()+u;d.length===0?r.push(p):d.length===1?i[p]=d[0]:(o.push(p),a.push(d))}for(var g=new Array(a.length),x=0;x<g.length;x++)g[x]=a[x];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,mt.toIntArray(r),mt.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),c=100;c-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(p){var d=p instanceof En;if(!d)throw p}if(o.length===0)throw En.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw En.getChecksumInstance()}throw En.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++)o[c][u]=new Wu;var d=0;try{for(var p=Bu(e.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var x=g.value;if(x!=null)try{for(var _=(i=void 0,Bu(x.getCodewords())),E=_.next();!E.done;E=_.next()){var A=E.value;if(A!=null){var S=A.getRowNumber();if(S>=0){if(S>=o.length)continue;o[S][d].setValue(A.getValue())}}}}catch(I){i={error:I}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}d++}}catch(I){t={error:I}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,c=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var p=(a=void 0,Bu(e.getDetectionResultColumn(t).getCodewords())),g=p.next();!g.done;g=p.next()){var x=g.value;if(x!=null)return(i?x.getEndX():x.getStartX())+c*d*(x.getEndX()-x.getStartX())}}catch(_){a={error:_}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,c,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var d=n.getModuleBitCount(e,t,r,i,a,o);if(d==null)return null;var p,g=yt.sum(d);if(i)p=a+g;else{for(var x=0;x<d.length/2;x++){var _=d[x];d[x]=d[d.length-1-x],d[d.length-1-x]=_}p=a,a=p-g}if(!n.checkCodewordSkew(g,c,u))return null;var E=CB.getDecodedValue(d),A=mt.getCodeword(E);return A===-1?null:new TB(a,p,n.getCodewordBucketNumber(E),A)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var c=a,u=new Int32Array(8),d=0,p=i?1:-1,g=i;(i?c<r:c>=t)&&d<u.length;)e.get(c,o)===g?(u[d]++,c+=p):(d++,g=!g);return d===u.length||c===(i?r:t)&&d===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var c=a,u=i?-1:1,d=0;d<2;d++){for(;(i?c>=t:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=u}u=-u,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw xe.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=jB.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw En.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw xe.getFormatInstance();var r=e[0];if(r>e.length)throw xe.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw xe.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new iy,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new yB,n}(),VB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g0=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ie.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof xe||r instanceof En?ie.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,c=dB.detectMultiple(e,t,r);try{for(var u=VB(c.getPoints()),d=u.next();!d.done;d=u.next()){var p=d.value,g=BB.decode(c.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),x=new mr(g.getText(),g.getRawBytes(),void 0,p,De.PDF_417);x.putMetadata(ar.ERROR_CORRECTION_LEVEL,g.getECLevel());var _=g.getOther();_!=null&&x.putMetadata(ar.PDF417_EXTRA_METADATA,_),o.push(x)}}catch(E){i={error:E}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?et.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*mt.MODULES_IN_CODEWORD/mt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),UB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ub=function(n){UB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Br),fb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qC=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Ht.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ht.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===De.UPC_A||o===De.UPC_E||o===De.EAN_13||o===De.EAN_8||o===De.CODABAR||o===De.CODE_39||o===De.CODE_93||o===De.CODE_128||o===De.ITF||o===De.RSS_14||o===De.RSS_EXPANDED});a&&!t&&i.push(new Gl(e)),r.includes(De.QR_CODE)&&i.push(new m0),r.includes(De.DATA_MATRIX)&&i.push(new p0),r.includes(De.AZTEC)&&i.push(new d0),r.includes(De.PDF_417)&&i.push(new g0),a&&t&&i.push(new Gl(e))}i.length===0&&(t||i.push(new Gl(e)),i.push(new m0),i.push(new p0),i.push(new d0),i.push(new g0),t&&i.push(new Gl(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=fb(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new ub("No readers where selected, nothing can be read.");try{for(var i=fb(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(c){if(c instanceof ub)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ie("No MultiFormat Readers were able to detect the code.")},n}(),FB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){FB(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new qC;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Ac);var HB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){HB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new g0,t)||this}return e})(Ac);var zB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){zB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new m0,t)||this}return e})(Ac);var jg;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(jg||(jg={}));const wh=jg;var $C=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new js(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new js(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Pe("No error correction bytes");var r=e.length-t;if(r<=0)throw new Pe("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Ft.arraycopy(e,0,a,0,r);var o=new js(this.field,a);o=o.multiplyByMonomial(t,1);for(var c=o.divide(i)[1],u=c.getCoefficients(),d=t-u.length,p=0;p<d;p++)e[r+p]=0;Ft.arraycopy(u,0,e,r+d,u.length)},n}(),Xu=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var c=r[o],u=0;u<i-1;u++){var d=c[u];d===c[u+1]&&d===r[o+1][u]&&d===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=0;c<i;c++){var u=r[o];c+6<i&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(n.isWhiteHorizontal(u,c-4,c)||n.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(n.isWhiteVertical(r,c,o-4,o)||n.isWhiteVertical(r,c,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=r[o],u=0;u<i;u++)c[u]===1&&t++;var d=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-d)*10/d);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Pe("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),c=0;c<i;c++){for(var u=0,d=-1,p=0;p<a;p++){var g=t?o[c][p]:o[p][c];g===d?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,d=g)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),GB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qB=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=GB(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Mn.fill(o,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],c=0,u=this.width;c<u;++c)if(a[c]!==o[c])return!1;return!0},n.prototype.toString=function(){for(var e=new Ke,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Bg=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Ke;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),$B=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qt=function(n){$B(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Br),db=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Xn;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var c=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],d=u[0],p=u[1];if(r.setBoolean(d,p,c),a<8){var g=r.getWidth()-a-1,x=8;r.setBoolean(g,x,c)}else{var g=8,x=r.getHeight()-7+(a-8);r.setBoolean(g,x,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Xn;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(var u=0;u<2;++u){var d=o-u;if(n.isEmpty(r.get(d,c))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&Xu.getDataMaskBit(t,d,c)&&(p=!p),r.setBoolean(d,c,p)}}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new qt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-et.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Pe("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Bg.isValidMaskPattern(t))throw new qt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Xn;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new qt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new qt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new qt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new qt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new qt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var c=i[a];if(c>=0)for(var u=0;u!==o;u++){var d=i[u];d>=0&&n.isEmpty(t.get(d,c))&&n.embedPositionAdjustmentPattern(d-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),WB=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),hb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Xu.applyMaskPenaltyRule1(e)+Xu.applyMaskPenaltyRule2(e)+Xu.applyMaskPenaltyRule3(e)+Xu.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(wh.CHARACTER_SET)!==void 0;a&&(i=r.get(wh.CHARACTER_SET).toString());var o=this.chooseMode(e,i),c=new Xn;if(o===$t.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=Dn.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,c)}this.appendModeInfo(o,c);var d=new Xn;this.appendBytes(e,o,d,i);var p;if(r!==null&&r.get(wh.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(wh.QR_VERSION).toString(),10);p=ko.getVersionForNumber(g);var x=this.calculateBitsNeeded(o,c,d,p);if(!this.willFit(x,p,t))throw new qt("Data too big for requested version")}else p=this.recommendVersion(t,o,c,d);var _=new Xn;_.appendBitArray(c);var E=o===$t.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(E,p,o,_),_.appendBitArray(d);var A=p.getECBlocksForLevel(t),S=p.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(S,_);var I=this.interleaveWithECBytes(_,p.getTotalCodewords(),S,A.getNumBlocks()),N=new Bg;N.setECLevel(t),N.setMode(o),N.setVersion(p);var O=p.getDimensionForVersion(),j=new qB(O,O),F=this.chooseMaskPattern(I,t,p,j);return N.setMaskPattern(F),db.buildMatrix(I,t,p,F,j),N.setMatrix(j),N},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,ko.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Dn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return $t.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return $t.BYTE}return i?$t.ALPHANUMERIC:r?$t.NUMERIC:$t.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=fi.encode(e,Dn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,c=0;c<Bg.NUM_MASK_PATTERNS;c++){db.buildMatrix(e,t,r,c,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=c)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=ko.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new qt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),c=i-o,u=(e+7)/8;return c>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new qt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new qt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new qt("Block ID too large");var c=e%r,u=r-c,d=Math.floor(e/r),p=d+1,g=Math.floor(t/r),x=g+1,_=d-g,E=p-x;if(_!==E)throw new qt("EC bytes mismatch");if(r!==u+c)throw new qt("RS blocks mismatch");if(e!==(g+_)*u+(x+E)*c)throw new qt("Total bytes mismatch");i<u?(a[0]=g,o[0]=_):(a[0]=x,o[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,c,u;if(e.getSizeInBytes()!==r)throw new qt("Number of bits and data bytes does not match");for(var d=0,p=0,g=0,x=new Array,_=0;_<i;++_){var E=new Int32Array(1),A=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,_,E,A);var S=E[0],I=new Uint8Array(S);e.toBytes(8*d,I,0,S);var N=n.generateECBytes(I,A[0]);x.push(new WB(I,N)),p=Math.max(p,S),g=Math.max(g,N.length),d+=E[0]}if(r!==d)throw new qt("Data bytes does not match offset");for(var O=new Xn,_=0;_<p;++_)try{for(var j=(a=void 0,hb(x)),F=j.next();!F.done;F=j.next()){var q=F.value,I=q.getDataBytes();_<I.length&&O.appendBits(I[_],8)}}catch(V){a={error:V}}finally{try{F&&!F.done&&(o=j.return)&&o.call(j)}finally{if(a)throw a.error}}for(var _=0;_<g;++_)try{for(var P=(c=void 0,hb(x)),R=P.next();!R.done;R=P.next()){var q=R.value,N=q.getErrorCorrectionBytes();_<N.length&&O.appendBits(N[_],8)}}catch(V){c={error:V}}finally{try{R&&!R.done&&(u=P.return)&&u.call(P)}finally{if(c)throw c.error}}if(t!==O.getSizeInBytes())throw new qt("Interleaving error: "+t+" and "+O.getSizeInBytes()+" differ.");return O},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new $C(Pr.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new qt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case $t.NUMERIC:n.appendNumericBytes(e,r);break;case $t.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case $t.BYTE:n.append8BitBytes(e,r,i);break;case $t.KANJI:n.appendKanjiBytes(e,r);break;default:throw new qt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new qt;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new qt;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=fi.encode(e,r)}catch(u){throw new qt(u)}for(var a=0,o=i.length;a!==o;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=fi.encode(e,Dn.SJIS)}catch(g){throw new qt(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,c=r[a+1]&255,u=o<<8&4294967295|c,d=-1;if(u>=33088&&u<=40956?d=u-33088:u>=57408&&u<=60351&&(d=u-49472),d===-1)throw new qt("Invalid byte sequence");var p=(d>>8)*192+(d&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits($t.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Dn.UTF8.getName(),n})();var XB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){XB(e,n);function e(t,r,i,a,o,c,u,d){var p=n.call(this,c,u)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=o,a+c>r||o+u>i)throw new Pe("Crop rectangle does not fit within image data.");return d&&p.reverseHorizontal(c,u),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ft.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ft.arraycopy(this.yuvData,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Ft.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var u=c*t,d=0;d<t;d++){var p=a[o+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+d]=4278190080|p*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var c=o+t/2,u=o,d=o+t-1;u<c;u++,d--){var p=i[u];i[u]=i[d],i[d]=p}},e.prototype.invert=function(){return new Z0(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Vf);var YB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){YB(e,n);function e(t,r,i,a,o,c,u){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=o,d.left=c,d.top=u,t.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),x=0;x<p;x++){var _=t[x],E=_>>16&255,A=_>>7&510,S=_&255;g[x]=(E+A+S)/4&255}d.luminances=g}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),o===void 0&&(d.dataHeight=i),c===void 0&&(d.left=0),u===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Pe("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ft.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ft.arraycopy(this.luminances,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Ft.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Z0(this)},e})(Vf);var KB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QB=function(n){KB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Dn),ZB=function(){function n(){}return n.ISO_8859_1=Dn.ISO8859_1,n}(),Vg,JB=301,eV=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=JB);return{LOG:n,ALOG:e}};Vg=eV([],[]),Vg.LOG;Vg.ALOG;var pb;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(pb||(pb={}));var mb=129,WC=230,tV=231,nV=235,rV=236,iV=237,aV=238,sV=239,oV=240,qm=254,lV=254,gb="[)>05",vb="[)>06",yb="",Nt=0,nr=1,Ar=2,Rn=3,$n=4,ur=5,cV=function(){function n(){}return n.prototype.getEncodingMode=function(){return Nt},n.prototype.encode=function(e){var t=bi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ur:e.writeCodeword(tV),e.signalEncoderChange(ur);return;case nr:e.writeCodeword(WC),e.signalEncoderChange(nr);return;case Rn:e.writeCodeword(aV),e.signalEncoderChange(Rn);break;case Ar:e.writeCodeword(sV),e.signalEncoderChange(Ar);break;case $n:e.writeCodeword(oV),e.signalEncoderChange($n);break;default:throw new Error("Illegal mode: "+i)}else bi.isExtendedASCII(r)?(e.writeCodeword(nV),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(bi.isDigit(e)&&bi.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),uV=function(){function n(){}return n.prototype.getEncodingMode=function(){return ur},n.prototype.encode=function(e){var t=new Ke;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Nt);break}}var a=t.length()-1,o=1,c=e.getCodewordCount()+a+o;e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,dt.getCharAt(a));else if(a<=1555)t.setCharAt(0,dt.getCharAt(Math.floor(a/250)+249)),t.insert(1,dt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),ay=function(){function n(){}return n.prototype.getEncodingMode=function(){return nr},n.prototype.encodeMaximal=function(e){for(var t=new Ke,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(u);var d=e.getSymbolInfo().getDataCapacity()-u,p=Math.floor(t.length()%3);(p===2&&d!==2||p===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(WC),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Ke;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new Ke;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var d=t.length();if(d%3===0){var p=bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(Nt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(qm)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(qm),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(qm)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Nt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Ke;return a.append(r),a.append(i),a.toString()},n}(),fV=function(){function n(){}return n.prototype.getEncodingMode=function(){return $n},n.prototype.encode=function(e){for(var t=new Ke;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Nt);break}}}t.append(dt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,c=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),d=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}d?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(c)}finally{e.signalEncoderChange(Nt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(dt.getCharAt(e-64)):bi.illegalCharacter(dt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+o,u=c>>16&255,d=c>>8&255,p=c&255,g=new Ke;return g.append(u),t>=2&&g.append(d),t>=3&&g.append(p),g.toString()},n}(),dV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wt=function(){function n(e,t,r,i,a,o,c,u){c===void 0&&(c=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=c,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=hV(mV),d=u.next();!d.done;d=u.next()){var p=d.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(g){o={error:g}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),pV=function(n){dV(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(wt),mV=[new wt(!1,3,5,8,8,1),new wt(!1,5,7,10,10,1),new wt(!0,5,7,16,6,1),new wt(!1,8,10,12,12,1),new wt(!0,10,11,14,6,2),new wt(!1,12,12,14,14,1),new wt(!0,16,14,24,10,1),new wt(!1,18,14,16,16,1),new wt(!1,22,18,18,18,1),new wt(!0,22,18,16,10,2),new wt(!1,30,20,20,20,1),new wt(!0,32,24,16,14,2),new wt(!1,36,24,22,22,1),new wt(!1,44,28,24,24,1),new wt(!0,49,28,22,14,2),new wt(!1,62,36,14,14,4),new wt(!1,86,42,16,16,4),new wt(!1,114,48,18,18,4),new wt(!1,144,56,20,20,4),new wt(!1,174,68,22,22,4),new wt(!1,204,84,24,24,4,102,42),new wt(!1,280,112,14,14,16,140,56),new wt(!1,368,144,16,16,16,92,36),new wt(!1,456,192,18,18,16,114,48),new wt(!1,576,224,20,20,16,144,56),new wt(!1,696,272,22,22,16,174,68),new wt(!1,816,336,24,24,16,136,56),new wt(!1,1050,408,18,18,36,175,68),new wt(!1,1304,496,20,20,36,163,62),new pV],gV=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new Ke,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new Ke,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=wt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),vV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yV=function(n){vV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Rn},e.prototype.encode=function(t){for(var r=new Ke;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=bi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(Nt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):bi.illegalCharacter(dt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(lV),t.getNewEncoding()<0&&t.signalEncoderChange(Nt)},e}(ay),xV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_V=function(n){xV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ar},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(ay),bi=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=mb+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new ay,c=[new cV,o,new _V,new yV,new fV,new uV],u=new gV(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(gb)&&e.endsWith(yb)?(u.writeCodeword(rV),u.setSkipAtEnd(2),u.pos+=gb.length):e.startsWith(vb)&&e.endsWith(yb)&&(u.writeCodeword(iV),u.setSkipAtEnd(2),u.pos+=vb.length);var d=Nt;for(a&&(o.encodeMaximal(u),d=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)c[d].encode(u),u.getNewEncoding()>=0&&(d=u.getNewEncoding(),u.resetEncoderSignal());var p=u.getCodewordCount();u.updateSymbolInfo();var g=u.getSymbolInfo().getDataCapacity();p<g&&d!==Nt&&d!==ur&&d!==$n&&u.writeCodeword("þ");var x=u.getCodewords();for(x.length()<g&&x.append(mb);x.length()<g;)x.append(this.randomize253State(x.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Rn&&i===Rn){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Nt}else if(r===$n&&i===$n){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Nt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Nt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),c=[];;){if(t+a===e.length){Mn.fill(o,0),Mn.fill(c,0);var u=this.findMinimums(i,c,et.MAX_VALUE,o),d=this.getMinimumCount(o);if(c[Nt]===u)return Nt;if(d===1){if(o[ur]>0)return ur;if(o[$n]>0)return $n;if(o[Ar]>0)return Ar;if(o[Rn]>0)return Rn}return nr}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[Nt]+=.5:this.isExtendedASCII(p)?(i[Nt]=Math.ceil(i[Nt]),i[Nt]+=2):(i[Nt]=Math.ceil(i[Nt]),i[Nt]++),this.isNativeC40(p)?i[nr]+=2/3:this.isExtendedASCII(p)?i[nr]+=8/3:i[nr]+=4/3,this.isNativeText(p)?i[Ar]+=2/3:this.isExtendedASCII(p)?i[Ar]+=8/3:i[Ar]+=4/3,this.isNativeX12(p)?i[Rn]+=2/3:this.isExtendedASCII(p)?i[Rn]+=13/3:i[Rn]+=10/3,this.isNativeEDIFACT(p)?i[$n]+=3/4:this.isExtendedASCII(p)?i[$n]+=17/4:i[$n]+=13/4,this.isSpecialB256(p)?i[ur]+=4:i[ur]++,a>=4){if(Mn.fill(o,0),Mn.fill(c,0),this.findMinimums(i,c,et.MAX_VALUE,o),c[Nt]<this.min(c[ur],c[nr],c[Ar],c[Rn],c[$n]))return Nt;if(c[ur]<c[Nt]||c[ur]+1<this.min(c[nr],c[Ar],c[Rn],c[$n]))return ur;if(c[$n]+1<this.min(c[ur],c[nr],c[Ar],c[Rn],c[Nt]))return $n;if(c[Ar]+1<this.min(c[ur],c[nr],c[$n],c[Rn],c[Nt]))return Ar;if(c[Rn]+1<this.min(c[ur],c[nr],c[$n],c[Ar],c[Nt]))return Rn;if(c[nr]+1<this.min(c[Nt],c[ur],c[$n],c[Ar])){if(c[nr]<c[Rn])return nr;if(c[nr]===c[Rn]){for(var g=t+a+1;g<e.length;){var x=e.charCodeAt(g);if(this.isX12TermSep(x))return Rn;if(!this.isNativeX12(x))break;g++}return nr}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Mn.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=et.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),$m=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xb=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return fi.encode(e,this.charset)!=null}catch{return!1}},n}(),wV=function(){function n(e,t,r){var i,a,o,c,u,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(M){return new xb(QB.forName(M))}),this.encoders=[];var p=[];p.push(new xb(ZB.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),x=0;x<e.length;x++){var _=!1;try{for(var E=(i=void 0,$m(p)),A=E.next();!A.done;A=E.next()){var S=A.value,I=e.charAt(x),N=I.charCodeAt(0);if(N===r||S.canEncode(I)){_=!0;break}}}catch(M){i={error:M}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}if(!_)try{for(var O=(o=void 0,$m(this.ENCODERS)),j=O.next();!j.done;j=O.next()){var S=j.value;if(S.canEncode(e.charAt(x))){p.push(S),_=!0;break}}}catch(M){o={error:M}}finally{try{j&&!j.done&&(c=O.return)&&c.call(O)}finally{if(o)throw o.error}}_||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var F=0;try{for(var q=$m(p),P=q.next();!P.done;P=q.next()){var S=P.value;this.encoders[F++]=S}}catch(M){u={error:M}}finally{try{P&&!P.done&&(d=q.return)&&d.call(q)}finally{if(u)throw u.error}}}var R=-1;if(t!=null){for(var x=0;x<this.encoders.length;x++)if(this.encoders[x]!=null&&t.name===this.encoders[x].name){R=x;break}}this.priorityEncoderIndex=R}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return fi.encode(dt.getCharAt(e),this.encoders[t].name)},n}(),EV=3,bV=function(){function n(e,t,r){this.fnc1=r;var i=new wV(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Ke,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var c=e.charAt(i).charCodeAt(0),u=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(c===o||t.canEncode(c,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),d=u+1);for(var p=u;p<d;p++)(c===o||t.canEncode(c,p))&&this.addEdge(r,i+1,new _b(c,t,p,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new _b[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var c=0;c<t.length();c++)a[o][c]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][c],r);for(var c=0;c<t.length();c++)a[o-1][c]=null}for(var u=-1,d=et.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var p=a[i][c];p.cachedTotalSize<d&&(d=p.cachedTotalSize,u=c)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],x=a[i][u];x!=null;){if(x.isFNC1())g.unshift(1e3);else for(var _=t.encode(x.c,x.encoderIndex),o=_.length-1;o>=0;o--)g.unshift(_[o]&255);var E=x.previous===null?0:x.previous.encoderIndex;E!==x.encoderIndex&&g.unshift(256+t.getECIValue(x.encoderIndex)),x=x.previous}for(var A=[],o=0;o<A.length;o++)A[o]=g[o];return A},n}(),_b=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(o+=EV),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),AV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var wb;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(wb||(wb={}));(function(n){AV(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=o,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(bV);var SV=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),Eb=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),TV=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),CV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sy=function(n){CV(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+et.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(TV),IV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NV=function(n){IV(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(sy);function RV(n,e,t){return new NV(n,e,t)}function Vu(n,e,t){return new sy(n,e,t)}var OV=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Bs=0,v0=1,ci=2,XC=3,Qi=4,DV=new sy(null,0,0),Wm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],PV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function MV(n){var e,t;try{for(var r=PV(n),i=r.next();!i.done;i=r.next()){var a=i.value;Mn.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Bs][Qi]=0,n[v0][Qi]=0,n[v0][Bs]=28,n[XC][Qi]=0,n[ci][Qi]=0,n[ci][Bs]=15,n}var YC=MV(Mn.createInt32Array(6,6)),kV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LV=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Wm[this.mode][e];i=Vu(i,a&65535,a>>16),r+=a>>16}var o=e===ci?4:5;return i=Vu(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ci?4:5;return r=Vu(r,YC[this.mode][e],i),r=Vu(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Qi||this.mode===ci){var a=Wm[r][Bs];t=Vu(t,a&65535,a>>16),i+=a>>16,r=Bs}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+o);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=RV(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Wm[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Xn;try{for(var c=kV(i),u=c.next();!u.done;u=c.next()){var d=u.value;d.appendTo(o,e)}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return dt.format("%s bits=%d bytes=%d",OV[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(DV,Bs,0,0),n}();function jV(n){var e=dt.getCharCode(" "),t=dt.getCharCode("."),r=dt.getCharCode(",");n[Bs][e]=1;for(var i=dt.getCharCode("Z"),a=dt.getCharCode("A"),o=a;o<=i;o++)n[Bs][o]=o-a+2;n[v0][e]=1;for(var c=dt.getCharCode("z"),u=dt.getCharCode("a"),o=u;o<=c;o++)n[v0][o]=o-u+2;n[ci][e]=1;for(var d=dt.getCharCode("9"),p=dt.getCharCode("0"),o=p;o<=d;o++)n[ci][o]=o-p+2;n[ci][r]=12,n[ci][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],x=0;x<g.length;x++)n[XC][dt.getCharCode(g[x])]=x;for(var _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],x=0;x<_.length;x++)dt.getCharCode(_[x])>0&&(n[Qi][dt.getCharCode(_[x])]=x);return n}var Xm=jV(Mn.createInt32Array(5,256)),Eh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BV=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=dt.getCharCode(" "),t=dt.getCharCode(`
`),r=Eb.singletonList(LV.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case dt.getCharCode("\r"):a=o===t?2:0;break;case dt.getCharCode("."):a=o===e?3:0;break;case dt.getCharCode(","):a=o===e?4:0;break;case dt.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=Eb.min(r,function(u,d){return u.getBitCount()-d.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=Eh(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForChar(u,t,a)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Xm[e.getMode()][i]>0,o=null,c=0;c<=Qi;c++){var u=Xm[c][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||c===e.getMode()||c===ci){var d=o.latchAndAppend(c,u);r.push(d)}if(!a&&YC[e.getMode()][c]>=0){var p=o.shiftAndAppend(c,u);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Xm[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var c=Eh(e),u=c.next();!u.done;u=c.next()){var d=u.value;this.updateStateForPair(d,t,r,o)}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Qi,r)),e.getMode()!==Qi&&i.push(a.shiftAndAppend(Qi,r)),r===3||r===4){var o=a.latchAndAppend(ci,16-r).latchAndAppend(ci,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var c=Eh(e),u=c.next();!u.done;u=c.next()){var d=u.value,p=!0,g=function(S){if(S.isBetterThanOrEqualTo(d))return p=!1,"break";d.isBetterThanOrEqualTo(S)&&(o=o.filter(function(I){return I!==S}))};try{for(var x=(i=void 0,Eh(o)),_=x.next();!_.done;_=x.next()){var E=_.value,A=g(E);if(A==="break")break}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}p&&o.push(d)}}catch(S){t={error:S}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n}(),VV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new BV(e).encode(),a=et.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,c,u,d,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,u=Math.abs(r),u>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Pe(dt.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(u,c),p=n.WORD_SIZE[u];var x=d-d%p;if(g=n.stuffBits(i,p),g.getSize()+a>x)throw new Pe("Data to large for user specified layer");if(c&&g.getSize()>p*64)throw new Pe("Data to large for user specified layer")}else{p=0,g=null;for(var _=0;;_++){if(_>n.MAX_NB_BITS)throw new Pe("Data too large for an Aztec code");if(c=_<=3,u=c?_+1:_,d=n.totalBitsInLayer(u,c),!(o>d)){(g==null||p!==n.WORD_SIZE[u])&&(p=n.WORD_SIZE[u],g=n.stuffBits(i,p));var x=d-d%p;if(!(c&&g.getSize()>p*64)&&g.getSize()+a<=x)break}}}var E=n.generateCheckWords(g,d,p),A=g.getSize()/p,S=n.generateModeMessage(c,u,A),I=(c?11:14)+u*4,N=new Int32Array(I),O;if(c){O=I;for(var _=0;_<N.length;_++)N[_]=_}else{O=I+1+2*et.truncDivision(et.truncDivision(I,2)-1,15);for(var j=et.truncDivision(I,2),F=et.truncDivision(O,2),_=0;_<j;_++){var q=_+et.truncDivision(_,15);N[j-_-1]=F-q-1,N[j+_]=F+q+1}}for(var P=new ra(O),_=0,R=0;_<u;_++){for(var M=(u-_)*4+(c?9:12),V=0;V<M;V++)for(var H=V*2,z=0;z<2;z++)E.get(R+H+z)&&P.set(N[_*2+z],N[_*2+V]),E.get(R+M*2+H+z)&&P.set(N[_*2+V],N[I-1-_*2-z]),E.get(R+M*4+H+z)&&P.set(N[I-1-_*2-z],N[I-1-_*2-V]),E.get(R+M*6+H+z)&&P.set(N[I-1-_*2-V],N[_*2+z]);R+=M*8}if(n.drawModeMessage(P,c,O,S),c)n.drawBullsEye(P,et.truncDivision(O,2),5);else{n.drawBullsEye(P,et.truncDivision(O,2),7);for(var _=0,V=0;_<et.truncDivision(I,2)-1;_+=15,V+=16)for(var z=et.truncDivision(O,2)&1;z<O;z+=2)P.set(et.truncDivision(O,2)-V,z),P.set(et.truncDivision(O,2)+V,z),P.set(z,et.truncDivision(O,2)-V),P.set(z,et.truncDivision(O,2)+V)}var U=new SV;return U.setCompact(c),U.setSize(O),U.setLayers(u),U.setCodeWords(A),U.setMatrix(P),U},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Xn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=et.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(var o=0;o<10;o++){var c=a-5+o+et.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,c=new $C(n.getGF(r)),u=et.truncDivision(t,r),d=n.bitsToWords(e,r,u);c.encode(d,u-o);var p=t%r,g=new Xn;g.appendBits(0,p);try{for(var x=VV(Array.from(d)),_=x.next();!_.done;_=x.next()){var E=_.value;g.appendBits(E,r)}}catch(A){i={error:A}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var c=0,u=0;u<t;u++)c|=e.get(a*t+u)?1<<t-u-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return Pr.AZTEC_PARAM;case 6:return Pr.AZTEC_DATA_6;case 8:return Pr.AZTEC_DATA_8;case 10:return Pr.AZTEC_DATA_10;case 12:return Pr.AZTEC_DATA_12;default:throw new Pe("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Xn,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var c=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(c|=1<<t-1-u);(c&a)===a?(r.appendBits(c&a,t),o--):(c&a)===0?(r.appendBits(c|1,t),o--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var UV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FV=function(n){UV(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),o=0,c=0,u=t.length;o<u;o+=4,c++){var d=void 0,p=t[o+3];if(p===0)d=255;else{var g=t[o],x=t[o+1],_=t[o+2];d=306*g+601*x+117*_+512>>10}a[c]=d}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Z0(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),u=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);r.width=c,r.height=u;var d=r.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(c/2,u/2),d.rotate(i),d.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Vf);function KC(){return typeof navigator<"u"}function HV(){return KC()&&!!navigator.mediaDevices}function zV(){return!!(HV()&&navigator.mediaDevices.enumerateDevices)}var $l=function(){return $l=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$l.apply(this,arguments)},tn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{d(r.next(p))}catch(g){o(g)}}function u(p){try{d(r.throw(p))}catch(g){o(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,u)}d((r=r.apply(n,e||[])).next())})},nn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(p){return u([d,p])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Ym=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GV={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Sc=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=$l($l({},GV),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Ht.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return tn(this,void 0,void 0,function(){return nn(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Ym(i),o=a.next();!o.done;o=a.next()){var c=o.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new hn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new hn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new FV(e),r=new MC(t);return new PC(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new hn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return tn(this,void 0,void 0,function(){var t;return nn(this,function(r){switch(r.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return tn(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,d,p,g,x;return nn(this,function(_){switch(_.label){case 0:if(!KC())throw new Error("Can't enumerate devices, navigator is not present.");if(!zV())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=Ym(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device ".concat(t.length+1),d=a.groupId,p={deviceId:c,label:u,kind:o,groupId:d},t.push(p))}catch(E){g={error:E}}finally{try{i&&!i.done&&(x=r.return)&&x.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return tn(this,void 0,void 0,function(){var t;return nn(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return tn(this,void 0,void 0,function(){var r;return nn(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,o){var c=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",u))},t),u=function(){n.tryPlayVideo(e).then(function(d){clearTimeout(c),e.removeEventListener("canplay",u),a(d)})};e.addEventListener("canplay",u)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),tn(this,void 0,void 0,function(){var i;return nn(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new hn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return tn(this,void 0,void 0,function(){var t;return nn(this,function(r){switch(r.label){case 0:if(!e)throw new hn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return tn(this,void 0,void 0,function(){var t;return nn(this,function(r){switch(r.label){case 0:if(!e)throw new hn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return tn(this,void 0,void 0,function(){var i,a;return nn(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return tn(this,void 0,void 0,function(){var i,a,o,c,u,d,p,g,x,_=this;return nn(this,function(E){switch(E.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=E.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,o),u=e.getVideoTracks(),d=$l($l({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(A,S){return tn(this,void 0,void 0,function(){var I,N,O,j,F,q,P;return nn(this,function(R){switch(R.label){case 0:I=S?u.filter(S):u,R.label=1;case 1:R.trys.push([1,6,7,8]),N=Ym(I),O=N.next(),R.label=2;case 2:return O.done?[3,5]:(j=O.value,[4,j.applyConstraints(A)]);case 3:R.sent(),R.label=4;case 4:return O=N.next(),[3,2];case 5:return[3,8];case 6:return F=R.sent(),q={error:F},[3,8];case 7:try{O&&!O.done&&(P=N.return)&&P.call(N)}finally{if(q)throw q.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(A){return u.find(A).getConstraints()},streamVideoSettingsGet:function(A){return u.find(A).getSettings()},streamVideoCapabilitiesGet:function(A){return u.find(A).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(g=u==null?void 0:u.find(function(A){return n.mediaStreamIsTorchCompatibleTrack(A)}),x=function(A){return tn(_,void 0,void 0,function(){return nn(this,function(S){switch(S.label){case 0:return[4,n.mediaStreamSetTorch(g,A)];case 1:return S.sent(),[2]}})})},d.switchTorch=x,d.stop=function(){return tn(_,void 0,void 0,function(){return nn(this,function(A){switch(A.label){case 0:return c.stop(),[4,x(!1)];case 1:return A.sent(),[2]}})})}),[2,d]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return tn(this,void 0,void 0,function(){var i,a;return nn(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return tn(this,void 0,void 0,function(){var r,i;return nn(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new hn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return tn(this,void 0,void 0,function(){var r,i,a,o;return nn(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new hn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return tn(this,void 0,void 0,function(){var r;return nn(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return tn(this,void 0,void 0,function(){var r,i,a;return nn(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return tn(this,void 0,void 0,function(){var r,i;return nn(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return tn(this,void 0,void 0,function(){var t,r;return nn(this,function(i){switch(i.label){case 0:if(!e)throw new hn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return tn(this,void 0,void 0,function(){var t,r;return nn(this,function(i){switch(i.label){case 0:if(!e)throw new hn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,c){a.scan(e,function(u,d,p){if(u){o(u),p.stop();return}if(d){if(d instanceof ie&&t||d instanceof En&&r||d instanceof xe&&i)return;p.stop(),c(d)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){o=void 0,a=void 0},u=!1,d,p=function(){u=!0,clearTimeout(d),c(),r&&r()},g={stop:p},x=function(){if(!u)try{n.drawImageOnCanvas(o,e);var _=i.decodeFromCanvas(a);t(_,void 0,g),d=setTimeout(x,i.options.delayBetweenScanSuccess)}catch(I){t(void 0,I,g);var E=I instanceof En,A=I instanceof xe,S=I instanceof ie;if(E||A||S){d=setTimeout(x,i.options.delayBetweenScanAttempts);return}c(),r&&r(I)}};return x(),g},n.prototype._decodeOnLoadImage=function(e){return tn(this,void 0,void 0,function(){var t;return nn(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return tn(this,void 0,void 0,function(){var t;return nn(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}(),qV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){qV(e,n);function e(t,r){return n.call(this,new d0,t,r)||this}return e})(Sc);var $V=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){$V(e,n);function e(t,r){return n.call(this,new Gl(t),t,r)||this}return e})(Sc);var WV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){WV(e,n);function e(t,r){return n.call(this,new p0,t,r)||this}return e})(Sc);var XV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){XV(e,n);function e(t,r){var i=this,a=new qC;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Ht.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Sc);var YV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){YV(e,n);function e(t,r){return n.call(this,new g0,t,r)||this}return e})(Sc);var KV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QV=function(n){KV(e,n);function e(t,r){return n.call(this,new m0,t,r)||this}return e}(Sc);function ZV(){const{user:n,addLeague:e}=bn(),t=Bn(),{code:r}=Mb(),[i,a]=k.useState(r||""),[o,c]=k.useState(!1),[u,d]=k.useState(""),[p,g]=k.useState(!1),[x,_]=k.useState(""),[E,A]=k.useState(!1),[S,I]=k.useState(""),N=k.useRef(null),O=k.useRef(null);k.useEffect(()=>{const q=new URLSearchParams(window.location.search).get("code");q?a(q.toUpperCase()):r&&a(r)},[r]),k.useEffect(()=>(E&&N.current&&(I(""),O.current=new QV,O.current.decodeFromVideoDevice(void 0,N.current,(F,q)=>{if(F){let P="";try{const R=new URL(F.getText());P=R.searchParams.get("code")||R.pathname.split("/").pop()}catch{P=F.getText()}A(!1),O.current.reset(),t(`/join?code=${encodeURIComponent(P)}`)}else q&&I("Camera error: "+((q==null?void 0:q.message)||q))})),()=>{O.current&&O.current.reset()}),[E,t]);const j=async F=>{F.preventDefault(),c(!0),d(""),g(!1);try{const{data:q}=await Lt.post(`/leagues/join/${i}`,{user_id:n==null?void 0:n.uid,email:n==null?void 0:n.email});_(q.league_name),g(!0),e&&e({id:i,name:q.league_name,role:"coach"})}catch(q){d(q.message||"Error joining league")}finally{c(!1)}};return m.jsxs(Lr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:[m.jsxs("button",{className:"fixed bottom-6 right-6 z-50 bg-cmf-primary hover:bg-cmf-secondary text-white rounded-full shadow-lg p-4 flex items-center gap-2 text-lg font-bold transition",onClick:()=>A(!0),"aria-label":"Scan QR to Join",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},children:[m.jsx("span",{role:"img","aria-label":"scan",children:"📷"})," Scan QR to Join"]}),E&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg flex flex-col items-center max-w-xs w-full",children:[m.jsx("h2",{className:"text-lg font-bold mb-2",children:"Scan League QR Code"}),m.jsx("div",{className:"w-full h-64 mb-2 flex items-center justify-center",children:m.jsx("video",{ref:N,className:"w-full h-full rounded",style:{objectFit:"cover"}})}),S&&m.jsx("div",{className:"text-red-500 text-sm mb-2",children:S}),m.jsx("button",{className:"bg-cmf-primary hover:bg-cmf-secondary text-white px-4 py-2 rounded font-semibold mt-2 transition",onClick:()=>A(!1),children:"Cancel"})]})}),m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Join a League"}),m.jsx("div",{className:"mb-2 text-gray-600",children:"Enter the league code provided by your organizer to join their league."}),m.jsx("div",{className:"mb-4 text-xs text-gray-500",children:"Need help? Ask your organizer for a league code or QR invite."}),p?m.jsxs("div",{className:"text-center w-full",children:[m.jsx("div",{className:"mb-4 text-green-600 font-semibold",children:"Successfully joined league!"}),m.jsxs("div",{className:"mb-2",children:["Welcome to ",m.jsx("span",{className:"font-bold",children:x})]}),m.jsx("button",{className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] mt-4",onClick:()=>t("/dashboard"),children:"Go to Dashboard"})]}):m.jsxs("form",{onSubmit:j,className:"space-y-4 w-full",children:[m.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-cmf-primary/30 rounded-xl focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary transition text-center font-mono text-lg tracking-widest",placeholder:"Enter League Code",value:i,onChange:F=>a(F.target.value.toUpperCase()),required:!0,autoFocus:!0}),m.jsx("button",{type:"submit",className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",disabled:o,children:o?"Joining...":"Join League"}),u&&m.jsx("div",{className:"text-red-500 text-sm mt-2",children:u})]})]})]})}const JV=()=>({welcomeVariant:(()=>{const e=localStorage.getItem("welcome_variant");if(e)return e;const t=["default","mojo-style","sports-focused"],r=t[Math.floor(Math.random()*t.length)];return localStorage.setItem("welcome_variant",r),r})()});function eU(){const n=Bn(),{welcomeVariant:e}=JV(),r=(()=>{switch(e){case"mojo-style":return{title:"Dominate. Track. Win.",subtitle:"Elevate your game with precision tracking and real-time insights that champions demand.",buttonText:"Start Dominating"};case"sports-focused":return{title:"Train. Compete. Excel.",subtitle:"Professional-grade combine tracking and analytics for serious athletes and coaches.",buttonText:"Join the Elite"};default:return{title:"Coach. Manage. Excel.",subtitle:"Your all-in-one platform for team management, combine tracking, and athletic excellence.",buttonText:"Get Started"}}})();return m.jsx(Lr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4",children:r.title}),m.jsx("p",{className:"text-gray-600 text-base leading-relaxed mb-6",children:r.subtitle}),m.jsx("button",{className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] mb-6",onClick:()=>n("/signup"),children:r.buttonText})]}),m.jsxs("div",{className:"text-center space-y-3 text-sm",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs(gt,{to:"/login",className:"text-cyan-600 hover:text-cyan-800 font-medium transition-colors duration-200",children:["Already have an account? ",m.jsx("span",{className:"font-semibold",children:"Sign In"})]}),m.jsxs(gt,{to:"/claim",className:"text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200",children:["Need to claim an account? ",m.jsx("span",{className:"font-semibold",children:"Claim Account"})]})]}),m.jsx("div",{className:"pt-4 border-t border-gray-100",children:m.jsx(gt,{to:"/help",className:"text-gray-500 hover:text-gray-700 text-xs transition-colors duration-200",children:"Need Help?"})})]})]})})}const tU=()=>m.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mx-auto mb-8",children:[m.jsx("rect",{x:"25",y:"40",width:"60",height:"35",rx:"8",fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"2"}),m.jsx("rect",{x:"75",y:"35",width:"15",height:"8",rx:"2",fill:"#ec4899"}),m.jsx("rect",{x:"52",y:"75",width:"6",height:"25",fill:"#9ca3af"}),m.jsx("ellipse",{cx:"35",cy:"100",rx:"8",ry:"3",fill:"#10b981"}),m.jsx("ellipse",{cx:"55",cy:"102",rx:"6",ry:"2",fill:"#10b981"}),m.jsx("ellipse",{cx:"75",cy:"100",rx:"7",ry:"3",fill:"#10b981"}),m.jsx("rect",{x:"35",y:"48",width:"20",height:"12",rx:"2",fill:"white",stroke:"#6366f1",strokeWidth:"2"}),m.jsx("line",{x1:"37",y1:"52",x2:"53",y2:"52",stroke:"#6366f1",strokeWidth:"1"}),m.jsx("line",{x1:"37",y1:"55",x2:"48",y2:"55",stroke:"#6366f1",strokeWidth:"1"}),m.jsx("circle",{cx:"20",cy:"30",r:"2",fill:"#fbbf24"}),m.jsx("circle",{cx:"95",cy:"25",r:"1.5",fill:"#fbbf24"}),m.jsx("circle",{cx:"15",cy:"60",r:"1",fill:"#fbbf24"})]});function nU(){const{user:n,setUser:e}=bn(),[t,r]=k.useState(""),[i,a]=k.useState(!1),[o,c]=k.useState(!1),u=Bn(),[d,p]=k.useState(!1),g=Lf();k.useEffect(()=>{const A=async()=>{Qt.currentUser&&(await Qt.currentUser.reload(),p(Qt.currentUser.emailVerified),Qt.currentUser.emailVerified&&(await Qt.currentUser.getIdToken(!0),e(Qt.currentUser),u("/dashboard")))};A();const S=setInterval(A,1e4);return()=>clearInterval(S)},[u,e]),k.useEffect(()=>{if(!Qt.currentUser){const A=setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),u("/welcome",{replace:!0})},2500);return()=>clearTimeout(A)}},[u]);const x=async()=>{c(!0);try{Qt.currentUser&&(await Qt.currentUser.reload(),p(Qt.currentUser.emailVerified),Qt.currentUser.emailVerified?(await Qt.currentUser.getIdToken(!0),e(Qt.currentUser),u("/dashboard")):r("Still not verified. Please check your email."))}catch{r("Error checking verification status.")}finally{c(!1)}},_=async()=>{a(!0),r("");try{Qt.currentUser?(await Qt.currentUser.reload(),await FA(Qt.currentUser),r("Verification email sent!")):r("User not found. Please log in again.")}catch{r("Failed to resend. Try again later.")}finally{a(!1)}},E=()=>{const A=navigator.userAgent.toLowerCase();try{A.includes("iphone")||A.includes("ipad")?window.location.href="message://":A.includes("android")?window.location.href="intent://view#Intent;scheme=mailto;end":alert(`Please open your email app manually to check for the verification email.

Look for an email from WooCombine and click the verification link inside.`)}catch{alert(`Please open your email app manually to check for the verification email.

Look for an email from WooCombine and click the verification link inside.`)}};return m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl mx-4 flex flex-col relative min-h-[600px]",children:[m.jsxs("div",{className:"w-full flex flex-row justify-between items-center p-6 pb-2",children:[m.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-900 focus:outline-none transition",type:"button","aria-label":"Back to welcome",onClick:()=>u("/welcome"),children:m.jsx(Fo,{size:20})}),m.jsx("button",{className:"text-sm text-cyan-600 hover:text-cyan-800 font-medium",onClick:()=>u("/help"),children:"Need Help?"})]}),m.jsxs("div",{className:"flex-1 flex flex-col px-6 pb-6",children:[m.jsx("div",{className:"text-center mt-4 mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h1",{className:"text-2xl font-black text-gray-900 text-center mb-6 tracking-tight",children:"CHECK YOUR EMAIL"}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsxs("p",{className:"text-gray-700 text-base leading-relaxed mb-4",children:["We sent an email to"," ",m.jsx("span",{className:"font-semibold text-gray-900 break-all",children:(n==null?void 0:n.email)||"your email address"})," ","with a link to verify your WooCombine account."]}),m.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"It might take a few minutes. If you don't see our email in your inbox, please check your spam or promo folders. If you see multiple emails, make sure you're selecting the most recent verification email."})]}),m.jsx("div",{className:"flex-1 flex items-center justify-center py-4",children:m.jsx(tU,{})}),m.jsxs("div",{className:"mt-8 space-y-4",children:[d?m.jsx("button",{onClick:()=>u("/dashboard"),className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:"Continue to App"}):m.jsx("button",{onClick:E,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:"Open Email App"}),!d&&m.jsx("button",{onClick:x,disabled:o,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-xl transition-colors duration-200 disabled:opacity-50",children:o?"Checking...":"I've verified my email"}),!d&&m.jsx("div",{className:"text-red-600 text-sm text-center",children:"We haven't detected your email verification yet. Please check your inbox and try again."}),t&&m.jsx("div",{className:`text-sm text-center ${t.includes("sent")?"text-green-600":"text-red-600"}`,children:t}),!Qt.currentUser&&m.jsx("div",{className:"text-red-600 text-sm text-center",children:"User session expired. Please log in again."})]})]}),m.jsxs("div",{className:"px-6 pb-6 pt-4 border-t border-gray-100 space-y-3",children:[m.jsx("button",{onClick:_,disabled:i,className:"w-full text-cyan-600 hover:text-cyan-800 font-medium py-2 transition-colors duration-200 disabled:opacity-50",children:i?"Sending...":"Resend Email"}),m.jsx("button",{onClick:()=>u("/help"),className:"w-full text-cyan-600 hover:text-cyan-800 font-medium py-2 transition-colors duration-200",children:"Contact Support"}),Qt.currentUser?m.jsx("button",{onClick:async()=>{try{await g(),u("/welcome")}catch{u("/welcome")}},className:"w-full text-gray-500 hover:text-gray-700 font-medium py-2 transition-colors duration-200",children:"Log Out"}):m.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),u("/welcome",{replace:!0})},className:"w-full text-gray-500 hover:text-gray-700 font-medium py-2 transition-colors duration-200",children:"Return to Welcome"})]})]})})}function rU(){const{user:n,setSelectedLeagueId:e,leagues:t}=bn(),r=Lf(),[i,a]=k.useState([]),[o,c]=k.useState(!0),[u,d]=k.useState(null),p=Bn();k.useEffect(()=>{if(!n){d("No user found. Please log in again."),c(!1);return}if(t&&t.length>0){a(t),d(null),c(!1);return}(async()=>{var A,S;try{const N=(await Lt.get("/leagues/me",{timeout:45e3,retry:2})).data.leagues||[];a(N),N.length===0?d("No leagues linked to this account. Try creating a new one."):d(null)}catch(I){((A=I.response)==null?void 0:A.status)===404?(a([]),d("No leagues linked to this account. Try creating a new one.")):I.message.includes("timeout")||I.code==="ECONNABORTED"?(a([]),d("Server is starting up, which can take up to a minute. Please wait and refresh the page.")):((S=I.response)==null?void 0:S.status)>=500?(a([]),d("Server is temporarily unavailable during startup. Please try refreshing in 30 seconds.")):(a([]),d("Could not fetch leagues. Please check your connection and try again."))}finally{c(!1)}})()},[n,t]);const g=E=>{localStorage.setItem("selectedLeagueId",E.id),e(E.id),p("/dashboard")},x=async()=>{try{await r()}catch{p("/login")}},_=E=>{const A=["bg-gradient-to-br from-cmf-primary to-cmf-secondary","bg-gradient-to-br from-purple-500 to-purple-700","bg-gradient-to-br from-blue-500 to-blue-700","bg-gradient-to-br from-green-500 to-green-700","bg-gradient-to-br from-orange-500 to-orange-700","bg-gradient-to-br from-red-500 to-red-700"];return A[E%A.length]};return m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[m.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Select League"}),m.jsx("button",{onClick:()=>p("/dashboard"),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition",children:m.jsx(jf,{className:"w-5 h-5 text-gray-600"})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-3 border-gray-300 border-t-cmf-primary rounded-full mb-4"}),m.jsx("div",{className:"text-gray-500 text-lg",children:"Loading leagues..."}),m.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"This may take a moment during server startup"})]}):u?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-red-600 mb-4 text-lg",children:u}),u.includes("timeout")&&m.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Refresh Page"})]}):i.length===0?m.jsx("div",{className:"text-center py-12 text-gray-500 text-lg",children:"No leagues found. Create or join one below."}):m.jsx("div",{className:"space-y-3",children:i.map((E,A)=>m.jsxs("button",{onClick:()=>g(E),className:`w-full ${_(A)} rounded-2xl p-6 text-white text-left relative overflow-hidden transform hover:scale-105 transition-transform shadow-lg`,children:[m.jsxs("div",{className:"mb-2",children:[m.jsx("span",{className:"text-white/80 text-sm font-medium",children:"League Code"}),m.jsxs("div",{className:"text-white text-lg font-mono font-bold",children:["(",E.id.slice(-8).toUpperCase(),")"]})]}),m.jsx("div",{className:"text-2xl font-bold mb-2 pr-8",children:E.name}),m.jsxs("div",{className:"text-white/90 text-sm capitalize",children:["Role: ",E.role]}),m.jsx("div",{className:"absolute top-4 right-4 w-12 h-12 border-2 border-white/20 rounded-full"}),m.jsx("div",{className:"absolute -bottom-6 -right-6 w-24 h-24 border-2 border-white/10 rounded-full"}),E.role==="organizer"&&m.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-xs font-bold text-gray-800",children:"!"})})]},E.id))})}),m.jsxs("div",{className:"p-4 space-y-3 border-t border-gray-200",children:[m.jsxs("button",{onClick:()=>p("/create-league"),className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-bold py-4 px-6 rounded-2xl transition flex items-center justify-center gap-2 text-lg",children:[m.jsx(c0,{className:"w-5 h-5"}),"Create a League"]}),m.jsxs("button",{onClick:()=>p("/join"),className:"w-full border-2 border-cmf-primary text-cmf-primary hover:bg-cmf-primary hover:text-white font-bold py-4 px-6 rounded-2xl transition flex items-center justify-center gap-2 text-lg",children:[m.jsx(oc,{className:"w-5 h-5"}),"Join a League"]})]}),m.jsxs("div",{className:"px-4 pb-4 text-center",children:[m.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Logged in as: ",(n==null?void 0:n.email)||"Unknown"]}),m.jsx("button",{onClick:x,className:"text-sm text-red-600 hover:text-red-800 underline",children:"Log out and switch accounts"})]})]})})})}const iU=[{key:"organizer",label:"League Operator",desc:"Manage events, upload players, run combines"},{key:"coach",label:"Coach",desc:"View player performance and analyze results"},{key:"viewer",label:"Parent/Viewer",desc:"View event results and player performance"}],aU=[{key:"coach",label:"Coach",desc:"View player performance and analyze results"},{key:"viewer",label:"Parent/Viewer",desc:"View event results and player performance"}];function sU(){const{user:n}=bn(),[e,t]=k.useState(null),[r,i]=k.useState(""),[a,o]=k.useState(!1),c=Bn(),u=Lf(),d=iC(),p=localStorage.getItem("pendingEventJoin"),g=!!p,x=g?aU:iU;if(!n)return m.jsx(Bf,{title:"Preparing role selection...",subtitle:"Setting up your account",size:"large"});const _=async()=>{if(i(""),!e){i("Please select a role.");return}o(!0);try{if(await sM(rC(d,"users",n.uid),{id:n.uid,email:n.email,role:e,created_at:cM()},{merge:!0}),await n.getIdToken(!0),g&&p){const A=p.split("/").map(S=>encodeURIComponent(S)).join("/");c(`/join-event/${A}`,{replace:!0})}else c("/dashboard",{replace:!0})}catch(A){i(A.message||"Failed to save role. Please try again.")}finally{o(!1)}},E=async()=>{try{await u(),c("/welcome")}catch{}};return m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsx("div",{className:"text-center mb-6",children:m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),m.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Choose Your Role"}),g?m.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:m.jsx("p",{className:"text-blue-800 text-sm",children:"You've been invited to join an event! Please select your role to continue."})}):m.jsx("p",{className:"mb-6 text-gray-600",children:"Select the role that best describes your involvement in youth sports combines."}),!1,m.jsx("div",{className:"w-full flex flex-col gap-4 mb-6",children:x.map(A=>m.jsxs("button",{className:`w-full border-2 rounded-xl p-4 text-left flex flex-col transition font-semibold ${e===A.key?"border-cyan-600 bg-cyan-50 text-cyan-900":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>t(A.key),disabled:a,children:[m.jsx("span",{className:"text-lg mb-1",children:A.label}),m.jsx("span",{className:"text-gray-600 text-sm",children:A.desc})]},A.key))}),r&&m.jsx("div",{className:"w-full bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded mb-4 text-sm",children:r}),m.jsxs("div",{className:"w-full flex flex-col gap-3",children:[m.jsx("button",{onClick:_,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:transform-none",disabled:!e||a,children:a?"Saving...":"Continue"}),m.jsx("button",{onClick:E,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-xl transition-colors duration-200",disabled:a,children:"Sign Out"})]}),m.jsx("div",{className:"mt-6 text-sm text-gray-500",children:m.jsx("p",{children:"You can change your role later in account settings."})})]})})}function oU({event:n,league:e}){if(!n||!e)return null;const t=n.id,r=`https://woo-combine.com/join-event/${e.id}/${n.id}`,i=a=>{navigator.clipboard.writeText(a)};return m.jsxs("div",{className:"w-full max-w-md text-center mx-auto",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2 text-green-600",children:"Event Created Successfully!"}),m.jsxs("p",{className:"text-gray-600 mb-4",children:['Your combine event "',n.name,'" is ready.']})]}),m.jsxs("div",{className:"bg-white border-2 border-green-200 rounded-xl p-6 mb-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Event Join Code:"}),m.jsx("div",{className:"text-2xl font-mono bg-gray-100 rounded p-3 inline-block border",children:t})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("div",{className:"flex justify-center mb-2",children:m.jsx("div",{className:"bg-white p-4 rounded-lg border",children:m.jsx(OC,{value:r,size:160})})}),m.jsxs("div",{className:"text-xs text-gray-500",children:["Scan to join: ",r]})]}),m.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[m.jsxs("button",{onClick:()=>i(t),className:"bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition flex items-center justify-center gap-2",children:[m.jsx(yC,{className:"w-4 h-4"}),"Copy Event Code"]}),m.jsxs("button",{onClick:()=>i(r),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition flex items-center justify-center gap-2",children:[m.jsx(Ro,{className:"w-4 h-4"}),"Copy Join Link"]})]}),m.jsx("div",{className:"text-green-700 font-semibold text-sm",children:"🏆 Share this code or QR with coaches to join this combine event!"})]}),m.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[m.jsx("strong",{children:"Next steps:"}),m.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[m.jsx("li",{children:"Share the code/QR with your coaches"}),m.jsx("li",{children:"Upload player roster in the Admin section"}),m.jsx("li",{children:"Start recording drill results"})]})]})]})}const bb=["first_name","last_name","age_group"],lU=[["Jane","Smith","9-10"],["Alex","Lee","U12"],["Sam","Jones","6U"],["Maria","Garcia",""]];function cU(n){const e=n.trim().split(/\r?\n/),t=e[0].split(",").map(i=>i.trim()),r=e.slice(1).map(i=>i.split(",").map(a=>a.trim()));return{headers:t,rows:r}}function uU(n,e){const t=[],r={};return e.forEach((i,a)=>{r[i]=n[a]??""}),(!r.first_name||r.first_name.trim()==="")&&t.push("Missing first name"),(!r.last_name||r.last_name.trim()==="")&&t.push("Missing last name"),r.first_name&&r.last_name&&(r.name=`${r.first_name.trim()} ${r.last_name.trim()}`),{...r,warnings:t}}function fU(){const n=Bn(),{selectedEvent:e}=ia(),{leagues:t,selectedLeagueId:r}=bn(),{notifyEventCreated:i,notifyPlayerAdded:a,notifyPlayersUploaded:o,notifyError:c,showSuccess:u,showError:d,showInfo:p}=Q0(),[g,x]=k.useState(1),[_,E]=k.useState(null),[A,S]=k.useState(0),[I,N]=k.useState([]),[O,j]=k.useState([]),[F,q]=k.useState([]),[P,R]=k.useState(""),[M,V]=k.useState("idle"),[H,z]=k.useState(""),[U,_e]=k.useState(!1),[Ee,X]=k.useState({first_name:"",last_name:"",number:"",age_group:""}),[le,de]=k.useState("idle"),[He,$]=k.useState(""),ae=k.useRef(),he=t==null?void 0:t.find(ve=>ve.id===r),fe=k.useCallback(async()=>{if(_)try{const{data:ve}=await Lt.get(`/players?event_id=${_.id}`);S(Array.isArray(ve)?ve.length:0)}catch{S(0)}},[_]);k.useEffect(()=>{_&&fe()},[_,fe]);const Te=ve=>{E(ve),i(ve.name),p("🎯 Next step: Add players to your event roster"),x(2)},Ve=()=>{p("🛠️ Opening Admin Tools for advanced event management"),n("/admin#player-upload-section")},Ne=ve=>{const we=ve.target.files[0];if(!we)return;R(we.name);const be=new FileReader;be.onload=Ie=>{const ze=Ie.target.result,{headers:rt,rows:Vt}=cU(ze),zt=[],Jt=bb.filter(Re=>!rt.some(ot=>ot.toLowerCase().trim()===Re.toLowerCase()));Jt.length>0?(zt.push(`Missing required headers: ${Jt.join(", ")}`),d(`❌ CSV Error: Missing headers ${Jt.join(", ")}`)):p(`📄 CSV loaded successfully: ${Vt.length} players found`);const Cr=Vt.map(Re=>uU(Re,rt));j(rt),N(Cr),q(zt)},be.readAsText(we)},Bt=F.length===0&&I.length>0&&I.some(ve=>ve.name&&ve.name.trim()!==""),ht=async()=>{if(!_)return;V("loading"),z("");const ve=I.map(Ie=>{const{warnings:ze,...rt}=Ie;return rt}),we=f0(ve),be={event_id:_.id,players:we};try{const Ie=await Lt.post("/players/upload",be),{data:ze}=Ie;V("success");const rt=we.filter(Vt=>!ve.find(zt=>zt.name===Vt.name&&zt.number)).length;z(`✅ Upload successful! ${ze.added} players added${rt>0?`, ${rt} auto-numbered`:""}.`),o(ze.added),N([]),j([]),R(""),fe()}catch(Ie){V("error"),z(`❌ ${Ie.message||"Upload failed."}`),c(Ie)}},Et=ve=>{X({...Ee,[ve.target.name]:ve.target.value})},gr=async ve=>{ve.preventDefault(),de("loading");try{let we=null;if(Ee.number&&Ee.number.trim()!=="")we=Number(Ee.number);else{const rt={age_group:Ee.age_group.trim()||null},[Vt]=f0([rt]);we=Vt.number}const be={name:`${Ee.first_name.trim()} ${Ee.last_name.trim()}`,number:we,age_group:Ee.age_group.trim()||null};await Lt.post(`/players?event_id=${_.id}`,be),de("success");const Ie=!Ee.number||Ee.number.trim()==="";$(`Player added${Ie?` with auto-number #${we}`:""}!`);const ze=`${Ee.first_name} ${Ee.last_name}`;a(ze),X({first_name:"",last_name:"",number:"",age_group:""}),fe()}catch(we){de("error"),$(we.message||"Failed to add player."),c(we)}},Vn=()=>{let ve=bb.join(",")+`
`;lU.forEach(ze=>{ve+=ze.join(",")+`
`});const we=new Blob([ve],{type:"text/csv"}),be=URL.createObjectURL(we),Ie=document.createElement("a");Ie.href=be,Ie.download="sample_players.csv",document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(be),p("📥 Sample CSV downloaded - check your Downloads folder")},Tr=()=>{N([]),j([]),q([]),R(""),V("idle"),z(""),ae.current&&(ae.current.value=""),p("🔄 Ready for new CSV file")},me=(ve,we)=>{x(ve),we&&p(we)};return g===1?m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),m.jsx("h1",{className:"text-2xl font-bold",children:"Select or Create an Event"})]}),m.jsx("p",{className:"mb-6 text-gray-600",children:"Choose an existing event or create a new combine event for your team."}),m.jsx(Tk,{onEventSelected:Te}),e&&!_&&m.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[m.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Selected: ",m.jsx("strong",{children:e.name})]}),m.jsxs("button",{onClick:()=>{E(e),p("📝 Event selected - ready to add players"),x(2)},className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] w-full flex items-center justify-center gap-2",children:["Continue to Add Players",m.jsx(wE,{className:"w-5 h-5"})]})]})]})}):g===2&&_?m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-8",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[m.jsx("div",{className:"w-8 h-8 bg-cmf-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),m.jsx("h1",{className:"text-2xl font-bold",children:"Add Players to Your Event"})]}),m.jsxs("div",{className:"bg-cmf-primary/10 rounded-lg p-4 mb-6 text-center",children:[m.jsx("p",{className:"text-cmf-primary font-semibold",children:_.name}),m.jsx("p",{className:"text-sm text-gray-600",children:A>0?`${A} players added`:"No players added yet"})]}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:m.jsx("span",{className:"text-blue-600 text-sm",children:"💡"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-blue-800 font-medium text-sm mb-1",children:"Simplified Upload Process"}),m.jsx("p",{className:"text-blue-700 text-sm",children:"Only First Name, Last Name, and Age Group (optional) are needed. Drill results will be collected during your combine event."})]})]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[m.jsxs("button",{onClick:Vn,className:"bg-cmf-primary hover:bg-cmf-secondary text-white font-medium px-4 py-3 rounded-xl transition flex items-center justify-center gap-2",children:[m.jsx(Ql,{className:"w-5 h-5"}),"Sample CSV"]}),m.jsxs("button",{onClick:()=>_e(ve=>!ve),className:"bg-cmf-secondary hover:bg-cmf-primary text-white font-medium px-4 py-3 rounded-xl transition flex items-center justify-center gap-2",children:[m.jsx(oc,{className:"w-5 h-5"}),"Add Manual"]})]}),m.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center bg-gray-50 hover:bg-gray-100 transition mb-6",children:[m.jsx(Ql,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("input",{ref:ae,type:"file",accept:".csv",onChange:Ne,className:"hidden",id:"csv-upload"}),m.jsxs("label",{htmlFor:"csv-upload",className:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium px-6 py-3 rounded-lg cursor-pointer transition inline-flex items-center gap-2",children:[m.jsx(Ql,{className:"w-4 h-4"}),"Choose CSV File"]})]}),P&&m.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["📄 ",P]}),F.length>0&&m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:[m.jsx("p",{className:"text-red-700 text-sm font-medium",children:"❌ Upload Error"}),m.jsx("p",{className:"text-red-600 text-sm",children:F.join("; ")})]}),Array.isArray(I)&&I.length>0&&m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsx("button",{onClick:Tr,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition",children:"Different File"}),m.jsx("button",{disabled:!Bt||M==="loading",onClick:ht,className:"bg-cmf-primary hover:bg-cmf-secondary disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium px-6 py-2 rounded-lg transition",children:M==="loading"?"Uploading...":"Confirm Upload"})]}),M==="success"&&m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:m.jsx("p",{className:"text-green-800 font-medium",children:H})}),M==="error"&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:m.jsx("p",{className:"text-red-700 font-medium",children:H})})]}),U&&m.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(oc,{className:"w-5 h-5 text-cmf-primary"}),"Add Player Manually"]}),m.jsxs("form",{onSubmit:gr,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),m.jsx("input",{type:"text",name:"first_name",value:Ee.first_name,onChange:Et,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),m.jsx("input",{type:"text",name:"last_name",value:Ee.last_name,onChange:Et,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Number"}),m.jsx("input",{type:"number",name:"number",value:Ee.number,onChange:Et,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Optional"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Group"}),m.jsx("input",{type:"text",name:"age_group",value:Ee.age_group,onChange:Et,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"e.g., 6U, 7-8, U10"})]})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>_e(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 rounded-lg transition",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:le==="loading",className:"flex-1 bg-cmf-primary hover:bg-cmf-secondary disabled:opacity-50 text-white font-medium py-2 rounded-lg transition",children:le==="loading"?"Adding...":"Add Player"})]}),le==="success"&&m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-green-700 font-medium",children:["✅ ",He]})}),le==="error"&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-red-700 font-medium",children:["❌ ",He]})})]})]}),m.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[m.jsxs("button",{onClick:()=>me(1,"🔙 Back to event selection"),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-4 py-2 rounded-lg transition flex items-center gap-2",children:[m.jsx(Fo,{className:"w-4 h-4"}),"Back to Event Selection"]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:()=>me(3,"⏭️ Skipping player import - you can add players later in Admin Tools"),className:"text-gray-500 hover:text-gray-700 font-medium underline",children:"Skip for now"}),m.jsxs("button",{onClick:()=>me(3,"🎉 Ready to share your event with coaches!"),disabled:A===0,className:"bg-cmf-primary hover:bg-cmf-secondary disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-6 py-3 rounded-xl transition flex items-center gap-2",children:["Continue to Share Event",m.jsx(wE,{className:"w-5 h-5"})]})]})]}),A===0&&m.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:"Add at least one player to continue, or skip for now"})]})}):g===3&&_?m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[m.jsx("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center",children:m.jsx(K0,{className:"w-5 h-5"})}),m.jsx("h1",{className:"text-2xl font-bold text-green-600",children:"Event Ready!"})]}),m.jsx(oU,{event:_,league:he}),m.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 space-y-3",children:[m.jsxs("button",{onClick:()=>me(2,"👥 Back to player management"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-xl transition flex items-center justify-center gap-2",children:[m.jsx(Fo,{className:"w-4 h-4"}),"Back to Add More Players"]}),m.jsx("button",{onClick:Ve,className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:"Continue to Admin Tools"})]})]})}):null}function Ab(){const{leagueId:n,eventId:e}=Mb(),t=Bn(),{user:r,leagues:i,addLeague:a,setSelectedLeagueId:o,userRole:c}=bn(),{setSelectedEvent:u}=ia(),[d,p]=k.useState(!0),[g,x]=k.useState(""),[_,E]=k.useState(null),[A,S]=k.useState(null),[I,N]=k.useState("checking");return k.useEffect(()=>{(async()=>{var q,P;const j=n&&e?n:null,F=e||n;if(!F){x("Invalid event link"),N("not_found"),p(!1);return}if(!r){const R=j?`${j}/${F}`:F;localStorage.setItem("pendingEventJoin",R),t("/login");return}try{let R=null,M=null;if(j){const V=i==null?void 0:i.find(H=>H.id===j);if(V)R=V;else{const z=(await Lt.post(`/leagues/join/${j}`,{user_id:r.uid,email:r.email,role:c||"coach"})).data;R={id:j,name:z.league_name||"League",role:c||"coach"},a&&a(R)}try{M=(await Lt.get(`/leagues/${j}/events/${F}`)).data}catch(H){throw((q=H.response)==null?void 0:q.status)===404?new Error("Event not found in league"):H}}else{for(const V of i||[])try{M=(await Lt.get(`/leagues/${V.id}/events/${F}`)).data,R=V;break}catch(H){(P=H.response)==null||P.status}if(!M)throw new Error("Event not found in any of your leagues")}if(M&&R)E(M),S(R),u(M),o(R.id),N("found"),localStorage.removeItem("pendingEventJoin"),setTimeout(()=>{t("/dashboard")},2e3);else throw new Error("Failed to set up event and league")}catch(R){x(R.message||"Failed to join event"),N("not_found")}finally{p(!1)}})()},[n,e,r,i,t,u,a,o,c]),d?m.jsx(Bf,{size:"medium"}):m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx(Ro,{className:"w-16 h-16 mx-auto mb-4 text-cyan-600"}),m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Join Event"})]}),I==="found"&&_&&A&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[m.jsx(K0,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),m.jsx("h2",{className:"text-lg font-semibold text-green-800 mb-2",children:"Successfully Joined!"}),m.jsx("p",{className:"text-green-700 mb-2",children:m.jsx("strong",{children:_.name})}),m.jsxs("p",{className:"text-green-600 text-sm",children:["League: ",A.name]})]}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Redirecting to your dashboard..."})]}),I==="not_found"&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[m.jsx(gC,{className:"w-8 h-8 mx-auto mb-2 text-red-600"}),m.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Unable to Join Event"}),m.jsx("p",{className:"text-red-700 mb-4",children:g||"This event link is invalid or expired."})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:()=>t("/join"),className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200",children:"Join League with Code"}),m.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-xl transition-colors duration-200",children:"Go to Dashboard"})]})]})]})})}function dU(){return m.jsx(qI,{children:m.jsx(gk,{children:m.jsx(vk,{children:m.jsx(xk,{children:m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsxs(wI,{children:[m.jsx(Gt,{path:"/",element:m.jsx(Xi,{to:"/welcome",replace:!0})}),m.jsx(Gt,{path:"/welcome",element:m.jsx(eU,{})}),m.jsx(Gt,{path:"/coach-dashboard",element:m.jsx(Xi,{to:"/players?tab=rankings",replace:!0})}),m.jsx(Gt,{path:"/roster",element:m.jsx(Xi,{to:"/players?tab=players",replace:!0})}),m.jsx(Gt,{path:"/schedule",element:m.jsx(Xi,{to:"/players?tab=players",replace:!0})}),m.jsx(Gt,{path:"/dashboard",element:m.jsx(Oa,{children:m.jsxs(m.Fragment,{children:[m.jsx(Tm,{}),m.jsx(bk,{})]})})}),m.jsx(Gt,{path:"/players",element:m.jsx(Oa,{children:m.jsxs(m.Fragment,{children:[m.jsx(Tm,{}),m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx(Nk,{})})]})})}),m.jsx(Gt,{path:"/admin",element:m.jsx(Oa,{children:m.jsxs(m.Fragment,{children:[m.jsx(Tm,{}),m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx($k,{})})]})})}),m.jsx(Gt,{path:"/live-entry",element:m.jsx(Oa,{children:m.jsx(nL,{})})}),m.jsx(Gt,{path:"/login",element:m.jsx(Xk,{})}),m.jsx(Gt,{path:"/signup",element:m.jsx(Jk,{})}),m.jsx(Gt,{path:"/forgot-password",element:m.jsx(tL,{})}),m.jsx(Gt,{path:"/claim",element:m.jsx(Lr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:m.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[m.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-6",style:{objectFit:"contain"}}),m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Account Claim"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Account claiming feature coming soon."}),m.jsx(gt,{to:"/welcome",className:"text-cyan-600 hover:text-cyan-700 underline font-semibold",children:"← Back to Welcome"})]})})}),m.jsx(Gt,{path:"/create-league",element:m.jsx(Oa,{children:m.jsx(iL,{})})}),m.jsx(Gt,{path:"/join",element:m.jsx(Oa,{children:m.jsx(ZV,{})})}),m.jsx(Gt,{path:"/verify-email",element:m.jsx(nU,{})}),m.jsx(Gt,{path:"/select-league",element:m.jsx(Oa,{children:m.jsx(rU,{})})}),m.jsx(Gt,{path:"/select-role",element:m.jsx(Oa,{children:m.jsx(sU,{})})}),m.jsx(Gt,{path:"/onboarding/event",element:m.jsx(Oa,{children:m.jsx(fU,{})})}),m.jsx(Gt,{path:"/join-event/:leagueId/:eventId",element:m.jsx(Ab,{})}),m.jsx(Gt,{path:"/join-event/:eventId",element:m.jsx(Ab,{})}),m.jsx(Gt,{path:"/help",element:m.jsx(Xi,{to:"/welcome",replace:!0})}),m.jsx(Gt,{path:"/terms",element:m.jsx(Xi,{to:"/welcome",replace:!0})}),m.jsx(Gt,{path:"/privacy",element:m.jsx(Xi,{to:"/welcome",replace:!0})})]})})})})})})}R4.createRoot(document.getElementById("root")).render(m.jsx(k.StrictMode,{children:m.jsx(dU,{})}));
