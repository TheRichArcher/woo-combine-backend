(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function dA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gp={exports:{}},Tc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function l4(){if(s_)return Tc;s_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Tc.Fragment=e,Tc.jsx=t,Tc.jsxs=t,Tc}var l_;function u4(){return l_||(l_=1,Gp.exports=l4()),Gp.exports}var v=u4(),qp={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function c4(){if(u_)return He;u_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,b={};function T(q,ce,ye){this.props=q,this.context=ce,this.refs=b,this.updater=ye||_}T.prototype.isReactComponent={},T.prototype.setState=function(q,ce){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ce,"setState")},T.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function S(){}S.prototype=T.prototype;function N(q,ce,ye){this.props=q,this.context=ce,this.refs=b,this.updater=ye||_}var P=N.prototype=new S;P.constructor=N,E(P,T.prototype),P.isPureReactComponent=!0;var j=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function D(q,ce,ye,de,Te,Ve){return ye=Ve.ref,{$$typeof:n,type:q,key:ce,ref:ye!==void 0?ye:null,props:Ve}}function R(q,ce){return D(q.type,ce,void 0,void 0,void 0,q.props)}function M(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function B(q){var ce={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ye){return ce[ye]})}var G=/\/+/g;function H(q,ce){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):ce.toString(36)}function k(){}function xe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(k,k):(q.status="pending",q.then(function(ce){q.status==="pending"&&(q.status="fulfilled",q.value=ce)},function(ce){q.status==="pending"&&(q.status="rejected",q.reason=ce)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ve(q,ce,ye,de,Te){var Ve=typeof q;(Ve==="undefined"||Ve==="boolean")&&(q=null);var Ie=!1;if(q===null)Ie=!0;else switch(Ve){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(q.$$typeof){case n:case e:Ie=!0;break;case p:return Ie=q._init,ve(Ie(q._payload),ce,ye,de,Te)}}if(Ie)return Te=Te(q),Ie=de===""?"."+H(q,0):de,j(Te)?(ye="",Ie!=null&&(ye=Ie.replace(G,"$&/")+"/"),ve(Te,ce,ye,"",function(dr){return dr})):Te!=null&&(M(Te)&&(Te=R(Te,ye+(Te.key==null||q&&q.key===Te.key?"":(""+Te.key).replace(G,"$&/")+"/")+Ie)),ce.push(Te)),1;Ie=0;var qt=de===""?".":de+":";if(j(q))for(var yt=0;yt<q.length;yt++)de=q[yt],Ve=qt+H(de,yt),Ie+=ve(de,ce,ye,Ve,Te);else if(yt=y(q),typeof yt=="function")for(q=yt.call(q),yt=0;!(de=q.next()).done;)de=de.value,Ve=qt+H(de,yt++),Ie+=ve(de,ce,ye,Ve,Te);else if(Ve==="object"){if(typeof q.then=="function")return ve(xe(q),ce,ye,de,Te);throw ce=String(q),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function J(q,ce,ye){if(q==null)return q;var de=[],Te=0;return ve(q,de,"","",function(Ve){return ce.call(ye,Ve,Te++)}),de}function ue(q){if(q._status===-1){var ce=q._result;ce=ce(),ce.then(function(ye){(q._status===0||q._status===-1)&&(q._status=1,q._result=ye)},function(ye){(q._status===0||q._status===-1)&&(q._status=2,q._result=ye)}),q._status===-1&&(q._status=0,q._result=ce)}if(q._status===1)return q._result.default;throw q._result}var fe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function Pe(){}return He.Children={map:J,forEach:function(q,ce,ye){J(q,function(){ce.apply(this,arguments)},ye)},count:function(q){var ce=0;return J(q,function(){ce++}),ce},toArray:function(q){return J(q,function(ce){return ce})||[]},only:function(q){if(!M(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},He.Component=T,He.Fragment=t,He.Profiler=i,He.PureComponent=N,He.StrictMode=r,He.Suspense=c,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,He.__COMPILER_RUNTIME={__proto__:null,c:function(q){return U.H.useMemoCache(q)}},He.cache=function(q){return function(){return q.apply(null,arguments)}},He.cloneElement=function(q,ce,ye){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var de=E({},q.props),Te=q.key,Ve=void 0;if(ce!=null)for(Ie in ce.ref!==void 0&&(Ve=void 0),ce.key!==void 0&&(Te=""+ce.key),ce)!X.call(ce,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ce.ref===void 0||(de[Ie]=ce[Ie]);var Ie=arguments.length-2;if(Ie===1)de.children=ye;else if(1<Ie){for(var qt=Array(Ie),yt=0;yt<Ie;yt++)qt[yt]=arguments[yt+2];de.children=qt}return D(q.type,Te,void 0,void 0,Ve,de)},He.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},He.createElement=function(q,ce,ye){var de,Te={},Ve=null;if(ce!=null)for(de in ce.key!==void 0&&(Ve=""+ce.key),ce)X.call(ce,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Te[de]=ce[de]);var Ie=arguments.length-2;if(Ie===1)Te.children=ye;else if(1<Ie){for(var qt=Array(Ie),yt=0;yt<Ie;yt++)qt[yt]=arguments[yt+2];Te.children=qt}if(q&&q.defaultProps)for(de in Ie=q.defaultProps,Ie)Te[de]===void 0&&(Te[de]=Ie[de]);return D(q,Ve,void 0,void 0,null,Te)},He.createRef=function(){return{current:null}},He.forwardRef=function(q){return{$$typeof:u,render:q}},He.isValidElement=M,He.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:ue}},He.memo=function(q,ce){return{$$typeof:h,type:q,compare:ce===void 0?null:ce}},He.startTransition=function(q){var ce=U.T,ye={};U.T=ye;try{var de=q(),Te=U.S;Te!==null&&Te(ye,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Pe,fe)}catch(Ve){fe(Ve)}finally{U.T=ce}},He.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},He.use=function(q){return U.H.use(q)},He.useActionState=function(q,ce,ye){return U.H.useActionState(q,ce,ye)},He.useCallback=function(q,ce){return U.H.useCallback(q,ce)},He.useContext=function(q){return U.H.useContext(q)},He.useDebugValue=function(){},He.useDeferredValue=function(q,ce){return U.H.useDeferredValue(q,ce)},He.useEffect=function(q,ce,ye){var de=U.H;if(typeof ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(q,ce)},He.useId=function(){return U.H.useId()},He.useImperativeHandle=function(q,ce,ye){return U.H.useImperativeHandle(q,ce,ye)},He.useInsertionEffect=function(q,ce){return U.H.useInsertionEffect(q,ce)},He.useLayoutEffect=function(q,ce){return U.H.useLayoutEffect(q,ce)},He.useMemo=function(q,ce){return U.H.useMemo(q,ce)},He.useOptimistic=function(q,ce){return U.H.useOptimistic(q,ce)},He.useReducer=function(q,ce,ye){return U.H.useReducer(q,ce,ye)},He.useRef=function(q){return U.H.useRef(q)},He.useState=function(q){return U.H.useState(q)},He.useSyncExternalStore=function(q,ce,ye){return U.H.useSyncExternalStore(q,ce,ye)},He.useTransition=function(){return U.H.useTransition()},He.version="19.1.0",He}var c_;function vf(){return c_||(c_=1,qp.exports=c4()),qp.exports}var F=vf();const Ng=dA(F);var Xp={exports:{}},Sc={},Wp={exports:{}},$p={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function f4(){return f_||(f_=1,function(n){function e(J,ue){var fe=J.length;J.push(ue);e:for(;0<fe;){var Pe=fe-1>>>1,q=J[Pe];if(0<i(q,ue))J[Pe]=ue,J[fe]=q,fe=Pe;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ue=J[0],fe=J.pop();if(fe!==ue){J[0]=fe;e:for(var Pe=0,q=J.length,ce=q>>>1;Pe<ce;){var ye=2*(Pe+1)-1,de=J[ye],Te=ye+1,Ve=J[Te];if(0>i(de,fe))Te<q&&0>i(Ve,de)?(J[Pe]=Ve,J[Te]=fe,Pe=Te):(J[Pe]=de,J[ye]=fe,Pe=ye);else if(Te<q&&0>i(Ve,fe))J[Pe]=Ve,J[Te]=fe,Pe=Te;else break e}}return ue}function i(J,ue){var fe=J.sortIndex-ue.sortIndex;return fe!==0?fe:J.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();n.unstable_now=function(){return s.now()-u}}var c=[],h=[],p=1,m=null,y=3,_=!1,E=!1,b=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function j(J){for(var ue=t(h);ue!==null;){if(ue.callback===null)r(h);else if(ue.startTime<=J)r(h),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=t(h)}}function U(J){if(b=!1,j(J),!E)if(t(c)!==null)E=!0,X||(X=!0,H());else{var ue=t(h);ue!==null&&ve(U,ue.startTime-J)}}var X=!1,D=-1,R=5,M=-1;function B(){return T?!0:!(n.unstable_now()-M<R)}function G(){if(T=!1,X){var J=n.unstable_now();M=J;var ue=!0;try{e:{E=!1,b&&(b=!1,N(D),D=-1),_=!0;var fe=y;try{t:{for(j(J),m=t(c);m!==null&&!(m.expirationTime>J&&B());){var Pe=m.callback;if(typeof Pe=="function"){m.callback=null,y=m.priorityLevel;var q=Pe(m.expirationTime<=J);if(J=n.unstable_now(),typeof q=="function"){m.callback=q,j(J),ue=!0;break t}m===t(c)&&r(c),j(J)}else r(c);m=t(c)}if(m!==null)ue=!0;else{var ce=t(h);ce!==null&&ve(U,ce.startTime-J),ue=!1}}break e}finally{m=null,y=fe,_=!1}ue=void 0}}finally{ue?H():X=!1}}}var H;if(typeof P=="function")H=function(){P(G)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,xe=k.port2;k.port1.onmessage=G,H=function(){xe.postMessage(null)}}else H=function(){S(G,0)};function ve(J,ue){D=S(function(){J(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(J){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var fe=y;y=ue;try{return J()}finally{y=fe}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var fe=y;y=J;try{return ue()}finally{y=fe}},n.unstable_scheduleCallback=function(J,ue,fe){var Pe=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Pe+fe:Pe):fe=Pe,J){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=fe+q,J={id:p++,callback:ue,priorityLevel:J,startTime:fe,expirationTime:q,sortIndex:-1},fe>Pe?(J.sortIndex=fe,e(h,J),t(c)===null&&J===t(h)&&(b?(N(D),D=-1):b=!0,ve(U,fe-Pe))):(J.sortIndex=q,e(c,J),E||_||(E=!0,X||(X=!0,H()))),J},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(J){var ue=y;return function(){var fe=y;y=ue;try{return J.apply(this,arguments)}finally{y=fe}}}}($p)),$p}var h_;function h4(){return h_||(h_=1,Wp.exports=f4()),Wp.exports}var Yp={exports:{}},Qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function d4(){if(d_)return Qn;d_=1;var n=vf();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:c,containerInfo:h,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qn.createPortal=function(c,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(c,h,null,p)},Qn.flushSync=function(c){var h=s.T,p=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=h,r.p=p,r.d.f()}},Qn.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},Qn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Qn.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:_}):p==="script"&&r.d.X(c,{crossOrigin:m,integrity:y,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Qn.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},Qn.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(c,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Qn.preloadModule=function(c,h){if(typeof c=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},Qn.requestFormReset=function(c){r.d.r(c)},Qn.unstable_batchedUpdates=function(c,h){return c(h)},Qn.useFormState=function(c,h,p){return s.H.useFormState(c,h,p)},Qn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Qn.version="19.1.0",Qn}var p_;function p4(){if(p_)return Yp.exports;p_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yp.exports=d4(),Yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function m4(){if(m_)return Sc;m_=1;var n=h4(),e=vf(),t=p4();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(a(o)!==o)throw Error(r(188))}function c(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(r(188));return l!==o?null:o}for(var f=o,d=l;;){var x=f.return;if(x===null)break;var w=x.alternate;if(w===null){if(d=x.return,d!==null){f=d;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===f)return u(x),o;if(w===d)return u(x),l;w=w.sibling}throw Error(r(188))}if(f.return!==d.return)f=x,d=w;else{for(var I=!1,O=x.child;O;){if(O===f){I=!0,f=x,d=w;break}if(O===d){I=!0,d=x,f=w;break}O=O.sibling}if(!I){for(O=w.child;O;){if(O===f){I=!0,f=w,d=x;break}if(O===d){I=!0,d=w,f=x;break}O=O.sibling}if(!I)throw Error(r(189))}}if(f.alternate!==d)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),P=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var k=Symbol.for("react.client.reference");function xe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===k?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case E:return"Fragment";case T:return"Profiler";case b:return"StrictMode";case U:return"Suspense";case X:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case P:return(o.displayName||"Context")+".Provider";case N:return(o._context.displayName||"Context")+".Consumer";case j:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return l=o.displayName||null,l!==null?l:xe(o.type)||"Memo";case R:l=o._payload,o=o._init;try{return xe(o(l))}catch{}}return null}var ve=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Pe=[],q=-1;function ce(o){return{current:o}}function ye(o){0>q||(o.current=Pe[q],Pe[q]=null,q--)}function de(o,l){q++,Pe[q]=o.current,o.current=l}var Te=ce(null),Ve=ce(null),Ie=ce(null),qt=ce(null);function yt(o,l){switch(de(Ie,l),de(Ve,o),de(Te,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?kx(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=kx(l),o=Lx(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ye(Te),de(Te,o)}function dr(){ye(Te),ye(Ve),ye(Ie)}function xi(o){o.memoizedState!==null&&de(qt,o);var l=Te.current,f=Lx(l,o.type);l!==f&&(de(Ve,o),de(Te,f))}function ei(o){Ve.current===o&&(ye(Te),ye(Ve)),qt.current===o&&(ye(qt),_c._currentValue=fe)}var Yi=Object.prototype.hasOwnProperty,ti=n.unstable_scheduleCallback,_i=n.unstable_cancelCallback,jo=n.unstable_shouldYield,Sr=n.unstable_requestPaint,pr=n.unstable_now,yu=n.unstable_getCurrentPriorityLevel,Bo=n.unstable_ImmediatePriority,Ua=n.unstable_UserBlockingPriority,mr=n.unstable_NormalPriority,Vs=n.unstable_LowPriority,Ae=n.unstable_IdlePriority,Fe=n.log,Xt=n.unstable_setDisableYieldValue,Je=null,Ze=null;function Mt(o){if(typeof Fe=="function"&&Xt(o),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Je,o)}catch{}}var Sn=Math.clz32?Math.clz32:ni,Vo=Math.log,xu=Math.LN2;function ni(o){return o>>>=0,o===0?32:31-(Vo(o)/xu|0)|0}var Ki=256,Uo=4194304;function ri(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Us(o,l,f){var d=o.pendingLanes;if(d===0)return 0;var x=0,w=o.suspendedLanes,I=o.pingedLanes;o=o.warmLanes;var O=d&134217727;return O!==0?(d=O&~w,d!==0?x=ri(d):(I&=O,I!==0?x=ri(I):f||(f=O&~o,f!==0&&(x=ri(f))))):(O=d&~w,O!==0?x=ri(O):I!==0?x=ri(I):f||(f=d&~o,f!==0&&(x=ri(f)))),x===0?0:l!==0&&l!==x&&(l&w)===0&&(w=x&-x,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:x}function Fo(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function _u(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wu(){var o=Ki;return Ki<<=1,(Ki&4194048)===0&&(Ki=256),o}function Eu(){var o=Uo;return Uo<<=1,(Uo&62914560)===0&&(Uo=4194304),o}function Qi(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function Zi(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Au(o,l,f,d,x,w){var I=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var O=o.entanglements,z=o.expirationTimes,Q=o.hiddenUpdates;for(f=I&~f;0<f;){var ae=31-Sn(f),se=1<<ae;O[ae]=0,z[ae]=-1;var ee=Q[ae];if(ee!==null)for(Q[ae]=null,ae=0;ae<ee.length;ae++){var te=ee[ae];te!==null&&(te.lane&=-536870913)}f&=~se}d!==0&&wi(o,d,0),w!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=w&~(I&~l))}function wi(o,l,f){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Sn(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|f&4194090}function bu(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var d=31-Sn(f),x=1<<d;x&l|o[d]&l&&(o[d]|=l),f&=~x}}function Fa(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Fs(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Ha(){var o=ue.p;return o!==0?o:(o=window.event,o===void 0?32:t_(o.type))}function kf(o,l){var f=ue.p;try{return ue.p=o,l()}finally{ue.p=f}}var kt=Math.random().toString(36).slice(2),hn="__reactFiber$"+kt,an="__reactProps$"+kt,kr="__reactContainer$"+kt,Tu="__reactEvents$"+kt,W0="__reactListeners$"+kt,za="__reactHandles$"+kt,Lf="__reactResources$"+kt,Ho="__reactMarker$"+kt;function Ga(o){delete o[hn],delete o[an],delete o[Tu],delete o[W0],delete o[za]}function Ji(o){var l=o[hn];if(l)return l;for(var f=o.parentNode;f;){if(l=f[kr]||f[hn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=Ux(o);o!==null;){if(f=o[hn])return f;o=Ux(o)}return l}o=f,f=o.parentNode}return null}function Ei(o){if(o=o[hn]||o[kr]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Ai(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function ar(o){var l=o[Lf];return l||(l=o[Lf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Zt(o){o[Ho]=!0}var Su=new Set,Hs={};function ii(o,l){ea(o,l),ea(o+"Capture",l)}function ea(o,l){for(Hs[o]=l,o=0;o<l.length;o++)Su.add(l[o])}var jf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bf={},zo={};function Vf(o){return Yi.call(zo,o)?!0:Yi.call(Bf,o)?!1:jf.test(o)?zo[o]=!0:(Bf[o]=!0,!1)}function qa(o,l,f){if(Vf(l))if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+f)}}function bi(o,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+f)}}function Vn(o,l,f,d){if(d===null)o.removeAttribute(f);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(l,f,""+d)}}var Go,Uf;function ta(o){if(Go===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Go=l&&l[1]||"",Uf=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Go+o+Uf}var zs=!1;function Gs(o,l){if(!o||zs)return"";zs=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(te){var ee=te}Reflect.construct(o,[],se)}else{try{se.call()}catch(te){ee=te}o.call(se.prototype)}}else{try{throw Error()}catch(te){ee=te}(se=o())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),I=w[0],O=w[1];if(I&&O){var z=I.split(`
`),Q=O.split(`
`);for(x=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;x<Q.length&&!Q[x].includes("DetermineComponentFrameRoot");)x++;if(d===z.length||x===Q.length)for(d=z.length-1,x=Q.length-1;1<=d&&0<=x&&z[d]!==Q[x];)x--;for(;1<=d&&0<=x;d--,x--)if(z[d]!==Q[x]){if(d!==1||x!==1)do if(d--,x--,0>x||z[d]!==Q[x]){var ae=`
`+z[d].replace(" at new "," at ");return o.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",o.displayName)),ae}while(1<=d&&0<=x);break}}}finally{zs=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?ta(f):""}function Cu(o){switch(o.tag){case 26:case 27:case 5:return ta(o.type);case 16:return ta("Lazy");case 13:return ta("Suspense");case 19:return ta("SuspenseList");case 0:case 15:return Gs(o.type,!1);case 11:return Gs(o.type.render,!1);case 1:return Gs(o.type,!0);case 31:return ta("Activity");default:return""}}function qs(o){try{var l="";do l+=Cu(o),o=o.return;while(o);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function or(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Iu(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function $0(o){var l=Iu(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),d=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,w=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(I){d=""+I,w.call(this,I)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return d},setValue:function(I){d=""+I},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Xs(o){o._valueTracker||(o._valueTracker=$0(o))}function Nu(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),d="";return o&&(d=Iu(o)?o.checked?"true":"false":o.value),o=d,o!==f?(l.setValue(o),!0):!1}function qo(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Y0=/[\n"\\]/g;function on(o){return o.replace(Y0,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Cr(o,l,f,d,x,w,I,O){o.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.type=I:o.removeAttribute("type"),l!=null?I==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+or(l)):o.value!==""+or(l)&&(o.value=""+or(l)):I!=="submit"&&I!=="reset"||o.removeAttribute("value"),l!=null?Xa(o,I,or(l)):f!=null?Xa(o,I,or(f)):d!=null&&o.removeAttribute("value"),x==null&&w!=null&&(o.defaultChecked=!!w),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+or(O):o.removeAttribute("name")}function Xo(o,l,f,d,x,w,I,O){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;f=f!=null?""+or(f):"",l=l!=null?""+or(l):f,O||l===o.value||(o.value=l),o.defaultValue=l}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=O?o.checked:!!d,o.defaultChecked=!!d,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(o.name=I)}function Xa(o,l,f){l==="number"&&qo(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function na(o,l,f,d){if(o=o.options,l){l={};for(var x=0;x<f.length;x++)l["$"+f[x]]=!0;for(f=0;f<o.length;f++)x=l.hasOwnProperty("$"+o[f].value),o[f].selected!==x&&(o[f].selected=x),x&&d&&(o[f].defaultSelected=!0)}else{for(f=""+or(f),l=null,x=0;x<o.length;x++){if(o[x].value===f){o[x].selected=!0,d&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function xt(o,l,f){if(l!=null&&(l=""+or(l),l!==o.value&&(o.value=l),f==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=f!=null?""+or(f):""}function Wo(o,l,f,d){if(l==null){if(d!=null){if(f!=null)throw Error(r(92));if(ve(d)){if(1<d.length)throw Error(r(93));d=d[0]}f=d}f==null&&(f=""),l=f}f=or(l),o.defaultValue=f,d=o.textContent,d===f&&d!==""&&d!==null&&(o.value=d)}function Lr(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var $o=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ff(o,l,f){var d=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,f):typeof f!="number"||f===0||$o.has(l)?l==="float"?o.cssFloat=f:o[l]=(""+f).trim():o[l]=f+"px"}function Ru(o,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,f!=null){for(var d in f)!f.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var x in l)d=l[x],l.hasOwnProperty(x)&&f[x]!==d&&Ff(o,x,d)}else for(var w in l)l.hasOwnProperty(w)&&Ff(o,w,l[w])}function Ou(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(o){return Q0.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var ra=null;function jr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ia=null,aa=null;function Du(o){var l=Ei(o);if(l&&(o=l.stateNode)){var f=o[an]||null;e:switch(o=l.stateNode,l.type){case"input":if(Cr(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+on(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var d=f[l];if(d!==o&&d.form===o.form){var x=d[an]||null;if(!x)throw Error(r(90));Cr(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<f.length;l++)d=f[l],d.form===o.form&&Nu(d)}break e;case"textarea":xt(o,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&na(o,!!f.multiple,l,!1)}}}var Ti=!1;function Hf(o,l,f){if(Ti)return o(l,f);Ti=!0;try{var d=o(l);return d}finally{if(Ti=!1,(ia!==null||aa!==null)&&(kh(),ia&&(l=ia,o=aa,aa=ia=null,Du(l),o)))for(l=0;l<o.length;l++)Du(o[l])}}function Yo(o,l){var f=o.stateNode;if(f===null)return null;var d=f[an]||null;if(d===null)return null;f=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(ai)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){Br=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{Br=!1}var Si=null,Wa=null,oa=null;function Pu(){if(oa)return oa;var o,l=Wa,f=l.length,d,x="value"in Si?Si.value:Si.textContent,w=x.length;for(o=0;o<f&&l[o]===x[o];o++);var I=f-o;for(d=1;d<=I&&l[f-d]===x[w-d];d++);return oa=x.slice(o,1<d?1-d:void 0)}function Ci(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ii(){return!0}function Mu(){return!1}function Cn(o){function l(f,d,x,w,I){this._reactName=f,this._targetInst=x,this.type=d,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(f=o[O],this[O]=f?f(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ii:Mu,this.isPropagationStopped=Mu,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),l}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$s=Cn(ft),Qo=p({},ft,{view:0,detail:0}),zf=Cn(Qo),Ys,Ks,Ni,Zo=p({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ni&&(Ni&&o.type==="mousemove"?(Ys=o.screenX-Ni.screenX,Ks=o.screenY-Ni.screenY):Ks=Ys=0,Ni=o),Ys)},movementY:function(o){return"movementY"in o?o.movementY:Ks}}),Vr=Cn(Zo),Gf=p({},Zo,{dataTransfer:0}),Z0=Cn(Gf),Jo=p({},Qo,{relatedTarget:0}),Qs=Cn(Jo),ku=p({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),Zs=Cn(ku),qf=p({},ft,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Js=Cn(qf),J0=p({},ft,{data:0}),Lu=Cn(J0),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Wf[o])?!!l[o]:!1}function ts(){return ju}var $f=p({},Qo,{key:function(o){if(o.key){var l=es[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ci(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Xf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(o){return o.type==="keypress"?Ci(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ci(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),el=Cn($f),Yf=p({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=Cn(Yf),sa=p({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Kf=Cn(sa),Qf=p({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zf=Cn(Qf),Jf=p({},Zo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),tl=Cn(Jf),sr=p({},ft,{newState:0,oldState:0}),eh=Cn(sr),th=[9,13,27,32],Ri=ai&&"CompositionEvent"in window,g=null;ai&&"documentMode"in document&&(g=document.documentMode);var A=ai&&"TextEvent"in window&&!g,C=ai&&(!Ri||g&&8<g&&11>=g),L=" ",Y=!1;function ne(o,l){switch(o){case"keyup":return th.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var et=!1;function dn(o,l){switch(o){case"compositionend":return me(l);case"keypress":return l.which!==32?null:(Y=!0,L);case"textInput":return o=l.data,o===L&&Y?null:o;default:return null}}function tt(o,l){if(et)return o==="compositionend"||!Ri&&ne(o,l)?(o=Pu(),oa=Wa=Si=null,et=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return C&&l.locale!=="ko"?null:l.data;default:return null}}var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pn(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!In[o.type]:l==="textarea"}function la(o,l,f,d){ia?aa?aa.push(d):aa=[d]:ia=d,l=Fh(l,"onChange"),0<l.length&&(f=new $s("onChange","change",null,f,d),o.push({event:f,listeners:l}))}var Un=null,Oi=null;function Vu(o){Rx(o,0)}function nh(o){var l=Ai(o);if(Nu(l))return o}function Qv(o,l){if(o==="change")return l}var Zv=!1;if(ai){var e1;if(ai){var t1="oninput"in document;if(!t1){var Jv=document.createElement("div");Jv.setAttribute("oninput","return;"),t1=typeof Jv.oninput=="function"}e1=t1}else e1=!1;Zv=e1&&(!document.documentMode||9<document.documentMode)}function ey(){Un&&(Un.detachEvent("onpropertychange",ty),Oi=Un=null)}function ty(o){if(o.propertyName==="value"&&nh(Oi)){var l=[];la(l,Oi,o,jr(o)),Hf(Vu,l)}}function BC(o,l,f){o==="focusin"?(ey(),Un=l,Oi=f,Un.attachEvent("onpropertychange",ty)):o==="focusout"&&ey()}function VC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return nh(Oi)}function UC(o,l){if(o==="click")return nh(l)}function FC(o,l){if(o==="input"||o==="change")return nh(l)}function HC(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Ir=typeof Object.is=="function"?Object.is:HC;function Uu(o,l){if(Ir(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),d=Object.keys(l);if(f.length!==d.length)return!1;for(d=0;d<f.length;d++){var x=f[d];if(!Yi.call(l,x)||!Ir(o[x],l[x]))return!1}return!0}function ny(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ry(o,l){var f=ny(o);o=0;for(var d;f;){if(f.nodeType===3){if(d=o+f.textContent.length,o<=l&&d>=l)return{node:f,offset:l-o};o=d}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=ny(f)}}function iy(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?iy(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function ay(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=qo(o.document);l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=qo(o.document)}return l}function n1(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var zC=ai&&"documentMode"in document&&11>=document.documentMode,nl=null,r1=null,Fu=null,i1=!1;function oy(o,l,f){var d=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;i1||nl==null||nl!==qo(d)||(d=nl,"selectionStart"in d&&n1(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Fu&&Uu(Fu,d)||(Fu=d,d=Fh(r1,"onSelect"),0<d.length&&(l=new $s("onSelect","select",null,l,f),o.push({event:l,listeners:d}),l.target=nl)))}function ns(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var rl={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},a1={},sy={};ai&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function rs(o){if(a1[o])return a1[o];if(!rl[o])return o;var l=rl[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in sy)return a1[o]=l[f];return o}var ly=rs("animationend"),uy=rs("animationiteration"),cy=rs("animationstart"),GC=rs("transitionrun"),qC=rs("transitionstart"),XC=rs("transitioncancel"),fy=rs("transitionend"),hy=new Map,o1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o1.push("scrollEnd");function oi(o,l){hy.set(o,l),ii(l,[o])}var dy=new WeakMap;function Ur(o,l){if(typeof o=="object"&&o!==null){var f=dy.get(o);return f!==void 0?f:(l={value:o,source:l,stack:qs(l)},dy.set(o,l),l)}return{value:o,source:l,stack:qs(l)}}var Fr=[],il=0,s1=0;function rh(){for(var o=il,l=s1=il=0;l<o;){var f=Fr[l];Fr[l++]=null;var d=Fr[l];Fr[l++]=null;var x=Fr[l];Fr[l++]=null;var w=Fr[l];if(Fr[l++]=null,d!==null&&x!==null){var I=d.pending;I===null?x.next=x:(x.next=I.next,I.next=x),d.pending=x}w!==0&&py(f,x,w)}}function ih(o,l,f,d){Fr[il++]=o,Fr[il++]=l,Fr[il++]=f,Fr[il++]=d,s1|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function l1(o,l,f,d){return ih(o,l,f,d),ah(o)}function al(o,l){return ih(o,null,null,l),ah(o)}function py(o,l,f){o.lanes|=f;var d=o.alternate;d!==null&&(d.lanes|=f);for(var x=!1,w=o.return;w!==null;)w.childLanes|=f,d=w.alternate,d!==null&&(d.childLanes|=f),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(x=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,x&&l!==null&&(x=31-Sn(f),o=w.hiddenUpdates,d=o[x],d===null?o[x]=[l]:d.push(l),l.lane=f|536870912),w):null}function ah(o){if(50<hc)throw hc=0,pp=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var ol={};function WC(o,l,f,d){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(o,l,f,d){return new WC(o,l,f,d)}function u1(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ua(o,l){var f=o.alternate;return f===null?(f=Nr(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function my(o,l){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,l=f.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function oh(o,l,f,d,x,w){var I=0;if(d=o,typeof o=="function")u1(o)&&(I=1);else if(typeof o=="string")I=Y3(o,f,Te.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case M:return o=Nr(31,f,l,x),o.elementType=M,o.lanes=w,o;case E:return is(f.children,x,w,l);case b:I=8,x|=24;break;case T:return o=Nr(12,f,l,x|2),o.elementType=T,o.lanes=w,o;case U:return o=Nr(13,f,l,x),o.elementType=U,o.lanes=w,o;case X:return o=Nr(19,f,l,x),o.elementType=X,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case P:I=10;break e;case N:I=9;break e;case j:I=11;break e;case D:I=14;break e;case R:I=16,d=null;break e}I=29,f=Error(r(130,o===null?"null":typeof o,"")),d=null}return l=Nr(I,f,l,x),l.elementType=o,l.type=d,l.lanes=w,l}function is(o,l,f,d){return o=Nr(7,o,d,l),o.lanes=f,o}function c1(o,l,f){return o=Nr(6,o,null,l),o.lanes=f,o}function f1(o,l,f){return l=Nr(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var sl=[],ll=0,sh=null,lh=0,Hr=[],zr=0,as=null,ca=1,fa="";function os(o,l){sl[ll++]=lh,sl[ll++]=sh,sh=o,lh=l}function gy(o,l,f){Hr[zr++]=ca,Hr[zr++]=fa,Hr[zr++]=as,as=o;var d=ca;o=fa;var x=32-Sn(d)-1;d&=~(1<<x),f+=1;var w=32-Sn(l)+x;if(30<w){var I=x-x%5;w=(d&(1<<I)-1).toString(32),d>>=I,x-=I,ca=1<<32-Sn(l)+x|f<<x|d,fa=w+o}else ca=1<<w|f<<x|d,fa=o}function h1(o){o.return!==null&&(os(o,1),gy(o,1,0))}function d1(o){for(;o===sh;)sh=sl[--ll],sl[ll]=null,lh=sl[--ll],sl[ll]=null;for(;o===as;)as=Hr[--zr],Hr[zr]=null,fa=Hr[--zr],Hr[zr]=null,ca=Hr[--zr],Hr[zr]=null}var lr=null,Wt=null,lt=!1,ss=null,Di=!1,p1=Error(r(519));function ls(o){var l=Error(r(418,""));throw Gu(Ur(l,o)),p1}function vy(o){var l=o.stateNode,f=o.type,d=o.memoizedProps;switch(l[hn]=o,l[an]=d,f){case"dialog":Ye("cancel",l),Ye("close",l);break;case"iframe":case"object":case"embed":Ye("load",l);break;case"video":case"audio":for(f=0;f<pc.length;f++)Ye(pc[f],l);break;case"source":Ye("error",l);break;case"img":case"image":case"link":Ye("error",l),Ye("load",l);break;case"details":Ye("toggle",l);break;case"input":Ye("invalid",l),Xo(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Xs(l);break;case"select":Ye("invalid",l);break;case"textarea":Ye("invalid",l),Wo(l,d.value,d.defaultValue,d.children),Xs(l)}f=d.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||d.suppressHydrationWarning===!0||Mx(l.textContent,f)?(d.popover!=null&&(Ye("beforetoggle",l),Ye("toggle",l)),d.onScroll!=null&&Ye("scroll",l),d.onScrollEnd!=null&&Ye("scrollend",l),d.onClick!=null&&(l.onclick=Hh),l=!0):l=!1,l||ls(o)}function yy(o){for(lr=o.return;lr;)switch(lr.tag){case 5:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:lr=lr.return}}function Hu(o){if(o!==lr)return!1;if(!lt)return yy(o),lt=!0,!1;var l=o.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Rp(o.type,o.memoizedProps)),f=!f),f&&Wt&&ls(o),yy(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(l===0){Wt=li(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;o=o.nextSibling}Wt=null}}else l===27?(l=Wt,uo(o.type)?(o=Mp,Mp=null,Wt=o):Wt=l):Wt=lr?li(o.stateNode.nextSibling):null;return!0}function zu(){Wt=lr=null,lt=!1}function xy(){var o=ss;return o!==null&&(yr===null?yr=o:yr.push.apply(yr,o),ss=null),o}function Gu(o){ss===null?ss=[o]:ss.push(o)}var m1=ce(null),us=null,ha=null;function $a(o,l,f){de(m1,l._currentValue),l._currentValue=f}function da(o){o._currentValue=m1.current,ye(m1)}function g1(o,l,f){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===f)break;o=o.return}}function v1(o,l,f,d){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var w=x.dependencies;if(w!==null){var I=x.child;w=w.firstContext;e:for(;w!==null;){var O=w;w=x;for(var z=0;z<l.length;z++)if(O.context===l[z]){w.lanes|=f,O=w.alternate,O!==null&&(O.lanes|=f),g1(w.return,f,o),d||(I=null);break e}w=O.next}}else if(x.tag===18){if(I=x.return,I===null)throw Error(r(341));I.lanes|=f,w=I.alternate,w!==null&&(w.lanes|=f),g1(I,f,o),I=null}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===o){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}}function qu(o,l,f,d){o=null;for(var x=l,w=!1;x!==null;){if(!w){if((x.flags&524288)!==0)w=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var I=x.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var O=x.type;Ir(x.pendingProps.value,I.value)||(o!==null?o.push(O):o=[O])}}else if(x===qt.current){if(I=x.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(_c):o=[_c])}x=x.return}o!==null&&v1(l,o,f,d),l.flags|=262144}function uh(o){for(o=o.firstContext;o!==null;){if(!Ir(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function cs(o){us=o,ha=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Kn(o){return _y(us,o)}function ch(o,l){return us===null&&cs(o),_y(o,l)}function _y(o,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ha===null){if(o===null)throw Error(r(308));ha=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else ha=ha.next=l;return f}var $C=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(f,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(f){return f()})}},YC=n.unstable_scheduleCallback,KC=n.unstable_NormalPriority,mn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function y1(){return{controller:new $C,data:new Map,refCount:0}}function Xu(o){o.refCount--,o.refCount===0&&YC(KC,function(){o.controller.abort()})}var Wu=null,x1=0,ul=0,cl=null;function QC(o,l){if(Wu===null){var f=Wu=[];x1=0,ul=wp(),cl={status:"pending",value:void 0,then:function(d){f.push(d)}}}return x1++,l.then(wy,wy),l}function wy(){if(--x1===0&&Wu!==null){cl!==null&&(cl.status="fulfilled");var o=Wu;Wu=null,ul=0,cl=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function ZC(o,l){var f=[],d={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var x=0;x<f.length;x++)(0,f[x])(l)},function(x){for(d.status="rejected",d.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),d}var Ey=J.S;J.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&QC(o,l),Ey!==null&&Ey(o,l)};var fs=ce(null);function _1(){var o=fs.current;return o!==null?o:St.pooledCache}function fh(o,l){l===null?de(fs,fs.current):de(fs,l.pool)}function Ay(){var o=_1();return o===null?null:{parent:mn._currentValue,pool:o}}var $u=Error(r(460)),by=Error(r(474)),hh=Error(r(542)),w1={then:function(){}};function Ty(o){return o=o.status,o==="fulfilled"||o==="rejected"}function dh(){}function Sy(o,l,f){switch(f=o[f],f===void 0?o.push(l):f!==l&&(l.then(dh,dh),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Iy(o),o;default:if(typeof l.status=="string")l.then(dh,dh);else{if(o=St,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=d}},function(d){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Iy(o),o}throw Yu=l,$u}}var Yu=null;function Cy(){if(Yu===null)throw Error(r(459));var o=Yu;return Yu=null,o}function Iy(o){if(o===$u||o===hh)throw Error(r(483))}var Ya=!1;function E1(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function A1(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ka(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Qa(o,l,f){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(pt&2)!==0){var x=d.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),d.pending=l,l=ah(o),py(o,null,f),l}return ih(o,d,l,f),ah(o)}function Ku(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var d=l.lanes;d&=o.pendingLanes,f|=d,l.lanes=f,bu(o,f)}}function b1(o,l){var f=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,f===d)){var x=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var I={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?x=w=I:w=w.next=I,f=f.next}while(f!==null);w===null?x=w=l:w=w.next=l}else x=w=l;f={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}var T1=!1;function Qu(){if(T1){var o=cl;if(o!==null)throw o}}function Zu(o,l,f,d){T1=!1;var x=o.updateQueue;Ya=!1;var w=x.firstBaseUpdate,I=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var z=O,Q=z.next;z.next=null,I===null?w=Q:I.next=Q,I=z;var ae=o.alternate;ae!==null&&(ae=ae.updateQueue,O=ae.lastBaseUpdate,O!==I&&(O===null?ae.firstBaseUpdate=Q:O.next=Q,ae.lastBaseUpdate=z))}if(w!==null){var se=x.baseState;I=0,ae=Q=z=null,O=w;do{var ee=O.lane&-536870913,te=ee!==O.lane;if(te?(nt&ee)===ee:(d&ee)===ee){ee!==0&&ee===ul&&(T1=!0),ae!==null&&(ae=ae.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Me=o,Ne=O;ee=l;var Et=f;switch(Ne.tag){case 1:if(Me=Ne.payload,typeof Me=="function"){se=Me.call(Et,se,ee);break e}se=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ne.payload,ee=typeof Me=="function"?Me.call(Et,se,ee):Me,ee==null)break e;se=p({},se,ee);break e;case 2:Ya=!0}}ee=O.callback,ee!==null&&(o.flags|=64,te&&(o.flags|=8192),te=x.callbacks,te===null?x.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ae===null?(Q=ae=te,z=se):ae=ae.next=te,I|=ee;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;te=O,O=te.next,te.next=null,x.lastBaseUpdate=te,x.shared.pending=null}}while(!0);ae===null&&(z=se),x.baseState=z,x.firstBaseUpdate=Q,x.lastBaseUpdate=ae,w===null&&(x.shared.lanes=0),ao|=I,o.lanes=I,o.memoizedState=se}}function Ny(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Ry(o,l){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)Ny(f[o],l)}var fl=ce(null),ph=ce(0);function Oy(o,l){o=_a,de(ph,o),de(fl,l),_a=o|l.baseLanes}function S1(){de(ph,_a),de(fl,fl.current)}function C1(){_a=ph.current,ye(fl),ye(ph)}var Za=0,ze=null,_t=null,sn=null,mh=!1,hl=!1,hs=!1,gh=0,Ju=0,dl=null,JC=0;function Jt(){throw Error(r(321))}function I1(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!Ir(o[f],l[f]))return!1;return!0}function N1(o,l,f,d,x,w){return Za=w,ze=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,J.H=o===null||o.memoizedState===null?p2:m2,hs=!1,w=f(d,x),hs=!1,hl&&(w=Py(l,f,d,x)),Dy(o),w}function Dy(o){J.H=Eh;var l=_t!==null&&_t.next!==null;if(Za=0,sn=_t=ze=null,mh=!1,Ju=0,dl=null,l)throw Error(r(300));o===null||Nn||(o=o.dependencies,o!==null&&uh(o)&&(Nn=!0))}function Py(o,l,f,d){ze=o;var x=0;do{if(hl&&(dl=null),Ju=0,hl=!1,25<=x)throw Error(r(301));if(x+=1,sn=_t=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}J.H=o3,w=l(f,d)}while(hl);return w}function e3(){var o=J.H,l=o.useState()[0];return l=typeof l.then=="function"?ec(l):l,o=o.useState()[0],(_t!==null?_t.memoizedState:null)!==o&&(ze.flags|=1024),l}function R1(){var o=gh!==0;return gh=0,o}function O1(o,l,f){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~f}function D1(o){if(mh){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}mh=!1}Za=0,sn=_t=ze=null,hl=!1,Ju=gh=0,dl=null}function gr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?ze.memoizedState=sn=o:sn=sn.next=o,sn}function ln(){if(_t===null){var o=ze.alternate;o=o!==null?o.memoizedState:null}else o=_t.next;var l=sn===null?ze.memoizedState:sn.next;if(l!==null)sn=l,_t=o;else{if(o===null)throw ze.alternate===null?Error(r(467)):Error(r(310));_t=o,o={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},sn===null?ze.memoizedState=sn=o:sn=sn.next=o}return sn}function P1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(o){var l=Ju;return Ju+=1,dl===null&&(dl=[]),o=Sy(dl,o,l),l=ze,(sn===null?l.memoizedState:sn.next)===null&&(l=l.alternate,J.H=l===null||l.memoizedState===null?p2:m2),o}function vh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ec(o);if(o.$$typeof===P)return Kn(o)}throw Error(r(438,String(o)))}function M1(o){var l=null,f=ze.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var d=ze.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=P1(),ze.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(o),d=0;d<o;d++)f[d]=B;return l.index++,f}function pa(o,l){return typeof l=="function"?l(o):l}function yh(o){var l=ln();return k1(l,_t,o)}function k1(o,l,f){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=f;var x=o.baseQueue,w=d.pending;if(w!==null){if(x!==null){var I=x.next;x.next=w.next,w.next=I}l.baseQueue=x=w,d.pending=null}if(w=o.baseState,x===null)o.memoizedState=w;else{l=x.next;var O=I=null,z=null,Q=l,ae=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(nt&se)===se:(Za&se)===se){var ee=Q.revertLane;if(ee===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===ul&&(ae=!0);else if((Za&ee)===ee){Q=Q.next,ee===ul&&(ae=!0);continue}else se={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(O=z=se,I=w):z=z.next=se,ze.lanes|=ee,ao|=ee;se=Q.action,hs&&f(w,se),w=Q.hasEagerState?Q.eagerState:f(w,se)}else ee={lane:se,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(O=z=ee,I=w):z=z.next=ee,ze.lanes|=se,ao|=se;Q=Q.next}while(Q!==null&&Q!==l);if(z===null?I=w:z.next=O,!Ir(w,o.memoizedState)&&(Nn=!0,ae&&(f=cl,f!==null)))throw f;o.memoizedState=w,o.baseState=I,o.baseQueue=z,d.lastRenderedState=w}return x===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function L1(o){var l=ln(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var d=f.dispatch,x=f.pending,w=l.memoizedState;if(x!==null){f.pending=null;var I=x=x.next;do w=o(w,I.action),I=I.next;while(I!==x);Ir(w,l.memoizedState)||(Nn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,d]}function My(o,l,f){var d=ze,x=ln(),w=lt;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var I=!Ir((_t||x).memoizedState,f);I&&(x.memoizedState=f,Nn=!0),x=x.queue;var O=jy.bind(null,d,x,o);if(tc(2048,8,O,[o]),x.getSnapshot!==l||I||sn!==null&&sn.memoizedState.tag&1){if(d.flags|=2048,pl(9,xh(),Ly.bind(null,d,x,f,l),null),St===null)throw Error(r(349));w||(Za&124)!==0||ky(d,l,f)}return f}function ky(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=ze.updateQueue,l===null?(l=P1(),ze.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function Ly(o,l,f,d){l.value=f,l.getSnapshot=d,By(l)&&Vy(o)}function jy(o,l,f){return f(function(){By(l)&&Vy(o)})}function By(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!Ir(o,f)}catch{return!0}}function Vy(o){var l=al(o,2);l!==null&&Mr(l,o,2)}function j1(o){var l=gr();if(typeof o=="function"){var f=o;if(o=f(),hs){Mt(!0);try{f()}finally{Mt(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:o},l}function Uy(o,l,f,d){return o.baseState=f,k1(o,_t,typeof d=="function"?d:pa)}function t3(o,l,f,d,x){if(wh(o))throw Error(r(485));if(o=l.action,o!==null){var w={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){w.listeners.push(I)}};J.T!==null?f(!0):w.isTransition=!1,d(w),f=l.pending,f===null?(w.next=l.pending=w,Fy(l,w)):(w.next=f.next,l.pending=f.next=w)}}function Fy(o,l){var f=l.action,d=l.payload,x=o.state;if(l.isTransition){var w=J.T,I={};J.T=I;try{var O=f(x,d),z=J.S;z!==null&&z(I,O),Hy(o,l,O)}catch(Q){B1(o,l,Q)}finally{J.T=w}}else try{w=f(x,d),Hy(o,l,w)}catch(Q){B1(o,l,Q)}}function Hy(o,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(d){zy(o,l,d)},function(d){return B1(o,l,d)}):zy(o,l,f)}function zy(o,l,f){l.status="fulfilled",l.value=f,Gy(l),o.state=f,l=o.pending,l!==null&&(f=l.next,f===l?o.pending=null:(f=f.next,l.next=f,Fy(o,f)))}function B1(o,l,f){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=f,Gy(l),l=l.next;while(l!==d)}o.action=null}function Gy(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function qy(o,l){return l}function Xy(o,l){if(lt){var f=St.formState;if(f!==null){e:{var d=ze;if(lt){if(Wt){t:{for(var x=Wt,w=Di;x.nodeType!==8;){if(!w){x=null;break t}if(x=li(x.nextSibling),x===null){x=null;break t}}w=x.data,x=w==="F!"||w==="F"?x:null}if(x){Wt=li(x.nextSibling),d=x.data==="F!";break e}}ls(d)}d=!1}d&&(l=f[0])}}return f=gr(),f.memoizedState=f.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qy,lastRenderedState:l},f.queue=d,f=f2.bind(null,ze,d),d.dispatch=f,d=j1(!1),w=z1.bind(null,ze,!1,d.queue),d=gr(),x={state:l,dispatch:null,action:o,pending:null},d.queue=x,f=t3.bind(null,ze,x,w,f),x.dispatch=f,d.memoizedState=o,[l,f,!1]}function Wy(o){var l=ln();return $y(l,_t,o)}function $y(o,l,f){if(l=k1(o,l,qy)[0],o=yh(pa)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=ec(l)}catch(I){throw I===$u?hh:I}else d=l;l=ln();var x=l.queue,w=x.dispatch;return f!==l.memoizedState&&(ze.flags|=2048,pl(9,xh(),n3.bind(null,x,f),null)),[d,w,o]}function n3(o,l){o.action=l}function Yy(o){var l=ln(),f=_t;if(f!==null)return $y(l,f,o);ln(),l=l.memoizedState,f=ln();var d=f.queue.dispatch;return f.memoizedState=o,[l,d,!1]}function pl(o,l,f,d){return o={tag:o,create:f,deps:d,inst:l,next:null},l=ze.updateQueue,l===null&&(l=P1(),ze.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=o.next=o:(d=f.next,f.next=o,o.next=d,l.lastEffect=o),o}function xh(){return{destroy:void 0,resource:void 0}}function Ky(){return ln().memoizedState}function _h(o,l,f,d){var x=gr();d=d===void 0?null:d,ze.flags|=o,x.memoizedState=pl(1|l,xh(),f,d)}function tc(o,l,f,d){var x=ln();d=d===void 0?null:d;var w=x.memoizedState.inst;_t!==null&&d!==null&&I1(d,_t.memoizedState.deps)?x.memoizedState=pl(l,w,f,d):(ze.flags|=o,x.memoizedState=pl(1|l,w,f,d))}function Qy(o,l){_h(8390656,8,o,l)}function Zy(o,l){tc(2048,8,o,l)}function Jy(o,l){return tc(4,2,o,l)}function e2(o,l){return tc(4,4,o,l)}function t2(o,l){if(typeof l=="function"){o=o();var f=l(o);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function n2(o,l,f){f=f!=null?f.concat([o]):null,tc(4,4,t2.bind(null,l,o),f)}function V1(){}function r2(o,l){var f=ln();l=l===void 0?null:l;var d=f.memoizedState;return l!==null&&I1(l,d[1])?d[0]:(f.memoizedState=[o,l],o)}function i2(o,l){var f=ln();l=l===void 0?null:l;var d=f.memoizedState;if(l!==null&&I1(l,d[1]))return d[0];if(d=o(),hs){Mt(!0);try{o()}finally{Mt(!1)}}return f.memoizedState=[d,l],d}function U1(o,l,f){return f===void 0||(Za&1073741824)!==0?o.memoizedState=l:(o.memoizedState=f,o=sx(),ze.lanes|=o,ao|=o,f)}function a2(o,l,f,d){return Ir(f,l)?f:fl.current!==null?(o=U1(o,f,d),Ir(o,l)||(Nn=!0),o):(Za&42)===0?(Nn=!0,o.memoizedState=f):(o=sx(),ze.lanes|=o,ao|=o,l)}function o2(o,l,f,d,x){var w=ue.p;ue.p=w!==0&&8>w?w:8;var I=J.T,O={};J.T=O,z1(o,!1,l,f);try{var z=x(),Q=J.S;if(Q!==null&&Q(O,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=ZC(z,d);nc(o,l,ae,Pr(o))}else nc(o,l,d,Pr(o))}catch(se){nc(o,l,{then:function(){},status:"rejected",reason:se},Pr())}finally{ue.p=w,J.T=I}}function r3(){}function F1(o,l,f,d){if(o.tag!==5)throw Error(r(476));var x=s2(o).queue;o2(o,x,l,fe,f===null?r3:function(){return l2(o),f(d)})}function s2(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:fe},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:f},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function l2(o){var l=s2(o).next.queue;nc(o,l,{},Pr())}function H1(){return Kn(_c)}function u2(){return ln().memoizedState}function c2(){return ln().memoizedState}function i3(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var f=Pr();o=Ka(f);var d=Qa(l,o,f);d!==null&&(Mr(d,l,f),Ku(d,l,f)),l={cache:y1()},o.payload=l;return}l=l.return}}function a3(o,l,f){var d=Pr();f={lane:d,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},wh(o)?h2(l,f):(f=l1(o,l,f,d),f!==null&&(Mr(f,o,d),d2(f,l,d)))}function f2(o,l,f){var d=Pr();nc(o,l,f,d)}function nc(o,l,f,d){var x={lane:d,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(wh(o))h2(l,x);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var I=l.lastRenderedState,O=w(I,f);if(x.hasEagerState=!0,x.eagerState=O,Ir(O,I))return ih(o,l,x,0),St===null&&rh(),!1}catch{}finally{}if(f=l1(o,l,x,d),f!==null)return Mr(f,o,d),d2(f,l,d),!0}return!1}function z1(o,l,f,d){if(d={lane:2,revertLane:wp(),action:d,hasEagerState:!1,eagerState:null,next:null},wh(o)){if(l)throw Error(r(479))}else l=l1(o,f,d,2),l!==null&&Mr(l,o,2)}function wh(o){var l=o.alternate;return o===ze||l!==null&&l===ze}function h2(o,l){hl=mh=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function d2(o,l,f){if((f&4194048)!==0){var d=l.lanes;d&=o.pendingLanes,f|=d,l.lanes=f,bu(o,f)}}var Eh={readContext:Kn,use:vh,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},p2={readContext:Kn,use:vh,useCallback:function(o,l){return gr().memoizedState=[o,l===void 0?null:l],o},useContext:Kn,useEffect:Qy,useImperativeHandle:function(o,l,f){f=f!=null?f.concat([o]):null,_h(4194308,4,t2.bind(null,l,o),f)},useLayoutEffect:function(o,l){return _h(4194308,4,o,l)},useInsertionEffect:function(o,l){_h(4,2,o,l)},useMemo:function(o,l){var f=gr();l=l===void 0?null:l;var d=o();if(hs){Mt(!0);try{o()}finally{Mt(!1)}}return f.memoizedState=[d,l],d},useReducer:function(o,l,f){var d=gr();if(f!==void 0){var x=f(l);if(hs){Mt(!0);try{f(l)}finally{Mt(!1)}}}else x=l;return d.memoizedState=d.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},d.queue=o,o=o.dispatch=a3.bind(null,ze,o),[d.memoizedState,o]},useRef:function(o){var l=gr();return o={current:o},l.memoizedState=o},useState:function(o){o=j1(o);var l=o.queue,f=f2.bind(null,ze,l);return l.dispatch=f,[o.memoizedState,f]},useDebugValue:V1,useDeferredValue:function(o,l){var f=gr();return U1(f,o,l)},useTransition:function(){var o=j1(!1);return o=o2.bind(null,ze,o.queue,!0,!1),gr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,f){var d=ze,x=gr();if(lt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),St===null)throw Error(r(349));(nt&124)!==0||ky(d,l,f)}x.memoizedState=f;var w={value:f,getSnapshot:l};return x.queue=w,Qy(jy.bind(null,d,w,o),[o]),d.flags|=2048,pl(9,xh(),Ly.bind(null,d,w,f,l),null),f},useId:function(){var o=gr(),l=St.identifierPrefix;if(lt){var f=fa,d=ca;f=(d&~(1<<32-Sn(d)-1)).toString(32)+f,l=""+l+"R"+f,f=gh++,0<f&&(l+="H"+f.toString(32)),l+=""}else f=JC++,l=""+l+"r"+f.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:H1,useFormState:Xy,useActionState:Xy,useOptimistic:function(o){var l=gr();l.memoizedState=l.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=z1.bind(null,ze,!0,f),f.dispatch=l,[o,l]},useMemoCache:M1,useCacheRefresh:function(){return gr().memoizedState=i3.bind(null,ze)}},m2={readContext:Kn,use:vh,useCallback:r2,useContext:Kn,useEffect:Zy,useImperativeHandle:n2,useInsertionEffect:Jy,useLayoutEffect:e2,useMemo:i2,useReducer:yh,useRef:Ky,useState:function(){return yh(pa)},useDebugValue:V1,useDeferredValue:function(o,l){var f=ln();return a2(f,_t.memoizedState,o,l)},useTransition:function(){var o=yh(pa)[0],l=ln().memoizedState;return[typeof o=="boolean"?o:ec(o),l]},useSyncExternalStore:My,useId:u2,useHostTransitionStatus:H1,useFormState:Wy,useActionState:Wy,useOptimistic:function(o,l){var f=ln();return Uy(f,_t,o,l)},useMemoCache:M1,useCacheRefresh:c2},o3={readContext:Kn,use:vh,useCallback:r2,useContext:Kn,useEffect:Zy,useImperativeHandle:n2,useInsertionEffect:Jy,useLayoutEffect:e2,useMemo:i2,useReducer:L1,useRef:Ky,useState:function(){return L1(pa)},useDebugValue:V1,useDeferredValue:function(o,l){var f=ln();return _t===null?U1(f,o,l):a2(f,_t.memoizedState,o,l)},useTransition:function(){var o=L1(pa)[0],l=ln().memoizedState;return[typeof o=="boolean"?o:ec(o),l]},useSyncExternalStore:My,useId:u2,useHostTransitionStatus:H1,useFormState:Yy,useActionState:Yy,useOptimistic:function(o,l){var f=ln();return _t!==null?Uy(f,_t,o,l):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:M1,useCacheRefresh:c2},ml=null,rc=0;function Ah(o){var l=rc;return rc+=1,ml===null&&(ml=[]),Sy(ml,o,l)}function ic(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function bh(o,l){throw l.$$typeof===m?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function g2(o){var l=o._init;return l(o._payload)}function v2(o){function l($,W){if(o){var K=$.deletions;K===null?($.deletions=[W],$.flags|=16):K.push(W)}}function f($,W){if(!o)return null;for(;W!==null;)l($,W),W=W.sibling;return null}function d($){for(var W=new Map;$!==null;)$.key!==null?W.set($.key,$):W.set($.index,$),$=$.sibling;return W}function x($,W){return $=ua($,W),$.index=0,$.sibling=null,$}function w($,W,K){return $.index=K,o?(K=$.alternate,K!==null?(K=K.index,K<W?($.flags|=67108866,W):K):($.flags|=67108866,W)):($.flags|=1048576,W)}function I($){return o&&$.alternate===null&&($.flags|=67108866),$}function O($,W,K,oe){return W===null||W.tag!==6?(W=c1(K,$.mode,oe),W.return=$,W):(W=x(W,K),W.return=$,W)}function z($,W,K,oe){var we=K.type;return we===E?ae($,W,K.props.children,oe,K.key):W!==null&&(W.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&g2(we)===W.type)?(W=x(W,K.props),ic(W,K),W.return=$,W):(W=oh(K.type,K.key,K.props,null,$.mode,oe),ic(W,K),W.return=$,W)}function Q($,W,K,oe){return W===null||W.tag!==4||W.stateNode.containerInfo!==K.containerInfo||W.stateNode.implementation!==K.implementation?(W=f1(K,$.mode,oe),W.return=$,W):(W=x(W,K.children||[]),W.return=$,W)}function ae($,W,K,oe,we){return W===null||W.tag!==7?(W=is(K,$.mode,oe,we),W.return=$,W):(W=x(W,K),W.return=$,W)}function se($,W,K){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=c1(""+W,$.mode,K),W.return=$,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return K=oh(W.type,W.key,W.props,null,$.mode,K),ic(K,W),K.return=$,K;case _:return W=f1(W,$.mode,K),W.return=$,W;case R:var oe=W._init;return W=oe(W._payload),se($,W,K)}if(ve(W)||H(W))return W=is(W,$.mode,K,null),W.return=$,W;if(typeof W.then=="function")return se($,Ah(W),K);if(W.$$typeof===P)return se($,ch($,W),K);bh($,W)}return null}function ee($,W,K,oe){var we=W!==null?W.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:O($,W,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case y:return K.key===we?z($,W,K,oe):null;case _:return K.key===we?Q($,W,K,oe):null;case R:return we=K._init,K=we(K._payload),ee($,W,K,oe)}if(ve(K)||H(K))return we!==null?null:ae($,W,K,oe,null);if(typeof K.then=="function")return ee($,W,Ah(K),oe);if(K.$$typeof===P)return ee($,W,ch($,K),oe);bh($,K)}return null}function te($,W,K,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return $=$.get(K)||null,O(W,$,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return $=$.get(oe.key===null?K:oe.key)||null,z(W,$,oe,we);case _:return $=$.get(oe.key===null?K:oe.key)||null,Q(W,$,oe,we);case R:var Xe=oe._init;return oe=Xe(oe._payload),te($,W,K,oe,we)}if(ve(oe)||H(oe))return $=$.get(K)||null,ae(W,$,oe,we,null);if(typeof oe.then=="function")return te($,W,K,Ah(oe),we);if(oe.$$typeof===P)return te($,W,K,ch(W,oe),we);bh(W,oe)}return null}function Me($,W,K,oe){for(var we=null,Xe=null,be=W,De=W=0,On=null;be!==null&&De<K.length;De++){be.index>De?(On=be,be=null):On=be.sibling;var ot=ee($,be,K[De],oe);if(ot===null){be===null&&(be=On);break}o&&be&&ot.alternate===null&&l($,be),W=w(ot,W,De),Xe===null?we=ot:Xe.sibling=ot,Xe=ot,be=On}if(De===K.length)return f($,be),lt&&os($,De),we;if(be===null){for(;De<K.length;De++)be=se($,K[De],oe),be!==null&&(W=w(be,W,De),Xe===null?we=be:Xe.sibling=be,Xe=be);return lt&&os($,De),we}for(be=d(be);De<K.length;De++)On=te(be,$,De,K[De],oe),On!==null&&(o&&On.alternate!==null&&be.delete(On.key===null?De:On.key),W=w(On,W,De),Xe===null?we=On:Xe.sibling=On,Xe=On);return o&&be.forEach(function(mo){return l($,mo)}),lt&&os($,De),we}function Ne($,W,K,oe){if(K==null)throw Error(r(151));for(var we=null,Xe=null,be=W,De=W=0,On=null,ot=K.next();be!==null&&!ot.done;De++,ot=K.next()){be.index>De?(On=be,be=null):On=be.sibling;var mo=ee($,be,ot.value,oe);if(mo===null){be===null&&(be=On);break}o&&be&&mo.alternate===null&&l($,be),W=w(mo,W,De),Xe===null?we=mo:Xe.sibling=mo,Xe=mo,be=On}if(ot.done)return f($,be),lt&&os($,De),we;if(be===null){for(;!ot.done;De++,ot=K.next())ot=se($,ot.value,oe),ot!==null&&(W=w(ot,W,De),Xe===null?we=ot:Xe.sibling=ot,Xe=ot);return lt&&os($,De),we}for(be=d(be);!ot.done;De++,ot=K.next())ot=te(be,$,De,ot.value,oe),ot!==null&&(o&&ot.alternate!==null&&be.delete(ot.key===null?De:ot.key),W=w(ot,W,De),Xe===null?we=ot:Xe.sibling=ot,Xe=ot);return o&&be.forEach(function(s4){return l($,s4)}),lt&&os($,De),we}function Et($,W,K,oe){if(typeof K=="object"&&K!==null&&K.type===E&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case y:e:{for(var we=K.key;W!==null;){if(W.key===we){if(we=K.type,we===E){if(W.tag===7){f($,W.sibling),oe=x(W,K.props.children),oe.return=$,$=oe;break e}}else if(W.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&g2(we)===W.type){f($,W.sibling),oe=x(W,K.props),ic(oe,K),oe.return=$,$=oe;break e}f($,W);break}else l($,W);W=W.sibling}K.type===E?(oe=is(K.props.children,$.mode,oe,K.key),oe.return=$,$=oe):(oe=oh(K.type,K.key,K.props,null,$.mode,oe),ic(oe,K),oe.return=$,$=oe)}return I($);case _:e:{for(we=K.key;W!==null;){if(W.key===we)if(W.tag===4&&W.stateNode.containerInfo===K.containerInfo&&W.stateNode.implementation===K.implementation){f($,W.sibling),oe=x(W,K.children||[]),oe.return=$,$=oe;break e}else{f($,W);break}else l($,W);W=W.sibling}oe=f1(K,$.mode,oe),oe.return=$,$=oe}return I($);case R:return we=K._init,K=we(K._payload),Et($,W,K,oe)}if(ve(K))return Me($,W,K,oe);if(H(K)){if(we=H(K),typeof we!="function")throw Error(r(150));return K=we.call(K),Ne($,W,K,oe)}if(typeof K.then=="function")return Et($,W,Ah(K),oe);if(K.$$typeof===P)return Et($,W,ch($,K),oe);bh($,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,W!==null&&W.tag===6?(f($,W.sibling),oe=x(W,K),oe.return=$,$=oe):(f($,W),oe=c1(K,$.mode,oe),oe.return=$,$=oe),I($)):f($,W)}return function($,W,K,oe){try{rc=0;var we=Et($,W,K,oe);return ml=null,we}catch(be){if(be===$u||be===hh)throw be;var Xe=Nr(29,be,null,$.mode);return Xe.lanes=oe,Xe.return=$,Xe}finally{}}}var gl=v2(!0),y2=v2(!1),Gr=ce(null),Pi=null;function Ja(o){var l=o.alternate;de(gn,gn.current&1),de(Gr,o),Pi===null&&(l===null||fl.current!==null||l.memoizedState!==null)&&(Pi=o)}function x2(o){if(o.tag===22){if(de(gn,gn.current),de(Gr,o),Pi===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Pi=o)}}else eo()}function eo(){de(gn,gn.current),de(Gr,Gr.current)}function ma(o){ye(Gr),Pi===o&&(Pi=null),ye(gn)}var gn=ce(0);function Th(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Pp(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function G1(o,l,f,d){l=o.memoizedState,f=f(d,l),f=f==null?l:p({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var q1={enqueueSetState:function(o,l,f){o=o._reactInternals;var d=Pr(),x=Ka(d);x.payload=l,f!=null&&(x.callback=f),l=Qa(o,x,d),l!==null&&(Mr(l,o,d),Ku(l,o,d))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var d=Pr(),x=Ka(d);x.tag=1,x.payload=l,f!=null&&(x.callback=f),l=Qa(o,x,d),l!==null&&(Mr(l,o,d),Ku(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=Pr(),d=Ka(f);d.tag=2,l!=null&&(d.callback=l),l=Qa(o,d,f),l!==null&&(Mr(l,o,f),Ku(l,o,f))}};function _2(o,l,f,d,x,w,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,w,I):l.prototype&&l.prototype.isPureReactComponent?!Uu(f,d)||!Uu(x,w):!0}function w2(o,l,f,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,d),l.state!==o&&q1.enqueueReplaceState(l,l.state,null)}function ds(o,l){var f=l;if("ref"in l){f={};for(var d in l)d!=="ref"&&(f[d]=l[d])}if(o=o.defaultProps){f===l&&(f=p({},f));for(var x in o)f[x]===void 0&&(f[x]=o[x])}return f}var Sh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function E2(o){Sh(o)}function A2(o){console.error(o)}function b2(o){Sh(o)}function Ch(o,l){try{var f=o.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function T2(o,l,f){try{var d=o.onCaughtError;d(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function X1(o,l,f){return f=Ka(f),f.tag=3,f.payload={element:null},f.callback=function(){Ch(o,l)},f}function S2(o){return o=Ka(o),o.tag=3,o}function C2(o,l,f,d){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var w=d.value;o.payload=function(){return x(w)},o.callback=function(){T2(l,f,d)}}var I=f.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(o.callback=function(){T2(l,f,d),typeof x!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function s3(o,l,f,d,x){if(f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=f.alternate,l!==null&&qu(l,f,x,!0),f=Gr.current,f!==null){switch(f.tag){case 13:return Pi===null?gp():f.alternate===null&&$t===0&&($t=3),f.flags&=-257,f.flags|=65536,f.lanes=x,d===w1?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([d]):l.add(d),yp(o,d,x)),!1;case 22:return f.flags|=65536,d===w1?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([d]):f.add(d)),yp(o,d,x)),!1}throw Error(r(435,f.tag))}return yp(o,d,x),gp(),!1}if(lt)return l=Gr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,d!==p1&&(o=Error(r(422),{cause:d}),Gu(Ur(o,f)))):(d!==p1&&(l=Error(r(423),{cause:d}),Gu(Ur(l,f))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,d=Ur(d,f),x=X1(o.stateNode,d,x),b1(o,x),$t!==4&&($t=2)),!1;var w=Error(r(520),{cause:d});if(w=Ur(w,f),fc===null?fc=[w]:fc.push(w),$t!==4&&($t=2),l===null)return!0;d=Ur(d,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,o=x&-x,f.lanes|=o,o=X1(f.stateNode,d,o),b1(f,o),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oo===null||!oo.has(w))))return f.flags|=65536,x&=-x,f.lanes|=x,x=S2(x),C2(x,o,f,d),b1(f,x),!1}f=f.return}while(f!==null);return!1}var I2=Error(r(461)),Nn=!1;function Fn(o,l,f,d){l.child=o===null?y2(l,null,f,d):gl(l,o.child,f,d)}function N2(o,l,f,d,x){f=f.render;var w=l.ref;if("ref"in d){var I={};for(var O in d)O!=="ref"&&(I[O]=d[O])}else I=d;return cs(l),d=N1(o,l,f,I,w,x),O=R1(),o!==null&&!Nn?(O1(o,l,x),ga(o,l,x)):(lt&&O&&h1(l),l.flags|=1,Fn(o,l,d,x),l.child)}function R2(o,l,f,d,x){if(o===null){var w=f.type;return typeof w=="function"&&!u1(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,O2(o,l,w,d,x)):(o=oh(f.type,null,d,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!ep(o,x)){var I=w.memoizedProps;if(f=f.compare,f=f!==null?f:Uu,f(I,d)&&o.ref===l.ref)return ga(o,l,x)}return l.flags|=1,o=ua(w,d),o.ref=l.ref,o.return=l,l.child=o}function O2(o,l,f,d,x){if(o!==null){var w=o.memoizedProps;if(Uu(w,d)&&o.ref===l.ref)if(Nn=!1,l.pendingProps=d=w,ep(o,x))(o.flags&131072)!==0&&(Nn=!0);else return l.lanes=o.lanes,ga(o,l,x)}return W1(o,l,f,d,x)}function D2(o,l,f){var d=l.pendingProps,x=d.children,w=o!==null?o.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=w!==null?w.baseLanes|f:f,o!==null){for(x=l.child=o.child,w=0;x!==null;)w=w|x.lanes|x.childLanes,x=x.sibling;l.childLanes=w&~d}else l.childLanes=0,l.child=null;return P2(o,l,d,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&fh(l,w!==null?w.cachePool:null),w!==null?Oy(l,w):S1(),x2(l);else return l.lanes=l.childLanes=536870912,P2(o,l,w!==null?w.baseLanes|f:f,f)}else w!==null?(fh(l,w.cachePool),Oy(l,w),eo(),l.memoizedState=null):(o!==null&&fh(l,null),S1(),eo());return Fn(o,l,x,f),l.child}function P2(o,l,f,d){var x=_1();return x=x===null?null:{parent:mn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},o!==null&&fh(l,null),S1(),x2(l),o!==null&&qu(o,l,d,!0),null}function Ih(o,l){var f=l.ref;if(f===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(l.flags|=4194816)}}function W1(o,l,f,d,x){return cs(l),f=N1(o,l,f,d,void 0,x),d=R1(),o!==null&&!Nn?(O1(o,l,x),ga(o,l,x)):(lt&&d&&h1(l),l.flags|=1,Fn(o,l,f,x),l.child)}function M2(o,l,f,d,x,w){return cs(l),l.updateQueue=null,f=Py(l,d,f,x),Dy(o),d=R1(),o!==null&&!Nn?(O1(o,l,w),ga(o,l,w)):(lt&&d&&h1(l),l.flags|=1,Fn(o,l,f,w),l.child)}function k2(o,l,f,d,x){if(cs(l),l.stateNode===null){var w=ol,I=f.contextType;typeof I=="object"&&I!==null&&(w=Kn(I)),w=new f(d,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=q1,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=d,w.state=l.memoizedState,w.refs={},E1(l),I=f.contextType,w.context=typeof I=="object"&&I!==null?Kn(I):ol,w.state=l.memoizedState,I=f.getDerivedStateFromProps,typeof I=="function"&&(G1(l,f,I,d),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(I=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),I!==w.state&&q1.enqueueReplaceState(w,w.state,null),Zu(l,d,w,x),Qu(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){w=l.stateNode;var O=l.memoizedProps,z=ds(f,O);w.props=z;var Q=w.context,ae=f.contextType;I=ol,typeof ae=="object"&&ae!==null&&(I=Kn(ae));var se=f.getDerivedStateFromProps;ae=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O||Q!==I)&&w2(l,w,d,I),Ya=!1;var ee=l.memoizedState;w.state=ee,Zu(l,d,w,x),Qu(),Q=l.memoizedState,O||ee!==Q||Ya?(typeof se=="function"&&(G1(l,f,se,d),Q=l.memoizedState),(z=Ya||_2(l,f,z,d,ee,Q,I))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=Q),w.props=d,w.state=Q,w.context=I,d=z):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{w=l.stateNode,A1(o,l),I=l.memoizedProps,ae=ds(f,I),w.props=ae,se=l.pendingProps,ee=w.context,Q=f.contextType,z=ol,typeof Q=="object"&&Q!==null&&(z=Kn(Q)),O=f.getDerivedStateFromProps,(Q=typeof O=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==se||ee!==z)&&w2(l,w,d,z),Ya=!1,ee=l.memoizedState,w.state=ee,Zu(l,d,w,x),Qu();var te=l.memoizedState;I!==se||ee!==te||Ya||o!==null&&o.dependencies!==null&&uh(o.dependencies)?(typeof O=="function"&&(G1(l,f,O,d),te=l.memoizedState),(ae=Ya||_2(l,f,ae,d,ee,te,z)||o!==null&&o.dependencies!==null&&uh(o.dependencies))?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,te,z),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,te,z)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=te),w.props=d,w.state=te,w.context=z,d=ae):(typeof w.componentDidUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),d=!1)}return w=d,Ih(o,l),d=(l.flags&128)!==0,w||d?(w=l.stateNode,f=d&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,o!==null&&d?(l.child=gl(l,o.child,null,x),l.child=gl(l,null,f,x)):Fn(o,l,f,x),l.memoizedState=w.state,o=l.child):o=ga(o,l,x),o}function L2(o,l,f,d){return zu(),l.flags|=256,Fn(o,l,f,d),l.child}var $1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Y1(o){return{baseLanes:o,cachePool:Ay()}}function K1(o,l,f){return o=o!==null?o.childLanes&~f:0,l&&(o|=qr),o}function j2(o,l,f){var d=l.pendingProps,x=!1,w=(l.flags&128)!==0,I;if((I=w)||(I=o!==null&&o.memoizedState===null?!1:(gn.current&2)!==0),I&&(x=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,o===null){if(lt){if(x?Ja(l):eo(),lt){var O=Wt,z;if(z=O){e:{for(z=O,O=Di;z.nodeType!==8;){if(!O){O=null;break e}if(z=li(z.nextSibling),z===null){O=null;break e}}O=z}O!==null?(l.memoizedState={dehydrated:O,treeContext:as!==null?{id:ca,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},z=Nr(18,null,null,0),z.stateNode=O,z.return=l,l.child=z,lr=l,Wt=null,z=!0):z=!1}z||ls(l)}if(O=l.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Pp(O)?l.lanes=32:l.lanes=536870912,null;ma(l)}return O=d.children,d=d.fallback,x?(eo(),x=l.mode,O=Nh({mode:"hidden",children:O},x),d=is(d,x,f,null),O.return=l,d.return=l,O.sibling=d,l.child=O,x=l.child,x.memoizedState=Y1(f),x.childLanes=K1(o,I,f),l.memoizedState=$1,d):(Ja(l),Q1(l,O))}if(z=o.memoizedState,z!==null&&(O=z.dehydrated,O!==null)){if(w)l.flags&256?(Ja(l),l.flags&=-257,l=Z1(o,l,f)):l.memoizedState!==null?(eo(),l.child=o.child,l.flags|=128,l=null):(eo(),x=d.fallback,O=l.mode,d=Nh({mode:"visible",children:d.children},O),x=is(x,O,f,null),x.flags|=2,d.return=l,x.return=l,d.sibling=x,l.child=d,gl(l,o.child,null,f),d=l.child,d.memoizedState=Y1(f),d.childLanes=K1(o,I,f),l.memoizedState=$1,l=x);else if(Ja(l),Pp(O)){if(I=O.nextSibling&&O.nextSibling.dataset,I)var Q=I.dgst;I=Q,d=Error(r(419)),d.stack="",d.digest=I,Gu({value:d,source:null,stack:null}),l=Z1(o,l,f)}else if(Nn||qu(o,l,f,!1),I=(f&o.childLanes)!==0,Nn||I){if(I=St,I!==null&&(d=f&-f,d=(d&42)!==0?1:Fa(d),d=(d&(I.suspendedLanes|f))!==0?0:d,d!==0&&d!==z.retryLane))throw z.retryLane=d,al(o,d),Mr(I,o,d),I2;O.data==="$?"||gp(),l=Z1(o,l,f)}else O.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=z.treeContext,Wt=li(O.nextSibling),lr=l,lt=!0,ss=null,Di=!1,o!==null&&(Hr[zr++]=ca,Hr[zr++]=fa,Hr[zr++]=as,ca=o.id,fa=o.overflow,as=l),l=Q1(l,d.children),l.flags|=4096);return l}return x?(eo(),x=d.fallback,O=l.mode,z=o.child,Q=z.sibling,d=ua(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,Q!==null?x=ua(Q,x):(x=is(x,O,f,null),x.flags|=2),x.return=l,d.return=l,d.sibling=x,l.child=d,d=x,x=l.child,O=o.child.memoizedState,O===null?O=Y1(f):(z=O.cachePool,z!==null?(Q=mn._currentValue,z=z.parent!==Q?{parent:Q,pool:Q}:z):z=Ay(),O={baseLanes:O.baseLanes|f,cachePool:z}),x.memoizedState=O,x.childLanes=K1(o,I,f),l.memoizedState=$1,d):(Ja(l),f=o.child,o=f.sibling,f=ua(f,{mode:"visible",children:d.children}),f.return=l,f.sibling=null,o!==null&&(I=l.deletions,I===null?(l.deletions=[o],l.flags|=16):I.push(o)),l.child=f,l.memoizedState=null,f)}function Q1(o,l){return l=Nh({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Nh(o,l){return o=Nr(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Z1(o,l,f){return gl(l,o.child,null,f),o=Q1(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function B2(o,l,f){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),g1(o.return,l,f)}function J1(o,l,f,d,x){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:f,tailMode:x}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=f,w.tailMode=x)}function V2(o,l,f){var d=l.pendingProps,x=d.revealOrder,w=d.tail;if(Fn(o,l,d.children,f),d=gn.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&B2(o,f,l);else if(o.tag===19)B2(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(de(gn,d),x){case"forwards":for(f=l.child,x=null;f!==null;)o=f.alternate,o!==null&&Th(o)===null&&(x=f),f=f.sibling;f=x,f===null?(x=l.child,l.child=null):(x=f.sibling,f.sibling=null),J1(l,!1,x,f,w);break;case"backwards":for(f=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&Th(o)===null){l.child=x;break}o=x.sibling,x.sibling=f,f=x,x=o}J1(l,!0,f,null,w);break;case"together":J1(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ga(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),ao|=l.lanes,(f&l.childLanes)===0)if(o!==null){if(qu(o,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,f=ua(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=ua(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function ep(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&uh(o)))}function l3(o,l,f){switch(l.tag){case 3:yt(l,l.stateNode.containerInfo),$a(l,mn,o.memoizedState.cache),zu();break;case 27:case 5:xi(l);break;case 4:yt(l,l.stateNode.containerInfo);break;case 10:$a(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(Ja(l),l.flags|=128,null):(f&l.child.childLanes)!==0?j2(o,l,f):(Ja(l),o=ga(o,l,f),o!==null?o.sibling:null);Ja(l);break;case 19:var x=(o.flags&128)!==0;if(d=(f&l.childLanes)!==0,d||(qu(o,l,f,!1),d=(f&l.childLanes)!==0),x){if(d)return V2(o,l,f);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),de(gn,gn.current),d)break;return null;case 22:case 23:return l.lanes=0,D2(o,l,f);case 24:$a(l,mn,o.memoizedState.cache)}return ga(o,l,f)}function U2(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps)Nn=!0;else{if(!ep(o,f)&&(l.flags&128)===0)return Nn=!1,l3(o,l,f);Nn=(o.flags&131072)!==0}else Nn=!1,lt&&(l.flags&1048576)!==0&&gy(l,lh,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var d=l.elementType,x=d._init;if(d=x(d._payload),l.type=d,typeof d=="function")u1(d)?(o=ds(d,o),l.tag=1,l=k2(null,l,d,o,f)):(l.tag=0,l=W1(null,l,d,o,f));else{if(d!=null){if(x=d.$$typeof,x===j){l.tag=11,l=N2(null,l,d,o,f);break e}else if(x===D){l.tag=14,l=R2(null,l,d,o,f);break e}}throw l=xe(d)||d,Error(r(306,l,""))}}return l;case 0:return W1(o,l,l.type,l.pendingProps,f);case 1:return d=l.type,x=ds(d,l.pendingProps),k2(o,l,d,x,f);case 3:e:{if(yt(l,l.stateNode.containerInfo),o===null)throw Error(r(387));d=l.pendingProps;var w=l.memoizedState;x=w.element,A1(o,l),Zu(l,d,null,f);var I=l.memoizedState;if(d=I.cache,$a(l,mn,d),d!==w.cache&&v1(l,[mn],f,!0),Qu(),d=I.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=L2(o,l,d,f);break e}else if(d!==x){x=Ur(Error(r(424)),l),Gu(x),l=L2(o,l,d,f);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Wt=li(o.firstChild),lr=l,lt=!0,ss=null,Di=!0,f=y2(l,null,d,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(zu(),d===x){l=ga(o,l,f);break e}Fn(o,l,d,f)}l=l.child}return l;case 26:return Ih(o,l),o===null?(f=Gx(l.type,null,l.pendingProps,null))?l.memoizedState=f:lt||(f=l.type,o=l.pendingProps,d=zh(Ie.current).createElement(f),d[hn]=l,d[an]=o,zn(d,f,o),Zt(d),l.stateNode=d):l.memoizedState=Gx(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return xi(l),o===null&&lt&&(d=l.stateNode=Fx(l.type,l.pendingProps,Ie.current),lr=l,Di=!0,x=Wt,uo(l.type)?(Mp=x,Wt=li(d.firstChild)):Wt=x),Fn(o,l,l.pendingProps.children,f),Ih(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&lt&&((x=d=Wt)&&(d=L3(d,l.type,l.pendingProps,Di),d!==null?(l.stateNode=d,lr=l,Wt=li(d.firstChild),Di=!1,x=!0):x=!1),x||ls(l)),xi(l),x=l.type,w=l.pendingProps,I=o!==null?o.memoizedProps:null,d=w.children,Rp(x,w)?d=null:I!==null&&Rp(x,I)&&(l.flags|=32),l.memoizedState!==null&&(x=N1(o,l,e3,null,null,f),_c._currentValue=x),Ih(o,l),Fn(o,l,d,f),l.child;case 6:return o===null&&lt&&((o=f=Wt)&&(f=j3(f,l.pendingProps,Di),f!==null?(l.stateNode=f,lr=l,Wt=null,o=!0):o=!1),o||ls(l)),null;case 13:return j2(o,l,f);case 4:return yt(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=gl(l,null,d,f):Fn(o,l,d,f),l.child;case 11:return N2(o,l,l.type,l.pendingProps,f);case 7:return Fn(o,l,l.pendingProps,f),l.child;case 8:return Fn(o,l,l.pendingProps.children,f),l.child;case 12:return Fn(o,l,l.pendingProps.children,f),l.child;case 10:return d=l.pendingProps,$a(l,l.type,d.value),Fn(o,l,d.children,f),l.child;case 9:return x=l.type._context,d=l.pendingProps.children,cs(l),x=Kn(x),d=d(x),l.flags|=1,Fn(o,l,d,f),l.child;case 14:return R2(o,l,l.type,l.pendingProps,f);case 15:return O2(o,l,l.type,l.pendingProps,f);case 19:return V2(o,l,f);case 31:return d=l.pendingProps,f=l.mode,d={mode:d.mode,children:d.children},o===null?(f=Nh(d,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=ua(o.child,d),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return D2(o,l,f);case 24:return cs(l),d=Kn(mn),o===null?(x=_1(),x===null&&(x=St,w=y1(),x.pooledCache=w,w.refCount++,w!==null&&(x.pooledCacheLanes|=f),x=w),l.memoizedState={parent:d,cache:x},E1(l),$a(l,mn,x)):((o.lanes&f)!==0&&(A1(o,l),Zu(l,null,null,f),Qu()),x=o.memoizedState,w=l.memoizedState,x.parent!==d?(x={parent:d,cache:d},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),$a(l,mn,d)):(d=w.cache,$a(l,mn,d),d!==x.cache&&v1(l,[mn],f,!0))),Fn(o,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function va(o){o.flags|=4}function F2(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Yx(l)){if(l=Gr.current,l!==null&&((nt&4194048)===nt?Pi!==null:(nt&62914560)!==nt&&(nt&536870912)===0||l!==Pi))throw Yu=w1,by;o.flags|=8192}}function Rh(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Eu():536870912,o.lanes|=l,_l|=l)}function ac(o,l){if(!lt)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Bt(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,d=0;if(l)for(var x=o.child;x!==null;)f|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)f|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=d,o.childLanes=f,l}function u3(o,l,f){var d=l.pendingProps;switch(d1(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(l),null;case 1:return Bt(l),null;case 3:return f=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),da(mn),dr(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Hu(l)?va(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,xy())),Bt(l),null;case 26:return f=l.memoizedState,o===null?(va(l),f!==null?(Bt(l),F2(l,f)):(Bt(l),l.flags&=-16777217)):f?f!==o.memoizedState?(va(l),Bt(l),F2(l,f)):(Bt(l),l.flags&=-16777217):(o.memoizedProps!==d&&va(l),Bt(l),l.flags&=-16777217),null;case 27:ei(l),f=Ie.current;var x=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==d&&va(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Bt(l),null}o=Te.current,Hu(l)?vy(l):(o=Fx(x,d,f),l.stateNode=o,va(l))}return Bt(l),null;case 5:if(ei(l),f=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&va(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Bt(l),null}if(o=Te.current,Hu(l))vy(l);else{switch(x=zh(Ie.current),o){case 1:o=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=x.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?x.createElement(f,{is:d.is}):x.createElement(f)}}o[hn]=l,o[an]=d;e:for(x=l.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===l)break e;for(;x.sibling===null;){if(x.return===null||x.return===l)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}l.stateNode=o;e:switch(zn(o,f,d),f){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&va(l)}}return Bt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&va(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(o=Ie.current,Hu(l)){if(o=l.stateNode,f=l.memoizedProps,d=null,x=lr,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}o[hn]=l,o=!!(o.nodeValue===f||d!==null&&d.suppressHydrationWarning===!0||Mx(o.nodeValue,f)),o||ls(l)}else o=zh(o).createTextNode(d),o[hn]=l,l.stateNode=o}return Bt(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=Hu(l),d!==null&&d.dehydrated!==null){if(o===null){if(!x)throw Error(r(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[hn]=l}else zu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bt(l),x=!1}else x=xy(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(ma(l),l):(ma(l),null)}if(ma(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=d!==null,o=o!==null&&o.memoizedState!==null,f){d=l.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool);var w=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==x&&(d.flags|=2048)}return f!==o&&f&&(l.child.flags|=8192),Rh(l,l.updateQueue),Bt(l),null;case 4:return dr(),o===null&&Tp(l.stateNode.containerInfo),Bt(l),null;case 10:return da(l.type),Bt(l),null;case 19:if(ye(gn),x=l.memoizedState,x===null)return Bt(l),null;if(d=(l.flags&128)!==0,w=x.rendering,w===null)if(d)ac(x,!1);else{if($t!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(w=Th(o),w!==null){for(l.flags|=128,ac(x,!1),o=w.updateQueue,l.updateQueue=o,Rh(l,o),l.subtreeFlags=0,o=f,f=l.child;f!==null;)my(f,o),f=f.sibling;return de(gn,gn.current&1|2),l.child}o=o.sibling}x.tail!==null&&pr()>Ph&&(l.flags|=128,d=!0,ac(x,!1),l.lanes=4194304)}else{if(!d)if(o=Th(w),o!==null){if(l.flags|=128,d=!0,o=o.updateQueue,l.updateQueue=o,Rh(l,o),ac(x,!0),x.tail===null&&x.tailMode==="hidden"&&!w.alternate&&!lt)return Bt(l),null}else 2*pr()-x.renderingStartTime>Ph&&f!==536870912&&(l.flags|=128,d=!0,ac(x,!1),l.lanes=4194304);x.isBackwards?(w.sibling=l.child,l.child=w):(o=x.last,o!==null?o.sibling=w:l.child=w,x.last=w)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=pr(),l.sibling=null,o=gn.current,de(gn,d?o&1|2:o&1),l):(Bt(l),null);case 22:case 23:return ma(l),C1(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(f&536870912)!==0&&(l.flags&128)===0&&(Bt(l),l.subtreeFlags&6&&(l.flags|=8192)):Bt(l),f=l.updateQueue,f!==null&&Rh(l,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048),o!==null&&ye(fs),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),da(mn),Bt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function c3(o,l){switch(d1(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return da(mn),dr(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return ei(l),null;case 13:if(ma(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));zu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ye(gn),null;case 4:return dr(),null;case 10:return da(l.type),null;case 22:case 23:return ma(l),C1(),o!==null&&ye(fs),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return da(mn),null;case 25:return null;default:return null}}function H2(o,l){switch(d1(l),l.tag){case 3:da(mn),dr();break;case 26:case 27:case 5:ei(l);break;case 4:dr();break;case 13:ma(l);break;case 19:ye(gn);break;case 10:da(l.type);break;case 22:case 23:ma(l),C1(),o!==null&&ye(fs);break;case 24:da(mn)}}function oc(o,l){try{var f=l.updateQueue,d=f!==null?f.lastEffect:null;if(d!==null){var x=d.next;f=x;do{if((f.tag&o)===o){d=void 0;var w=f.create,I=f.inst;d=w(),I.destroy=d}f=f.next}while(f!==x)}}catch(O){bt(l,l.return,O)}}function to(o,l,f){try{var d=l.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var w=x.next;d=w;do{if((d.tag&o)===o){var I=d.inst,O=I.destroy;if(O!==void 0){I.destroy=void 0,x=l;var z=f,Q=O;try{Q()}catch(ae){bt(x,z,ae)}}}d=d.next}while(d!==w)}}catch(ae){bt(l,l.return,ae)}}function z2(o){var l=o.updateQueue;if(l!==null){var f=o.stateNode;try{Ry(l,f)}catch(d){bt(o,o.return,d)}}}function G2(o,l,f){f.props=ds(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(d){bt(o,l,d)}}function sc(o,l){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof f=="function"?o.refCleanup=f(d):f.current=d}}catch(x){bt(o,l,x)}}function Mi(o,l){var f=o.ref,d=o.refCleanup;if(f!==null)if(typeof d=="function")try{d()}catch(x){bt(o,l,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){bt(o,l,x)}else f.current=null}function q2(o){var l=o.type,f=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&d.focus();break e;case"img":f.src?d.src=f.src:f.srcSet&&(d.srcset=f.srcSet)}}catch(x){bt(o,o.return,x)}}function tp(o,l,f){try{var d=o.stateNode;O3(d,o.type,f,l),d[an]=l}catch(x){bt(o,o.return,x)}}function X2(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&uo(o.type)||o.tag===4}function np(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||X2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&uo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function rp(o,l,f){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(o),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Hh));else if(d!==4&&(d===27&&uo(o.type)&&(f=o.stateNode,l=null),o=o.child,o!==null))for(rp(o,l,f),o=o.sibling;o!==null;)rp(o,l,f),o=o.sibling}function Oh(o,l,f){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(d!==4&&(d===27&&uo(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(Oh(o,l,f),o=o.sibling;o!==null;)Oh(o,l,f),o=o.sibling}function W2(o){var l=o.stateNode,f=o.memoizedProps;try{for(var d=o.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);zn(l,d,f),l[hn]=o,l[an]=f}catch(w){bt(o,o.return,w)}}var ya=!1,en=!1,ip=!1,$2=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function f3(o,l){if(o=o.containerInfo,Ip=Yh,o=ay(o),n1(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var d=f.getSelection&&f.getSelection();if(d&&d.rangeCount!==0){f=d.anchorNode;var x=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var I=0,O=-1,z=-1,Q=0,ae=0,se=o,ee=null;t:for(;;){for(var te;se!==f||x!==0&&se.nodeType!==3||(O=I+x),se!==w||d!==0&&se.nodeType!==3||(z=I+d),se.nodeType===3&&(I+=se.nodeValue.length),(te=se.firstChild)!==null;)ee=se,se=te;for(;;){if(se===o)break t;if(ee===f&&++Q===x&&(O=I),ee===w&&++ae===d&&(z=I),(te=se.nextSibling)!==null)break;se=ee,ee=se.parentNode}se=te}f=O===-1||z===-1?null:{start:O,end:z}}else f=null}f=f||{start:0,end:0}}else f=null;for(Np={focusedElem:o,selectionRange:f},Yh=!1,Rn=l;Rn!==null;)if(l=Rn,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Rn=o;else for(;Rn!==null;){switch(l=Rn,w=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,f=l,x=w.memoizedProps,w=w.memoizedState,d=f.stateNode;try{var Me=ds(f.type,x,f.elementType===f.type);o=d.getSnapshotBeforeUpdate(Me,w),d.__reactInternalSnapshotBeforeUpdate=o}catch(Ne){bt(f,f.return,Ne)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,f=o.nodeType,f===9)Dp(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Dp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,Rn=o;break}Rn=l.return}}function Y2(o,l,f){var d=f.flags;switch(f.tag){case 0:case 11:case 15:no(o,f),d&4&&oc(5,f);break;case 1:if(no(o,f),d&4)if(o=f.stateNode,l===null)try{o.componentDidMount()}catch(I){bt(f,f.return,I)}else{var x=ds(f.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(x,l,o.__reactInternalSnapshotBeforeUpdate)}catch(I){bt(f,f.return,I)}}d&64&&z2(f),d&512&&sc(f,f.return);break;case 3:if(no(o,f),d&64&&(o=f.updateQueue,o!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{Ry(o,l)}catch(I){bt(f,f.return,I)}}break;case 27:l===null&&d&4&&W2(f);case 26:case 5:no(o,f),l===null&&d&4&&q2(f),d&512&&sc(f,f.return);break;case 12:no(o,f);break;case 13:no(o,f),d&4&&Z2(o,f),d&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=_3.bind(null,f),B3(o,f))));break;case 22:if(d=f.memoizedState!==null||ya,!d){l=l!==null&&l.memoizedState!==null||en,x=ya;var w=en;ya=d,(en=l)&&!w?ro(o,f,(f.subtreeFlags&8772)!==0):no(o,f),ya=x,en=w}break;case 30:break;default:no(o,f)}}function K2(o){var l=o.alternate;l!==null&&(o.alternate=null,K2(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Ga(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Lt=null,vr=!1;function xa(o,l,f){for(f=f.child;f!==null;)Q2(o,l,f),f=f.sibling}function Q2(o,l,f){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Je,f)}catch{}switch(f.tag){case 26:en||Mi(f,l),xa(o,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:en||Mi(f,l);var d=Lt,x=vr;uo(f.type)&&(Lt=f.stateNode,vr=!1),xa(o,l,f),gc(f.stateNode),Lt=d,vr=x;break;case 5:en||Mi(f,l);case 6:if(d=Lt,x=vr,Lt=null,xa(o,l,f),Lt=d,vr=x,Lt!==null)if(vr)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(f.stateNode)}catch(w){bt(f,l,w)}else try{Lt.removeChild(f.stateNode)}catch(w){bt(f,l,w)}break;case 18:Lt!==null&&(vr?(o=Lt,Vx(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),bc(o)):Vx(Lt,f.stateNode));break;case 4:d=Lt,x=vr,Lt=f.stateNode.containerInfo,vr=!0,xa(o,l,f),Lt=d,vr=x;break;case 0:case 11:case 14:case 15:en||to(2,f,l),en||to(4,f,l),xa(o,l,f);break;case 1:en||(Mi(f,l),d=f.stateNode,typeof d.componentWillUnmount=="function"&&G2(f,l,d)),xa(o,l,f);break;case 21:xa(o,l,f);break;case 22:en=(d=en)||f.memoizedState!==null,xa(o,l,f),en=d;break;default:xa(o,l,f)}}function Z2(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{bc(o)}catch(f){bt(l,l.return,f)}}function h3(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new $2),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new $2),l;default:throw Error(r(435,o.tag))}}function ap(o,l){var f=h3(o);l.forEach(function(d){var x=w3.bind(null,o,d);f.has(d)||(f.add(d),d.then(x,x))})}function Rr(o,l){var f=l.deletions;if(f!==null)for(var d=0;d<f.length;d++){var x=f[d],w=o,I=l,O=I;e:for(;O!==null;){switch(O.tag){case 27:if(uo(O.type)){Lt=O.stateNode,vr=!1;break e}break;case 5:Lt=O.stateNode,vr=!1;break e;case 3:case 4:Lt=O.stateNode.containerInfo,vr=!0;break e}O=O.return}if(Lt===null)throw Error(r(160));Q2(w,I,x),Lt=null,vr=!1,w=x.alternate,w!==null&&(w.return=null),x.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)J2(l,o),l=l.sibling}var si=null;function J2(o,l){var f=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Rr(l,o),Or(o),d&4&&(to(3,o,o.return),oc(3,o),to(5,o,o.return));break;case 1:Rr(l,o),Or(o),d&512&&(en||f===null||Mi(f,f.return)),d&64&&ya&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?d:f.concat(d))));break;case 26:var x=si;if(Rr(l,o),Or(o),d&512&&(en||f===null||Mi(f,f.return)),d&4){var w=f!==null?f.memoizedState:null;if(d=o.memoizedState,f===null)if(d===null)if(o.stateNode===null){e:{d=o.type,f=o.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":w=x.getElementsByTagName("title")[0],(!w||w[Ho]||w[hn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=x.createElement(d),x.head.insertBefore(w,x.querySelector("head > title"))),zn(w,d,f),w[hn]=o,Zt(w),d=w;break e;case"link":var I=Wx("link","href",x).get(d+(f.href||""));if(I){for(var O=0;O<I.length;O++)if(w=I[O],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){I.splice(O,1);break t}}w=x.createElement(d),zn(w,d,f),x.head.appendChild(w);break;case"meta":if(I=Wx("meta","content",x).get(d+(f.content||""))){for(O=0;O<I.length;O++)if(w=I[O],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){I.splice(O,1);break t}}w=x.createElement(d),zn(w,d,f),x.head.appendChild(w);break;default:throw Error(r(468,d))}w[hn]=o,Zt(w),d=w}o.stateNode=d}else $x(x,o.type,o.stateNode);else o.stateNode=Xx(x,d,o.memoizedProps);else w!==d?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,d===null?$x(x,o.type,o.stateNode):Xx(x,d,o.memoizedProps)):d===null&&o.stateNode!==null&&tp(o,o.memoizedProps,f.memoizedProps)}break;case 27:Rr(l,o),Or(o),d&512&&(en||f===null||Mi(f,f.return)),f!==null&&d&4&&tp(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Rr(l,o),Or(o),d&512&&(en||f===null||Mi(f,f.return)),o.flags&32){x=o.stateNode;try{Lr(x,"")}catch(te){bt(o,o.return,te)}}d&4&&o.stateNode!=null&&(x=o.memoizedProps,tp(o,x,f!==null?f.memoizedProps:x)),d&1024&&(ip=!0);break;case 6:if(Rr(l,o),Or(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,f=o.stateNode;try{f.nodeValue=d}catch(te){bt(o,o.return,te)}}break;case 3:if(Xh=null,x=si,si=Gh(l.containerInfo),Rr(l,o),si=x,Or(o),d&4&&f!==null&&f.memoizedState.isDehydrated)try{bc(l.containerInfo)}catch(te){bt(o,o.return,te)}ip&&(ip=!1,ex(o));break;case 4:d=si,si=Gh(o.stateNode.containerInfo),Rr(l,o),Or(o),si=d;break;case 12:Rr(l,o),Or(o);break;case 13:Rr(l,o),Or(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(fp=pr()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,ap(o,d)));break;case 22:x=o.memoizedState!==null;var z=f!==null&&f.memoizedState!==null,Q=ya,ae=en;if(ya=Q||x,en=ae||z,Rr(l,o),en=ae,ya=Q,Or(o),d&8192)e:for(l=o.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(f===null||z||ya||en||ps(o)),f=null,l=o;;){if(l.tag===5||l.tag===26){if(f===null){z=f=l;try{if(w=z.stateNode,x)I=w.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{O=z.stateNode;var se=z.memoizedProps.style,ee=se!=null&&se.hasOwnProperty("display")?se.display:null;O.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){bt(z,z.return,te)}}}else if(l.tag===6){if(f===null){z=l;try{z.stateNode.nodeValue=x?"":z.memoizedProps}catch(te){bt(z,z.return,te)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(f=d.retryQueue,f!==null&&(d.retryQueue=null,ap(o,f))));break;case 19:Rr(l,o),Or(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,ap(o,d)));break;case 30:break;case 21:break;default:Rr(l,o),Or(o)}}function Or(o){var l=o.flags;if(l&2){try{for(var f,d=o.return;d!==null;){if(X2(d)){f=d;break}d=d.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,w=np(o);Oh(o,w,x);break;case 5:var I=f.stateNode;f.flags&32&&(Lr(I,""),f.flags&=-33);var O=np(o);Oh(o,O,I);break;case 3:case 4:var z=f.stateNode.containerInfo,Q=np(o);rp(o,Q,z);break;default:throw Error(r(161))}}catch(ae){bt(o,o.return,ae)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function ex(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;ex(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function no(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Y2(o,l.alternate,l),l=l.sibling}function ps(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:to(4,l,l.return),ps(l);break;case 1:Mi(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&G2(l,l.return,f),ps(l);break;case 27:gc(l.stateNode);case 26:case 5:Mi(l,l.return),ps(l);break;case 22:l.memoizedState===null&&ps(l);break;case 30:ps(l);break;default:ps(l)}o=o.sibling}}function ro(o,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,x=o,w=l,I=w.flags;switch(w.tag){case 0:case 11:case 15:ro(x,w,f),oc(4,w);break;case 1:if(ro(x,w,f),d=w,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Q){bt(d,d.return,Q)}if(d=w,x=d.updateQueue,x!==null){var O=d.stateNode;try{var z=x.shared.hiddenCallbacks;if(z!==null)for(x.shared.hiddenCallbacks=null,x=0;x<z.length;x++)Ny(z[x],O)}catch(Q){bt(d,d.return,Q)}}f&&I&64&&z2(w),sc(w,w.return);break;case 27:W2(w);case 26:case 5:ro(x,w,f),f&&d===null&&I&4&&q2(w),sc(w,w.return);break;case 12:ro(x,w,f);break;case 13:ro(x,w,f),f&&I&4&&Z2(x,w);break;case 22:w.memoizedState===null&&ro(x,w,f),sc(w,w.return);break;case 30:break;default:ro(x,w,f)}l=l.sibling}}function op(o,l){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Xu(f))}function sp(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Xu(o))}function ki(o,l,f,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)tx(o,l,f,d),l=l.sibling}function tx(o,l,f,d){var x=l.flags;switch(l.tag){case 0:case 11:case 15:ki(o,l,f,d),x&2048&&oc(9,l);break;case 1:ki(o,l,f,d);break;case 3:ki(o,l,f,d),x&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Xu(o)));break;case 12:if(x&2048){ki(o,l,f,d),o=l.stateNode;try{var w=l.memoizedProps,I=w.id,O=w.onPostCommit;typeof O=="function"&&O(I,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(z){bt(l,l.return,z)}}else ki(o,l,f,d);break;case 13:ki(o,l,f,d);break;case 23:break;case 22:w=l.stateNode,I=l.alternate,l.memoizedState!==null?w._visibility&2?ki(o,l,f,d):lc(o,l):w._visibility&2?ki(o,l,f,d):(w._visibility|=2,vl(o,l,f,d,(l.subtreeFlags&10256)!==0)),x&2048&&op(I,l);break;case 24:ki(o,l,f,d),x&2048&&sp(l.alternate,l);break;default:ki(o,l,f,d)}}function vl(o,l,f,d,x){for(x=x&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=o,I=l,O=f,z=d,Q=I.flags;switch(I.tag){case 0:case 11:case 15:vl(w,I,O,z,x),oc(8,I);break;case 23:break;case 22:var ae=I.stateNode;I.memoizedState!==null?ae._visibility&2?vl(w,I,O,z,x):lc(w,I):(ae._visibility|=2,vl(w,I,O,z,x)),x&&Q&2048&&op(I.alternate,I);break;case 24:vl(w,I,O,z,x),x&&Q&2048&&sp(I.alternate,I);break;default:vl(w,I,O,z,x)}l=l.sibling}}function lc(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=o,d=l,x=d.flags;switch(d.tag){case 22:lc(f,d),x&2048&&op(d.alternate,d);break;case 24:lc(f,d),x&2048&&sp(d.alternate,d);break;default:lc(f,d)}l=l.sibling}}var uc=8192;function yl(o){if(o.subtreeFlags&uc)for(o=o.child;o!==null;)nx(o),o=o.sibling}function nx(o){switch(o.tag){case 26:yl(o),o.flags&uc&&o.memoizedState!==null&&Q3(si,o.memoizedState,o.memoizedProps);break;case 5:yl(o);break;case 3:case 4:var l=si;si=Gh(o.stateNode.containerInfo),yl(o),si=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=uc,uc=16777216,yl(o),uc=l):yl(o));break;default:yl(o)}}function rx(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function cc(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Rn=d,ax(d,o)}rx(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ix(o),o=o.sibling}function ix(o){switch(o.tag){case 0:case 11:case 15:cc(o),o.flags&2048&&to(9,o,o.return);break;case 3:cc(o);break;case 12:cc(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Dh(o)):cc(o);break;default:cc(o)}}function Dh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Rn=d,ax(d,o)}rx(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:to(8,l,l.return),Dh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Dh(l));break;default:Dh(l)}o=o.sibling}}function ax(o,l){for(;Rn!==null;){var f=Rn;switch(f.tag){case 0:case 11:case 15:to(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var d=f.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Xu(f.memoizedState.cache)}if(d=f.child,d!==null)d.return=f,Rn=d;else e:for(f=o;Rn!==null;){d=Rn;var x=d.sibling,w=d.return;if(K2(d),d===f){Rn=null;break e}if(x!==null){x.return=w,Rn=x;break e}Rn=w}}}var d3={getCacheForType:function(o){var l=Kn(mn),f=l.data.get(o);return f===void 0&&(f=o(),l.data.set(o,f)),f}},p3=typeof WeakMap=="function"?WeakMap:Map,pt=0,St=null,$e=null,nt=0,mt=0,Dr=null,io=!1,xl=!1,lp=!1,_a=0,$t=0,ao=0,ms=0,up=0,qr=0,_l=0,fc=null,yr=null,cp=!1,fp=0,Ph=1/0,Mh=null,oo=null,Hn=0,so=null,wl=null,El=0,hp=0,dp=null,ox=null,hc=0,pp=null;function Pr(){if((pt&2)!==0&&nt!==0)return nt&-nt;if(J.T!==null){var o=ul;return o!==0?o:wp()}return Ha()}function sx(){qr===0&&(qr=(nt&536870912)===0||lt?wu():536870912);var o=Gr.current;return o!==null&&(o.flags|=32),qr}function Mr(o,l,f){(o===St&&(mt===2||mt===9)||o.cancelPendingCommit!==null)&&(Al(o,0),lo(o,nt,qr,!1)),Zi(o,f),((pt&2)===0||o!==St)&&(o===St&&((pt&2)===0&&(ms|=f),$t===4&&lo(o,nt,qr,!1)),Li(o))}function lx(o,l,f){if((pt&6)!==0)throw Error(r(327));var d=!f&&(l&124)===0&&(l&o.expiredLanes)===0||Fo(o,l),x=d?v3(o,l):vp(o,l,!0),w=d;do{if(x===0){xl&&!d&&lo(o,l,0,!1);break}else{if(f=o.current.alternate,w&&!m3(f)){x=vp(o,l,!1),w=!1;continue}if(x===2){if(w=l,o.errorRecoveryDisabledLanes&w)var I=0;else I=o.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var O=o;x=fc;var z=O.current.memoizedState.isDehydrated;if(z&&(Al(O,I).flags|=256),I=vp(O,I,!1),I!==2){if(lp&&!z){O.errorRecoveryDisabledLanes|=w,ms|=w,x=4;break e}w=yr,yr=x,w!==null&&(yr===null?yr=w:yr.push.apply(yr,w))}x=I}if(w=!1,x!==2)continue}}if(x===1){Al(o,0),lo(o,l,0,!0);break}e:{switch(d=o,w=x,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:lo(d,l,qr,!io);break e;case 2:yr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(x=fp+300-pr(),10<x)){if(lo(d,l,qr,!io),Us(d,0,!0)!==0)break e;d.timeoutHandle=jx(ux.bind(null,d,f,yr,Mh,cp,l,qr,ms,_l,io,w,2,-0,0),x);break e}ux(d,f,yr,Mh,cp,l,qr,ms,_l,io,w,0,-0,0)}}break}while(!0);Li(o)}function ux(o,l,f,d,x,w,I,O,z,Q,ae,se,ee,te){if(o.timeoutHandle=-1,se=l.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(xc={stylesheets:null,count:0,unsuspend:K3},nx(l),se=Z3(),se!==null)){o.cancelPendingCommit=se(gx.bind(null,o,l,w,f,d,x,I,O,z,ae,1,ee,te)),lo(o,w,I,!Q);return}gx(o,l,w,f,d,x,I,O,z)}function m3(o){for(var l=o;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var d=0;d<f.length;d++){var x=f[d],w=x.getSnapshot;x=x.value;try{if(!Ir(w(),x))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function lo(o,l,f,d){l&=~up,l&=~ms,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var x=l;0<x;){var w=31-Sn(x),I=1<<w;d[w]=-1,x&=~I}f!==0&&wi(o,f,l)}function kh(){return(pt&6)===0?(dc(0),!1):!0}function mp(){if($e!==null){if(mt===0)var o=$e.return;else o=$e,ha=us=null,D1(o),ml=null,rc=0,o=$e;for(;o!==null;)H2(o.alternate,o),o=o.return;$e=null}}function Al(o,l){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,P3(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),mp(),St=o,$e=f=ua(o.current,null),nt=l,mt=0,Dr=null,io=!1,xl=Fo(o,l),lp=!1,_l=qr=up=ms=ao=$t=0,yr=fc=null,cp=!1,(l&8)!==0&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var x=31-Sn(d),w=1<<x;l|=o[x],d&=~w}return _a=l,rh(),f}function cx(o,l){ze=null,J.H=Eh,l===$u||l===hh?(l=Cy(),mt=3):l===by?(l=Cy(),mt=4):mt=l===I2?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Dr=l,$e===null&&($t=1,Ch(o,Ur(l,o.current)))}function fx(){var o=J.H;return J.H=Eh,o===null?Eh:o}function hx(){var o=J.A;return J.A=d3,o}function gp(){$t=4,io||(nt&4194048)!==nt&&Gr.current!==null||(xl=!0),(ao&134217727)===0&&(ms&134217727)===0||St===null||lo(St,nt,qr,!1)}function vp(o,l,f){var d=pt;pt|=2;var x=fx(),w=hx();(St!==o||nt!==l)&&(Mh=null,Al(o,l)),l=!1;var I=$t;e:do try{if(mt!==0&&$e!==null){var O=$e,z=Dr;switch(mt){case 8:mp(),I=6;break e;case 3:case 2:case 9:case 6:Gr.current===null&&(l=!0);var Q=mt;if(mt=0,Dr=null,bl(o,O,z,Q),f&&xl){I=0;break e}break;default:Q=mt,mt=0,Dr=null,bl(o,O,z,Q)}}g3(),I=$t;break}catch(ae){cx(o,ae)}while(!0);return l&&o.shellSuspendCounter++,ha=us=null,pt=d,J.H=x,J.A=w,$e===null&&(St=null,nt=0,rh()),I}function g3(){for(;$e!==null;)dx($e)}function v3(o,l){var f=pt;pt|=2;var d=fx(),x=hx();St!==o||nt!==l?(Mh=null,Ph=pr()+500,Al(o,l)):xl=Fo(o,l);e:do try{if(mt!==0&&$e!==null){l=$e;var w=Dr;t:switch(mt){case 1:mt=0,Dr=null,bl(o,l,w,1);break;case 2:case 9:if(Ty(w)){mt=0,Dr=null,px(l);break}l=function(){mt!==2&&mt!==9||St!==o||(mt=7),Li(o)},w.then(l,l);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Ty(w)?(mt=0,Dr=null,px(l)):(mt=0,Dr=null,bl(o,l,w,7));break;case 5:var I=null;switch($e.tag){case 26:I=$e.memoizedState;case 5:case 27:var O=$e;if(!I||Yx(I)){mt=0,Dr=null;var z=O.sibling;if(z!==null)$e=z;else{var Q=O.return;Q!==null?($e=Q,Lh(Q)):$e=null}break t}}mt=0,Dr=null,bl(o,l,w,5);break;case 6:mt=0,Dr=null,bl(o,l,w,6);break;case 8:mp(),$t=6;break e;default:throw Error(r(462))}}y3();break}catch(ae){cx(o,ae)}while(!0);return ha=us=null,J.H=d,J.A=x,pt=f,$e!==null?0:(St=null,nt=0,rh(),$t)}function y3(){for(;$e!==null&&!jo();)dx($e)}function dx(o){var l=U2(o.alternate,o,_a);o.memoizedProps=o.pendingProps,l===null?Lh(o):$e=l}function px(o){var l=o,f=l.alternate;switch(l.tag){case 15:case 0:l=M2(f,l,l.pendingProps,l.type,void 0,nt);break;case 11:l=M2(f,l,l.pendingProps,l.type.render,l.ref,nt);break;case 5:D1(l);default:H2(f,l),l=$e=my(l,_a),l=U2(f,l,_a)}o.memoizedProps=o.pendingProps,l===null?Lh(o):$e=l}function bl(o,l,f,d){ha=us=null,D1(l),ml=null,rc=0;var x=l.return;try{if(s3(o,x,l,f,nt)){$t=1,Ch(o,Ur(f,o.current)),$e=null;return}}catch(w){if(x!==null)throw $e=x,w;$t=1,Ch(o,Ur(f,o.current)),$e=null;return}l.flags&32768?(lt||d===1?o=!0:xl||(nt&536870912)!==0?o=!1:(io=o=!0,(d===2||d===9||d===3||d===6)&&(d=Gr.current,d!==null&&d.tag===13&&(d.flags|=16384))),mx(l,o)):Lh(l)}function Lh(o){var l=o;do{if((l.flags&32768)!==0){mx(l,io);return}o=l.return;var f=u3(l.alternate,l,_a);if(f!==null){$e=f;return}if(l=l.sibling,l!==null){$e=l;return}$e=l=o}while(l!==null);$t===0&&($t=5)}function mx(o,l){do{var f=c3(o.alternate,o);if(f!==null){f.flags&=32767,$e=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(o=o.sibling,o!==null)){$e=o;return}$e=o=f}while(o!==null);$t=6,$e=null}function gx(o,l,f,d,x,w,I,O,z){o.cancelPendingCommit=null;do jh();while(Hn!==0);if((pt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=s1,Au(o,f,w,I,O,z),o===St&&($e=St=null,nt=0),wl=l,so=o,El=f,hp=w,dp=x,ox=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,E3(mr,function(){return wx(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=J.T,J.T=null,x=ue.p,ue.p=2,I=pt,pt|=4;try{f3(o,l,f)}finally{pt=I,ue.p=x,J.T=d}}Hn=1,vx(),yx(),xx()}}function vx(){if(Hn===1){Hn=0;var o=so,l=wl,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=J.T,J.T=null;var d=ue.p;ue.p=2;var x=pt;pt|=4;try{J2(l,o);var w=Np,I=ay(o.containerInfo),O=w.focusedElem,z=w.selectionRange;if(I!==O&&O&&O.ownerDocument&&iy(O.ownerDocument.documentElement,O)){if(z!==null&&n1(O)){var Q=z.start,ae=z.end;if(ae===void 0&&(ae=Q),"selectionStart"in O)O.selectionStart=Q,O.selectionEnd=Math.min(ae,O.value.length);else{var se=O.ownerDocument||document,ee=se&&se.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),Me=O.textContent.length,Ne=Math.min(z.start,Me),Et=z.end===void 0?Ne:Math.min(z.end,Me);!te.extend&&Ne>Et&&(I=Et,Et=Ne,Ne=I);var $=ry(O,Ne),W=ry(O,Et);if($&&W&&(te.rangeCount!==1||te.anchorNode!==$.node||te.anchorOffset!==$.offset||te.focusNode!==W.node||te.focusOffset!==W.offset)){var K=se.createRange();K.setStart($.node,$.offset),te.removeAllRanges(),Ne>Et?(te.addRange(K),te.extend(W.node,W.offset)):(K.setEnd(W.node,W.offset),te.addRange(K))}}}}for(se=[],te=O;te=te.parentNode;)te.nodeType===1&&se.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<se.length;O++){var oe=se[O];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Yh=!!Ip,Np=Ip=null}finally{pt=x,ue.p=d,J.T=f}}o.current=l,Hn=2}}function yx(){if(Hn===2){Hn=0;var o=so,l=wl,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=J.T,J.T=null;var d=ue.p;ue.p=2;var x=pt;pt|=4;try{Y2(o,l.alternate,l)}finally{pt=x,ue.p=d,J.T=f}}Hn=3}}function xx(){if(Hn===4||Hn===3){Hn=0,Sr();var o=so,l=wl,f=El,d=ox;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Hn=5:(Hn=0,wl=so=null,_x(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(oo=null),Fs(f),l=l.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Je,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=J.T,x=ue.p,ue.p=2,J.T=null;try{for(var w=o.onRecoverableError,I=0;I<d.length;I++){var O=d[I];w(O.value,{componentStack:O.stack})}}finally{J.T=l,ue.p=x}}(El&3)!==0&&jh(),Li(o),x=o.pendingLanes,(f&4194090)!==0&&(x&42)!==0?o===pp?hc++:(hc=0,pp=o):hc=0,dc(0)}}function _x(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Xu(l)))}function jh(o){return vx(),yx(),xx(),wx()}function wx(){if(Hn!==5)return!1;var o=so,l=hp;hp=0;var f=Fs(El),d=J.T,x=ue.p;try{ue.p=32>f?32:f,J.T=null,f=dp,dp=null;var w=so,I=El;if(Hn=0,wl=so=null,El=0,(pt&6)!==0)throw Error(r(331));var O=pt;if(pt|=4,ix(w.current),tx(w,w.current,I,f),pt=O,dc(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Je,w)}catch{}return!0}finally{ue.p=x,J.T=d,_x(o,l)}}function Ex(o,l,f){l=Ur(f,l),l=X1(o.stateNode,l,2),o=Qa(o,l,2),o!==null&&(Zi(o,2),Li(o))}function bt(o,l,f){if(o.tag===3)Ex(o,o,f);else for(;l!==null;){if(l.tag===3){Ex(l,o,f);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(oo===null||!oo.has(d))){o=Ur(f,o),f=S2(2),d=Qa(l,f,2),d!==null&&(C2(f,d,l,o),Zi(d,2),Li(d));break}}l=l.return}}function yp(o,l,f){var d=o.pingCache;if(d===null){d=o.pingCache=new p3;var x=new Set;d.set(l,x)}else x=d.get(l),x===void 0&&(x=new Set,d.set(l,x));x.has(f)||(lp=!0,x.add(f),o=x3.bind(null,o,l,f),l.then(o,o))}function x3(o,l,f){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,St===o&&(nt&f)===f&&($t===4||$t===3&&(nt&62914560)===nt&&300>pr()-fp?(pt&2)===0&&Al(o,0):up|=f,_l===nt&&(_l=0)),Li(o)}function Ax(o,l){l===0&&(l=Eu()),o=al(o,l),o!==null&&(Zi(o,l),Li(o))}function _3(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),Ax(o,f)}function w3(o,l){var f=0;switch(o.tag){case 13:var d=o.stateNode,x=o.memoizedState;x!==null&&(f=x.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Ax(o,f)}function E3(o,l){return ti(o,l)}var Bh=null,Tl=null,xp=!1,Vh=!1,_p=!1,gs=0;function Li(o){o!==Tl&&o.next===null&&(Tl===null?Bh=Tl=o:Tl=Tl.next=o),Vh=!0,xp||(xp=!0,b3())}function dc(o,l){if(!_p&&Vh){_p=!0;do for(var f=!1,d=Bh;d!==null;){if(o!==0){var x=d.pendingLanes;if(x===0)var w=0;else{var I=d.suspendedLanes,O=d.pingedLanes;w=(1<<31-Sn(42|o)+1)-1,w&=x&~(I&~O),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,Cx(d,w))}else w=nt,w=Us(d,d===St?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Fo(d,w)||(f=!0,Cx(d,w));d=d.next}while(f);_p=!1}}function A3(){bx()}function bx(){Vh=xp=!1;var o=0;gs!==0&&(D3()&&(o=gs),gs=0);for(var l=pr(),f=null,d=Bh;d!==null;){var x=d.next,w=Tx(d,l);w===0?(d.next=null,f===null?Bh=x:f.next=x,x===null&&(Tl=f)):(f=d,(o!==0||(w&3)!==0)&&(Vh=!0)),d=x}dc(o)}function Tx(o,l){for(var f=o.suspendedLanes,d=o.pingedLanes,x=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var I=31-Sn(w),O=1<<I,z=x[I];z===-1?((O&f)===0||(O&d)!==0)&&(x[I]=_u(O,l)):z<=l&&(o.expiredLanes|=O),w&=~O}if(l=St,f=nt,f=Us(o,o===l?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,f===0||o===l&&(mt===2||mt===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&_i(d),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Fo(o,f)){if(l=f&-f,l===o.callbackPriority)return l;switch(d!==null&&_i(d),Fs(f)){case 2:case 8:f=Ua;break;case 32:f=mr;break;case 268435456:f=Ae;break;default:f=mr}return d=Sx.bind(null,o),f=ti(f,d),o.callbackPriority=l,o.callbackNode=f,l}return d!==null&&d!==null&&_i(d),o.callbackPriority=2,o.callbackNode=null,2}function Sx(o,l){if(Hn!==0&&Hn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(jh()&&o.callbackNode!==f)return null;var d=nt;return d=Us(o,o===St?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(lx(o,d,l),Tx(o,pr()),o.callbackNode!=null&&o.callbackNode===f?Sx.bind(null,o):null)}function Cx(o,l){if(jh())return null;lx(o,l,!0)}function b3(){M3(function(){(pt&6)!==0?ti(Bo,A3):bx()})}function wp(){return gs===0&&(gs=wu()),gs}function Ix(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ws(""+o)}function Nx(o,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,o.id&&f.setAttribute("form",o.id),l.parentNode.insertBefore(f,l),o=new FormData(o),f.parentNode.removeChild(f),o}function T3(o,l,f,d,x){if(l==="submit"&&f&&f.stateNode===x){var w=Ix((x[an]||null).action),I=d.submitter;I&&(l=(l=I[an]||null)?Ix(l.formAction):I.getAttribute("formAction"),l!==null&&(w=l,I=null));var O=new $s("action","action",null,d,x);o.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(gs!==0){var z=I?Nx(x,I):new FormData(x);F1(f,{pending:!0,data:z,method:x.method,action:w},null,z)}}else typeof w=="function"&&(O.preventDefault(),z=I?Nx(x,I):new FormData(x),F1(f,{pending:!0,data:z,method:x.method,action:w},w,z))},currentTarget:x}]})}}for(var Ep=0;Ep<o1.length;Ep++){var Ap=o1[Ep],S3=Ap.toLowerCase(),C3=Ap[0].toUpperCase()+Ap.slice(1);oi(S3,"on"+C3)}oi(ly,"onAnimationEnd"),oi(uy,"onAnimationIteration"),oi(cy,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(GC,"onTransitionRun"),oi(qC,"onTransitionStart"),oi(XC,"onTransitionCancel"),oi(fy,"onTransitionEnd"),ea("onMouseEnter",["mouseout","mouseover"]),ea("onMouseLeave",["mouseout","mouseover"]),ea("onPointerEnter",["pointerout","pointerover"]),ea("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function Rx(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var d=o[f],x=d.event;d=d.listeners;e:{var w=void 0;if(l)for(var I=d.length-1;0<=I;I--){var O=d[I],z=O.instance,Q=O.currentTarget;if(O=O.listener,z!==w&&x.isPropagationStopped())break e;w=O,x.currentTarget=Q;try{w(x)}catch(ae){Sh(ae)}x.currentTarget=null,w=z}else for(I=0;I<d.length;I++){if(O=d[I],z=O.instance,Q=O.currentTarget,O=O.listener,z!==w&&x.isPropagationStopped())break e;w=O,x.currentTarget=Q;try{w(x)}catch(ae){Sh(ae)}x.currentTarget=null,w=z}}}}function Ye(o,l){var f=l[Tu];f===void 0&&(f=l[Tu]=new Set);var d=o+"__bubble";f.has(d)||(Ox(l,o,2,!1),f.add(d))}function bp(o,l,f){var d=0;l&&(d|=4),Ox(f,o,d,l)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function Tp(o){if(!o[Uh]){o[Uh]=!0,Su.forEach(function(f){f!=="selectionchange"&&(I3.has(f)||bp(f,!1,o),bp(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Uh]||(l[Uh]=!0,bp("selectionchange",!1,l))}}function Ox(o,l,f,d){switch(t_(l)){case 2:var x=t4;break;case 8:x=n4;break;default:x=Vp}f=x.bind(null,l,f,o),x=void 0,!Br||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),d?x!==void 0?o.addEventListener(l,f,{capture:!0,passive:x}):o.addEventListener(l,f,!0):x!==void 0?o.addEventListener(l,f,{passive:x}):o.addEventListener(l,f,!1)}function Sp(o,l,f,d,x){var w=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var I=d.tag;if(I===3||I===4){var O=d.stateNode.containerInfo;if(O===x)break;if(I===4)for(I=d.return;I!==null;){var z=I.tag;if((z===3||z===4)&&I.stateNode.containerInfo===x)return;I=I.return}for(;O!==null;){if(I=Ji(O),I===null)return;if(z=I.tag,z===5||z===6||z===26||z===27){d=w=I;continue e}O=O.parentNode}}d=d.return}Hf(function(){var Q=w,ae=jr(f),se=[];e:{var ee=hy.get(o);if(ee!==void 0){var te=$s,Me=o;switch(o){case"keypress":if(Ci(f)===0)break e;case"keydown":case"keyup":te=el;break;case"focusin":Me="focus",te=Qs;break;case"focusout":Me="blur",te=Qs;break;case"beforeblur":case"afterblur":te=Qs;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Kf;break;case ly:case uy:case cy:te=Zs;break;case fy:te=Zf;break;case"scroll":case"scrollend":te=zf;break;case"wheel":te=tl;break;case"copy":case"cut":case"paste":te=Js;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Bu;break;case"toggle":case"beforetoggle":te=eh}var Ne=(l&4)!==0,Et=!Ne&&(o==="scroll"||o==="scrollend"),$=Ne?ee!==null?ee+"Capture":null:ee;Ne=[];for(var W=Q,K;W!==null;){var oe=W;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||$===null||(oe=Yo(W,$),oe!=null&&Ne.push(mc(W,oe,K))),Et)break;W=W.return}0<Ne.length&&(ee=new te(ee,Me,null,f,ae),se.push({event:ee,listeners:Ne}))}}if((l&7)===0){e:{if(ee=o==="mouseover"||o==="pointerover",te=o==="mouseout"||o==="pointerout",ee&&f!==ra&&(Me=f.relatedTarget||f.fromElement)&&(Ji(Me)||Me[kr]))break e;if((te||ee)&&(ee=ae.window===ae?ae:(ee=ae.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(Me=f.relatedTarget||f.toElement,te=Q,Me=Me?Ji(Me):null,Me!==null&&(Et=a(Me),Ne=Me.tag,Me!==Et||Ne!==5&&Ne!==27&&Ne!==6)&&(Me=null)):(te=null,Me=Q),te!==Me)){if(Ne=Vr,oe="onMouseLeave",$="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(Ne=Bu,oe="onPointerLeave",$="onPointerEnter",W="pointer"),Et=te==null?ee:Ai(te),K=Me==null?ee:Ai(Me),ee=new Ne(oe,W+"leave",te,f,ae),ee.target=Et,ee.relatedTarget=K,oe=null,Ji(ae)===Q&&(Ne=new Ne($,W+"enter",Me,f,ae),Ne.target=K,Ne.relatedTarget=Et,oe=Ne),Et=oe,te&&Me)t:{for(Ne=te,$=Me,W=0,K=Ne;K;K=Sl(K))W++;for(K=0,oe=$;oe;oe=Sl(oe))K++;for(;0<W-K;)Ne=Sl(Ne),W--;for(;0<K-W;)$=Sl($),K--;for(;W--;){if(Ne===$||$!==null&&Ne===$.alternate)break t;Ne=Sl(Ne),$=Sl($)}Ne=null}else Ne=null;te!==null&&Dx(se,ee,te,Ne,!1),Me!==null&&Et!==null&&Dx(se,Et,Me,Ne,!0)}}e:{if(ee=Q?Ai(Q):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var we=Qv;else if(pn(ee))if(Zv)we=FC;else{we=VC;var Xe=BC}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Q&&Ou(Q.elementType)&&(we=Qv):we=UC;if(we&&(we=we(o,Q))){la(se,we,f,ae);break e}Xe&&Xe(o,ee,Q),o==="focusout"&&Q&&ee.type==="number"&&Q.memoizedProps.value!=null&&Xa(ee,"number",ee.value)}switch(Xe=Q?Ai(Q):window,o){case"focusin":(pn(Xe)||Xe.contentEditable==="true")&&(nl=Xe,r1=Q,Fu=null);break;case"focusout":Fu=r1=nl=null;break;case"mousedown":i1=!0;break;case"contextmenu":case"mouseup":case"dragend":i1=!1,oy(se,f,ae);break;case"selectionchange":if(zC)break;case"keydown":case"keyup":oy(se,f,ae)}var be;if(Ri)e:{switch(o){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else et?ne(o,f)&&(De="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(De="onCompositionStart");De&&(C&&f.locale!=="ko"&&(et||De!=="onCompositionStart"?De==="onCompositionEnd"&&et&&(be=Pu()):(Si=ae,Wa="value"in Si?Si.value:Si.textContent,et=!0)),Xe=Fh(Q,De),0<Xe.length&&(De=new Lu(De,o,null,f,ae),se.push({event:De,listeners:Xe}),be?De.data=be:(be=me(f),be!==null&&(De.data=be)))),(be=A?dn(o,f):tt(o,f))&&(De=Fh(Q,"onBeforeInput"),0<De.length&&(Xe=new Lu("onBeforeInput","beforeinput",null,f,ae),se.push({event:Xe,listeners:De}),Xe.data=be)),T3(se,o,Q,f,ae)}Rx(se,l)})}function mc(o,l,f){return{instance:o,listener:l,currentTarget:f}}function Fh(o,l){for(var f=l+"Capture",d=[];o!==null;){var x=o,w=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||w===null||(x=Yo(o,f),x!=null&&d.unshift(mc(o,x,w)),x=Yo(o,l),x!=null&&d.push(mc(o,x,w))),o.tag===3)return d;o=o.return}return[]}function Sl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Dx(o,l,f,d,x){for(var w=l._reactName,I=[];f!==null&&f!==d;){var O=f,z=O.alternate,Q=O.stateNode;if(O=O.tag,z!==null&&z===d)break;O!==5&&O!==26&&O!==27||Q===null||(z=Q,x?(Q=Yo(f,w),Q!=null&&I.unshift(mc(f,Q,z))):x||(Q=Yo(f,w),Q!=null&&I.push(mc(f,Q,z)))),f=f.return}I.length!==0&&o.push({event:l,listeners:I})}var N3=/\r\n?/g,R3=/\u0000|\uFFFD/g;function Px(o){return(typeof o=="string"?o:""+o).replace(N3,`
`).replace(R3,"")}function Mx(o,l){return l=Px(l),Px(o)===l}function Hh(){}function wt(o,l,f,d,x,w){switch(f){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Lr(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Lr(o,""+d);break;case"className":bi(o,"class",d);break;case"tabIndex":bi(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":bi(o,f,d);break;case"style":Ru(o,d,w);break;case"data":if(l!=="object"){bi(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||f!=="href")){o.removeAttribute(f);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(f);break}d=Ws(""+d),o.setAttribute(f,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&wt(o,l,"name",x.name,x,null),wt(o,l,"formEncType",x.formEncType,x,null),wt(o,l,"formMethod",x.formMethod,x,null),wt(o,l,"formTarget",x.formTarget,x,null)):(wt(o,l,"encType",x.encType,x,null),wt(o,l,"method",x.method,x,null),wt(o,l,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(f);break}d=Ws(""+d),o.setAttribute(f,d);break;case"onClick":d!=null&&(o.onclick=Hh);break;case"onScroll":d!=null&&Ye("scroll",o);break;case"onScrollEnd":d!=null&&Ye("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}f=Ws(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,""+d):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":d===!0?o.setAttribute(f,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(f,d):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(f,d):o.removeAttribute(f);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(f):o.setAttribute(f,d);break;case"popover":Ye("beforetoggle",o),Ye("toggle",o),qa(o,"popover",d);break;case"xlinkActuate":Vn(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Vn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Vn(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Vn(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Vn(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Vn(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Vn(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Vn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Vn(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":qa(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=K0.get(f)||f,qa(o,f,d))}}function Cp(o,l,f,d,x,w){switch(f){case"style":Ru(o,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof d=="string"?Lr(o,d):(typeof d=="number"||typeof d=="bigint")&&Lr(o,""+d);break;case"onScroll":d!=null&&Ye("scroll",o);break;case"onScrollEnd":d!=null&&Ye("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Hh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hs.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),l=f.slice(2,x?f.length-7:void 0),w=o[an]||null,w=w!=null?w[f]:null,typeof w=="function"&&o.removeEventListener(l,w,x),typeof d=="function")){typeof w!="function"&&w!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(l,d,x);break e}f in o?o[f]=d:d===!0?o.setAttribute(f,""):qa(o,f,d)}}}function zn(o,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",o),Ye("load",o);var d=!1,x=!1,w;for(w in f)if(f.hasOwnProperty(w)){var I=f[w];if(I!=null)switch(w){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:wt(o,l,w,I,f,null)}}x&&wt(o,l,"srcSet",f.srcSet,f,null),d&&wt(o,l,"src",f.src,f,null);return;case"input":Ye("invalid",o);var O=w=I=x=null,z=null,Q=null;for(d in f)if(f.hasOwnProperty(d)){var ae=f[d];if(ae!=null)switch(d){case"name":x=ae;break;case"type":I=ae;break;case"checked":z=ae;break;case"defaultChecked":Q=ae;break;case"value":w=ae;break;case"defaultValue":O=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:wt(o,l,d,ae,f,null)}}Xo(o,w,O,z,Q,I,x,!1),Xs(o);return;case"select":Ye("invalid",o),d=I=w=null;for(x in f)if(f.hasOwnProperty(x)&&(O=f[x],O!=null))switch(x){case"value":w=O;break;case"defaultValue":I=O;break;case"multiple":d=O;default:wt(o,l,x,O,f,null)}l=w,f=I,o.multiple=!!d,l!=null?na(o,!!d,l,!1):f!=null&&na(o,!!d,f,!0);return;case"textarea":Ye("invalid",o),w=x=d=null;for(I in f)if(f.hasOwnProperty(I)&&(O=f[I],O!=null))switch(I){case"value":d=O;break;case"defaultValue":x=O;break;case"children":w=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:wt(o,l,I,O,f,null)}Wo(o,d,x,w),Xs(o);return;case"option":for(z in f)if(f.hasOwnProperty(z)&&(d=f[z],d!=null))switch(z){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:wt(o,l,z,d,f,null)}return;case"dialog":Ye("beforetoggle",o),Ye("toggle",o),Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":Ye("load",o);break;case"video":case"audio":for(d=0;d<pc.length;d++)Ye(pc[d],o);break;case"image":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"embed":case"source":case"link":Ye("error",o),Ye("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in f)if(f.hasOwnProperty(Q)&&(d=f[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:wt(o,l,Q,d,f,null)}return;default:if(Ou(l)){for(ae in f)f.hasOwnProperty(ae)&&(d=f[ae],d!==void 0&&Cp(o,l,ae,d,f,void 0));return}}for(O in f)f.hasOwnProperty(O)&&(d=f[O],d!=null&&wt(o,l,O,d,f,null))}function O3(o,l,f,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,w=null,I=null,O=null,z=null,Q=null,ae=null;for(te in f){var se=f[te];if(f.hasOwnProperty(te)&&se!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":z=se;default:d.hasOwnProperty(te)||wt(o,l,te,null,d,se)}}for(var ee in d){var te=d[ee];if(se=f[ee],d.hasOwnProperty(ee)&&(te!=null||se!=null))switch(ee){case"type":w=te;break;case"name":x=te;break;case"checked":Q=te;break;case"defaultChecked":ae=te;break;case"value":I=te;break;case"defaultValue":O=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:te!==se&&wt(o,l,ee,te,d,se)}}Cr(o,I,O,z,Q,ae,w,x);return;case"select":te=I=O=ee=null;for(w in f)if(z=f[w],f.hasOwnProperty(w)&&z!=null)switch(w){case"value":break;case"multiple":te=z;default:d.hasOwnProperty(w)||wt(o,l,w,null,d,z)}for(x in d)if(w=d[x],z=f[x],d.hasOwnProperty(x)&&(w!=null||z!=null))switch(x){case"value":ee=w;break;case"defaultValue":O=w;break;case"multiple":I=w;default:w!==z&&wt(o,l,x,w,d,z)}l=O,f=I,d=te,ee!=null?na(o,!!f,ee,!1):!!d!=!!f&&(l!=null?na(o,!!f,l,!0):na(o,!!f,f?[]:"",!1));return;case"textarea":te=ee=null;for(O in f)if(x=f[O],f.hasOwnProperty(O)&&x!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:wt(o,l,O,null,d,x)}for(I in d)if(x=d[I],w=f[I],d.hasOwnProperty(I)&&(x!=null||w!=null))switch(I){case"value":ee=x;break;case"defaultValue":te=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==w&&wt(o,l,I,x,d,w)}xt(o,ee,te);return;case"option":for(var Me in f)if(ee=f[Me],f.hasOwnProperty(Me)&&ee!=null&&!d.hasOwnProperty(Me))switch(Me){case"selected":o.selected=!1;break;default:wt(o,l,Me,null,d,ee)}for(z in d)if(ee=d[z],te=f[z],d.hasOwnProperty(z)&&ee!==te&&(ee!=null||te!=null))switch(z){case"selected":o.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:wt(o,l,z,ee,d,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in f)ee=f[Ne],f.hasOwnProperty(Ne)&&ee!=null&&!d.hasOwnProperty(Ne)&&wt(o,l,Ne,null,d,ee);for(Q in d)if(ee=d[Q],te=f[Q],d.hasOwnProperty(Q)&&ee!==te&&(ee!=null||te!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,l));break;default:wt(o,l,Q,ee,d,te)}return;default:if(Ou(l)){for(var Et in f)ee=f[Et],f.hasOwnProperty(Et)&&ee!==void 0&&!d.hasOwnProperty(Et)&&Cp(o,l,Et,void 0,d,ee);for(ae in d)ee=d[ae],te=f[ae],!d.hasOwnProperty(ae)||ee===te||ee===void 0&&te===void 0||Cp(o,l,ae,ee,d,te);return}}for(var $ in f)ee=f[$],f.hasOwnProperty($)&&ee!=null&&!d.hasOwnProperty($)&&wt(o,l,$,null,d,ee);for(se in d)ee=d[se],te=f[se],!d.hasOwnProperty(se)||ee===te||ee==null&&te==null||wt(o,l,se,ee,d,te)}var Ip=null,Np=null;function zh(o){return o.nodeType===9?o:o.ownerDocument}function kx(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lx(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Rp(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Op=null;function D3(){var o=window.event;return o&&o.type==="popstate"?o===Op?!1:(Op=o,!0):(Op=null,!1)}var jx=typeof setTimeout=="function"?setTimeout:void 0,P3=typeof clearTimeout=="function"?clearTimeout:void 0,Bx=typeof Promise=="function"?Promise:void 0,M3=typeof queueMicrotask=="function"?queueMicrotask:typeof Bx<"u"?function(o){return Bx.resolve(null).then(o).catch(k3)}:jx;function k3(o){setTimeout(function(){throw o})}function uo(o){return o==="head"}function Vx(o,l){var f=l,d=0,x=0;do{var w=f.nextSibling;if(o.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(0<d&&8>d){f=d;var I=o.ownerDocument;if(f&1&&gc(I.documentElement),f&2&&gc(I.body),f&4)for(f=I.head,gc(f),I=f.firstChild;I;){var O=I.nextSibling,z=I.nodeName;I[Ho]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&I.rel.toLowerCase()==="stylesheet"||f.removeChild(I),I=O}}if(x===0){o.removeChild(w),bc(l);return}x--}else f==="$"||f==="$?"||f==="$!"?x++:d=f.charCodeAt(0)-48;else d=0;f=w}while(f);bc(l)}function Dp(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Dp(f),Ga(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function L3(o,l,f,d){for(;o.nodeType===1;){var x=f;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Ho])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var w=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=li(o.nextSibling),o===null)break}return null}function j3(o,l,f){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=li(o.nextSibling),o===null))return null;return o}function Pp(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function B3(o,l){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")l();else{var d=function(){l(),f.removeEventListener("DOMContentLoaded",d)};f.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function li(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Mp=null;function Ux(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}function Fx(o,l,f){switch(l=zh(f),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function gc(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Ga(o)}var Xr=new Map,Hx=new Set;function Gh(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var wa=ue.d;ue.d={f:V3,r:U3,D:F3,C:H3,L:z3,m:G3,X:X3,S:q3,M:W3};function V3(){var o=wa.f(),l=kh();return o||l}function U3(o){var l=Ei(o);l!==null&&l.tag===5&&l.type==="form"?l2(l):wa.r(o)}var Cl=typeof document>"u"?null:document;function zx(o,l,f){var d=Cl;if(d&&typeof l=="string"&&l){var x=on(l);x='link[rel="'+o+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),Hx.has(x)||(Hx.add(x),o={rel:o,crossOrigin:f,href:l},d.querySelector(x)===null&&(l=d.createElement("link"),zn(l,"link",o),Zt(l),d.head.appendChild(l)))}}function F3(o){wa.D(o),zx("dns-prefetch",o,null)}function H3(o,l){wa.C(o,l),zx("preconnect",o,l)}function z3(o,l,f){wa.L(o,l,f);var d=Cl;if(d&&o&&l){var x='link[rel="preload"][as="'+on(l)+'"]';l==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+on(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+on(f.imageSizes)+'"]')):x+='[href="'+on(o)+'"]';var w=x;switch(l){case"style":w=Il(o);break;case"script":w=Nl(o)}Xr.has(w)||(o=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:o,as:l},f),Xr.set(w,o),d.querySelector(x)!==null||l==="style"&&d.querySelector(vc(w))||l==="script"&&d.querySelector(yc(w))||(l=d.createElement("link"),zn(l,"link",o),Zt(l),d.head.appendChild(l)))}}function G3(o,l){wa.m(o,l);var f=Cl;if(f&&o){var d=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+on(d)+'"][href="'+on(o)+'"]',w=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Nl(o)}if(!Xr.has(w)&&(o=p({rel:"modulepreload",href:o},l),Xr.set(w,o),f.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(yc(w)))return}d=f.createElement("link"),zn(d,"link",o),Zt(d),f.head.appendChild(d)}}}function q3(o,l,f){wa.S(o,l,f);var d=Cl;if(d&&o){var x=ar(d).hoistableStyles,w=Il(o);l=l||"default";var I=x.get(w);if(!I){var O={loading:0,preload:null};if(I=d.querySelector(vc(w)))O.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},f),(f=Xr.get(w))&&kp(o,f);var z=I=d.createElement("link");Zt(z),zn(z,"link",o),z._p=new Promise(function(Q,ae){z.onload=Q,z.onerror=ae}),z.addEventListener("load",function(){O.loading|=1}),z.addEventListener("error",function(){O.loading|=2}),O.loading|=4,qh(I,l,d)}I={type:"stylesheet",instance:I,count:1,state:O},x.set(w,I)}}}function X3(o,l){wa.X(o,l);var f=Cl;if(f&&o){var d=ar(f).hoistableScripts,x=Nl(o),w=d.get(x);w||(w=f.querySelector(yc(x)),w||(o=p({src:o,async:!0},l),(l=Xr.get(x))&&Lp(o,l),w=f.createElement("script"),Zt(w),zn(w,"link",o),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(x,w))}}function W3(o,l){wa.M(o,l);var f=Cl;if(f&&o){var d=ar(f).hoistableScripts,x=Nl(o),w=d.get(x);w||(w=f.querySelector(yc(x)),w||(o=p({src:o,async:!0,type:"module"},l),(l=Xr.get(x))&&Lp(o,l),w=f.createElement("script"),Zt(w),zn(w,"link",o),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(x,w))}}function Gx(o,l,f,d){var x=(x=Ie.current)?Gh(x):null;if(!x)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Il(f.href),f=ar(x).hoistableStyles,d=f.get(l),d||(d={type:"style",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Il(f.href);var w=ar(x).hoistableStyles,I=w.get(o);if(I||(x=x.ownerDocument||x,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,I),(w=x.querySelector(vc(o)))&&!w._p&&(I.instance=w,I.state.loading=5),Xr.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Xr.set(o,f),w||$3(x,o,f,I.state))),l&&d===null)throw Error(r(528,""));return I}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Nl(f),f=ar(x).hoistableScripts,d=f.get(l),d||(d={type:"script",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Il(o){return'href="'+on(o)+'"'}function vc(o){return'link[rel="stylesheet"]['+o+"]"}function qx(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function $3(o,l,f,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),zn(l,"link",f),Zt(l),o.head.appendChild(l))}function Nl(o){return'[src="'+on(o)+'"]'}function yc(o){return"script[async]"+o}function Xx(o,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+on(f.href)+'"]');if(d)return l.instance=d,Zt(d),d;var x=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Zt(d),zn(d,"style",x),qh(d,f.precedence,o),l.instance=d;case"stylesheet":x=Il(f.href);var w=o.querySelector(vc(x));if(w)return l.state.loading|=4,l.instance=w,Zt(w),w;d=qx(f),(x=Xr.get(x))&&kp(d,x),w=(o.ownerDocument||o).createElement("link"),Zt(w);var I=w;return I._p=new Promise(function(O,z){I.onload=O,I.onerror=z}),zn(w,"link",d),l.state.loading|=4,qh(w,f.precedence,o),l.instance=w;case"script":return w=Nl(f.src),(x=o.querySelector(yc(w)))?(l.instance=x,Zt(x),x):(d=f,(x=Xr.get(w))&&(d=p({},f),Lp(d,x)),o=o.ownerDocument||o,x=o.createElement("script"),Zt(x),zn(x,"link",d),o.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,qh(d,f.precedence,o));return l.instance}function qh(o,l,f){for(var d=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,w=x,I=0;I<d.length;I++){var O=d[I];if(O.dataset.precedence===l)w=O;else if(w!==x)break}w?w.parentNode.insertBefore(o,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(o,l.firstChild))}function kp(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Lp(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Xh=null;function Wx(o,l,f){if(Xh===null){var d=new Map,x=Xh=new Map;x.set(f,d)}else x=Xh,d=x.get(f),d||(d=new Map,x.set(f,d));if(d.has(o))return d;for(d.set(o,null),f=f.getElementsByTagName(o),x=0;x<f.length;x++){var w=f[x];if(!(w[Ho]||w[hn]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var I=w.getAttribute(l)||"";I=o+I;var O=d.get(I);O?O.push(w):d.set(I,[w])}}return d}function $x(o,l,f){o=o.ownerDocument||o,o.head.insertBefore(f,l==="title"?o.querySelector("head > title"):null)}function Y3(o,l,f){if(f===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Yx(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var xc=null;function K3(){}function Q3(o,l,f){if(xc===null)throw Error(r(475));var d=xc;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=Il(f.href),w=o.querySelector(vc(x));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Wh.bind(d),o.then(d,d)),l.state.loading|=4,l.instance=w,Zt(w);return}w=o.ownerDocument||o,f=qx(f),(x=Xr.get(x))&&kp(f,x),w=w.createElement("link"),Zt(w);var I=w;I._p=new Promise(function(O,z){I.onload=O,I.onerror=z}),zn(w,"link",f),l.instance=w}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=Wh.bind(d),o.addEventListener("load",l),o.addEventListener("error",l))}}function Z3(){if(xc===null)throw Error(r(475));var o=xc;return o.stylesheets&&o.count===0&&jp(o,o.stylesheets),0<o.count?function(l){var f=setTimeout(function(){if(o.stylesheets&&jp(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(f)}}:null}function Wh(){if(this.count--,this.count===0){if(this.stylesheets)jp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var $h=null;function jp(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,$h=new Map,l.forEach(J3,o),$h=null,Wh.call(o))}function J3(o,l){if(!(l.state.loading&4)){var f=$h.get(o);if(f)var d=f.get(null);else{f=new Map,$h.set(o,f);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<x.length;w++){var I=x[w];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(f.set(I.dataset.precedence,I),d=I)}d&&f.set(null,d)}x=l.instance,I=x.getAttribute("data-precedence"),w=f.get(I)||d,w===d&&f.set(null,x),f.set(I,x),this.count++,d=Wh.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),w?w.parentNode.insertBefore(x,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),l.state.loading|=4}}var _c={$$typeof:P,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function e4(o,l,f,d,x,w,I,O){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=w,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Kx(o,l,f,d,x,w,I,O,z,Q,ae,se){return o=new e4(o,l,f,I,O,z,Q,se),l=1,w===!0&&(l|=24),w=Nr(3,null,null,l),o.current=w,w.stateNode=o,l=y1(),l.refCount++,o.pooledCache=l,l.refCount++,w.memoizedState={element:d,isDehydrated:f,cache:l},E1(w),o}function Qx(o){return o?(o=ol,o):ol}function Zx(o,l,f,d,x,w){x=Qx(x),d.context===null?d.context=x:d.pendingContext=x,d=Ka(l),d.payload={element:f},w=w===void 0?null:w,w!==null&&(d.callback=w),f=Qa(o,d,l),f!==null&&(Mr(f,o,l),Ku(f,o,l))}function Jx(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function Bp(o,l){Jx(o,l),(o=o.alternate)&&Jx(o,l)}function e_(o){if(o.tag===13){var l=al(o,67108864);l!==null&&Mr(l,o,67108864),Bp(o,67108864)}}var Yh=!0;function t4(o,l,f,d){var x=J.T;J.T=null;var w=ue.p;try{ue.p=2,Vp(o,l,f,d)}finally{ue.p=w,J.T=x}}function n4(o,l,f,d){var x=J.T;J.T=null;var w=ue.p;try{ue.p=8,Vp(o,l,f,d)}finally{ue.p=w,J.T=x}}function Vp(o,l,f,d){if(Yh){var x=Up(d);if(x===null)Sp(o,l,d,Kh,f),n_(o,d);else if(i4(x,o,l,f,d))d.stopPropagation();else if(n_(o,d),l&4&&-1<r4.indexOf(o)){for(;x!==null;){var w=Ei(x);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var I=ri(w.pendingLanes);if(I!==0){var O=w;for(O.pendingLanes|=2,O.entangledLanes|=2;I;){var z=1<<31-Sn(I);O.entanglements[1]|=z,I&=~z}Li(w),(pt&6)===0&&(Ph=pr()+500,dc(0))}}break;case 13:O=al(w,2),O!==null&&Mr(O,w,2),kh(),Bp(w,2)}if(w=Up(d),w===null&&Sp(o,l,d,Kh,f),w===x)break;x=w}x!==null&&d.stopPropagation()}else Sp(o,l,d,null,f)}}function Up(o){return o=jr(o),Fp(o)}var Kh=null;function Fp(o){if(Kh=null,o=Ji(o),o!==null){var l=a(o);if(l===null)o=null;else{var f=l.tag;if(f===13){if(o=s(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Kh=o,null}function t_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yu()){case Bo:return 2;case Ua:return 8;case mr:case Vs:return 32;case Ae:return 268435456;default:return 32}default:return 32}}var Hp=!1,co=null,fo=null,ho=null,wc=new Map,Ec=new Map,po=[],r4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n_(o,l){switch(o){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":wc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(l.pointerId)}}function Ac(o,l,f,d,x,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:f,eventSystemFlags:d,nativeEvent:w,targetContainers:[x]},l!==null&&(l=Ei(l),l!==null&&e_(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function i4(o,l,f,d,x){switch(l){case"focusin":return co=Ac(co,o,l,f,d,x),!0;case"dragenter":return fo=Ac(fo,o,l,f,d,x),!0;case"mouseover":return ho=Ac(ho,o,l,f,d,x),!0;case"pointerover":var w=x.pointerId;return wc.set(w,Ac(wc.get(w)||null,o,l,f,d,x)),!0;case"gotpointercapture":return w=x.pointerId,Ec.set(w,Ac(Ec.get(w)||null,o,l,f,d,x)),!0}return!1}function r_(o){var l=Ji(o.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=s(f),l!==null){o.blockedOn=l,kf(o.priority,function(){if(f.tag===13){var d=Pr();d=Fa(d);var x=al(f,d);x!==null&&Mr(x,f,d),Bp(f,d)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Qh(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=Up(o.nativeEvent);if(f===null){f=o.nativeEvent;var d=new f.constructor(f.type,f);ra=d,f.target.dispatchEvent(d),ra=null}else return l=Ei(f),l!==null&&e_(l),o.blockedOn=f,!1;l.shift()}return!0}function i_(o,l,f){Qh(o)&&f.delete(l)}function a4(){Hp=!1,co!==null&&Qh(co)&&(co=null),fo!==null&&Qh(fo)&&(fo=null),ho!==null&&Qh(ho)&&(ho=null),wc.forEach(i_),Ec.forEach(i_)}function Zh(o,l){o.blockedOn===l&&(o.blockedOn=null,Hp||(Hp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,a4)))}var Jh=null;function a_(o){Jh!==o&&(Jh=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jh===o&&(Jh=null);for(var l=0;l<o.length;l+=3){var f=o[l],d=o[l+1],x=o[l+2];if(typeof d!="function"){if(Fp(d||f)===null)continue;break}var w=Ei(f);w!==null&&(o.splice(l,3),l-=3,F1(w,{pending:!0,data:x,method:f.method,action:d},d,x))}}))}function bc(o){function l(z){return Zh(z,o)}co!==null&&Zh(co,o),fo!==null&&Zh(fo,o),ho!==null&&Zh(ho,o),wc.forEach(l),Ec.forEach(l);for(var f=0;f<po.length;f++){var d=po[f];d.blockedOn===o&&(d.blockedOn=null)}for(;0<po.length&&(f=po[0],f.blockedOn===null);)r_(f),f.blockedOn===null&&po.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(d=0;d<f.length;d+=3){var x=f[d],w=f[d+1],I=x[an]||null;if(typeof w=="function")I||a_(f);else if(I){var O=null;if(w&&w.hasAttribute("formAction")){if(x=w,I=w[an]||null)O=I.formAction;else if(Fp(x)!==null)continue}else O=I.action;typeof O=="function"?f[d+1]=O:(f.splice(d,3),d-=3),a_(f)}}}function zp(o){this._internalRoot=o}ed.prototype.render=zp.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,d=Pr();Zx(f,d,o,l,null,null)},ed.prototype.unmount=zp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Zx(o.current,2,null,o,null,null),kh(),l[kr]=null}};function ed(o){this._internalRoot=o}ed.prototype.unstable_scheduleHydration=function(o){if(o){var l=Ha();o={blockedOn:null,target:o,priority:l};for(var f=0;f<po.length&&l!==0&&l<po[f].priority;f++);po.splice(f,0,o),f===0&&r_(o)}};var o_=e.version;if(o_!=="19.1.0")throw Error(r(527,o_,"19.1.0"));ue.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=c(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var o4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Je=td.inject(o4),Ze=td}catch{}}return Sc.createRoot=function(o,l){if(!i(o))throw Error(r(299));var f=!1,d="",x=E2,w=A2,I=b2,O=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks)),l=Kx(o,1,!1,null,null,f,d,x,w,I,O,null),o[kr]=l.current,Tp(o),new zp(l)},Sc.hydrateRoot=function(o,l,f){if(!i(o))throw Error(r(299));var d=!1,x="",w=E2,I=A2,O=b2,z=null,Q=null;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(O=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(z=f.unstable_transitionCallbacks),f.formState!==void 0&&(Q=f.formState)),l=Kx(o,1,!0,l,f??null,d,x,w,I,O,z,Q),l.context=Qx(null),f=l.current,d=Pr(),d=Fa(d),x=Ka(d),x.callback=null,Qa(f,x,d),f=d,l.current.lanes=f,Zi(l,f),Li(l),o[kr]=l.current,Tp(o),new ed(l)},Sc.version="19.1.0",Sc}var g_;function g4(){if(g_)return Xp.exports;g_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xp.exports=m4(),Xp.exports}var v4=g4(),Cc={},v_;function y4(){if(v_)return Cc;v_=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.parse=s,Cc.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function s(y,_){const E=new a,b=y.length;if(b<2)return E;const T=(_==null?void 0:_.decode)||p;let S=0;do{const N=y.indexOf("=",S);if(N===-1)break;const P=y.indexOf(";",S),j=P===-1?b:P;if(N>j){S=y.lastIndexOf(";",N-1)+1;continue}const U=u(y,S,N),X=c(y,N,U),D=y.slice(U,X);if(E[D]===void 0){let R=u(y,N+1,j),M=c(y,j,R);const B=T(y.slice(R,M));E[D]=B}S=j+1}while(S<b);return E}function u(y,_,E){do{const b=y.charCodeAt(_);if(b!==32&&b!==9)return _}while(++_<E);return E}function c(y,_,E){for(;_>E;){const b=y.charCodeAt(--_);if(b!==32&&b!==9)return _+1}return E}function h(y,_,E){const b=(E==null?void 0:E.encode)||encodeURIComponent;if(!n.test(y))throw new TypeError(`argument name is invalid: ${y}`);const T=b(_);if(!e.test(T))throw new TypeError(`argument val is invalid: ${_}`);let S=y+"="+T;if(!E)return S;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);S+="; Max-Age="+E.maxAge}if(E.domain){if(!t.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);S+="; Domain="+E.domain}if(E.path){if(!r.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);S+="; Path="+E.path}if(E.expires){if(!m(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);S+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(S+="; HttpOnly"),E.secure&&(S+="; Secure"),E.partitioned&&(S+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return S}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return i.call(y)==="[object Date]"}return Cc}y4();var y_="popstate";function x4(n={}){function e(r,i){let{pathname:a,search:s,hash:u}=r.location;return Fm("",{pathname:a,search:s,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Jc(i)}return w4(e,t,null,n)}function jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _4(){return Math.random().toString(36).substring(2,10)}function x_(n,e){return{usr:n.state,key:n.key,idx:e}}function Fm(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?tu(e):e,state:t,key:e&&e.key||r||_4()}}function Jc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function tu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function w4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,u="POP",c=null,h=p();h==null&&(h=0,s.replaceState({...s.state,idx:h},""));function p(){return(s.state||{idx:null}).idx}function m(){u="POP";let T=p(),S=T==null?null:T-h;h=T,c&&c({action:u,location:b.location,delta:S})}function y(T,S){u="PUSH";let N=Fm(b.location,T,S);h=p()+1;let P=x_(N,h),j=b.createHref(N);try{s.pushState(P,"",j)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(j)}a&&c&&c({action:u,location:b.location,delta:1})}function _(T,S){u="REPLACE";let N=Fm(b.location,T,S);h=p();let P=x_(N,h),j=b.createHref(N);s.replaceState(P,"",j),a&&c&&c({action:u,location:b.location,delta:0})}function E(T){return E4(T)}let b={get action(){return u},get location(){return n(i,s)},listen(T){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(y_,m),c=T,()=>{i.removeEventListener(y_,m),c=null}},createHref(T){return e(i,T)},createURL:E,encodeLocation(T){let S=E(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:_,go(T){return s.go(T)}};return b}function E4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),jt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Jc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function pA(n,e,t="/"){return A4(n,e,t,!1)}function A4(n,e,t,r){let i=typeof e=="string"?tu(e):e,a=Oa(i.pathname||"/",t);if(a==null)return null;let s=mA(n);b4(s);let u=null;for(let c=0;u==null&&c<s.length;++c){let h=k4(a);u=P4(s[c],h,r)}return u}function mA(n,e=[],t=[],r=""){let i=(a,s,u)=>{let c={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(jt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let h=Ia([r,c.relativePath]),p=t.concat(c);a.children&&a.children.length>0&&(jt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),mA(a.children,e,p,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:O4(h,a.index),routesMeta:p})};return n.forEach((a,s)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,s);else for(let c of gA(a.path))i(a,s,c)}),e}function gA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=gA(r.join("/")),u=[];return u.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&u.push(...s),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function b4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:D4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var T4=/^:[\w-]+$/,S4=3,C4=2,I4=1,N4=10,R4=-2,__=n=>n==="*";function O4(n,e){let t=n.split("/"),r=t.length;return t.some(__)&&(r+=R4),e&&(r+=C4),t.filter(i=>!__(i)).reduce((i,a)=>i+(T4.test(a)?S4:a===""?I4:N4),r)}function D4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function P4(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",s=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",m=Ld({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),y=c.route;if(!m&&h&&t&&!r[r.length-1].route.index&&(m=Ld({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),s.push({params:i,pathname:Ia([a,m.pathname]),pathnameBase:V4(Ia([a,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(a=Ia([a,m.pathnameBase]))}return s}function Ld(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=M4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let E=u[y]||"";s=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const _=u[y];return m&&!_?h[p]=void 0:h[p]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:s,pattern:n}}function M4(n,e=!1,t=!0){mi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function k4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function L4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?tu(n):n;return{pathname:t?t.startsWith("/")?t:j4(t,e):e,search:U4(r),hash:F4(i)}}function j4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Kp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function B4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rg(n){let e=B4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Og(n,e,t,r=!1){let i;typeof n=="string"?i=tu(n):(i={...n},jt(!i.pathname||!i.pathname.includes("?"),Kp("?","pathname","search",i)),jt(!i.pathname||!i.pathname.includes("#"),Kp("#","pathname","hash",i)),jt(!i.search||!i.search.includes("#"),Kp("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,u;if(s==null)u=t;else{let m=e.length-1;if(!r&&s.startsWith("..")){let y=s.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}u=m>=0?e[m]:"/"}let c=L4(i,u),h=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}var Ia=n=>n.join("/").replace(/\/\/+/g,"/"),V4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),U4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,F4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function H4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var vA=["POST","PUT","PATCH","DELETE"];new Set(vA);var z4=["GET",...vA];new Set(z4);var nu=F.createContext(null);nu.displayName="DataRouter";var c0=F.createContext(null);c0.displayName="DataRouterState";var yA=F.createContext({isTransitioning:!1});yA.displayName="ViewTransition";var G4=F.createContext(new Map);G4.displayName="Fetchers";var q4=F.createContext(null);q4.displayName="Await";var gi=F.createContext(null);gi.displayName="Navigation";var yf=F.createContext(null);yf.displayName="Location";var vi=F.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var Dg=F.createContext(null);Dg.displayName="RouteError";function X4(n,{relative:e}={}){jt(ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(gi),{hash:i,pathname:a,search:s}=xf(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Ia([t,a])),r.createHref({pathname:u,search:s,hash:i})}function ru(){return F.useContext(yf)!=null}function Wi(){return jt(ru(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(yf).location}var xA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _A(n){F.useContext(gi).static||F.useLayoutEffect(n)}function Bn(){let{isDataRoute:n}=F.useContext(vi);return n?oI():W4()}function W4(){jt(ru(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(nu),{basename:e,navigator:t}=F.useContext(gi),{matches:r}=F.useContext(vi),{pathname:i}=Wi(),a=JSON.stringify(Rg(r)),s=F.useRef(!1);return _A(()=>{s.current=!0}),F.useCallback((c,h={})=>{if(mi(s.current,xA),!s.current)return;if(typeof c=="number"){t.go(c);return}let p=Og(c,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ia([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,a,i,n])}F.createContext(null);function $4(){let{matches:n}=F.useContext(vi),e=n[n.length-1];return e?e.params:{}}function xf(n,{relative:e}={}){let{matches:t}=F.useContext(vi),{pathname:r}=Wi(),i=JSON.stringify(Rg(t));return F.useMemo(()=>Og(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Y4(n,e){return wA(n,e)}function wA(n,e,t,r){var S;jt(ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext(gi),{matches:a}=F.useContext(vi),s=a[a.length-1],u=s?s.params:{},c=s?s.pathname:"/",h=s?s.pathnameBase:"/",p=s&&s.route;{let N=p&&p.path||"";EA(c,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let m=Wi(),y;if(e){let N=typeof e=="string"?tu(e):e;jt(h==="/"||((S=N.pathname)==null?void 0:S.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),y=N}else y=m;let _=y.pathname||"/",E=_;if(h!=="/"){let N=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=pA(n,{pathname:E});mi(p||b!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),mi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=eI(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Ia([h,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:Ia([h,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,t,r);return e&&T?F.createElement(yf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function K4(){let n=aI(),e=H4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:a},"ErrorBoundary")," or"," ",F.createElement("code",{style:a},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,s)}var Q4=F.createElement(K4,null),Z4=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?F.createElement(vi.Provider,{value:this.props.routeContext},F.createElement(Dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function J4({routeContext:n,match:e,children:t}){let r=F.useContext(nu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(vi.Provider,{value:n},t)}function eI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let c=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);jt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let s=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let h=i[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:p,errors:m}=t,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){s=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,h,p)=>{let m,y=!1,_=null,E=null;t&&(m=a&&h.route.id?a[h.route.id]:void 0,_=h.route.errorElement||Q4,s&&(u<0&&p===0?(EA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,E=null):u===p&&(y=!0,E=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,p+1)),T=()=>{let S;return m?S=_:y?S=E:h.route.Component?S=F.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=c,F.createElement(J4,{match:h,routeContext:{outlet:c,matches:b,isDataRoute:t!=null},children:S})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?F.createElement(Z4,{location:t.location,revalidation:t.revalidation,component:_,error:m,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}function Pg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tI(n){let e=F.useContext(nu);return jt(e,Pg(n)),e}function nI(n){let e=F.useContext(c0);return jt(e,Pg(n)),e}function rI(n){let e=F.useContext(vi);return jt(e,Pg(n)),e}function Mg(n){let e=rI(n),t=e.matches[e.matches.length-1];return jt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function iI(){return Mg("useRouteId")}function aI(){var r;let n=F.useContext(Dg),e=nI("useRouteError"),t=Mg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function oI(){let{router:n}=tI("useNavigate"),e=Mg("useNavigate"),t=F.useRef(!1);return _A(()=>{t.current=!0}),F.useCallback(async(i,a={})=>{mi(t.current,xA),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var w_={};function EA(n,e,t){!e&&!w_[n]&&(w_[n]=!0,mi(!1,t))}F.memo(sI);function sI({routes:n,future:e,state:t}){return wA(n,void 0,t,e)}function yd({to:n,replace:e,state:t,relative:r}){jt(ru(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=F.useContext(gi);mi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=F.useContext(vi),{pathname:s}=Wi(),u=Bn(),c=Og(n,Rg(a),s,r==="path"),h=JSON.stringify(c);return F.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:r})},[u,h,r,e,t]),null}function Dn(n){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lI({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){jt(!ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=tu(t));let{pathname:c="/",search:h="",hash:p="",state:m=null,key:y="default"}=t,_=F.useMemo(()=>{let E=Oa(c,s);return E==null?null:{location:{pathname:E,search:h,hash:p,state:m,key:y},navigationType:r}},[s,c,h,p,m,y,r]);return mi(_!=null,`<Router basename="${s}"> is not able to match the URL "${c}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:F.createElement(gi.Provider,{value:u},F.createElement(yf.Provider,{children:e,value:_}))}function uI({children:n,location:e}){return Y4(Hm(n),e)}function Hm(n,e=[]){let t=[];return F.Children.forEach(n,(r,i)=>{if(!F.isValidElement(r))return;let a=[...e,i];if(r.type===F.Fragment){t.push.apply(t,Hm(r.props.children,a));return}jt(r.type===Dn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Hm(r.props.children,a)),t.push(s)}),t}var xd="get",_d="application/x-www-form-urlencoded";function f0(n){return n!=null&&typeof n.tagName=="string"}function cI(n){return f0(n)&&n.tagName.toLowerCase()==="button"}function fI(n){return f0(n)&&n.tagName.toLowerCase()==="form"}function hI(n){return f0(n)&&n.tagName.toLowerCase()==="input"}function dI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function pI(n,e){return n.button===0&&(!e||e==="_self")&&!dI(n)}var nd=null;function mI(){if(nd===null)try{new FormData(document.createElement("form"),0),nd=!1}catch{nd=!0}return nd}var gI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qp(n){return n!=null&&!gI.has(n)?(mi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_d}"`),null):n}function vI(n,e){let t,r,i,a,s;if(fI(n)){let u=n.getAttribute("action");r=u?Oa(u,e):null,t=n.getAttribute("method")||xd,i=Qp(n.getAttribute("enctype"))||_d,a=new FormData(n)}else if(cI(n)||hI(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?Oa(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||xd,i=Qp(n.getAttribute("formenctype"))||Qp(u.getAttribute("enctype"))||_d,a=new FormData(u,n),!mI()){let{name:h,type:p,value:m}=n;if(p==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,m)}}else{if(f0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xd,r=null,i=_d,s=n}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:s}}function kg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function yI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _I(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await yI(a,t);return s.links?s.links():[]}return[]}));return bI(r.flat(1).filter(xI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function E_(n,e,t,r,i,a){let s=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,u=(c,h)=>{var p;return t[h].pathname!==c.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,h)=>s(c,h)||u(c,h)):a==="data"?e.filter((c,h)=>{var m;let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(s(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function wI(n,e,{includeHydrateFallback:t}={}){return EI(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function EI(n){return[...new Set(n)]}function AI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function bI(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(AI(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var TI=new Set([100,101,204,205]);function SI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Oa(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function AA(){let n=F.useContext(nu);return kg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function CI(){let n=F.useContext(c0);return kg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Lg=F.createContext(void 0);Lg.displayName="FrameworkContext";function bA(){let n=F.useContext(Lg);return kg(n,"You must render this element inside a <HydratedRouter> element"),n}function II(n,e){let t=F.useContext(Lg),[r,i]=F.useState(!1),[a,s]=F.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,y=F.useRef(null);F.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let b=S=>{S.forEach(N=>{s(N.isIntersecting)})},T=new IntersectionObserver(b,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[n]),F.useEffect(()=>{if(r){let b=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(b)}}},[r]);let _=()=>{i(!0)},E=()=>{i(!1),s(!1)};return t?n!=="intent"?[a,y,{}]:[a,y,{onFocus:Ic(u,_),onBlur:Ic(c,E),onMouseEnter:Ic(h,_),onMouseLeave:Ic(p,E),onTouchStart:Ic(m,_)}]:[!1,y,{}]}function Ic(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function NI({page:n,...e}){let{router:t}=AA(),r=F.useMemo(()=>pA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?F.createElement(OI,{page:n,matches:r,...e}):null}function RI(n){let{manifest:e,routeModules:t}=bA(),[r,i]=F.useState([]);return F.useEffect(()=>{let a=!1;return _I(n,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[n,e,t]),r}function OI({page:n,matches:e,...t}){let r=Wi(),{manifest:i,routeModules:a}=bA(),{basename:s}=AA(),{loaderData:u,matches:c}=CI(),h=F.useMemo(()=>E_(n,e,c,i,r,"data"),[n,e,c,i,r]),p=F.useMemo(()=>E_(n,e,c,i,r,"assets"),[n,e,c,i,r]),m=F.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,b=!1;if(e.forEach(S=>{var P;let N=i.routes[S.route.id];!N||!N.hasLoader||(!h.some(j=>j.route.id===S.route.id)&&S.route.id in u&&((P=a[S.route.id])!=null&&P.shouldRevalidate)||N.hasClientLoader?b=!0:E.add(S.route.id))}),E.size===0)return[];let T=SI(n,s);return b&&E.size>0&&T.searchParams.set("_routes",e.filter(S=>E.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[s,u,r,i,h,e,n,a]),y=F.useMemo(()=>wI(p,i),[p,i]),_=RI(p);return F.createElement(F.Fragment,null,m.map(E=>F.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),y.map(E=>F.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),_.map(({key:E,link:b})=>F.createElement("link",{key:E,...b})))}function DI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var TA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TA&&(window.__reactRouterVersion="7.6.1")}catch{}function PI({basename:n,children:e,window:t}){let r=F.useRef();r.current==null&&(r.current=x4({window:t,v5Compat:!0}));let i=r.current,[a,s]=F.useState({action:i.action,location:i.location}),u=F.useCallback(c=>{F.startTransition(()=>s(c))},[s]);return F.useLayoutEffect(()=>i.listen(u),[i,u]),F.createElement(lI,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var SA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tt=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:u,target:c,to:h,preventScrollReset:p,viewTransition:m,...y},_){let{basename:E}=F.useContext(gi),b=typeof h=="string"&&SA.test(h),T,S=!1;if(typeof h=="string"&&b&&(T=h,TA))try{let M=new URL(window.location.href),B=h.startsWith("//")?new URL(M.protocol+h):new URL(h),G=Oa(B.pathname,E);B.origin===M.origin&&G!=null?h=G+B.search+B.hash:S=!0}catch{mi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=X4(h,{relative:i}),[P,j,U]=II(r,y),X=jI(h,{replace:s,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:m});function D(M){e&&e(M),M.defaultPrevented||X(M)}let R=F.createElement("a",{...y,...U,href:T||N,onClick:S||a?e:D,ref:DI(_,j),target:c,"data-discover":!b&&t==="render"?"true":void 0});return P&&!b?F.createElement(F.Fragment,null,R,F.createElement(NI,{page:N})):R});Tt.displayName="Link";var MI=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:u,children:c,...h},p){let m=xf(s,{relative:h.relative}),y=Wi(),_=F.useContext(c0),{navigator:E,basename:b}=F.useContext(gi),T=_!=null&&HI(m)&&u===!0,S=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,N=y.pathname,P=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(N=N.toLowerCase(),P=P?P.toLowerCase():null,S=S.toLowerCase()),P&&b&&(P=Oa(P,b)||P);const j=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let U=N===S||!i&&N.startsWith(S)&&N.charAt(j)==="/",X=P!=null&&(P===S||!i&&P.startsWith(S)&&P.charAt(S.length)==="/"),D={isActive:U,isPending:X,isTransitioning:T},R=U?e:void 0,M;typeof r=="function"?M=r(D):M=[r,U?"active":null,X?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(D):a;return F.createElement(Tt,{...h,"aria-current":R,className:M,ref:p,style:B,to:s,viewTransition:u},typeof c=="function"?c(D):c)});MI.displayName="NavLink";var kI=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:s=xd,action:u,onSubmit:c,relative:h,preventScrollReset:p,viewTransition:m,...y},_)=>{let E=UI(),b=FI(u,{relative:h}),T=s.toLowerCase()==="get"?"get":"post",S=typeof u=="string"&&SA.test(u),N=P=>{if(c&&c(P),P.defaultPrevented)return;P.preventDefault();let j=P.nativeEvent.submitter,U=(j==null?void 0:j.getAttribute("formmethod"))||s;E(j||P.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:i,state:a,relative:h,preventScrollReset:p,viewTransition:m})};return F.createElement("form",{ref:_,method:T,action:b,onSubmit:r?c:N,...y,"data-discover":!S&&n==="render"?"true":void 0})});kI.displayName="Form";function LI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CA(n){let e=F.useContext(nu);return jt(e,LI(n)),e}function jI(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let u=Bn(),c=Wi(),h=xf(n,{relative:a});return F.useCallback(p=>{if(pI(p,e)){p.preventDefault();let m=t!==void 0?t:Jc(c)===Jc(h);u(n,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[c,u,h,t,r,e,n,i,a,s])}var BI=0,VI=()=>`__${String(++BI)}__`;function UI(){let{router:n}=CA("useSubmit"),{basename:e}=F.useContext(gi),t=iI();return F.useCallback(async(r,i={})=>{let{action:a,method:s,encType:u,formData:c,body:h}=vI(r,e);if(i.navigate===!1){let p=i.fetcherKey||VI();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||s,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||s,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function FI(n,{relative:e}={}){let{basename:t}=F.useContext(gi),r=F.useContext(vi);jt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...xf(n||".",{relative:e})},s=Wi();if(n==null){a.search=s.search;let u=new URLSearchParams(a.search),c=u.getAll("index");if(c.some(p=>p==="")){u.delete("index"),c.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ia([t,a.pathname])),Jc(a)}function HI(n,e={}){let t=F.useContext(yA);jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=CA("useViewTransitionState"),i=xf(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Oa(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=Oa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ld(i.pathname,s)!=null||Ld(i.pathname,a)!=null}[...TI];const zI=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},GI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],u=n[t++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},NA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,u=s?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,p=a>>2,m=(a&3)<<4|u>>4;let y=(u&15)<<2|h>>6,_=h&63;c||(_=64,s||(y=64)),r.push(t[p],t[m],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||u==null||h==null||m==null)throw new qI;const y=a<<2|u>>4;if(r.push(y),h!==64){const _=u<<4&240|h>>2;if(r.push(_),m!==64){const E=h<<6&192|m;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XI=function(n){const e=IA(n);return NA.encodeByteArray(e,!0)},jd=function(n){return XI(n).replace(/\./g,"")},RA=function(n){try{return NA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=()=>WI().__FIREBASE_DEFAULTS__,YI=()=>{if(typeof process>"u"||typeof A_>"u")return;const n=A_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RA(n[1]);return e&&JSON.parse(e)},h0=()=>{try{return zI()||$I()||YI()||KI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OA=n=>{var e,t;return(t=(e=h0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},QI=n=>{const e=OA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},DA=()=>{var n;return(n=h0())===null||n===void 0?void 0:n.config},PA=n=>{var e;return(e=h0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){return n.endsWith(".cloudworkstations.dev")}async function MA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jd(JSON.stringify(t)),jd(JSON.stringify(s)),""].join(".")}const Gc={};function eN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?n.emulator.push(e):n.prod.push(e);return n}function tN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let b_=!1;function kA(n,e){if(typeof window>"u"||typeof document>"u"||!_f(window.location.host)||Gc[n]===e||Gc[n]||b_)return;Gc[n]=e;function t(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=eN().prod.length>0;function s(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,_){y.setAttribute("width","24"),y.setAttribute("id",_),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{b_=!0,s()},y}function p(y,_){y.setAttribute("id",_),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=tN(r),_=t("text"),E=document.getElementById(_)||document.createElement("span"),b=t("learnmore"),T=document.getElementById(b)||document.createElement("a"),S=t("preprendIcon"),N=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const P=y.element;u(P),p(T,b);const j=h();c(N,S),P.append(N,E,T,j),document.body.appendChild(P)}a?(E.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rr())}function rN(){var n;const e=(n=h0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sN(){const n=rr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lN(){return!rN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uN(){try{return typeof indexedDB=="object"}catch{return!1}}function cN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="FirebaseError";class ja extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=fN,Object.setPrototypeOf(this,ja.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wf.prototype.create)}}class wf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?hN(a,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new ja(i,u,r)}}function hN(n,e){return n.replace(dN,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dN=/\{\$([^}]+)}/g;function pN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ns(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(T_(a)&&T_(s)){if(!Ns(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function T_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Lc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mN(n,e){const t=new gN(n,e);return t.subscribe.bind(t)}class gN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Zp),i.error===void 0&&(i.error=Zp),i.complete===void 0&&(i.complete=Zp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n){return n&&n._delegate?n._delegate:n}class Rs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ZI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_N(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xN(n){return n===_s?void 0:n}function _N(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const EN={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},AN=Ke.INFO,bN={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},TN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=bN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jg{constructor(e){this.name=e,this._logLevel=AN,this._logHandler=TN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const SN=(n,e)=>e.some(t=>n instanceof t);let S_,C_;function CN(){return S_||(S_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IN(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LA=new WeakMap,zm=new WeakMap,jA=new WeakMap,Jp=new WeakMap,Bg=new WeakMap;function NN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(wo(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&LA.set(t,n)}).catch(()=>{}),Bg.set(e,n),e}function RN(n){if(zm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});zm.set(n,e)}let Gm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ON(n){Gm=n(Gm)}function DN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(em(this),e,...t);return jA.set(r,e.sort?e.sort():[e]),wo(r)}:IN().includes(n)?function(...e){return n.apply(em(this),e),wo(LA.get(this))}:function(...e){return wo(n.apply(em(this),e))}}function PN(n){return typeof n=="function"?DN(n):(n instanceof IDBTransaction&&RN(n),SN(n,CN())?new Proxy(n,Gm):n)}function wo(n){if(n instanceof IDBRequest)return NN(n);if(Jp.has(n))return Jp.get(n);const e=PN(n);return e!==n&&(Jp.set(n,e),Bg.set(e,n)),e}const em=n=>Bg.get(n);function MN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),u=wo(s);return r&&s.addEventListener("upgradeneeded",c=>{r(wo(s.result),c.oldVersion,c.newVersion,wo(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const kN=["get","getKey","getAll","getAllKeys","count"],LN=["put","add","delete","clear"],tm=new Map;function I_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=LN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kN.includes(t)))return;const a=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&c.done]))[0]};return tm.set(e,a),a}ON(n=>({...n,get:(e,t,r)=>I_(e,t)||n.get(e,t,r),has:(e,t)=>!!I_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function BN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qm="@firebase/app",N_="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new jg("@firebase/app"),VN="@firebase/app-compat",UN="@firebase/analytics-compat",FN="@firebase/analytics",HN="@firebase/app-check-compat",zN="@firebase/app-check",GN="@firebase/auth",qN="@firebase/auth-compat",XN="@firebase/database",WN="@firebase/data-connect",$N="@firebase/database-compat",YN="@firebase/functions",KN="@firebase/functions-compat",QN="@firebase/installations",ZN="@firebase/installations-compat",JN="@firebase/messaging",eR="@firebase/messaging-compat",tR="@firebase/performance",nR="@firebase/performance-compat",rR="@firebase/remote-config",iR="@firebase/remote-config-compat",aR="@firebase/storage",oR="@firebase/storage-compat",sR="@firebase/firestore",lR="@firebase/ai",uR="@firebase/firestore-compat",cR="firebase",fR="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="[DEFAULT]",hR={[qm]:"fire-core",[VN]:"fire-core-compat",[FN]:"fire-analytics",[UN]:"fire-analytics-compat",[zN]:"fire-app-check",[HN]:"fire-app-check-compat",[GN]:"fire-auth",[qN]:"fire-auth-compat",[XN]:"fire-rtdb",[WN]:"fire-data-connect",[$N]:"fire-rtdb-compat",[YN]:"fire-fn",[KN]:"fire-fn-compat",[QN]:"fire-iid",[ZN]:"fire-iid-compat",[JN]:"fire-fcm",[eR]:"fire-fcm-compat",[tR]:"fire-perf",[nR]:"fire-perf-compat",[rR]:"fire-rc",[iR]:"fire-rc-compat",[aR]:"fire-gcs",[oR]:"fire-gcs-compat",[sR]:"fire-fst",[uR]:"fire-fst-compat",[lR]:"fire-vertex","fire-js":"fire-js",[cR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Map,dR=new Map,Wm=new Map;function R_(n,e){try{n.container.addComponent(e)}catch(t){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gl(n){const e=n.name;if(Wm.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,n);for(const t of Bd.values())R_(t,n);for(const t of dR.values())R_(t,n);return!0}function Vg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ht(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eo=new wf("app","Firebase",pR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=fR;function BA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Eo.create("bad-app-name",{appName:String(i)});if(t||(t=DA()),!t)throw Eo.create("no-options");const a=Bd.get(i);if(a){if(Ns(t,a.options)&&Ns(r,a.config))return a;throw Eo.create("duplicate-app",{appName:i})}const s=new wN(i);for(const c of Wm.values())s.addComponent(c);const u=new mR(t,r,s);return Bd.set(i,u),u}function VA(n=Xm){const e=Bd.get(n);if(!e&&n===Xm&&DA())return BA();if(!e)throw Eo.create("no-app",{appName:n});return e}function Ao(n,e,t){var r;let i=(r=hR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&u.push("and"),s&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Da.warn(u.join(" "));return}Gl(new Rs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="firebase-heartbeat-database",vR=1,ef="firebase-heartbeat-store";let nm=null;function UA(){return nm||(nm=MN(gR,vR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ef)}catch(t){console.warn(t)}}}}).catch(n=>{throw Eo.create("idb-open",{originalErrorMessage:n.message})})),nm}async function yR(n){try{const t=(await UA()).transaction(ef),r=await t.objectStore(ef).get(FA(n));return await t.done,r}catch(e){if(e instanceof ja)Da.warn(e.message);else{const t=Eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Da.warn(t.message)}}}async function O_(n,e){try{const r=(await UA()).transaction(ef,"readwrite");await r.objectStore(ef).put(e,FA(n)),await r.done}catch(t){if(t instanceof ja)Da.warn(t.message);else{const r=Eo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Da.warn(r.message)}}}function FA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=1024,_R=30;class wR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=D_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>_R){const s=bR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Da.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D_(),{heartbeatsToSend:r,unsentEntries:i}=ER(this._heartbeatsCache.heartbeats),a=jd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Da.warn(t),""}}}function D_(){return new Date().toISOString().substring(0,10)}function ER(n,e=xR){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),P_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),P_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class AR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uN()?cN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return O_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return O_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function P_(n){return jd(JSON.stringify({version:2,heartbeats:n})).length}function bR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n){Gl(new Rs("platform-logger",e=>new jN(e),"PRIVATE")),Gl(new Rs("heartbeat",e=>new wR(e),"PRIVATE")),Ao(qm,N_,n),Ao(qm,N_,"esm2017"),Ao("fire-js","")}TR("");var SR="firebase",CR="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ao(SR,CR,"app");function Ug(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={PHONE:"phone",TOTP:"totp"},NR={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},RR={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},OR={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},DR={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function HA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MR=PR,zA=HA,GA=new wf("auth","Firebase",HA()),kR={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new jg("@firebase/auth");function LR(n,...e){Vd.logLevel<=Ke.WARN&&Vd.warn(`Auth (${au}): ${n}`,...e)}function wd(n,...e){Vd.logLevel<=Ke.ERROR&&Vd.error(`Auth (${au}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,...e){throw Hg(n,...e)}function hr(n,...e){return Hg(n,...e)}function Fg(n,e,t){const r=Object.assign(Object.assign({},zA()),{[e]:t});return new wf("auth","Firebase",r).create(e,{appName:n.name})}function jn(n){return Fg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ou(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&br(n,"argument-error"),Fg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return GA.create(n,...e)}function pe(n,e,...t){if(!n)throw Hg(e,...t)}function Vi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wd(e),new Error(e)}function Pa(n,e){n||Vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function zg(){return M_()==="http:"||M_()==="https:"}function M_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zg()||aN()||"connection"in navigator)?navigator.onLine:!0}function BR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pa(t>e,"Short delay should be less than long delay!"),this.isMobile=nN()||oN()}get(){return jR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n,e){Pa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FR=new Ef(3e4,6e4);function Dt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Pt(n,e,t,r,i={}){return XA(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const u=iu(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:c},a);return iN()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&_f(n.emulatorConfig.host)&&(h.credentials="include"),qA.fetch()(await WA(n,n.config.apiHost,t,u),h)})}async function XA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},VR),e);try{const i=new zR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw jc(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const u=a.ok?s.errorMessage:s.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw jc(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw jc(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw jc(n,"user-disabled",s);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Fg(n,p,h);br(n,p)}}catch(i){if(i instanceof ja)throw i;br(n,"network-request-failed",{message:String(i)})}}async function Ba(n,e,t,r,i={}){const a=await Pt(n,e,t,r,i);return"mfaPendingCredential"in a&&br(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function WA(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?Gg(n.config,i):`${n.config.apiScheme}://${i}`;return UR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function HR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hr(this.auth,"network-request-failed")),FR.get())})}}function jc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=hr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n){return n!==void 0&&n.getResponse!==void 0}function L_(n){return n!==void 0&&n.enterprise!==void 0}class $A{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(n){return(await Pt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function YA(n,e){return Pt(n,"GET","/v2/recaptchaConfig",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e){return Pt(n,"POST","/v1/accounts:delete",e)}async function XR(n,e){return Pt(n,"POST","/v1/accounts:update",e)}async function Ud(n,e){return Pt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n,e=!1){return je(n).getIdToken(e)}async function KA(n,e=!1){const t=je(n),r=await t.getIdToken(e),i=d0(r);pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:qc(rm(i.auth_time)),issuedAtTime:qc(rm(i.iat)),expirationTime:qc(rm(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function rm(n){return Number(n)*1e3}function d0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const i=RA(t);return i?JSON.parse(i):(wd("Failed to decode base64 JWT payload"),null)}catch(i){return wd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function j_(n){const e=d0(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ja&&$R(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $R({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ma(n,Ud(t,{idToken:r}));pe(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ZA(a.providerUserInfo):[],u=KR(n.providerData,s),c=n.isAnonymous,h=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new $m(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function QA(n){const e=je(n);await nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZA(n){return n.map(e=>{var{providerId:t}=e,r=Ug(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(n,e){const t=await XA(n,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await WA(n,i,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",qA.fetch()(s,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZR(n,e){return Pt(n,"POST","/v2/accounts:revokeToken",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const t=j_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await QR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new Ul;return r&&(pe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(pe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(pe(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ul,this.toJSON())}_performRefresh(){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class di{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $m(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ma(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KA(this,e)}reload(){return QA(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await nf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ht(this.auth.app))return Promise.reject(jn(this.auth));const e=await this.getIdToken();return await Ma(this,qR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,s,u,c,h,p;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,E=(s=t.photoURL)!==null&&s!==void 0?s:void 0,b=(u=t.tenantId)!==null&&u!==void 0?u:void 0,T=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,S=(h=t.createdAt)!==null&&h!==void 0?h:void 0,N=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:P,emailVerified:j,isAnonymous:U,providerData:X,stsTokenManager:D}=t;pe(P&&D,e,"internal-error");const R=Ul.fromJSON(this.name,D);pe(typeof P=="string",e,"internal-error"),go(m,e.name),go(y,e.name),pe(typeof j=="boolean",e,"internal-error"),pe(typeof U=="boolean",e,"internal-error"),go(_,e.name),go(E,e.name),go(b,e.name),go(T,e.name),go(S,e.name),go(N,e.name);const M=new di({uid:P,auth:e,email:y,emailVerified:j,displayName:m,isAnonymous:U,photoURL:E,phoneNumber:_,tenantId:b,stsTokenManager:R,createdAt:S,lastLoginAt:N});return X&&Array.isArray(X)&&(M.providerData=X.map(B=>Object.assign({},B))),T&&(M._redirectEventId=T),M}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ul;i.updateFromServerResponse(t);const a=new di({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nf(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];pe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?ZA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),u=new Ul;u.updateFromIdToken(r);const c=new di({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $m(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Map;function Sa(n){Pa(n instanceof Function,"Expected a class definition");let e=B_.get(n);return e?(Pa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,B_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}JA.type="NONE";const Ym=JA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class Fl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Ed(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ed("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ud(this.auth,{idToken:e}).catch(()=>{});return t?di._fromGetAccountInfoResponse(this.auth,t,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Fl(Sa(Ym),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Sa(Ym);const s=Ed(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const p=await h._get(s);if(p){let m;if(typeof p=="string"){const y=await Ud(e,{idToken:p}).catch(()=>{});if(!y)break;m=await di._fromGetAccountInfoResponse(e,y,p)}else m=di._fromJSON(e,p);h!==a&&(u=m),a=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Fl(a,e,r):(a=c[0],u&&await a._set(s,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new Fl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ab(e))return"Blackberry";if(ob(e))return"Webos";if(tb(e))return"Safari";if((e.includes("chrome/")||nb(e))&&!e.includes("edge/"))return"Chrome";if(ib(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eb(n=rr()){return/firefox\//i.test(n)}function tb(n=rr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nb(n=rr()){return/crios\//i.test(n)}function rb(n=rr()){return/iemobile/i.test(n)}function ib(n=rr()){return/android/i.test(n)}function ab(n=rr()){return/blackberry/i.test(n)}function ob(n=rr()){return/webos/i.test(n)}function qg(n=rr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JR(n=rr()){var e;return qg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e6(){return sN()&&document.documentMode===10}function sb(n=rr()){return qg(n)||ib(n)||ob(n)||ab(n)||/windows phone/i.test(n)||rb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n,e=[]){let t;switch(n){case"Browser":t=V_(rr());break;case"Worker":t=`${V_(rr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${au}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,u)=>{try{const c=e(a);s(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(n,e={}){return Pt(n,"GET","/v2/passwordPolicy",Dt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=6;class i6{constructor(e){var t,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:r6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,s,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U_(this),this.idTokenSubscription=new U_(this),this.beforeStateQueue=new t6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sa(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Fl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ud(this,{idToken:e}),r=await di._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ht(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ht(this.app))return Promise.reject(jn(this));const t=e?je(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ht(this.app)?Promise.reject(jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ht(this.app)?Promise.reject(jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n6(this),t=new i6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sa(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=await Fl.create(this,[Sa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(u,this,"internal-error"),u.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&LR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Kt(n){return je(n)}class U_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mN(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o6(n){Af=n}function Xg(n){return Af.loadJS(n)}function s6(){return Af.recaptchaV2Script}function l6(){return Af.recaptchaEnterpriseScript}function u6(){return Af.gapiScript}function ub(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=500,f6=6e4,rd=1e12;class h6{constructor(e){this.auth=e,this.counter=rd,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new m6(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||rd;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||rd;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||rd;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class d6{constructor(){this.enterprise=new p6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class p6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class m6{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;pe(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=g6(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},f6)},c6))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function g6(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const v6="recaptcha-enterprise",Xc="NO_RECAPTCHA";class cb{constructor(e){this.type=v6,this.auth=Kt(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,u)=>{YA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new $A(c);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,s(h.siteKey)}}).catch(c=>{u(c)})})}function i(a,s,u){const c=window.grecaptcha;L_(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(h=>{s(h)}).catch(()=>{s(Xc)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new d6().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(u=>{if(!t&&L_(window.grecaptcha))i(u,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=l6();c.length!==0&&(c+=u),Xg(c).then(()=>{i(u,a,s)}).catch(h=>{s(h)})}}).catch(u=>{s(u)})})}}async function Nc(n,e,t,r=!1,i=!1){const a=new cb(n);let s;if(i)s=Xc;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:s}):Object.assign(u,{captchaResponse:s}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function bo(n,e,t,r,i){var a,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Nc(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Nc(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(u)});else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){const u=await Nc(n,e,t);return r(n,u).catch(async c=>{var h;if(((h=n._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await Nc(n,e,t,!1,!0);return r(n,p)}return Promise.reject(c)})}else{const u=await Nc(n,e,t,!1,!0);return r(n,u)}else return Promise.reject(i+" provider is not supported.")}async function fb(n){const e=Kt(n),t=await YA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new $A(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new cb(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(n,e){const t=Vg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Ns(a,e??{}))return i;br(i,"already-initialized")}return t.initialize({options:e})}function y6(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Sa);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function db(n,e,t){const r=Kt(n);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),a=pb(e),{host:s,port:u}=x6(e),c=u===null?"":`:${u}`,h={url:`${a}//${s}${c}/`},p=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(Ns(h,r.config.emulator)&&Ns(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,_f(s)?(MA(`${a}//${s}${c}`),kA("Auth",!0)):i||_6()}function pb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function x6(n){const e=pb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:F_(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:F_(s)}}}function F_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function _6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,t){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(n,e){return Pt(n,"POST","/v1/accounts:resetPassword",Dt(n,e))}async function w6(n,e){return Pt(n,"POST","/v1/accounts:update",e)}async function E6(n,e){return Pt(n,"POST","/v1/accounts:signUp",e)}async function A6(n,e){return Pt(n,"POST","/v1/accounts:update",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(n,e){return Ba(n,"POST","/v1/accounts:signInWithPassword",Dt(n,e))}async function p0(n,e){return Pt(n,"POST","/v1/accounts:sendOobCode",Dt(n,e))}async function T6(n,e){return p0(n,e)}async function S6(n,e){return p0(n,e)}async function C6(n,e){return p0(n,e)}async function I6(n,e){return p0(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(n,e){return Ba(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,e))}async function R6(n,e){return Ba(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends su{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ql(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ql(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bo(e,t,"signInWithPassword",b6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return N6(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bo(e,r,"signUpPassword",E6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return R6(e,{idToken:t,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n,e){return Ba(n,"POST","/v1/accounts:signInWithIdp",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="http://localhost";class zi extends su{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Ug(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new zi(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Na(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Na(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Na(e,t)}buildRequest(){const e={requestUri:O6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=iu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H_(n,e){return Pt(n,"POST","/v1/accounts:sendVerificationCode",Dt(n,e))}async function D6(n,e){return Ba(n,"POST","/v1/accounts:signInWithPhoneNumber",Dt(n,e))}async function P6(n,e){const t=await Ba(n,"POST","/v1/accounts:signInWithPhoneNumber",Dt(n,e));if(t.temporaryProof)throw jc(n,"account-exists-with-different-credential",t);return t}const M6={USER_NOT_FOUND:"user-not-found"};async function k6(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ba(n,"POST","/v1/accounts:signInWithPhoneNumber",Dt(n,t),M6)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends su{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new To({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new To({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return D6(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return P6(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return k6(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new To({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function j6(n){const e=kc(Lc(n)).link,t=e?kc(Lc(e)).deep_link_id:null,r=kc(Lc(n)).deep_link_id;return(r?kc(Lc(r)).link:null)||r||t||e||n}class lu{constructor(e){var t,r,i,a,s,u;const c=kc(Lc(e)),h=(t=c.apiKey)!==null&&t!==void 0?t:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=L6((i=c.mode)!==null&&i!==void 0?i:null);pe(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=j6(e);try{return new lu(t)}catch{return null}}}function B6(n){return lu.parseLink(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,t){return ql._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=lu.parseLink(t);return pe(r,"argument-error"),ql._fromEmailAndCode(e,r.code,r.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Va{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wc extends uu{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return pe("providerId"in t&&"signInMethod"in t,"argument-error"),zi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return pe(e.idToken||e.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Wc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Wc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:s,providerId:u}=e;if(!r&&!i&&!t&&!a||!u)return null;try{return new Wc(u)._credential({idToken:t,accessToken:r,nonce:s,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends uu{constructor(){super("facebook.com")}static credential(e){return zi._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ea.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zi._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Aa.credential(t,r)}catch{return null}}}Aa.GOOGLE_SIGN_IN_METHOD="google.com";Aa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends uu{constructor(){super("github.com")}static credential(e){return zi._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.GITHUB_SIGN_IN_METHOD="github.com";ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="http://localhost";class rf extends su{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Na(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Na(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Na(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new rf(r,a)}static _create(e,t){return new rf(e,t)}buildRequest(){return{requestUri:V6,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6="saml.";class Fd extends Va{constructor(e){pe(e.startsWith(U6),"argument-error"),super(e)}static credentialFromResult(e){return Fd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Fd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=rf.fromJSON(e);return pe(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return rf._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends uu{constructor(){super("twitter.com")}static credential(e,t){return zi._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ta.credential(t,r)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(n,e){return Ba(n,"POST","/v1/accounts:signUp",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await di._fromIdTokenResponse(e,r,i),s=z_(r);return new Zr({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=z_(r);return new Zr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function z_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(n){var e;if(Ht(n.app))return Promise.reject(jn(n));const t=Kt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Zr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await gb(t,{returnSecureToken:!0}),i=await Zr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends ja{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Hd(e,t,r,i)}}function vb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(n,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(n,e){const t=je(n);await m0(!0,t,e);const{providerUserInfo:r}=await XR(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=yb(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Wg(n,e,t=!1){const r=await Ma(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zr._forOperation(n,"link",r)}async function m0(n,e,t){await nf(e);const r=yb(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";pe(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(n,e,t=!1){const{auth:r}=n;if(Ht(r.app))return Promise.reject(jn(r));const i="reauthenticate";try{const a=await Ma(n,vb(r,i,e,n),t);pe(a.idToken,r,"internal-error");const s=d0(a.idToken);pe(s,r,"internal-error");const{sub:u}=s;return pe(n.uid===u,r,"user-mismatch"),Zr._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&br(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(n,e,t=!1){if(Ht(n.app))return Promise.reject(jn(n));const r="signIn",i=await vb(n,r,e),a=await Zr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function g0(n,e){return _b(Kt(n),e)}async function wb(n,e){const t=je(n);return await m0(!1,t,e.providerId),Wg(t,e)}async function Eb(n,e){return xb(je(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(n,e){return Ba(n,"POST","/v1/accounts:signInWithCustomToken",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(n,e){if(Ht(n.app))return Promise.reject(jn(n));const t=Kt(n),r=await z6(t,{token:e,returnSecureToken:!0}),i=await Zr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?$g._fromServerResponse(e,t):"totpInfo"in t?Yg._fromServerResponse(e,t):br(e,"internal-error")}}class $g extends bf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new $g(t)}}class Yg extends bf{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Yg(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n,e,t){var r;pe(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),pe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),pe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(pe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(pe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kg(n){const e=Kt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function q6(n,e,t){const r=Kt(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&v0(r,i,t),await bo(r,i,"getOobCode",S6,"EMAIL_PASSWORD_PROVIDER")}async function X6(n,e,t){await mb(je(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Kg(n),r})}async function W6(n,e){await A6(je(n),{oobCode:e})}async function Ab(n,e){const t=je(n),r=await mb(t,{oobCode:e}),i=r.requestType;switch(pe(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(r.mfaInfo,t,"internal-error");default:pe(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=bf._fromServerResponse(Kt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function $6(n,e){const{data:t}=await Ab(je(n),e);return t.email}async function bb(n,e,t){if(Ht(n.app))return Promise.reject(jn(n));const r=Kt(n),s=await bo(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gb,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Kg(n),c}),u=await Zr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(u.user),u}function Tb(n,e,t){return Ht(n.app)?Promise.reject(jn(n)):g0(je(n),Lo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Kg(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y6(n,e,t){const r=Kt(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(s,u){pe(u.handleCodeInApp,r,"argument-error"),u&&v0(r,s,u)}a(i,t),await bo(r,i,"getOobCode",C6,"EMAIL_PASSWORD_PROVIDER")}function K6(n,e){const t=lu.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Q6(n,e,t){if(Ht(n.app))return Promise.reject(jn(n));const r=je(n),i=Lo.credentialWithLink(e,t||tf());return pe(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),g0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(n,e){return Pt(n,"POST","/v1/accounts:createAuthUri",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J6(n,e){const t=zg()?tf():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await Z6(je(n),r);return i||[]}async function Sb(n,e){const t=je(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&v0(t.auth,i,e);const{email:a}=await T6(t.auth,i);a!==n.email&&await n.reload()}async function e8(n,e,t){const r=je(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&v0(r.auth,a,t);const{email:s}=await I6(r.auth,a);s!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(n,e){return Pt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=je(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},s=await Ma(r,t8(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function r8(n,e){const t=je(n);return Ht(t.auth.app)?Promise.reject(jn(t.auth)):Cb(t,e,null)}function i8(n,e){return Cb(je(n),null,e)}async function Cb(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const s=await Ma(n,w6(r,a));await n._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const s=(t=(e=d0(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(s){const u=s!=="anonymous"&&s!=="custom"?s:null;return new Hl(a,u)}}if(!r)return null;switch(r){case"facebook.com":return new o8(a,i);case"github.com":return new s8(a,i);case"google.com":return new l8(a,i);case"twitter.com":return new u8(a,i,n.screenName||null);case"custom":case"anonymous":return new Hl(a,null);default:return new Hl(a,r,i)}}class Hl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class Ib extends Hl{constructor(e,t,r,i){super(e,t,r),this.username=i}}class o8 extends Hl{constructor(e,t){super(e,"facebook.com",t)}}class s8 extends Ib{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class l8 extends Hl{constructor(e,t){super(e,"google.com",t)}}class u8 extends Ib{constructor(e,t,r){super(e,"twitter.com",t,r)}}function c8(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:a8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(n,e){return je(n).setPersistence(e)}function h8(n){return fb(n)}async function d8(n,e){return Kt(n).validatePassword(e)}function Nb(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function Rb(n,e,t){return je(n).beforeAuthStateChanged(e,t)}function Ob(n,e,t,r){return je(n).onAuthStateChanged(e,t,r)}function p8(n){je(n).useDeviceLanguage()}function m8(n,e){return je(n).updateCurrentUser(e)}function Db(n){return je(n).signOut()}function g8(n,e){return Kt(n).revokeAccessToken(e)}async function v8(n){return je(n).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Es("enroll",e,t)}static _fromMfaPendingCredential(e){return new Es("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Es._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Es._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Kt(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(u=>bf._fromServerResponse(r,u));pe(i.mfaPendingCredential,r,"internal-error");const s=Es._fromMfaPendingCredential(i.mfaPendingCredential);return new Qg(s,a,async u=>{const c=await u._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const p=await Zr._fromIdTokenResponse(r,t.operationType,h);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return pe(t.user,r,"internal-error"),Zr._forOperation(t.user,t.operationType,h);default:br(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function y8(n,e){var t;const r=je(n),i=e;return pe(e.customData.operationType,r,"argument-error"),pe((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),Qg._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:start",Dt(n,e))}function x8(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(n,e))}function _8(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:start",Dt(n,e))}function w8(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(n,e))}function E8(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(n,e))}class Zg{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>bf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Zg(e)}async getSession(){return Es._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await Ma(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ma(this.user,E8(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const im=new WeakMap;function A8(n){const e=je(n);return im.has(e)||im.set(e,Zg._fromUser(e)),im.get(e)}const zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zd,"1"),this.storage.removeItem(zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=1e3,T8=10;class Mb extends Pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);e6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,T8):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},b8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mb.type="LOCAL";const kb=Mb;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=1e3;function am(n){var e,t;const r=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return(t=(e=document.cookie.match(i))===null||e===void 0?void 0:e[1])!==null&&t!==void 0?t:null}function om(n){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${n.split(":")[3]}`}class Lb{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:(e=navigator.cookieEnabled)!==null&&e!==void 0?e:!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=om(e);if(window.cookieStore){const r=await window.cookieStore.get(t);return r==null?void 0:r.value}return am(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=om(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const r=om(e);if(window.cookieStore){const u=h=>{const p=h.changed.find(y=>y.name===r);p&&t(p.value),h.deleted.find(y=>y.name===r)&&t(null)},c=()=>window.cookieStore.removeEventListener("change",u);return this.listenerUnsubscribes.set(t,c),window.cookieStore.addEventListener("change",u)}let i=am(r);const a=setInterval(()=>{const u=am(r);u!==i&&(t(u),i=u)},S8),s=()=>clearInterval(a);this.listenerUnsubscribes.set(t,s)}_removeListener(e,t){const r=this.listenerUnsubscribes.get(t);r&&(r(),this.listenerUnsubscribes.delete(t))}}Lb.type="COOKIE";const C8=Lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jb.type="SESSION";const Jg=jb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new y0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async h=>h(t.origin,a)),c=await I8(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}y0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((u,c)=>{const h=x0("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(p),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return window}function R8(n){cn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){return typeof cn().WorkerGlobalScope<"u"&&typeof cn().importScripts=="function"}async function O8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function P8(){return ev()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="firebaseLocalStorageDb",M8=1,Gd="firebaseLocalStorage",Vb="fbase_key";class Tf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _0(n,e){return n.transaction([Gd],e?"readwrite":"readonly").objectStore(Gd)}function k8(){const n=indexedDB.deleteDatabase(Bb);return new Tf(n).toPromise()}function Km(){const n=indexedDB.open(Bb,M8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Gd,{keyPath:Vb})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Gd)?e(r):(r.close(),await k8(),e(await Km()))})})}async function q_(n,e,t){const r=_0(n,!0).put({[Vb]:e,value:t});return new Tf(r).toPromise()}async function L8(n,e){const t=_0(n,!1).get(e),r=await new Tf(t).toPromise();return r===void 0?null:r.value}function X_(n,e){const t=_0(n,!0).delete(e);return new Tf(t).toPromise()}const j8=800,B8=3;class Ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Km(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>B8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ev()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=y0._getInstance(P8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await O8(),!this.activeServiceWorker)return;this.sender=new N8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Km();return await q_(e,zd,"1"),await X_(e,zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>q_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>L8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>X_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=_0(i,!1).getAll();return new Tf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ub.type="LOCAL";const Fb=Ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n,e){return Pt(n,"POST","/v2/accounts/mfaSignIn:start",Dt(n,e))}function V8(n,e){return Pt(n,"POST","/v2/accounts/mfaSignIn:finalize",Dt(n,e))}function U8(n,e){return Pt(n,"POST","/v2/accounts/mfaSignIn:finalize",Dt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm=ub("rcb"),F8=new Ef(3e4,6e4);class H8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=cn().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return pe(z8(t),e,"argument-error"),this.shouldResolveImmediately(t)&&k_(cn().grecaptcha)?Promise.resolve(cn().grecaptcha):new Promise((r,i)=>{const a=cn().setTimeout(()=>{i(hr(e,"network-request-failed"))},F8.get());cn()[sm]=()=>{cn().clearTimeout(a),delete cn()[sm];const u=cn().grecaptcha;if(!u||!k_(u)){i(hr(e,"internal-error"));return}const c=u.render;u.render=(h,p)=>{const m=c(h,p);return this.counter++,m},this.hostLanguage=t,r(u)};const s=`${s6()}?${iu({onload:sm,render:"explicit",hl:t})}`;Xg(s).catch(()=>{clearTimeout(a),i(hr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=cn().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function z8(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class G8{async load(e){return new h6(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="recaptcha",q8={theme:"light",type:"image"};class X8{constructor(e,t,r=Object.assign({},q8)){this.parameters=r,this.type=$c,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kt(e),this.isInvisible=this.parameters.size==="invisible",pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;pe(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new G8:new H8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=s=>{s&&(this.tokenChangeListeners.delete(a),i(s))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=cn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){pe(zg()&&!ev(),this.auth,"internal-error"),await W8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await GR(this.auth);pe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function W8(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=To._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function $8(n,e,t){if(Ht(n.app))return Promise.reject(jn(n));const r=Kt(n),i=await w0(r,e,je(t));return new tv(i,a=>g0(r,a))}async function Y8(n,e,t){const r=je(n);await m0(!1,r,"phone");const i=await w0(r.auth,e,je(t));return new tv(i,a=>wb(r,a))}async function K8(n,e,t){const r=je(n);if(Ht(r.auth.app))return Promise.reject(jn(r.auth));const i=await w0(r.auth,e,je(t));return new tv(i,a=>Eb(r,a))}async function w0(n,e,t){var r;if(!n._getRecaptchaConfig())try{await fb(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i){pe(a.type==="enroll",n,"internal-error");const s={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await bo(n,s,"mfaSmsEnrollment",async(p,m)=>{if(m.phoneEnrollmentInfo.captchaResponse===Xc){pe((t==null?void 0:t.type)===$c,p,"argument-error");const y=await lm(p,m,t);return G_(p,y)}return G_(p,m)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{pe(a.type==="signin",n,"internal-error");const s=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;pe(s,n,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await bo(n,u,"mfaSmsSignIn",async(m,y)=>{if(y.phoneSignInInfo.captchaResponse===Xc){pe((t==null?void 0:t.type)===$c,m,"argument-error");const _=await lm(m,y,t);return W_(m,_)}return W_(m,y)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await bo(n,a,"sendVerificationCode",async(h,p)=>{if(p.captchaResponse===Xc){pe((t==null?void 0:t.type)===$c,h,"argument-error");const m=await lm(h,p,t);return H_(h,m)}return H_(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t==null||t._reset()}}async function Q8(n,e){const t=je(n);if(Ht(t.auth.app))return Promise.reject(jn(t.auth));await Wg(t,e)}async function lm(n,e,t){pe(t.type===$c,n,"argument-error");const r=await t.verify();pe(typeof r=="string",n,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const a=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,u=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r,captchaResponse:s,clientType:u,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const a=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,u=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:a,clientType:s,recaptchaVersion:u}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.providerId=Ss.PROVIDER_ID,this.auth=Kt(e)}verifyPhoneNumber(e,t){return w0(this.auth,e,je(t))}static credential(e,t){return To._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ss.credentialFromTaggedObject(t)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?To._fromTokenResponse(t,r):null}}Ss.PROVIDER_ID="phone";Ss.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,e){return e?Sa(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends su{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Z8(n){return _b(n.auth,new nv(n),n.bypassAuthState)}function J8(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),xb(t,new nv(n),n.bypassAuthState)}async function eO(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),Wg(t,new nv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z8;case"linkViaPopup":case"linkViaRedirect":return eO;case"reauthViaPopup":case"reauthViaRedirect":return J8;default:br(this.auth,"internal-error")}}resolve(e){Pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new Ef(2e3,1e4);async function nO(n,e,t){if(Ht(n.app))return Promise.reject(hr(n,"operation-not-supported-in-this-environment"));const r=Kt(n);ou(n,e,Va);const i=Ms(r,t);return new Ca(r,"signInViaPopup",e,i).executeNotNull()}async function rO(n,e,t){const r=je(n);if(Ht(r.auth.app))return Promise.reject(hr(r.auth,"operation-not-supported-in-this-environment"));ou(r.auth,e,Va);const i=Ms(r.auth,t);return new Ca(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function iO(n,e,t){const r=je(n);ou(r.auth,e,Va);const i=Ms(r.auth,t);return new Ca(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ca extends Hb{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Pa(this.filter.length===1,"Popup operations only handle one event");const e=x0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tO.get())};e()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="pendingRedirect",Ad=new Map;class oO extends Hb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ad.get(this.auth._key());if(!e){try{const r=await sO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ad.set(this.auth._key(),e)}return this.bypassAuthState||Ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sO(n,e){const t=Gb(e),r=zb(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function rv(n,e){return zb(n)._set(Gb(e),"true")}function lO(n,e){Ad.set(n._key(),e)}function zb(n){return Sa(n._redirectPersistence)}function Gb(n){return Ed(aO,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(n,e,t){return cO(n,e,t)}async function cO(n,e,t){if(Ht(n.app))return Promise.reject(jn(n));const r=Kt(n);ou(n,e,Va),await r._initializationPromise;const i=Ms(r,t);return await rv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function fO(n,e,t){return hO(n,e,t)}async function hO(n,e,t){const r=je(n);if(ou(r.auth,e,Va),Ht(r.auth.app))return Promise.reject(jn(r.auth));await r.auth._initializationPromise;const i=Ms(r.auth,t);await rv(i,r.auth);const a=await Xb(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function dO(n,e,t){return pO(n,e,t)}async function pO(n,e,t){const r=je(n);ou(r.auth,e,Va),await r.auth._initializationPromise;const i=Ms(r.auth,t);await m0(!1,r,e.providerId),await rv(i,r.auth);const a=await Xb(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function mO(n,e){return await Kt(n)._initializationPromise,qb(n,e,!1)}async function qb(n,e,t=!1){if(Ht(n.app))return Promise.reject(jn(n));const r=Kt(n),i=Ms(r,e),s=await new oO(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function Xb(n){const e=x0(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=10*60*1e3;class vO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Wb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(hr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gO&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Wb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(n,e={}){return Pt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wO=/^https?/;async function EO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xO(n);for(const t of e)try{if(AO(t))return}catch{}br(n,"unauthorized-domain")}function AO(n){const e=tf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!wO.test(t))return!1;if(_O.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=new Ef(3e4,6e4);function Y_(){const n=cn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TO(n){return new Promise((e,t)=>{var r,i,a;function s(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),t(hr(n,"network-request-failed"))},timeout:bO.get()})}if(!((i=(r=cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=cn().gapi)===null||a===void 0)&&a.load)s();else{const u=ub("iframefcb");return cn()[u]=()=>{gapi.load?s():t(hr(n,"network-request-failed"))},Xg(`${u6()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw bd=null,e})}let bd=null;function SO(n){return bd=bd||TO(n),bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new Ef(5e3,15e3),IO="__/auth/iframe",NO="emulator/auth/iframe",RO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DO(n){const e=n.config;pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gg(e,NO):`https://${n.config.authDomain}/${IO}`,r={apiKey:e.apiKey,appName:n.name,v:au},i=OO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${iu(r).slice(1)}`}async function PO(n){const e=await SO(n),t=cn().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:DO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=hr(n,"network-request-failed"),u=cn().setTimeout(()=>{a(s)},CO.get());function c(){cn().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kO=500,LO=600,jO="_blank",BO="http://localhost";class K_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VO(n,e,t,r=kO,i=LO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},MO),{width:r.toString(),height:i.toString(),top:a,left:s}),h=rr().toLowerCase();t&&(u=nb(h)?jO:t),eb(h)&&(e=e||BO,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[_,E])=>`${y}${_}=${E},`,"");if(JR(h)&&u!=="_self")return UO(e||"",u),new K_(null);const m=window.open(e||"",u,p);pe(m,n,"popup-blocked");try{m.focus()}catch{}return new K_(m)}function UO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="__/auth/handler",HO="emulator/auth/handler",zO=encodeURIComponent("fac");async function Q_(n,e,t,r,i,a){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:au,eventId:i};if(e instanceof Va){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",pN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))s[p]=m}if(e instanceof uu){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}n.tenantId&&(s.tid=n.tenantId);const u=s;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await n._getAppCheckToken(),h=c?`#${zO}=${encodeURIComponent(c)}`:"";return`${GO(n)}?${iu(u).slice(1)}${h}`}function GO({config:n}){return n.emulator?Gg(n,HO):`https://${n.authDomain}/${FO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="webStorageSupport";class qO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jg,this._completeRedirectFn=qb,this._overrideRedirectResult=lO}async _openPopup(e,t,r,i){var a;Pa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Q_(e,t,r,tf(),i);return VO(e,s,x0())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Q_(e,t,r,tf(),i);return R8(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Pa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await PO(e),r=new vO(e);return t.register("authEvent",i=>(pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(um,{type:um},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[um];s!==void 0&&t(!!s),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=EO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sb()||tb()||qg()}}const $b=qO;class Yb{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Vi("unexpected MultiFactorSessionType")}}}class iv extends Yb{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new iv(e)}_finalizeEnroll(e,t,r){return x8(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return V8(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Kb{constructor(){}static assertion(e){return iv._fromCredential(e)}}Kb.FACTOR_ID="phone";class Qb{static assertionForEnrollment(e,t){return af._fromSecret(e,t)}static assertionForSignIn(e,t){return af._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const r=e;pe(typeof((t=r.user)===null||t===void 0?void 0:t.auth)<"u","internal-error");const i=await _8(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return E0._fromStartTotpMfaEnrollmentResponse(i,r.user.auth)}}Qb.FACTOR_ID="totp";class af extends Yb{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new af(t,void 0,e)}static _fromEnrollmentId(e,t){return new af(t,e)}async _finalizeEnroll(e,t,r){return pe(typeof this.secret<"u",e,"argument-error"),w8(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){pe(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return U8(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class E0{constructor(e,t,r,i,a,s,u){this.sessionInfo=s,this.auth=u,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}static _fromStartTotpMfaEnrollmentResponse(e,t){return new E0(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let i=!1;return(id(e)||id(t))&&(i=!0),i&&(id(e)&&(e=((r=this.auth.currentUser)===null||r===void 0?void 0:r.email)||"unknownuser"),id(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function id(n){return typeof n>"u"||(n==null?void 0:n.length)===0}var Z_="@firebase/auth",J_="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $O(n){Gl(new Rs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;pe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lb(n)},h=new a6(r,i,a,c);return y6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gl(new Rs("auth-internal",e=>{const t=Kt(e.getProvider("auth").getImmediate());return(r=>new XO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ao(Z_,J_,WO(n)),Ao(Z_,J_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=5*60,KO=PA("authIdTokenMaxAge")||YO;let ew=null;const QO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KO)return;const i=t==null?void 0:t.token;ew!==i&&(ew=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zb(n=VA()){const e=Vg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=hb(n,{popupRedirectResolver:$b,persistence:[Fb,kb,Jg]}),r=PA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=QO(a.toString());Rb(t,s,()=>s(t.currentUser)),Nb(t,u=>s(u))}}const i=OA("auth");return i&&db(t,`http://${i}`),t}function ZO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}o6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=hr("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",ZO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$O("Browser");const JO=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:DR,ActionCodeURL:lu,AuthCredential:su,AuthErrorCodes:kR,EmailAuthCredential:ql,EmailAuthProvider:Lo,FacebookAuthProvider:Ea,FactorId:IR,GithubAuthProvider:ba,GoogleAuthProvider:Aa,OAuthCredential:zi,OAuthProvider:Wc,OperationType:OR,PhoneAuthCredential:To,PhoneAuthProvider:Ss,PhoneMultiFactorGenerator:Kb,ProviderId:NR,RecaptchaVerifier:X8,SAMLAuthProvider:Fd,SignInMethod:RR,TotpMultiFactorGenerator:Qb,TotpSecret:E0,TwitterAuthProvider:Ta,applyActionCode:W6,beforeAuthStateChanged:Rb,browserCookiePersistence:C8,browserLocalPersistence:kb,browserPopupRedirectResolver:$b,browserSessionPersistence:Jg,checkActionCode:Ab,confirmPasswordReset:X6,connectAuthEmulator:db,createUserWithEmailAndPassword:bb,debugErrorMap:MR,deleteUser:v8,fetchSignInMethodsForEmail:J6,getAdditionalUserInfo:c8,getAuth:Zb,getIdToken:WR,getIdTokenResult:KA,getMultiFactorResolver:y8,getRedirectResult:mO,inMemoryPersistence:Ym,indexedDBLocalPersistence:Fb,initializeAuth:hb,initializeRecaptchaConfig:h8,isSignInWithEmailLink:K6,linkWithCredential:wb,linkWithPhoneNumber:Y8,linkWithPopup:iO,linkWithRedirect:dO,multiFactor:A8,onAuthStateChanged:Ob,onIdTokenChanged:Nb,parseActionCodeURL:B6,prodErrorMap:zA,reauthenticateWithCredential:Eb,reauthenticateWithPhoneNumber:K8,reauthenticateWithPopup:rO,reauthenticateWithRedirect:fO,reload:QA,revokeAccessToken:g8,sendEmailVerification:Sb,sendPasswordResetEmail:q6,sendSignInLinkToEmail:Y6,setPersistence:f8,signInAnonymously:F6,signInWithCredential:g0,signInWithCustomToken:G6,signInWithEmailAndPassword:Tb,signInWithEmailLink:Q6,signInWithPhoneNumber:$8,signInWithPopup:nO,signInWithRedirect:uO,signOut:Db,unlink:H6,updateCurrentUser:m8,updateEmail:r8,updatePassword:i8,updatePhoneNumber:Q8,updateProfile:n8,useDeviceLanguage:p8,validatePassword:d8,verifyBeforeUpdateEmail:e8,verifyPasswordResetCode:$6},Symbol.toStringTag,{value:"Module"})),e5={apiKey:"AIzaSyDT9F4cCRxuO--Fi6nmHCiPqLFra9aj-AU",authDomain:"woo-combine.firebaseapp.com",projectId:"woo-combine",storageBucket:"woo-combine.appspot.com",messagingSenderId:"94939411053",appId:"1:94939411053:web:9441e73b88c1985e5c8564"},t5=BA(e5),Ft=Zb(t5);function Jb(n,e){return function(){return n.apply(e,arguments)}}const{toString:n5}=Object.prototype,{getPrototypeOf:av}=Object,{iterator:A0,toStringTag:eT}=Symbol,b0=(n=>e=>{const t=n5.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),yi=n=>(n=n.toLowerCase(),e=>b0(e)===n),T0=n=>e=>typeof e===n,{isArray:cu}=Array,of=T0("undefined");function r5(n){return n!==null&&!of(n)&&n.constructor!==null&&!of(n.constructor)&&Er(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const tT=yi("ArrayBuffer");function i5(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&tT(n.buffer),e}const a5=T0("string"),Er=T0("function"),nT=T0("number"),S0=n=>n!==null&&typeof n=="object",o5=n=>n===!0||n===!1,Td=n=>{if(b0(n)!=="object")return!1;const e=av(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(eT in n)&&!(A0 in n)},s5=yi("Date"),l5=yi("File"),u5=yi("Blob"),c5=yi("FileList"),f5=n=>S0(n)&&Er(n.pipe),h5=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Er(n.append)&&((e=b0(n))==="formdata"||e==="object"&&Er(n.toString)&&n.toString()==="[object FormData]"))},d5=yi("URLSearchParams"),[p5,m5,g5,v5]=["ReadableStream","Request","Response","Headers"].map(yi),y5=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sf(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),cu(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),s=a.length;let u;for(r=0;r<s;r++)u=a[r],e.call(null,n[u],u,n)}}function rT(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const As=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,iT=n=>!of(n)&&n!==As;function Qm(){const{caseless:n}=iT(this)&&this||{},e={},t=(r,i)=>{const a=n&&rT(e,i)||i;Td(e[a])&&Td(r)?e[a]=Qm(e[a],r):Td(r)?e[a]=Qm({},r):cu(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Sf(arguments[r],t);return e}const x5=(n,e,t,{allOwnKeys:r}={})=>(Sf(e,(i,a)=>{t&&Er(i)?n[a]=Jb(i,t):n[a]=i},{allOwnKeys:r}),n),_5=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),w5=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},E5=(n,e,t,r)=>{let i,a,s;const u={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)s=i[a],(!r||r(s,n,e))&&!u[s]&&(e[s]=n[s],u[s]=!0);n=t!==!1&&av(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},A5=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},b5=n=>{if(!n)return null;if(cu(n))return n;let e=n.length;if(!nT(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},T5=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&av(Uint8Array)),S5=(n,e)=>{const r=(n&&n[A0]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},C5=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},I5=yi("HTMLFormElement"),N5=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),tw=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),R5=yi("RegExp"),aT=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Sf(t,(i,a)=>{let s;(s=e(i,a,n))!==!1&&(r[a]=s||i)}),Object.defineProperties(n,r)},O5=n=>{aT(n,(e,t)=>{if(Er(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Er(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},D5=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return cu(n)?r(n):r(String(n).split(e)),t},P5=()=>{},M5=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function k5(n){return!!(n&&Er(n.append)&&n[eT]==="FormData"&&n[A0])}const L5=n=>{const e=new Array(10),t=(r,i)=>{if(S0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=cu(r)?[]:{};return Sf(r,(s,u)=>{const c=t(s,i+1);!of(c)&&(a[u]=c)}),e[i]=void 0,a}}return r};return t(n,0)},j5=yi("AsyncFunction"),B5=n=>n&&(S0(n)||Er(n))&&Er(n.then)&&Er(n.catch),oT=((n,e)=>n?setImmediate:e?((t,r)=>(As.addEventListener("message",({source:i,data:a})=>{i===As&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),As.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Er(As.postMessage)),V5=typeof queueMicrotask<"u"?queueMicrotask.bind(As):typeof process<"u"&&process.nextTick||oT,U5=n=>n!=null&&Er(n[A0]),re={isArray:cu,isArrayBuffer:tT,isBuffer:r5,isFormData:h5,isArrayBufferView:i5,isString:a5,isNumber:nT,isBoolean:o5,isObject:S0,isPlainObject:Td,isReadableStream:p5,isRequest:m5,isResponse:g5,isHeaders:v5,isUndefined:of,isDate:s5,isFile:l5,isBlob:u5,isRegExp:R5,isFunction:Er,isStream:f5,isURLSearchParams:d5,isTypedArray:T5,isFileList:c5,forEach:Sf,merge:Qm,extend:x5,trim:y5,stripBOM:_5,inherits:w5,toFlatObject:E5,kindOf:b0,kindOfTest:yi,endsWith:A5,toArray:b5,forEachEntry:S5,matchAll:C5,isHTMLForm:I5,hasOwnProperty:tw,hasOwnProp:tw,reduceDescriptors:aT,freezeMethods:O5,toObjectSet:D5,toCamelCase:N5,noop:P5,toFiniteNumber:M5,findKey:rT,global:As,isContextDefined:iT,isSpecCompliantForm:k5,toJSONObject:L5,isAsyncFn:j5,isThenable:B5,setImmediate:oT,asap:V5,isIterable:U5};function Ue(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}re.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const sT=Ue.prototype,lT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{lT[n]={value:n}});Object.defineProperties(Ue,lT);Object.defineProperty(sT,"isAxiosError",{value:!0});Ue.from=(n,e,t,r,i,a)=>{const s=Object.create(sT);return re.toFlatObject(n,s,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),Ue.call(s,n.message,e,t,r,i),s.cause=n,s.name=n.name,a&&Object.assign(s,a),s};const F5=null;function Zm(n){return re.isPlainObject(n)||re.isArray(n)}function uT(n){return re.endsWith(n,"[]")?n.slice(0,-2):n}function nw(n,e,t){return n?n.concat(e).map(function(i,a){return i=uT(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function H5(n){return re.isArray(n)&&!n.some(Zm)}const z5=re.toFlatObject(re,{},null,function(e){return/^is[A-Z]/.test(e)});function C0(n,e,t){if(!re.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=re.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,T){return!re.isUndefined(T[b])});const r=t.metaTokens,i=t.visitor||p,a=t.dots,s=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(e);if(!re.isFunction(i))throw new TypeError("visitor must be a function");function h(E){if(E===null)return"";if(re.isDate(E))return E.toISOString();if(!c&&re.isBlob(E))throw new Ue("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(E)||re.isTypedArray(E)?c&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,b,T){let S=E;if(E&&!T&&typeof E=="object"){if(re.endsWith(b,"{}"))b=r?b:b.slice(0,-2),E=JSON.stringify(E);else if(re.isArray(E)&&H5(E)||(re.isFileList(E)||re.endsWith(b,"[]"))&&(S=re.toArray(E)))return b=uT(b),S.forEach(function(P,j){!(re.isUndefined(P)||P===null)&&e.append(s===!0?nw([b],j,a):s===null?b:b+"[]",h(P))}),!1}return Zm(E)?!0:(e.append(nw(T,b,a),h(E)),!1)}const m=[],y=Object.assign(z5,{defaultVisitor:p,convertValue:h,isVisitable:Zm});function _(E,b){if(!re.isUndefined(E)){if(m.indexOf(E)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(E),re.forEach(E,function(S,N){(!(re.isUndefined(S)||S===null)&&i.call(e,S,re.isString(N)?N.trim():N,b,y))===!0&&_(S,b?b.concat(N):[N])}),m.pop()}}if(!re.isObject(n))throw new TypeError("data must be an object");return _(n),e}function rw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ov(n,e){this._pairs=[],n&&C0(n,this,e)}const cT=ov.prototype;cT.append=function(e,t){this._pairs.push([e,t])};cT.toString=function(e){const t=e?function(r){return e.call(this,r,rw)}:rw;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function G5(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fT(n,e,t){if(!e)return n;const r=t&&t.encode||G5;re.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=re.isURLSearchParams(e)?e.toString():new ov(e,t).toString(r),a){const s=n.indexOf("#");s!==-1&&(n=n.slice(0,s)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class iw{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){re.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q5=typeof URLSearchParams<"u"?URLSearchParams:ov,X5=typeof FormData<"u"?FormData:null,W5=typeof Blob<"u"?Blob:null,$5={isBrowser:!0,classes:{URLSearchParams:q5,FormData:X5,Blob:W5},protocols:["http","https","file","blob","url","data"]},sv=typeof window<"u"&&typeof document<"u",Jm=typeof navigator=="object"&&navigator||void 0,Y5=sv&&(!Jm||["ReactNative","NativeScript","NS"].indexOf(Jm.product)<0),K5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Q5=sv&&window.location.href||"http://localhost",Z5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sv,hasStandardBrowserEnv:Y5,hasStandardBrowserWebWorkerEnv:K5,navigator:Jm,origin:Q5},Symbol.toStringTag,{value:"Module"})),nr={...Z5,...$5};function J5(n,e){return C0(n,new nr.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,a){return nr.isNode&&re.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function eD(n){return re.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function tD(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function dT(n){function e(t,r,i,a){let s=t[a++];if(s==="__proto__")return!0;const u=Number.isFinite(+s),c=a>=t.length;return s=!s&&re.isArray(i)?i.length:s,c?(re.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!u):((!i[s]||!re.isObject(i[s]))&&(i[s]=[]),e(t,r,i[s],a)&&re.isArray(i[s])&&(i[s]=tD(i[s])),!u)}if(re.isFormData(n)&&re.isFunction(n.entries)){const t={};return re.forEachEntry(n,(r,i)=>{e(eD(r),i,t,0)}),t}return null}function nD(n,e,t){if(re.isString(n))try{return(e||JSON.parse)(n),re.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Cf={transitional:hT,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=re.isObject(e);if(a&&re.isHTMLForm(e)&&(e=new FormData(e)),re.isFormData(e))return i?JSON.stringify(dT(e)):e;if(re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e)||re.isReadableStream(e))return e;if(re.isArrayBufferView(e))return e.buffer;if(re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return J5(e,this.formSerializer).toString();if((u=re.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return C0(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),nD(e)):e}],transformResponse:[function(e){const t=this.transitional||Cf.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(re.isResponse(e)||re.isReadableStream(e))return e;if(e&&re.isString(e)&&(r&&!this.responseType||i)){const s=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(s)throw u.name==="SyntaxError"?Ue.from(u,Ue.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nr.classes.FormData,Blob:nr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],n=>{Cf.headers[n]={}});const rD=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iD=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(s){i=s.indexOf(":"),t=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!t||e[t]&&rD[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},aw=Symbol("internals");function Rc(n){return n&&String(n).trim().toLowerCase()}function Sd(n){return n===!1||n==null?n:re.isArray(n)?n.map(Sd):String(n)}function aD(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const oD=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function cm(n,e,t,r,i){if(re.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!re.isString(e)){if(re.isString(r))return e.indexOf(r)!==-1;if(re.isRegExp(r))return r.test(e)}}function sD(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function lD(n,e){const t=re.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,s){return this[r].call(this,e,i,a,s)},configurable:!0})})}let Ar=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(u,c,h){const p=Rc(c);if(!p)throw new Error("header name must be a non-empty string");const m=re.findKey(i,p);(!m||i[m]===void 0||h===!0||h===void 0&&i[m]!==!1)&&(i[m||c]=Sd(u))}const s=(u,c)=>re.forEach(u,(h,p)=>a(h,p,c));if(re.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(re.isString(e)&&(e=e.trim())&&!oD(e))s(iD(e),t);else if(re.isObject(e)&&re.isIterable(e)){let u={},c,h;for(const p of e){if(!re.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[h=p[0]]=(c=u[h])?re.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}s(u,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=Rc(e),e){const r=re.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return aD(i);if(re.isFunction(t))return t.call(this,i,r);if(re.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Rc(e),e){const r=re.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||cm(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(s){if(s=Rc(s),s){const u=re.findKey(r,s);u&&(!t||cm(r,r[u],u,t))&&(delete r[u],i=!0)}}return re.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||cm(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return re.forEach(this,(i,a)=>{const s=re.findKey(r,a);if(s){t[s]=Sd(i),delete t[a];return}const u=e?sD(a):String(a).trim();u!==a&&delete t[a],t[u]=Sd(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return re.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&re.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[aw]=this[aw]={accessors:{}}).accessors,i=this.prototype;function a(s){const u=Rc(s);r[u]||(lD(i,s),r[u]=!0)}return re.isArray(e)?e.forEach(a):a(e),this}};Ar.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(Ar.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});re.freezeMethods(Ar);function fm(n,e){const t=this||Cf,r=e||t,i=Ar.from(r.headers);let a=r.data;return re.forEach(n,function(u){a=u.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function pT(n){return!!(n&&n.__CANCEL__)}function fu(n,e,t){Ue.call(this,n??"canceled",Ue.ERR_CANCELED,e,t),this.name="CanceledError"}re.inherits(fu,Ue,{__CANCEL__:!0});function mT(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Ue("Request failed with status code "+t.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function uD(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function cD(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,s;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),p=r[a];s||(s=h),t[i]=c,r[i]=h;let m=a,y=0;for(;m!==i;)y+=t[m++],m=m%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),h-s<e)return;const _=p&&h-p;return _?Math.round(y*1e3/_):void 0}}function fD(n,e){let t=0,r=1e3/e,i,a;const s=(h,p=Date.now())=>{t=p,i=null,a&&(clearTimeout(a),a=null),n.apply(null,h)};return[(...h)=>{const p=Date.now(),m=p-t;m>=r?s(h,p):(i=h,a||(a=setTimeout(()=>{a=null,s(i)},r-m)))},()=>i&&s(i)]}const qd=(n,e,t=3)=>{let r=0;const i=cD(50,250);return fD(a=>{const s=a.loaded,u=a.lengthComputable?a.total:void 0,c=s-r,h=i(c),p=s<=u;r=s;const m={loaded:s,total:u,progress:u?s/u:void 0,bytes:c,rate:h||void 0,estimated:h&&u&&p?(u-s)/h:void 0,event:a,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(m)},t)},ow=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},sw=n=>(...e)=>re.asap(()=>n(...e)),hD=nr.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,nr.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(nr.origin),nr.navigator&&/(msie|trident)/i.test(nr.navigator.userAgent)):()=>!0,dD=nr.hasStandardBrowserEnv?{write(n,e,t,r,i,a){const s=[n+"="+encodeURIComponent(e)];re.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),re.isString(r)&&s.push("path="+r),re.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pD(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function mD(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function gT(n,e,t){let r=!pD(e);return n&&(r||t==!1)?mD(n,e):e}const lw=n=>n instanceof Ar?{...n}:n;function Os(n,e){e=e||{};const t={};function r(h,p,m,y){return re.isPlainObject(h)&&re.isPlainObject(p)?re.merge.call({caseless:y},h,p):re.isPlainObject(p)?re.merge({},p):re.isArray(p)?p.slice():p}function i(h,p,m,y){if(re.isUndefined(p)){if(!re.isUndefined(h))return r(void 0,h,m,y)}else return r(h,p,m,y)}function a(h,p){if(!re.isUndefined(p))return r(void 0,p)}function s(h,p){if(re.isUndefined(p)){if(!re.isUndefined(h))return r(void 0,h)}else return r(void 0,p)}function u(h,p,m){if(m in e)return r(h,p);if(m in n)return r(void 0,h)}const c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u,headers:(h,p,m)=>i(lw(h),lw(p),m,!0)};return re.forEach(Object.keys(Object.assign({},n,e)),function(p){const m=c[p]||i,y=m(n[p],e[p],p);re.isUndefined(y)&&m!==u||(t[p]=y)}),t}const vT=n=>{const e=Os({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:u}=e;e.headers=s=Ar.from(s),e.url=fT(gT(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(re.isFormData(t)){if(nr.hasStandardBrowserEnv||nr.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[h,...p]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];s.setContentType([h||"multipart/form-data",...p].join("; "))}}if(nr.hasStandardBrowserEnv&&(r&&re.isFunction(r)&&(r=r(e)),r||r!==!1&&hD(e.url))){const h=i&&a&&dD.read(a);h&&s.set(i,h)}return e},gD=typeof XMLHttpRequest<"u",vD=gD&&function(n){return new Promise(function(t,r){const i=vT(n);let a=i.data;const s=Ar.from(i.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:h}=i,p,m,y,_,E;function b(){_&&_(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function S(){if(!T)return;const P=Ar.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),U={data:!u||u==="text"||u==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:P,config:n,request:T};mT(function(D){t(D),b()},function(D){r(D),b()},U),T=null}"onloadend"in T?T.onloadend=S:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(S)},T.onabort=function(){T&&(r(new Ue("Request aborted",Ue.ECONNABORTED,n,T)),T=null)},T.onerror=function(){r(new Ue("Network Error",Ue.ERR_NETWORK,n,T)),T=null},T.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||hT;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new Ue(j,U.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,n,T)),T=null},a===void 0&&s.setContentType(null),"setRequestHeader"in T&&re.forEach(s.toJSON(),function(j,U){T.setRequestHeader(U,j)}),re.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),u&&u!=="json"&&(T.responseType=i.responseType),h&&([y,E]=qd(h,!0),T.addEventListener("progress",y)),c&&T.upload&&([m,_]=qd(c),T.upload.addEventListener("progress",m),T.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(p=P=>{T&&(r(!P||P.type?new fu(null,n,T):P),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const N=uD(i.url);if(N&&nr.protocols.indexOf(N)===-1){r(new Ue("Unsupported protocol "+N+":",Ue.ERR_BAD_REQUEST,n));return}T.send(a||null)})},yD=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(h){if(!i){i=!0,u();const p=h instanceof Error?h:this.reason;r.abort(p instanceof Ue?p:new fu(p instanceof Error?p.message:p))}};let s=e&&setTimeout(()=>{s=null,a(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const u=()=>{n&&(s&&clearTimeout(s),s=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(a):h.removeEventListener("abort",a)}),n=null)};n.forEach(h=>h.addEventListener("abort",a));const{signal:c}=r;return c.unsubscribe=()=>re.asap(u),c}},xD=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},_D=async function*(n,e){for await(const t of wD(n))yield*xD(t,e)},wD=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},uw=(n,e,t,r)=>{const i=_D(n,e);let a=0,s,u=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:h,value:p}=await i.next();if(h){u(),c.close();return}let m=p.byteLength;if(t){let y=a+=m;t(y)}c.enqueue(new Uint8Array(p))}catch(h){throw u(h),h}},cancel(c){return u(c),i.return()}},{highWaterMark:2})},I0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yT=I0&&typeof ReadableStream=="function",ED=I0&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),xT=(n,...e)=>{try{return!!n(...e)}catch{return!1}},AD=yT&&xT(()=>{let n=!1;const e=new Request(nr.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),cw=64*1024,eg=yT&&xT(()=>re.isReadableStream(new Response("").body)),Xd={stream:eg&&(n=>n.body)};I0&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Xd[e]&&(Xd[e]=re.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Ue(`Response type '${e}' is not supported`,Ue.ERR_NOT_SUPPORT,r)})})})(new Response);const bD=async n=>{if(n==null)return 0;if(re.isBlob(n))return n.size;if(re.isSpecCompliantForm(n))return(await new Request(nr.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(re.isArrayBufferView(n)||re.isArrayBuffer(n))return n.byteLength;if(re.isURLSearchParams(n)&&(n=n+""),re.isString(n))return(await ED(n)).byteLength},TD=async(n,e)=>{const t=re.toFiniteNumber(n.getContentLength());return t??bD(e)},SD=I0&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:u,onUploadProgress:c,responseType:h,headers:p,withCredentials:m="same-origin",fetchOptions:y}=vT(n);h=h?(h+"").toLowerCase():"text";let _=yD([i,a&&a.toAbortSignal()],s),E;const b=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let T;try{if(c&&AD&&t!=="get"&&t!=="head"&&(T=await TD(p,r))!==0){let U=new Request(e,{method:"POST",body:r,duplex:"half"}),X;if(re.isFormData(r)&&(X=U.headers.get("content-type"))&&p.setContentType(X),U.body){const[D,R]=ow(T,qd(sw(c)));r=uw(U.body,cw,D,R)}}re.isString(m)||(m=m?"include":"omit");const S="credentials"in Request.prototype;E=new Request(e,{...y,signal:_,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:S?m:void 0});let N=await fetch(E);const P=eg&&(h==="stream"||h==="response");if(eg&&(u||P&&b)){const U={};["status","statusText","headers"].forEach(M=>{U[M]=N[M]});const X=re.toFiniteNumber(N.headers.get("content-length")),[D,R]=u&&ow(X,qd(sw(u),!0))||[];N=new Response(uw(N.body,cw,D,()=>{R&&R(),b&&b()}),U)}h=h||"text";let j=await Xd[re.findKey(Xd,h)||"text"](N,n);return!P&&b&&b(),await new Promise((U,X)=>{mT(U,X,{data:j,headers:Ar.from(N.headers),status:N.status,statusText:N.statusText,config:n,request:E})})}catch(S){throw b&&b(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,n,E),{cause:S.cause||S}):Ue.from(S,S&&S.code,n,E)}}),tg={http:F5,xhr:vD,fetch:SD};re.forEach(tg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const fw=n=>`- ${n}`,CD=n=>re.isFunction(n)||n===null||n===!1,_T={getAdapter:n=>{n=re.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let a=0;a<e;a++){t=n[a];let s;if(r=t,!CD(t)&&(r=tg[(s=String(t)).toLowerCase()],r===void 0))throw new Ue(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+a]=r}if(!r){const a=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?a.length>1?`since :
`+a.map(fw).join(`
`):" "+fw(a[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:tg};function hm(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new fu(null,n)}function hw(n){return hm(n),n.headers=Ar.from(n.headers),n.data=fm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),_T.getAdapter(n.adapter||Cf.adapter)(n).then(function(r){return hm(n),r.data=fm.call(n,n.transformResponse,r),r.headers=Ar.from(r.headers),r},function(r){return pT(r)||(hm(n),r&&r.response&&(r.response.data=fm.call(n,n.transformResponse,r.response),r.response.headers=Ar.from(r.response.headers))),Promise.reject(r)})}const wT="1.9.0",N0={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{N0[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const dw={};N0.transitional=function(e,t,r){function i(a,s){return"[Axios v"+wT+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,u)=>{if(e===!1)throw new Ue(i(s," has been removed"+(t?" in "+t:"")),Ue.ERR_DEPRECATED);return t&&!dw[s]&&(dw[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,s,u):!0}};N0.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function ID(n,e,t){if(typeof n!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],s=e[a];if(s){const u=n[a],c=u===void 0||s(u,a,n);if(c!==!0)throw new Ue("option "+a+" must be "+c,Ue.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ue("Unknown option "+a,Ue.ERR_BAD_OPTION)}}const Cd={assertOptions:ID,validators:N0},ji=Cd.validators;let Cs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new iw,response:new iw}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Os(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&Cd.assertOptions(r,{silentJSONParsing:ji.transitional(ji.boolean),forcedJSONParsing:ji.transitional(ji.boolean),clarifyTimeoutError:ji.transitional(ji.boolean)},!1),i!=null&&(re.isFunction(i)?t.paramsSerializer={serialize:i}:Cd.assertOptions(i,{encode:ji.function,serialize:ji.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Cd.assertOptions(t,{baseUrl:ji.spelling("baseURL"),withXsrfToken:ji.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&re.merge(a.common,a[t.method]);a&&re.forEach(["delete","get","head","post","put","patch","common"],E=>{delete a[E]}),t.headers=Ar.concat(s,a);const u=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(c=c&&b.synchronous,u.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let p,m=0,y;if(!c){const E=[hw.bind(this),void 0];for(E.unshift.apply(E,u),E.push.apply(E,h),y=E.length,p=Promise.resolve(t);m<y;)p=p.then(E[m++],E[m++]);return p}y=u.length;let _=t;for(m=0;m<y;){const E=u[m++],b=u[m++];try{_=E(_)}catch(T){b.call(this,T);break}}try{p=hw.call(this,_)}catch(E){return Promise.reject(E)}for(m=0,y=h.length;m<y;)p=p.then(h[m++],h[m++]);return p}getUri(e){e=Os(this.defaults,e);const t=gT(e.baseURL,e.url,e.allowAbsoluteUrls);return fT(t,e.params,e.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(e){Cs.prototype[e]=function(t,r){return this.request(Os(r||{},{method:e,url:t,data:(r||{}).data}))}});re.forEach(["post","put","patch"],function(e){function t(r){return function(a,s,u){return this.request(Os(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Cs.prototype[e]=t(),Cs.prototype[e+"Form"]=t(!0)});let ND=class ET{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(u=>{r.subscribe(u),a=u}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,u){r.reason||(r.reason=new fu(a,s,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ET(function(i){e=i}),cancel:e}}};function RD(n){return function(t){return n.apply(null,t)}}function OD(n){return re.isObject(n)&&n.isAxiosError===!0}const ng={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ng).forEach(([n,e])=>{ng[e]=n});function AT(n){const e=new Cs(n),t=Jb(Cs.prototype.request,e);return re.extend(t,Cs.prototype,e,{allOwnKeys:!0}),re.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return AT(Os(n,i))},t}const rn=AT(Cf);rn.Axios=Cs;rn.CanceledError=fu;rn.CancelToken=ND;rn.isCancel=pT;rn.VERSION=wT;rn.toFormData=C0;rn.AxiosError=Ue;rn.Cancel=rn.CanceledError;rn.all=function(e){return Promise.all(e)};rn.spread=RD;rn.isAxiosError=OD;rn.mergeConfig=Os;rn.AxiosHeaders=Ar;rn.formToJSON=n=>dT(re.isHTMLForm(n)?new FormData(n):n);rn.getAdapter=_T.getAdapter;rn.HttpStatusCode=ng;rn.default=rn;const{Axios:SV,AxiosError:CV,CanceledError:IV,isCancel:NV,CancelToken:RV,VERSION:OV,all:DV,Cancel:PV,isAxiosError:MV,spread:kV,toFormData:LV,AxiosHeaders:jV,HttpStatusCode:BV,formToJSON:VV,getAdapter:UV,mergeConfig:FV}=rn,zt=rn.create({baseURL:"https://woo-combine-backend.onrender.com",withCredentials:!1,timeout:1e4});zt.interceptors.response.use(n=>n,async n=>{const e=n.config;if(!e||!e.retry||(e.retryCount=e.retryCount||0,e.retryCount>=e.retry))return Promise.reject(n);e.retryCount+=1;const t=Math.pow(2,e.retryCount)*1e3;return await new Promise(r=>setTimeout(r,t)),zt(e)});zt.interceptors.request.use(async n=>{const e=Ft.currentUser;if(e){const t=await e.getIdToken();n.headers=n.headers||{},n.headers.Authorization=`Bearer ${t}`}return n},n=>Promise.reject(n));zt.interceptors.response.use(n=>n,n=>(n.response&&n.response.data&&n.response.data.detail?console.error("API Error:",n.response.data.detail):console.error("API Error:",n.message),Promise.reject(n)));var pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var So,bT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function M(){}M.prototype=R.prototype,D.D=R.prototype,D.prototype=new M,D.prototype.constructor=D,D.C=function(B,G,H){for(var k=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)k[xe-2]=arguments[xe];return R.prototype[G].apply(B,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,R,M){M||(M=0);var B=Array(16);if(typeof R=="string")for(var G=0;16>G;++G)B[G]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(G=0;16>G;++G)B[G]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=D.g[0],M=D.g[1],G=D.g[2];var H=D.g[3],k=R+(H^M&(G^H))+B[0]+3614090360&4294967295;R=M+(k<<7&4294967295|k>>>25),k=H+(G^R&(M^G))+B[1]+3905402710&4294967295,H=R+(k<<12&4294967295|k>>>20),k=G+(M^H&(R^M))+B[2]+606105819&4294967295,G=H+(k<<17&4294967295|k>>>15),k=M+(R^G&(H^R))+B[3]+3250441966&4294967295,M=G+(k<<22&4294967295|k>>>10),k=R+(H^M&(G^H))+B[4]+4118548399&4294967295,R=M+(k<<7&4294967295|k>>>25),k=H+(G^R&(M^G))+B[5]+1200080426&4294967295,H=R+(k<<12&4294967295|k>>>20),k=G+(M^H&(R^M))+B[6]+2821735955&4294967295,G=H+(k<<17&4294967295|k>>>15),k=M+(R^G&(H^R))+B[7]+4249261313&4294967295,M=G+(k<<22&4294967295|k>>>10),k=R+(H^M&(G^H))+B[8]+1770035416&4294967295,R=M+(k<<7&4294967295|k>>>25),k=H+(G^R&(M^G))+B[9]+2336552879&4294967295,H=R+(k<<12&4294967295|k>>>20),k=G+(M^H&(R^M))+B[10]+4294925233&4294967295,G=H+(k<<17&4294967295|k>>>15),k=M+(R^G&(H^R))+B[11]+2304563134&4294967295,M=G+(k<<22&4294967295|k>>>10),k=R+(H^M&(G^H))+B[12]+1804603682&4294967295,R=M+(k<<7&4294967295|k>>>25),k=H+(G^R&(M^G))+B[13]+4254626195&4294967295,H=R+(k<<12&4294967295|k>>>20),k=G+(M^H&(R^M))+B[14]+2792965006&4294967295,G=H+(k<<17&4294967295|k>>>15),k=M+(R^G&(H^R))+B[15]+1236535329&4294967295,M=G+(k<<22&4294967295|k>>>10),k=R+(G^H&(M^G))+B[1]+4129170786&4294967295,R=M+(k<<5&4294967295|k>>>27),k=H+(M^G&(R^M))+B[6]+3225465664&4294967295,H=R+(k<<9&4294967295|k>>>23),k=G+(R^M&(H^R))+B[11]+643717713&4294967295,G=H+(k<<14&4294967295|k>>>18),k=M+(H^R&(G^H))+B[0]+3921069994&4294967295,M=G+(k<<20&4294967295|k>>>12),k=R+(G^H&(M^G))+B[5]+3593408605&4294967295,R=M+(k<<5&4294967295|k>>>27),k=H+(M^G&(R^M))+B[10]+38016083&4294967295,H=R+(k<<9&4294967295|k>>>23),k=G+(R^M&(H^R))+B[15]+3634488961&4294967295,G=H+(k<<14&4294967295|k>>>18),k=M+(H^R&(G^H))+B[4]+3889429448&4294967295,M=G+(k<<20&4294967295|k>>>12),k=R+(G^H&(M^G))+B[9]+568446438&4294967295,R=M+(k<<5&4294967295|k>>>27),k=H+(M^G&(R^M))+B[14]+3275163606&4294967295,H=R+(k<<9&4294967295|k>>>23),k=G+(R^M&(H^R))+B[3]+4107603335&4294967295,G=H+(k<<14&4294967295|k>>>18),k=M+(H^R&(G^H))+B[8]+1163531501&4294967295,M=G+(k<<20&4294967295|k>>>12),k=R+(G^H&(M^G))+B[13]+2850285829&4294967295,R=M+(k<<5&4294967295|k>>>27),k=H+(M^G&(R^M))+B[2]+4243563512&4294967295,H=R+(k<<9&4294967295|k>>>23),k=G+(R^M&(H^R))+B[7]+1735328473&4294967295,G=H+(k<<14&4294967295|k>>>18),k=M+(H^R&(G^H))+B[12]+2368359562&4294967295,M=G+(k<<20&4294967295|k>>>12),k=R+(M^G^H)+B[5]+4294588738&4294967295,R=M+(k<<4&4294967295|k>>>28),k=H+(R^M^G)+B[8]+2272392833&4294967295,H=R+(k<<11&4294967295|k>>>21),k=G+(H^R^M)+B[11]+1839030562&4294967295,G=H+(k<<16&4294967295|k>>>16),k=M+(G^H^R)+B[14]+4259657740&4294967295,M=G+(k<<23&4294967295|k>>>9),k=R+(M^G^H)+B[1]+2763975236&4294967295,R=M+(k<<4&4294967295|k>>>28),k=H+(R^M^G)+B[4]+1272893353&4294967295,H=R+(k<<11&4294967295|k>>>21),k=G+(H^R^M)+B[7]+4139469664&4294967295,G=H+(k<<16&4294967295|k>>>16),k=M+(G^H^R)+B[10]+3200236656&4294967295,M=G+(k<<23&4294967295|k>>>9),k=R+(M^G^H)+B[13]+681279174&4294967295,R=M+(k<<4&4294967295|k>>>28),k=H+(R^M^G)+B[0]+3936430074&4294967295,H=R+(k<<11&4294967295|k>>>21),k=G+(H^R^M)+B[3]+3572445317&4294967295,G=H+(k<<16&4294967295|k>>>16),k=M+(G^H^R)+B[6]+76029189&4294967295,M=G+(k<<23&4294967295|k>>>9),k=R+(M^G^H)+B[9]+3654602809&4294967295,R=M+(k<<4&4294967295|k>>>28),k=H+(R^M^G)+B[12]+3873151461&4294967295,H=R+(k<<11&4294967295|k>>>21),k=G+(H^R^M)+B[15]+530742520&4294967295,G=H+(k<<16&4294967295|k>>>16),k=M+(G^H^R)+B[2]+3299628645&4294967295,M=G+(k<<23&4294967295|k>>>9),k=R+(G^(M|~H))+B[0]+4096336452&4294967295,R=M+(k<<6&4294967295|k>>>26),k=H+(M^(R|~G))+B[7]+1126891415&4294967295,H=R+(k<<10&4294967295|k>>>22),k=G+(R^(H|~M))+B[14]+2878612391&4294967295,G=H+(k<<15&4294967295|k>>>17),k=M+(H^(G|~R))+B[5]+4237533241&4294967295,M=G+(k<<21&4294967295|k>>>11),k=R+(G^(M|~H))+B[12]+1700485571&4294967295,R=M+(k<<6&4294967295|k>>>26),k=H+(M^(R|~G))+B[3]+2399980690&4294967295,H=R+(k<<10&4294967295|k>>>22),k=G+(R^(H|~M))+B[10]+4293915773&4294967295,G=H+(k<<15&4294967295|k>>>17),k=M+(H^(G|~R))+B[1]+2240044497&4294967295,M=G+(k<<21&4294967295|k>>>11),k=R+(G^(M|~H))+B[8]+1873313359&4294967295,R=M+(k<<6&4294967295|k>>>26),k=H+(M^(R|~G))+B[15]+4264355552&4294967295,H=R+(k<<10&4294967295|k>>>22),k=G+(R^(H|~M))+B[6]+2734768916&4294967295,G=H+(k<<15&4294967295|k>>>17),k=M+(H^(G|~R))+B[13]+1309151649&4294967295,M=G+(k<<21&4294967295|k>>>11),k=R+(G^(M|~H))+B[4]+4149444226&4294967295,R=M+(k<<6&4294967295|k>>>26),k=H+(M^(R|~G))+B[11]+3174756917&4294967295,H=R+(k<<10&4294967295|k>>>22),k=G+(R^(H|~M))+B[2]+718787259&4294967295,G=H+(k<<15&4294967295|k>>>17),k=M+(H^(G|~R))+B[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(G+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+G&4294967295,D.g[3]=D.g[3]+H&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var M=R-this.blockSize,B=this.B,G=this.h,H=0;H<R;){if(G==0)for(;H<=M;)i(this,D,H),H+=this.blockSize;if(typeof D=="string"){for(;H<R;)if(B[G++]=D.charCodeAt(H++),G==this.blockSize){i(this,B),G=0;break}}else for(;H<R;)if(B[G++]=D[H++],G==this.blockSize){i(this,B),G=0;break}}this.h=G,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var M=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=M&255,M/=256;for(this.u(D),D=Array(16),R=M=0;4>R;++R)for(var B=0;32>B;B+=8)D[M++]=this.g[R]>>>B&255;return D};function a(D,R){var M=u;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=R(D)}function s(D,R){this.h=R;for(var M=[],B=!0,G=D.length-1;0<=G;G--){var H=D[G]|0;B&&H==R||(M[G]=H,B=!1)}this.g=M}var u={};function c(D){return-128<=D&&128>D?a(D,function(R){return new s([R|0],0>R?-1:0)}):new s([D|0],0>D?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return m;if(0>D)return T(h(-D));for(var R=[],M=1,B=0;D>=M;B++)R[B]=D/M|0,M*=4294967296;return new s(R,0)}function p(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return T(p(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=h(Math.pow(R,8)),B=m,G=0;G<D.length;G+=8){var H=Math.min(8,D.length-G),k=parseInt(D.substring(G,G+H),R);8>H?(H=h(Math.pow(R,H)),B=B.j(H).add(h(k))):(B=B.j(M),B=B.add(h(k)))}return B}var m=c(0),y=c(1),_=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-T(this).m();for(var D=0,R=1,M=0;M<this.g.length;M++){var B=this.i(M);D+=(0<=B?B:4294967296+B)*R,R*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(b(this))return"-"+T(this).toString(D);for(var R=h(Math.pow(D,6)),M=this,B="";;){var G=j(M,R).g;M=S(M,G.j(R));var H=((0<M.g.length?M.g[0]:M.h)>>>0).toString(D);if(M=G,E(M))return H+B;for(;6>H.length;)H="0"+H;B=H+B}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function b(D){return D.h==-1}n.l=function(D){return D=S(this,D),b(D)?-1:E(D)?0:1};function T(D){for(var R=D.g.length,M=[],B=0;B<R;B++)M[B]=~D.g[B];return new s(M,~D.h).add(y)}n.abs=function(){return b(this)?T(this):this},n.add=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],B=0,G=0;G<=R;G++){var H=B+(this.i(G)&65535)+(D.i(G)&65535),k=(H>>>16)+(this.i(G)>>>16)+(D.i(G)>>>16);B=k>>>16,H&=65535,k&=65535,M[G]=k<<16|H}return new s(M,M[M.length-1]&-2147483648?-1:0)};function S(D,R){return D.add(T(R))}n.j=function(D){if(E(this)||E(D))return m;if(b(this))return b(D)?T(this).j(T(D)):T(T(this).j(D));if(b(D))return T(this.j(T(D)));if(0>this.l(_)&&0>D.l(_))return h(this.m()*D.m());for(var R=this.g.length+D.g.length,M=[],B=0;B<2*R;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(var G=0;G<D.g.length;G++){var H=this.i(B)>>>16,k=this.i(B)&65535,xe=D.i(G)>>>16,ve=D.i(G)&65535;M[2*B+2*G]+=k*ve,N(M,2*B+2*G),M[2*B+2*G+1]+=H*ve,N(M,2*B+2*G+1),M[2*B+2*G+1]+=k*xe,N(M,2*B+2*G+1),M[2*B+2*G+2]+=H*xe,N(M,2*B+2*G+2)}for(B=0;B<R;B++)M[B]=M[2*B+1]<<16|M[2*B];for(B=R;B<2*R;B++)M[B]=0;return new s(M,0)};function N(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function P(D,R){this.g=D,this.h=R}function j(D,R){if(E(R))throw Error("division by zero");if(E(D))return new P(m,m);if(b(D))return R=j(T(D),R),new P(T(R.g),T(R.h));if(b(R))return R=j(D,T(R)),new P(T(R.g),R.h);if(30<D.g.length){if(b(D)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var M=y,B=R;0>=B.l(D);)M=U(M),B=U(B);var G=X(M,1),H=X(B,1);for(B=X(B,2),M=X(M,2);!E(B);){var k=H.add(B);0>=k.l(D)&&(G=G.add(M),H=k),B=X(B,1),M=X(M,1)}return R=S(D,G.j(R)),new P(G,R)}for(G=m;0<=D.l(R);){for(M=Math.max(1,Math.floor(D.m()/R.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),H=h(M),k=H.j(R);b(k)||0<k.l(D);)M-=B,H=h(M),k=H.j(R);E(H)&&(H=y),G=G.add(H),D=S(D,k)}return new P(G,D)}n.A=function(D){return j(this,D).h},n.and=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],B=0;B<R;B++)M[B]=this.i(B)&D.i(B);return new s(M,this.h&D.h)},n.or=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],B=0;B<R;B++)M[B]=this.i(B)|D.i(B);return new s(M,this.h|D.h)},n.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],B=0;B<R;B++)M[B]=this.i(B)^D.i(B);return new s(M,this.h^D.h)};function U(D){for(var R=D.g.length+1,M=[],B=0;B<R;B++)M[B]=D.i(B)<<1|D.i(B-1)>>>31;return new s(M,D.h)}function X(D,R){var M=R>>5;R%=32;for(var B=D.g.length-M,G=[],H=0;H<B;H++)G[H]=0<R?D.i(H+M)>>>R|D.i(H+M+1)<<32-R:D.i(H+M);return new s(G,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bT=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,So=s}).apply(typeof pw<"u"?pw:typeof self<"u"?self:typeof window<"u"?window:{});var ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TT,Bc,ST,Id,rg,CT,IT,NT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,C){return g==Array.prototype||g==Object.prototype||(g[A]=C.value),g};function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof ad=="object"&&ad];for(var A=0;A<g.length;++A){var C=g[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(g,A){if(A)e:{var C=r;g=g.split(".");for(var L=0;L<g.length-1;L++){var Y=g[L];if(!(Y in C))break e;C=C[Y]}g=g[g.length-1],L=C[g],A=A(L),A!=L&&A!=null&&e(C,g,{configurable:!0,writable:!0,value:A})}}function a(g,A){g instanceof String&&(g+="");var C=0,L=!1,Y={next:function(){if(!L&&C<g.length){var ne=C++;return{value:A(ne,g[ne]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}i("Array.prototype.values",function(g){return g||function(){return a(this,function(A,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},u=this||self;function c(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function h(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function p(g,A,C){return g.call.apply(g.bind,arguments)}function m(g,A,C){if(!g)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,L),g.apply(A,Y)}}return function(){return g.apply(A,arguments)}}function y(g,A,C){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function _(g,A){var C=Array.prototype.slice.call(arguments,1);return function(){var L=C.slice();return L.push.apply(L,arguments),g.apply(this,L)}}function E(g,A){function C(){}C.prototype=A.prototype,g.aa=A.prototype,g.prototype=new C,g.prototype.constructor=g,g.Qb=function(L,Y,ne){for(var me=Array(arguments.length-2),et=2;et<arguments.length;et++)me[et-2]=arguments[et];return A.prototype[Y].apply(L,me)}}function b(g){const A=g.length;if(0<A){const C=Array(A);for(let L=0;L<A;L++)C[L]=g[L];return C}return[]}function T(g,A){for(let C=1;C<arguments.length;C++){const L=arguments[C];if(c(L)){const Y=g.length||0,ne=L.length||0;g.length=Y+ne;for(let me=0;me<ne;me++)g[Y+me]=L[me]}else g.push(L)}}class S{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function N(g){return/^[\s\xa0]*$/.test(g)}function P(){var g=u.navigator;return g&&(g=g.userAgent)?g:""}function j(g){return j[" "](g),g}j[" "]=function(){};var U=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function X(g,A,C){for(const L in g)A.call(C,g[L],L,g)}function D(g,A){for(const C in g)A.call(void 0,g[C],C,g)}function R(g){const A={};for(const C in g)A[C]=g[C];return A}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(g,A){let C,L;for(let Y=1;Y<arguments.length;Y++){L=arguments[Y];for(C in L)g[C]=L[C];for(let ne=0;ne<M.length;ne++)C=M[ne],Object.prototype.hasOwnProperty.call(L,C)&&(g[C]=L[C])}}function G(g){var A=1;g=g.split(":");const C=[];for(;0<A&&g.length;)C.push(g.shift()),A--;return g.length&&C.push(g.join(":")),C}function H(g){u.setTimeout(()=>{throw g},0)}function k(){var g=Pe;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class xe{constructor(){this.h=this.g=null}add(A,C){const L=ve.get();L.set(A,C),this.h?this.h.next=L:this.g=L,this.h=L}}var ve=new S(()=>new J,g=>g.reset());class J{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,fe=!1,Pe=new xe,q=()=>{const g=u.Promise.resolve(void 0);ue=()=>{g.then(ce)}};var ce=()=>{for(var g;g=k();){try{g.h.call(g.g)}catch(C){H(C)}var A=ve;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}fe=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,A),u.removeEventListener("test",C,A)}catch{}return g}();function Ve(g,A){if(de.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var C=this.type=g.type,L=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(U){e:{try{j(A.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(A=null)}}else C=="mouseover"?A=g.fromElement:C=="mouseout"&&(A=g.toElement);this.relatedTarget=A,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ie[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Ve.aa.h.call(this)}}E(Ve,de);var Ie={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var qt="closure_listenable_"+(1e6*Math.random()|0),yt=0;function dr(g,A,C,L,Y){this.listener=g,this.proxy=null,this.src=A,this.type=C,this.capture=!!L,this.ha=Y,this.key=++yt,this.da=this.fa=!1}function xi(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ei(g){this.src=g,this.g={},this.h=0}ei.prototype.add=function(g,A,C,L,Y){var ne=g.toString();g=this.g[ne],g||(g=this.g[ne]=[],this.h++);var me=ti(g,A,L,Y);return-1<me?(A=g[me],C||(A.fa=!1)):(A=new dr(A,this.src,ne,!!L,Y),A.fa=C,g.push(A)),A};function Yi(g,A){var C=A.type;if(C in g.g){var L=g.g[C],Y=Array.prototype.indexOf.call(L,A,void 0),ne;(ne=0<=Y)&&Array.prototype.splice.call(L,Y,1),ne&&(xi(A),g.g[C].length==0&&(delete g.g[C],g.h--))}}function ti(g,A,C,L){for(var Y=0;Y<g.length;++Y){var ne=g[Y];if(!ne.da&&ne.listener==A&&ne.capture==!!C&&ne.ha==L)return Y}return-1}var _i="closure_lm_"+(1e6*Math.random()|0),jo={};function Sr(g,A,C,L,Y){if(Array.isArray(A)){for(var ne=0;ne<A.length;ne++)Sr(g,A[ne],C,L,Y);return null}return C=Xt(C),g&&g[qt]?g.K(A,C,h(L)?!!L.capture:!1,Y):pr(g,A,C,!1,L,Y)}function pr(g,A,C,L,Y,ne){if(!A)throw Error("Invalid event type");var me=h(Y)?!!Y.capture:!!Y,et=Ae(g);if(et||(g[_i]=et=new ei(g)),C=et.add(A,C,L,me,ne),C.proxy)return C;if(L=yu(),C.proxy=L,L.src=g,L.listener=C,g.addEventListener)Te||(Y=me),Y===void 0&&(Y=!1),g.addEventListener(A.toString(),L,Y);else if(g.attachEvent)g.attachEvent(mr(A.toString()),L);else if(g.addListener&&g.removeListener)g.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return C}function yu(){function g(C){return A.call(g.src,g.listener,C)}const A=Vs;return g}function Bo(g,A,C,L,Y){if(Array.isArray(A))for(var ne=0;ne<A.length;ne++)Bo(g,A[ne],C,L,Y);else L=h(L)?!!L.capture:!!L,C=Xt(C),g&&g[qt]?(g=g.i,A=String(A).toString(),A in g.g&&(ne=g.g[A],C=ti(ne,C,L,Y),-1<C&&(xi(ne[C]),Array.prototype.splice.call(ne,C,1),ne.length==0&&(delete g.g[A],g.h--)))):g&&(g=Ae(g))&&(A=g.g[A.toString()],g=-1,A&&(g=ti(A,C,L,Y)),(C=-1<g?A[g]:null)&&Ua(C))}function Ua(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[qt])Yi(A.i,g);else{var C=g.type,L=g.proxy;A.removeEventListener?A.removeEventListener(C,L,g.capture):A.detachEvent?A.detachEvent(mr(C),L):A.addListener&&A.removeListener&&A.removeListener(L),(C=Ae(A))?(Yi(C,g),C.h==0&&(C.src=null,A[_i]=null)):xi(g)}}}function mr(g){return g in jo?jo[g]:jo[g]="on"+g}function Vs(g,A){if(g.da)g=!0;else{A=new Ve(A,this);var C=g.listener,L=g.ha||g.src;g.fa&&Ua(g),g=C.call(L,A)}return g}function Ae(g){return g=g[_i],g instanceof ei?g:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(g){return typeof g=="function"?g:(g[Fe]||(g[Fe]=function(A){return g.handleEvent(A)}),g[Fe])}function Je(){ye.call(this),this.i=new ei(this),this.M=this,this.F=null}E(Je,ye),Je.prototype[qt]=!0,Je.prototype.removeEventListener=function(g,A,C,L){Bo(this,g,A,C,L)};function Ze(g,A){var C,L=g.F;if(L)for(C=[];L;L=L.F)C.push(L);if(g=g.M,L=A.type||A,typeof A=="string")A=new de(A,g);else if(A instanceof de)A.target=A.target||g;else{var Y=A;A=new de(L,g),B(A,Y)}if(Y=!0,C)for(var ne=C.length-1;0<=ne;ne--){var me=A.g=C[ne];Y=Mt(me,L,!0,A)&&Y}if(me=A.g=g,Y=Mt(me,L,!0,A)&&Y,Y=Mt(me,L,!1,A)&&Y,C)for(ne=0;ne<C.length;ne++)me=A.g=C[ne],Y=Mt(me,L,!1,A)&&Y}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var C=g.g[A],L=0;L<C.length;L++)xi(C[L]);delete g.g[A],g.h--}}this.F=null},Je.prototype.K=function(g,A,C,L){return this.i.add(String(g),A,!1,C,L)},Je.prototype.L=function(g,A,C,L){return this.i.add(String(g),A,!0,C,L)};function Mt(g,A,C,L){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var Y=!0,ne=0;ne<A.length;++ne){var me=A[ne];if(me&&!me.da&&me.capture==C){var et=me.listener,dn=me.ha||me.src;me.fa&&Yi(g.i,me),Y=et.call(dn,L)!==!1&&Y}}return Y&&!L.defaultPrevented}function Sn(g,A,C){if(typeof g=="function")C&&(g=y(g,C));else if(g&&typeof g.handleEvent=="function")g=y(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:u.setTimeout(g,A||0)}function Vo(g){g.g=Sn(()=>{g.g=null,g.i&&(g.i=!1,Vo(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class xu extends ye{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Vo(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(g){ye.call(this),this.h=g,this.g={}}E(ni,ye);var Ki=[];function Uo(g){X(g.g,function(A,C){this.g.hasOwnProperty(C)&&Ua(A)},g),g.g={}}ni.prototype.N=function(){ni.aa.N.call(this),Uo(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=u.JSON.stringify,Us=u.JSON.parse,Fo=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function _u(){}_u.prototype.h=null;function wu(g){return g.h||(g.h=g.i())}function Eu(){}var Qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zi(){de.call(this,"d")}E(Zi,de);function Au(){de.call(this,"c")}E(Au,de);var wi={},bu=null;function Fa(){return bu=bu||new Je}wi.La="serverreachability";function Fs(g){de.call(this,wi.La,g)}E(Fs,de);function Ha(g){const A=Fa();Ze(A,new Fs(A))}wi.STAT_EVENT="statevent";function kf(g,A){de.call(this,wi.STAT_EVENT,g),this.stat=A}E(kf,de);function kt(g){const A=Fa();Ze(A,new kf(A,g))}wi.Ma="timingevent";function hn(g,A){de.call(this,wi.Ma,g),this.size=A}E(hn,de);function an(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},A)}function kr(){this.g=!0}kr.prototype.xa=function(){this.g=!1};function Tu(g,A,C,L,Y,ne){g.info(function(){if(g.g)if(ne)for(var me="",et=ne.split("&"),dn=0;dn<et.length;dn++){var tt=et[dn].split("=");if(1<tt.length){var In=tt[0];tt=tt[1];var pn=In.split("_");me=2<=pn.length&&pn[1]=="type"?me+(In+"="+tt+"&"):me+(In+"=redacted&")}}else me=null;else me=ne;return"XMLHTTP REQ ("+L+") [attempt "+Y+"]: "+A+`
`+C+`
`+me})}function W0(g,A,C,L,Y,ne,me){g.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Y+"]: "+A+`
`+C+`
`+ne+" "+me})}function za(g,A,C,L){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+Ho(g,C)+(L?" "+L:"")})}function Lf(g,A){g.info(function(){return"TIMEOUT: "+A})}kr.prototype.info=function(){};function Ho(g,A){if(!g.g)return A;if(!A)return null;try{var C=JSON.parse(A);if(C){for(g=0;g<C.length;g++)if(Array.isArray(C[g])){var L=C[g];if(!(2>L.length)){var Y=L[1];if(Array.isArray(Y)&&!(1>Y.length)){var ne=Y[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var me=1;me<Y.length;me++)Y[me]=""}}}}return ri(C)}catch{return A}}var Ga={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ei;function Ai(){}E(Ai,_u),Ai.prototype.g=function(){return new XMLHttpRequest},Ai.prototype.i=function(){return{}},Ei=new Ai;function ar(g,A,C,L){this.j=g,this.i=A,this.l=C,this.R=L||1,this.U=new ni(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zt}function Zt(){this.i=null,this.g="",this.h=!1}var Su={},Hs={};function ii(g,A,C){g.L=1,g.v=Wo(Cr(A)),g.m=C,g.P=!0,ea(g,null)}function ea(g,A){g.F=Date.now(),zo(g),g.A=Cr(g.v);var C=g.A,L=g.R;Array.isArray(L)||(L=[String(L)]),Du(C.i,"t",L),g.C=0,C=g.j.J,g.h=new Zt,g.g=Zf(g.j,C?A:null,!g.m),0<g.O&&(g.M=new xu(y(g.Y,g,g.g),g.O)),A=g.U,C=g.g,L=g.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Ki[0]=Y.toString()),Y=Ki);for(var ne=0;ne<Y.length;ne++){var me=Sr(C,Y[ne],L||A.handleEvent,!1,A.h||A);if(!me)break;A.g[me.key]=me}A=g.H?R(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),Ha(),Tu(g.i,g.u,g.A,g.l,g.R,g.m)}ar.prototype.ca=function(g){g=g.target;const A=this.M;A&&Vr(g)==3?A.j():this.Y(g)},ar.prototype.Y=function(g){try{if(g==this.g)e:{const pn=Vr(this.g);var A=this.g.Ba();const la=this.g.Z();if(!(3>pn)&&(pn!=3||this.g&&(this.h.h||this.g.oa()||Gf(this.g)))){this.J||pn!=4||A==7||(A==8||0>=la?Ha(3):Ha(2)),qa(this);var C=this.g.Z();this.X=C;t:if(jf(this)){var L=Gf(this.g);g="";var Y=L.length,ne=Vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),bi(this);var me="";break t}this.h.i=new u.TextDecoder}for(A=0;A<Y;A++)this.h.h=!0,g+=this.h.i.decode(L[A],{stream:!(ne&&A==Y-1)});L.length=0,this.h.g+=g,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=C==200,W0(this.i,this.u,this.A,this.l,this.R,pn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var et,dn=this.g;if((et=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(et)){var tt=et;break t}}tt=null}if(C=tt)za(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,C);else{this.o=!1,this.s=3,kt(12),Vn(this),bi(this);break e}}if(this.P){C=!0;let Un;for(;!this.J&&this.C<me.length;)if(Un=Bf(this,me),Un==Hs){pn==4&&(this.s=4,kt(14),C=!1),za(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==Su){this.s=4,kt(15),za(this.i,this.l,me,"[Invalid Chunk]"),C=!1;break}else za(this.i,this.l,Un,null),Go(this,Un);if(jf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pn!=4||me.length!=0||this.h.h||(this.s=1,kt(16),C=!1),this.o=this.o&&C,!C)za(this.i,this.l,me,"[Invalid Chunked Response]"),Vn(this),bi(this);else if(0<me.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),ts(In),In.M=!0,kt(11))}}else za(this.i,this.l,me,null),Go(this,me);pn==4&&Vn(this),this.o&&!this.J&&(pn==4?Yf(this.j,this):(this.o=!1,zo(this)))}else Z0(this.g),C==400&&0<me.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Vn(this),bi(this)}}}catch{}finally{}};function jf(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Bf(g,A){var C=g.C,L=A.indexOf(`
`,C);return L==-1?Hs:(C=Number(A.substring(C,L)),isNaN(C)?Su:(L+=1,L+C>A.length?Hs:(A=A.slice(L,L+C),g.C=L+C,A)))}ar.prototype.cancel=function(){this.J=!0,Vn(this)};function zo(g){g.S=Date.now()+g.I,Vf(g,g.I)}function Vf(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=an(y(g.ba,g),A)}function qa(g){g.B&&(u.clearTimeout(g.B),g.B=null)}ar.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Lf(this.i,this.A),this.L!=2&&(Ha(),kt(17)),Vn(this),this.s=2,bi(this)):Vf(this,this.S-g)};function bi(g){g.j.G==0||g.J||Yf(g.j,g)}function Vn(g){qa(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,Uo(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function Go(g,A){try{var C=g.j;if(C.G!=0&&(C.g==g||Cu(C.h,g))){if(!g.K&&Cu(C.h,g)&&C.G==3){try{var L=C.Da.g.parse(A)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Y=L;if(Y[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<g.F)el(C),Zs(C);else break e;ju(C),kt(18)}}else C.za=Y[1],0<C.za-C.T&&37500>Y[2]&&C.F&&C.v==0&&!C.C&&(C.C=an(y(C.Za,C),6e3));if(1>=Gs(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else sa(C,11)}else if((g.K||C.g==g)&&el(C),!N(A))for(Y=C.Da.g.parse(A),A=0;A<Y.length;A++){let tt=Y[A];if(C.T=tt[0],tt=tt[1],C.G==2)if(tt[0]=="c"){C.K=tt[1],C.ia=tt[2];const In=tt[3];In!=null&&(C.la=In,C.j.info("VER="+C.la));const pn=tt[4];pn!=null&&(C.Aa=pn,C.j.info("SVER="+C.Aa));const la=tt[5];la!=null&&typeof la=="number"&&0<la&&(L=1.5*la,C.L=L,C.j.info("backChannelRequestTimeoutMs_="+L)),L=C;const Un=g.g;if(Un){const Oi=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var ne=L.h;ne.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(qs(ne,ne.h),ne.h=null))}if(L.D){const Vu=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;Vu&&(L.ya=Vu,xt(L.I,L.D,Vu))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-g.F,C.j.info("Handshake RTT: "+C.R+"ms")),L=C;var me=g;if(L.qa=Qf(L,L.J?L.ia:null,L.W),me.K){or(L.h,me);var et=me,dn=L.L;dn&&(et.I=dn),et.B&&(qa(et),zo(et)),L.g=me}else Wf(L);0<C.i.length&&Js(C)}else tt[0]!="stop"&&tt[0]!="close"||sa(C,7);else C.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?sa(C,7):ku(C):tt[0]!="noop"&&C.l&&C.l.ta(tt),C.v=0)}}Ha(4)}catch{}}var Uf=class{constructor(g,A){this.g=g,this.map=A}};function ta(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zs(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Gs(g){return g.h?1:g.g?g.g.size:0}function Cu(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function qs(g,A){g.g?g.g.add(A):g.h=A}function or(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}ta.prototype.cancel=function(){if(this.i=Iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Iu(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const C of g.g.values())A=A.concat(C.D);return A}return b(g.i)}function $0(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(c(g)){for(var A=[],C=g.length,L=0;L<C;L++)A.push(g[L]);return A}A=[],C=0;for(L in g)A[C++]=g[L];return A}function Xs(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(c(g)||typeof g=="string"){var A=[];g=g.length;for(var C=0;C<g;C++)A.push(C);return A}A=[],C=0;for(const L in g)A[C++]=L;return A}}}function Nu(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(c(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var C=Xs(g),L=$0(g),Y=L.length,ne=0;ne<Y;ne++)A.call(void 0,L[ne],C&&C[ne],g)}var qo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y0(g,A){if(g){g=g.split("&");for(var C=0;C<g.length;C++){var L=g[C].indexOf("="),Y=null;if(0<=L){var ne=g[C].substring(0,L);Y=g[C].substring(L+1)}else ne=g[C];A(ne,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function on(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof on){this.h=g.h,Xo(this,g.j),this.o=g.o,this.g=g.g,Xa(this,g.s),this.l=g.l;var A=g.i,C=new ra;C.i=A.i,A.g&&(C.g=new Map(A.g),C.h=A.h),na(this,C),this.m=g.m}else g&&(A=String(g).match(qo))?(this.h=!1,Xo(this,A[1]||"",!0),this.o=Lr(A[2]||""),this.g=Lr(A[3]||"",!0),Xa(this,A[4]),this.l=Lr(A[5]||"",!0),na(this,A[6]||"",!0),this.m=Lr(A[7]||"")):(this.h=!1,this.i=new ra(null,this.h))}on.prototype.toString=function(){var g=[],A=this.j;A&&g.push($o(A,Ru,!0),":");var C=this.g;return(C||A=="file")&&(g.push("//"),(A=this.o)&&g.push($o(A,Ru,!0),"@"),g.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&g.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push($o(C,C.charAt(0)=="/"?K0:Ou,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",$o(C,Ws)),g.join("")};function Cr(g){return new on(g)}function Xo(g,A,C){g.j=C?Lr(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function Xa(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function na(g,A,C){A instanceof ra?(g.i=A,Hf(g.i,g.h)):(C||(A=$o(A,Q0)),g.i=new ra(A,g.h))}function xt(g,A,C){g.i.set(A,C)}function Wo(g){return xt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Lr(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function $o(g,A,C){return typeof g=="string"?(g=encodeURI(g).replace(A,Ff),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Ff(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ru=/[#\/\?@]/g,Ou=/[#\?:]/g,K0=/[#\?]/g,Q0=/[#\?@]/g,Ws=/#/g;function ra(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function jr(g){g.g||(g.g=new Map,g.h=0,g.i&&Y0(g.i,function(A,C){g.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}n=ra.prototype,n.add=function(g,A){jr(this),this.i=null,g=Ti(this,g);var C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(A),this.h+=1,this};function ia(g,A){jr(g),A=Ti(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function aa(g,A){return jr(g),A=Ti(g,A),g.g.has(A)}n.forEach=function(g,A){jr(this),this.g.forEach(function(C,L){C.forEach(function(Y){g.call(A,Y,L,this)},this)},this)},n.na=function(){jr(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),C=[];for(let L=0;L<A.length;L++){const Y=g[L];for(let ne=0;ne<Y.length;ne++)C.push(A[L])}return C},n.V=function(g){jr(this);let A=[];if(typeof g=="string")aa(this,g)&&(A=A.concat(this.g.get(Ti(this,g))));else{g=Array.from(this.g.values());for(let C=0;C<g.length;C++)A=A.concat(g[C])}return A},n.set=function(g,A){return jr(this),this.i=null,g=Ti(this,g),aa(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},n.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function Du(g,A,C){ia(g,A),0<C.length&&(g.i=null,g.g.set(Ti(g,A),b(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var C=0;C<A.length;C++){var L=A[C];const ne=encodeURIComponent(String(L)),me=this.V(L);for(L=0;L<me.length;L++){var Y=ne;me[L]!==""&&(Y+="="+encodeURIComponent(String(me[L]))),g.push(Y)}}return this.i=g.join("&")};function Ti(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Hf(g,A){A&&!g.j&&(jr(g),g.i=null,g.g.forEach(function(C,L){var Y=L.toLowerCase();L!=Y&&(ia(this,L),Du(this,Y,C))},g)),g.j=A}function Yo(g,A){const C=new kr;if(u.Image){const L=new Image;L.onload=_(Br,C,"TestLoadImage: loaded",!0,A,L),L.onerror=_(Br,C,"TestLoadImage: error",!1,A,L),L.onabort=_(Br,C,"TestLoadImage: abort",!1,A,L),L.ontimeout=_(Br,C,"TestLoadImage: timeout",!1,A,L),u.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=g}else A(!1)}function ai(g,A){const C=new kr,L=new AbortController,Y=setTimeout(()=>{L.abort(),Br(C,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:L.signal}).then(ne=>{clearTimeout(Y),ne.ok?Br(C,"TestPingServer: ok",!0,A):Br(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Y),Br(C,"TestPingServer: error",!1,A)})}function Br(g,A,C,L,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),L(C)}catch{}}function Ko(){this.g=new Fo}function Si(g,A,C){const L=C||"";try{Nu(g,function(Y,ne){let me=Y;h(Y)&&(me=ri(Y)),A.push(L+ne+"="+encodeURIComponent(me))})}catch(Y){throw A.push(L+"type="+encodeURIComponent("_badmap")),Y}}function Wa(g){this.l=g.Ub||null,this.j=g.eb||!1}E(Wa,_u),Wa.prototype.g=function(){return new oa(this.l,this.j)},Wa.prototype.i=function(g){return function(){return g}}({});function oa(g,A){Je.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(oa,Je),n=oa.prototype,n.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,Ii(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||u).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pu(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pu(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Ci(this):Ii(this),this.readyState==3&&Pu(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Ci(this))},n.Qa=function(g){this.g&&(this.response=g,Ci(this))},n.ga=function(){this.g&&Ci(this)};function Ci(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ii(g)}n.setRequestHeader=function(g,A){this.u.append(g,A)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=A.next();return g.join(`\r
`)};function Ii(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Mu(g){let A="";return X(g,function(C,L){A+=L,A+=":",A+=C,A+=`\r
`}),A}function Cn(g,A,C){e:{for(L in C){var L=!1;break e}L=!0}L||(C=Mu(C),typeof g=="string"?C!=null&&encodeURIComponent(String(C)):xt(g,A,C))}function ft(g){Je.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ft,Je);var $s=/^https?$/i,Qo=["POST","PUT"];n=ft.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,A,C,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ei.g(),this.v=this.o?wu(this.o):wu(Ei),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(ne){zf(this,ne);return}if(g=C||"",C=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Y in L)C.set(Y,L[Y]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ne of L.keys())C.set(ne,L.get(ne));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(C.keys()).find(ne=>ne.toLowerCase()=="content-type"),Y=u.FormData&&g instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Qo,A,void 0))||L||Y||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,me]of C)this.g.setRequestHeader(ne,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zo(this),this.u=!0,this.g.send(g),this.u=!1}catch(ne){zf(this,ne)}};function zf(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,Ys(g),Ni(g)}function Ys(g){g.A||(g.A=!0,Ze(g,"complete"),Ze(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Ze(this,"complete"),Ze(this,"abort"),Ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ni(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ks(this):this.bb())},n.bb=function(){Ks(this)};function Ks(g){if(g.h&&typeof s<"u"&&(!g.v[1]||Vr(g)!=4||g.Z()!=2)){if(g.u&&Vr(g)==4)Sn(g.Ea,0,g);else if(Ze(g,"readystatechange"),Vr(g)==4){g.h=!1;try{const me=g.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var L;if(L=me===0){var Y=String(g.D).match(qo)[1]||null;!Y&&u.self&&u.self.location&&(Y=u.self.location.protocol.slice(0,-1)),L=!$s.test(Y?Y.toLowerCase():"")}C=L}if(C)Ze(g,"complete"),Ze(g,"success");else{g.m=6;try{var ne=2<Vr(g)?g.g.statusText:""}catch{ne=""}g.l=ne+" ["+g.Z()+"]",Ys(g)}}finally{Ni(g)}}}}function Ni(g,A){if(g.g){Zo(g);const C=g.g,L=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||Ze(g,"ready");try{C.onreadystatechange=L}catch{}}}function Zo(g){g.I&&(u.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function Vr(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<Vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Us(A)}};function Gf(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Z0(g){const A={};g=(g.g&&2<=Vr(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<g.length;L++){if(N(g[L]))continue;var C=G(g[L]);const Y=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ne=A[Y]||[];A[Y]=ne,ne.push(C)}D(A,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(g,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||A}function Qs(g){this.Aa=0,this.i=[],this.j=new kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jo("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jo("baseRetryDelayMs",5e3,g),this.cb=Jo("retryDelaySeedMs",1e4,g),this.Wa=Jo("forwardChannelMaxRetries",2,g),this.wa=Jo("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new ta(g&&g.concurrentRequestLimit),this.Da=new Ko,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Qs.prototype,n.la=8,n.G=1,n.connect=function(g,A,C,L){kt(0),this.W=g,this.H=A||{},C&&L!==void 0&&(this.H.OSID=C,this.H.OAID=L),this.F=this.X,this.I=Qf(this,null,this.W),Js(this)};function ku(g){if(qf(g),g.G==3){var A=g.U++,C=Cr(g.I);if(xt(C,"SID",g.K),xt(C,"RID",A),xt(C,"TYPE","terminate"),es(g,C),A=new ar(g,g.j,A),A.L=2,A.v=Wo(Cr(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(A.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=A.v,C=!0),C||(A.g=Zf(A.j,null),A.g.ea(A.v)),A.F=Date.now(),zo(A)}Kf(g)}function Zs(g){g.g&&(ts(g),g.g.cancel(),g.g=null)}function qf(g){Zs(g),g.u&&(u.clearTimeout(g.u),g.u=null),el(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&u.clearTimeout(g.s),g.s=null)}function Js(g){if(!zs(g.h)&&!g.s){g.s=!0;var A=g.Ga;ue||q(),fe||(ue(),fe=!0),Pe.add(A,g),g.B=0}}function J0(g,A){return Gs(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=an(y(g.Ga,g,A),Bu(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Y=new ar(this,this.j,g);let ne=this.o;if(this.S&&(ne?(ne=R(ne),B(ne,this.S)):ne=this.S),this.m!==null||this.O||(Y.H=ne,ne=null),this.P)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var L=this.i[C];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(A+=L,4096<A){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=Xf(this,Y,A),C=Cr(this.I),xt(C,"RID",g),xt(C,"CVER",22),this.D&&xt(C,"X-HTTP-Session-Id",this.D),es(this,C),ne&&(this.O?A="headers="+encodeURIComponent(String(Mu(ne)))+"&"+A:this.m&&Cn(C,this.m,ne)),qs(this.h,Y),this.Ua&&xt(C,"TYPE","init"),this.P?(xt(C,"$req",A),xt(C,"SID","null"),Y.T=!0,ii(Y,C,null)):ii(Y,C,A),this.G=2}}else this.G==3&&(g?Lu(this,g):this.i.length==0||zs(this.h)||Lu(this))};function Lu(g,A){var C;A?C=A.l:C=g.U++;const L=Cr(g.I);xt(L,"SID",g.K),xt(L,"RID",C),xt(L,"AID",g.T),es(g,L),g.m&&g.o&&Cn(L,g.m,g.o),C=new ar(g,g.j,C,g.B+1),g.m===null&&(C.H=g.o),A&&(g.i=A.D.concat(g.i)),A=Xf(g,C,1e3),C.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),qs(g.h,C),ii(C,L,A)}function es(g,A){g.H&&X(g.H,function(C,L){xt(A,L,C)}),g.l&&Nu({},function(C,L){xt(A,L,C)})}function Xf(g,A,C){C=Math.min(g.i.length,C);var L=g.l?y(g.l.Na,g.l,g):null;e:{var Y=g.i;let ne=-1;for(;;){const me=["count="+C];ne==-1?0<C?(ne=Y[0].g,me.push("ofs="+ne)):ne=0:me.push("ofs="+ne);let et=!0;for(let dn=0;dn<C;dn++){let tt=Y[dn].g;const In=Y[dn].map;if(tt-=ne,0>tt)ne=Math.max(0,Y[dn].g-100),et=!1;else try{Si(In,me,"req"+tt+"_")}catch{L&&L(In)}}if(et){L=me.join("&");break e}}}return g=g.i.splice(0,C),A.D=g,L}function Wf(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;ue||q(),fe||(ue(),fe=!0),Pe.add(A,g),g.v=0}}function ju(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=an(y(g.Fa,g),Bu(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,$f(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=an(y(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Zs(this),$f(this))};function ts(g){g.A!=null&&(u.clearTimeout(g.A),g.A=null)}function $f(g){g.g=new ar(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=Cr(g.qa);xt(A,"RID","rpc"),xt(A,"SID",g.K),xt(A,"AID",g.T),xt(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&xt(A,"TO",g.ja),xt(A,"TYPE","xmlhttp"),es(g,A),g.m&&g.o&&Cn(A,g.m,g.o),g.L&&(g.g.I=g.L);var C=g.g;g=g.ia,C.L=1,C.v=Wo(Cr(A)),C.m=null,C.P=!0,ea(C,g)}n.Za=function(){this.C!=null&&(this.C=null,Zs(this),ju(this),kt(19))};function el(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function Yf(g,A){var C=null;if(g.g==A){el(g),ts(g),g.g=null;var L=2}else if(Cu(g.h,A))C=A.D,or(g.h,A),L=1;else return;if(g.G!=0){if(A.o)if(L==1){C=A.m?A.m.length:0,A=Date.now()-A.F;var Y=g.B;L=Fa(),Ze(L,new hn(L,C)),Js(g)}else Wf(g);else if(Y=A.s,Y==3||Y==0&&0<A.X||!(L==1&&J0(g,A)||L==2&&ju(g)))switch(C&&0<C.length&&(A=g.h,A.i=A.i.concat(C)),Y){case 1:sa(g,5);break;case 4:sa(g,10);break;case 3:sa(g,6);break;default:sa(g,2)}}}function Bu(g,A){let C=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(C*=2),C*A}function sa(g,A){if(g.j.info("Error code "+A),A==2){var C=y(g.fb,g),L=g.Xa;const Y=!L;L=new on(L||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Xo(L,"https"),Wo(L),Y?Yo(L.toString(),C):ai(L.toString(),C)}else kt(2);g.G=0,g.l&&g.l.sa(A),Kf(g),qf(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Kf(g){if(g.G=0,g.ka=[],g.l){const A=Iu(g.h);(A.length!=0||g.i.length!=0)&&(T(g.ka,A),T(g.ka,g.i),g.h.i.length=0,b(g.i),g.i.length=0),g.l.ra()}}function Qf(g,A,C){var L=C instanceof on?Cr(C):new on(C);if(L.g!="")A&&(L.g=A+"."+L.g),Xa(L,L.s);else{var Y=u.location;L=Y.protocol,A=A?A+"."+Y.hostname:Y.hostname,Y=+Y.port;var ne=new on(null);L&&Xo(ne,L),A&&(ne.g=A),Y&&Xa(ne,Y),C&&(ne.l=C),L=ne}return C=g.D,A=g.ya,C&&A&&xt(L,C,A),xt(L,"VER",g.la),es(g,L),L}function Zf(g,A,C){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new ft(new Wa({eb:C})):new ft(g.pa),A.Ha(g.J),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jf(){}n=Jf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function tl(){}tl.prototype.g=function(g,A){return new sr(g,A)};function sr(g,A){Je.call(this),this.g=new Qs(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!N(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!N(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new Ri(this)}E(sr,Je),sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sr.prototype.close=function(){ku(this.g)},sr.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.u&&(C={},C.__data__=ri(g),g=C);A.i.push(new Uf(A.Ya++,g)),A.G==3&&Js(A)},sr.prototype.N=function(){this.g.l=null,delete this.j,ku(this.g),delete this.g,sr.aa.N.call(this)};function eh(g){Zi.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const C in A){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}E(eh,Zi);function th(){Au.call(this),this.status=1}E(th,Au);function Ri(g){this.g=g}E(Ri,Jf),Ri.prototype.ua=function(){Ze(this.g,"a")},Ri.prototype.ta=function(g){Ze(this.g,new eh(g))},Ri.prototype.sa=function(g){Ze(this.g,new th)},Ri.prototype.ra=function(){Ze(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,sr.prototype.send=sr.prototype.o,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,NT=function(){return new tl},IT=function(){return Fa()},CT=wi,rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ga.NO_ERROR=0,Ga.TIMEOUT=8,Ga.HTTP_ERROR=6,Id=Ga,Ji.COMPLETE="complete",ST=Ji,Eu.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Bc=Eu,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,TT=ft}).apply(typeof ad<"u"?ad:typeof self<"u"?self:typeof window<"u"?window:{});const mw="@firebase/firestore",gw="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new jg("@firebase/firestore");function Dl(){return Ds.logLevel}function _e(n,...e){if(Ds.logLevel<=Ke.DEBUG){const t=e.map(lv);Ds.debug(`Firestore (${hu}): ${n}`,...t)}}function ka(n,...e){if(Ds.logLevel<=Ke.ERROR){const t=e.map(lv);Ds.error(`Firestore (${hu}): ${n}`,...t)}}function Xl(n,...e){if(Ds.logLevel<=Ke.WARN){const t=e.map(lv);Ds.warn(`Firestore (${hu}): ${n}`,...t)}}function lv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,RT(n,r,t)}function RT(n,e,t){let r=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ka(r),new Error(r)}function dt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||RT(e,i,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends ja{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(er.UNAUTHENTICATED))}shutdown(){}}class PD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class MD{constructor(e){this.t=e,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new Co;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Co,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Co)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new OT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new er(e)}}class kD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new kD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ht(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const r=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=BD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function qe(n,e){return n<e?-1:n>e?1:0}function ig(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return qe(r,i);{const a=DT(),s=VD(a.encode(yw(n,t)),a.encode(yw(e,t)));return s!==0?s:qe(r,i)}}t+=r>65535?2:1}return qe(n.length,e.length)}function yw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function VD(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return qe(n[t],e[t]);return qe(n.length,e.length)}function Wl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=-62135596800,_w=1e6;class bn{static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*_w);return new bn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xw)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_w}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-xw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new bn(0,0))}static max(){return new Le(new bn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="__name__";class Bi{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Bi.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const r=Bi.isNumericId(e),i=Bi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):ig(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return So.fromString(e.substring(4,e.length-2))}}class Yt extends Bi{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const UD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends Bi{construct(e,t,r){return new Wn(e,t,r)}static isValidIdentifier(e){return UD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ww}static keyField(){return new Wn([ww])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(a(),i++)}if(a(),s)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Yt.fromString(e))}static fromName(e){return new Oe(Yt.fromString(e).popFirst(5))}static empty(){return new Oe(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Yt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=-1;function FD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new bn(t+1,0):new bn(t,r));return new Ro(i,Oe.empty(),e)}function HD(n){return new Ro(n.readTime,n.key,sf)}class Ro{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ro(Le.min(),Oe.empty(),sf)}static max(){return new Ro(Le.max(),Oe.empty(),sf)}}function zD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==GD)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,s=!1;e.forEach(u=>{++i,u.next(()=>{++a,s&&a===i&&t()},c=>r(c))}),s=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,s=new Array(a);let u=0;for(let c=0;c<a;c++){const h=c;t(e[h]).next(p=>{s[h]=p,++u,u===a&&r(s)},p=>i(p))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function XD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}R0.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=-1;function O0(n){return n==null}function Wd(n){return n===0&&1/n==-1/0}function WD(n){return typeof n=="number"&&Number.isInteger(n)&&!Wd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="";function $D(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ew(e)),e=YD(n.get(t),e);return Ew(e)}function YD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case MT:t+="";break;default:t+=a}}return t}function Ew(n){return n+MT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ks(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t){this.comparator=e,this.root=t||Xn.EMPTY}insert(e,t){return new Gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new od(this.root,e,this.comparator,!1)}getReverseIterator(){return new od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new od(this.root,e,this.comparator,!0)}}class od{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Xn.RED,this.left=i??Xn.EMPTY,this.right=a??Xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Xn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bw(this.data.getIterator())}getIteratorFrom(e){return new bw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class bw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new pi([])}unionWith(e){let t=new Tn(Wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new pi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new LT("Invalid base64 string: "+a):a}}(e);return new Yn(t)}static fromUint8Array(e){const t=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new Yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const KD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const t=KD.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Do(n){return typeof n=="string"?Yn.fromBase64String(n):Yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="server_timestamp",BT="__type__",VT="__previous_value__",UT="__local_write_time__";function cv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[BT])===null||t===void 0?void 0:t.stringValue)===jT}function D0(n){const e=n.mapValue.fields[VT];return cv(e)?D0(e):e}function lf(n){const e=Oo(n.mapValue.fields[UT].timestampValue);return new bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,r,i,a,s,u,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=p}}const $d="(default)";class uf{constructor(e,t){this.projectId=e,this.database=t||$d}static empty(){return new uf("","")}get isDefaultDatabase(){return this.database===$d}isEqual(e){return e instanceof uf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="__type__",ZD="__max__",sd={mapValue:{}},HT="__vector__",Yd="value";function Po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cv(n)?4:e7(n)?9007199254740991:JD(n)?10:11:ke(28295,{value:n})}function Gi(n,e){if(n===e)return!0;const t=Po(n);if(t!==Po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lf(n).isEqual(lf(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Oo(i.timestampValue),u=Oo(a.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Do(i.bytesValue).isEqual(Do(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return nn(i.geoPointValue.latitude)===nn(a.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return nn(i.integerValue)===nn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=nn(i.doubleValue),u=nn(a.doubleValue);return s===u?Wd(s)===Wd(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return Wl(n.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},u=a.mapValue.fields||{};if(Aw(s)!==Aw(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!Gi(s[c],u[c])))return!1;return!0}(n,e);default:return ke(52216,{left:n})}}function cf(n,e){return(n.values||[]).find(t=>Gi(t,e))!==void 0}function $l(n,e){if(n===e)return 0;const t=Po(n),r=Po(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return function(a,s){const u=nn(a.integerValue||a.doubleValue),c=nn(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return Tw(n.timestampValue,e.timestampValue);case 4:return Tw(lf(n),lf(e));case 5:return ig(n.stringValue,e.stringValue);case 6:return function(a,s){const u=Do(a),c=Do(s);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,s){const u=a.split("/"),c=s.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=qe(u[h],c[h]);if(p!==0)return p}return qe(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,s){const u=qe(nn(a.latitude),nn(s.latitude));return u!==0?u:qe(nn(a.longitude),nn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Sw(n.arrayValue,e.arrayValue);case 10:return function(a,s){var u,c,h,p;const m=a.fields||{},y=s.fields||{},_=(u=m[Yd])===null||u===void 0?void 0:u.arrayValue,E=(c=y[Yd])===null||c===void 0?void 0:c.arrayValue,b=qe(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:Sw(_,E)}(n.mapValue,e.mapValue);case 11:return function(a,s){if(a===sd.mapValue&&s===sd.mapValue)return 0;if(a===sd.mapValue)return 1;if(s===sd.mapValue)return-1;const u=a.fields||{},c=Object.keys(u),h=s.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=ig(c[m],p[m]);if(y!==0)return y;const _=$l(u[c[m]],h[p[m]]);if(_!==0)return _}return qe(c.length,p.length)}(n.mapValue,e.mapValue);default:throw ke(23264,{Pe:t})}}function Tw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Oo(n),r=Oo(e),i=qe(t.seconds,r.seconds);return i!==0?i:qe(t.nanos,r.nanos)}function Sw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=$l(t[i],r[i]);if(a)return a}return qe(t.length,r.length)}function Yl(n){return ag(n)}function ag(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Oo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Do(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Oe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=ag(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${ag(t.fields[s])}`;return i+"}"}(n.mapValue):ke(61005,{value:n})}function Nd(n){switch(Po(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=D0(n);return e?16+Nd(e):16;case 5:return 2*n.stringValue.length;case 6:return Do(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Nd(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ks(r.fields,(a,s)=>{i+=a.length+Nd(s)}),i}(n.mapValue);default:throw ke(13486,{value:n})}}function og(n){return!!n&&"integerValue"in n}function fv(n){return!!n&&"arrayValue"in n}function Cw(n){return!!n&&"nullValue"in n}function Iw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rd(n){return!!n&&"mapValue"in n}function JD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[FT])===null||t===void 0?void 0:t.stringValue)===HT}function Yc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ks(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function e7(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Wn.emptyPath(),r={},i=[];e.forEach((s,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}s?r[u.lastSegment()]=Yc(s):i.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Rd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ks(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new $r(Yc(this.value))}}function zT(n){const e=[];return ks(n.fields,(t,r)=>{const i=new Wn([t]);if(Rd(r)){const a=zT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t,r,i,a,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=u}static newInvalidDocument(e){return new tr(e,0,Le.min(),Le.min(),Le.min(),$r.empty(),0)}static newFoundDocument(e,t,r,i){return new tr(e,1,t,Le.min(),r,i,0)}static newNoDocument(e,t){return new tr(e,2,t,Le.min(),Le.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,Le.min(),Le.min(),$r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t){this.position=e,this.inclusive=t}}function Nw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=Oe.comparator(Oe.fromName(s.referenceValue),t.key):r=$l(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function t7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{}class wn extends GT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new r7(e,t,r):t==="array-contains"?new o7(e,r):t==="in"?new s7(e,r):t==="not-in"?new l7(e,r):t==="array-contains-any"?new u7(e,r):new wn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new i7(e,r):new a7(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($l(t,this.value)):t!==null&&Po(this.value)===Po(t)&&this.matchesComparison($l(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends GT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new qi(e,t)}matches(e){return qT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function qT(n){return n.op==="and"}function XT(n){return n7(n)&&qT(n)}function n7(n){for(const e of n.filters)if(e instanceof qi)return!1;return!0}function sg(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+Yl(n.value);if(XT(n))return n.filters.map(e=>sg(e)).join(",");{const e=n.filters.map(t=>sg(t)).join(",");return`${n.op}(${e})`}}function WT(n,e){return n instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.field.isEqual(i.field)&&Gi(r.value,i.value)}(n,e):n instanceof qi?function(r,i){return i instanceof qi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,u)=>a&&WT(s,i.filters[u]),!0):!1}(n,e):void ke(19439)}function $T(n){return n instanceof wn?function(t){return`${t.field.canonicalString()} ${t.op} ${Yl(t.value)}`}(n):n instanceof qi?function(t){return t.op.toString()+" {"+t.getFilters().map($T).join(" ,")+"}"}(n):"Filter"}class r7 extends wn{constructor(e,t,r){super(e,t,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class i7 extends wn{constructor(e,t){super(e,"in",t),this.keys=YT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class a7 extends wn{constructor(e,t){super(e,"not-in",t),this.keys=YT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class o7 extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fv(t)&&cf(t.arrayValue,this.value)}}class s7 extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cf(this.value.arrayValue,t)}}class l7 extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(cf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cf(this.value.arrayValue,t)}}class u7 extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,t=null,r=[],i=[],a=null,s=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=u,this.Ie=null}}function Ow(n,e=null,t=[],r=[],i=null,a=null,s=null){return new c7(n,e,t,r,i,a,s)}function hv(n){const e=Be(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),O0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yl(r)).join(",")),e.Ie=t}return e.Ie}function dv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!t7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rw(n.startAt,e.startAt)&&Rw(n.endAt,e.endAt)}function lg(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t=null,r=[],i=[],a=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=u,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function f7(n,e,t,r,i,a,s,u){return new P0(n,e,t,r,i,a,s,u)}function pv(n){return new P0(n)}function Dw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function h7(n){return n.collectionGroup!==null}function Kc(n){const e=Be(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new Tn(Wn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Qd(a,r))}),t.has(Wn.keyField().canonicalString())||e.Ee.push(new Qd(Wn.keyField(),r))}return e.Ee}function Fi(n){const e=Be(n);return e.de||(e.de=d7(e,Kc(n))),e.de}function d7(n,e){if(n.limitType==="F")return Ow(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Qd(i.field,a)});const t=n.endAt?new Kd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Kd(n.startAt.position,n.startAt.inclusive):null;return Ow(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ug(n,e,t){return new P0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function M0(n,e){return dv(Fi(n),Fi(e))&&n.limitType===e.limitType}function KT(n){return`${hv(Fi(n))}|lt:${n.limitType}`}function Pl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$T(i)).join(", ")}]`),O0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Yl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Yl(i)).join(",")),`Target(${r})`}(Fi(n))}; limitType=${n.limitType})`}function k0(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Oe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of Kc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,u,c){const h=Nw(s,u,c);return s.inclusive?h<=0:h<0}(r.startAt,Kc(r),i)||r.endAt&&!function(s,u,c){const h=Nw(s,u,c);return s.inclusive?h>=0:h>0}(r.endAt,Kc(r),i))}(n,e)}function p7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QT(n){return(e,t)=>{let r=!1;for(const i of Kc(n)){const a=m7(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function m7(n,e,t){const r=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(a,s,u){const c=s.data.field(a),h=u.data.field(a);return c!==null&&h!==null?$l(c,h):ke(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return kT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=new Gt(Oe.comparator);function La(){return g7}const ZT=new Gt(Oe.comparator);function Vc(...n){let e=ZT;for(const t of n)e=e.insert(t.key,t);return e}function JT(n){let e=ZT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bs(){return Qc()}function eS(){return Qc()}function Qc(){return new Ls(n=>n.toString(),(n,e)=>n.isEqual(e))}const v7=new Gt(Oe.comparator),y7=new Tn(Oe.comparator);function Qe(...n){let e=y7;for(const t of n)e=e.add(t);return e}const x7=new Tn(qe);function _7(){return x7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function tS(n){return{integerValue:""+n}}function w7(n,e){return WD(e)?tS(e):mv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this._=void 0}}function E7(n,e,t){return n instanceof ff?function(i,a){const s={fields:{[BT]:{stringValue:jT},[UT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&cv(a)&&(a=D0(a)),a&&(s.fields[VT]=a),{mapValue:s}}(t,e):n instanceof hf?rS(n,e):n instanceof df?iS(n,e):function(i,a){const s=nS(i,a),u=Pw(s)+Pw(i.Re);return og(s)&&og(i.Re)?tS(u):mv(i.serializer,u)}(n,e)}function A7(n,e,t){return n instanceof hf?rS(n,e):n instanceof df?iS(n,e):t}function nS(n,e){return n instanceof Zd?function(r){return og(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class ff extends L0{}class hf extends L0{constructor(e){super(),this.elements=e}}function rS(n,e){const t=aS(e);for(const r of n.elements)t.some(i=>Gi(i,r))||t.push(r);return{arrayValue:{values:t}}}class df extends L0{constructor(e){super(),this.elements=e}}function iS(n,e){let t=aS(e);for(const r of n.elements)t=t.filter(i=>!Gi(i,r));return{arrayValue:{values:t}}}class Zd extends L0{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Pw(n){return nn(n.integerValue||n.doubleValue)}function aS(n){return fv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,t){this.field=e,this.transform=t}}function T7(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof hf&&i instanceof hf||r instanceof df&&i instanceof df?Wl(r.elements,i.elements,Gi):r instanceof Zd&&i instanceof Zd?Gi(r.Re,i.Re):r instanceof ff&&i instanceof ff}(n.transform,e.transform)}class S7{constructor(e,t){this.version=e,this.transformResults=t}}class Ra{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ra}static exists(e){return new Ra(void 0,e)}static updateTime(e){return new Ra(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class j0{}function oS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lS(n.key,Ra.none()):new If(n.key,n.data,Ra.none());{const t=n.data,r=$r.empty();let i=new Tn(Wn.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new js(n.key,r,new pi(i.toArray()),Ra.none())}}function C7(n,e,t){n instanceof If?function(i,a,s){const u=i.value.clone(),c=kw(i.fieldTransforms,a,s.transformResults);u.setAll(c),a.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof js?function(i,a,s){if(!Od(i.precondition,a))return void a.convertToUnknownDocument(s.version);const u=kw(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(sS(i)),c.setAll(u),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Zc(n,e,t,r){return n instanceof If?function(a,s,u,c){if(!Od(a.precondition,s))return u;const h=a.value.clone(),p=Lw(a.fieldTransforms,c,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof js?function(a,s,u,c){if(!Od(a.precondition,s))return u;const h=Lw(a.fieldTransforms,c,s),p=s.data;return p.setAll(sS(a)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(a,s,u){return Od(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(n,e,t)}function I7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=nS(r.transform,i||null);a!=null&&(t===null&&(t=$r.empty()),t.set(r.field,a))}return t||null}function Mw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wl(r,i,(a,s)=>T7(a,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class If extends j0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class js extends j0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function sS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kw(n,e,t){const r=new Map;dt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,u=e.data.field(a.field);r.set(a.field,A7(s,u,t[i]))}return r}function Lw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,E7(a,s,e))}return r}class lS extends j0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N7 extends j0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&C7(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eS();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let u=this.applyToLocalView(s,a.mutatedFields);u=t.has(i.key)?null:u;const c=oS(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,(t,r)=>Mw(t,r))&&Wl(this.baseMutations,e.baseMutations,(t,r)=>Mw(t,r))}}class gv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){dt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return v7}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new gv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un,rt;function P7(n){switch(n){case he.OK:return ke(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function uS(n){if(n===void 0)return ka("GRPC error has no .code"),he.UNKNOWN;switch(n){case un.OK:return he.OK;case un.CANCELLED:return he.CANCELLED;case un.UNKNOWN:return he.UNKNOWN;case un.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case un.INTERNAL:return he.INTERNAL;case un.UNAVAILABLE:return he.UNAVAILABLE;case un.UNAUTHENTICATED:return he.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case un.NOT_FOUND:return he.NOT_FOUND;case un.ALREADY_EXISTS:return he.ALREADY_EXISTS;case un.PERMISSION_DENIED:return he.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case un.ABORTED:return he.ABORTED;case un.OUT_OF_RANGE:return he.OUT_OF_RANGE;case un.UNIMPLEMENTED:return he.UNIMPLEMENTED;case un.DATA_LOSS:return he.DATA_LOSS;default:return ke(39323,{code:n})}}(rt=un||(un={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new So([4294967295,4294967295],0);function jw(n){const e=DT().encode(n),t=new bT;return t.update(e),new Uint8Array(t.digest())}function Bw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new So([t,r],0),new So([i,a],0)]}class vv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Uc(`Invalid padding: ${t}`);if(r<0)throw new Uc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Uc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=So.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(So.fromNumber(r)));return i.compare(M7)===1&&(i=new So([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=jw(e),[r,i]=Bw(t);for(let a=0;a<this.hashCount;a++){const s=this.we(r,i,a);if(!this.Se(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new vv(a,i,t);return r.forEach(u=>s.insert(u)),s}insert(e){if(this.pe===0)return;const t=jw(e),[r,i]=Bw(t);for(let a=0;a<this.hashCount;a++){const s=this.we(r,i,a);this.be(s)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Nf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new B0(Le.min(),i,new Gt(qe),La(),Qe())}}class Nf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nf(r,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class cS{constructor(e,t){this.targetId=e,this.Ce=t}}class fS{constructor(e,t,r=Yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Vw{constructor(){this.Fe=0,this.Me=Uw(),this.xe=Yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Qe(),t=Qe(),r=Qe();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke(38017,{changeType:a})}}),new Nf(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Uw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,dt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class k7{constructor(e){this.ze=e,this.je=new Map,this.He=La(),this.Je=ld(),this.Ye=ld(),this.Ze=new Gt(qe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(lg(a))if(r===0){const s=new Oe(a.path);this.tt(t,s,tr.newNoDocument(s,Le.min()))}else dt(r===1,20013,{expectedCount:r});else{const s=this.ut(t);if(s!==r){const u=this.ct(e),c=u?this.lt(u,e,s):1;if(c!==0){this.st(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,u;try{s=Do(r).toUint8Array()}catch(c){if(c instanceof LT)return Xl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new vv(s,i,a)}catch(c){return Xl(c instanceof Uc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.pe===0?null:u}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const s=this.ze.Pt(),u=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,s)=>{const u=this._t(s);if(u){if(a.current&&lg(u.target)){const c=new Oe(u.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,tr.newNoDocument(c,e))}a.Le&&(t.set(s,a.qe()),a.Qe())}});let r=Qe();this.Ye.forEach((a,s)=>{let u=!0;s.forEachWhile(c=>{const h=this._t(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.He.forEach((a,s)=>s.setReadTime(e));const i=new B0(e,t,this.Ze,this.He,r);return this.He=La(),this.Je=ld(),this.Ye=ld(),this.Ze=new Gt(qe),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Vw,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Tn(qe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Tn(qe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Vw),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ld(){return new Gt(Oe.comparator)}function Uw(){return new Gt(Oe.comparator)}const L7={asc:"ASCENDING",desc:"DESCENDING"},j7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B7={and:"AND",or:"OR"};class V7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cg(n,e){return n.useProto3Json||O0(e)?e:{value:e}}function Jd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function U7(n,e){return Jd(n,e.toTimestamp())}function Hi(n){return dt(!!n,49232),Le.fromTimestamp(function(t){const r=Oo(t);return new bn(r.seconds,r.nanos)}(n))}function yv(n,e){return fg(n,e).canonicalString()}function fg(n,e){const t=function(i){return new Yt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dS(n){const e=Yt.fromString(n);return dt(yS(e),10190,{key:e.toString()}),e}function hg(n,e){return yv(n.databaseId,e.path)}function dm(n,e){const t=dS(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(mS(t))}function pS(n,e){return yv(n.databaseId,e)}function F7(n){const e=dS(n);return e.length===4?Yt.emptyPath():mS(e)}function dg(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mS(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Fw(n,e,t){return{name:hg(n,e),fields:t.value.mapValue.fields}}function H7(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(h,p){return h.useProto3Json?(dt(p===void 0||typeof p=="string",58123),Yn.fromBase64String(p||"")):(dt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Yn.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(h){const p=h.code===void 0?he.UNKNOWN:uS(h.code);return new Re(p,h.message||"")}(s);t=new fS(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=dm(n,r.document.name),a=Hi(r.document.updateTime),s=r.document.createTime?Hi(r.document.createTime):Le.min(),u=new $r({mapValue:{fields:r.document.fields}}),c=tr.newFoundDocument(i,a,s,u),h=r.targetIds||[],p=r.removedTargetIds||[];t=new Dd(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=dm(n,r.document),a=r.readTime?Hi(r.readTime):Le.min(),s=tr.newNoDocument(i,a),u=r.removedTargetIds||[];t=new Dd([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=dm(n,r.document),a=r.removedTargetIds||[];t=new Dd([],a,i,null)}else{if(!("filter"in e))return ke(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new D7(i,a),u=r.targetId;t=new cS(u,s)}}return t}function z7(n,e){let t;if(e instanceof If)t={update:Fw(n,e.key,e.value)};else if(e instanceof lS)t={delete:hg(n,e.key)};else if(e instanceof js)t={update:Fw(n,e.key,e.data),updateMask:Z7(e.fieldMask)};else{if(!(e instanceof N7))return ke(16599,{ft:e.type});t={verify:hg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const u=s.transform;if(u instanceof ff)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof df)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zd)return{fieldPath:s.field.canonicalString(),increment:u.Re};throw ke(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:U7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)}(n,e.precondition)),t}function G7(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map(t=>function(i,a){let s=i.updateTime?Hi(i.updateTime):Hi(a);return s.isEqual(Le.min())&&(s=Hi(a)),new S7(s,i.transformResults||[])}(t,e))):[]}function q7(n,e){return{documents:[pS(n,e.path)]}}function X7(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=pS(n,i);const a=function(h){if(h.length!==0)return vS(qi.create(h,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const s=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:Ml(y.field),direction:Y7(y.dir)}}(p))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=cg(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:t,parent:i}}function W7(n){let e=F7(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){dt(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=function(m){const y=gS(m);return y instanceof qi&&XT(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(m){return m.map(y=>function(E){return new Qd(kl(E.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(y))}(t.orderBy));let u=null;t.limit&&(u=function(m){let y;return y=typeof m=="object"?m.value:m,O0(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(m){const y=!!m.before,_=m.values||[];return new Kd(_,y)}(t.startAt));let h=null;return t.endAt&&(h=function(m){const y=!m.before,_=m.values||[];return new Kd(_,y)}(t.endAt)),f7(e,i,s,a,u,"F",c,h)}function $7(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=kl(t.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=kl(t.unaryFilter.field);return wn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=kl(t.unaryFilter.field);return wn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=kl(t.unaryFilter.field);return wn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(n):n.fieldFilter!==void 0?function(t){return wn.create(kl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return qi.create(t.compositeFilter.filters.map(r=>gS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(t.compositeFilter.op))}(n):ke(30097,{filter:n})}function Y7(n){return L7[n]}function K7(n){return j7[n]}function Q7(n){return B7[n]}function Ml(n){return{fieldPath:n.canonicalString()}}function kl(n){return Wn.fromServerFormat(n.fieldPath)}function vS(n){return n instanceof wn?function(t){if(t.op==="=="){if(Iw(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(Cw(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Iw(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(Cw(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:K7(t.op),value:t.value}}}(n):n instanceof qi?function(t){const r=t.getFilters().map(i=>vS(i));return r.length===1?r[0]:{compositeFilter:{op:Q7(t.op),filters:r}}}(n):ke(54877,{filter:n})}function Z7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,r,i,a=Le.min(),s=Le.min(),u=Yn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new _o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.wt=e}}function eP(n){const e=W7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.Cn=new nP}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ro.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ro.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class nP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(Yt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xS=41943040;class _r{static withCacheSize(e){return new _r(e,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(xS,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Kl(0)}static lr(){return new Kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="LruGarbageCollector",rP=1048576;function Gw([n,e],[t,r]){const i=qe(n,t);return i===0?qe(e,r):i}class iP{constructor(e){this.Er=e,this.buffer=new Tn(Gw),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Gw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){_e(zw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pu(t)?_e(zw,"Ignoring IndexedDB error during garbage collection: ",t):await du(t)}await this.mr(3e5)})}}class oP{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return le.resolve(R0.le);const r=new iP(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Hw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hw):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,s,u,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,u=Date.now(),this.removeTargets(e,r,t))).next(m=>(a=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Dl()<=Ke.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(u-s)+`ms
	Removed ${a} targets in `+(c-u)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m})))}}function sP(n,e){return new oP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.changes=new Ls(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zc(r.mutation,i,pi.empty(),bn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qe()){const i=bs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let s=Vc();return a.forEach((u,c)=>{s=s.insert(u,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=bs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qe()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,u)=>{t.set(s,u)})})}computeViews(e,t,r,i){let a=La();const s=Qc(),u=function(){return Qc()}();return t.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof js)?a=a.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),Zc(p.mutation,h,p.mutation.getFieldMask(),bn.now())):s.set(h.key,pi.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((h,p)=>s.set(h,p)),t.forEach((h,p)=>{var m;return u.set(h,new uP(p,(m=s.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Qc();let i=new Gt((s,u)=>s-u),a=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const u of s)u.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let p=r.get(c)||pi.empty();p=u.applyToLocalView(h,p),r.set(c,p);const m=(i.get(u.batchId)||Qe()).add(c);i=i.insert(u.batchId,m)})}).next(()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,m=eS();p.forEach(y=>{if(!a.has(y)){const _=oS(t.get(y),r.get(y));_!==null&&m.set(y,_),a=a.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,m))}return le.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):h7(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(bs());let u=sf,c=a;return s.next(h=>le.forEach(h,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),a.get(p)?le.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,c,h,Qe())).next(p=>({batchId:u,changes:JT(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(r=>{let i=Vc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=Vc();return this.indexManager.getCollectionParents(e,a).next(u=>le.forEach(u,c=>{const h=function(m,y){return new P0(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,y)=>{s=s.insert(m,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(s=>{a.forEach((c,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,tr.newInvalidDocument(p)))});let u=Vc();return s.forEach((c,h)=>{const p=a.get(c);p!==void 0&&Zc(p.mutation,h,pi.empty(),bn.now()),k0(t,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return le.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Hi(i.createTime)}}(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:eP(i.bundledQuery),readTime:Hi(i.readTime)}}(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.overlays=new Gt(Oe.comparator),this.Qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bs();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.bt(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=bs(),a=t.length+1,s=new Oe(t.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Gt((h,p)=>h-p);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=bs(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=bs(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=i)););return le.resolve(u)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new O7(t,r));let a=this.Qr.get(t);a===void 0&&(a=Qe(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.$r=new Tn(kn.Ur),this.Kr=new Tn(kn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new kn(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new kn(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Oe(new Yt([])),r=new kn(t,e),i=new kn(t,e+1),a=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),a.push(s.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Oe(new Yt([])),r=new kn(t,e),i=new kn(t,e+1);let a=Qe();return this.Kr.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const t=new kn(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class kn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Oe.comparator(e.key,t.key)||qe(e.Zr,t.Zr)}static Wr(e,t){return qe(e.Zr,t.Zr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Tn(kn.Ur)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new R7(a,t,r,i);this.mutationQueue.push(s);for(const u of i)this.Xr=this.Xr.add(new kn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return le.resolve(s)}lookupMutationBatch(e,t){return le.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?uv:this.nr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kn(t,0),i=new kn(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],s=>{const u=this.ei(s.Zr);a.push(u)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(qe);return t.forEach(i=>{const a=new kn(i,0),s=new kn(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,s],u=>{r=r.add(u.Zr)})}),le.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Oe.isDocumentKey(a)||(a=a.child(""));const s=new kn(new Oe(a),0);let u=new Tn(qe);return this.Xr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.Zr)),!0)},s),le.resolve(this.ni(u))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){dt(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return le.forEach(t.mutations,i=>{const a=new kn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new kn(t,0),i=this.Xr.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.ii=e,this.docs=function(){return new Gt(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=La();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=La();const s=t.path,u=new Oe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||zD(HD(p),r)<=0||(i.has(p.key)||k0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ke(9500)}si(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gP(this)}getSize(e){return le.resolve(this.size)}}class gP extends lP{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.persistence=e,this.oi=new Ls(t=>hv(t),dv),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this._i=0,this.ai=new xv,this.targetCount=0,this.ui=Kl.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),le.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Kl(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Tr(t),le.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((s,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.oi.delete(s),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t){this.ci={},this.overlays={},this.li=new R0(0),this.hi=!1,this.hi=!0,this.Pi=new dP,this.referenceDelegate=e(this),this.Ti=new vP(this),this.indexManager=new tP,this.remoteDocumentCache=function(i){return new mP(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new J7(t),this.Ei=new fP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new pP(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new yP(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return le.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class yP extends qD{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.Vi=new xv,this.mi=null}static fi(e){return new _v(e)}get gi(){if(this.mi)return this.mi;throw ke(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.gi,r=>{const i=Oe.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Le.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return le.or([()=>le.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class e0{constructor(e,t){this.persistence=e,this.yi=new Ls(r=>$D(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=sP(this,t)}static fi(e,t){return new e0(e,t)}di(){}Ai(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return le.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?le.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,t).next(u=>{u||(r++,a.removeEntry(s,Le.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),le.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nd(e.data.value)),t}Dr(e,t,r){return le.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return le.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=Qe(),i=Qe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new wv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return lN()?8:XD(rr())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.Ss(e,t,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new xP;return this.bs(e,t,s).next(u=>{if(a.result=u,this.fs)return this.Ds(e,t,s,u.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Dl()<=Ke.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),le.resolve()):(Dl()<=Ke.DEBUG&&_e("QueryEngine","Query:",Pl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Dl()<=Ke.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):le.resolve())}ws(e,t){if(Dw(t))return le.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ug(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=Qe(...a);return this.ys.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.vs(t,u);return this.Cs(t,h,s,c.readTime)?this.ws(e,ug(t,null,"F")):this.Fs(e,h,t,c)}))})))}Ss(e,t,r,i){return Dw(t)||i.isEqual(Le.min())?le.resolve(null):this.ys.getDocuments(e,r).next(a=>{const s=this.vs(t,a);return this.Cs(t,s,r,i)?le.resolve(null):(Dl()<=Ke.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pl(t)),this.Fs(e,s,t,FD(i,sf)).next(u=>u))})}vs(e,t){let r=new Tn(QT(e));return t.forEach((i,a)=>{k0(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}bs(e,t,r){return Dl()<=Ke.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Pl(t)),this.ys.getDocumentsMatchingQuery(e,t,Ro.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="LocalStore",wP=3e8;class EP{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Gt(qe),this.Os=new Ls(a=>hv(a),dv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function AP(n,e,t,r){return new EP(n,e,t,r)}async function wS(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],u=[];let c=Qe();for(const h of i){s.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of a){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(r,c).next(h=>({ks:h,removedBatchIds:s,addedBatchIds:u}))})})}function bP(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const m=h.batch,y=m.keys();let _=le.resolve();return y.forEach(E=>{_=_.next(()=>p.getEntry(c,E)).next(b=>{const T=h.docVersions.get(E);dt(T!==null,48541),b.version.compareTo(T)<0&&(m.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),p.addEntry(b)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=Qe();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ES(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function TP(n,e){const t=Be(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const u=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;u.push(t.Ti.removeMatchingKeys(a,p.removedDocuments,m).next(()=>t.Ti.addMatchingKeys(a,p.addedDocuments,m)));let _=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(Yn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),i=i.insert(m,_),function(b,T,S){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=wP?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,_,p)&&u.push(t.Ti.updateTargetData(a,_))});let c=La(),h=Qe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(SP(a,s,e.documentUpdates).next(p=>{c=p.qs,h=p.Qs})),!r.isEqual(Le.min())){const p=t.Ti.getLastRemoteSnapshotVersion(a).next(m=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(p)}return le.waitFor(u).next(()=>s.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,h)).next(()=>c)}).then(a=>(t.xs=i,a))}function SP(n,e,t){let r=Qe(),i=Qe();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let s=La();return t.forEach((u,c)=>{const h=a.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Le.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):_e(Ev,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{qs:s,Qs:i}})}function CP(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IP(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Ti.allocateTargetId(r).next(s=>(i=new _o(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function pg(n,e,t){const r=Be(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pu(s))throw s;_e(Ev,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function qw(n,e,t){const r=Be(n);let i=Le.min(),a=Qe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,h,p){const m=Be(c),y=m.Os.get(p);return y!==void 0?le.resolve(m.xs.get(y)):m.Ti.getTargetData(h,p)}(r,s,Fi(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,u.targetId).next(c=>{a=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,t?i:Le.min(),t?a:Qe())).next(u=>(NP(r,p7(e),u),{documents:u,$s:a})))}function NP(n,e,t){let r=n.Ns.get(e)||Le.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class Xw{constructor(){this.activeTargetIds=_7()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RP{constructor(){this.xo=new Xw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Xw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="ConnectivityMonitor";class $w{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){_e(Ww,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){_e(Ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function mg(){return ud===null?ud=function(){return 268435456+Math.round(2147483648*Math.random())}():ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",DP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===$d?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const s=mg(),u=this.jo(e,t.toUriEncodedString());_e(pm,`Sending RPC '${e}' ${s}:`,u,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,a);const{host:h}=new URL(u),p=_f(h);return this.Jo(e,u,c,r,p).then(m=>(_e(pm,`Received RPC '${e}' ${s}: `,m),m),m=>{throw Xl(pm,`RPC '${e}' ${s} failed with error: `,m,"url: ",u,"request:",r),m})}Yo(e,t,r,i,a,s){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=DP[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection";class kP extends PP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const s=mg();return new Promise((u,c)=>{const h=new TT;h.setWithCredentials(!0),h.listenOnce(ST.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Id.NO_ERROR:const m=h.getResponseJson();_e(Zn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),u(m);break;case Id.TIMEOUT:_e(Zn,`RPC '${e}' ${s} timed out`),c(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:const y=h.getStatus();if(_e(Zn,`RPC '${e}' ${s} failed with status:`,y,"response text:",h.getResponseText()),y>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const b=function(S){const N=S.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(N)>=0?N:he.UNKNOWN}(E.status);c(new Re(b,E.message))}else c(new Re(he.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Re(he.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:s,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{_e(Zn,`RPC '${e}' ${s} completed.`)}});const p=JSON.stringify(i);_e(Zn,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",p,r,15)})}T_(e,t,r){const i=mg(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=NT(),u=IT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=a.join("");_e(Zn,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=s.createWebChannel(p,c);let y=!1,_=!1;const E=new MP({Zo:T=>{_?_e(Zn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(y||(_e(Zn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),_e(Zn,`RPC '${e}' stream ${i} sending:`,T),m.send(T))},Xo:()=>m.close()}),b=(T,S,N)=>{T.listen(S,P=>{try{N(P)}catch(j){setTimeout(()=>{throw j},0)}})};return b(m,Bc.EventType.OPEN,()=>{_||(_e(Zn,`RPC '${e}' stream ${i} transport opened.`),E.__())}),b(m,Bc.EventType.CLOSE,()=>{_||(_=!0,_e(Zn,`RPC '${e}' stream ${i} transport closed`),E.u_())}),b(m,Bc.EventType.ERROR,T=>{_||(_=!0,Xl(Zn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),E.u_(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),b(m,Bc.EventType.MESSAGE,T=>{var S;if(!_){const N=T.data[0];dt(!!N,16349);const P=N,j=(P==null?void 0:P.error)||((S=P[0])===null||S===void 0?void 0:S.error);if(j){_e(Zn,`RPC '${e}' stream ${i} received error:`,j);const U=j.status;let X=function(M){const B=un[M];if(B!==void 0)return uS(B)}(U),D=j.message;X===void 0&&(X=he.INTERNAL,D="Unknown error status: "+U+" with message "+j.message),_=!0,E.u_(new Re(X,D)),m.close()}else _e(Zn,`RPC '${e}' stream ${i} received:`,N),E.c_(N)}}),b(u,CT.STAT_EVENT,T=>{T.stat===rg.PROXY?_e(Zn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===rg.NOPROXY&&_e(Zn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.a_()},0),E}}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n){return new V7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=i,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="PersistentStream";class bS{constructor(e,t,r,i,a,s,u,c){this.xi=e,this.y_=r,this.w_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new AS(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ka(t.toString()),ka("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===t&&this.K_(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return _e(Yw,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(_e(Yw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LP extends bS{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=H7(this.serializer,e),r=function(a){if(!("targetChange"in a))return Le.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Le.min():s.readTime?Hi(s.readTime):Le.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=dg(this.serializer),t.addTarget=function(a,s){let u;const c=s.target;if(u=lg(c)?{documents:q7(a,c)}:{query:X7(a,c).gt},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=hS(a,s.resumeToken);const h=cg(a,s.expectedCount);h!==null&&(u.expectedCount=h)}else if(s.snapshotVersion.compareTo(Le.min())>0){u.readTime=Jd(a,s.snapshotVersion.toTimestamp());const h=cg(a,s.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=$7(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=dg(this.serializer),t.removeTarget=e,this.L_(t)}}class jP extends bS{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=G7(e.writeResults,e.commitTime),r=Hi(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=dg(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>z7(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{}class VP extends BP{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.zo(e,fg(t,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(he.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Yo(e,fg(t,r),i,s,u,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(he.UNKNOWN,s.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class UP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(ka(t),this.oa=!1):_e("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class FP{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(s=>{r.enqueueAndForget(async()=>{Bs(this)&&(_e(Ps,"Restarting streams for network reachability change."),await async function(c){const h=Be(c);h.Ta.add(4),await Rf(h),h.da.set("Unknown"),h.Ta.delete(4),await U0(h)}(this))})}),this.da=new UP(r,i)}}async function U0(n){if(Bs(n))for(const e of n.Ia)await e(!0)}async function Rf(n){for(const e of n.Ia)await e(!1)}function TS(n,e){const t=Be(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),Sv(t)?Tv(t):mu(t).M_()&&bv(t,e))}function Av(n,e){const t=Be(n),r=mu(t);t.Pa.delete(e),r.M_()&&SS(t,e),t.Pa.size===0&&(r.M_()?r.N_():Bs(t)&&t.da.set("Unknown"))}function bv(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mu(n).H_(e)}function SS(n,e){n.Aa.Ke(e),mu(n).J_(e)}function Tv(n){n.Aa=new k7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),mu(n).start(),n.da._a()}function Sv(n){return Bs(n)&&!mu(n).F_()&&n.Pa.size>0}function Bs(n){return Be(n).Ta.size===0}function CS(n){n.Aa=void 0}async function HP(n){n.da.set("Online")}async function zP(n){n.Pa.forEach((e,t)=>{bv(n,e)})}async function GP(n,e){CS(n),Sv(n)?(n.da.ca(e),Tv(n)):n.da.set("Unknown")}async function qP(n,e,t){if(n.da.set("Online"),e instanceof fS&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const u of a.targetIds)i.Pa.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.Pa.delete(u),i.Aa.removeTarget(u))}(n,e)}catch(r){_e(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await t0(n,r)}else if(e instanceof Dd?n.Aa.Xe(e):e instanceof cS?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Le.min()))try{const r=await ES(n.localStore);t.compareTo(r)>=0&&await function(a,s){const u=a.Aa.It(s);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=a.Pa.get(h);p&&a.Pa.set(h,p.withResumeToken(c.resumeToken,s))}}),u.targetMismatches.forEach((c,h)=>{const p=a.Pa.get(c);if(!p)return;a.Pa.set(c,p.withResumeToken(Yn.EMPTY_BYTE_STRING,p.snapshotVersion)),SS(a,c);const m=new _o(p.target,c,h,p.sequenceNumber);bv(a,m)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){_e(Ps,"Failed to raise snapshot:",r),await t0(n,r)}}async function t0(n,e,t){if(!pu(e))throw e;n.Ta.add(1),await Rf(n),n.da.set("Offline"),t||(t=()=>ES(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{_e(Ps,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await U0(n)})}function IS(n,e){return e().catch(t=>t0(n,t,e))}async function F0(n){const e=Be(n),t=Mo(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:uv;for(;XP(e);)try{const i=await CP(e.localStore,r);if(i===null){e.ha.length===0&&t.N_();break}r=i.batchId,WP(e,i)}catch(i){await t0(e,i)}NS(e)&&RS(e)}function XP(n){return Bs(n)&&n.ha.length<10}function WP(n,e){n.ha.push(e);const t=Mo(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function NS(n){return Bs(n)&&!Mo(n).F_()&&n.ha.length>0}function RS(n){Mo(n).start()}async function $P(n){Mo(n).ta()}async function YP(n){const e=Mo(n);for(const t of n.ha)e.Z_(t.mutations)}async function KP(n,e,t){const r=n.ha.shift(),i=gv.from(r,e,t);await IS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await F0(n)}async function QP(n,e){e&&Mo(n).Y_&&await async function(r,i){if(function(s){return P7(s)&&s!==he.ABORTED}(i.code)){const a=r.ha.shift();Mo(r).O_(),await IS(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await F0(r)}}(n,e),NS(n)&&RS(n)}async function Kw(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),_e(Ps,"RemoteStore received new credentials");const r=Bs(t);t.Ta.add(3),await Rf(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await U0(t)}async function ZP(n,e){const t=Be(n);e?(t.Ta.delete(2),await U0(t)):e||(t.Ta.add(2),await Rf(t),t.da.set("Unknown"))}function mu(n){return n.Ra||(n.Ra=function(t,r,i){const a=Be(t);return a.ra(),new LP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:HP.bind(null,n),n_:zP.bind(null,n),i_:GP.bind(null,n),j_:qP.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),Sv(n)?Tv(n):n.da.set("Unknown")):(await n.Ra.stop(),CS(n))})),n.Ra}function Mo(n){return n.Va||(n.Va=function(t,r,i){const a=Be(t);return a.ra(),new jP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:$P.bind(null,n),i_:QP.bind(null,n),X_:YP.bind(null,n),ea:KP.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await F0(n)):(await n.Va.stop(),n.ha.length>0&&(_e(Ps,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,u=new Cv(e,t,s,i,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iv(n,e){if(ka("AsyncQueue",`${e}: ${n}`),pu(n))return new Re(he.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{static emptySet(e){return new zl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Oe.comparator(t.key,r.key):(t,r)=>Oe.comparator(t.key,r.key),this.keyedMap=Vc(),this.sortedSet=new Gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.ma=new Gt(Oe.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):ke(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ql{constructor(e,t,r,i,a,s,u,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach(u=>{s.push({type:0,doc:u})}),new Ql(e,t,zl.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&M0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class e9{constructor(){this.queries=Zw(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const i=Be(t),a=i.queries;i.queries=Zw(),a.forEach((s,u)=>{for(const c of u.ya)c.onError(r)})})(this,new Re(he.ABORTED,"Firestore shutting down"))}}function Zw(){return new Ls(n=>KT(n),M0)}async function t9(n,e){const t=Be(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.wa()&&e.Sa()&&(r=2):(a=new JP,r=e.Sa()?0:1);try{switch(r){case 0:a.pa=await t.onListen(i,!0);break;case 1:a.pa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const u=Iv(s,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&Nv(t)}async function n9(n,e){const t=Be(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.ya.indexOf(e);s>=0&&(a.ya.splice(s,1),a.ya.length===0?i=e.Sa()?0:1:!a.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function r9(n,e){const t=Be(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const u of s.ya)u.va(i)&&(r=!0);s.pa=i}}r&&Nv(t)}function i9(n,e,t){const r=Be(n),i=r.queries.get(e);if(i)for(const a of i.ya)a.onError(t);r.queries.delete(e)}function Nv(n){n.ba.forEach(e=>{e.next()})}var gg,Jw;(Jw=gg||(gg={})).Ca="default",Jw.Cache="cache";class a9{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ql(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.key=e}}class DS{constructor(e){this.key=e}}class o9{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Qe(),this.mutatedKeys=Qe(),this.Ha=QT(e),this.Ja=new zl(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new Qw,i=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),_=k0(this.query,m)?m:null,E=!!y&&this.mutatedKeys.has(y.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;y&&_?y.data.isEqual(_.data)?E!==b&&(r.track({type:3,doc:_}),T=!0):this.eu(y,_)||(r.track({type:2,doc:_}),T=!0,(c&&this.Ha(_,c)>0||h&&this.Ha(_,h)<0)&&(u=!0)):!y&&_?(r.track({type:0,doc:_}),T=!0):y&&!_&&(r.track({type:1,doc:y}),T=!0,(c||h)&&(u=!0)),T&&(_?(s=s.add(_),a=b?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Ja:s,Xa:r,Cs:u,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const s=e.Xa.ga();s.sort((p,m)=>function(_,E){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Vt:T})}};return b(_)-b(E)}(p.type,m.type)||this.Ha(p.doc,m.doc)),this.tu(r),i=i!=null&&i;const u=t&&!i?this.nu():[],c=this.ja.size===0&&this.current&&!i?1:0,h=c!==this.za;return this.za=c,s.length!==0||h?{snapshot:new Ql(this.query,e.Ja,a,s,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:u}:{ru:u}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Qw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Qe(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new DS(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new OS(r))}),t}su(e){this.Ga=e.$s,this.ja=Qe();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return Ql.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Rv="SyncEngine";class s9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class l9{constructor(e){this.key=e,this._u=!1}}class u9{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new Ls(u=>KT(u),M0),this.cu=new Map,this.lu=new Set,this.hu=new Gt(Oe.comparator),this.Pu=new Map,this.Tu=new xv,this.Iu={},this.Eu=new Map,this.du=Kl.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function c9(n,e,t=!0){const r=BS(n);let i;const a=r.uu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.ou()):i=await PS(r,e,t,!0),i}async function f9(n,e){const t=BS(n);await PS(t,e,!0,!1)}async function PS(n,e,t,r){const i=await IP(n.localStore,Fi(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let u;return r&&(u=await h9(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&TS(n.remoteStore,i),u}async function h9(n,e,t,r,i){n.Ru=(m,y,_)=>async function(b,T,S,N){let P=T.view.Za(S);P.Cs&&(P=await qw(b.localStore,T.query,!1).then(({documents:D})=>T.view.Za(D,P)));const j=N&&N.targetChanges.get(T.targetId),U=N&&N.targetMismatches.get(T.targetId)!=null,X=T.view.applyChanges(P,b.isPrimaryClient,j,U);return tE(b,T.targetId,X.ru),X.snapshot}(n,m,y,_);const a=await qw(n.localStore,e,!0),s=new o9(e,a.$s),u=s.Za(a.documents),c=Nf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=s.applyChanges(u,n.isPrimaryClient,c);tE(n,t,h.ru);const p=new s9(e,t,s);return n.uu.set(e,p),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),h.snapshot}async function d9(n,e,t){const r=Be(n),i=r.uu.get(e),a=r.cu.get(i.targetId);if(a.length>1)return r.cu.set(i.targetId,a.filter(s=>!M0(s,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Av(r.remoteStore,i.targetId),vg(r,i.targetId)}).catch(du)):(vg(r,i.targetId),await pg(r.localStore,i.targetId,!0))}async function p9(n,e){const t=Be(n),r=t.uu.get(e),i=t.cu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Av(t.remoteStore,r.targetId))}async function m9(n,e,t){const r=E9(n);try{const i=await function(s,u){const c=Be(s),h=bn.now(),p=u.reduce((_,E)=>_.add(E.key),Qe());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=La(),b=Qe();return c.Bs.getEntries(_,p).next(T=>{E=T,E.forEach((S,N)=>{N.isValidDocument()||(b=b.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,E)).next(T=>{m=T;const S=[];for(const N of u){const P=I7(N,m.get(N.key).overlayedDocument);P!=null&&S.push(new js(N.key,P,zT(P.value.mapValue),Ra.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,S,u)}).next(T=>{y=T;const S=T.applyToLocalDocumentSet(m,b);return c.documentOverlayCache.saveOverlays(_,T.batchId,S)})}).then(()=>({batchId:y.batchId,changes:JT(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,c){let h=s.Iu[s.currentUser.toKey()];h||(h=new Gt(qe)),h=h.insert(u,c),s.Iu[s.currentUser.toKey()]=h}(r,i.batchId,t),await Of(r,i.changes),await F0(r.remoteStore)}catch(i){const a=Iv(i,"Failed to persist write");t.reject(a)}}async function MS(n,e){const t=Be(n);try{const r=await TP(t.localStore,e);e.targetChanges.forEach((i,a)=>{const s=t.Pu.get(a);s&&(dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s._u=!0:i.modifiedDocuments.size>0?dt(s._u,14607):i.removedDocuments.size>0&&(dt(s._u,42227),s._u=!1))}),await Of(t,r,e)}catch(r){await du(r)}}function eE(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.uu.forEach((a,s)=>{const u=s.view.Da(e);u.snapshot&&i.push(u.snapshot)}),function(s,u){const c=Be(s);c.onlineState=u;let h=!1;c.queries.forEach((p,m)=>{for(const y of m.ya)y.Da(u)&&(h=!0)}),h&&Nv(c)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function g9(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Pu.get(e),a=i&&i.key;if(a){let s=new Gt(Oe.comparator);s=s.insert(a,tr.newNoDocument(a,Le.min()));const u=Qe().add(a),c=new B0(Le.min(),new Map,new Gt(qe),s,u);await MS(r,c),r.hu=r.hu.remove(a),r.Pu.delete(e),Ov(r)}else await pg(r.localStore,e,!1).then(()=>vg(r,e,t)).catch(du)}async function v9(n,e){const t=Be(n),r=e.batch.batchId;try{const i=await bP(t.localStore,e);LS(t,r,null),kS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Of(t,i)}catch(i){await du(i)}}async function y9(n,e,t){const r=Be(n);try{const i=await function(s,u){const c=Be(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(dt(m!==null,37113),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);LS(r,e,t),kS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Of(r,i)}catch(i){await du(i)}}function kS(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function LS(n,e,t){const r=Be(n);let i=r.Iu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function vg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||jS(n,r)})}function jS(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(Av(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),Ov(n))}function tE(n,e,t){for(const r of t)r instanceof OS?(n.Tu.addReference(r.key,e),x9(n,r)):r instanceof DS?(_e(Rv,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||jS(n,r.key)):ke(19791,{mu:r})}function x9(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(_e(Rv,"New document in limbo: "+t),n.lu.add(r),Ov(n))}function Ov(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new Oe(Yt.fromString(e)),r=n.du.next();n.Pu.set(r,new l9(t)),n.hu=n.hu.insert(t,r),TS(n.remoteStore,new _o(Fi(pv(t.path)),r,"TargetPurposeLimboResolution",R0.le))}}async function Of(n,e,t){const r=Be(n),i=[],a=[],s=[];r.uu.isEmpty()||(r.uu.forEach((u,c)=>{s.push(r.Ru(c,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=wv.Rs(c.targetId,h);a.push(m)}}))}),await Promise.all(s),r.au.j_(i),await async function(c,h){const p=Be(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>le.forEach(h,y=>le.forEach(y.ds,_=>p.persistence.referenceDelegate.addReference(m,y.targetId,_)).next(()=>le.forEach(y.As,_=>p.persistence.referenceDelegate.removeReference(m,y.targetId,_)))))}catch(m){if(!pu(m))throw m;_e(Ev,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const _=p.xs.get(y),E=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(E);p.xs=p.xs.insert(y,b)}}}(r.localStore,a))}async function _9(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){_e(Rv,"User change. New user:",e.toKey());const r=await wS(t.localStore,e);t.currentUser=e,function(a,s){a.Eu.forEach(u=>{u.forEach(c=>{c.reject(new Re(he.CANCELLED,s))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Of(t,r.ks)}}function w9(n,e){const t=Be(n),r=t.Pu.get(e);if(r&&r._u)return Qe().add(r.key);{let i=Qe();const a=t.cu.get(e);if(!a)return i;for(const s of a){const u=t.uu.get(s);i=i.unionWith(u.view.Ya)}return i}}function BS(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g9.bind(null,e),e.au.j_=r9.bind(null,e.eventManager),e.au.Vu=i9.bind(null,e.eventManager),e}function E9(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y9.bind(null,e),e}class n0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=V0(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return AP(this.persistence,new _P,e.initialUser,this.serializer)}yu(e){return new _S(_v.fi,this.serializer)}pu(e){return new RP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}n0.provider={build:()=>new n0};class A9 extends n0{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){dt(this.persistence.referenceDelegate instanceof e0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new aP(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new _S(r=>e0.fi(r,t),this.serializer)}}class yg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_9.bind(null,this.syncEngine),await ZP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new e9}()}createDatastore(e){const t=V0(e.databaseInfo.databaseId),r=function(a){return new kP(a)}(e.databaseInfo);return function(a,s,u,c){return new VP(a,s,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,s,u){return new FP(r,i,a,s,u)}(this.localStore,this.datastore,e.asyncQueue,t=>eE(this.syncEngine,t,0),function(){return $w.C()?new $w:new OP}())}createSyncEngine(e,t){return function(i,a,s,u,c,h,p){const m=new u9(i,a,s,u,c,h);return p&&(m.Au=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Be(i);_e(Ps,"RemoteStore shutting down."),a.Ta.add(5),await Rf(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yg.provider={build:()=>new yg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):ka("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="FirestoreClient";class T9{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=er.UNAUTHENTICATED,this.clientId=PT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{_e(ko,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(_e(ko,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Iv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gm(n,e){n.asyncQueue.verifyOperationInProgress(),_e(ko,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await wS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function nE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await S9(n);_e(ko,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Kw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Kw(e.remoteStore,i)),n._onlineComponents=e}async function S9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(ko,"Using user provided OfflineComponentProvider");try{await gm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Xl("Error using user provided cache. Falling back to memory cache: "+t),await gm(n,new n0)}}else _e(ko,"Using default OfflineComponentProvider"),await gm(n,new A9(void 0));return n._offlineComponents}async function VS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(ko,"Using user provided OnlineComponentProvider"),await nE(n,n._uninitializedComponentsProvider._online)):(_e(ko,"Using default OnlineComponentProvider"),await nE(n,new yg))),n._onlineComponents}function C9(n){return VS(n).then(e=>e.syncEngine)}async function I9(n){const e=await VS(n),t=e.eventManager;return t.onListen=c9.bind(null,e.syncEngine),t.onUnlisten=d9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=f9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=p9.bind(null,e.syncEngine),t}function N9(n,e,t={}){const r=new Co;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,u,c,h){const p=new b9({next:y=>{p.Cu(),s.enqueueAndForget(()=>n9(a,m));const _=y.docs.has(u);!_&&y.fromCache?h.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&c&&c.source==="server"?h.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new a9(pv(u.path),p,{includeMetadataChanges:!0,La:!0});return t9(a,m)}(await I9(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(n,e,t){if(!t)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function O9(n,e,t,r){if(e===!0&&r===!0)throw new Re(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iE(n){if(!Oe.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function pf(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dv(n);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firestore.googleapis.com",aE=!0;class oE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FS,this.ssl=aE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:aE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rP)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=US((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new DD;switch(r.type){case"firstParty":return new LD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=rE.get(t);r&&(_e("ComponentProvider","Removing Datastore"),rE.delete(t),r.terminate())}(this),Promise.resolve()}}function D9(n,e,t,r={}){var i;n=pf(n,Pv);const a=_f(e),s=n._getSettings(),u=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(MA(`https://${c}`),kA("Firestore",!0)),s.host!==FS&&s.host!==c&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!Ns(h,u)&&(n._setSettings(h),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=er.MOCK_USER;else{p=JI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new er(y)}n._authCredentials=new PD(new OT(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mv(this.firestore,e,this._query)}}class Kr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kr(this.firestore,e,this._key)}}class mf extends Mv{constructor(e,t,r){super(e,t,pv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kr(this.firestore,null,new Oe(e))}withConverter(e){return new mf(this.firestore,e,this._path)}}function HS(n,e,...t){if(n=je(n),arguments.length===1&&(e=PT.newId()),R9("doc","path",e),n instanceof Pv){const r=Yt.fromString(e,...t);return iE(r),new Kr(n,null,new Oe(r))}{if(!(n instanceof Kr||n instanceof mf))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return iE(r),new Kr(n.firestore,n instanceof mf?n.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="AsyncQueue";class lE{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new AS(this,"async_queue_retry"),this.ec=()=>{const r=mm();r&&_e(sE,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=mm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=mm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Co;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!pu(e))throw e;_e(sE,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,ka("INTERNAL UNHANDLED ERROR: ",uE(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const i=Cv.createAndSchedule(this,e,t,r,a=>this.oc(a));return this.Hu.push(i),i}nc(){this.Ju&&ke(47125,{_c:uE(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function uE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class kv extends Pv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lE(e),this._firestoreClient=void 0,await e}}}function zS(n,e){const t=VA(),r=$d,i=Vg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=QI("firestore");a&&D9(i,...a)}return i}function GS(n){if(n._terminated)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||P9(n),n._firestoreClient}function P9(n){var e,t,r;const i=n._freezeSettings(),a=function(u,c,h,p){return new QD(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,US(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new T9(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zl(Yn.fromBase64String(e))}catch(t){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zl(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=/^__.*__$/;class k9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,t,this.fieldTransforms):new If(e,this.data,t,this.fieldTransforms)}}function qS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{hc:n})}}class Uv{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return r0(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(qS(this.hc)&&M9.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class L9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||V0(e)}gc(e,t,r,i=!1){return new Uv({hc:e,methodName:t,fc:r,path:Wn.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j9(n){const e=n._freezeSettings(),t=V0(n._databaseId);return new L9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function B9(n,e,t,r,i,a={}){const s=n.gc(a.merge||a.mergeFields?2:0,e,t,i);YS("Data must be an object, but it was:",s,r);const u=WS(r,s);let c,h;if(a.merge)c=new pi(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const m of a.mergeFields){const y=V9(e,m,t);if(!s.contains(y))throw new Re(he.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);F9(p,y)||p.push(y)}c=new pi(p),h=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=s.fieldTransforms;return new k9(new $r(u),c,h)}class Fv extends jv{_toFieldTransform(e){return new b7(e.path,new ff)}isEqual(e){return e instanceof Fv}}function XS(n,e){if($S(n=je(n)))return YS("Unsupported field value:",e,n),WS(n,e);if(n instanceof jv)return function(r,i){if(!qS(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const u of r){let c=XS(u,i.Rc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=bn.fromDate(r);return{timestampValue:Jd(i.serializer,a)}}if(r instanceof bn){const a=new bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jd(i.serializer,a)}}if(r instanceof Bv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zl)return{bytesValue:hS(i.serializer,r._byteString)};if(r instanceof Kr){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Vc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:yv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vv)return function(s,u){return{mapValue:{fields:{[FT]:{stringValue:HT},[Yd]:{arrayValue:{values:s.toArray().map(h=>{if(typeof h!="number")throw u.Vc("VectorValues must only contain numeric values.");return mv(u.serializer,h)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${Dv(r)}`)}(n,e)}function WS(n,e){const t={};return kT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(n,(r,i)=>{const a=XS(i,e.Ic(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function $S(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof Bv||n instanceof Zl||n instanceof Kr||n instanceof jv||n instanceof Vv)}function YS(n,e,t){if(!$S(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Dv(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function V9(n,e,t){if((e=je(e))instanceof Lv)return e._internalPath;if(typeof e=="string")return KS(n,e);throw r0("Field path arguments must be of type string or ",n,!1,void 0,t)}const U9=new RegExp("[~\\*/\\[\\]]");function KS(n,e,t){if(e.search(U9)>=0)throw r0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lv(...e.split("."))._internalPath}catch{throw r0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function r0(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Re(he.INVALID_ARGUMENT,u+n+c)}function F9(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class H9 extends QS{data(){return super.data()}}function ZS(n,e){return typeof e=="string"?KS(n,e):e instanceof Lv?e._internalPath:e._delegate._internalPath}class z9{convertValue(e,t="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ks(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Yd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>nn(s.doubleValue));return new Vv(a)}convertGeoPoint(e){return new Bv(nn(e.latitude),nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=D0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lf(e));default:return null}}convertTimestamp(e){const t=Oo(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);dt(yS(r),9688,{name:e});const i=new uf(r.get(1),r.get(3)),a=new Oe(r.popFirst(5));return i.isEqual(t)||ka(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JS extends QS{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X9(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class X9 extends JS{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(n){n=pf(n,Kr);const e=pf(n.firestore,kv);return N9(GS(e),n._key).then(t=>Q9(e,n,t))}class $9 extends z9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,t)}}function Y9(n,e,t){n=pf(n,Kr);const r=pf(n.firestore,kv),i=G9(n.converter,e,t);return K9(r,[B9(j9(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ra.none())])}function K9(n,e){return function(r,i){const a=new Co;return r.asyncQueue.enqueueAndForget(async()=>m9(await C9(r),i,a)),a.promise}(GS(n),e)}function Q9(n,e,t){const r=t.docs.get(e._key),i=new $9(n);return new JS(n,i,e._key,r,new q9(t.hasPendingWrites,t.fromCache),e.converter)}function Z9(){return new Fv("serverTimestamp")}(function(e,t=!0){(function(i){hu=i})(au),Gl(new Rs("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),u=new kv(new MD(r.getProvider("auth-internal")),new jD(s,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uf(h.options.projectId,p)}(s,i),s);return a=Object.assign({useFetchStreams:t},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Ao(mw,gw,e),Ao(mw,gw,"esm2017")})();function Df(){const{setUser:n,setLeagues:e,setSelectedLeagueId:t,setRole:r,setUserRole:i,setError:a}=Qt();return async function(){try{await Db(Ft),n(null),e([]),t(""),r(null),i(null),a(null),localStorage.removeItem("selectedLeagueId"),localStorage.removeItem("selectedEventId")}catch(u){console.error("Logout error:",u),n(null),e([]),t(""),r(null),i(null),localStorage.removeItem("selectedLeagueId"),localStorage.removeItem("selectedEventId")}}}function H0({title:n="Loading WooCombine...",subtitle:e=null,showLogo:t=!0,size:r="large"}){const a={small:{container:"min-h-[40vh]",logo:"w-12 h-12",spinner:"w-6 h-6 border-2",title:"text-lg",subtitle:"text-sm"},medium:{container:"min-h-[60vh]",logo:"w-16 h-16",spinner:"w-8 h-8 border-4",title:"text-xl",subtitle:"text-base"},large:{container:"min-h-screen",logo:"w-20 h-20",spinner:"w-10 h-10 border-4",title:"text-2xl",subtitle:"text-lg"}}[r];return v.jsx("div",{className:`${a.container} flex items-center justify-center bg-gradient-to-br from-cyan-50 to-blue-50`,children:v.jsxs("div",{className:"text-center p-8",children:[t&&v.jsx("div",{className:"mb-6",children:v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"WooCombine Logo",className:`${a.logo} mx-auto object-contain animate-pulse`})}),v.jsx("div",{className:"mb-4",children:v.jsx("div",{className:`animate-spin inline-block ${a.spinner} border-gray-200 border-t-cyan-600 rounded-full`})}),v.jsx("div",{className:`${a.title} font-semibold text-gray-800 mb-2`,children:n}),e&&v.jsx("div",{className:`${a.subtitle} text-gray-600`,children:e}),v.jsxs("div",{className:"flex justify-center space-x-1 mt-4",children:[v.jsx("div",{className:"w-2 h-2 bg-cyan-600 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-cyan-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-cyan-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}const eC=F.createContext();function J9({children:n}){const[e,t]=F.useState(null),[r,i]=F.useState(!0),[a,s]=F.useState(!1),[u,c]=F.useState(!1),[h,p]=F.useState(null),[m,y]=F.useState([]),[_,E]=F.useState(()=>localStorage.getItem("selectedLeagueId")||""),[b,T]=F.useState(null),[S,N]=F.useState(null),P=Bn(),j=F.useCallback(async R=>R?(t(R),s(!0),R.emailVerified?!0:(window.location.pathname!=="/verify-email"&&P("/verify-email"),!1)):(t(null),s(!0),!1),[P,t,s]),U=F.useCallback(async R=>{try{const M=zS(),[B,G]=await Promise.allSettled([Promise.race([W9(HS(M,"users",R.uid)),new Promise((ue,fe)=>setTimeout(()=>fe(new Error("Role check timeout")),3e3))]),Promise.race([zt.get("/leagues/me",{timeout:5e3}),new Promise((ue,fe)=>setTimeout(()=>fe(new Error("League fetch timeout")),5e3))])]);if(B.status==="fulfilled"&&B.value.exists()&&B.value.data().role){const ue=B.value.data().role;N(ue)}else{N(null),y([]),T(null),c(!0),P("/select-role");return}let H=[];if(G.status==="fulfilled")H=G.value.data.leagues||[],y(H);else try{H=(await Promise.race([zt.get("/leagues/me",{timeout:3e3}),new Promise((fe,Pe)=>setTimeout(()=>Pe(new Error("Retry timeout")),3e3))])).data.leagues||[],y(H)}catch{H=[],y([])}let k=_;if(H.length>0){(!k||!H.some(fe=>fe.id===k))&&(k=H[0].id),E(k),localStorage.setItem("selectedLeagueId",k);const ue=H.find(fe=>fe.id===k);T((ue==null?void 0:ue.role)||null)}else E(""),T(null),localStorage.removeItem("selectedLeagueId");c(!0);const xe=window.location.pathname,ve=["/login","/signup","/verify-email","/select-role","/"],J=["/dashboard","/coach-dashboard","/players","/admin","/roster","/schedule"];ve.includes(xe)?P("/dashboard"):J.includes(xe)}catch(M){console.error("[AuthContext] Background initialization failed:",M),p(M),c(!0),P("/select-role")}},[P,_,N,y,T,E,p]);F.useEffect(()=>{const R=Ob(Ft,async M=>{if(c(!1),!await j(M)){c(!0),i(!1);return}if(S&&m.length>0&&e&&e.uid===M.uid){const H=window.location.pathname;["/login","/signup","/verify-email","/select-role","/"].includes(H)&&P("/dashboard"),c(!0),i(!1);return}try{await U(M)}catch(H){console.error("[AuthContext] Initialization error:",H),p(H)}finally{i(!1)}},M=>{console.error("[AuthContext] Auth state change error:",M),p(M),i(!1),s(!0)});return()=>R()},[P,S,m.length,e,j,U]),F.useEffect(()=>{_?localStorage.setItem("selectedLeagueId",_):localStorage.removeItem("selectedLeagueId")},[_]);const X=R=>{y(M=>M.some(B=>B.id===R.id)?M:[...M,R]),E(R.id),localStorage.setItem("selectedLeagueId",R.id),T(R.role)},D=()=>{var R;return((R=m.find(M=>M.id===_))==null?void 0:R.role)==="organizer"};if(r||e&&e.emailVerified&&!u){const R=!a;return v.jsx(H0,{title:R?"Loading WooCombine...":"Loading your data...",subtitle:R?"Checking authentication":"Verifying your account",size:"large"})}return v.jsx(eC.Provider,{value:{user:e,setUser:t,loading:r,roleChecking:!1,error:h,setError:p,leagues:m,setLeagues:y,selectedLeagueId:_,setSelectedLeagueId:E,role:b,setRole:T,userRole:S,setUserRole:N,addLeague:X,isOrganizer:D},children:n})}function Qt(){return F.useContext(eC)}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),cE=n=>{const e=tM(n);return e.charAt(0).toUpperCase()+e.slice(1)},tC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),nM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...u},c)=>F.createElement("svg",{ref:c,...rM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:tC("lucide",i),...!a&&!nM(u)&&{"aria-hidden":"true"},...u},[...s.map(([h,p])=>F.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=(n,e)=>{const t=F.forwardRef(({className:r,...i},a)=>F.createElement(iM,{ref:a,iconNode:e,className:tC(`lucide-${eM(cE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=cE(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Hv=Nt("arrow-left",aM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],sM=Nt("award",oM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zv=Nt("calendar",lM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],cM=Nt("chevron-left",uM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hM=Nt("chevron-right",fM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nC=Nt("copy",dM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rC=Nt("eye-off",pM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],iC=Nt("eye",mM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],aC=Nt("house",gM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],yM=Nt("link-2",vM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],fE=Nt("list",xM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wM=Nt("log-out",_M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],AM=Nt("menu",EM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],oC=Nt("message-circle",bM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hE=Nt("plus",TM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],gf=Nt("qr-code",SM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],dE=Nt("refresh-ccw",CM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],NM=Nt("search",IM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sC=Nt("settings",RM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lC=Nt("square-pen",OM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],PM=Nt("trending-up",DM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],pE=Nt("upload",MM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mE=Nt("user-plus",kM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],z0=Nt("users",LM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],uC=Nt("video",jM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cC=Nt("x",BM);function fC({className:n=""}){return v.jsx("div",{className:`font-extrabold text-2xl text-cyan-700 min-w-0 ${n}`,children:"Woo-Combine"})}function Jr({children:n,footerLinks:e,backgroundColor:t,contentClassName:r,hideHeader:i,showOverlay:a=!0,useBackgroundVideo:s=!1,backgroundVideoUrl:u}){const c=t||"bg-gradient-to-br from-cyan-900 via-blue-900 to-cyan-700";return v.jsxs("div",{className:`min-h-screen flex flex-col ${s?"bg-black":c} relative overflow-hidden`,children:[s&&u&&v.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover z-0",children:[v.jsx("source",{src:u,type:"video/mp4"}),v.jsx("div",{className:`absolute inset-0 ${c}`})]}),!i&&v.jsx("header",{className:"absolute top-0 left-0 p-6 z-10",children:v.jsx(fC,{className:"text-white drop-shadow-lg"})}),v.jsx("main",{className:`flex flex-1 flex-col justify-center items-center px-4 relative z-10 ${r||""}`,children:n}),v.jsx("footer",{className:"w-full flex flex-col items-center gap-2 pb-8 mt-auto relative z-10",children:e}),a!==!1&&v.jsx("div",{className:"absolute inset-0 bg-black/40 pointer-events-none z-5"})]})}function gE(){var h;const n=Bn(),{user:e}=Qt(),t=Df(),[r,i]=F.useState(""),a=async()=>{i("Redirecting to Create League...");try{n("/create-league")}catch(p){i(`Navigation error: ${p.message}`)}},s=()=>{i("Redirecting to Join League...");try{n("/join")}catch(p){i("Navigation error. Please try again."),console.error("[LeagueFallback] Join navigation error:",p)}},u=()=>{i("Loading your leagues...");try{n("/select-league")}catch(p){i("Navigation error. Please try again."),console.error("[LeagueFallback] Select league navigation error:",p)}},c=async()=>{i("Logging out...");try{await t(),n("/welcome")}catch(p){i("Logout error. Please refresh the page."),console.error("[LeagueFallback] Logout error:",p)}};return v.jsx(Jr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 mx-4",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}}),v.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(z0,{className:"w-6 h-6 text-cyan-600"})}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No League Selected"}),v.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"You need to join or create a league to access WooCombine features"})]}),r&&v.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 text-blue-700 px-4 py-3 rounded mb-6 text-sm",children:r}),v.jsxs("div",{className:"space-y-4 mb-6",children:[v.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-blue-300 transition",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:v.jsx(fE,{className:"w-5 h-5 text-blue-600"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Choose from Your Leagues"}),v.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select from leagues you've already created or joined"}),v.jsxs("button",{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2",children:[v.jsx(fE,{className:"w-4 h-4"}),"Choose League"]})]})]})}),v.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-cyan-300 transition",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center flex-shrink-0",children:v.jsx(gf,{className:"w-5 h-5 text-cyan-600"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Join Existing League"}),v.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"If you were invited by a coach, enter your code or scan the QR they sent you"}),v.jsxs("button",{onClick:s,className:"bg-cyan-600 hover:bg-cyan-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2",children:[v.jsx(gf,{className:"w-4 h-4"}),"Join League"]})]})]})}),v.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-cyan-300 transition",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:v.jsx(hE,{className:"w-5 h-5 text-green-600"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Create New League"}),v.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Start your own league and invite players to join"}),v.jsxs("button",{onClick:a,className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all duration-200 transform hover:scale-[1.02] flex items-center gap-2",children:[v.jsx(hE,{className:"w-4 h-4"}),"Create League"]})]})]})})]}),v.jsx("div",{className:"border-t border-gray-200 pt-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-gray-600 font-medium text-xs",children:((h=e==null?void 0:e.email)==null?void 0:h.charAt(0).toUpperCase())||"U"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs font-medium text-gray-900",children:"Logged in as:"}),v.jsx("p",{className:"text-xs text-gray-600",children:(e==null?void 0:e.email)||"Unknown"})]})]}),v.jsxs("button",{onClick:c,className:"flex items-center gap-1 text-red-600 hover:text-red-700 font-medium text-xs transition",children:[v.jsx(wM,{className:"w-3 h-3"}),"Log Out"]})]})})]})})}const hC=F.createContext();function VM({children:n}){const{selectedLeagueId:e,user:t}=Qt(),[r,i]=F.useState([]),[a,s]=F.useState(null),[u,c]=F.useState(!1),[h,p]=F.useState(!1),[m,y]=F.useState(null),_=Wi(),E=["/welcome","/login","/signup","/verify-email","/select-role","/select-league","/claim","/create-league","/join"];F.useEffect(()=>{async function S(){var N,P,j;if(!e||!t){c(!0),i([]),s(null);return}c(!1),p(!0),y(null);try{const U=new AbortController,X=setTimeout(()=>U.abort(),8e3),D=`/leagues/${e}/events`,{data:R}=await zt.get(D,{signal:U.signal,retry:2});clearTimeout(X);const M=R.events||[];i(Array.isArray(M)?M:[]);const B=localStorage.getItem("selectedEventId"),G=Array.isArray(M)?M.find(H=>H.id===B):null;G?s(G):Array.isArray(M)&&M.length>0?s(M[0]):s(null),y(null)}catch(U){console.error("Failed to fetch events:",U),i([]),s(null),U.name==="AbortError"?y("Request timed out. Please try again."):((N=U.response)==null?void 0:N.status)===401?y("Authentication failed. Please refresh the page."):y(((j=(P=U.response)==null?void 0:P.data)==null?void 0:j.detail)||U.message||"Failed to load events")}finally{p(!1)}}S()},[e,t]),F.useEffect(()=>{a&&localStorage.setItem("selectedEventId",a.id)},[a]);const b=async()=>{var S,N;if(!(!e||!t)){p(!0),y(null);try{const P=`/leagues/${e}/events`,{data:j}=await zt.get(P,{retry:2}),U=j.events||[];i(Array.isArray(U)?U:[]),y(null)}catch(P){console.error("Failed to refresh events:",P),y(((N=(S=P.response)==null?void 0:S.data)==null?void 0:N.detail)||P.message||"Failed to refresh events")}finally{p(!1)}}},T=u&&!E.includes(_.pathname);return v.jsx(hC.Provider,{value:{events:r,selectedEvent:a,setSelectedEvent:s,setEvents:i,noLeague:u,loading:h,error:m,refreshEvents:b,LeagueFallback:gE},children:T?v.jsx(gE,{}):n})}function $i(){return F.useContext(hC)}function cd(){const{user:n,userRole:e}=Qt(),[t,r]=F.useState(!1),i=Df(),a=Bn(),s=()=>r(!1);return v.jsxs("nav",{className:"bg-white shadow-md p-4",children:[v.jsxs("div",{className:"flex flex-row justify-between items-center max-w-screen-xl mx-auto",children:[v.jsx(fC,{}),v.jsxs("div",{className:"flex items-center gap-x-6 min-w-0 sm:flex",children:[v.jsx(Tt,{to:"/dashboard",className:"text-lg font-semibold text-gray-800 hover:text-cmf-secondary",children:"Home"}),v.jsx(Tt,{to:"/coach-dashboard",className:"text-lg font-semibold text-gray-800 hover:text-cmf-secondary",children:"Coach Dashboard"}),v.jsx(Tt,{to:"/players",className:"text-lg font-semibold text-gray-800 hover:text-cmf-secondary",children:"Players"}),e==="organizer"&&v.jsx(Tt,{to:"/admin",className:"text-lg font-semibold text-gray-800 hover:text-cmf-secondary",children:"Admin"}),n&&v.jsx("button",{onClick:async()=>{try{await i(),a("/welcome")}catch(u){console.error("Logout failed:",u),a("/welcome")}},className:"text-lg font-semibold text-gray-800 hover:text-cmf-secondary px-2",children:"Log Out"})]}),v.jsx("button",{className:"sm:hidden p-2 ml-2",onClick:()=>r(u=>!u),"aria-label":"Open menu",children:v.jsx(AM,{className:"w-7 h-7 text-cmf-secondary"})})]}),t&&v.jsx("div",{className:"sm:hidden fixed top-16 left-0 w-full bg-white shadow-lg z-50 border-t border-gray-200",children:v.jsxs("div",{className:"flex flex-col items-center py-4 space-y-2",children:[v.jsx(Tt,{to:"/dashboard",className:"block text-lg font-semibold text-gray-800 hover:text-cmf-secondary px-4 py-2",onClick:s,children:"Home"}),v.jsx(Tt,{to:"/coach-dashboard",className:"block text-lg font-semibold text-gray-800 hover:text-cmf-secondary px-4 py-2",onClick:s,children:"Coach Dashboard"}),v.jsx(Tt,{to:"/players",className:"block text-lg font-semibold text-gray-800 hover:text-cmf-secondary px-4 py-2",onClick:s,children:"Players"}),e==="organizer"&&v.jsx(Tt,{to:"/admin",className:"block text-lg font-semibold text-gray-800 hover:text-cmf-secondary px-4 py-2",onClick:s,children:"Admin"}),n&&v.jsx("button",{onClick:async()=>{try{await i(),a("/welcome")}catch(u){console.error("Logout failed:",u),a("/welcome")}},className:"block text-lg font-semibold text-gray-800 hover:text-cmf-secondary px-4 py-2",children:"Log Out"})]})})]})}function UM(){const{user:n,userRole:e}=Qt(),{selectedEvent:t}=$i(),r=Bn(),[i,a]=Ng.useState(!1),s=t&&t.date&&!isNaN(Date.parse(t.date))?new Date(t.date).toLocaleDateString():"No date set",u=c=>{a(!0),setTimeout(()=>{r(c)},0)};return i?v.jsx(H0,{title:"Navigating...",subtitle:"Taking you to your destination",size:"medium"}):v.jsx("div",{className:"min-h-screen bg-gray-50",children:v.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 py-8",children:[v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border-2 border-cmf-primary/30",children:[v.jsx("h1",{className:"text-2xl font-bold text-cmf-secondary mb-2",children:"Welcome to WooCombine!"}),v.jsx("p",{className:"text-gray-600 mb-4",children:t?v.jsxs(v.Fragment,{children:["Event: ",v.jsx("strong",{children:t.name})," - ",s]}):"Select an event to get started"}),v.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e==="organizer"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>u("/admin"),className:"bg-cmf-secondary text-white font-bold px-4 py-3 rounded-lg shadow hover:bg-cmf-primary transition flex items-center justify-center",children:" Manage Event"}),v.jsx("button",{onClick:()=>u("/coach-dashboard"),className:"bg-cmf-primary text-white font-bold px-4 py-3 rounded-lg shadow hover:bg-cmf-secondary transition flex items-center justify-center",children:" View Rankings"})]}),e==="coach"&&v.jsx("button",{onClick:()=>u("/coach-dashboard"),className:"bg-cmf-primary text-white font-bold px-4 py-3 rounded-lg shadow hover:bg-cmf-secondary transition flex items-center justify-center",children:" Coach Dashboard"}),e==="player"&&t&&v.jsx("button",{onClick:()=>u("/drill-input"),className:"bg-cmf-secondary text-white font-bold px-4 py-3 rounded-lg shadow hover:bg-cmf-primary transition flex items-center justify-center",children:" Submit Drill Results"})]})]}),t&&v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[v.jsx(zv,{className:"w-5 h-5 text-cmf-primary"}),v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Event Details"})]}),v.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Name:"})," ",t.name]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Date:"})," ",s]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Location:"})," ",t.location||"Location TBD"]})]})]}),v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Getting Started"}),v.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("span",{className:"text-cmf-primary font-bold",children:"1."}),v.jsx("span",{children:"Select an event from the dropdown above"})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("span",{className:"text-cmf-primary font-bold",children:"2."}),v.jsxs("span",{children:[e==="organizer"&&"Import players and manage event settings",e==="coach"&&"View player rankings and adjust drill weights",e==="player"&&"Submit your drill results"]})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("span",{className:"text-cmf-primary font-bold",children:"3."}),v.jsx("span",{children:"View real-time rankings and results"})]})]})]})]})})}function FM(){const{user:n,selectedLeagueId:e}=Qt(),{selectedEvent:t}=$i(),r=Bn(),[i,a]=F.useState([]),[s,u]=F.useState(!0),[c,h]=F.useState(""),p=()=>{if(!(n!=null&&n.email))return"RA";const b=n.email,T=b.split("@")[0].split(".");return T.length>=2?(T[0][0]+T[1][0]).toUpperCase():b.substring(0,2).toUpperCase()},m=b=>{const T=b.split(" ");return T.length>=2?(T[0][0]+T[T.length-1][0]).toUpperCase():b.substring(0,2).toUpperCase()},y=b=>{const T=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-gray-500"];let S=0;for(let N=0;N<b.length;N++)S=b.charCodeAt(N)+((S<<5)-S);return T[Math.abs(S)%T.length]};F.useEffect(()=>{async function b(){if(!(!t||!n||!e))try{u(!0);const{data:T}=await zt.get(`/players?event_id=${t.id}`);a(T)}catch(T){console.error("Error fetching players:",T),a([])}finally{u(!1)}}b()},[t,n,e]);const E=i.filter(b=>b.name.toLowerCase().includes(c.toLowerCase())||b.number.toString().includes(c)).reduce((b,T)=>{const S=T.age_group||"Unknown";return b[S]||(b[S]=[]),b[S].push(T),b},{});return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("div",{className:"bg-white px-4 py-3 shadow-sm",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-white font-bold text-lg",children:p()})}),v.jsxs("div",{className:"flex-1 text-center",children:[v.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(t==null?void 0:t.name)||"Lil' Ballers Fall 24"}),v.jsxs("div",{className:"flex items-center justify-center mt-1",children:[v.jsx("div",{className:"w-4 h-3 bg-blue-600 mr-2 flex items-center justify-center",children:v.jsx("span",{className:"text-white text-xs font-bold",children:""})}),v.jsx("p",{className:"text-sm text-gray-600",children:"Central Mass Flag (Worcester)"})]})]}),v.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:v.jsx("div",{className:"w-6 h-6 text-gray-400",children:""})})]})}),v.jsxs("div",{className:"px-4 py-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Team Roster"}),v.jsxs("div",{className:"relative mb-6",children:[v.jsx(NM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),v.jsx("input",{type:"text",placeholder:"Search players...",value:c,onChange:b=>h(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s?v.jsx("div",{className:"flex items-center justify-center py-8",children:v.jsx("div",{className:"text-gray-500",children:"Loading players..."})}):v.jsx("div",{className:"space-y-6",children:Object.keys(E).length===0?v.jsx("div",{className:"text-center py-8",children:v.jsx("div",{className:"text-gray-500",children:"No players found"})}):Object.entries(E).map(([b,T])=>v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[v.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 rounded-t-lg",children:[v.jsx("h3",{className:"font-bold text-gray-900",children:b}),v.jsxs("p",{className:"text-sm text-gray-600",children:[T.length," player",T.length!==1?"s":""]})]}),v.jsx("div",{className:"divide-y divide-gray-200",children:T.map(S=>v.jsxs("div",{className:"px-4 py-4 flex items-center space-x-3",children:[v.jsx("div",{className:`w-12 h-12 ${y(S.name)} rounded-full flex items-center justify-center`,children:v.jsx("span",{className:"text-white font-bold text-sm",children:m(S.name)})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-gray-900",children:S.name}),v.jsxs("div",{className:"text-sm text-gray-600",children:["#",S.number]})]}),v.jsx("div",{className:"text-right",children:v.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})})]},S.id))})]},b))})]}),v.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2",children:v.jsxs("div",{className:"flex justify-around items-center",children:[v.jsxs("button",{onClick:()=>r("/dashboard"),className:"flex flex-col items-center py-2",children:[v.jsx(aC,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Home"})]}),v.jsxs("button",{className:"flex flex-col items-center py-2",children:[v.jsx(z0,{className:"w-6 h-6 text-purple-600"}),v.jsx("span",{className:"text-xs text-purple-600 font-medium mt-1",children:"Roster"})]}),v.jsxs("button",{className:"flex flex-col items-center py-2 relative",children:[v.jsx(oC,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Chat"}),v.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-xs text-white font-bold",children:"3"})})]}),v.jsxs("button",{className:"flex flex-col items-center py-2",children:[v.jsx(zv,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Schedule"})]}),v.jsxs("button",{className:"flex flex-col items-center py-2",children:[v.jsx(uC,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Media"})]})]})}),v.jsx("div",{className:"h-20"})]})}function HM(){const{user:n}=Qt(),{selectedEvent:e}=$i(),t=Bn(),[r,i]=F.useState(new Date),a=()=>{if(!(n!=null&&n.email))return"RA";const y=n.email,_=y.split("@")[0].split(".");return _.length>=2?(_[0][0]+_[1][0]).toUpperCase():y.substring(0,2).toUpperCase()},s=[{id:1,type:"PRACTICE",title:"Practice Session",date:"2024-06-15",time:"12:00 PM - 12:50 PM",location:"Location TBD",status:"upcoming"},{id:2,type:"PRACTICE",title:"Practice Session",date:"2024-06-22",time:"12:00 PM - 12:50 PM",location:"Location TBD",status:"upcoming"},{id:3,type:"GAME",title:"Championship Game",date:"2024-06-29",time:"2:00 PM - 3:30 PM",location:"Main Field",status:"upcoming"}],u=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=y=>{const _=y.getFullYear(),E=y.getMonth(),b=new Date(_,E,1),S=new Date(_,E+1,0).getDate(),N=b.getDay(),P=[];for(let j=0;j<N;j++)P.push(null);for(let j=1;j<=S;j++){const U=`${_}-${String(E+1).padStart(2,"0")}-${String(j).padStart(2,"0")}`,X=s.some(D=>D.date===U);P.push({day:j,hasEvent:X,dateStr:U})}return P},p=y=>{const _=new Date(r);_.setMonth(_.getMonth()+y),i(_)},m=h(r);return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("div",{className:"bg-white px-4 py-3 shadow-sm",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-white font-bold text-lg",children:a()})}),v.jsxs("div",{className:"flex-1 text-center",children:[v.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(e==null?void 0:e.name)||"Lil' Ballers Fall 24"}),v.jsxs("div",{className:"flex items-center justify-center mt-1",children:[v.jsx("div",{className:"w-4 h-3 bg-cmf-primary mr-2 flex items-center justify-center",children:v.jsx("span",{className:"text-white text-xs font-bold",children:""})}),v.jsx("p",{className:"text-sm text-gray-600",children:"Central Mass Flag (Worcester)"})]})]}),v.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:v.jsx("div",{className:"w-6 h-6 text-gray-400",children:""})})]})}),v.jsxs("div",{className:"px-4 py-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Schedule"}),v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[v.jsx("button",{onClick:()=>p(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:v.jsx(cM,{className:"w-5 h-5 text-gray-600"})}),v.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[u[r.getMonth()]," ",r.getFullYear()]}),v.jsx("button",{onClick:()=>p(1),className:"p-2 hover:bg-gray-100 rounded-full",children:v.jsx(hM,{className:"w-5 h-5 text-gray-600"})})]}),v.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:c.map(y=>v.jsx("div",{className:"px-2 py-2 text-center text-sm font-medium text-gray-600",children:y},y))}),v.jsx("div",{className:"grid grid-cols-7",children:m.map((y,_)=>v.jsx("div",{className:"px-2 py-3 text-center text-sm border-r border-b border-gray-100 min-h-[48px] flex items-center justify-center relative",children:y&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:`${y.hasEvent?"font-bold text-purple-600":"text-gray-900"}`,children:y.day}),y.hasEvent&&v.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-purple-500 rounded-full"})]})},_))})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Upcoming Events"}),s.map(y=>v.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:`w-1 ${y.type==="PRACTICE"?"bg-purple-500":"bg-green-500"} rounded-full mr-4`}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:`${y.type==="PRACTICE"?"text-purple-600":"text-green-600"} font-bold text-sm uppercase tracking-wide mb-1`,children:y.type}),v.jsx("div",{className:"font-bold text-lg text-gray-900 mb-1",children:y.title}),v.jsxs("div",{className:"text-gray-700 text-sm mb-2",children:[new Date(y.date).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),"  ",y.time]}),v.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[v.jsx("span",{className:"mr-1",children:""}),y.location]})]})]})})},y.id))]})]}),v.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2",children:v.jsxs("div",{className:"flex justify-around items-center",children:[v.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex flex-col items-center py-2",children:[v.jsx(aC,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Home"})]}),v.jsxs("button",{onClick:()=>t("/roster"),className:"flex flex-col items-center py-2",children:[v.jsx(z0,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Roster"})]}),v.jsxs("button",{className:"flex flex-col items-center py-2 relative",children:[v.jsx(oC,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Chat"}),v.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-xs text-white font-bold",children:"3"})})]}),v.jsxs("button",{className:"flex flex-col items-center py-2",children:[v.jsx(zv,{className:"w-6 h-6 text-purple-600"}),v.jsx("span",{className:"text-xs text-purple-600 font-medium mt-1",children:"Schedule"})]}),v.jsxs("button",{className:"flex flex-col items-center py-2",children:[v.jsx(uC,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Media"})]})]})}),v.jsx("div",{className:"h-20"})]})}function Jl({onEventSelected:n}){const{events:e,selectedEvent:t,setSelectedEvent:r,setEvents:i,loading:a,error:s,refreshEvents:u}=$i(),{selectedLeagueId:c,user:h}=Qt(),[p,m]=F.useState(!1),[y,_]=F.useState(""),[E,b]=F.useState(""),[T,S]=F.useState(""),[N,P]=F.useState(!1),[j,U]=F.useState(""),X=R=>{if(!Array.isArray(e))return;const M=e.find(B=>B.id===R.target.value);M&&(r(M),n&&n(M))},D=async R=>{var M,B;R.preventDefault(),P(!0),U("");try{const G=E?new Date(E).toISOString().slice(0,10):"",k={id:(await zt.post(`/leagues/${c}/events`,{name:y,date:G,location:T})).data.event_id,name:y,date:G,created_at:new Date().toISOString()};i(xe=>[k,...xe]),r(k),m(!1),_(""),b(""),S(""),n&&n(k)}catch(G){console.error("Event creation error:",G),U(((B=(M=G.response)==null?void 0:M.data)==null?void 0:B.detail)||G.message||"Failed to create event")}finally{P(!1)}};return a?v.jsx("div",{className:"flex flex-col gap-2 mb-6",children:v.jsxs("div",{className:"text-center text-gray-500 py-4",children:[v.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full"}),v.jsx("div",{className:"mt-2",children:"Loading events..."})]})}):s?v.jsx("div",{className:"flex flex-col gap-2 mb-6",children:v.jsxs("div",{className:"text-center text-red-500 py-4 bg-red-50 rounded-lg border border-red-200",children:[v.jsx("div",{className:"mb-2",children:" Failed to load events"}),v.jsx("div",{className:"text-sm text-red-400 mb-3",children:s}),v.jsx("button",{onClick:u,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition text-sm",children:"Try Again"})]})}):v.jsxs("div",{className:"flex flex-col gap-2 mb-6","data-event-selector":!0,children:[e.length===0&&v.jsx("div",{className:"text-center text-cmf-secondary text-lg font-semibold py-2",children:"No events found. Please create a new event."}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("select",{value:(t==null?void 0:t.id)||"",onChange:X,className:"border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",disabled:!Array.isArray(e)||e.length===0,"data-event-selector-dropdown":!0,children:[v.jsx("option",{value:"",children:"Select an event..."}),Array.isArray(e)&&e.map(R=>{let M="Invalid Date";return R.date&&!isNaN(Date.parse(R.date))&&(M=new Date(R.date).toLocaleDateString()),v.jsxs("option",{value:R.id,children:[R.name,"  ",M]},R.id)})]}),v.jsx("button",{onClick:()=>m(!0),className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition",children:"Create New Event"})]}),p&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[v.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create New Event"}),v.jsxs("form",{onSubmit:D,children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium mb-1",children:"Event Name"}),v.jsx("input",{type:"text",value:y,onChange:R=>_(R.target.value),className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium mb-1",children:"Event Date"}),v.jsx("input",{type:"date",value:E,onChange:R=>b(R.target.value),className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),v.jsx("input",{type:"text",value:T,onChange:R=>S(R.target.value),placeholder:"e.g., Central Park Football Field",className:"w-full border rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary"})]}),j&&v.jsx("div",{className:"text-red-500 text-sm mb-4",children:j}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{type:"submit",disabled:N,className:"bg-cmf-primary text-white px-4 py-2 rounded hover:bg-cmf-secondary transition disabled:opacity-50",children:N?"Creating...":"Create"}),v.jsx("button",{type:"button",onClick:()=>m(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})]})}function dC({onCreated:n}){const{user:e,addLeague:t}=Qt(),r=Bn(),[i,a]=F.useState(""),[s,u]=F.useState(!1),[c,h]=F.useState(""),p=async m=>{m.preventDefault(),u(!0),h("");try{const{data:y}=await zt.post("/leagues",{name:i,user_id:e==null?void 0:e.uid,email:e==null?void 0:e.email});t&&t({id:y.league_id,name:i,role:"organizer"}),n&&n(y.league_id),r("/onboarding/event")}catch(y){h(y.message||"Error creating league")}finally{u(!1)}};return v.jsxs("div",{className:"w-full max-w-md text-center",children:[v.jsx("div",{className:"text-center mb-6",children:v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),v.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Create a New League"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"Create your league and then set up your first combine event."}),v.jsxs("form",{onSubmit:p,className:"space-y-4",children:[v.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",placeholder:"League Name",value:i,onChange:m=>a(m.target.value),required:!0}),v.jsx("button",{type:"submit",className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",disabled:s,children:s?"Creating...":"Create League & Continue"}),c&&v.jsx("div",{className:"text-red-500 text-sm mt-2",children:c})]})]})}function zM(){return v.jsx(Jr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:v.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:v.jsx(dC,{})})})}const GM={"40m_dash":.3,vertical_jump:.2,catching:.15,throwing:.15,agility:.2},vs=[{key:"40m_dash",label:"40M Dash"},{key:"vertical_jump",label:"Vertical Jump"},{key:"catching",label:"Catching"},{key:"throwing",label:"Throwing"},{key:"agility",label:"Agility"}],vm={balanced:{name:"Balanced",description:"Equal emphasis on all skills",weights:{"40m_dash":.2,vertical_jump:.2,catching:.2,throwing:.2,agility:.2}},speed:{name:"Speed Focused",description:"Emphasizes speed and athleticism",weights:{"40m_dash":.4,vertical_jump:.3,catching:.1,throwing:.1,agility:.1}},skills:{name:"Skills Focused",description:"Emphasizes catching and throwing",weights:{"40m_dash":.1,vertical_jump:.1,catching:.35,throwing:.35,agility:.1}},athletic:{name:"Athletic",description:"Emphasizes physical abilities",weights:{"40m_dash":.25,vertical_jump:.25,catching:.15,throwing:.15,agility:.2}}};function qM(){const{selectedEvent:n,noLeague:e,LeagueFallback:t}=$i(),{user:r,selectedLeagueId:i,userRole:a,leagues:s}=Qt(),[u,c]=F.useState(""),[h,p]=F.useState([]),[m,y]=F.useState(!1),[_,E]=F.useState(null),[b,T]=F.useState([]),[S,N]=F.useState({...GM}),[P,j]=F.useState("athletic"),U=Bn(),X=()=>{const k=Object.values(S).reduce((ve,J)=>ve+J,0),xe={};return vs.forEach(ve=>{xe[ve.key]=Math.round(S[ve.key]/k*100)}),xe},D=(k,xe)=>{const ve={...X(),[k]:xe},J=Object.values(ve).reduce((fe,Pe)=>fe+Pe,0);if(J===0)return;const ue={};vs.forEach(fe=>{ue[fe.key]=ve[fe.key]/J}),N(ue),j(null)},R=k=>{N({...vm[k].weights}),j(k)};F.useEffect(()=>{async function k(){var xe;if(!(!n||!r||!i))try{const{data:ve}=await zt.get(`/players?event_id=${n.id}`);T(ve)}catch(ve){((xe=ve.response)==null?void 0:xe.status)===404?T([]):(console.error("[CoachDashboard] Players fetch error:",ve),T([]))}}k()},[n,r,i]);const M=[...new Set(b.map(k=>k.age_group))].sort();F.useEffect(()=>{const xe=setTimeout(async()=>{var ve;if(!u||!r||!i||!n){p([]);return}y(!0),E(null);try{const J=new URLSearchParams({age_group:u,event_id:n.id});J.append("weight_40m_dash",S["40m_dash"]),J.append("weight_vertical_jump",S.vertical_jump),J.append("weight_catching",S.catching),J.append("weight_throwing",S.throwing),J.append("weight_agility",S.agility);const ue=await zt.get(`/rankings?${J.toString()}`);p(ue.data)}catch(J){((ve=J.response)==null?void 0:ve.status)===404?(E(null),p([])):(console.error("[CoachDashboard] Rankings fetch error:",J),E(J.message))}finally{y(!1)}},300);return()=>clearTimeout(xe)},[u,S,r,i,n]);const B=()=>{if(!u||h.length===0)return;let k=`Rank,Name,Player Number,Composite Score
`;h.forEach(Pe=>{k+=`${Pe.rank},"${Pe.name}",${Pe.number},${Pe.composite_score.toFixed(2)}
`});const xe=n?new Date(n.date).toISOString().slice(0,10):"event",ve=`rankings_${u}_${xe}.csv`,J=new Blob([k],{type:"text/csv"}),ue=URL.createObjectURL(J),fe=document.createElement("a");fe.href=ue,fe.download=ve,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(ue)},G=n&&n.date&&!isNaN(Date.parse(n.date))?new Date(n.date).toLocaleDateString():"Invalid Date";if(F.useEffect(()=>{const k=window.location.hash;if(k){const xe=document.querySelector(k);xe&&xe.scrollIntoView({behavior:"smooth"})}},[]),b.length===0){const k=()=>{U("/admin#player-upload-section")};return!s||s.length===0?v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh] mt-20",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-lg mx-auto text-center border-2 border-cmf-primary/30",children:[v.jsx("h2",{className:"text-2xl font-bold text-cmf-secondary mb-4",children:"Welcome to Woo-Combine!"}),v.jsx("p",{className:"text-cmf-secondary mb-2",children:"It looks like you haven't created a league yet. That's totally normal for new organizers!"}),v.jsx("p",{className:"text-gray-700 mb-4",children:"To get started, create your first league below:"}),v.jsx(dC,{onCreated:()=>U("/onboarding/event")})]})}):v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh] mt-20",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-lg mx-auto text-center border-2 border-cmf-primary/30",children:[v.jsx("h2",{className:"text-2xl font-bold text-cmf-secondary mb-4",children:"Welcome to Woo-Combine!"}),v.jsx("p",{className:"text-cmf-secondary mb-2",children:"It looks like you haven't added any players yet. That's totally normal for new leagues!"}),v.jsx("p",{className:"text-gray-700 mb-4",children:"To get started, you can:"}),v.jsx("div",{className:"flex flex-col gap-3 items-center",children:a==="organizer"?v.jsx("button",{onClick:k,className:"bg-cmf-secondary text-white font-bold px-4 py-2 rounded shadow hover:bg-cmf-primary transition w-full max-w-xs",children:" Import Players"}):v.jsx("span",{className:"text-gray-500",children:"Waiting for organizer to import players."})})]})})}if(e)return v.jsx(t,{});const H=X();return v.jsx("div",{className:"min-h-screen bg-gray-50 text-cmf-contrast font-sans",children:v.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 mt-20",children:[v.jsx(Jl,{}),v.jsx("div",{className:"text-xs uppercase font-bold text-gray-500 tracking-wide mb-1",children:"Coach Dashboard"}),v.jsx("h1",{className:"text-lg font-semibold text-gray-900 mb-4",children:n?`${n.name}  ${G}`:"No event selected"}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4 shadow-sm",children:[v.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Select Age Group"}),v.jsxs("select",{value:u,onChange:k=>c(k.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-cmf-primary focus:border-cmf-primary sm:text-sm",children:[v.jsx("option",{value:"",children:"Select Age Group"}),M.map(k=>v.jsx("option",{value:k,children:k},k))]})]}),a==="organizer"&&v.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-2xl p-5 mb-6",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[v.jsx(sC,{className:"w-4 h-4 text-cmf-primary"}),v.jsx("h2",{className:"text-sm font-medium text-gray-800",children:"Ranking Priorities"})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Presets:"}),v.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(vm).map(([k,xe])=>v.jsxs("button",{onClick:()=>R(k),className:`p-3 text-left rounded-lg border-2 transition-all ${P===k?"border-cmf-primary bg-cmf-primary/5 text-cmf-primary":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[v.jsx("div",{className:"font-medium text-sm",children:xe.name}),v.jsx("div",{className:"text-xs text-gray-500 mt-1",children:xe.description})]},k))})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Custom Adjustments:",P&&v.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Currently using ",vm[P].name,")"]})]}),v.jsx("div",{className:"space-y-4",children:vs.map(k=>v.jsx("div",{className:"flex items-center justify-between",children:v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:k.label}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("input",{type:"range",min:0,max:100,value:H[k.key],onChange:xe=>D(k.key,parseInt(xe.target.value)),className:"flex-1 accent-cmf-primary h-2 rounded-lg bg-gray-100"}),v.jsx("div",{className:"w-12 text-right",children:v.jsxs("span",{className:"text-sm font-mono text-cmf-primary",children:[H[k.key],"%"]})})]})]})},k.key))}),v.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"Rankings update automatically as you adjust priorities"})]})]}),m?v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center",children:[v.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-cmf-primary rounded-full mb-2"}),v.jsx("div",{className:"text-gray-500",children:"Updating rankings..."})]}):_?v.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700",children:[v.jsx("strong",{children:"Error:"})," ",_]}):u===""?v.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6 text-center text-gray-500",children:"Please select an age group to view rankings."}):h.length===0?v.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center text-yellow-700",children:"No players found for this age group."}):v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 overflow-x-auto",children:[v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[v.jsxs("h2",{className:"text-xl font-semibold",children:["Rankings (",u,")"]}),v.jsx("button",{onClick:B,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-700 text-sm",disabled:h.length===0,children:"Export as CSV"})]}),v.jsx("div",{className:"sm:hidden",children:h.map(k=>{const xe={};return vs.forEach(ve=>{const ue=h.filter(fe=>fe[ve.key]!=null).map(fe=>({player_id:fe.player_id,score:fe[ve.key]})).sort((fe,Pe)=>Pe.score-fe.score).findIndex(fe=>fe.player_id===k.player_id)+1;xe[ve.key]=ue>0?ue:null}),v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-3 border",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("span",{className:`font-bold text-lg ${k.rank===1?"text-yellow-500":k.rank===2?"text-gray-500":k.rank===3?"text-orange-500":""}`,children:k.rank===1?"":k.rank===2?"":k.rank===3?"":`#${k.rank}`}),v.jsx("span",{className:"font-semibold",children:k.name})]}),v.jsxs("div",{className:"text-sm text-gray-600",children:["Player #",k.number]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-xs text-gray-500",children:"Overall Score"}),v.jsx("div",{className:"font-mono font-bold text-lg text-cmf-primary",children:k.composite_score.toFixed(2)})]})]}),v.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:vs.map(ve=>v.jsxs("div",{className:"bg-white rounded p-2",children:[v.jsx("div",{className:"font-medium text-gray-700",children:ve.label}),k[ve.key]!=null?v.jsxs("div",{children:[v.jsx("span",{className:"font-mono",children:k[ve.key]}),v.jsxs("span",{className:"text-gray-500 ml-1",children:["#",xe[ve.key]||"-"]})]}):v.jsx("span",{className:"text-gray-400",children:"No score"})]},ve.key))})]},k.player_id)})}),v.jsx("div",{className:"hidden sm:block overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b border-gray-200",children:[v.jsx("th",{className:"py-3 px-2",children:"Rank"}),v.jsx("th",{className:"py-3 px-2",children:"Name"}),v.jsx("th",{className:"py-3 px-2",children:"Player #"}),v.jsx("th",{className:"py-3 px-2",children:"Overall Score"}),v.jsx("th",{className:"py-3 px-2 text-center",children:"40M Dash"}),v.jsx("th",{className:"py-3 px-2 text-center",children:"Vertical"}),v.jsx("th",{className:"py-3 px-2 text-center",children:"Catching"}),v.jsx("th",{className:"py-3 px-2 text-center",children:"Throwing"}),v.jsx("th",{className:"py-3 px-2 text-center",children:"Agility"})]})}),v.jsx("tbody",{children:h.map(k=>{const xe={};return vs.forEach(ve=>{const ue=h.filter(fe=>fe[ve.key]!=null).map(fe=>({player_id:fe.player_id,score:fe[ve.key]})).sort((fe,Pe)=>Pe.score-fe.score).findIndex(fe=>fe.player_id===k.player_id)+1;xe[ve.key]=ue>0?ue:null}),v.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[v.jsx("td",{className:`py-3 px-2 font-bold ${k.rank===1?"text-yellow-500":k.rank===2?"text-gray-500":k.rank===3?"text-orange-500":""}`,children:k.rank===1?"":k.rank===2?"":k.rank===3?"":k.rank}),v.jsx("td",{className:"py-3 px-2",children:k.name}),v.jsx("td",{className:"py-3 px-2",children:k.number}),v.jsx("td",{className:"py-3 px-2 font-mono font-bold",children:k.composite_score.toFixed(2)}),vs.map(ve=>v.jsx("td",{className:"py-3 px-2 text-center",children:k[ve.key]!=null?v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"font-mono text-sm",children:k[ve.key]}),v.jsxs("span",{className:"text-xs text-gray-500",children:["#",xe[ve.key]||"-"]})]}):v.jsx("span",{className:"text-gray-400",children:"-"})},ve.key))]},k.player_id)})})]})})]})]})})}const XM=[{value:"40m_dash",label:"40M Dash"},{value:"vertical_jump",label:"Vertical Jump"},{value:"catching",label:"Catching"},{value:"throwing",label:"Throwing"},{value:"agility",label:"Agility"}];function WM({playerId:n,onSuccess:e}){const{user:t,selectedLeagueId:r}=Qt(),{selectedEvent:i}=$i(),[a,s]=F.useState(""),[u,c]=F.useState(""),[h,p]=F.useState(!1),[m,y]=F.useState(""),[_,E]=F.useState(""),b=async T=>{if(T.preventDefault(),y(""),E(""),!a||!u){y("Please select a drill type and enter a value.");return}if(!i){y("No event selected. Please select an event first.");return}p(!0);try{await zt.post("/drill-results/",{player_id:n,type:a,value:parseFloat(u),event_id:i.id}),E("Drill result submitted!"),s(""),c(""),e&&e()}catch(S){y(S.message)}finally{p(!1)}};return v.jsxs("form",{onSubmit:b,className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md mx-auto mb-6",children:[v.jsx("h2",{className:"text-xl font-bold mb-4 text-cmf-primary",children:"Submit Drill Result"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block mb-1 font-semibold",children:"Drill Type"}),v.jsxs("select",{value:a,onChange:T=>s(T.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0,children:[v.jsx("option",{value:"",children:"Select a drill"}),XM.map(T=>v.jsx("option",{value:T.value,children:T.label},T.value))]})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block mb-1 font-semibold",children:"Value"}),v.jsx("input",{type:"number",step:"any",value:u,onChange:T=>c(T.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 focus:ring-cmf-primary focus:border-cmf-primary",required:!0})]}),m&&v.jsx("div",{className:"text-red-500 mb-2 text-sm",children:m}),_&&v.jsx("div",{className:"text-green-600 mb-2 text-sm",children:_}),v.jsx("button",{type:"submit",className:"w-full bg-cmf-primary hover:bg-cmf-secondary text-white font-bold py-2 rounded-lg shadow transition",disabled:h,children:h?"Submitting...":"Submit Result"})]})}const Oc=[{key:"40m_dash",label:"40M Dash",unit:"sec"},{key:"vertical_jump",label:"Vertical Jump",unit:"in"},{key:"catching",label:"Catching",unit:"pts"},{key:"throwing",label:"Throwing",unit:"pts"},{key:"agility",label:"Agility",unit:"pts"}],$M={"40m_dash":.3,vertical_jump:.2,catching:.15,throwing:.15,agility:.2},ym={balanced:{name:"Balanced",description:"Equal emphasis on all skills",weights:{"40m_dash":.2,vertical_jump:.2,catching:.2,throwing:.2,agility:.2}},speed:{name:"Speed Focused",description:"Emphasizes speed and athleticism",weights:{"40m_dash":.4,vertical_jump:.3,catching:.1,throwing:.1,agility:.1}},skills:{name:"Skills Focused",description:"Emphasizes catching and throwing",weights:{"40m_dash":.1,vertical_jump:.1,catching:.35,throwing:.35,agility:.1}},athletic:{name:"Athletic",description:"Default weighting system",weights:{"40m_dash":.3,vertical_jump:.2,catching:.15,throwing:.15,agility:.2}}};function YM({player:n,allPlayers:e,onClose:t,onSave:r}){const[i,a]=F.useState({name:(n==null?void 0:n.name)||"",number:(n==null?void 0:n.number)||"",age_group:(n==null?void 0:n.age_group)||""}),[s,u]=F.useState(!1),[c,h]=F.useState(""),p=[...new Set(e.map(_=>_.age_group).filter(_=>_&&_.trim()!==""))].sort(),m=(_,E)=>{a(b=>({...b,[_]:E})),h("")},y=async()=>{var _,E;if(!i.name.trim()){h("Player name is required");return}u(!0),h("");try{const b={name:i.name.trim(),number:i.number?parseInt(i.number):null,age_group:i.age_group.trim()||null};await zt.put(`/players/${n.id}?event_id=${n.event_id}`,b),r(),t()}catch(b){console.error("Error updating player:",b),h(((E=(_=b.response)==null?void 0:_.data)==null?void 0:E.detail)||"Failed to update player")}finally{u(!1)}};return n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[v.jsxs("div",{className:"bg-cmf-primary text-white p-6 rounded-t-xl flex justify-between items-center",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(lC,{className:"w-5 h-5"}),v.jsx("h2",{className:"text-xl font-bold",children:"Edit Player"})]}),v.jsx("button",{onClick:t,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition",children:v.jsx(cC,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"p-6 space-y-4",children:[c&&v.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:c}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Name *"}),v.jsx("input",{type:"text",value:i.name,onChange:_=>m("name",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter player name"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Number"}),v.jsx("input",{type:"number",value:i.number,onChange:_=>m("number",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"Enter player number",min:"1",max:"999"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Group"}),v.jsx("input",{type:"text",list:"age-group-suggestions",value:i.age_group,onChange:_=>m("age_group",_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cmf-primary focus:border-cmf-primary",placeholder:"e.g., 6U, U8, 7-8, 9-10 years old"}),v.jsxs("datalist",{id:"age-group-suggestions",children:[p.map(_=>v.jsx("option",{value:_},_)),v.jsx("option",{value:"6U"}),v.jsx("option",{value:"U6"}),v.jsx("option",{value:"8U"}),v.jsx("option",{value:"U8"}),v.jsx("option",{value:"10U"}),v.jsx("option",{value:"U10"}),v.jsx("option",{value:"12U"}),v.jsx("option",{value:"U12"}),v.jsx("option",{value:"5-6"}),v.jsx("option",{value:"7-8"}),v.jsx("option",{value:"9-10"}),v.jsx("option",{value:"11-12"}),v.jsx("option",{value:"13-14"}),v.jsx("option",{value:"15-16"}),v.jsx("option",{value:"17-18"})]}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type any format your league uses (6U, U8, 7-8 years old, etc.)"})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{onClick:t,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 rounded-lg transition",disabled:s,children:"Cancel"}),v.jsx("button",{onClick:y,disabled:s,className:"flex-1 bg-cmf-primary hover:bg-cmf-secondary text-white font-medium py-2 rounded-lg transition disabled:opacity-50",children:s?"Saving...":"Save Changes"})]})]})]})}):null}function KM({player:n,allPlayers:e,onClose:t}){const[r,i]=F.useState({...$M}),[a,s]=F.useState("athletic");if(!n)return null;const u=()=>{const S=Object.values(r).reduce((P,j)=>P+j,0),N={};return Oc.forEach(P=>{N[P.key]=Math.round(r[P.key]/S*100)}),N},c=(S,N)=>{const P={...u(),[S]:N},j=Object.values(P).reduce((X,D)=>X+D,0);if(j===0)return;const U={};Oc.forEach(X=>{U[X.key]=P[X.key]/j}),i(U),s(null)},h=S=>{i({...ym[S].weights}),s(S)},p={};Oc.forEach(S=>{const P=e.filter(j=>j[S.key]!=null&&j.age_group===n.age_group).map(j=>({player_id:j.id,score:j[S.key]})).sort((j,U)=>U.score-j.score).findIndex(j=>j.player_id===n.id)+1;p[S.key]=P>0?P:null});const m=Oc.map(S=>{const N=n[S.key]!=null?n[S.key]:null,P=r[S.key],j=(N??0)*P;return{...S,rawScore:N,weight:P,weightedScore:j,rank:p[S.key]}}),y=m.reduce((S,N)=>S+N.weightedScore,0),_=u(),E=e.filter(S=>S.age_group===n.age_group),T=E.map(S=>{const N=Oc.reduce((P,j)=>P+(S[j.key]||0)*r[j.key],0);return{...S,currentScore:N}}).sort((S,N)=>N.currentScore-S.currentScore).findIndex(S=>S.id===n.id)+1;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] flex flex-col",children:[v.jsxs("div",{className:"bg-cmf-primary text-white px-6 py-3 rounded-t-xl flex justify-between items-center flex-shrink-0",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-bold",children:n.name}),v.jsxs("p",{className:"text-cmf-light text-sm",children:["Player #",n.number,"  Age Group: ",n.age_group]})]}),v.jsxs("div",{className:"text-right mr-4",children:[v.jsx("div",{className:"text-sm opacity-75",children:"Overall Score"}),v.jsxs("div",{className:"text-2xl font-bold",children:[y.toFixed(2)," pts"]}),v.jsxs("div",{className:"text-xs opacity-75",children:["Rank #",T," of ",E.length]})]}),v.jsx("button",{onClick:t,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition",children:v.jsx(cC,{className:"w-5 h-5"})})]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsxs("div",{className:"h-full flex",children:[v.jsx("div",{className:"flex-1 p-4",children:v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[v.jsx(PM,{className:"w-5 h-5 text-cmf-primary"}),"Drill Performance & Weight Control"]}),v.jsx("div",{className:"grid grid-cols-1 gap-2 flex-1 overflow-y-auto",children:m.map(S=>v.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-200",children:[v.jsxs("div",{className:"flex items-center justify-between mb-1",children:[v.jsx("div",{className:"flex items-center gap-2",children:v.jsxs("div",{className:"min-w-0",children:[v.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:S.label}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-base font-bold text-cmf-primary",children:S.rawScore!=null?`${S.rawScore} ${S.unit}`:"No score"}),S.rank&&v.jsxs("span",{className:"bg-cmf-primary text-white px-1.5 py-0.5 rounded-full text-xs font-medium",children:["#",S.rank]})]})]})}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-xs text-gray-600",children:"Contribution"}),v.jsxs("div",{className:"text-base font-bold text-cmf-secondary",children:[S.weightedScore.toFixed(2)," pts"]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("span",{className:"text-xs font-medium text-gray-600 w-16",children:[_[S.key],"%"]}),v.jsx("input",{type:"range",min:0,max:100,value:_[S.key],onChange:N=>c(S.key,parseInt(N.target.value)),className:"flex-1 accent-cmf-primary h-2 rounded-lg"}),v.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-gradient-to-r from-cmf-primary to-cmf-secondary transition-all duration-300",style:{width:`${Math.min(S.weightedScore/Math.max(...m.map(N=>N.weightedScore))*100,100)}%`}})})]})]},S.key))}),v.jsx("div",{className:"mt-2 p-2 bg-cmf-primary/10 rounded-lg border-2 border-cmf-primary/20 flex-shrink-0",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"Total Composite Score:"}),v.jsxs("span",{className:"text-lg font-bold text-cmf-primary",children:[y.toFixed(2)," pts (Rank #",T,")"]})]})})]})}),v.jsx("div",{className:"w-80 bg-gray-50 p-4 border-l border-gray-200 overflow-y-auto",children:v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsxs("div",{className:"mb-4",children:[v.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[v.jsx(sC,{className:"w-4 h-4 text-cmf-primary"}),"Weight Scenarios"]}),v.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(ym).map(([S,N])=>v.jsxs("button",{onClick:()=>h(S),className:`p-2 text-left rounded-lg border-2 transition-all ${a===S?"border-cmf-primary bg-cmf-primary/5 text-cmf-primary":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[v.jsx("div",{className:"font-medium text-sm",children:N.name}),v.jsx("div",{className:"text-xs text-gray-500",children:N.description})]},S))})]}),v.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200 flex-1 min-h-0",children:[v.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[v.jsx(sM,{className:"w-4 h-4 text-yellow-500"}),"Ranking Analysis"]}),v.jsxs("div",{className:"space-y-2 text-sm overflow-y-auto max-h-96",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-600",children:"Age Group Rank:"}),v.jsxs("span",{className:"font-bold text-cmf-primary",children:["#",T," of ",E.length]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-600",children:"Overall Score:"}),v.jsxs("span",{className:"font-bold text-cmf-secondary",children:[y.toFixed(2)," pts"]})]}),v.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[v.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Score Breakdown:"}),m.map(S=>v.jsxs("div",{className:"flex justify-between text-xs",children:[v.jsxs("span",{className:"text-gray-600",children:[S.label,":"]}),v.jsxs("span",{className:"font-mono",children:[S.weightedScore.toFixed(2)," pts"]})]},S.key))]}),v.jsx("div",{className:"pt-2 border-t border-gray-200",children:v.jsx("div",{className:"text-xs text-gray-500",children:a?`Using ${ym[a].name} preset`:"Using custom weights"})})]})]}),v.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center flex-shrink-0",children:" Adjust sliders for real-time changes"})]})})]})})]})})}function QM(){const{selectedEvent:n}=$i(),{user:e,selectedLeagueId:t,userRole:r}=Qt(),[i,a]=F.useState([]),[s,u]=F.useState(!0),[c,h]=F.useState(null),[p,m]=F.useState({}),[y,_]=F.useState(null),[E,b]=F.useState(null),T=()=>v.jsx("div",{className:"bg-cmf-primary/10 border-l-4 border-cmf-primary text-cmf-primary px-4 py-3 mb-6 rounded cursor-pointer hover:bg-cmf-primary/15 transition",onClick:()=>{const j=document.querySelector('[class*="EventSelector"]')||document.querySelector("select")||document.querySelector("[data-event-selector]");j&&(j.scrollIntoView({behavior:"smooth",block:"center"}),j.focus())},children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-lg",children:""}),v.jsxs("div",{children:[v.jsx("strong",{children:"Tip:"})," Select an event above to manage players and record results.",v.jsx("div",{className:"text-sm opacity-75 mt-1",children:" Click here or scroll up to find the event selector"})]})]})}),S=F.useCallback(async()=>{var j;if(!n||!e||!t){a([]),u(!1);return}u(!0),h(null);try{const{data:U}=await zt.get(`/players?event_id=${n.id}`);if(a(U),y){const X=U.find(D=>D.id===y.id);X&&(console.log(" PlayerDetailsModal data refreshed for:",X.name),console.log(" Full player data structure:",X),console.log(" 40M dash check:",{"40m_dash":X["40m_dash"],drill_40m_dash:X.drill_40m_dash,fortym_dash:X.fortym_dash}),_(X))}}catch(U){((j=U.response)==null?void 0:j.status)===404?(h(null),a([])):(console.error("[Players] Fetch error:",U),h(U.message))}finally{u(!1)}},[n,e,t]);F.useEffect(()=>{S()},[S]);const N=j=>{m(U=>({...U,[j]:!U[j]}))},P=(i||[]).reduce((j,U)=>{const X=U.age_group||"Unassigned";return j[X]=j[X]||[],j[X].push(U),j},{});return!n||!n.id?v.jsx("div",{className:"min-h-screen bg-gray-50",children:v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh]",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-lg mx-auto text-center border-2 border-cmf-primary/30",children:[v.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No event selected"}),v.jsx("p",{className:"text-cmf-secondary mb-4",children:r==="organizer"?"Select or create an event to manage players and drills.":"Ask your league operator to assign you to an event."}),v.jsx("div",{className:"mb-4",children:v.jsx(Jl,{})})]})})}):s?v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsx("div",{children:"Loading players..."})}):c?c.includes("422")?v.jsx("div",{className:"min-h-screen bg-gray-50",children:v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh]",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-lg mx-auto text-center border-2 border-cmf-primary/30",children:[v.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No players found"}),v.jsx("p",{className:"text-cmf-secondary mb-4",children:"Use the Admin tab to upload or import players to get started."}),v.jsx(Tt,{to:"/admin",className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded shadow hover:bg-cmf-secondary transition",children:"Go to Admin"})]})})}):v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-red-500",children:["Error: ",c]})}):i.length===0?v.jsx("div",{className:"min-h-screen bg-gray-50",children:v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh]",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-lg mx-auto text-center border-2 border-cmf-primary/30",children:[v.jsx("h2",{className:"text-2xl font-bold text-cmf-primary mb-4",children:"No players found yet"}),v.jsx("p",{className:"text-cmf-secondary mb-4",children:"You can upload a CSV or add them manually to get started."}),v.jsxs("div",{className:"flex gap-4 justify-center",children:[v.jsx(Tt,{to:"/admin#player-upload-section",className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded shadow hover:bg-cmf-secondary transition",children:"Upload CSV"}),v.jsx(Tt,{to:"/admin#player-upload-section",className:"bg-cmf-secondary text-white font-bold px-4 py-2 rounded shadow hover:bg-cmf-primary transition",children:"Add Player"})]})]})})}):v.jsx("div",{className:"min-h-screen bg-gray-50 text-cmf-contrast font-sans",children:v.jsxs("div",{className:"max-w-lg mx-auto px-4 sm:px-6 mt-20",children:[v.jsx(Jl,{}),v.jsx(T,{}),v.jsx("div",{className:"text-xs uppercase font-bold text-gray-500 tracking-wide mb-1",children:"WooCombine: Players"}),v.jsxs("h1",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Managing: ",n.name,"  ",new Date(n.event_date).toLocaleDateString()]}),y&&v.jsx(KM,{player:y,allPlayers:i,onClose:()=>_(null)}),E&&v.jsx(YM,{player:E,allPlayers:i,onClose:()=>b(null),onSave:S}),Object.keys(P).length===0?v.jsx("div",{className:"text-center py-8 text-gray-500",children:"No players found for this event."}):Object.entries(P).sort(([j],[U])=>j.localeCompare(U)).map(([j,U])=>{const X=U.sort((D,R)=>D.composite_score!==R.composite_score?(R.composite_score||0)-(D.composite_score||0):D.name.localeCompare(R.name));return v.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 py-4 px-5 mb-6",children:[v.jsx("div",{className:"text-xs font-bold text-gray-500 tracking-wide uppercase mb-1 flex items-center gap-2",children:v.jsxs("span",{children:["Age Group: ",j]})}),v.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:v.jsxs("table",{className:"min-w-full bg-white",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"py-2 px-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),v.jsx("th",{className:"py-2 px-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),v.jsx("th",{className:"py-2 px-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player #"}),v.jsx("th",{className:"py-2 px-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Composite Score"}),v.jsx("th",{className:"py-2 px-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X.map((D,R)=>v.jsxs(Ng.Fragment,{children:[v.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[v.jsx("td",{className:`py-2 px-2 font-bold ${R===0?"text-yellow-500":R===1?"text-gray-500":R===2?"text-orange-500":""}`,children:R===0?"":R===1?"":R===2?"":R+1}),v.jsx("td",{className:"py-2 px-2",children:D.name}),v.jsx("td",{className:"py-2 px-2",children:D.number||"N/A"}),v.jsx("td",{className:"py-2 px-2 font-mono",children:D.composite_score!=null?D.composite_score.toFixed(2):"No scores yet"}),v.jsx("td",{className:"py-2 px-2",children:v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>_(D),className:"text-blue-600 hover:text-blue-900 text-sm underline",disabled:!D.composite_score&&!Object.values(D).some(M=>typeof M=="number"&&M>0),children:"View Stats"}),v.jsx("button",{onClick:()=>b(D),className:"text-green-600 hover:text-green-900 text-sm underline",children:"Edit"}),v.jsx("button",{onClick:()=>N(D.id),className:"text-cyan-600 hover:text-cyan-900 text-sm underline",children:"Add Result"})]})})]}),p[D.id]&&v.jsx("tr",{className:"bg-blue-50",children:v.jsx("td",{colSpan:"5",className:"py-4 px-2",children:v.jsx(WM,{playerId:D.id,onSuccess:()=>{N(D.id),S()}})})})]},D.id))})]})})]},j)})]})})}var Rl={},xm={exports:{}},_m,vE;function ZM(){if(vE)return _m;vE=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _m=n,_m}var wm,yE;function JM(){if(yE)return wm;yE=1;var n=ZM();function e(){}function t(){}return t.resetWarningCache=e,wm=function(){function r(s,u,c,h,p,m){if(m!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},wm}var xE;function pC(){return xE||(xE=1,xm.exports=JM()()),xm.exports}var Em,_E;function mC(){return _E||(_E=1,Em={L:1,M:0,Q:3,H:2}),Em}var Am,wE;function gC(){return wE||(wE=1,Am={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Am}var bm,EE;function ek(){if(EE)return bm;EE=1;var n=gC();function e(t){this.mode=n.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var r=0;r<this.data.length;r++)t.put(this.data.charCodeAt(r),8)}},bm=e,bm}var Tm,AE;function tk(){if(AE)return Tm;AE=1;var n=mC();function e(t,r){this.totalCount=t,this.dataCount=r}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,r){var i=e.getRsBlockTable(t,r);if(i==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+r);for(var a=i.length/3,s=new Array,u=0;u<a;u++)for(var c=i[u*3+0],h=i[u*3+1],p=i[u*3+2],m=0;m<c;m++)s.push(new e(h,p));return s},e.getRsBlockTable=function(t,r){switch(r){case n.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case n.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case n.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case n.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},Tm=e,Tm}var Sm,bE;function nk(){if(bE)return Sm;bE=1;function n(){this.buffer=new Array,this.length=0}return n.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Sm=n,Sm}var Cm,TE;function vC(){if(TE)return Cm;TE=1;for(var n={glog:function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)n.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)n.EXP_TABLE[e]=n.EXP_TABLE[e-4]^n.EXP_TABLE[e-5]^n.EXP_TABLE[e-6]^n.EXP_TABLE[e-8];for(var e=0;e<255;e++)n.LOG_TABLE[n.EXP_TABLE[e]]=e;return Cm=n,Cm}var Im,SE;function yC(){if(SE)return Im;SE=1;var n=vC();function e(t,r){if(t.length==null)throw new Error(t.length+"/"+r);for(var i=0;i<t.length&&t[i]==0;)i++;this.num=new Array(t.length-i+r);for(var a=0;a<t.length-i;a++)this.num[a]=t[a+i]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var r=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var a=0;a<t.getLength();a++)r[i+a]^=n.gexp(n.glog(this.get(i))+n.glog(t.get(a)));return new e(r,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var r=n.glog(this.get(0))-n.glog(t.get(0)),i=new Array(this.getLength()),a=0;a<this.getLength();a++)i[a]=this.get(a);for(var a=0;a<t.getLength();a++)i[a]^=n.gexp(n.glog(t.get(a))+r);return new e(i,0).mod(t)}},Im=e,Im}var Nm,CE;function rk(){if(CE)return Nm;CE=1;var n=gC(),e=yC(),t=vC(),r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var s=a<<10;i.getBCHDigit(s)-i.getBCHDigit(i.G15)>=0;)s^=i.G15<<i.getBCHDigit(s)-i.getBCHDigit(i.G15);return(a<<10|s)^i.G15_MASK},getBCHTypeNumber:function(a){for(var s=a<<12;i.getBCHDigit(s)-i.getBCHDigit(i.G18)>=0;)s^=i.G18<<i.getBCHDigit(s)-i.getBCHDigit(i.G18);return a<<12|s},getBCHDigit:function(a){for(var s=0;a!=0;)s++,a>>>=1;return s},getPatternPosition:function(a){return i.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,s,u){switch(a){case r.PATTERN000:return(s+u)%2==0;case r.PATTERN001:return s%2==0;case r.PATTERN010:return u%3==0;case r.PATTERN011:return(s+u)%3==0;case r.PATTERN100:return(Math.floor(s/2)+Math.floor(u/3))%2==0;case r.PATTERN101:return s*u%2+s*u%3==0;case r.PATTERN110:return(s*u%2+s*u%3)%2==0;case r.PATTERN111:return(s*u%3+(s+u)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var s=new e([1],0),u=0;u<a;u++)s=s.multiply(new e([1,t.gexp(u)],0));return s},getLengthInBits:function(a,s){if(1<=s&&s<10)switch(a){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(s<27)switch(a){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else if(s<41)switch(a){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}else throw new Error("type:"+s)},getLostPoint:function(a){for(var s=a.getModuleCount(),u=0,c=0;c<s;c++)for(var h=0;h<s;h++){for(var p=0,m=a.isDark(c,h),y=-1;y<=1;y++)if(!(c+y<0||s<=c+y))for(var _=-1;_<=1;_++)h+_<0||s<=h+_||y==0&&_==0||m==a.isDark(c+y,h+_)&&p++;p>5&&(u+=3+p-5)}for(var c=0;c<s-1;c++)for(var h=0;h<s-1;h++){var E=0;a.isDark(c,h)&&E++,a.isDark(c+1,h)&&E++,a.isDark(c,h+1)&&E++,a.isDark(c+1,h+1)&&E++,(E==0||E==4)&&(u+=3)}for(var c=0;c<s;c++)for(var h=0;h<s-6;h++)a.isDark(c,h)&&!a.isDark(c,h+1)&&a.isDark(c,h+2)&&a.isDark(c,h+3)&&a.isDark(c,h+4)&&!a.isDark(c,h+5)&&a.isDark(c,h+6)&&(u+=40);for(var h=0;h<s;h++)for(var c=0;c<s-6;c++)a.isDark(c,h)&&!a.isDark(c+1,h)&&a.isDark(c+2,h)&&a.isDark(c+3,h)&&a.isDark(c+4,h)&&!a.isDark(c+5,h)&&a.isDark(c+6,h)&&(u+=40);for(var b=0,h=0;h<s;h++)for(var c=0;c<s;c++)a.isDark(c,h)&&b++;var T=Math.abs(100*b/s/s-50)/5;return u+=T*10,u}};return Nm=i,Nm}var Rm,IE;function ik(){if(IE)return Rm;IE=1;var n=ek(),e=tk(),t=nk(),r=rk(),i=yC();function a(u,c){this.typeNumber=u,this.errorCorrectLevel=c,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var s=a.prototype;return s.addData=function(u){var c=new n(u);this.dataList.push(c),this.dataCache=null},s.isDark=function(u,c){if(u<0||this.moduleCount<=u||c<0||this.moduleCount<=c)throw new Error(u+","+c);return this.modules[u][c]},s.getModuleCount=function(){return this.moduleCount},s.make=function(){if(this.typeNumber<1){var u=1;for(u=1;u<40;u++){for(var c=e.getRSBlocks(u,this.errorCorrectLevel),h=new t,p=0,m=0;m<c.length;m++)p+=c[m].dataCount;for(var m=0;m<this.dataList.length;m++){var y=this.dataList[m];h.put(y.mode,4),h.put(y.getLength(),r.getLengthInBits(y.mode,u)),y.write(h)}if(h.getLengthInBits()<=p*8)break}this.typeNumber=u}this.makeImpl(!1,this.getBestMaskPattern())},s.makeImpl=function(u,c){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[h]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[h][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(u,c),this.typeNumber>=7&&this.setupTypeNumber(u),this.dataCache==null&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},s.setupPositionProbePattern=function(u,c){for(var h=-1;h<=7;h++)if(!(u+h<=-1||this.moduleCount<=u+h))for(var p=-1;p<=7;p++)c+p<=-1||this.moduleCount<=c+p||(0<=h&&h<=6&&(p==0||p==6)||0<=p&&p<=6&&(h==0||h==6)||2<=h&&h<=4&&2<=p&&p<=4?this.modules[u+h][c+p]=!0:this.modules[u+h][c+p]=!1)},s.getBestMaskPattern=function(){for(var u=0,c=0,h=0;h<8;h++){this.makeImpl(!0,h);var p=r.getLostPoint(this);(h==0||u>p)&&(u=p,c=h)}return c},s.createMovieClip=function(u,c,h){var p=u.createEmptyMovieClip(c,h),m=1;this.make();for(var y=0;y<this.modules.length;y++)for(var _=y*m,E=0;E<this.modules[y].length;E++){var b=E*m,T=this.modules[y][E];T&&(p.beginFill(0,100),p.moveTo(b,_),p.lineTo(b+m,_),p.lineTo(b+m,_+m),p.lineTo(b,_+m),p.endFill())}return p},s.setupTimingPattern=function(){for(var u=8;u<this.moduleCount-8;u++)this.modules[u][6]==null&&(this.modules[u][6]=u%2==0);for(var c=8;c<this.moduleCount-8;c++)this.modules[6][c]==null&&(this.modules[6][c]=c%2==0)},s.setupPositionAdjustPattern=function(){for(var u=r.getPatternPosition(this.typeNumber),c=0;c<u.length;c++)for(var h=0;h<u.length;h++){var p=u[c],m=u[h];if(this.modules[p][m]==null)for(var y=-2;y<=2;y++)for(var _=-2;_<=2;_++)y==-2||y==2||_==-2||_==2||y==0&&_==0?this.modules[p+y][m+_]=!0:this.modules[p+y][m+_]=!1}},s.setupTypeNumber=function(u){for(var c=r.getBCHTypeNumber(this.typeNumber),h=0;h<18;h++){var p=!u&&(c>>h&1)==1;this.modules[Math.floor(h/3)][h%3+this.moduleCount-8-3]=p}for(var h=0;h<18;h++){var p=!u&&(c>>h&1)==1;this.modules[h%3+this.moduleCount-8-3][Math.floor(h/3)]=p}},s.setupTypeInfo=function(u,c){for(var h=this.errorCorrectLevel<<3|c,p=r.getBCHTypeInfo(h),m=0;m<15;m++){var y=!u&&(p>>m&1)==1;m<6?this.modules[m][8]=y:m<8?this.modules[m+1][8]=y:this.modules[this.moduleCount-15+m][8]=y}for(var m=0;m<15;m++){var y=!u&&(p>>m&1)==1;m<8?this.modules[8][this.moduleCount-m-1]=y:m<9?this.modules[8][15-m-1+1]=y:this.modules[8][15-m-1]=y}this.modules[this.moduleCount-8][8]=!u},s.mapData=function(u,c){for(var h=-1,p=this.moduleCount-1,m=7,y=0,_=this.moduleCount-1;_>0;_-=2)for(_==6&&_--;;){for(var E=0;E<2;E++)if(this.modules[p][_-E]==null){var b=!1;y<u.length&&(b=(u[y]>>>m&1)==1);var T=r.getMask(c,p,_-E);T&&(b=!b),this.modules[p][_-E]=b,m--,m==-1&&(y++,m=7)}if(p+=h,p<0||this.moduleCount<=p){p-=h,h=-h;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(u,c,h){for(var p=e.getRSBlocks(u,c),m=new t,y=0;y<h.length;y++){var _=h[y];m.put(_.mode,4),m.put(_.getLength(),r.getLengthInBits(_.mode,u)),_.write(m)}for(var E=0,y=0;y<p.length;y++)E+=p[y].dataCount;if(m.getLengthInBits()>E*8)throw new Error("code length overflow. ("+m.getLengthInBits()+">"+E*8+")");for(m.getLengthInBits()+4<=E*8&&m.put(0,4);m.getLengthInBits()%8!=0;)m.putBit(!1);for(;!(m.getLengthInBits()>=E*8||(m.put(a.PAD0,8),m.getLengthInBits()>=E*8));)m.put(a.PAD1,8);return a.createBytes(m,p)},a.createBytes=function(u,c){for(var h=0,p=0,m=0,y=new Array(c.length),_=new Array(c.length),E=0;E<c.length;E++){var b=c[E].dataCount,T=c[E].totalCount-b;p=Math.max(p,b),m=Math.max(m,T),y[E]=new Array(b);for(var S=0;S<y[E].length;S++)y[E][S]=255&u.buffer[S+h];h+=b;var N=r.getErrorCorrectPolynomial(T),P=new i(y[E],N.getLength()-1),j=P.mod(N);_[E]=new Array(N.getLength()-1);for(var S=0;S<_[E].length;S++){var U=S+j.getLength()-_[E].length;_[E][S]=U>=0?j.get(U):0}}for(var X=0,S=0;S<c.length;S++)X+=c[S].totalCount;for(var D=new Array(X),R=0,S=0;S<p;S++)for(var E=0;E<c.length;E++)S<y[E].length&&(D[R++]=y[E][S]);for(var S=0;S<m;S++)for(var E=0;E<c.length;E++)S<_[E].length&&(D[R++]=_[E][S]);return D},Rm=a,Rm}var fd={},NE;function ak(){if(NE)return fd;NE=1,Object.defineProperty(fd,"__esModule",{value:!0});var n=Object.assign||function(h){for(var p=1;p<arguments.length;p++){var m=arguments[p];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(h[y]=m[y])}return h},e=pC(),t=a(e),r=vf(),i=a(r);function a(h){return h&&h.__esModule?h:{default:h}}function s(h,p){var m={};for(var y in h)p.indexOf(y)>=0||Object.prototype.hasOwnProperty.call(h,y)&&(m[y]=h[y]);return m}var u={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},c=(0,r.forwardRef)(function(h,p){var m=h.bgColor,y=h.bgD,_=h.fgD,E=h.fgColor,b=h.size,T=h.title,S=h.viewBoxSize,N=h.xmlns,P=N===void 0?"http://www.w3.org/2000/svg":N,j=s(h,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return i.default.createElement("svg",n({},j,{height:b,ref:p,viewBox:"0 0 "+S+" "+S,width:b,xmlns:P}),T?i.default.createElement("title",null,T):null,i.default.createElement("path",{d:y,fill:m}),i.default.createElement("path",{d:_,fill:E}))});return c.displayName="QRCodeSvg",c.propTypes=u,fd.default=c,fd}var RE;function ok(){if(RE)return Rl;RE=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.QRCode=void 0;var n=Object.assign||function(b){for(var T=1;T<arguments.length;T++){var S=arguments[T];for(var N in S)Object.prototype.hasOwnProperty.call(S,N)&&(b[N]=S[N])}return b},e=pC(),t=m(e),r=mC(),i=m(r),a=ik(),s=m(a),u=vf(),c=m(u),h=ak(),p=m(h);function m(b){return b&&b.__esModule?b:{default:b}}function y(b,T){var S={};for(var N in b)T.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(b,N)&&(S[N]=b[N]);return S}var _={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},E=(0,u.forwardRef)(function(b,T){var S=b.bgColor,N=S===void 0?"#FFFFFF":S,P=b.fgColor,j=P===void 0?"#000000":P,U=b.level,X=U===void 0?"L":U,D=b.size,R=D===void 0?256:D,M=b.value,B=y(b,["bgColor","fgColor","level","size","value"]),G=new s.default(-1,i.default[X]);G.addData(M),G.make();var H=G.modules;return c.default.createElement(p.default,n({},B,{bgColor:N,bgD:H.map(function(k,xe){return k.map(function(ve,J){return ve?"":"M "+J+" "+xe+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:j,fgD:H.map(function(k,xe){return k.map(function(ve,J){return ve?"M "+J+" "+xe+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:T,size:R,viewBoxSize:H.length}))});return Rl.QRCode=E,E.displayName="QRCode",E.propTypes=_,Rl.default=E,Rl}var sk=ok();const xC=dA(sk);function lk({open:n,onClose:e,event:t,onUpdated:r}){const{selectedLeagueId:i}=Qt(),{setSelectedEvent:a,setEvents:s}=$i(),[u,c]=F.useState(""),[h,p]=F.useState(""),[m,y]=F.useState(""),[_,E]=F.useState(!1),[b,T]=F.useState("");if(F.useEffect(()=>{t&&(c(t.name||""),p(t.date||""),y(t.location||""))},[t]),!n||!t)return null;const S=async N=>{var P,j;N.preventDefault(),E(!0),T("");try{const U=h?new Date(h).toISOString().slice(0,10):"";await zt.put(`/leagues/${i}/events/${t.id}`,{name:u,date:U,location:m});const X={...t,name:u,date:U,location:m,updated_at:new Date().toISOString()};s(D=>D.map(R=>R.id===t.id?X:R)),a(D=>D&&D.id===t.id?X:D),r&&r(X),e&&e()}catch(U){console.error("Event update error:",U),T(((j=(P=U.response)==null?void 0:P.data)==null?void 0:j.detail)||U.message||"Failed to update event")}finally{E(!1)}};return v.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-sm relative",children:[v.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-400 hover:text-cmf-primary text-2xl font-bold",children:""}),v.jsx("h2",{className:"text-xl font-bold mb-4 text-cmf-primary",children:"Edit Event"}),v.jsxs("form",{onSubmit:S,children:[v.jsx("label",{className:"block mb-2 font-semibold",children:"Event Name"}),v.jsx("input",{type:"text",value:u,onChange:N=>c(N.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary",required:!0}),v.jsx("label",{className:"block mb-2 font-semibold",children:"Event Date"}),v.jsx("input",{type:"date",value:h,onChange:N=>p(N.target.value),className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary",required:!0}),v.jsx("label",{className:"block mb-2 font-semibold",children:"Location"}),v.jsx("input",{type:"text",value:m,onChange:N=>y(N.target.value),placeholder:"e.g., Central Park Football Field",className:"w-full border-cmf-secondary rounded px-3 py-2 mb-4 focus:ring-cmf-primary focus:border-cmf-primary"}),v.jsx("small",{className:"text-gray-500 text-xs mb-4 block",children:"Leave location blank if not determined yet"}),b&&v.jsx("div",{className:"text-red-500 mb-2 text-sm",children:b}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{type:"submit",className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow hover:bg-cmf-secondary transition disabled:opacity-50",disabled:_,children:_?"Updating...":"Update Event"}),v.jsx("button",{type:"button",onClick:e,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})}const hd=["name","number","age_group","40m_dash","vertical_jump","catching","throwing","agility"],uk=[["Jane Smith","23","9-10","6.1","19","8","7","6.8"],["Alex Lee","45","U12","5.8","21","9","8","7.2"],["Sam Jones","7","6U","7.2","15","6","6","5.9"]];function ck(n){const e=n.trim().split(/\r?\n/),t=e[0].split(",").map(i=>i.trim()),r=e.slice(1).map(i=>i.split(",").map(a=>a.trim()));return{headers:t,rows:r}}function fk(n,e){const t=[],r={};return e.forEach((i,a)=>{r[i]=n[a]??""}),r.name||t.push("Missing name"),r.number&&r.number.trim()!==""&&isNaN(Number(r.number))&&t.push("Invalid number"),["40m_dash","vertical_jump","catching","throwing","agility"].forEach(i=>{const a=r[i];a&&a.trim()!==""&&isNaN(Number(a))&&t.push(`Invalid ${i}`)}),{...r,warnings:t}}function hk(){const{user:n,role:e,userRole:t,selectedLeagueId:r,leagues:i}=Qt(),{selectedEvent:a}=$i(),[s,u]=F.useState(""),[c,h]=F.useState("idle"),[p,m]=F.useState(""),[y,_]=F.useState([]),[E,b]=F.useState([]),[T,S]=F.useState([]),[N,P]=F.useState(""),[j,U]=F.useState("idle"),[X,D]=F.useState(""),[R,M]=F.useState(!1),[B,G]=F.useState({name:"",number:"",age_group:"","40m_dash":"",vertical_jump:"",catching:"",throwing:"",agility:""}),[H,k]=F.useState([]),[xe,ve]=F.useState("idle"),[J,ue]=F.useState(""),[fe,Pe]=F.useState(0),[q,ce]=F.useState(!1),ye=F.useRef(),[de,Te]=F.useState(!1),Ve=i==null?void 0:i.find(Ae=>Ae.id===r),Ie=(Ve==null?void 0:Ve.id)||"",qt=Ie?`https://woo-combine.com/join?code=${Ie}`:"",[yt,dr]=F.useState(!1);F.useEffect(()=>{const Ae=()=>{if(window.location.hash==="#player-upload-section"){const Fe=document.getElementById("player-upload-section");Fe&&Fe.scrollIntoView({behavior:"smooth"})}};return Ae(),window.addEventListener("hashchange",Ae),()=>window.removeEventListener("hashchange",Ae)},[]),F.useEffect(()=>{},[t,a]);const xi=async()=>{if(!(!a||!n||!r)){h("loading"),m("");try{await zt.delete(`/players/reset?event_id=${a.id}`),h("success"),u("")}catch(Ae){h("error"),m(Ae.message||"Error during reset.")}}},ei=Ae=>{const Fe=Ae.target.files[0];if(!Fe)return;P(Fe.name);const Xt=new FileReader;Xt.onload=Je=>{const Ze=Je.target.result,{headers:Mt,rows:Sn}=ck(Ze),Vo=[];(Mt.length!==hd.length||!hd.every((ni,Ki)=>ni===Mt[Ki]))&&Vo.push("Headers must match: "+hd.join(", "));const xu=Sn.map(ni=>fk(ni,Mt));b(Mt),_(xu),S(Vo)},Xt.readAsText(Fe)},Yi=T.length===0&&y.length>0&&y.some(Ae=>Ae.name&&Ae.name.trim()!==""),ti=F.useCallback(async()=>{var Ae;if(!(!a||!n||!r)){ce(!0);try{const{data:Fe}=await zt.get(`/players?event_id=${a.id}`);Pe(Array.isArray(Fe)?Fe.length:0)}catch(Fe){((Ae=Fe.response)==null?void 0:Ae.status)===404||console.error("[AdminTools] Player count fetch error:",Fe),Pe(0)}finally{ce(!1)}}},[a,n,r]);F.useEffect(()=>{ti()},[a,n,r,ti]);const _i=()=>{ti()},jo=async()=>{if(!a||!n||!r)return;U("loading"),D("");const Ae={event_id:a.id,players:y.map(Fe=>{const{warnings:Xt,...Je}=Fe;return Je})};try{const Fe=await zt.post("/players/upload",Ae),{data:Xt}=Fe;Xt.errors&&Xt.errors.length>0?(U("error"),D("Some rows failed to upload. See errors below.")):(U("success"),D(` Upload successful! ${Xt.added} players added.`),_([]),b([]),P(""),_i())}catch(Fe){U("error"),D(` ${Fe.message||"Upload failed."}`)}},Sr=Ae=>{G({...B,[Ae.target.name]:Ae.target.value})},pr=()=>{const Ae=[];return B.name||Ae.push("Missing name"),B.number&&isNaN(Number(B.number))&&Ae.push("Invalid number"),["40m_dash","vertical_jump","catching","throwing","agility"].forEach(Fe=>{B[Fe]&&isNaN(Number(B[Fe]))&&Ae.push(`Invalid ${Fe}`)}),Ae},yu=async Ae=>{Ae.preventDefault(),k([]),ve("idle"),ue("");const Fe=pr();if(Fe.length>0){k(Fe);return}ve("loading");try{const Xt={name:B.name,number:Number(B.number),age_group:B.age_group};B.photo_url&&(Xt.photo_url=B.photo_url),await zt.post(`/players?event_id=${a.id}`,Xt),ve("success"),ue("Player added!"),G({name:"",number:"",age_group:"","40m_dash":"",vertical_jump:"",catching:"",throwing:"",agility:""}),_i()}catch(Xt){ve("error"),ue(Xt.message||"Failed to add player.")}},Bo=()=>{let Ae=hd.join(",")+`
`;uk.forEach(Ze=>{Ae+=Ze.join(",")+`
`});const Fe=new Blob([Ae],{type:"text/csv"}),Xt=URL.createObjectURL(Fe),Je=document.createElement("a");Je.href=Xt,Je.download="sample_players.csv",document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),URL.revokeObjectURL(Xt)},Ua=()=>v.jsxs("div",{className:"bg-cmf-primary/10 border-l-4 border-cmf-primary text-cmf-primary px-4 py-3 mb-6 rounded",children:[v.jsx("strong",{children:"Welcome, Admin."})," Manage your combine tools below."]}),mr="Score range: 110. Use decimals for precision (e.g., 7.5)",Vs=()=>{_([]),b([]),S([]),P(""),U("idle"),D(""),ye.current&&(ye.current.value="")};return t!=="organizer"?v.jsx("div",{className:"min-h-screen bg-gray-50",children:v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh]",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md mx-auto text-center border-2 border-red-200",children:[v.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Admin Access Required"}),v.jsxs("p",{className:"text-cmf-secondary",children:["You do not have permission to view this page.",v.jsx("br",{}),"Organizer access required."]})]})})}):!a||!a.id?v.jsx("div",{className:"min-h-screen bg-gray-50",children:v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh]",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md mx-auto text-center border-2 border-yellow-200",children:[v.jsx("h2",{className:"text-2xl font-bold text-yellow-600 mb-4",children:"No Event Selected"}),v.jsx("p",{className:"text-cmf-secondary mb-4",children:"Before importing players, you'll need to select or create an event."}),v.jsx("div",{className:"mb-4",children:v.jsx(Jl,{})})]})})}):v.jsxs("div",{className:"min-h-screen bg-gray-50 text-cmf-contrast font-sans",children:[v.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 mt-20",children:v.jsxs("div",{className:"rounded-2xl shadow-sm bg-white border border-gray-200 py-4 px-5 mb-6",children:[v.jsx(Jl,{}),a&&v.jsx("div",{className:"flex items-center gap-3 mb-4",children:v.jsxs("span",{className:"inline-flex items-center bg-cmf-primary/10 border border-cmf-primary text-cmf-primary font-bold px-4 py-2 rounded-full text-base",children:[v.jsx("span",{role:"img","aria-label":"player",children:""}),q?v.jsx("span",{className:"ml-2 animate-pulse",children:"Loading..."}):v.jsxs("span",{className:"ml-2",children:[fe," Players Uploaded to: ",a.name,"  ",a.date&&!isNaN(Date.parse(a.date))?new Date(a.date).toLocaleDateString():"Invalid Date"]})]})}),v.jsx(Ua,{}),v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"text-xs font-bold text-gray-500 tracking-wide uppercase mb-1",children:"Step 1"}),v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Event Details"}),v.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-3",children:v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Name:"})," ",a.name]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Date:"})," ",a.date&&!isNaN(Date.parse(a.date))?new Date(a.date).toLocaleDateString():"Invalid Date"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Location:"})," ",a.location||"Location TBD"]})]})}),v.jsxs("button",{onClick:()=>dr(!0),className:"bg-cmf-secondary text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cmf-primary transition flex items-center gap-2",children:[v.jsx(lC,{className:"w-4 h-4"}),"Edit Event Details"]})]}),v.jsxs("div",{className:"mb-4 text-lg font-semibold flex items-center gap-2 text-gray-900",children:[v.jsx("span",{role:"img","aria-label":"event",children:""}),"Managing: ",a?`${a.name}  ${a.date&&!isNaN(Date.parse(a.date))?new Date(a.date).toLocaleDateString():"Invalid Date"}`:"No event selected"]}),v.jsx("div",{id:"player-upload-section",className:"mb-8",children:v.jsxs("div",{className:"mb-2",children:[v.jsx("div",{className:"text-xs font-bold text-gray-500 tracking-wide uppercase mb-1",children:"Step 2"}),v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Add Players to Your Event"}),v.jsxs("div",{className:"flex gap-2 mb-2",children:[v.jsxs("button",{className:"bg-cmf-primary text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cmf-secondary transition",onClick:Bo,children:[v.jsx(pE,{className:"inline-block mr-2 w-4 h-4"}),"Sample CSV"]}),v.jsx("button",{className:"bg-cmf-primary text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cmf-secondary transition",onClick:()=>M(Ae=>!Ae),children:"+ Add Player Manually"})]}),v.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Uploading to: ",v.jsxs("span",{className:"font-bold",children:[a.name,"  ",new Date(a.date).toLocaleDateString()]})]}),v.jsxs("div",{className:"border-dashed border-2 border-blue-300 bg-blue-50 p-5 rounded-xl text-center text-sm text-gray-600 flex flex-col items-center",children:[v.jsx(pE,{className:"w-8 h-8 text-blue-400 mb-2"}),v.jsx("input",{ref:ye,type:"file",accept:".csv",onChange:ei,className:"mb-2 cursor-pointer",style:{maxWidth:300}}),N&&v.jsx("div",{className:"text-xs text-gray-500 mb-2",children:N}),T.length>0&&v.jsx("div",{className:"text-red-500 text-sm mb-2",children:T.join("; ")}),Array.isArray(y)&&y.length>0&&T.length===0&&v.jsx("div",{className:"overflow-x-auto max-h-64 border rounded mb-2 w-full",children:v.jsxs("table",{className:"min-w-full text-xs",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-2 py-1"}),v.jsx("th",{className:"px-2 py-1",children:"#"}),Array.isArray(E)&&E.length>0&&E.map(Ae=>v.jsxs("th",{className:"px-2 py-1",children:[Ae.replace(/_/g," ").replace("m dash","m Dash").replace(/\b\w/g,Fe=>Fe.toUpperCase()),["40m_dash","vertical_jump","catching","throwing","agility"].includes(Ae)&&v.jsx("span",{className:"ml-1 cursor-pointer",title:mr,children:""})]},Ae)),v.jsx("th",{className:"px-2 py-1",children:"Warnings"})]})}),v.jsx("tbody",{children:Array.isArray(y)&&y.length>0&&y.map((Ae,Fe)=>{const Xt=Ae.warnings.length>0,Je=Ae.warnings.some(Mt=>Mt.includes("Missing name")||Mt.includes("Invalid")),Ze=Ae.name&&Ae.name.trim()!=="";return v.jsxs("tr",{className:Je?"bg-red-50":Xt?"bg-yellow-50":"",children:[v.jsx("td",{className:"px-2 py-1 text-center",children:Ze?v.jsx("span",{className:"text-green-600",children:""}):v.jsx("span",{className:"text-red-500 cursor-pointer",title:Ae.warnings.join(", "),children:""})}),v.jsx("td",{className:"px-2 py-1 font-mono",children:Fe+1}),Array.isArray(E)&&E.length>0&&E.map(Mt=>v.jsx("td",{className:"px-2 py-1",children:Ae[Mt]},Mt)),v.jsx("td",{className:"px-2 py-1 text-yellow-600",children:Ae.warnings&&Ae.warnings.length>0?Ae.warnings.join(", "):""})]},Fe)})})]})}),Array.isArray(y)&&y.length>0&&v.jsx("button",{className:"mt-2 bg-cmf-secondary text-white font-bold px-4 py-2 rounded shadow hover:bg-cmf-primary transition",onClick:Vs,type:"button",children:" Upload Another CSV"}),v.jsx("button",{className:"bg-cmf-primary text-white font-bold px-4 py-2 rounded-lg shadow disabled:opacity-50 hover:bg-cmf-secondary transition mt-2",disabled:!Yi||j==="loading"||!a,onClick:jo,children:j==="loading"?"Uploading...":"Confirm Upload"}),j==="success"&&v.jsxs("div",{className:"mt-4",children:[v.jsx("div",{className:"text-green-600 mb-4 font-semibold",children:X}),v.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:" What's Next?"}),v.jsx("p",{className:"text-green-700 text-sm mb-4",children:"Your players have been successfully uploaded! Here's what you can do now:"}),v.jsxs("div",{className:"grid gap-2",children:[v.jsx("button",{onClick:Vs,className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-md font-medium hover:bg-green-50 transition text-left",children:" Upload More Players (CSV or Manual)"}),v.jsx(Tt,{to:"/players",className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-md font-medium hover:bg-green-50 transition text-left block",children:" View & Manage Players (Add Drill Results)"}),v.jsx(Tt,{to:"/coach-dashboard",className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-md font-medium hover:bg-green-50 transition text-left block",children:" View Dashboard & Rankings"})]})]})]}),j==="error"&&v.jsx("div",{className:"text-red-500 mt-2",children:X})]})]})}),R&&v.jsxs("div",{className:"rounded-2xl shadow-sm bg-white border border-gray-200 py-4 px-5 mb-6",id:"manual-add-form-section",children:[v.jsxs("div",{className:"text-xs font-bold text-gray-500 tracking-wide uppercase mb-1 flex items-center gap-2",children:[v.jsx(mE,{className:"w-4 h-4"}),"Manual Add"]}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Add Player Manually"}),v.jsxs("form",{onSubmit:async Ae=>{if(await yu(Ae),xe==="success"){const Fe=document.getElementById("manual-add-form-section");Fe&&Fe.scrollIntoView({behavior:"smooth",block:"center"})}},children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[v.jsx("input",{name:"name",value:B.name,onChange:Sr,placeholder:"Name",className:"border rounded px-2 py-1",required:!0}),v.jsx("input",{name:"number",value:B.number,onChange:Sr,placeholder:"Number",className:"border rounded px-2 py-1"}),v.jsx("input",{name:"age_group",value:B.age_group,onChange:Sr,placeholder:"Age Group (e.g., 6U, U8, 7-8)",className:"border rounded px-2 py-1",list:"manual-age-group-suggestions"}),v.jsxs("datalist",{id:"manual-age-group-suggestions",children:[v.jsx("option",{value:"6U"}),v.jsx("option",{value:"U6"}),v.jsx("option",{value:"8U"}),v.jsx("option",{value:"U8"}),v.jsx("option",{value:"10U"}),v.jsx("option",{value:"U10"}),v.jsx("option",{value:"12U"}),v.jsx("option",{value:"U12"}),v.jsx("option",{value:"5-6"}),v.jsx("option",{value:"7-8"}),v.jsx("option",{value:"9-10"}),v.jsx("option",{value:"11-12"}),v.jsx("option",{value:"13-14"}),v.jsx("option",{value:"15-16"}),v.jsx("option",{value:"17-18"})]}),v.jsxs("label",{className:"flex items-center gap-1",children:[v.jsx("input",{name:"40m_dash",value:B["40m_dash"],onChange:Sr,placeholder:"40m Dash",className:"border rounded px-2 py-1 flex-1"}),v.jsx("span",{className:"cursor-pointer",title:mr,children:""})]}),v.jsxs("label",{className:"flex items-center gap-1",children:[v.jsx("input",{name:"vertical_jump",value:B.vertical_jump,onChange:Sr,placeholder:"Vertical Jump",className:"border rounded px-2 py-1 flex-1"}),v.jsx("span",{className:"cursor-pointer",title:mr,children:""})]}),v.jsxs("label",{className:"flex items-center gap-1",children:[v.jsx("input",{name:"catching",value:B.catching,onChange:Sr,placeholder:"Catching",className:"border rounded px-2 py-1 flex-1"}),v.jsx("span",{className:"cursor-pointer",title:mr,children:""})]}),v.jsxs("label",{className:"flex items-center gap-1",children:[v.jsx("input",{name:"throwing",value:B.throwing,onChange:Sr,placeholder:"Throwing",className:"border rounded px-2 py-1 flex-1"}),v.jsx("span",{className:"cursor-pointer",title:mr,children:""})]}),v.jsxs("label",{className:"flex items-center gap-1",children:[v.jsx("input",{name:"agility",value:B.agility,onChange:Sr,placeholder:"Agility",className:"border rounded px-2 py-1 flex-1"}),v.jsx("span",{className:"cursor-pointer",title:mr,children:""})]})]}),H.length>0&&v.jsx("div",{className:"text-red-500 text-sm mt-2",children:H.join(", ")}),v.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap justify-center",children:[v.jsxs("button",{type:"submit",className:"bg-cyan-600 text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cyan-700 transition flex items-center gap-2",disabled:xe==="loading",children:[v.jsx(mE,{className:"w-4 h-4"}),xe==="loading"?"Adding...":"Add Player"]}),v.jsx("button",{type:"button",className:"bg-gray-200 text-cyan-700 rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-gray-300 transition flex items-center gap-2",onClick:()=>M(!1),children:"Cancel"})]}),xe==="success"&&v.jsxs("div",{className:"mt-4",children:[v.jsxs("div",{className:"text-green-600 mb-4 font-semibold",children:[" ",J]}),v.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:" What's Next?"}),v.jsx("p",{className:"text-green-700 text-sm mb-4",children:"Player added successfully! Here's what you can do now:"}),v.jsxs("div",{className:"grid gap-2",children:[v.jsx("button",{onClick:()=>{ve("idle"),ue("")},className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-md font-medium hover:bg-green-50 transition text-left",children:" Add Another Player"}),v.jsx("button",{onClick:()=>{M(!1),ve("idle"),ue("")},className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-md font-medium hover:bg-green-50 transition text-left",children:" Upload Players via CSV"}),v.jsx(Tt,{to:"/players",className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-md font-medium hover:bg-green-50 transition text-left block",children:" View & Manage Players (Add Drill Results)"}),v.jsx(Tt,{to:"/coach-dashboard",className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-md font-medium hover:bg-green-50 transition text-left block",children:" View Dashboard & Rankings"})]})]})]}),xe==="error"&&v.jsxs("div",{className:"text-red-500 mt-2",children:[" ",J]})]})]}),v.jsxs("div",{className:"rounded-2xl shadow-sm bg-white border border-gray-200 py-4 px-5 mb-6",children:[v.jsxs("div",{className:"text-xs font-bold text-gray-500 tracking-wide uppercase mb-1 flex items-center gap-2",children:[v.jsx(dE,{className:"w-4 h-4"}),"Reset Players"]}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Remove All Players from Event"}),v.jsxs("label",{className:"block mb-1 font-medium",children:["Type ",v.jsx("span",{className:"font-mono",children:"REMOVE"})," to enable reset:"]}),v.jsx("input",{type:"text",value:s,onChange:Ae=>u(Ae.target.value),className:"w-full border-cyan-200 rounded px-3 py-2 focus:ring-cyan-600 focus:border-cyan-600 mb-2",disabled:c==="success"}),v.jsxs("button",{disabled:s!=="REMOVE"||c==="loading"||c==="success"||!a,onClick:xi,className:"bg-red-500 text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm mt-2 disabled:opacity-50 hover:bg-red-600 transition flex items-center gap-2",children:[v.jsx(dE,{className:"w-4 h-4"}),c==="loading"?"Resetting...":"Reset All Players"]}),c==="success"&&v.jsx("div",{className:"text-green-600 mt-4",children:"Reset successful!"}),c==="error"&&v.jsx("div",{className:"text-red-500 mt-4",children:p})]}),e==="organizer"&&r&&v.jsxs("div",{className:"rounded-2xl shadow-sm bg-white border border-gray-200 py-4 px-5 mb-6 flex flex-col items-center text-center",children:[v.jsxs("div",{className:"text-xs font-bold text-gray-500 tracking-wide uppercase mb-1 flex items-center gap-2",children:[v.jsx(z0,{className:"w-4 h-4"}),"Invite Coaches"]}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Share League Access"}),v.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Share this code, link, or QR with coaches to let them join as a coach."}),v.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-2 w-full justify-center",children:[v.jsx("div",{className:"font-mono text-lg bg-gray-100 text-gray-800 px-4 py-2 rounded-lg border flex-1 select-all",children:Ie}),v.jsxs("button",{className:"bg-cyan-600 text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cyan-700 transition flex items-center gap-2",onClick:()=>{navigator.clipboard.writeText(Ie)},children:[v.jsx(nC,{className:"w-4 h-4"}),"Copy Code"]}),v.jsxs("button",{className:"bg-cyan-600 text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cyan-700 transition flex items-center gap-2",onClick:()=>{navigator.clipboard.writeText(qt)},children:[v.jsx(yM,{className:"w-4 h-4"}),"Copy Invite Link"]}),v.jsxs("button",{className:"bg-cyan-700 text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cyan-800 transition flex items-center gap-2",onClick:()=>Te(!0),children:[v.jsx(gf,{className:"w-4 h-4"}),"Show QR"]})]}),de&&v.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg flex flex-col items-center",children:[v.jsx(xC,{value:qt,size:200}),v.jsxs("div",{className:"mt-2 text-xs",children:["Scan to join: ",v.jsx("br",{}),qt]}),v.jsxs("button",{className:"mt-4 bg-cyan-600 text-white rounded-full px-5 py-2 text-sm font-medium shadow-sm hover:bg-cyan-700 transition flex items-center gap-2",onClick:()=>Te(!1),children:[v.jsx(gf,{className:"w-4 h-4"}),"Close"]})]})})]})]})}),v.jsx(lk,{open:yt,onClose:()=>dr(!1),event:a,onUpdated:()=>{dr(!1)}})]})}function dk(){const[n,e]=F.useState(""),[t,r]=F.useState(""),[i,a]=F.useState(!1),[s,u]=F.useState(""),[c,h]=F.useState(!1),{loading:p}=Qt(),m=Bn(),y=async _=>{_.preventDefault(),u(""),h(!0);try{const E=await Tb(Ft,n,t);await E.user.reload(),E.user.emailVerified||m("/verify-email")}catch(E){E.code==="auth/invalid-credential"?u("Account not found. Please sign up before logging in."):E.code==="auth/user-not-found"||E.code==="auth/wrong-password"?u("Invalid email or password."):u("Login failed. Please try again.")}finally{h(!1)}};return p?v.jsx("div",{children:"Loading..."}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"w-full flex flex-row justify-between items-center mb-6 px-2",children:[v.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none",type:"button","aria-label":"Back to welcome",onClick:()=>m("/welcome"),children:v.jsx(Hv,{size:20})}),v.jsx(Tt,{to:"/help",className:"text-xs text-cyan-700 hover:underline font-semibold",children:"Need Help?"})]}),v.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Welcome Back"}),v.jsxs("form",{onSubmit:y,className:"w-full flex flex-col items-center",children:[v.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:_=>e(_.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"email",required:!0}),v.jsxs("div",{className:"relative w-full mb-6",children:[v.jsx("input",{type:i?"text":"password",placeholder:"Password",value:t,onChange:_=>r(_.target.value),className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition pr-12",autoComplete:"current-password",required:!0}),v.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-cyan-700 hover:text-cyan-900",tabIndex:-1,onClick:()=>a(_=>!_),"aria-label":i?"Hide password":"Show password",children:i?v.jsx(rC,{size:22}):v.jsx(iC,{size:22})})]}),s&&v.jsx("div",{className:"text-red-500 mb-4 text-sm w-full text-center",children:s}),v.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold px-6 py-3 rounded-full shadow transition mb-4",disabled:c,children:c?"Signing in...":"Sign In"}),v.jsxs("div",{className:"w-full flex flex-col gap-2 mt-2 text-center",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",v.jsx(Tt,{to:"/signup",className:"text-cyan-700 font-semibold hover:underline",children:"Let's Get Started"})]}),v.jsx("span",{className:"text-sm",children:v.jsx(Tt,{to:"/forgot-password",className:"text-cyan-700 hover:underline",children:"Forgot password?"})})]})]})]})}function pk(){return v.jsx(Jr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:v.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:v.jsx(dk,{})})})}const mk="modulepreload",gk=function(n){return"/"+n},OE={},vk=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let s=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=s(t.map(h=>{if(h=gk(h),h in OE)return;OE[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":mk,p||(y.as="script"),y.crossOrigin="",y.href=h,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((_,E)=>{y.addEventListener("load",_),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return i.then(s=>{for(const u of s||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function yk(){const[n,e]=F.useState(""),[t,r]=F.useState(""),[i,a]=F.useState(""),[s,u]=F.useState(""),[c,h]=F.useState(!1),[p,m]=F.useState(""),[y,_]=F.useState(!1),{user:E,loading:b,error:T}=Qt(),S=Bn(),N=async P=>{P.preventDefault(),m(""),_(!0);try{const j=await bb(Ft,i,s);if(j.user)try{await vk(()=>Promise.resolve().then(()=>JO),[]).then(U=>U.sendEmailVerification(j.user))}catch(U){console.error("Failed to send verification email:",U)}S("/verify-email")}catch(j){m(j.message),console.error("Signup error:",j)}finally{_(!1)}};return b?v.jsx("div",{children:"Loading..."}):v.jsxs("div",{className:"w-full max-w-md flex flex-col items-center relative",children:[v.jsx("button",{className:"absolute left-4 top-4 w-9 h-9 flex items-center justify-center rounded-full bg-cyan-50 hover:bg-cyan-100 border border-cyan-200 shadow text-cyan-700 hover:text-cyan-900 focus:outline-none z-10",type:"button","aria-label":"Back to welcome",onClick:()=>S("/welcome"),style:{left:0,top:0,position:"absolute"},children:v.jsx(Hv,{size:20})}),v.jsx(Tt,{to:"/help",className:"absolute right-4 top-4 text-xs text-cyan-700 hover:underline font-semibold",style:{right:0,top:0,position:"absolute"},children:"Need Help?"}),v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-20 h-20 mx-auto mb-4 mt-8",style:{objectFit:"contain"}}),v.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center text-cyan-700 drop-shadow",children:"Let's Get Started"}),v.jsxs("form",{onSubmit:N,className:"w-full flex flex-col items-center",children:[v.jsxs("div",{className:"flex flex-row gap-4 w-full mb-6 min-w-0",children:[v.jsx("input",{type:"text",placeholder:"First Name",value:n,onChange:P=>e(P.target.value),className:"flex-1 min-w-0 box-border px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"given-name",required:!0}),v.jsx("input",{type:"text",placeholder:"Last Name",value:t,onChange:P=>r(P.target.value),className:"flex-1 min-w-0 box-border px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"family-name",required:!0})]}),v.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:P=>a(P.target.value),className:"w-full mb-6 px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition",autoComplete:"email",required:!0}),v.jsxs("div",{className:"relative w-full mb-6",children:[v.jsx("input",{type:c?"text":"password",placeholder:"Create Password",value:s,onChange:P=>u(P.target.value),className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition pr-12",autoComplete:"new-password",required:!0}),v.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-cyan-700 hover:text-cyan-900",tabIndex:-1,onClick:()=>h(P=>!P),"aria-label":c?"Hide password":"Show password",children:c?v.jsx(rC,{size:22}):v.jsx(iC,{size:22})})]}),p&&v.jsx("div",{className:"text-red-500 mb-4 text-sm",children:p}),T&&v.jsx("div",{className:"text-red-500 mb-4 text-sm",children:T.message}),v.jsx("button",{type:"submit",className:"w-full bg-cyan-700 hover:bg-cyan-800 text-white font-bold py-3 rounded-full shadow transition mb-4",disabled:y,children:y?"Signing up...":"Sign Up"}),v.jsxs("div",{className:"text-xs text-gray-500 text-center mb-2",children:["By signing up for Woo-Combine, you agree to our"," ",v.jsx(Tt,{to:"/terms",className:"underline hover:text-cyan-700",children:"Terms & Conditions"})," and"," ",v.jsx(Tt,{to:"/privacy",className:"underline hover:text-cyan-700",children:"Privacy Policy"}),"."]})]})]})}function xk(){return v.jsx(Jr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:v.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:v.jsx(yk,{})})})}function ui({children:n}){const{user:e,loading:t,roleChecking:r,userRole:i}=Qt(),a=Wi();return t||r?v.jsx(H0,{title:"Verifying access...",subtitle:"Checking your authentication",size:"large"}):e?e.emailVerified?e.emailVerified&&!i&&a.pathname!=="/select-role"?v.jsx(yd,{to:"/select-role",replace:!0}):n:v.jsx(yd,{to:"/verify-email",replace:!0}):v.jsx(yd,{to:"/welcome",replace:!0})}function _k(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function wk(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Ek=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ak=function(n){Ek(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),_k(a,i.prototype),wk(a),a}return e}(Error),bk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tr=function(n){bk(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Ak),Tk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tn=function(n){Tk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Tr),Sk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ce=function(n){Sk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Tr),_C=function(){function n(e){if(this.binarizer=e,e===null)throw new Ce("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Ck=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fn=function(n){Ck(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Tr),Ik=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Ct=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Nk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gv=function(n){Nk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Tr),Rk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DE=function(n){Rk(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(Gv),Ok=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},En=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ce("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new DE(t);if(r>e)throw new DE(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=Ok(e),s=a.next();!s.done;s=a.next()){var u=s.value;i=31*i+u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Ct.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,u=r(t,e[s]);if(u>0)i=s+1;else if(u<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),We=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ln=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Ct.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var u=i*32+We.numberOfTrailingZeros(a);return u>t?t:u},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var u=i*32+We.numberOfTrailingZeros(a);return u>t?t:u},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ce;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var u=s>r?0:e&31,c=s<i?31:t&31,h=(2<<c)-(1<<u);a[s]|=h}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ce;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,u=i;u<=a;u++){var c=u>i?0:e&31,h=u<a?31:t&31,p=(2<<h)-(1<<c)&4294967295;if((s[u]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ce("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ce("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,u=0;u<8;u++)this.get(e)&&(s|=1<<7-u),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var u=r*32-this.size,c=e[0]>>>u,a=1;a<r;a++){var h=e[a];c|=h<<32-u,e[a-1]=c,c=h>>>u}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&En.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+En.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),xg;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(xg||(xg={}));const It=xg;var Dk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ge=function(n){Dk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Tr),Pk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(gt||(gt={}));var _n=function(){function n(e,t,r){for(var i,a,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,h=0,p=c.length;h!==p;h++){var m=c[h];n.VALUES_TO_ECI.set(m,this)}try{for(var y=Pk(s),_=y.next();!_.done;_=y.next()){var E=_.value;n.NAME_TO_ECI.set(E,this)}}catch(b){i={error:b}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ge("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new ge("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new ge("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(gt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(gt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(gt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(gt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(gt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(gt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(gt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(gt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(gt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(gt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(gt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(gt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(gt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(gt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(gt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(gt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(gt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(gt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(gt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(gt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(gt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(gt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(gt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(gt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(gt.Big5,28,"Big5"),n.GB18030=new n(gt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(gt.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Mk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pd=function(n){Mk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Tr),Qr=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof _n?e:_n.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var u=e[a].toString(16);u.length<2&&(u="0"+u),i+="%"+u}return decodeURIComponent(i)}if(r.equals(_n.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Pd("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(_n.UTF8)||e.equals(_n.ISO8859_1)||e.equals(_n.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),it=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Qr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(It.CHARACTER_SET)!==void 0)return t.get(It.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,u=0,c=0,h=0,p=0,m=0,y=0,_=0,E=0,b=0,T=0,S=0,N=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,P=0;P<r&&(i||a||s);P++){var j=e[P]&255;s&&(u>0?(j&128)===0?s=!1:u--:(j&128)!==0&&((j&64)===0?s=!1:(u++,(j&32)===0?c++:(u++,(j&16)===0?h++:(u++,(j&8)===0?p++:s=!1))))),i&&(j>127&&j<160?i=!1:j>159&&(j<192||j===215||j===247)&&S++),a&&(m>0?j<64||j===127||j>252?a=!1:m--:j===128||j===160||j>239?a=!1:j>160&&j<224?(y++,E=0,_++,_>b&&(b=_)):j>127?(m++,_=0,E++,E>T&&(T=E)):(_=0,E=0))}return s&&u>0&&(s=!1),a&&m>0&&(a=!1),s&&(N||c+h+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||b>=3||T>=3)?n.SHIFT_JIS:i&&a?b===2&&y===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(u,c,h,p,m,y){if(u==="%%")return"%";if(t[++i]!==void 0){u=p?parseInt(p.substr(1)):void 0;var _=m?parseInt(m.substr(1)):void 0,E;switch(y){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(u);break;case"p":E=parseFloat(t[i]).toPrecision(u);break;case"e":E=parseFloat(t[i]).toExponential(u);break;case"x":E=parseInt(t[i]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[i],_||10).toPrecision(u)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var b=parseInt(h),T=h&&h[0]+""=="0"?"0":" ";E.length<b;)E=c!==void 0?E+T:T+E;return E}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return Qr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=_n.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=_n.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=_n.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Ge=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=it.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),Xi=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ce("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],u=0;u<r;u++)s[u]&&i.set(u,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ce("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,u=-1,c=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(a>s){if(u===-1)u=a-s;else if(a-s!==u)throw new Ce("row lengths do not match");s=a,c++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[a]=!0,a++;else if(e.substring(h,h+r.length)===r)h+=r.length,i[a]=!1,a++;else throw new Ce("illegal character encountered: "+e.substring(h));if(a>s){if(u===-1)u=a-s;else if(a-s!==u)throw new Ce("row lengths do not match");c++}for(var p=new n(u,c),m=0;m<a;m++)i[m]&&p.set(Math.floor(m%u),Math.floor(m/u));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ce("input matrix dimensions do not match");for(var t=new Ln(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var u=a*r,c=e.getRow(a,t).getBitArray(),h=0;h<r;h++)i[u+h]^=c[h]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ce("Left and top must be nonnegative");if(i<1||r<1)throw new Ce("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new Ce("The region must fit inside the matrix");for(var u=this.rowSize,c=this.bits,h=t;h<s;h++)for(var p=h*u,m=e;m<a;m++)c[p+Math.floor(m/32)]|=1<<(m&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Ln(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){Ct.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Ln(e),i=new Ln(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,u=-1,c=-1,h=0;h<t;h++)for(var p=0;p<r;p++){var m=i[h*r+p];if(m!==0){if(h<s&&(s=h),h>c&&(c=h),p*32<a){for(var y=0;(m<<31-y&4294967295)===0;)y++;p*32+y<a&&(a=p*32+y)}if(p*32+31>u){for(var y=31;!(m>>>y);)y--;p*32+y>u&&(u=p*32+y)}}}return u<a||c<s?null:Int32Array.from([a,s,u-a+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],u=0;(s<<31-u&4294967295)===0;)u++;return a+=u,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],u=31;!(s>>>u);)u--;return a+=u,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&En.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+En.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Ge,a=0,s=this.height;a<s;a++){for(var u=0,c=this.width;u<c;u++)i.append(this.get(u,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),kk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ie=function(n){kk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Tr),Lk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jk=function(n){Lk(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Ln(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),u=this.buckets,c=0;c<a;c++)u[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(u);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<h&&r.set(c);else for(var p=s[0]&255,m=s[1]&255,c=1;c<a-1;c++){var y=s[c+1]&255;(m*4-p-y)/2<h&&r.set(c),p=m,m=y}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Xi(r,i);this.initArrays(r);for(var s=this.buckets,u=1;u<5;u++)for(var c=Math.floor(i*u/5),h=t.getRow(c,this.luminances),p=Math.floor(r*4/5),m=Math.floor(r/5);m<p;m++){var y=h[m]&255;s[y>>e.LUMINANCE_SHIFT]++}for(var _=e.estimateBlackPoint(s),E=t.getMatrix(),u=0;u<i;u++)for(var b=u*r,m=0;m<r;m++){var y=E[b+m]&255;y<_&&a.set(m,u)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,u=0;u<r;u++)t[u]>s&&(a=u,s=t[u]),t[u]>i&&(i=t[u]);for(var c=0,h=0,u=0;u<r;u++){var p=u-a,m=t[u]*p*p;m>h&&(c=u,h=m)}if(a>c){var y=a;a=c,c=y}if(c-a<=r/16)throw new ie;for(var _=c-1,E=-1,u=c-1;u>a;u--){var b=u-a,m=b*b*(c-u)*(i-t[u]);m>E&&(_=u,E=m)}return _<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Ik),Bk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wC=function(n){Bk(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var u=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&u++;var c=e.calculateBlackPoints(a,s,u,r,i),h=new Xi(r,i);e.calculateThresholdForBlock(a,s,u,r,i,c,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,u,c){for(var h=s-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,m=0;m<i;m++){var y=m<<e.BLOCK_SIZE_POWER;y>h&&(y=h);for(var _=e.cap(m,2,i-3),E=0;E<r;E++){var b=E<<e.BLOCK_SIZE_POWER;b>p&&(b=p);for(var T=e.cap(E,2,r-3),S=0,N=-2;N<=2;N++){var P=u[_+N];S+=P[T-2]+P[T-1]+P[T]+P[T+1]+P[T+2]}var j=S/25;e.thresholdBlock(t,b,y,j,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,u){for(var c=0,h=i*s+r;c<e.BLOCK_SIZE;c++,h+=s)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=a&&u.set(r+p,i+c)},e.calculateBlackPoints=function(t,r,i,a,s){for(var u=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(r);var m=p<<e.BLOCK_SIZE_POWER;m>u&&(m=u);for(var y=0;y<r;y++){var _=y<<e.BLOCK_SIZE_POWER;_>c&&(_=c);for(var E=0,b=255,T=0,S=0,N=m*a+_;S<e.BLOCK_SIZE;S++,N+=a){for(var P=0;P<e.BLOCK_SIZE;P++){var j=t[N+P]&255;E+=j,j<b&&(b=j),j>T&&(T=j)}if(T-b>e.MIN_DYNAMIC_RANGE)for(S++,N+=a;S<e.BLOCK_SIZE;S++,N+=a)for(var P=0;P<e.BLOCK_SIZE;P++)E+=t[N+P]&255}var U=E>>e.BLOCK_SIZE_POWER*2;if(T-b<=e.MIN_DYNAMIC_RANGE&&(U=b/2,p>0&&y>0)){var X=(h[p-1][y]+2*h[p][y-1]+h[p-1][y-1])/4;b<X&&(U=X)}h[p][y]=U}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(jk),Pf=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Pd("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Pd("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Pd("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ge,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,u=void 0;s<64?u="#":s<128?u="+":s<192?u=".":u=" ",t.append(u)}t.append(`
`)}return t.toString()},n}(),Vk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G0=function(n){Vk(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Pf),Uk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fk=function(n){Uk(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var u=0,c=0,h=t.length;u<h;u+=4,c++){var p=void 0,m=t[u+3];if(m===0)p=255;else{var y=t[u],_=t[u+1],E=t[u+2];p=306*y+601*_+117*E+512>>10}s[c]=p}else for(var u=0,c=0,b=t.length;u<b;u+=4,c++){var p=void 0,m=t[u+3];if(m===0)p=255;else{var y=t[u],_=t[u+1],E=t[u+2];p=306*y+601*_+117*E+512>>10}s[c]=255-p}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,u=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*u),h=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*u);return r.width=c,r.height=h,i.translate(c/2,h/2),i.rotate(a),i.drawImage(this.canvas,s/-2,u/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new G0(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Pf),Hk=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),ur=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function u(p){try{h(r.next(p))}catch(m){s(m)}}function c(p){try{h(r.throw(p))}catch(m){s(m)}}function h(p){p.done?a(p.value):i(p.value).then(u,c)}h((r=r.apply(n,e||[])).next())})},cr=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(p){return c([h,p])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},zk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gu=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return ur(this,void 0,void 0,function(){var e,t,r,i,a,s,u,c,h,p,m,y;return cr(this,function(_){switch(_.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=zk(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(u=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),h=a.groupId,p={deviceId:u,label:c,kind:s,groupId:h},t.push(p))}catch(E){m={error:E}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(m)throw m.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return ur(this,void 0,void 0,function(){var e;return cr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new Hk(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return ur(this,void 0,void 0,function(){var t;return cr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return ur(this,void 0,void 0,function(){return cr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return ur(this,void 0,void 0,function(){var r,i;return cr(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return ur(this,void 0,void 0,function(){var r;return cr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return ur(this,void 0,void 0,function(){var r,i;return cr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return ur(this,void 0,void 0,function(){return cr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return ur(this,void 0,void 0,function(){var i,a;return cr(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return ur(this,void 0,void 0,function(){var i;return cr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return ur(this,void 0,void 0,function(){var i;return cr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return ur(this,void 0,void 0,function(){var r;return cr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return ur(this,void 0,void 0,function(){return cr(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new tn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new tn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new tn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new tn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new tn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new tn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new tn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new tn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new tn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new tn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return ur(this,void 0,void 0,function(){return cr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return ur(this,void 0,void 0,function(){return cr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,u){if(i._stopAsyncDecode){u(new ie("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(y){var h=t&&y instanceof ie,p=y instanceof fn||y instanceof ge,m=p&&r;if(h||m)return setTimeout(a,i._timeBetweenDecodingAttempts,s,u);u(y)}};return new Promise(function(s,u){return a(s,u)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof fn||c instanceof ge,u=c instanceof ie;(s||u)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new Fk(r,t),a=new wC(i);return new _C(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),ir=function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=Ct.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=Ct.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Ct.arraycopy(t,0,r,0,t.length),Ct.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),_g;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(_g||(_g={}));const Se=_g;var wg;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(wg||(wg={}));const $n=wg;var q0=function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Fc=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Io=function(){function n(e,t){if(t.length===0)throw new Ce;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ct.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=Fc.addOrSubtract(r,s)}return r}r=t[0];for(var u=t.length,c=this.field,i=1;i<u;i++)r=Fc.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;Ct.arraycopy(r,0,a,0,s);for(var u=s;u<r.length;u++)a[u]=Fc.addOrSubtract(t[u-s],r[u]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),u=this.field,c=0;c<r;c++)for(var h=t[c],p=0;p<a;p++)s[c+p]=Fc.addOrSubtract(s[c+p],u.multiply(h,i[p]));return new n(u,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,u=0;u<i;u++)a[u]=s.multiply(r[u],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ce("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var u=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),h=e.multiplyByMonomial(u,c),p=t.buildMonomial(u,c);r=r.addOrSubtract(p),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Gk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EC=function(n){Gk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Tr),qk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wr=function(n){qk(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),u=1,c=0;c<r;c++)s[c]=u,u*=2,u>=r&&(u^=t,u&=r-1);a.expTable=s;for(var h=new Int32Array(r),c=0;c<r-1;c++)h[s[c]]=c;return a.logTable=h,a.zero=new Io(a,Int32Array.from([0])),a.one=new Io(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ce;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Io(this,i)},e.prototype.inverse=function(t){if(t===0)throw new EC;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+We.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Fc),Xk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dd=function(n){Xk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Tr),Wk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mf=function(n){Wk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Tr),X0=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Io(r,e),a=new Int32Array(t),s=!0,u=0;u<t;u++){var c=i.evaluateAt(r.exp(u+r.getGeneratorBase()));a[a.length-1-u]=c,c!==0&&(s=!1)}if(!s)for(var h=new Io(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),h,t),m=p[0],y=p[1],_=this.findErrorLocations(m),E=this.findErrorMagnitudes(y,_),u=0;u<_.length;u++){var b=e.length-1-r.log(_[u]);if(b<0)throw new dd("Bad error location");e[b]=wr.addOrSubtract(e[b],E[u])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,u=t,c=a.getZero(),h=a.getOne();u.getDegree()>=(r/2|0);){var p=s,m=c;if(s=u,c=h,s.isZero())throw new dd("r_{i-1} was zero");u=p;for(var y=a.getZero(),_=s.getCoefficient(s.getDegree()),E=a.inverse(_);u.getDegree()>=s.getDegree()&&!u.isZero();){var b=u.getDegree()-s.getDegree(),T=a.multiply(u.getCoefficient(u.getDegree()),E);y=y.addOrSubtract(a.buildMonomial(b,T)),u=u.addOrSubtract(s.multiplyByMonomial(b,T))}if(h=y.multiply(c).addOrSubtract(m),u.getDegree()>=s.getDegree())throw new Mf("Division algorithm failed to reduce polynomial?")}var S=h.getCoefficient(0);if(S===0)throw new dd("sigmaTilde(0) was zero");var N=a.inverse(S),P=h.multiplyScalar(N),j=u.multiplyScalar(N);return[P,j]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new dd("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var u=a.inverse(t[s]),c=1,h=0;h<r;h++)if(s!==h){var p=a.multiply(t[h],u),m=(p&1)===0?p|1:p&-2;c=a.multiply(c,m)}i[s]=a.multiply(e.evaluateAt(u),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],u))}return i},n}(),Gn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Gn||(Gn={}));var PE=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),u=new q0(a,s,null,null);return u.setNumBits(i.length),u},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Gn.UPPER,i=Gn.UPPER,a="",s=0;s<t;)if(i===Gn.BINARY){if(t-s<5)break;var u=n.readCode(e,s,5);if(s+=5,u===0){if(t-s<11)break;u=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<u;c++){if(t-s<8){s=t;break}var h=n.readCode(e,s,8);a+=it.castAsNonUtf8Char(h),s+=8}i=r}else{var p=i===Gn.DIGIT?4:5;if(t-s<p)break;var h=n.readCode(e,s,p);s+=p;var m=n.getCharacter(i,h);m.startsWith("CTRL_")?(r=i,i=n.getTable(m.charAt(5)),m.charAt(6)==="L"&&(r=i)):(a+=m,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Gn.LOWER;case"P":return Gn.PUNCT;case"M":return Gn.MIXED;case"D":return Gn.DIGIT;case"B":return Gn.BINARY;case"U":default:return Gn.UPPER}},n.getCharacter=function(e,t){switch(e){case Gn.UPPER:return n.UPPER_TABLE[t];case Gn.LOWER:return n.LOWER_TABLE[t];case Gn.MIXED:return n.MIXED_TABLE[t];case Gn.PUNCT:return n.PUNCT_TABLE[t];case Gn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Mf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=wr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=wr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=wr.AZTEC_DATA_10):(r=12,t=wr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new ge;for(var s=e.length%r,u=new Int32Array(a),c=0;c<a;c++,s+=r)u[c]=n.readCode(e,s,r);try{var h=new X0(t);h.decode(u,a-i)}catch(T){throw new ge(T)}for(var p=(1<<r)-1,m=0,c=0;c<i;c++){var y=u[c];if(y===0||y===p)throw new ge;(y===1||y===p-1)&&m++}for(var _=new Array(i*r-m),E=0,c=0;c<i;c++){var y=u[c];if(y===1||y===p-1)_.fill(y>1,E,E+r-1),E+=r-1;else for(var b=r-1;b>=0;--b)_[E++]=(y&1<<b)!==0}return _},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var u=0;u<a.length;u++)a[u]=u;else for(var c=i+1+2*We.truncDivision(We.truncDivision(i,2)-1,15),h=i/2,p=We.truncDivision(c,2),u=0;u<h;u++){var m=u+We.truncDivision(u,15);a[h-u-1]=p-m-1,a[h+u]=p+m+1}for(var u=0,y=0;u<r;u++){for(var _=(r-u)*4+(t?9:12),E=u*2,b=i-1-E,T=0;T<_;T++)for(var S=T*2,N=0;N<2;N++)s[y+S+N]=e.get(a[E+N],a[E+T]),s[y+2*_+S+N]=e.get(a[E+T],a[b-N]),s[y+4*_+S+N]=e.get(a[b-N],a[b-T]),s[y+6*_+S+N]=e.get(a[b-T],a[E+N]);y+=_*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),st=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),Eg=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ee=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Eg.floatToIntBits(this.x)+Eg.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,u;if(r>=t&&r>=i?(s=e[0],a=e[1],u=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],u=e[2]):(s=e[2],a=e[0],u=e[1]),this.crossProductZ(a,s,u)<0){var c=a;a=u,u=c}e[0]=a,e[1]=s,e[2]=u},n.distance=function(e,t){return st.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),qv=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),$k=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yk=function(n){$k(e,n);function e(t,r,i,a,s){var u=n.call(this,t,r)||this;return u.compact=i,u.nbDatablocks=a,u.nbLayers=s,u}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(qv),Ag=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,u=!1,c=!1,h=!1,p=!1,m=!1,y=this.width,_=this.height;s;){s=!1;for(var E=!0;(E||!c)&&t<y;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,s=!0,c=!0):c||t++;if(t>=y){a=!0;break}for(var b=!0;(b||!h)&&i<_;)b=this.containsBlackPoint(e,t,i,!0),b?(i++,s=!0,h=!0):h||i++;if(i>=_){a=!0;break}for(var T=!0;(T||!p)&&e>=0;)T=this.containsBlackPoint(r,i,e,!1),T?(e--,s=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var S=!0;(S||!m)&&r>=0;)S=this.containsBlackPoint(e,t,r,!0),S?(r--,s=!0,m=!0):m||r--;if(r<0){a=!0;break}s&&(u=!0)}if(!a&&u){for(var N=t-e,P=null,j=1;P===null&&j<N;j++)P=this.getBlackPointOnSegment(e,i-j,e+j,i);if(P==null)throw new ie;for(var U=null,j=1;U===null&&j<N;j++)U=this.getBlackPointOnSegment(e,r+j,e+j,r);if(U==null)throw new ie;for(var X=null,j=1;X===null&&j<N;j++)X=this.getBlackPointOnSegment(t,r+j,t-j,r);if(X==null)throw new ie;for(var D=null,j=1;D===null&&j<N;j++)D=this.getBlackPointOnSegment(t,i-j,t-j,i);if(D==null)throw new ie;return this.centerEdges(D,P,X,U)}else throw new ie},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=st.round(st.distance(e,t,r,i)),s=(r-e)/a,u=(i-t)/a,c=this.image,h=0;h<a;h++){var p=st.round(e+h*s),m=st.round(t+h*u);if(c.get(p,m))return new Ee(p,m)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),u=t.getX(),c=t.getY(),h=r.getX(),p=r.getY(),m=i.getX(),y=i.getY(),_=n.CORR;return a<this.width/2?[new Ee(m-_,y+_),new Ee(u+_,c+_),new Ee(h-_,p-_),new Ee(a+_,s-_)]:[new Ee(m+_,y+_),new Ee(u+_,c-_),new Ee(h-_,p+_),new Ee(a-_,s-_)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var u=e;u<=t;u++)if(a.get(r,u))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),ME=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var u=Math.floor(t[s]),c=Math.floor(t[s+1]);if(u<-1||u>r||c<-1||c>i)throw new ie;a=!1,u===-1?(t[s]=0,a=!0):u===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var u=Math.floor(t[s]),c=Math.floor(t[s+1]);if(u<-1||u>r||c<-1||c>i)throw new ie;a=!1,u===-1?(t[s]=0,a=!0):u===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}},n}(),AC=function(){function n(e,t,r,i,a,s,u,c,h){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=u,this.a23=c,this.a33=h}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,u,c,h,p,m,y,_,E,b,T){var S=n.quadrilateralToSquare(e,t,r,i,a,s,u,c),N=n.squareToQuadrilateral(h,p,m,y,_,E,b,T);return N.times(S)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,u=this.a22,c=this.a23,h=this.a31,p=this.a32,m=this.a33,y=0;y<t;y+=2){var _=e[y],E=e[y+1],b=a*_+c*E+m;e[y]=(r*_+s*E+h)/b,e[y+1]=(i*_+u*E+p)/b}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,u=this.a22,c=this.a23,h=this.a31,p=this.a32,m=this.a33,y=e.length,_=0;_<y;_++){var E=e[_],b=t[_],T=a*E+c*b+m;e[_]=(r*E+s*b+h)/T,t[_]=(i*E+u*b+p)/T}},n.squareToQuadrilateral=function(e,t,r,i,a,s,u,c){var h=e-r+a-u,p=t-i+s-c;if(h===0&&p===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var m=r-a,y=u-a,_=i-s,E=c-s,b=m*E-y*_,T=(h*E-y*p)/b,S=(m*p-h*_)/b;return new n(r-e+T*r,u-e+S*u,e,i-t+T*i,c-t+S*c,t,T,S,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,u,c){return n.squareToQuadrilateral(e,t,r,i,a,s,u,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),Kk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qk=function(n){Kk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,u,c,h,p,m,y,_,E,b,T,S,N,P,j){var U=AC.quadrilateralToQuadrilateral(a,s,u,c,h,p,m,y,_,E,b,T,S,N,P,j);return this.sampleGridWithTransform(t,r,i,U)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ie;for(var s=new Xi(r,i),u=new Float32Array(2*r),c=0;c<i;c++){for(var h=u.length,p=c+.5,m=0;m<h;m+=2)u[m]=m/2+.5,u[m+1]=p;a.transformPoints(u),ME.checkAndNudgePoints(t,u);try{for(var m=0;m<h;m+=2)t.get(Math.floor(u[m]),Math.floor(u[m+1]))&&s.set(m/2,c)}catch{throw new ie}}return s},e}(ME),Xv=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new Qk,n}(),xr=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ee(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),Zk=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new Yk(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ie;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var u=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,u){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(We.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ie},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),u=r-1;u>=0;--u)s[u]=e&15,e>>=4;try{var c=new X0(wr.AZTEC_PARAM);c.decode(s,a)}catch{throw new ie}for(var h=0,u=0;u<i;u++)h=(h<<4)+s[u];return h},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var u=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),h=this.getFirstDifferent(i,s,-1,1),p=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var m=this.distancePoint(p,u)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(m<.75||m>1.25||!this.isWhiteOrBlackRectangle(u,c,h,p))break}t=u,r=c,i=h,a=p,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;var y=new Ee(t.getX()+.5,t.getY()-.5),_=new Ee(r.getX()+.5,r.getY()+.5),E=new Ee(i.getX()-.5,i.getY()+.5),b=new Ee(a.getX()-.5,a.getY()-.5);return this.expandSquare([y,_,E,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new Ag(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,u=this.image.getHeight()/2;e=this.getFirstDifferent(new xr(s+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new xr(s+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new xr(s-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new xr(s-7,u-7),!1,-1,-1).toResultPoint()}var c=st.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=st.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new Ag(this.image,15,c,h).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new xr(c+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new xr(c+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new xr(c-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new xr(c-7,h-7),!1,-1,-1).toResultPoint()}return c=st.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=st.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new xr(c,h)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=Xv.getInstance(),u=this.getDimension(),c=u/2-this.nbCenterLayers,h=u/2+this.nbCenterLayers;return s.sampleGrid(e,u,u,c,c,h,c,h,h,c,h,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,u=e.getX(),c=e.getY(),h=s*(t.getX()-e.getX())/a,p=s*(t.getY()-e.getY())/a,m=0;m<r;m++)this.image.get(st.round(u+m*h),st.round(c+m*p))&&(i|=1<<r-m-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new xr(e.getX()-a,e.getY()+a),t=new xr(t.getX()-a,t.getY()-a),r=new xr(r.getX()+a,r.getY()-a),i=new xr(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var u=this.getColor(e,t);return u!==s||(u=this.getColor(t,r),u!==s)?!1:(u=this.getColor(r,i),u===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,u=e.getX(),c=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),m=0;m<p;m++)u+=i,c+=a,this.image.get(st.round(u),st.round(c))!==h&&s++;var y=s/r;return y>.1&&y<.9?0:y<=.1===h?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new xr(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,h=new Ee(u+i*a,c+i*s),p=new Ee(u-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var m=new Ee(u+i*a,c+i*s),y=new Ee(u-i*a,c-i*s),_=[h,m,p,y];return _},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=st.round(e.getX()),r=st.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return st.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return st.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(We.truncDivision(this.nbLayers-4,8)+1)+15},n}(),i0=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new Zk(e.getBlackMatrix()),a=null,s=null;try{var u=i.detectMirror(!1);a=u.getPoints(),this.reportFoundResultPoints(t,a),s=new PE().decode(u)}catch(m){r=m}if(s==null)try{var u=i.detectMirror(!0);a=u.getPoints(),this.reportFoundResultPoints(t,a),s=new PE().decode(u)}catch(m){throw r??m}var c=new ir(s.getText(),s.getRawBytes(),s.getNumBits(),a,Se.AZTEC,Ct.currentTimeMillis()),h=s.getByteSegments();h!=null&&c.putMetadata($n.BYTE_SEGMENTS,h);var p=s.getECLevel();return p!=null&&c.putMetadata($n.ERROR_CORRECTION_LEVEL,p),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(It.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),Jk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Jk(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new i0,t)||this}return e})(gu);var An=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(It.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),u=270;s!==null&&s.get($n.ORIENTATION)===!0&&(u=u+s.get($n.ORIENTATION)%360),a.putMetadata($n.ORIENTATION,u);var c=a.getResultPoints();if(c!==null)for(var h=i.getHeight(),p=0;p<c.length;p++)c[p]=new Ee(h-c[p].getY()-1,c[p].getX());return a}else throw new ie}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Ln(r),s=t&&t.get(It.TRY_HARDER)===!0,u=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var h=Math.trunc(i/2),p=0;p<c;p++){var m=Math.trunc((p+1)/2),y=(p&1)===0,_=h+u*(y?m:-m);if(_<0||_>=i)break;try{a=e.getBlackRow(_,a)}catch{continue}for(var E=function(N){if(N===1&&(a.reverse(),t&&t.get(It.NEED_RESULT_POINT_CALLBACK)===!0)){var P=new Map;t.forEach(function(X,D){return P.set(D,X)}),P.delete(It.NEED_RESULT_POINT_CALLBACK),t=P}try{var j=b.decodeRow(_,a,t);if(N===1){j.putMetadata($n.ORIENTATION,180);var U=j.getResultPoints();U!==null&&(U[0]=new Ee(r-U[0].getX()-1,U[0].getY()),U[1]=new Ee(r-U[1].getX()-1,U[1].getY()))}return{value:j}}catch{}},b=this,T=0;T<2;T++){var S=E(T);if(typeof S=="object")return S.value}}throw new ie},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new ie;for(var u=!e.get(t),c=0,h=t;h<s;){if(e.get(h)!==u)r[c]++;else{if(++c===i)break;r[c]=1,u=!u}h++}if(!(c===i||c===i-1&&h===s))throw new ie},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ie;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,u=0;u<i;u++)a+=e[u],s+=t[u];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var h=0,p=0;p<i;p++){var m=e[p],y=t[p]*c,_=m>y?m-y:y-m;if(_>r)return Number.POSITIVE_INFINITY;h+=_}return h/a},n}(),eL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kE=function(n){eL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),u=i,c=!1,h=6,p=i;p<r;p++)if(t.get(p)!==c)s[a]++;else{if(a===h-1){for(var m=e.MAX_AVG_VARIANCE,y=-1,_=e.CODE_START_A;_<=e.CODE_START_C;_++){var E=An.patternMatchVariance(s,e.CODE_PATTERNS[_],e.MAX_INDIVIDUAL_VARIANCE);E<m&&(m=E,y=_)}if(y>=0&&t.isRange(Math.max(0,u-(p-u)/2),u,!1))return Int32Array.from([u,p,y]);u+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new ie},e.decodeCode=function(t,r,i){An.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,u=0;u<e.CODE_PATTERNS.length;u++){var c=e.CODE_PATTERNS[u],h=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,s=u)}if(s>=0)return s;throw new ie},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(It.ASSUME_GS1)===!0,s=e.findStartPattern(r),u=s[2],c=0,h=new Uint8Array(20);h[c++]=u;var p;switch(u){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new ge}for(var m=!1,y=!1,_="",E=s[0],b=s[1],T=Int32Array.from([0,0,0,0,0,0]),S=0,N=0,P=u,j=0,U=!0,X=!1,D=!1;!m;){var R=y;switch(y=!1,S=N,N=e.decodeCode(r,T,b),h[c++]=N,N!==e.CODE_STOP&&(U=!0),N!==e.CODE_STOP&&(j++,P+=j*N),E=b,b+=T.reduce(function(ue,fe){return ue+fe},0),N){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ge}switch(p){case e.CODE_CODE_A:if(N<64)D===X?_+=String.fromCharCode(32+N):_+=String.fromCharCode(32+N+128),D=!1;else if(N<96)D===X?_+=String.fromCharCode(N-64):_+=String.fromCharCode(N+64),D=!1;else switch(N!==e.CODE_STOP&&(U=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!X&&D?(X=!0,D=!1):X&&D?(X=!1,D=!1):D=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_B:if(N<96)D===X?_+=String.fromCharCode(32+N):_+=String.fromCharCode(32+N+128),D=!1;else switch(N!==e.CODE_STOP&&(U=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!X&&D?(X=!0,D=!1):X&&D?(X=!1,D=!1):D=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_C:if(N<100)N<10&&(_+="0"),_+=N;else switch(N!==e.CODE_STOP&&(U=!1),N){case e.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:m=!0;break}break}R&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var M=b-E;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-E)/2),!1))throw new ie;if(P-=j*S,P%103!==S)throw new fn;var B=_.length;if(B===0)throw new ie;B>0&&U&&(p===e.CODE_CODE_C?_=_.substring(0,B-2):_=_.substring(0,B-1));for(var G=(s[1]+s[0])/2,H=E+M/2,k=h.length,xe=new Uint8Array(k),ve=0;ve<k;ve++)xe[ve]=h[ve];var J=[new Ee(G,t),new Ee(H,t)];return new ir(_,xe,0,J,Se.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(An),tL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Om=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LE=function(n){tL(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,u,c,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,h),m=r.getNextSet(p[1]),y=r.getSize(),_,E;do{e.recordPattern(r,m,h);var b=e.toNarrowWidePattern(h);if(b<0)throw new ie;_=e.patternToChar(b),this.decodeRowResult+=_,E=m;try{for(var T=(a=void 0,Om(h)),S=T.next();!S.done;S=T.next()){var N=S.value;m+=N}}catch(k){a={error:k}}finally{try{S&&!S.done&&(s=T.return)&&s.call(T)}finally{if(a)throw a.error}}m=r.getNextSet(m)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var j=Om(h),U=j.next();!U.done;U=j.next()){var N=U.value;P+=N}}catch(k){u={error:k}}finally{try{U&&!U.done&&(c=j.return)&&c.call(j)}finally{if(u)throw u.error}}var X=m-E-P;if(m!==y&&X*2<P)throw new ie;if(this.usingCheckDigit){for(var D=this.decodeRowResult.length-1,R=0,M=0;M<D;M++)R+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(D)!==e.ALPHABET_STRING.charAt(R%43))throw new fn;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new ie;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var G=(p[1]+p[0])/2,H=E+P/2;return new ir(B,null,0,[new Ee(G,t),new Ee(H,t)],Se.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,u=a,c=!1,h=r.length,p=a;p<i;p++)if(t.get(p)!==c)r[s]++;else{if(s===h-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,u-Math.floor((p-u)/2)),u,!1))return[u,p];u+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new ie},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,u;do{var c=2147483647;try{for(var h=(r=void 0,Om(t)),p=h.next();!p.done;p=h.next()){var m=p.value;m<c&&m>s&&(c=m)}}catch(b){r={error:b}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}s=c,u=0;for(var y=0,_=0,E=0;E<a;E++){var m=t[E];m>s&&(_|=1<<a-1-E,u++,y+=m)}if(u===3){for(var E=0;E<a&&u>0;E++){var m=t[E];if(m>s&&(u--,m*2>=y))return-1}return _}}while(u>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ie},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var u=t.charAt(a+1),c="\0";switch(s){case"+":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new ge;break;case"$":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new ge;break;case"%":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u==="X"||u==="Y"||u==="Z")c="";else throw new ge;break;case"/":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new ge;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(An),nL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jE=function(n){nL(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,u,c,h=this.findAsteriskPattern(r),p=r.getNextSet(h[1]),m=r.getSize(),y=this.counters;y.fill(0),this.decodeRowResult="";var _,E;do{e.recordPattern(r,p,y);var b=this.toPattern(y);if(b<0)throw new ie;_=this.patternToChar(b),this.decodeRowResult+=_,E=p;try{for(var T=(a=void 0,Dm(y)),S=T.next();!S.done;S=T.next()){var N=S.value;p+=N}}catch(M){a={error:M}}finally{try{S&&!S.done&&(s=T.return)&&s.call(T)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var j=Dm(y),U=j.next();!U.done;U=j.next()){var N=U.value;P+=N}}catch(M){u={error:M}}finally{try{U&&!U.done&&(c=j.return)&&c.call(j)}finally{if(u)throw u.error}}if(p===m||!r.get(p))throw new ie;if(this.decodeRowResult.length<2)throw new ie;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var X=this.decodeExtended(this.decodeRowResult),D=(h[1]+h[0])/2,R=E+P/2;return new ir(X,null,0,[new Ee(D,t),new Ee(R,t)],Se.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,u=!1,c=a.length,h=0,p=i;p<r;p++)if(t.get(p)!==u)a[h]++;else{if(h===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,p]);s+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,u=!u}throw new ie},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=Dm(t),u=s.next();!u.done;u=s.next()){var c=u.value;a+=c}}catch(E){r={error:E}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var h=0,p=t.length,m=0;m<p;m++){var y=Math.round(t[m]*9/a);if(y<1||y>4)return-1;if((m&1)===0)for(var _=0;_<y;_++)h=h<<1|1;else h<<=y}return h},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ie},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new ge;var u=t.charAt(a+1),c="\0";switch(s){case"d":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new ge;break;case"a":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new ge;break;case"b":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u>="X"&&u<="Z")c="";else throw new ge;break;case"c":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new ge;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,u=r-1;u>=0;u--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(u)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new fn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(An),rL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BE=function(n){rL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,u=this.decodeStart(r),c=this.decodeEnd(r),h=new Ge;e.decodeMiddle(r,u[1],c[0],h);var p=h.toString(),m=null;i!=null&&(m=i.get(It.ALLOWED_LENGTHS)),m==null&&(m=e.DEFAULT_ALLOWED_LENGTHS);var y=p.length,_=!1,E=0;try{for(var b=iL(m),T=b.next();!T.done;T=b.next()){var S=T.value;if(y===S){_=!0;break}S>E&&(E=S)}}catch(j){a={error:j}}finally{try{T&&!T.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(!_&&y>E&&(_=!0),!_)throw new ge;var N=[new Ee(u[1],t),new Ee(c[0],t)],P=new ir(p,null,0,N,Se.ITF,new Date().getTime());return P},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),u=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),u.fill(0),c.fill(0);r<i;){An.recordPattern(t,r,s);for(var h=0;h<5;h++){var p=2*h;u[h]=s[p],c[h]=s[p+1]}var m=e.decodeDigit(u);a.append(m.toString()),m=this.decodeDigit(c),a.append(m.toString()),s.forEach(function(y){r+=y})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ie},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ie;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ie&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),u=t.getSize(),c=!1,h=0,p=r;s.fill(0);for(var m=r;m<u;m++)if(t.get(m)!==c)s[h]++;else{if(h===a-1){if(An.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,m];p+=s[0]+s[1],Ct.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,c=!c}throw new ie},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var u=e.PATTERNS[s],c=An.patternMatchVariance(t,u,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new ie},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(An),aL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eu=function(n){aL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var u=i[0];a=i[1];var c=u-(a-u);c>=0&&(r=t.isRange(c,u,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var u=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,h=r,p=a.length,m=i,y=r;y<u;y++)if(t.get(y)!==m)s[c]++;else{if(c===p-1){if(An.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,y]);h+=s[0]+s[1];for(var _=s.slice(2,s.length),E=0;E<c-1;E++)s[E]=_[E];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,m=!m}throw new ie},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,u=-1,c=a.length,h=0;h<c;h++){var p=a[h],m=An.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);m<s&&(s=m,u=h)}if(u>=0)return u;throw new ie},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(An),oL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sL=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),u=n.parseExtensionString(s),c=[new Ee((r[0]+r[1])/2,e),new Ee(a,e)],h=new ir(s,null,0,c,Se.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&h.putAllMetadata(u),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=e.getSize(),c=t[1],h=0,p=0;p<5&&c<u;p++){var m=eu.decodeDigit(e,s,c,eu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var y=(i=void 0,oL(s)),_=y.next();!_.done;_=y.next()){var E=_.value;c+=E}}catch(T){i={error:T}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}m>=10&&(h|=1<<4-p),p!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new ie;var b=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==b)throw new ie;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ie},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[$n.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n}(),lL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uL=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),u=n.parseExtensionString(s),c=[new Ee((r[0]+r[1])/2,e),new Ee(a,e)],h=new ir(s,null,0,c,Se.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&h.putAllMetadata(u),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=e.getSize(),c=t[1],h=0,p=0;p<2&&c<u;p++){var m=eu.decodeDigit(e,s,c,eu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var y=(i=void 0,lL(s)),_=y.next();!_.done;_=y.next()){var E=_.value;c+=E}}catch(b){i={error:b}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}m>=10&&(h|=1<<1-p),p!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new ie;if(parseInt(r.toString())%4!==h)throw new ie;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[$n.ISSUE_NUMBER,parseInt(e)]])},n}(),cL=function(){function n(){}return n.decodeRow=function(e,t,r){var i=eu.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new sL;return a.decodeRow(e,t,i)}catch{var s=new uL;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),fL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xn=function(n){fL(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(u){return Int32Array.from(u)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(It.NEED_RESULT_POINT_CALLBACK);if(s!=null){var u=new Ee((a[0]+a[1])/2,t);s.foundPossibleResultPoint(u)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),h=c.rowOffset,p=c.resultString;if(s!=null){var m=new Ee(h,t);s.foundPossibleResultPoint(m)}var y=e.decodeEnd(r,h);if(s!=null){var _=new Ee((y[0]+y[1])/2,t);s.foundPossibleResultPoint(_)}var E=y[1],b=E+(E-y[0]);if(b>=r.getSize()||!r.isRange(E,b,!1))throw new ie;var T=p.toString();if(T.length<8)throw new ge;if(!e.checkChecksum(T))throw new fn;var S=(a[1]+a[0])/2,N=(y[1]+y[0])/2,P=this.getBarcodeFormat(),j=[new Ee(S,t),new Ee(N,t)],U=new ir(T,null,0,j,P,new Date().getTime()),X=0;try{var D=cL.decodeRow(t,r,y[1]);U.putMetadata($n.UPC_EAN_EXTENSION,D.getText()),U.putAllMetadata(D.getResultMetadata()),U.addResultPoints(D.getResultPoints()),X=D.getText().length}catch{}var R=i==null?null:i.get(It.ALLOWED_EAN_EXTENSIONS);if(R!=null){var M=!1;for(var B in R)if(X.toString()===B){M=!0;break}if(!M)throw new ie}return P===Se.EAN_13||Se.UPC_A,U},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(eu),hL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bg=function(n){hL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,u,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),m=r[1],y=0,_=0;_<6&&m<p;_++){var E=xn.decodeDigit(t,h,m,xn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var b=(a=void 0,VE(h)),T=b.next();!T.done;T=b.next()){var S=T.value;m+=S}}catch(U){a={error:U}}finally{try{T&&!T.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}E>=10&&(y|=1<<5-_)}i=e.determineFirstDigit(i,y);var N=xn.findGuardPattern(t,m,!0,xn.MIDDLE_PATTERN,new Int32Array(xn.MIDDLE_PATTERN.length).fill(0));m=N[1];for(var _=0;_<6&&m<p;_++){var E=xn.decodeDigit(t,h,m,xn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var P=(u=void 0,VE(h)),j=P.next();!j.done;j=P.next()){var S=j.value;m+=S}}catch(D){u={error:D}}finally{try{j&&!j.done&&(c=P.return)&&c.call(P)}finally{if(u)throw u.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Se.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ie},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(xn),dL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FE=function(n){dL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,u,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),m=r[1],y=0;y<4&&m<p;y++){var _=xn.decodeDigit(t,h,m,xn.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var E=(a=void 0,UE(h)),b=E.next();!b.done;b=E.next()){var T=b.value;m+=T}}catch(j){a={error:j}}finally{try{b&&!b.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}}var S=xn.findGuardPattern(t,m,!0,xn.MIDDLE_PATTERN,new Int32Array(xn.MIDDLE_PATTERN.length).fill(0));m=S[1];for(var y=0;y<4&&m<p;y++){var _=xn.decodeDigit(t,h,m,xn.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var N=(u=void 0,UE(h)),P=N.next();!P.done;P=N.next()){var T=P.value;m+=T}}catch(X){u={error:X}}finally{try{P&&!P.done&&(c=N.return)&&c.call(N)}finally{if(u)throw u.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Se.EAN_8},e}(xn),pL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HE=function(n){pL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new bg,t}return e.prototype.getBarcodeFormat=function(){return Se.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new ir(r.substring(1),null,null,t.getResultPoints(),Se.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ie},e.prototype.reset=function(){this.ean13Reader.reset()},e}(xn),mL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zE=function(n){mL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,u=this.decodeMiddleCounters.map(function(T){return T});u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),h=r[1],p=0,m=0;m<6&&h<c;m++){var y=e.decodeDigit(t,u,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+y%10);try{for(var _=(a=void 0,gL(u)),E=_.next();!E.done;E=_.next()){var b=E.value;h+=b}}catch(T){a={error:T}}finally{try{E&&!E.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}y>=10&&(p|=1<<5-m)}return e.determineNumSysAndCheckDigit(new Ge(i),p),h},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return xn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ie.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Se.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ge;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(xn),vL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pm=function(n){vL(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(It.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Se.EAN_13)>-1&&a.push(new bg),i.indexOf(Se.UPC_A)>-1&&a.push(new HE),i.indexOf(Se.EAN_8)>-1&&a.push(new FE),i.indexOf(Se.UPC_E)>-1&&a.push(new zE)),a.length===0&&(a.push(new bg),a.push(new HE),a.push(new FE),a.push(new zE)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var u=GE(this.readers),c=u.next();!c.done;c=u.next()){var h=c.value;try{var p=h.decodeRow(t,r,i),m=p.getBarcodeFormat()===Se.EAN_13&&p.getText().charAt(0)==="0",y=i==null?null:i.get(It.POSSIBLE_FORMATS),_=y==null||y.includes(Se.UPC_A);if(m&&_){var E=p.getRawBytes(),b=new ir(p.getText().substring(1),E,E?E.length:null,p.getResultPoints(),Se.UPC_A);return b.putAllMetadata(p.getResultMetadata()),b}return p}catch{}}}catch(T){a={error:T}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}throw new ie},e.prototype.reset=function(){var t,r;try{for(var i=GE(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(An),yL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xL=function(n){yL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ie;var s=this.codaBarDecodeRow(a.row);if(!s)throw new ie;return new ir(s,null,0,[new Ee(a.left,t),new Ee(a.right,t)],Se.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],u=r[0],c=1,h=1;h<r.length;h++)r[h]===u?c++:(u=r[h],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,h){return(c+h)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var u=r.join("");return this.validCodaBarString(u)?u:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(An),_L=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ws=function(n){_L(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(An.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ie},e.count=function(t){return st.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],u=a/s;if(u>=e.MIN_FINDER_PATTERN_RATIO&&u<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=wL(t),m=p.next();!m.done;m=p.next()){var y=m.value;y>h&&(h=y),y<c&&(c=y)}}catch(_){r={error:_}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(An),a0=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),bC=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ee(r,a)),this.resultPoints.push(new Ee(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),EL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ll=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var u=EL(e),c=u.next();!c.done;c=u.next()){var h=c.value;s+=h}}catch(N){i={error:N}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}for(var p=0,m=0,y=e.length,_=0;_<y-1;_++){var E=void 0;for(E=1,m|=1<<_;E<e[_];E++,m&=~(1<<_)){var b=n.combins(s-E-1,y-_-2);if(r&&m===0&&s-E-(y-_-1)>=y-_-1&&(b-=n.combins(s-E-(y-_),y-_-2)),y-_-1>1){for(var T=0,S=s-E-(y-_-2);S>t;S--)T+=n.combins(s-E-S-1,y-_-3);b-=T*(y-1-_)}else s-E>t&&b--;p+=b}s-=E}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,u=e;u>r;u--)a*=u,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),AL=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Ln(r),a=0,s=e[0],u=s.getRightChar().getValue(),c=11;c>=0;--c)(u&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var h=e[c],p=h.getLeftChar().getValue(),m=11;m>=0;--m)(p&1<<m)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var y=h.getRightChar().getValue(),m=11;m>=0;--m)(y&1<<m)!==0&&i.set(a),a++}return i},n}(),ys=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),Wv=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),bL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ci=function(n){bL(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Wv),TL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xs=function(n){TL(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Wv),SL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ol=function(n){SL(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new ge;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Wv),pd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CL=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,u,c,h;if(!e)return null;if(e.length<2)throw new ie;var p=e.substring(0,2);try{for(var m=pd(n.TWO_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next()){var _=y.value;if(_[0]===p)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,_[2],e):n.processFixedAI(2,_[1],e)}}catch(X){t={error:X}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}if(e.length<3)throw new ie;var E=e.substring(0,3);try{for(var b=pd(n.THREE_DIGIT_DATA_LENGTH),T=b.next();!T.done;T=b.next()){var _=T.value;if(_[0]===E)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,_[2],e):n.processFixedAI(3,_[1],e)}}catch(X){i={error:X}}finally{try{T&&!T.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var S=pd(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),N=S.next();!N.done;N=S.next()){var _=N.value;if(_[0]===E)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(X){s={error:X}}finally{try{N&&!N.done&&(u=S.return)&&u.call(S)}finally{if(s)throw s.error}}if(e.length<4)throw new ie;var P=e.substring(0,4);try{for(var j=pd(n.FOUR_DIGIT_DATA_LENGTH),U=j.next();!U.done;U=j.next()){var _=U.value;if(_[0]===P)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(X){c={error:X}}finally{try{U&&!U.done&&(h=j.return)&&h.call(j)}finally{if(c)throw c.error}}throw new ie},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ie;var i=r.substring(0,e);if(r.length<e+t)throw new ie;var a=r.substring(e,e+t),s=r.substring(e+t),u="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(s);return c==null?u:u+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),u=r.substring(a),c="("+i+")"+s,h=n.parseFieldsInGeneralPurpose(u);return h==null?c:c+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Md=function(){function n(e){this.buffer=new Ge,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=CL.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Ol(this.information.getSize(),Ol.FNC1,Ol.FNC1):new Ol(this.information.getSize(),t-1,Ol.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Ol(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new xs(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new xs(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new xs(this.current.getPosition(),this.buffer.toString()):t=new xs(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ys(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new xs(this.current.getPosition(),this.buffer.toString());return new ys(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ys(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new xs(this.current.getPosition(),this.buffer.toString());return new ys(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ys(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new xs(this.current.getPosition(),this.buffer.toString());return new ys(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ys(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ci(e+7,""+(r+1));if(r>=90&&r<116)return new ci(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new ge}return new ci(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ci(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Mf("Decoding invalid alphanumeric value: "+r)}return new ci(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),TC=function(){function n(e){this.information=e,this.generalDecoder=new Md(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),IL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fi=function(n){IL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(TC),NL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RL=function(n){NL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ge;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(fi),OL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DL=function(n){OL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ge;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(TC),PL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kd=function(n){PL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),u=1e5,c=0;c<5;++c)s/u===0&&t.append("0"),u/=10;t.append(s)},e}(fi),ML=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SC=function(n){ML(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+kd.GTIN_SIZE+e.WEIGHT_SIZE)throw new ie;var t=new Ge;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+kd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(kd),kL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LL=function(n){kL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(SC),jL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BL=function(n){jL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(SC),VL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UL=function(n){VL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+fi.GTIN_SIZE)throw new ie;var t=new Ge;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(fi),FL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HL=function(n){FL(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+fi.GTIN_SIZE)throw new ie;var t=new Ge;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(fi),zL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vo=function(n){zL(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ie;var t=new Ge;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var u=i;u/10===0&&t.append("0"),t.append(u),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(kd);function GL(n){try{if(n.get(1))return new RL(n);if(!n.get(2))return new DL(n);var e=Md.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new LL(n);case 5:return new BL(n)}var t=Md.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new UL(n);case 13:return new HL(n)}var r=Md.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new vo(n,"310","11");case 57:return new vo(n,"320","11");case 58:return new vo(n,"310","13");case 59:return new vo(n,"320","13");case 60:return new vo(n,"310","15");case 61:return new vo(n,"320","15");case 62:return new vo(n,"310","17");case 63:return new vo(n,"320","17")}}catch(i){throw console.log(i),new Mf("unknown decoder: "+n)}}var qE=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),qL=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),XL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yo=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WL=function(n){XL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(u){if(u instanceof ie){if(!this.pairs.length)throw new ie;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ie},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var u=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,yo(t)),h=c.next();!h.done;h=c.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(y){i={error:y}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(u.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var m=new Array(t);m.push(u);try{return this.checkRows(m,s+1)}catch(y){console.log(y)}}}throw new ie},e.isValidSequence=function(t){var r,i;try{for(var a=yo(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var u=s.value;if(!(t.length>u.length)){for(var c=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==u[h]){c=!1;break}if(c)return!0}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var u=this.rows[i];if(u.getRowNumber()>t){s=u.isEquivalent(this.pairs);break}a=u.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new qL(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,u,c,h;try{for(var p=yo(r),m=p.next();!m.done;m=p.next()){var y=m.value;if(y.getPairs().length!==t.length){var _=!0;try{for(var E=(s=void 0,yo(y.getPairs())),b=E.next();!b.done;b=E.next()){var T=b.value,S=!1;try{for(var N=(c=void 0,yo(t)),P=N.next();!P.done;P=N.next()){var j=P.value;if(qE.equals(T,j)){S=!0;break}}}catch(U){c={error:U}}finally{try{P&&!P.done&&(h=N.return)&&h.call(N)}finally{if(c)throw c.error}}S||(_=!1)}}catch(U){s={error:U}}finally{try{b&&!b.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}}}}catch(U){i={error:U}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,u,c,h;try{for(var p=yo(r),m=p.next();!m.done;m=p.next()){var y=m.value,_=!0;try{for(var E=(s=void 0,yo(t)),b=E.next();!b.done;b=E.next()){var T=b.value,S=!1;try{for(var N=(c=void 0,yo(y.getPairs())),P=N.next();!P.done;P=N.next()){var j=P.value;if(T.equals(j)){S=!0;break}}}catch(U){c={error:U}}finally{try{P&&!P.done&&(h=N.return)&&h.call(N)}finally{if(c)throw c.error}}if(!S){_=!1;break}}}catch(U){s={error:U}}finally{try{b&&!b.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}if(_)return!0}}catch(U){i={error:U}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=AL.buildBitArray(t),i=GL(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),u=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],u[0],u[1]];return new ir(a,null,null,c,Se.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,u=1;u<this.pairs.size();++u){var c=this.pairs.get(u);a+=c.getLeftChar().getChecksumPortion(),s++;var h=c.getRightChar();h!=null&&(a+=h.getChecksumPortion(),s++)}a%=211;var p=211*(s-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,u=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,a),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):u=!1;while(u);var h=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ie;var p;try{p=this.decodeDataCharacter(t,s,a,!1)}catch(m){p=null,console.log(m)}return new qE(h,p,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),u;if(i>=0)u=i;else if(this.isEmptyPair(r))u=0;else{var c=r[r.length-1];u=c.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;u<s&&(p=!t.get(u),!!p);)u++;for(var m=0,y=u,_=u;_<s;_++)if(t.get(_)!==p)a[m]++;else{if(m===3){if(h&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=_;return}h&&e.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,p=!p}throw new ie},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,u;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,u=this.startEnd[1]}else s=this.startEnd[0],u=t.getNextUnset(this.startEnd[1]+1),a=u-this.startEnd[1];var h=this.getDecodeFinderCounters();Ct.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new bC(p,[s,u],s,u,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),u=0;u<s.length;u++)s[u]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,h=s.length-1;c<h;c++,h--){var p=s[c];s[c]=s[h],s[h]=p}}var m=17,y=st.sum(new Int32Array(s))/m,_=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(y-_)/_>.3)throw new ie;for(var E=this.getOddCounts(),b=this.getEvenCounts(),T=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var N=1*s[c]/y,P=N+.5;if(P<1){if(N<.3)throw new ie;P=1}else if(P>8){if(N>8.7)throw new ie;P=8}var j=c/2;(c&1)===0?(E[j]=P,T[j]=N-P):(b[j]=P,S[j]=N-P)}this.adjustOddEvenCounts(m);for(var U=4*r.getValue()+(i?0:2)+(a?0:1)-1,X=0,D=0,c=E.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[U][2*c];D+=E[c]*R}X+=E[c]}for(var M=0,c=b.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[U][2*c+1];M+=b[c]*R}var B=D+M;if((X&1)!==0||X>13||X<4)throw new ie;var G=(13-X)/2,H=e.SYMBOL_WIDEST[G],k=9-H,xe=Ll.getRSSvalue(E,H,!0),ve=Ll.getRSSvalue(b,k,!1),J=e.EVEN_TOTAL_SUBSET[G],ue=e.GSUM[G],fe=xe*J+ve+ue;return new a0(fe,B)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=st.sum(new Int32Array(this.getOddCounts())),i=st.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var u=!1,c=!1;i>13?c=!0:i<4&&(u=!0);var h=r+i-t,p=(r&1)===1,m=(i&1)===0;if(h===1)if(p){if(m)throw new ie;s=!0}else{if(!m)throw new ie;c=!0}else if(h===-1)if(p){if(m)throw new ie;a=!0}else{if(!m)throw new ie;u=!0}else if(h===0){if(p){if(!m)throw new ie;r<i?(a=!0,c=!0):(s=!0,u=!0)}else if(m)throw new ie}else throw new ie;if(a){if(s)throw new ie;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(c)throw new ie;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(ws),$L=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YL=function(n){$L(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(a0),KL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XE=function(n){KL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,u,c,h=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var m=Mm(this.possibleLeftPairs),y=m.next();!y.done;y=m.next()){var _=y.value;if(_.getCount()>1)try{for(var E=(u=void 0,Mm(this.possibleRightPairs)),b=E.next();!b.done;b=E.next()){var T=b.value;if(T.getCount()>1&&e.checkChecksum(_,T))return e.constructResult(_,T)}}catch(S){u={error:S}}finally{try{b&&!b.done&&(c=E.return)&&c.call(E)}finally{if(u)throw u.error}}}}catch(S){a={error:S}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}throw new ie},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var u=Mm(t),c=u.next();!c.done;c=u.next()){var h=c.value;if(h.getValue()===r.getValue()){h.incrementCount(),s=!0;break}}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new Ge,u=13-a.length;u>0;u--)s.append("0");s.append(a);for(var c=0,u=0;u<13;u++){var h=s.charAt(u).charCodeAt(0)-48;c+=(u&1)===0?3*h:h}c=10-c%10,c===10&&(c=0),s.append(c.toString());var p=t.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new ir(s.toString(),null,0,[p[0],p[1],m[0],m[1]],Se.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),u=this.parseFoundFinderPattern(t,i,r,s),c=a==null?null:a.get(It.NEED_RESULT_POINT_CALLBACK);if(c!=null){var h=(s[0]+s[1])/2;r&&(h=t.getSize()-1-h),c.foundPossibleResultPoint(new Ee(h,i))}var p=this.decodeDataCharacter(t,u,!0),m=this.decodeDataCharacter(t,u,!1);return new YL(1597*p.getValue()+m.getValue(),p.getChecksumPortion()+4*m.getChecksumPortion(),u)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)An.recordPatternInReverse(t,r.getStartEnd()[0],a);else{An.recordPattern(t,r.getStartEnd()[1]+1,a);for(var u=0,c=a.length-1;u<c;u++,c--){var h=a[u];a[u]=a[c],a[c]=h}}for(var p=i?16:15,m=st.sum(new Int32Array(a))/p,y=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),u=0;u<a.length;u++){var T=a[u]/m,S=Math.floor(T+.5);S<1?S=1:S>8&&(S=8);var N=Math.floor(u/2);(u&1)===0?(y[N]=S,E[N]=T-S):(_[N]=S,b[N]=T-S)}this.adjustOddEvenCounts(i,p);for(var P=0,j=0,u=y.length-1;u>=0;u--)j*=9,j+=y[u],P+=y[u];for(var U=0,X=0,u=_.length-1;u>=0;u--)U*=9,U+=_[u],X+=_[u];var D=j+3*U;if(i){if((P&1)!==0||P>12||P<4)throw new ie;var R=(12-P)/2,M=e.OUTSIDE_ODD_WIDEST[R],B=9-M,G=Ll.getRSSvalue(y,M,!1),H=Ll.getRSSvalue(_,B,!0),k=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],xe=e.OUTSIDE_GSUM[R];return new a0(G*k+H+xe,D)}else{if((X&1)!==0||X>10||X<4)throw new ie;var R=(10-X)/2,M=e.INSIDE_ODD_WIDEST[R],B=9-M,G=Ll.getRSSvalue(y,M,!0),H=Ll.getRSSvalue(_,B,!1),ve=e.INSIDE_ODD_TOTAL_SUBSET[R],xe=e.INSIDE_GSUM[R];return new a0(H*ve+G+xe,D)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,u=0;u<a&&(s=!t.get(u),r!==s);)u++;for(var c=0,h=u,p=u;p<a;p++)if(t.get(p)!==s)i[c]++;else{if(c===3){if(ws.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new ie},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),u=a[0]-1;u>=0&&s!==t.get(u);)u--;u++;var c=a[0]-u,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);Ct.arraycopy(h,0,p,1,h.length-1),p[0]=c;var m=this.parseFinderValue(p,e.FINDER_PATTERNS),y=u,_=a[1];return i&&(y=t.getSize()-1-y,_=t.getSize()-1-_),new bC(m,[u,a[1]],y,_,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=st.sum(new Int32Array(this.getOddCounts())),a=st.sum(new Int32Array(this.getEvenCounts())),s=!1,u=!1,c=!1,h=!1;t?(i>12?u=!0:i<4&&(s=!0),a>12?h=!0:a<4&&(c=!0)):(i>11?u=!0:i<5&&(s=!0),a>10?h=!0:a<4&&(c=!0));var p=i+a-r,m=(i&1)===(t?1:0),y=(a&1)===1;if(p===1)if(m){if(y)throw new ie;u=!0}else{if(!y)throw new ie;h=!0}else if(p===-1)if(m){if(y)throw new ie;s=!0}else{if(!y)throw new ie;c=!0}else if(p===0){if(m){if(!y)throw new ie;i<a?(s=!0,h=!0):(u=!0,c=!0)}else if(y)throw new ie}else throw new ie;if(s){if(u)throw new ie;ws.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ws.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new ie;ws.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ws.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(ws),QL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jl=function(n){QL(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(It.POSSIBLE_FORMATS):null,a=t&&t.get(It.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(It.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Se.EAN_13)||i.includes(Se.UPC_A)||i.includes(Se.EAN_8)||i.includes(Se.UPC_E))&&r.readers.push(new Pm(t)),i.includes(Se.CODE_39)&&r.readers.push(new LE(a,s)),i.includes(Se.CODE_93)&&r.readers.push(new jE),i.includes(Se.CODE_128)&&r.readers.push(new kE),i.includes(Se.ITF)&&r.readers.push(new BE),i.includes(Se.CODABAR)&&r.readers.push(new xL),i.includes(Se.RSS_14)&&r.readers.push(new XE),i.includes(Se.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new WL))),r.readers.length===0&&(r.readers.push(new Pm(t)),r.readers.push(new LE),r.readers.push(new jE),r.readers.push(new Pm(t)),r.readers.push(new kE),r.readers.push(new BE),r.readers.push(new XE)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ie},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(An),ZL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){ZL(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new jl(r),t,r)||this}return e})(gu);var WE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ut=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),JL=function(){function n(e,t,r,i,a,s){var u,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var h=0,p=s.getECCodewords(),m=s.getECBlocks();try{for(var y=WE(m),_=y.next();!_.done;_=y.next()){var E=_.value;h+=E.getCount()*(E.getDataCodewords()+p)}}catch(b){u={error:b}}finally{try{_&&!_.done&&(c=y.return)&&c.call(y)}finally{if(u)throw u.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new ge;try{for(var a=WE(n.VERSIONS),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.symbolSizeRows===e&&u.symbolSizeColumns===t)return u}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new ge},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new ht(5,new ut(1,3))),new n(2,12,12,10,10,new ht(7,new ut(1,5))),new n(3,14,14,12,12,new ht(10,new ut(1,8))),new n(4,16,16,14,14,new ht(12,new ut(1,12))),new n(5,18,18,16,16,new ht(14,new ut(1,18))),new n(6,20,20,18,18,new ht(18,new ut(1,22))),new n(7,22,22,20,20,new ht(20,new ut(1,30))),new n(8,24,24,22,22,new ht(24,new ut(1,36))),new n(9,26,26,24,24,new ht(28,new ut(1,44))),new n(10,32,32,14,14,new ht(36,new ut(1,62))),new n(11,36,36,16,16,new ht(42,new ut(1,86))),new n(12,40,40,18,18,new ht(48,new ut(1,114))),new n(13,44,44,20,20,new ht(56,new ut(1,144))),new n(14,48,48,22,22,new ht(68,new ut(1,174))),new n(15,52,52,24,24,new ht(42,new ut(2,102))),new n(16,64,64,14,14,new ht(56,new ut(2,140))),new n(17,72,72,16,16,new ht(36,new ut(4,92))),new n(18,80,80,18,18,new ht(48,new ut(4,114))),new n(19,88,88,20,20,new ht(56,new ut(4,144))),new n(20,96,96,22,22,new ht(68,new ut(4,174))),new n(21,104,104,24,24,new ht(56,new ut(6,136))),new n(22,120,120,18,18,new ht(68,new ut(6,175))),new n(23,132,132,20,20,new ht(62,new ut(8,163))),new n(24,144,144,22,22,new ht(62,new ut(8,156),new ut(2,155))),new n(25,8,18,6,16,new ht(7,new ut(1,5))),new n(26,8,32,6,14,new ht(11,new ut(1,10))),new n(27,12,26,10,24,new ht(14,new ut(1,16))),new n(28,12,36,10,16,new ht(18,new ut(1,22))),new n(29,16,36,14,16,new ht(24,new ut(1,32))),new n(30,16,48,14,22,new ht(28,new ut(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),ej=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new ge;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Xi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return JL.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),u=!1,c=!1,h=!1,p=!1;do if(r===a&&i===0&&!u)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,u=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!h)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,h=!0;else if(r===a-2&&i===0&&(s&7)===4&&!p)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new ge;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ce("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,u=r/a|0,c=s*i,h=u*a,p=new Xi(h,c),m=0;m<s;++m)for(var y=m*i,_=0;_<u;++_)for(var E=_*a,b=0;b<i;++b)for(var T=m*(i+2)+1+b,S=y+b,N=0;N<a;++N){var P=_*(a+2)+1+N;if(e.get(P,T)){var j=E+N;p.set(j,S)}}return p},n}(),$E=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,u=t.getECBlocks(),c=0,h=u.getECBlocks();try{for(var p=$E(h),m=p.next();!m.done;m=p.next()){var y=m.value;c+=y.getCount()}}catch(xe){r={error:xe}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var _=new Array(c),E=0;try{for(var b=$E(h),T=b.next();!T.done;T=b.next())for(var y=T.value,S=0;S<y.getCount();S++){var N=y.getDataCodewords(),P=u.getECCodewords()+N;_[E++]=new n(N,new Uint8Array(P))}}catch(xe){a={error:xe}}finally{try{T&&!T.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}for(var j=_[0].codewords.length,U=j-u.getECCodewords(),X=U-1,D=0,S=0;S<X;S++)for(var R=0;R<E;R++)_[R].codewords[S]=e[D++];for(var M=t.getVersionNumber()===24,B=M?8:E,R=0;R<B;R++)_[R].codewords[U-1]=e[D++];for(var G=_[0].codewords.length,S=U;S<G;S++)for(var R=0;R<E;R++){var H=M?(R+8)%E:R,k=M&&H>7?S-1:S;_[H].codewords[k]=e[D++]}if(D!==e.length)throw new Ce;return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),CC=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ce(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,u=e<s?e:s,c=s-u,h=255>>8-u<<c;t=(a[i]&h)>>c,e-=u,r+=u,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,h=255>>c<<c;t=t<<e|(a[i]&h)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),vn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(vn||(vn={}));var nj=function(){function n(){}return n.decode=function(e){var t=new CC(e),r=new Ge,i=new Ge,a=new Array,s=vn.ASCII_ENCODE;do if(s===vn.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case vn.C40_ENCODE:this.decodeC40Segment(t,r);break;case vn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case vn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case vn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case vn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new ge}s=vn.ASCII_ENCODE}while(s!==vn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new q0(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new ge;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),vn.ASCII_ENCODE;if(a===129)return vn.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return vn.C40_ENCODE;case 231:return vn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return vn.ANSIX12_ENCODE;case 239:return vn.TEXT_ENCODE;case 240:return vn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new ge;break}}while(e.available()>0);return vn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ge;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new ge}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new ge}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ge;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new ge}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h),a=0}else throw new ge;break;default:throw new ge}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new ge;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new ge;for(var u=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new ge;u[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(u);try{t.append(Qr.decode(u,it.ISO88591))}catch(h){throw new Mf("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),rj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ij=function(){function n(){this.rsDecoder=new X0(wr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new ej(e),a=i.getVersion(),s=i.readCodewords(),u=tj.getDataBlocks(s,a),c=0;try{for(var h=rj(u),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m.getNumDataCodewords()}}catch(P){t={error:P}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}for(var y=new Uint8Array(c),_=u.length,E=0;E<_;E++){var b=u[E],T=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(T,S);for(var N=0;N<S;N++)y[N*_+E]=T[N]}return nj.decode(y)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new fn}for(var i=0;i<t;i++)e[i]=r[i]},n}(),aj=function(){function n(e){this.image=e,this.rectangleDetector=new Ag(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ie;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],u=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(u&1)===1&&(u+=1),(c&1)===1&&(c+=1),4*u<7*c&&4*c<7*u&&(u=c=Math.max(u,c));var h=n.sampleGrid(this.image,r,i,a,s,u,c);return new qv(h,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ee(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ee(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),u=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),h=this.transitionsBetween(a,t),p=s,m=[a,t,r,i];return p>u&&(p=u,m[0]=t,m[1]=r,m[2]=i,m[3]=a),p>c&&(p=c,m[0]=r,m[1]=i,m[2]=a,m[3]=t),p>h&&(m[0]=i,m[1]=a,m[2]=t,m[3]=r),m},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),u=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),h=this.transitionsBetween(u,t),p=this.transitionsBetween(c,a);return h<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),u=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(u+1)*4),h=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),u=this.transitionsBetween(h,a);var p=new Ee(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),m=new Ee(a.getX()+(t.getX()-r.getX())/(u+1),a.getY()+(t.getY()-r.getY())/(u+1));if(!this.isValid(p))return this.isValid(m)?m:null;if(!this.isValid(m))return p;var y=this.transitionsBetween(c,p)+this.transitionsBetween(h,p),_=this.transitionsBetween(c,m)+this.transitionsBetween(h,m);return y>_?p:m},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,u=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,u*4),h=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,u=this.transitionsBetween(h,a)+1,(s&1)===1&&(s+=1),(u&1)===1&&(u+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,m=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,m),r=n.moveAway(r,p,m),i=n.moveAway(i,p,m),a=n.moveAway(a,p,m);var y,_;return c=n.shiftPoint(t,r,u*4),c=n.shiftPoint(c,a,s*4),y=n.shiftPoint(r,t,u*4),y=n.shiftPoint(y,i,s*4),h=n.shiftPoint(i,a,u*4),h=n.shiftPoint(h,r,s*4),_=n.shiftPoint(a,i,u*4),_=n.shiftPoint(_,t,s*4),[c,y,h,_]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,u){var c=Xv.getInstance();return c.sampleGrid(e,s,u,.5,.5,s-.5,.5,s-.5,u-.5,.5,u-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),u=Math.abs(s-i)>Math.abs(a-r);if(u){var c=r;r=i,i=c,c=a,a=s,s=c}for(var h=Math.abs(a-r),p=Math.abs(s-i),m=-h/2,y=i<s?1:-1,_=r<a?1:-1,E=0,b=this.image.get(u?i:r,u?r:i),T=r,S=i;T!==a;T+=_){var N=this.image.get(u?S:T,u?T:S);if(N!==b&&(E++,b=N),m+=p,m>0){if(S===s)break;S+=y,m-=h}}return E},n}(),o0=function(){function n(){this.decoder=new ij}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(It.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new aj(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var u=r.getRawBytes(),c=new ir(r.getText(),u,8*u.length,i,Se.DATA_MATRIX,Ct.currentTimeMillis()),h=r.getByteSegments();h!=null&&c.putMetadata($n.BYTE_SEGMENTS,h);var p=r.getECLevel();return p!=null&&c.putMetadata($n.ERROR_CORRECTION_LEVEL,p),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ie;var i=this.moduleSize(t,e),a=t[1],s=r[1],u=t[0],c=r[0],h=(c-u+1)/i,p=(s-a+1)/i;if(h<=0||p<=0)throw new ie;var m=i/2;a+=m,u+=m;for(var y=new Xi(h,p),_=0;_<p;_++)for(var E=a+_*i,b=0;b<h;b++)e.get(u+b*i,E)&&y.set(b,_);return y},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ie;var s=i-e[0];if(s===0)throw new ie;return s},n.NO_POINTS=[],n}(),oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){oj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new o0,t)||this}return e})(gu);var Bl;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Bl||(Bl={}));var sj=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new tn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ce;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Bl.L,"L",1),n.M=new n(Bl.M,"M",0),n.Q=new n(Bl.Q,"Q",3),n.H=new n(Bl.H,"H",2),n}(),lj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IC=function(){function n(e){this.errorCorrectionLevel=sj.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return We.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var u=lj(n.FORMAT_INFO_DECODE_LOOKUP),c=u.next();!c.done;c=u.next()){var h=c.value,p=h[0];if(p===e||p===t)return new n(h[1]);var m=n.numBitsDiffering(e,p);m<a&&(s=h[1],a=m),e!==t&&(m=n.numBitsDiffering(t,p),m<a&&(s=h[1],a=m))}}catch(y){r={error:y}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),uj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=uj(i),s=a.next();!s.done;s=a.next()){var u=s.value;r+=u.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),V=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),cj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Is=function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var u=0,c=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=cj(h),m=p.next();!m.done;m=p.next()){var y=m.value;u+=y.getCount()*(y.getDataCodewords()+c)}}catch(_){r={error:_}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ge;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ge}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ce;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=IC.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Xi(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Z(7,new V(1,19)),new Z(10,new V(1,16)),new Z(13,new V(1,13)),new Z(17,new V(1,9))),new n(2,Int32Array.from([6,18]),new Z(10,new V(1,34)),new Z(16,new V(1,28)),new Z(22,new V(1,22)),new Z(28,new V(1,16))),new n(3,Int32Array.from([6,22]),new Z(15,new V(1,55)),new Z(26,new V(1,44)),new Z(18,new V(2,17)),new Z(22,new V(2,13))),new n(4,Int32Array.from([6,26]),new Z(20,new V(1,80)),new Z(18,new V(2,32)),new Z(26,new V(2,24)),new Z(16,new V(4,9))),new n(5,Int32Array.from([6,30]),new Z(26,new V(1,108)),new Z(24,new V(2,43)),new Z(18,new V(2,15),new V(2,16)),new Z(22,new V(2,11),new V(2,12))),new n(6,Int32Array.from([6,34]),new Z(18,new V(2,68)),new Z(16,new V(4,27)),new Z(24,new V(4,19)),new Z(28,new V(4,15))),new n(7,Int32Array.from([6,22,38]),new Z(20,new V(2,78)),new Z(18,new V(4,31)),new Z(18,new V(2,14),new V(4,15)),new Z(26,new V(4,13),new V(1,14))),new n(8,Int32Array.from([6,24,42]),new Z(24,new V(2,97)),new Z(22,new V(2,38),new V(2,39)),new Z(22,new V(4,18),new V(2,19)),new Z(26,new V(4,14),new V(2,15))),new n(9,Int32Array.from([6,26,46]),new Z(30,new V(2,116)),new Z(22,new V(3,36),new V(2,37)),new Z(20,new V(4,16),new V(4,17)),new Z(24,new V(4,12),new V(4,13))),new n(10,Int32Array.from([6,28,50]),new Z(18,new V(2,68),new V(2,69)),new Z(26,new V(4,43),new V(1,44)),new Z(24,new V(6,19),new V(2,20)),new Z(28,new V(6,15),new V(2,16))),new n(11,Int32Array.from([6,30,54]),new Z(20,new V(4,81)),new Z(30,new V(1,50),new V(4,51)),new Z(28,new V(4,22),new V(4,23)),new Z(24,new V(3,12),new V(8,13))),new n(12,Int32Array.from([6,32,58]),new Z(24,new V(2,92),new V(2,93)),new Z(22,new V(6,36),new V(2,37)),new Z(26,new V(4,20),new V(6,21)),new Z(28,new V(7,14),new V(4,15))),new n(13,Int32Array.from([6,34,62]),new Z(26,new V(4,107)),new Z(22,new V(8,37),new V(1,38)),new Z(24,new V(8,20),new V(4,21)),new Z(22,new V(12,11),new V(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Z(30,new V(3,115),new V(1,116)),new Z(24,new V(4,40),new V(5,41)),new Z(20,new V(11,16),new V(5,17)),new Z(24,new V(11,12),new V(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Z(22,new V(5,87),new V(1,88)),new Z(24,new V(5,41),new V(5,42)),new Z(30,new V(5,24),new V(7,25)),new Z(24,new V(11,12),new V(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Z(24,new V(5,98),new V(1,99)),new Z(28,new V(7,45),new V(3,46)),new Z(24,new V(15,19),new V(2,20)),new Z(30,new V(3,15),new V(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Z(28,new V(1,107),new V(5,108)),new Z(28,new V(10,46),new V(1,47)),new Z(28,new V(1,22),new V(15,23)),new Z(28,new V(2,14),new V(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Z(30,new V(5,120),new V(1,121)),new Z(26,new V(9,43),new V(4,44)),new Z(28,new V(17,22),new V(1,23)),new Z(28,new V(2,14),new V(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Z(28,new V(3,113),new V(4,114)),new Z(26,new V(3,44),new V(11,45)),new Z(26,new V(17,21),new V(4,22)),new Z(26,new V(9,13),new V(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Z(28,new V(3,107),new V(5,108)),new Z(26,new V(3,41),new V(13,42)),new Z(30,new V(15,24),new V(5,25)),new Z(28,new V(15,15),new V(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Z(28,new V(4,116),new V(4,117)),new Z(26,new V(17,42)),new Z(28,new V(17,22),new V(6,23)),new Z(30,new V(19,16),new V(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Z(28,new V(2,111),new V(7,112)),new Z(28,new V(17,46)),new Z(30,new V(7,24),new V(16,25)),new Z(24,new V(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Z(30,new V(4,121),new V(5,122)),new Z(28,new V(4,47),new V(14,48)),new Z(30,new V(11,24),new V(14,25)),new Z(30,new V(16,15),new V(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Z(30,new V(6,117),new V(4,118)),new Z(28,new V(6,45),new V(14,46)),new Z(30,new V(11,24),new V(16,25)),new Z(30,new V(30,16),new V(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Z(26,new V(8,106),new V(4,107)),new Z(28,new V(8,47),new V(13,48)),new Z(30,new V(7,24),new V(22,25)),new Z(30,new V(22,15),new V(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Z(28,new V(10,114),new V(2,115)),new Z(28,new V(19,46),new V(4,47)),new Z(28,new V(28,22),new V(6,23)),new Z(30,new V(33,16),new V(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Z(30,new V(8,122),new V(4,123)),new Z(28,new V(22,45),new V(3,46)),new Z(30,new V(8,23),new V(26,24)),new Z(30,new V(12,15),new V(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Z(30,new V(3,117),new V(10,118)),new Z(28,new V(3,45),new V(23,46)),new Z(30,new V(4,24),new V(31,25)),new Z(30,new V(11,15),new V(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Z(30,new V(7,116),new V(7,117)),new Z(28,new V(21,45),new V(7,46)),new Z(30,new V(1,23),new V(37,24)),new Z(30,new V(19,15),new V(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Z(30,new V(5,115),new V(10,116)),new Z(28,new V(19,47),new V(10,48)),new Z(30,new V(15,24),new V(25,25)),new Z(30,new V(23,15),new V(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Z(30,new V(13,115),new V(3,116)),new Z(28,new V(2,46),new V(29,47)),new Z(30,new V(42,24),new V(1,25)),new Z(30,new V(23,15),new V(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Z(30,new V(17,115)),new Z(28,new V(10,46),new V(23,47)),new Z(30,new V(10,24),new V(35,25)),new Z(30,new V(19,15),new V(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Z(30,new V(17,115),new V(1,116)),new Z(28,new V(14,46),new V(21,47)),new Z(30,new V(29,24),new V(19,25)),new Z(30,new V(11,15),new V(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Z(30,new V(13,115),new V(6,116)),new Z(28,new V(14,46),new V(23,47)),new Z(30,new V(44,24),new V(7,25)),new Z(30,new V(59,16),new V(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Z(30,new V(12,121),new V(7,122)),new Z(28,new V(12,47),new V(26,48)),new Z(30,new V(39,24),new V(14,25)),new Z(30,new V(22,15),new V(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Z(30,new V(6,121),new V(14,122)),new Z(28,new V(6,47),new V(34,48)),new Z(30,new V(46,24),new V(10,25)),new Z(30,new V(2,15),new V(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Z(30,new V(17,122),new V(4,123)),new Z(28,new V(29,46),new V(14,47)),new Z(30,new V(49,24),new V(10,25)),new Z(30,new V(24,15),new V(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Z(30,new V(4,122),new V(18,123)),new Z(28,new V(13,46),new V(32,47)),new Z(30,new V(48,24),new V(14,25)),new Z(30,new V(42,15),new V(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Z(30,new V(20,117),new V(4,118)),new Z(28,new V(40,47),new V(7,48)),new Z(30,new V(43,24),new V(22,25)),new Z(30,new V(10,15),new V(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Z(30,new V(19,118),new V(6,119)),new Z(28,new V(18,47),new V(31,48)),new Z(30,new V(34,24),new V(34,25)),new Z(30,new V(20,15),new V(61,16)))],n}(),Pn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Pn||(Pn={}));var YE=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Pn.DATA_MASK_000,new n(Pn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Pn.DATA_MASK_001,new n(Pn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Pn.DATA_MASK_010,new n(Pn.DATA_MASK_010,function(e,t){return t%3===0})],[Pn.DATA_MASK_011,new n(Pn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Pn.DATA_MASK_100,new n(Pn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Pn.DATA_MASK_101,new n(Pn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Pn.DATA_MASK_110,new n(Pn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Pn.DATA_MASK_111,new n(Pn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),fj=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ge;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=IC.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ge},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Is.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var u=Is.decodeVersionInformation(r);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(u=Is.decodeVersionInformation(r),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new ge},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=YE.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,u=new Uint8Array(t.getTotalCodewords()),c=0,h=0,p=0,m=i-1;m>0;m-=2){m===6&&m--;for(var y=0;y<i;y++)for(var _=s?i-1-y:y,E=0;E<2;E++)a.get(m-E,_)||(p++,h<<=1,this.bitMatrix.get(m-E,_)&&(h|=1),p===8&&(u[c++]=h,p=0,h=0));s=!s}if(c!==t.getTotalCodewords())throw new ge;return u},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=YE.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),KE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,u;if(e.length!==t.getTotalCodewords())throw new Ce;var c=t.getECBlocksForLevel(r),h=0,p=c.getECBlocks();try{for(var m=KE(p),y=m.next();!y.done;y=m.next()){var _=y.value;h+=_.getCount()}}catch(k){i={error:k}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var E=new Array(h),b=0;try{for(var T=KE(p),S=T.next();!S.done;S=T.next())for(var _=S.value,N=0;N<_.getCount();N++){var P=_.getDataCodewords(),j=c.getECCodewordsPerBlock()+P;E[b++]=new n(P,new Uint8Array(j))}}catch(k){s={error:k}}finally{try{S&&!S.done&&(u=T.return)&&u.call(T)}finally{if(s)throw s.error}}for(var U=E[0].codewords.length,X=E.length-1;X>=0;){var D=E[X].codewords.length;if(D===U)break;X--}X++;for(var R=U-c.getECCodewordsPerBlock(),M=0,N=0;N<R;N++)for(var B=0;B<b;B++)E[B].codewords[N]=e[M++];for(var B=X;B<b;B++)E[B].codewords[R]=e[M++];for(var G=E[0].codewords.length,N=R;N<G;N++)for(var B=0;B<b;B++){var H=B<X?N:N+1;E[B].codewords[H]=e[M++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Wr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Wr||(Wr={}));var Ot=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ce;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Wr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),dj=function(){function n(){}return n.decode=function(e,t,r,i){var a=new CC(e),s=new Ge,u=new Array,c=-1,h=-1;try{var p=null,m=!1,y=void 0;do{if(a.available()<4)y=Ot.TERMINATOR;else{var _=a.readBits(4);y=Ot.forBits(_)}switch(y){case Ot.TERMINATOR:break;case Ot.FNC1_FIRST_POSITION:case Ot.FNC1_SECOND_POSITION:m=!0;break;case Ot.STRUCTURED_APPEND:if(a.available()<16)throw new ge;c=a.readBits(8),h=a.readBits(8);break;case Ot.ECI:var E=n.parseECIValue(a);if(p=_n.getCharacterSetECIByValue(E),p===null)throw new ge;break;case Ot.HANZI:var b=a.readBits(4),T=a.readBits(y.getCharacterCountBits(t));b===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,T);break;default:var S=a.readBits(y.getCharacterCountBits(t));switch(y){case Ot.NUMERIC:n.decodeNumericSegment(a,s,S);break;case Ot.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,S,m);break;case Ot.BYTE:n.decodeByteSegment(a,s,S,p,u,i);break;case Ot.KANJI:n.decodeKanjiSegment(a,s,S);break;default:throw new ge}break}}while(y!==Ot.TERMINATOR)}catch{throw new ge}return new q0(e,s.toString(),u.length===0?null:u,r===null?null:r.toString(),c,h)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new ge;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),u=s/96<<8&4294967295|s%96;u<959?u+=41377:u+=42657,i[a]=u>>8&255,i[a+1]=u&255,a+=2,r--}try{t.append(Qr.decode(i,it.GB2312))}catch(c){throw new ge(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new ge;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),u=s/192<<8&4294967295|s%192;u<7936?u+=33088:u+=49472,i[a]=u>>8,i[a+1]=u,a+=2,r--}try{t.append(Qr.decode(i,it.SHIFT_JIS))}catch(c){throw new ge(c)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new ge;for(var u=new Uint8Array(r),c=0;c<r;c++)u[c]=e.readBits(8);var h;i===null?h=it.guessEncoding(u,s):h=i.getName();try{t.append(Qr.decode(u,h))}catch(p){throw new ge(p)}a.push(u)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new ge;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new ge;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new ge;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var u=a;u<t.length();u++)t.charAt(u)==="%"&&(u<t.length()-1&&t.charAt(u+1)==="%"?t.deleteCharAt(u+1):t.setCharAt(u,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new ge;var i=e.readBits(10);if(i>=1e3)throw new ge;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new ge;var a=e.readBits(7);if(a>=100)throw new ge;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new ge;var s=e.readBits(4);if(s>=10)throw new ge;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ge},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),NC=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),QE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pj=function(){function n(){this.rsDecoder=new X0(wr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Xi.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new fj(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new NC(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,u=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=hj.getDataBlocks(h,u,c),m=0;try{for(var y=QE(p),_=y.next();!_.done;_=y.next()){var E=_.value;m+=E.getNumDataCodewords()}}catch(X){r={error:X}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}var b=new Uint8Array(m),T=0;try{for(var S=QE(p),N=S.next();!N.done;N=S.next()){var E=N.value,P=E.getCodewords(),j=E.getNumDataCodewords();this.correctErrors(P,j);for(var U=0;U<j;U++)b[T++]=P[U]}}catch(X){a={error:X}}finally{try{N&&!N.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}return dj.decode(b,u,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new fn}for(var i=0;i<t;i++)e[i]=r[i]},n}(),mj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gj=function(n){mj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,u=(this.estimatedModuleSize+i)/2;return new e(a,s,u)},e}(Ee),vj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yj=function(){function n(e,t,r,i,a,s,u){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),u=this.image,c=0;c<t;c++){var h=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var p=e;p<i&&!u.get(p,h);)p++;for(var m=0;p<i;){if(u.get(p,h))if(m===1)s[1]++;else if(m===2){if(this.foundPatternCross(s)){var y=this.handlePossibleCenter(s,h,p);if(y!==null)return y}s[0]=s[2],s[1]=1,s[2]=0,m=1}else s[++m]++;else m===1&&m++,s[m]++;p++}if(this.foundPatternCross(s)){var y=this.handlePossibleCenter(s,h,i);if(y!==null)return y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;for(var c=e;c>=0&&a.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c)&&u[1]<=r;)u[1]++,c++;if(c===s||u[1]>r)return NaN;for(;c<s&&!a.get(t,c)&&u[2]<=r;)u[2]++,c++;if(u[2]>r)return NaN;var h=u[0]+u[1]+u[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],u=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,u,2*e[1],s);if(!isNaN(c)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=vj(this.possibleCenters),m=p.next();!m.done;m=p.next()){var y=m.value;if(y.aboutEquals(h,c,u))return y.combineEstimate(c,u,h)}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var _=new gj(u,c,h);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null},n}(),xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_j=function(n){xj(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,u=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,u,c,a)},e}(Ee),wj=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),Dc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ej=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(It.TRY_HARDER)!==void 0,r=e!=null&&e.get(It.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),u=Math.floor(3*a/(4*n.MAX_MODULES));(u<n.MIN_SKIP||t)&&(u=n.MIN_SKIP);for(var c=!1,h=new Int32Array(5),p=u-1;p<a&&!c;p+=u){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var m=0,y=0;y<s;y++)if(i.get(y,p))(m&1)===1&&m++,h[m]++;else if((m&1)===0)if(m===4)if(n.foundPatternCross(h)){var _=this.handlePossibleCenter(h,p,y,r);if(_===!0)if(u=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>h[2]&&(p+=E-h[2]-u,y=s-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,m=3;continue}m=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,m=3;else h[++m]++;else h[m]++;if(n.foundPatternCross(h)){var _=this.handlePossibleCenter(h,p,s,r);_===!0&&(u=h[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return Ee.orderBestPatterns(b),new wj(b)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,u=this.image;e>=s&&t>=s&&u.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!u.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&u.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=u.getHeight(),h=u.getWidth();for(s=1;e+s<c&&t+s<h&&u.get(t+s,e+s);)a[2]++,s++;if(e+s>=c||t+s>=h)return!1;for(;e+s<c&&t+s<h&&!u.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||t+s>=h||a[3]>=r)return!1;for(;e+s<c&&t+s<h&&u.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),u=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c);)u[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(t,c)&&u[3]<r;)u[3]++,c++;if(c===s||u[3]>=r)return NaN;for(;c<s&&a.get(t,c)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var h=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),u=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,t);)u[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,t)&&u[3]<r;)u[3]++,c++;if(c===s||u[3]>=r)return NaN;for(;c<s&&a.get(c,t)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var h=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(u)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(u),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(u),Math.floor(s),e[2],a)))){for(var c=a/7,h=!1,p=this.possibleCenters,m=0,y=p.length;m<y;m++){var _=p[m];if(_.aboutEquals(c,u,s)){p[m]=_.combineEstimate(u,s,c),h=!0;break}}if(!h){var E=new _j(s,u,c);p.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Dc(this.possibleCenters),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.getCount()>=n.CENTER_QUORUM)if(i==null)i=u;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-u.getX())-Math.abs(i.getY()-u.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,u=this.possibleCenters.length;try{for(var c=Dc(this.possibleCenters),h=c.next();!h.done;h=c.next()){var p=h.value;p.getCount()>=n.CENTER_QUORUM&&(a++,s+=p.getEstimatedModuleSize())}}catch(b){e={error:b}}finally{try{h&&!h.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var m=s/u,y=0;try{for(var _=Dc(this.possibleCenters),E=_.next();!E.done;E=_.next()){var p=E.value;y+=Math.abs(p.getEstimatedModuleSize()-m)}}catch(b){r={error:b}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}return y<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ie;var s=this.possibleCenters,u;if(a>3){var c=0,h=0;try{for(var p=Dc(this.possibleCenters),m=p.next();!m.done;m=p.next()){var y=m.value,_=y.getEstimatedModuleSize();c+=_,h+=_*_}}catch(U){e={error:U}}finally{try{m&&!m.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}u=c/a;var E=Math.sqrt(h/a-u*u);s.sort(function(U,X){var D=Math.abs(X.getEstimatedModuleSize()-u),R=Math.abs(U.getEstimatedModuleSize()-u);return D<R?-1:D>R?1:0});for(var b=Math.max(.2*u,E),T=0;T<s.length&&s.length>3;T++){var S=s[T];Math.abs(S.getEstimatedModuleSize()-u)>b&&(s.splice(T,1),T--)}}if(s.length>3){var c=0;try{for(var N=Dc(s),P=N.next();!P.done;P=N.next()){var j=P.value;c+=j.getEstimatedModuleSize()}}catch(X){r={error:X}}finally{try{P&&!P.done&&(i=N.return)&&i.call(N)}finally{if(r)throw r.error}}u=c/s.length,s.sort(function(X,D){if(D.getCount()===X.getCount()){var R=Math.abs(D.getEstimatedModuleSize()-u),M=Math.abs(X.getEstimatedModuleSize()-u);return R<M?1:R>M?-1:0}else return D.getCount()-X.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Aj=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(It.NEED_RESULT_POINT_CALLBACK);var t=new Ej(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ie("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),u=Is.getProvisionalVersionForDimension(s),c=u.getDimensionForVersion()-7,h=null;if(u.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),m=r.getY()-t.getY()+i.getY(),y=1-3/c,_=Math.floor(t.getX()+y*(p-t.getX())),E=Math.floor(t.getY()+y*(m-t.getY())),b=4;b<=16;b<<=1)try{h=this.findAlignmentInRegion(a,_,E,b);break}catch(P){if(!(P instanceof ie))throw P}var T=n.createTransform(t,r,i,h,s),S=n.sampleGrid(this.image,T,s),N;return h===null?N=[i,t,r]:N=[i,t,r,h],new qv(S,N)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,u,c,h,p;return i!==null?(u=i.getX(),c=i.getY(),h=s-3,p=h):(u=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),h=s,p=s),AC.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,h,p,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),u,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Xv.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=st.round(Ee.distance(e,t)/i),s=st.round(Ee.distance(e,r)/i),u=Math.floor((a+s)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new ie("Dimensions could be not found.")}return u},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,u=e-(r-e);u<0?(s=e/(e-u),u=0):u>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),u=Math.floor(e+(u-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,u,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var u=Math.abs(r-e),c=Math.abs(i-t),h=-u/2,p=e<r?1:-1,m=t<i?1:-1,y=0,_=r+p,E=e,b=t;E!==_;E+=p){var T=a?b:E,S=a?E:b;if(y===1===this.image.get(T,S)){if(y===2)return st.distance(E,b,e,t);y++}if(h+=c,h>0){if(b===i)break;b+=m,h-=u}}return y===2?st.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),u=Math.min(this.image.getWidth()-1,t+a);if(u-s<e*3)throw new ie("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),h=Math.min(this.image.getHeight()-1,r+a);if(h-c<e*3)throw new ie("Alignment bottom exceeds estimated module size.");var p=new yj(this.image,s,c,u-s,h-c,e,this.resultPointCallback);return p.find()},n}(),s0=function(){function n(){this.decoder=new pj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(It.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new Aj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof NC&&r.getOther().applyMirroredCorrection(i);var u=new ir(r.getText(),r.getRawBytes(),void 0,i,Se.QR_CODE,void 0),c=r.getByteSegments();c!==null&&u.putMetadata($n.BYTE_SEGMENTS,c);var h=r.getECLevel();return h!==null&&u.putMetadata($n.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(u.putMetadata($n.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),u.putMetadata($n.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ie;var i=this.moduleSize(t,e),a=t[1],s=r[1],u=t[0],c=r[0];if(u>=c||a>=s)throw new ie;if(s-a!==c-u&&(c=u+(s-a),c>=e.getWidth()))throw new ie;var h=Math.round((c-u+1)/i),p=Math.round((s-a+1)/i);if(h<=0||p<=0)throw new ie;if(p!==h)throw new ie;var m=Math.floor(i/2);a+=m,u+=m;var y=u+Math.floor((h-1)*i)-c;if(y>0){if(y>m)throw new ie;u-=y}var _=a+Math.floor((p-1)*i)-s;if(_>0){if(_>m)throw new ie;a-=_}for(var E=new Xi(h,p),b=0;b<p;b++)for(var T=a+Math.floor(b*i),S=0;S<h;S++)e.get(u+Math.floor(S*i),T)&&E.set(S,b);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],u=!0,c=0;a<i&&s<r;){if(u!==t.get(a,s)){if(++c===5)break;u=!u}a++,s++}if(a===i||s===r)throw new ie;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),bj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},at=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return st.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=bj(e),u=s.next();!u.done;u=s.next()){var c=u.value;i[a++]=c}}catch(h){t={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=En.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),Tj=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Sj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cj=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new Tj(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,u=0,c=!1;s<t.getHeight();){var h=n.findVertices(t,s,u);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,u=0;try{for(var p=(r=void 0,Sj(a)),m=p.next();!m.done;m=p.next()){var y=m.value;y[1]!=null&&(s=Math.trunc(Math.max(s,y[1].getY()))),y[3]!=null&&(s=Math.max(s,Math.trunc(y[3].getY())))}}catch(_){r={error:_}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,a.push(h),!e)break;h[2]!=null?(u=Math.trunc(h[2].getX()),s=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var u=new Array(4),c=!1,h=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,s,h);if(p!=null){for(;i>0;){var m=n.findGuardPattern(e,a,--i,r,!1,s,h);if(m!=null)p=m;else{i++;break}}u[0]=new Ee(p[0],i),u[1]=new Ee(p[1],i),c=!0;break}}var y=i+1;if(c){for(var _=0,m=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);y<t;y++){var p=n.findGuardPattern(e,m[0],y,r,!1,s,h);if(p!=null&&Math.abs(m[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(m[1]-p[1])<n.MAX_PATTERN_DRIFT)m=p,_=0;else{if(_>n.SKIPPED_ROW_COUNT_MAX)break;_++}}y-=_+1,u[2]=new Ee(m[0],y),u[3]=new Ee(m[1],y)}return y-i<n.BARCODE_MIN_HEIGHT&&En.fill(u,null),u},n.findGuardPattern=function(e,t,r,i,a,s,u){En.fillWithin(u,0,u.length,0);for(var c=t,h=0;e.get(c,r)&&c>0&&h++<n.MAX_PIXEL_DRIFT;)c--;for(var p=c,m=0,y=s.length,_=a;p<i;p++){var E=e.get(p,r);if(E!==_)u[m]++;else{if(m===y-1){if(n.patternMatchVariance(u,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,p]);c+=u[0]+u[1],Ct.arraycopy(u,2,u,0,m-1),u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,_=!_}}return m===y-1&&n.patternMatchVariance(u,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,u=0;u<i;u++)a+=e[u],s+=t[u];if(a<s)return 1/0;var c=a/s;r*=c;for(var h=0,p=0;p<i;p++){var m=e[p],y=t[p]*c,_=m>y?m-y:y-m;if(_>r)return 1/0;h+=_}return h/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),Ij=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ts=function(){function n(e,t){if(t.length===0)throw new Ce;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ct.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Ij(this.coefficients),s=a.next();!s.done;s=a.next()){var u=s.value;i=this.field.add(i,u)}}catch(m){t={error:m}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)c=this.field.add(this.field.multiply(e,c),this.coefficients[p]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;Ct.arraycopy(r,0,a,0,s);for(var u=s;u<r.length;u++)a[u]=this.field.add(t[u-s],r[u]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),u=0;u<r;u++)for(var c=t[u],h=0;h<a;h++)s[u+h]=this.field.add(s[u+h],this.field.multiply(c,i[h]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Ge,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),Nj=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new EC;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),Rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oj=function(n){Rj(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Ts(i,new Int32Array([0])),i.one=new Ts(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ce;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Ts(this,i)},e.PDF417_GF=new e(at.NUMBER_OF_CODEWORDS,3),e}(Nj),Dj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pj=function(){function n(){this.field=Oj.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Ts(this.field,e),u=new Int32Array(t),c=!1,h=t;h>0;h--){var p=s.evaluateAt(this.field.exp(h));u[t-h]=p,p!==0&&(c=!0)}if(!c)return 0;var m=this.field.getOne();if(r!=null)try{for(var y=Dj(r),_=y.next();!_.done;_=y.next()){var E=_.value,b=this.field.exp(e.length-1-E),T=new Ts(this.field,new Int32Array([this.field.subtract(0,b),1]));m=m.multiply(T)}}catch(R){i={error:R}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}for(var S=new Ts(this.field,u),N=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),S,t),P=N[0],j=N[1],U=this.findErrorLocations(P),X=this.findErrorMagnitudes(j,P,U),h=0;h<U.length;h++){var D=e.length-1-this.field.log(U[h]);if(D<0)throw fn.getChecksumInstance();e[D]=this.field.subtract(e[D],X[h])}return U.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,u=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var h=a,p=u;if(a=s,u=c,a.isZero())throw fn.getChecksumInstance();s=h;for(var m=this.field.getZero(),y=a.getCoefficient(a.getDegree()),_=this.field.inverse(y);s.getDegree()>=a.getDegree()&&!s.isZero();){var E=s.getDegree()-a.getDegree(),b=this.field.multiply(s.getCoefficient(s.getDegree()),_);m=m.add(this.field.buildMonomial(E,b)),s=s.subtract(a.multiplyByMonomial(E,b))}c=m.multiply(u).subtract(p).negative()}var T=c.getCoefficient(0);if(T===0)throw fn.getChecksumInstance();var S=this.field.inverse(T),N=c.multiply(S),P=s.multiply(S);return[N,P]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw fn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var u=new Ts(this.field,a),c=r.length,h=new Int32Array(c),s=0;s<c;s++){var p=this.field.inverse(r[s]),m=this.field.subtract(0,e.evaluateAt(p)),y=this.field.inverse(u.evaluateAt(p));h[s]=this.field.multiply(m,y)}return h},n}(),Tg=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,u=i==null||a==null;if(s&&u)throw new ie;s?(t=new Ee(0,i.getY()),r=new Ee(0,a.getY())):u&&(i=new Ee(e.getWidth()-1,t.getY()),a=new Ee(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,u=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,h=Math.trunc(c.getY()-e);h<0&&(h=0);var p=new Ee(c.getX(),h);r?i=p:s=p}if(t>0){var m=r?this.bottomLeft:this.bottomRight,y=Math.trunc(m.getY()+t);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);var _=new Ee(m.getX(),y);r?a=_:u=_}return new n(this.image,i,a,s,u)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),Mj=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),$v=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,u,c,h,p,m){if(s==="%%")return"%";if(t[++r]!==void 0){s=h?parseInt(h.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,_;switch(m){case"s":_=t[r];break;case"c":_=t[r][0];break;case"f":_=parseFloat(t[r]).toFixed(s);break;case"p":_=parseFloat(t[r]).toPrecision(s);break;case"e":_=parseFloat(t[r]).toExponential(s);break;case"x":_=parseInt(t[r]).toString(y||16);break;case"d":_=parseFloat(parseInt(t[r],y||10).toPrecision(s)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(y);for(var E=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";_.length<E;)_=u!==void 0?_+b:b+_;return _}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),kj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RC=function(){function n(e){this.boundingBox=new Tg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new $v,i=0;try{for(var a=kj(this.codewords),s=a.next();!s.done;s=a.next()){var u=s.value;if(u==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,u.getRowNumber(),u.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),Lj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jj=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},Hc=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(m,y){var _={getKey:function(){return m},getValue:function(){return y}};_.getValue()>r?(r=_.getValue(),i=[],i.push(_.getKey())):_.getValue()===r&&i.push(_.getKey())};try{for(var s=Lj(this.values.entries()),u=s.next();!u.done;u=s.next()){var c=jj(u.value,2),h=c[0],p=c[1];a(h,p)}}catch(m){e={error:m}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return at.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),Bj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),km=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZE=function(n){Bj(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=km(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=-1,p=1,m=0,y=u;y<c;y++)if(r[y]!=null){var _=r[y],E=_.getRowNumber()-h;if(E===0)m++;else if(E===1)p=Math.max(p,m),m=1,h=_.getRowNumber();else if(E<0||_.getRowNumber()>=t.getRowCount()||E>y)r[y]=null;else{var b=void 0;p>2?b=(p-2)*E:b=E;for(var T=b>=y,S=1;S<=b&&!T;S++)T=r[y-S]!=null;T?r[y]=null:(h=_.getRowNumber(),m=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=km(this.getCodewords()),u=s.next();!u.done;u=s.next()){var c=u.value;if(c!=null){var h=c.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),h=-1,p=s;p<u;p++)if(c[p]!=null){var m=c[p];m.setRowNumberAsRowIndicatorColumn();var y=m.getRowNumber()-h;y===0||(y===1?h=m.getRowNumber():m.getRowNumber()>=t.getRowCount()?c[p]=null:h=m.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new Hc,s=new Hc,u=new Hc,c=new Hc;try{for(var h=km(i),p=h.next();!p.done;p=h.next()){var m=p.value;if(m!=null){m.setRowNumberAsRowIndicatorColumn();var y=m.getValue()%30,_=m.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:s.setValue(y*3+1);break;case 1:c.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}}}catch(b){t={error:b}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||u.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+u.getValue()[0]<at.MIN_ROWS_IN_BARCODE||s.getValue()[0]+u.getValue()[0]>at.MAX_ROWS_IN_BARCODE)return null;var E=new Mj(a.getValue()[0],s.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,u=a.getRowNumber();if(u>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(RC),Vj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uj=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=at.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var u=this.detectionResultColumns[s].getCodewords()[r];u!=null&&(a=n.adjustRowNumberIfValid(i,a,u),u.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var u=this.detectionResultColumns[s].getCodewords()[r];u!=null&&(a=n.adjustRowNumberIfValid(i,a,u),u.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],u=this.detectionResultColumns[e-1].getCodewords(),c=u;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=u[t],h[3]=c[t],t>0&&(h[0]=r[t-1],h[4]=u[t-1],h[5]=c[t-1]),t>1&&(h[8]=r[t-2],h[10]=u[t-2],h[11]=c[t-2]),t<r.length-1&&(h[1]=r[t+1],h[6]=u[t+1],h[7]=c[t+1]),t<r.length-2&&(h[9]=r[t+2],h[12]=u[t+2],h[13]=c[t+2]);try{for(var p=Vj(h),m=p.next();!m.done;m=p.next()){var y=m.value;if(n.adjustRowNumber(s,y))return}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new $v,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),Fj=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),Hj=function(){function n(){}return n.initialize=function(){for(var e=0;e<at.SYMBOL_TABLE.length;e++)for(var t=at.SYMBOL_TABLE[e],r=t&1,i=0;i<at.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(at.BARS_IN_MODULE)),n.RATIOS_TABLE[e][at.BARS_IN_MODULE-i-1]=Math.fround(a/at.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=st.sum(e),r=new Int32Array(at.BARS_IN_MODULE),i=0,a=0,s=0;s<at.MODULES_IN_CODEWORD;s++){var u=t/(2*at.MODULES_IN_CODEWORD)+s*t/at.MODULES_IN_CODEWORD;a+e[i]<=u&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return at.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=st.sum(e),r=new Array(at.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=Eg.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var u=0;u<n.RATIOS_TABLE.length;u++){for(var c=0,h=n.RATIOS_TABLE[u],p=0;p<at.BARS_IN_MODULE;p++){var m=Math.fround(h[p]-r[p]);if(c+=Math.fround(m*m),c>=a)break}c<a&&(a=c,s=at.SYMBOL_TABLE[u])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(at.SYMBOL_TABLE.length).map(function(e){return new Array(at.BARS_IN_MODULE)}),n}(),zj=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),JE=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),Gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qj=function(n){Gj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Tr),Xj=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new qj;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Gv;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),Wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$j=function(n){Wj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Tr),Yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kj=function(n){Yj(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ce("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new $j;i=We.MAX_VALUE}this.buf=En.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Gv;this.ensureCapacity(this.count+i),Ct.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return En.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Xj),At;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(At||(At={}));function OC(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var md;function xo(n){if(typeof md>"u"&&(md=OC()),md===null)throw new Error("BigInt is not supported!");return md(n)}function Qj(){var n=[];n[0]=xo(1);var e=xo(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var Zj=function(){function n(){}return n.decode=function(e,t){var r=new Ge(""),i=_n.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],u=new zj;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:_n.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,u);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ge;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw ge.getFormatInstance()}if(r.length()===0)throw ge.getFormatInstance();var c=new q0(null,r.toString(),null,t);return c.setOther(u),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ge.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(We.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ge;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var u=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ge;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new Ge;t=n.textCompaction(e,t+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Ge;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var m=new Ge;t=n.numericCompaction(e,t+1,m),r.setSegmentCount(We.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var y=new Ge;t=n.numericCompaction(e,t+1,y),r.setTimestamp(JE.parseLong(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var _=new Ge;t=n.numericCompaction(e,t+1,_),r.setChecksum(We.parseInt(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new Ge;t=n.numericCompaction(e,t+1,E),r.setFileSize(JE.parseLong(E.toString()));break;default:throw ge.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw ge.getFormatInstance()}if(u!==-1){var b=t-u;r.isLastSegment()&&b--,r.setOptionalData(En.copyOfRange(e,u,u+b))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,u=!1;t<e[0]&&!u;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,u=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[s]=c,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=At.ALPHA,s=At.ALPHA,u=0;u<r;){var c=e[u],h="";switch(a){case At.ALPHA:if(c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case n.LL:a=At.LOWER;break;case n.ML:a=At.MIXED;break;case n.PS:s=a,a=At.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=At.ALPHA;break}break;case At.LOWER:if(c<26)h=String.fromCharCode(97+c);else switch(c){case 26:h=" ";break;case n.AS:s=a,a=At.ALPHA_SHIFT;break;case n.ML:a=At.MIXED;break;case n.PS:s=a,a=At.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=At.ALPHA;break}break;case At.MIXED:if(c<n.PL)h=n.MIXED_CHARS[c];else switch(c){case n.PL:a=At.PUNCT;break;case 26:h=" ";break;case n.LL:a=At.LOWER;break;case n.AL:a=At.ALPHA;break;case n.PS:s=a,a=At.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=At.ALPHA;break}break;case At.PUNCT:if(c<n.PAL)h=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=At.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=At.ALPHA;break}break;case At.ALPHA_SHIFT:if(a=s,c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=At.ALPHA;break}break;case At.PUNCT_SHIFT:if(a=s,c<n.PAL)h=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=At.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=At.ALPHA;break}break}h!==""&&i.append(h),u++}},n.byteCompaction=function(e,t,r,i,a){var s=new Kj,u=0,c=0,h=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),m=t[i++];i<t[0]&&!h;)switch(p[u++]=m,c=900*c+m,m=t[i++],m){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(u%5===0&&u>0){for(var y=0;y<6;++y)s.write(Number(xo(c)>>xo(8*(5-y))));c=0,u=0}break}i===t[0]&&m<n.TEXT_COMPACTION_MODE_LATCH&&(p[u++]=m);for(var _=0;_<u;_++)s.write(p[_]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)u++,c=900*c+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(u%5===0&&u>0){for(var y=0;y<6;++y)s.write(Number(xo(c)>>xo(8*(5-y))));c=0,u=0}}break}return a.append(Qr.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var u=e[t++];if(t===e[0]&&(a=!0),u<n.TEXT_COMPACTION_MODE_LATCH)s[i]=u,i++;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||u===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=xo(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*xo(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new ge;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=OC()?Qj():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),Pc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jj=function(){function n(){}return n.decode=function(e,t,r,i,a,s,u){for(var c=new Tg(e,t,r,i,a),h=null,p=null,m,y=!0;;y=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,c,t,!0,s,u)),i!=null&&(p=n.getRowIndicatorColumn(e,c,i,!1,s,u)),m=n.merge(h,p),m==null)throw ie.getNotFoundInstance();var _=m.getBoundingBox();if(y&&_!=null&&(_.getMinY()<c.getMinY()||_.getMaxY()>c.getMaxY()))c=_;else break}m.setBoundingBox(c);var E=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,h),m.setDetectionResultColumn(E,p);for(var b=h!=null,T=1;T<=E;T++){var S=b?T:E-T;if(m.getDetectionResultColumn(S)===void 0){var N=void 0;S===0||S===E?N=new ZE(c,S===0):N=new RC(c),m.setDetectionResultColumn(S,N);for(var P=-1,j=P,U=c.getMinY();U<=c.getMaxY();U++){if(P=n.getStartColumn(m,S,U,b),P<0||P>c.getMaxX()){if(j===-1)continue;P=j}var X=n.detectCodeword(e,c.getMinX(),c.getMaxX(),b,P,U,s,u);X!=null&&(N.setCodeword(U,X),j=P,s=Math.min(s,X.getWidth()),u=Math.max(u,X.getWidth()))}}}return n.createDecoderResult(m)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Tg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new Uj(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var u=Pc(i),c=u.next();!c.done;c=u.next()){var h=c.value;if(s+=a-h,h>0)break}}catch(_){t={error:_}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),m=0;s>0&&p[m]==null;m++)s--;for(var y=0,m=i.length-1;m>=0&&(y+=a-i[m],!(i[m]>0));m--);for(var m=p.length-1;y>0&&p[m]==null;m--)y--;return e.getBoundingBox().addMissingRows(s,y,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Pc(e),s=a.next();!s.done;s=a.next()){var u=s.value;i=Math.max(i,u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var u=new ZE(t,i),c=0;c<2;c++)for(var h=c===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),m=Math.trunc(Math.trunc(r.getY()));m<=t.getMaxY()&&m>=t.getMinY();m+=h){var y=n.detectCodeword(e,0,e.getWidth(),i,p,m,a,s);y!=null&&(u.setCodeword(m,y),i?p=y.getStartX():p=y.getEndX())}return u},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>at.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,u=0;u<e.getBarcodeRowCount();u++)for(var c=0;c<e.getBarcodeColumnCount();c++){var h=t[u][c+1].getValue(),p=u*e.getBarcodeColumnCount()+c;h.length===0?r.push(p):h.length===1?i[p]=h[0]:(s.push(p),a.push(h))}for(var m=new Array(a.length),y=0;y<m.length;y++)m[y]=a[y];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,at.toIntArray(r),at.toIntArray(s),m)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),u=100;u-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=a[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(p){var h=p instanceof fn;if(!h)throw p}if(s.length===0)throw fn.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw fn.getChecksumInstance()}throw fn.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),u=0;u<s.length;u++)for(var c=0;c<s[u].length;c++)s[u][c]=new Hc;var h=0;try{for(var p=Pc(e.getDetectionResultColumns()),m=p.next();!m.done;m=p.next()){var y=m.value;if(y!=null)try{for(var _=(i=void 0,Pc(y.getCodewords())),E=_.next();!E.done;E=_.next()){var b=E.value;if(b!=null){var T=b.getRowNumber();if(T>=0){if(T>=s.length)continue;s[T][h].setValue(b.getValue())}}}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}h++}}catch(S){t={error:S}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,u=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var h=0;n.isValidBarcodeColumn(e,t-u);){t-=u;try{for(var p=(a=void 0,Pc(e.getDetectionResultColumn(t).getCodewords())),m=p.next();!m.done;m=p.next()){var y=m.value;if(y!=null)return(i?y.getEndX():y.getStartX())+u*h*(y.getEndX()-y.getStartX())}}catch(_){a={error:_}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,u,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var h=n.getModuleBitCount(e,t,r,i,a,s);if(h==null)return null;var p,m=st.sum(h);if(i)p=a+m;else{for(var y=0;y<h.length/2;y++){var _=h[y];h[y]=h[h.length-1-y],h[h.length-1-y]=_}p=a,a=p-m}if(!n.checkCodewordSkew(m,u,c))return null;var E=Hj.getDecodedValue(h),b=at.getCodeword(E);return b===-1?null:new Fj(a,p,n.getCodewordBucketNumber(E),b)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var u=a,c=new Int32Array(8),h=0,p=i?1:-1,m=i;(i?u<r:u>=t)&&h<c.length;)e.get(u,s)===m?(c[h]++,u+=p):(h++,m=!m);return h===c.length||u===(i?r:t)&&h===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var u=a,c=i?-1:1,h=0;h<2;h++){for(;(i?u>=t:u<r)&&i===e.get(u,s);){if(Math.abs(a-u)>n.CODEWORD_SKEW_SIZE)return a;u+=c}c=-c,i=!i}return u},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw ge.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=Zj.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw fn.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw ge.getFormatInstance();var r=e[0];if(r>e.length)throw ge.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw ge.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new $v,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new Pj,n}(),eB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l0=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ie.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof ge||r instanceof fn?ie.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,u=Cj.detectMultiple(e,t,r);try{for(var c=eB(u.getPoints()),h=c.next();!h.done;h=c.next()){var p=h.value,m=Jj.decode(u.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),y=new ir(m.getText(),m.getRawBytes(),void 0,p,Se.PDF_417);y.putMetadata($n.ERROR_CORRECTION_LEVEL,m.getECLevel());var _=m.getOther();_!=null&&y.putMetadata($n.PDF417_EXTRA_METADATA,_),s.push(y)}}catch(E){i={error:E}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?We.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*at.MODULES_IN_CODEWORD/at.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),tB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eA=function(n){tB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Tr),tA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DC=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(It.TRY_HARDER)!==void 0,r=e==null?null:e.get(It.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Se.UPC_A||s===Se.UPC_E||s===Se.EAN_13||s===Se.EAN_8||s===Se.CODABAR||s===Se.CODE_39||s===Se.CODE_93||s===Se.CODE_128||s===Se.ITF||s===Se.RSS_14||s===Se.RSS_EXPANDED});a&&!t&&i.push(new jl(e)),r.includes(Se.QR_CODE)&&i.push(new s0),r.includes(Se.DATA_MATRIX)&&i.push(new o0),r.includes(Se.AZTEC)&&i.push(new i0),r.includes(Se.PDF_417)&&i.push(new l0),a&&t&&i.push(new jl(e))}i.length===0&&(t||i.push(new jl(e)),i.push(new s0),i.push(new o0),i.push(new i0),i.push(new l0),t&&i.push(new jl(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=tA(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new eA("No readers where selected, nothing can be read.");try{for(var i=tA(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(u){if(u instanceof eA)continue}}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ie("No MultiFormat Readers were able to detect the code.")},n}(),nB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){nB(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new DC;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(gu);var rB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){rB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new l0,t)||this}return e})(gu);var iB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){iB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new s0,t)||this}return e})(gu);var Sg;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Sg||(Sg={}));const gd=Sg;var PC=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Io(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new Io(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ce("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ce("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Ct.arraycopy(e,0,a,0,r);var s=new Io(this.field,a);s=s.multiplyByMonomial(t,1);for(var u=s.divide(i)[1],c=u.getCoefficients(),h=t-c.length,p=0;p<h;p++)e[r+p]=0;Ct.arraycopy(c,0,e,r+h,c.length)},n}(),zc=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var u=r[s],c=0;c<i-1;c++){var h=u[c];h===u[c+1]&&h===r[s+1][c]&&h===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var u=0;u<i;u++){var c=r[s];u+6<i&&c[u]===1&&c[u+1]===0&&c[u+2]===1&&c[u+3]===1&&c[u+4]===1&&c[u+5]===0&&c[u+6]===1&&(n.isWhiteHorizontal(c,u-4,u)||n.isWhiteHorizontal(c,u+7,u+11))&&t++,s+6<a&&r[s][u]===1&&r[s+1][u]===0&&r[s+2][u]===1&&r[s+3][u]===1&&r[s+4][u]===1&&r[s+5][u]===0&&r[s+6][u]===1&&(n.isWhiteVertical(r,u,s-4,s)||n.isWhiteVertical(r,u,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var u=r[s],c=0;c<i;c++)u[c]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Ce("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),u=0;u<i;u++){for(var c=0,h=-1,p=0;p<a;p++){var m=t?s[u][p]:s[p][u];m===h?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,h=m)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),aB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oB=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=aB(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;En.fill(s,e)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],u=0,c=this.width;u<c;++u)if(a[u]!==s[u])return!1;return!0},n.prototype.toString=function(){for(var e=new Ge,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Cg=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Ge;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),sB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rt=function(n){sB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Tr),nA=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Ln;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var u=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],h=c[0],p=c[1];if(r.setBoolean(h,p,u),a<8){var m=r.getWidth()-a-1,y=8;r.setBoolean(m,y,u)}else{var m=8,y=r.getHeight()-7+(a-8);r.setBoolean(m,y,u)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Ln;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var s=0;s<3;++s){var u=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,u),t.setBoolean(t.getHeight()-11+s,a,u)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,u=r.getHeight()-1;s>0;){for(s===6&&(s-=1);u>=0&&u<r.getHeight();){for(var c=0;c<2;++c){var h=s-c;if(n.isEmpty(r.get(h,u))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&zc.getDataMaskBit(t,h,u)&&(p=!p),r.setBoolean(h,u,p)}}u+=a}a=-a,u+=a,s-=2}if(i!==e.getSize())throw new Rt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-We.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ce("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Cg.isValidMaskPattern(t))throw new Rt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new Ln;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Rt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Rt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Rt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Rt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Rt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var u=i[a];if(u>=0)for(var c=0;c!==s;c++){var h=i[c];h>=0&&n.isEmpty(t.get(h,u))&&n.embedPositionAdjustmentPattern(h-2,u-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),lB=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),rA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return zc.applyMaskPenaltyRule1(e)+zc.applyMaskPenaltyRule2(e)+zc.applyMaskPenaltyRule3(e)+zc.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(gd.CHARACTER_SET)!==void 0;a&&(i=r.get(gd.CHARACTER_SET).toString());var s=this.chooseMode(e,i),u=new Ln;if(s===Ot.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=_n.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,u)}this.appendModeInfo(s,u);var h=new Ln;this.appendBytes(e,s,h,i);var p;if(r!==null&&r.get(gd.QR_VERSION)!==void 0){var m=Number.parseInt(r.get(gd.QR_VERSION).toString(),10);p=Is.getVersionForNumber(m);var y=this.calculateBitsNeeded(s,u,h,p);if(!this.willFit(y,p,t))throw new Rt("Data too big for requested version")}else p=this.recommendVersion(t,s,u,h);var _=new Ln;_.appendBitArray(u);var E=s===Ot.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(E,p,s,_),_.appendBitArray(h);var b=p.getECBlocksForLevel(t),T=p.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(T,_);var S=this.interleaveWithECBytes(_,p.getTotalCodewords(),T,b.getNumBlocks()),N=new Cg;N.setECLevel(t),N.setMode(s),N.setVersion(p);var P=p.getDimensionForVersion(),j=new oB(P,P),U=this.chooseMaskPattern(S,t,p,j);return N.setMaskPattern(U),nA.buildMatrix(S,t,p,U,j),N.setMatrix(j),N},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Is.getVersionForNumber(1)),s=this.chooseVersion(a,e),u=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(u,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),_n.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Ot.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var u=e.charAt(a);if(n.isDigit(u))r=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)i=!0;else return Ot.BYTE}return i?Ot.ALPHANUMERIC:r?Ot.NUMERIC:Ot.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Qr.encode(e,_n.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,u=0;u<Cg.NUM_MASK_PATTERNS;u++){nA.buildMatrix(e,t,r,u,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=u)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Is.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Rt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),u=i-s,c=(e+7)/8;return u>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Rt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Rt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new Rt("Block ID too large");var u=e%r,c=r-u,h=Math.floor(e/r),p=h+1,m=Math.floor(t/r),y=m+1,_=h-m,E=p-y;if(_!==E)throw new Rt("EC bytes mismatch");if(r!==c+u)throw new Rt("RS blocks mismatch");if(e!==(m+_)*c+(y+E)*u)throw new Rt("Total bytes mismatch");i<c?(a[0]=m,s[0]=_):(a[0]=y,s[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,u,c;if(e.getSizeInBytes()!==r)throw new Rt("Number of bits and data bytes does not match");for(var h=0,p=0,m=0,y=new Array,_=0;_<i;++_){var E=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,_,E,b);var T=E[0],S=new Uint8Array(T);e.toBytes(8*h,S,0,T);var N=n.generateECBytes(S,b[0]);y.push(new lB(S,N)),p=Math.max(p,T),m=Math.max(m,N.length),h+=E[0]}if(r!==h)throw new Rt("Data bytes does not match offset");for(var P=new Ln,_=0;_<p;++_)try{for(var j=(a=void 0,rA(y)),U=j.next();!U.done;U=j.next()){var X=U.value,S=X.getDataBytes();_<S.length&&P.appendBits(S[_],8)}}catch(B){a={error:B}}finally{try{U&&!U.done&&(s=j.return)&&s.call(j)}finally{if(a)throw a.error}}for(var _=0;_<m;++_)try{for(var D=(u=void 0,rA(y)),R=D.next();!R.done;R=D.next()){var X=R.value,N=X.getErrorCorrectionBytes();_<N.length&&P.appendBits(N[_],8)}}catch(B){u={error:B}}finally{try{R&&!R.done&&(c=D.return)&&c.call(D)}finally{if(u)throw u.error}}if(t!==P.getSizeInBytes())throw new Rt("Interleaving error: "+t+" and "+P.getSizeInBytes()+" differ.");return P},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new PC(wr.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Rt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Ot.NUMERIC:n.appendNumericBytes(e,r);break;case Ot.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Ot.BYTE:n.append8BitBytes(e,r,i);break;case Ot.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Rt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),u=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+u,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Rt;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Rt;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Qr.encode(e,r)}catch(c){throw new Rt(c)}for(var a=0,s=i.length;a!==s;a++){var u=i[a];t.appendBits(u,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Qr.encode(e,_n.SJIS)}catch(m){throw new Rt(m)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,u=r[a+1]&255,c=s<<8&4294967295|u,h=-1;if(c>=33088&&c<=40956?h=c-33088:c>=57408&&c<=60351&&(h=c-49472),h===-1)throw new Rt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Ot.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=_n.UTF8.getName(),n})();var uB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){uB(e,n);function e(t,r,i,a,s,u,c,h){var p=n.call(this,u,c)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=s,a+u>r||s+c>i)throw new Ce("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(u,c),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ct.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ct.arraycopy(this.yuvData,s,a,0,i),a;for(var u=0;u<r;u++){var c=u*t;Ct.arraycopy(this.yuvData,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,u=0;u<r;u++){for(var c=u*t,h=0;h<t;h++){var p=a[s+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+h]=4278190080|p*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var u=s+t/2,c=s,h=s+t-1;c<u;c++,h--){var p=i[c];i[c]=i[h],i[h]=p}},e.prototype.invert=function(){return new G0(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Pf);var cB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){cB(e,n);function e(t,r,i,a,s,u,c){var h=n.call(this,r,i)||this;if(h.dataWidth=a,h.dataHeight=s,h.left=u,h.top=c,t.BYTES_PER_ELEMENT===4){for(var p=r*i,m=new Uint8ClampedArray(p),y=0;y<p;y++){var _=t[y],E=_>>16&255,b=_>>7&510,T=_&255;m[y]=(E+b+T)/4&255}h.luminances=m}else h.luminances=t;if(a===void 0&&(h.dataWidth=r),s===void 0&&(h.dataHeight=i),u===void 0&&(h.left=0),c===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Ce("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ct.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ct.arraycopy(this.luminances,s,a,0,i),a;for(var u=0;u<r;u++){var c=u*t;Ct.arraycopy(this.luminances,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new G0(this)},e})(Pf);var fB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hB=function(n){fB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(_n),dB=function(){function n(){}return n.ISO_8859_1=_n.ISO8859_1,n}(),Ig,pB=301,mB=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=pB);return{LOG:n,ALOG:e}};Ig=mB([],[]),Ig.LOG;Ig.ALOG;var iA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(iA||(iA={}));var aA=129,MC=230,gB=231,vB=235,yB=236,xB=237,_B=238,wB=239,EB=240,Lm=254,AB=254,oA="[)>05",sA="[)>06",lA="",vt=0,qn=1,fr=2,yn=3,Mn=4,Jn=5,bB=function(){function n(){}return n.prototype.getEncodingMode=function(){return vt},n.prototype.encode=function(e){var t=hi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=hi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Jn:e.writeCodeword(gB),e.signalEncoderChange(Jn);return;case qn:e.writeCodeword(MC),e.signalEncoderChange(qn);return;case yn:e.writeCodeword(_B),e.signalEncoderChange(yn);break;case fr:e.writeCodeword(wB),e.signalEncoderChange(fr);break;case Mn:e.writeCodeword(EB),e.signalEncoderChange(Mn);break;default:throw new Error("Illegal mode: "+i)}else hi.isExtendedASCII(r)?(e.writeCodeword(vB),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(hi.isDigit(e)&&hi.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),TB=function(){function n(){}return n.prototype.getEncodingMode=function(){return Jn},n.prototype.encode=function(e){var t=new Ge;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=hi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(vt);break}}var a=t.length()-1,s=1,u=e.getCodewordCount()+a+s;e.updateSymbolInfo(u);var c=e.getSymbolInfo().getDataCapacity()-u>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,it.getCharAt(a));else if(a<=1555)t.setCharAt(0,it.getCharAt(Math.floor(a/250)+249)),t.insert(1,it.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,r=t.length();h<r;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),Yv=function(){function n(){}return n.prototype.getEncodingMode=function(){return qn},n.prototype.encodeMaximal=function(e){for(var t=new Ge,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var u=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+u+1);e.updateSymbolInfo(c);var h=e.getSymbolInfo().getDataCapacity()-c,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(r>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(MC),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Ge;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Ge;for(t.length()%3===2&&u!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||u!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var h=t.length();if(h%3===0){var p=hi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(vt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var u=e.getCurrentChar();return i=this.encodeChar(u,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Lm)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Lm),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Lm)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(vt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Ge;return a.append(r),a.append(i),a.toString()},n}(),SB=function(){function n(){}return n.prototype.getEncodingMode=function(){return Mn},n.prototype.encode=function(e){for(var t=new Ge;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=hi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(vt);break}}}t.append(it.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,u=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),h=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+u.length))}h?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(u)}finally{e.signalEncoderChange(vt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(it.getCharAt(e-64)):hi.illegalCharacter(it.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,u=(r<<18)+(i<<12)+(a<<6)+s,c=u>>16&255,h=u>>8&255,p=u&255,m=new Ge;return m.append(c),t>=2&&m.append(h),t>=3&&m.append(p),m.toString()},n}(),CB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ct=function(){function n(e,t,r,i,a,s,u,c){u===void 0&&(u=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=u,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var s,u;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=IB(RB),h=c.next();!h.done;h=c.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(m){s={error:m}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),NB=function(n){CB(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(ct),RB=[new ct(!1,3,5,8,8,1),new ct(!1,5,7,10,10,1),new ct(!0,5,7,16,6,1),new ct(!1,8,10,12,12,1),new ct(!0,10,11,14,6,2),new ct(!1,12,12,14,14,1),new ct(!0,16,14,24,10,1),new ct(!1,18,14,16,16,1),new ct(!1,22,18,18,18,1),new ct(!0,22,18,16,10,2),new ct(!1,30,20,20,20,1),new ct(!0,32,24,16,14,2),new ct(!1,36,24,22,22,1),new ct(!1,44,28,24,24,1),new ct(!0,49,28,22,14,2),new ct(!1,62,36,14,14,4),new ct(!1,86,42,16,16,4),new ct(!1,114,48,18,18,4),new ct(!1,144,56,20,20,4),new ct(!1,174,68,22,22,4),new ct(!1,204,84,24,24,4,102,42),new ct(!1,280,112,14,14,16,140,56),new ct(!1,368,144,16,16,16,92,36),new ct(!1,456,192,18,18,16,114,48),new ct(!1,576,224,20,20,16,144,56),new ct(!1,696,272,22,22,16,174,68),new ct(!1,816,336,24,24,16,136,56),new ct(!1,1050,408,18,18,36,175,68),new ct(!1,1304,496,20,20,36,163,62),new NB],OB=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(u){return u.charCodeAt(0)}),r=new Ge,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Ge,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ct.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),DB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PB=function(n){DB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return yn},e.prototype.encode=function(t){for(var r=new Ge;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=hi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(vt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):hi.illegalCharacter(it.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(AB),t.getNewEncoding()<0&&t.signalEncoderChange(vt)},e}(Yv),MB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kB=function(n){MB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return fr},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(Yv),hi=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=aA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new Yv,u=[new bB,s,new kB,new PB,new SB,new TB],c=new OB(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(oA)&&e.endsWith(lA)?(c.writeCodeword(yB),c.setSkipAtEnd(2),c.pos+=oA.length):e.startsWith(sA)&&e.endsWith(lA)&&(c.writeCodeword(xB),c.setSkipAtEnd(2),c.pos+=sA.length);var h=vt;for(a&&(s.encodeMaximal(c),h=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)u[h].encode(c),c.getNewEncoding()>=0&&(h=c.getNewEncoding(),c.resetEncoderSignal());var p=c.getCodewordCount();c.updateSymbolInfo();var m=c.getSymbolInfo().getDataCapacity();p<m&&h!==vt&&h!==Jn&&h!==Mn&&c.writeCodeword("");var y=c.getCodewords();for(y.length()<m&&y.append(aA);y.length()<m;)y.append(this.randomize253State(y.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===yn&&i===yn){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return vt}else if(r===Mn&&i===Mn){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return vt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===vt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),u=[];;){if(t+a===e.length){En.fill(s,0),En.fill(u,0);var c=this.findMinimums(i,u,We.MAX_VALUE,s),h=this.getMinimumCount(s);if(u[vt]===c)return vt;if(h===1){if(s[Jn]>0)return Jn;if(s[Mn]>0)return Mn;if(s[fr]>0)return fr;if(s[yn]>0)return yn}return qn}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[vt]+=.5:this.isExtendedASCII(p)?(i[vt]=Math.ceil(i[vt]),i[vt]+=2):(i[vt]=Math.ceil(i[vt]),i[vt]++),this.isNativeC40(p)?i[qn]+=2/3:this.isExtendedASCII(p)?i[qn]+=8/3:i[qn]+=4/3,this.isNativeText(p)?i[fr]+=2/3:this.isExtendedASCII(p)?i[fr]+=8/3:i[fr]+=4/3,this.isNativeX12(p)?i[yn]+=2/3:this.isExtendedASCII(p)?i[yn]+=13/3:i[yn]+=10/3,this.isNativeEDIFACT(p)?i[Mn]+=3/4:this.isExtendedASCII(p)?i[Mn]+=17/4:i[Mn]+=13/4,this.isSpecialB256(p)?i[Jn]+=4:i[Jn]++,a>=4){if(En.fill(s,0),En.fill(u,0),this.findMinimums(i,u,We.MAX_VALUE,s),u[vt]<this.min(u[Jn],u[qn],u[fr],u[yn],u[Mn]))return vt;if(u[Jn]<u[vt]||u[Jn]+1<this.min(u[qn],u[fr],u[yn],u[Mn]))return Jn;if(u[Mn]+1<this.min(u[Jn],u[qn],u[fr],u[yn],u[vt]))return Mn;if(u[fr]+1<this.min(u[Jn],u[qn],u[Mn],u[yn],u[vt]))return fr;if(u[yn]+1<this.min(u[Jn],u[qn],u[Mn],u[fr],u[vt]))return yn;if(u[qn]+1<this.min(u[vt],u[Jn],u[Mn],u[fr])){if(u[qn]<u[yn])return qn;if(u[qn]===u[yn]){for(var m=t+a+1;m<e.length;){var y=e.charCodeAt(m);if(this.isX12TermSep(y))return yn;if(!this.isNativeX12(y))break;m++}return qn}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,En.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=We.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),jm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uA=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Qr.encode(e,this.charset)!=null}catch{return!1}},n}(),LB=function(){function n(e,t,r){var i,a,s,u,c,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(M){return new uA(hB.forName(M))}),this.encoders=[];var p=[];p.push(new uA(dB.ISO_8859_1));for(var m=t!=null&&t.name.startsWith("UTF"),y=0;y<e.length;y++){var _=!1;try{for(var E=(i=void 0,jm(p)),b=E.next();!b.done;b=E.next()){var T=b.value,S=e.charAt(y),N=S.charCodeAt(0);if(N===r||T.canEncode(S)){_=!0;break}}}catch(M){i={error:M}}finally{try{b&&!b.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}if(!_)try{for(var P=(s=void 0,jm(this.ENCODERS)),j=P.next();!j.done;j=P.next()){var T=j.value;if(T.canEncode(e.charAt(y))){p.push(T),_=!0;break}}}catch(M){s={error:M}}finally{try{j&&!j.done&&(u=P.return)&&u.call(P)}finally{if(s)throw s.error}}_||(m=!0)}if(p.length===1&&!m)this.encoders=[p[0]];else{this.encoders=[];var U=0;try{for(var X=jm(p),D=X.next();!D.done;D=X.next()){var T=D.value;this.encoders[U++]=T}}catch(M){c={error:M}}finally{try{D&&!D.done&&(h=X.return)&&h.call(X)}finally{if(c)throw c.error}}}var R=-1;if(t!=null){for(var y=0;y<this.encoders.length;y++)if(this.encoders[y]!=null&&t.name===this.encoders[y].name){R=y;break}}this.priorityEncoderIndex=R}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Qr.encode(it.getCharAt(e),this.encoders[t].name)},n}(),jB=3,BB=function(){function n(e,t,r){this.fnc1=r;var i=new LB(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Ge,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var u=e.charAt(i).charCodeAt(0),c=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(u===s||t.canEncode(u,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),h=c+1);for(var p=c;p<h;p++)(u===s||t.canEncode(u,p))&&this.addEdge(r,i+1,new cA(u,t,p,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new cA[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var u=0;u<t.length();u++)a[s][u]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][u],r);for(var u=0;u<t.length();u++)a[s-1][u]=null}for(var c=-1,h=We.MAX_VALUE,u=0;u<t.length();u++)if(a[i][u]!=null){var p=a[i][u];p.cachedTotalSize<h&&(h=p.cachedTotalSize,c=u)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var m=[],y=a[i][c];y!=null;){if(y.isFNC1())m.unshift(1e3);else for(var _=t.encode(y.c,y.encoderIndex),s=_.length-1;s>=0;s--)m.unshift(_[s]&255);var E=y.previous===null?0:y.previous.encoderIndex;E!==y.encoderIndex&&m.unshift(256+t.getECIValue(y.encoderIndex)),y=y.previous}for(var b=[],s=0;s<b.length;s++)b[s]=m[s];return b},n}(),cA=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,u=i===null?0:i.encoderIndex;u!==r&&(s+=jB),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),VB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var fA;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(fA||(fA={}));(function(n){VB(e,n);function e(t,r,i,a,s){var u=n.call(this,t,r,i)||this;return u.shape=a,u.macroId=s,u}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(BB);var UB=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),hA=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),FB=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),HB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kv=function(n){HB(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+We.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(FB),zB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GB=function(n){zB(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Kv);function qB(n,e,t){return new GB(n,e,t)}function Mc(n,e,t){return new Kv(n,e,t)}var XB=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],No=0,u0=1,Yr=2,kC=3,Ui=4,WB=new Kv(null,0,0),Bm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],$B=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function YB(n){var e,t;try{for(var r=$B(n),i=r.next();!i.done;i=r.next()){var a=i.value;En.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[No][Ui]=0,n[u0][Ui]=0,n[u0][No]=28,n[kC][Ui]=0,n[Yr][Ui]=0,n[Yr][No]=15,n}var LC=YB(En.createInt32Array(6,6)),KB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QB=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Bm[this.mode][e];i=Mc(i,a&65535,a>>16),r+=a>>16}var s=e===Yr?4:5;return i=Mc(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Yr?4:5;return r=Mc(r,LC[this.mode][e],i),r=Mc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ui||this.mode===Yr){var a=Bm[r][No];t=Mc(t,a&65535,a>>16),i+=a>>16,r=No}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new n(t,r,this.binaryShiftByteCount+1,i+s);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=qB(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Bm[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new Ln;try{for(var u=KB(i),c=u.next();!c.done;c=u.next()){var h=c.value;h.appendTo(s,e)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return it.format("%s bits=%d bytes=%d",XB[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(WB,No,0,0),n}();function ZB(n){var e=it.getCharCode(" "),t=it.getCharCode("."),r=it.getCharCode(",");n[No][e]=1;for(var i=it.getCharCode("Z"),a=it.getCharCode("A"),s=a;s<=i;s++)n[No][s]=s-a+2;n[u0][e]=1;for(var u=it.getCharCode("z"),c=it.getCharCode("a"),s=c;s<=u;s++)n[u0][s]=s-c+2;n[Yr][e]=1;for(var h=it.getCharCode("9"),p=it.getCharCode("0"),s=p;s<=h;s++)n[Yr][s]=s-p+2;n[Yr][r]=12,n[Yr][t]=13;for(var m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],y=0;y<m.length;y++)n[kC][it.getCharCode(m[y])]=y;for(var _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],y=0;y<_.length;y++)it.getCharCode(_[y])>0&&(n[Ui][it.getCharCode(_[y])]=y);return n}var Vm=ZB(En.createInt32Array(5,256)),vd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JB=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=it.getCharCode(" "),t=it.getCharCode(`
`),r=hA.singletonList(QB.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case it.getCharCode("\r"):a=s===t?2:0;break;case it.getCharCode("."):a=s===e?3:0;break;case it.getCharCode(","):a=s===e?4:0;break;case it.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var u=hA.min(r,function(c,h){return c.getBitCount()-h.getBitCount()});return u.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=vd(e),u=s.next();!u.done;u=s.next()){var c=u.value;this.updateStateForChar(c,t,a)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Vm[e.getMode()][i]>0,s=null,u=0;u<=Ui;u++){var c=Vm[u][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!a||u===e.getMode()||u===Yr){var h=s.latchAndAppend(u,c);r.push(h)}if(!a&&LC[e.getMode()][u]>=0){var p=s.shiftAndAppend(u,c);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Vm[e.getMode()][i]===0){var m=e.addBinaryShiftChar(t);r.push(m)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var u=vd(e),c=u.next();!c.done;c=u.next()){var h=c.value;this.updateStateForPair(h,t,r,s)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Ui,r)),e.getMode()!==Ui&&i.push(a.shiftAndAppend(Ui,r)),r===3||r===4){var s=a.latchAndAppend(Yr,16-r).latchAndAppend(Yr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var u=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(u)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var u=vd(e),c=u.next();!c.done;c=u.next()){var h=c.value,p=!0,m=function(T){if(T.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(T)&&(s=s.filter(function(S){return S!==T}))};try{for(var y=(i=void 0,vd(s)),_=y.next();!_.done;_=y.next()){var E=_.value,b=m(E);if(b==="break")break}}catch(T){i={error:T}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}p&&s.push(h)}}catch(T){t={error:T}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return s},n}(),eV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new JB(e).encode(),a=We.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,u,c,h,p,m;if(r!==n.DEFAULT_AZTEC_LAYERS){if(u=r<0,c=Math.abs(r),c>(u?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ce(it.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(c,u),p=n.WORD_SIZE[c];var y=h-h%p;if(m=n.stuffBits(i,p),m.getSize()+a>y)throw new Ce("Data to large for user specified layer");if(u&&m.getSize()>p*64)throw new Ce("Data to large for user specified layer")}else{p=0,m=null;for(var _=0;;_++){if(_>n.MAX_NB_BITS)throw new Ce("Data too large for an Aztec code");if(u=_<=3,c=u?_+1:_,h=n.totalBitsInLayer(c,u),!(s>h)){(m==null||p!==n.WORD_SIZE[c])&&(p=n.WORD_SIZE[c],m=n.stuffBits(i,p));var y=h-h%p;if(!(u&&m.getSize()>p*64)&&m.getSize()+a<=y)break}}}var E=n.generateCheckWords(m,h,p),b=m.getSize()/p,T=n.generateModeMessage(u,c,b),S=(u?11:14)+c*4,N=new Int32Array(S),P;if(u){P=S;for(var _=0;_<N.length;_++)N[_]=_}else{P=S+1+2*We.truncDivision(We.truncDivision(S,2)-1,15);for(var j=We.truncDivision(S,2),U=We.truncDivision(P,2),_=0;_<j;_++){var X=_+We.truncDivision(_,15);N[j-_-1]=U-X-1,N[j+_]=U+X+1}}for(var D=new Xi(P),_=0,R=0;_<c;_++){for(var M=(c-_)*4+(u?9:12),B=0;B<M;B++)for(var G=B*2,H=0;H<2;H++)E.get(R+G+H)&&D.set(N[_*2+H],N[_*2+B]),E.get(R+M*2+G+H)&&D.set(N[_*2+B],N[S-1-_*2-H]),E.get(R+M*4+G+H)&&D.set(N[S-1-_*2-H],N[S-1-_*2-B]),E.get(R+M*6+G+H)&&D.set(N[S-1-_*2-B],N[_*2+H]);R+=M*8}if(n.drawModeMessage(D,u,P,T),u)n.drawBullsEye(D,We.truncDivision(P,2),5);else{n.drawBullsEye(D,We.truncDivision(P,2),7);for(var _=0,B=0;_<We.truncDivision(S,2)-1;_+=15,B+=16)for(var H=We.truncDivision(P,2)&1;H<P;H+=2)D.set(We.truncDivision(P,2)-B,H),D.set(We.truncDivision(P,2)+B,H),D.set(H,We.truncDivision(P,2)-B),D.set(H,We.truncDivision(P,2)+B)}var k=new UB;return k.setCompact(u),k.setSize(P),k.setLayers(c),k.setCodeWords(b),k.setMatrix(D),k},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Ln;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=We.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var u=a-3+s;i.get(s)&&e.set(u,a-5),i.get(s+7)&&e.set(a+5,u),i.get(20-s)&&e.set(u,a+5),i.get(27-s)&&e.set(a-5,u)}else for(var s=0;s<10;s++){var u=a-5+s+We.truncDivision(s,5);i.get(s)&&e.set(u,a-7),i.get(s+10)&&e.set(a+7,u),i.get(29-s)&&e.set(u,a+7),i.get(39-s)&&e.set(a-7,u)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,u=new PC(n.getGF(r)),c=We.truncDivision(t,r),h=n.bitsToWords(e,r,c);u.encode(h,c-s);var p=t%r,m=new Ln;m.appendBits(0,p);try{for(var y=eV(Array.from(h)),_=y.next();!_.done;_=y.next()){var E=_.value;m.appendBits(E,r)}}catch(b){i={error:b}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}return m},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var u=0,c=0;c<t;c++)u|=e.get(a*t+c)?1<<t-c-1:0;i[a]=u}return i},n.getGF=function(e){switch(e){case 4:return wr.AZTEC_PARAM;case 6:return wr.AZTEC_DATA_6;case 8:return wr.AZTEC_DATA_8;case 10:return wr.AZTEC_DATA_10;case 12:return wr.AZTEC_DATA_12;default:throw new Ce("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Ln,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var u=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(u|=1<<t-1-c);(u&a)===a?(r.appendBits(u&a,t),s--):(u&a)===0?(r.appendBits(u|1,t),s--):r.appendBits(u,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var tV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nV=function(n){tV(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),s=0,u=0,c=t.length;s<c;s+=4,u++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var m=t[s],y=t[s+1],_=t[s+2];h=306*m+601*y+117*_+512>>10}a[u]=h}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new G0(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*s);r.width=u,r.height=c;var h=r.getContext("2d");if(!h)throw new Error("Could not create a Canvas Context element.");return h.translate(u/2,c/2),h.rotate(i),h.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Pf);function jC(){return typeof navigator<"u"}function rV(){return jC()&&!!navigator.mediaDevices}function iV(){return!!(rV()&&navigator.mediaDevices.enumerateDevices)}var Vl=function(){return Vl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Vl.apply(this,arguments)},Vt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function u(p){try{h(r.next(p))}catch(m){s(m)}}function c(p){try{h(r.throw(p))}catch(m){s(m)}}function h(p){p.done?a(p.value):i(p.value).then(u,c)}h((r=r.apply(n,e||[])).next())})},Ut=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(p){return c([h,p])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Um=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aV={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},vu=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=Vl(Vl({},aV),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(It.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return Vt(this,void 0,void 0,function(){return Ut(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Um(i),s=a.next();!s.done;s=a.next()){var u=s.value;if(n.mediaStreamIsTorchCompatibleTrack(u))return!0}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new tn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new tn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new nV(e),r=new wC(t);return new _C(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new tn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return Vt(this,void 0,void 0,function(){var t;return Ut(this,function(r){switch(r.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return Vt(this,void 0,void 0,function(){var e,t,r,i,a,s,u,c,h,p,m,y;return Ut(this,function(_){switch(_.label){case 0:if(!jC())throw new Error("Can't enumerate devices, navigator is not present.");if(!iV())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=Um(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(u=a.deviceId||a.id,c=a.label||"Video device ".concat(t.length+1),h=a.groupId,p={deviceId:u,label:c,kind:s,groupId:h},t.push(p))}catch(E){m={error:E}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(m)throw m.error}}return[2,t]}})})},n.findDeviceById=function(e){return Vt(this,void 0,void 0,function(){var t;return Ut(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return Vt(this,void 0,void 0,function(){var r;return Ut(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,s){var u=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",c))},t),c=function(){n.tryPlayVideo(e).then(function(h){clearTimeout(u),e.removeEventListener("canplay",c),a(h)})};e.addEventListener("canplay",c)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),Vt(this,void 0,void 0,function(){var i;return Ut(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(a),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new tn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return Vt(this,void 0,void 0,function(){var t;return Ut(this,function(r){switch(r.label){case 0:if(!e)throw new tn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return Vt(this,void 0,void 0,function(){var t;return Ut(this,function(r){switch(r.label){case 0:if(!e)throw new tn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Vt(this,void 0,void 0,function(){var i,a;return Ut(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw a=s.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return Vt(this,void 0,void 0,function(){var i,a,s,u,c,h,p,m,y,_=this;return Ut(this,function(E){switch(E.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=E.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},u=this.scan(a,r,s),c=e.getVideoTracks(),h=Vl(Vl({},u),{stop:function(){u.stop()},streamVideoConstraintsApply:function(b,T){return Vt(this,void 0,void 0,function(){var S,N,P,j,U,X,D;return Ut(this,function(R){switch(R.label){case 0:S=T?c.filter(T):c,R.label=1;case 1:R.trys.push([1,6,7,8]),N=Um(S),P=N.next(),R.label=2;case 2:return P.done?[3,5]:(j=P.value,[4,j.applyConstraints(b)]);case 3:R.sent(),R.label=4;case 4:return P=N.next(),[3,2];case 5:return[3,8];case 6:return U=R.sent(),X={error:U},[3,8];case 7:try{P&&!P.done&&(D=N.return)&&D.call(N)}finally{if(X)throw X.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(b){return c.find(b).getConstraints()},streamVideoSettingsGet:function(b){return c.find(b).getSettings()},streamVideoCapabilitiesGet:function(b){return c.find(b).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(m=c==null?void 0:c.find(function(b){return n.mediaStreamIsTorchCompatibleTrack(b)}),y=function(b){return Vt(_,void 0,void 0,function(){return Ut(this,function(T){switch(T.label){case 0:return[4,n.mediaStreamSetTorch(m,b)];case 1:return T.sent(),[2]}})})},h.switchTorch=y,h.stop=function(){return Vt(_,void 0,void 0,function(){return Ut(this,function(b){switch(b.label){case 0:return u.stop(),[4,y(!1)];case 1:return b.sent(),[2]}})})}),[2,h]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Vt(this,void 0,void 0,function(){var i,a;return Ut(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return Vt(this,void 0,void 0,function(){var r,i;return Ut(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new tn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return Vt(this,void 0,void 0,function(){var r,i,a,s;return Ut(this,function(u){switch(u.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new tn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return u.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Vt(this,void 0,void 0,function(){var r;return Ut(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Vt(this,void 0,void 0,function(){var r,i,a;return Ut(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=s.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Vt(this,void 0,void 0,function(){var r,i;return Ut(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return Vt(this,void 0,void 0,function(){var t,r;return Ut(this,function(i){switch(i.label){case 0:if(!e)throw new tn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return Vt(this,void 0,void 0,function(){var t,r;return Ut(this,function(i){switch(i.label){case 0:if(!e)throw new tn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,u){a.scan(e,function(c,h,p){if(c){s(c),p.stop();return}if(h){if(h instanceof ie&&t||h instanceof fn&&r||h instanceof ge&&i)return;p.stop(),u(h)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),s;try{s=a.getContext("2d",{willReadFrequently:!0})}catch{s=a.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var u=function(){s=void 0,a=void 0},c=!1,h,p=function(){c=!0,clearTimeout(h),u(),r&&r()},m={stop:p},y=function(){if(!c)try{n.drawImageOnCanvas(s,e);var _=i.decodeFromCanvas(a);t(_,void 0,m),h=setTimeout(y,i.options.delayBetweenScanSuccess)}catch(S){t(void 0,S,m);var E=S instanceof fn,b=S instanceof ge,T=S instanceof ie;if(E||b||T){h=setTimeout(y,i.options.delayBetweenScanAttempts);return}u(),r&&r(S)}};return y(),m},n.prototype._decodeOnLoadImage=function(e){return Vt(this,void 0,void 0,function(){var t;return Ut(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return Vt(this,void 0,void 0,function(){var t;return Ut(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}(),oV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){oV(e,n);function e(t,r){return n.call(this,new i0,t,r)||this}return e})(vu);var sV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){sV(e,n);function e(t,r){return n.call(this,new jl(t),t,r)||this}return e})(vu);var lV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){lV(e,n);function e(t,r){return n.call(this,new o0,t,r)||this}return e})(vu);var uV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){uV(e,n);function e(t,r){var i=this,a=new DC;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(It.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(vu);var cV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){cV(e,n);function e(t,r){return n.call(this,new l0,t,r)||this}return e})(vu);var fV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hV=function(n){fV(e,n);function e(t,r){return n.call(this,new s0,t,r)||this}return e}(vu);function dV(){const{user:n,addLeague:e}=Qt(),t=Bn(),{code:r}=$4(),[i,a]=F.useState(r||""),[s,u]=F.useState(!1),[c,h]=F.useState(""),[p,m]=F.useState(!1),[y,_]=F.useState(""),[E,b]=F.useState(!1),[T,S]=F.useState(""),N=F.useRef(null),P=F.useRef(null);F.useEffect(()=>{const X=new URLSearchParams(window.location.search).get("code");X?a(X.toUpperCase()):r&&a(r)},[r]),F.useEffect(()=>(E&&N.current&&(S(""),P.current=new hV,P.current.decodeFromVideoDevice(void 0,N.current,(U,X)=>{if(U){let D="";try{const R=new URL(U.getText());D=R.searchParams.get("code")||R.pathname.split("/").pop()}catch{D=U.getText()}b(!1),P.current.reset(),t(`/join?code=${encodeURIComponent(D)}`)}else X&&S("Camera error: "+((X==null?void 0:X.message)||X))})),()=>{P.current&&P.current.reset()}),[E,t]);const j=async U=>{U.preventDefault(),u(!0),h(""),m(!1);try{const{data:X}=await zt.post(`/leagues/join/${i}`,{user_id:n==null?void 0:n.uid,email:n==null?void 0:n.email});_(X.league_name),m(!0),e&&e({id:i,name:X.league_name,role:"coach"})}catch(X){h(X.message||"Error joining league")}finally{u(!1)}};return v.jsxs(Jr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:[v.jsxs("button",{className:"fixed bottom-6 right-6 z-50 bg-cyan-600 hover:bg-cyan-700 text-white rounded-full shadow-lg p-4 flex items-center gap-2 text-lg font-bold transition",onClick:()=>b(!0),"aria-label":"Scan QR to Join",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},children:[v.jsx("span",{role:"img","aria-label":"scan",children:""})," Scan QR to Join"]}),E&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg flex flex-col items-center max-w-xs w-full",children:[v.jsx("h2",{className:"text-lg font-bold mb-2",children:"Scan League QR Code"}),v.jsx("div",{className:"w-full h-64 mb-2 flex items-center justify-center",children:v.jsx("video",{ref:N,className:"w-full h-full rounded",style:{objectFit:"cover"}})}),T&&v.jsx("div",{className:"text-red-500 text-sm mb-2",children:T}),v.jsx("button",{className:"bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded font-semibold mt-2 transition",onClick:()=>b(!1),children:"Cancel"})]})}),v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[v.jsx("div",{className:"text-center mb-6",children:v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),v.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Join a League"}),v.jsx("div",{className:"mb-2 text-gray-600",children:"Enter the code provided by your organizer to join their league."}),v.jsx("div",{className:"mb-4 text-xs text-gray-500",children:"Need help? Ask your organizer for a code or QR invite."}),p?v.jsxs("div",{className:"text-center w-full",children:[v.jsx("div",{className:"mb-4 text-green-600 font-semibold",children:"Successfully joined league!"}),v.jsxs("div",{className:"mb-2",children:["Welcome to ",v.jsx("span",{className:"font-bold",children:y})]}),v.jsx("button",{className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] mt-4",onClick:()=>t("/dashboard"),children:"Go to Dashboard"})]}):v.jsxs("form",{onSubmit:j,className:"space-y-4 w-full",children:[v.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-cyan-200 rounded-full focus:ring-2 focus:ring-cyan-700 focus:border-cyan-700 transition text-center font-mono text-lg tracking-widest",placeholder:"Enter Join Code",value:i,onChange:U=>a(U.target.value.toUpperCase()),required:!0,autoFocus:!0}),v.jsx("button",{type:"submit",className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",disabled:s,children:s?"Joining...":"Join League"}),c&&v.jsx("div",{className:"text-red-500 text-sm mt-2",children:c})]})]})]})}const pV=()=>({welcomeVariant:(()=>{const e=localStorage.getItem("welcome_variant");if(e)return e;const t=["default","mojo-style","sports-focused"],r=t[Math.floor(Math.random()*t.length)];return localStorage.setItem("welcome_variant",r),r})()});function mV(){const n=Bn(),{welcomeVariant:e}=pV(),r=(()=>{switch(e){case"mojo-style":return{title:"Dominate. Track. Win.",subtitle:"Elevate your game with precision tracking and real-time insights that champions demand.",buttonText:"Start Dominating"};case"sports-focused":return{title:"Train. Compete. Excel.",subtitle:"Professional-grade combine tracking and analytics for serious athletes and coaches.",buttonText:"Join the Elite"};default:return{title:"Coach. Manage. Excel.",subtitle:"Your all-in-one platform for team management, combine tracking, and athletic excellence.",buttonText:"Get Started"}}})();return v.jsx(Jr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[v.jsx("div",{className:"text-center mb-6",children:v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4",children:r.title}),v.jsx("p",{className:"text-gray-600 text-base leading-relaxed mb-6",children:r.subtitle}),v.jsx("button",{className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] mb-6",onClick:()=>n("/signup"),children:r.buttonText})]}),v.jsxs("div",{className:"text-center space-y-3 text-sm",children:[v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs(Tt,{to:"/login",className:"text-cyan-600 hover:text-cyan-800 font-medium transition-colors duration-200",children:["Already have an account? ",v.jsx("span",{className:"font-semibold",children:"Sign In"})]}),v.jsxs(Tt,{to:"/claim",className:"text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200",children:["Need to claim an account? ",v.jsx("span",{className:"font-semibold",children:"Claim Account"})]})]}),v.jsx("div",{className:"pt-4 border-t border-gray-100",children:v.jsx(Tt,{to:"/help",className:"text-gray-500 hover:text-gray-700 text-xs transition-colors duration-200",children:"Need Help?"})})]})]})})}const gV=()=>v.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mx-auto mb-8",children:[v.jsx("rect",{x:"25",y:"40",width:"60",height:"35",rx:"8",fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"2"}),v.jsx("rect",{x:"75",y:"35",width:"15",height:"8",rx:"2",fill:"#ec4899"}),v.jsx("rect",{x:"52",y:"75",width:"6",height:"25",fill:"#9ca3af"}),v.jsx("ellipse",{cx:"35",cy:"100",rx:"8",ry:"3",fill:"#10b981"}),v.jsx("ellipse",{cx:"55",cy:"102",rx:"6",ry:"2",fill:"#10b981"}),v.jsx("ellipse",{cx:"75",cy:"100",rx:"7",ry:"3",fill:"#10b981"}),v.jsx("rect",{x:"35",y:"48",width:"20",height:"12",rx:"2",fill:"white",stroke:"#6366f1",strokeWidth:"2"}),v.jsx("line",{x1:"37",y1:"52",x2:"53",y2:"52",stroke:"#6366f1",strokeWidth:"1"}),v.jsx("line",{x1:"37",y1:"55",x2:"48",y2:"55",stroke:"#6366f1",strokeWidth:"1"}),v.jsx("circle",{cx:"20",cy:"30",r:"2",fill:"#fbbf24"}),v.jsx("circle",{cx:"95",cy:"25",r:"1.5",fill:"#fbbf24"}),v.jsx("circle",{cx:"15",cy:"60",r:"1",fill:"#fbbf24"})]});function vV(){const{user:n,setUser:e}=Qt(),[t,r]=F.useState(""),[i,a]=F.useState(!1),[s,u]=F.useState(!1),c=Bn(),[h,p]=F.useState(!1),m=Df();F.useEffect(()=>{const b=async()=>{Ft.currentUser&&(await Ft.currentUser.reload(),p(Ft.currentUser.emailVerified),Ft.currentUser.emailVerified&&(await Ft.currentUser.getIdToken(!0),e(Ft.currentUser),c("/dashboard")))};b();const T=setInterval(b,1e4);return()=>clearInterval(T)},[c,e]),F.useEffect(()=>{if(!Ft.currentUser){const b=setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),c("/welcome",{replace:!0})},2500);return()=>clearTimeout(b)}},[c]);const y=async()=>{u(!0);try{Ft.currentUser&&(await Ft.currentUser.reload(),p(Ft.currentUser.emailVerified),Ft.currentUser.emailVerified?(await Ft.currentUser.getIdToken(!0),e(Ft.currentUser),c("/dashboard")):r("Still not verified. Please check your email."))}catch(b){console.error("Verification check error:",b),r("Error checking verification status.")}finally{u(!1)}},_=async()=>{a(!0),r("");try{Ft.currentUser?(await Ft.currentUser.reload(),await Sb(Ft.currentUser),r("Verification email sent!")):r("User not found. Please log in again.")}catch(b){r("Failed to resend. Try again later."),console.error("Resend verification error:",b)}finally{a(!1)}},E=()=>{const b=navigator.userAgent.toLowerCase();try{b.includes("iphone")||b.includes("ipad")?window.location.href="message://":b.includes("android")?window.location.href="intent://view#Intent;scheme=mailto;end":alert(`Please open your email app manually to check for the verification email.

Look for an email from WooCombine and click the verification link inside.`)}catch{alert(`Please open your email app manually to check for the verification email.

Look for an email from WooCombine and click the verification link inside.`)}};return v.jsx(Jr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl mx-4 flex flex-col relative min-h-[600px]",children:[v.jsxs("div",{className:"w-full flex flex-row justify-between items-center p-6 pb-2",children:[v.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-900 focus:outline-none transition",type:"button","aria-label":"Back to welcome",onClick:()=>c("/welcome"),children:v.jsx(Hv,{size:20})}),v.jsx("button",{className:"text-sm text-cyan-600 hover:text-cyan-800 font-medium",onClick:()=>c("/help"),children:"Need Help?"})]}),v.jsxs("div",{className:"flex-1 flex flex-col px-6 pb-6",children:[v.jsx("div",{className:"text-center mt-4 mb-6",children:v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),v.jsx("h1",{className:"text-2xl font-black text-gray-900 text-center mb-6 tracking-tight",children:"CHECK YOUR EMAIL"}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsxs("p",{className:"text-gray-700 text-base leading-relaxed mb-4",children:["We sent an email to"," ",v.jsx("span",{className:"font-semibold text-gray-900 break-all",children:(n==null?void 0:n.email)||"your email address"})," ","with a link to verify your WooCombine account."]}),v.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"It might take a few minutes. If you don't see our email in your inbox, please check your spam or promo folders. If you see multiple emails, make sure you're selecting the most recent verification email."})]}),v.jsx("div",{className:"flex-1 flex items-center justify-center py-4",children:v.jsx(gV,{})}),v.jsxs("div",{className:"mt-8 space-y-4",children:[h?v.jsx("button",{onClick:()=>c("/dashboard"),className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:"Continue to App"}):v.jsx("button",{onClick:E,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:"Open Email App"}),!h&&v.jsx("button",{onClick:y,disabled:s,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-xl transition-colors duration-200 disabled:opacity-50",children:s?"Checking...":"I've verified my email"}),!h&&v.jsx("div",{className:"text-red-600 text-sm text-center",children:"We haven't detected your email verification yet. Please check your inbox and try again."}),t&&v.jsx("div",{className:`text-sm text-center ${t.includes("sent")?"text-green-600":"text-red-600"}`,children:t}),!Ft.currentUser&&v.jsx("div",{className:"text-red-600 text-sm text-center",children:"User session expired. Please log in again."})]})]}),v.jsxs("div",{className:"px-6 pb-6 pt-4 border-t border-gray-100 space-y-3",children:[v.jsx("button",{onClick:_,disabled:i,className:"w-full text-cyan-600 hover:text-cyan-800 font-medium py-2 transition-colors duration-200 disabled:opacity-50",children:i?"Sending...":"Resend Email"}),v.jsx("button",{onClick:()=>c("/help"),className:"w-full text-cyan-600 hover:text-cyan-800 font-medium py-2 transition-colors duration-200",children:"Contact Support"}),Ft.currentUser?v.jsx("button",{onClick:async()=>{try{await m(),c("/welcome")}catch(b){console.error("Logout failed:",b),c("/welcome")}},className:"w-full text-gray-500 hover:text-gray-700 font-medium py-2 transition-colors duration-200",children:"Log Out"}):v.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),c("/welcome",{replace:!0})},className:"w-full text-gray-500 hover:text-gray-700 font-medium py-2 transition-colors duration-200",children:"Return to Welcome"})]})]})})}function yV(){const{user:n,setSelectedLeagueId:e}=Qt(),t=Df(),[r,i]=F.useState([]),[a,s]=F.useState(!0),[u,c]=F.useState(null),h=Bn();F.useEffect(()=>{if(!n){console.error("[SelectLeague] No user found in context."),c("No user found. Please log in again.");return}(async()=>{var y,_;try{const E=await zt.get("/leagues/me");i(E.data.leagues||[]),!E.data.leagues||E.data.leagues.length===0?c("No leagues linked to this account. Try creating a new one."):c(null)}catch(E){((y=E.response)==null?void 0:y.status)===404?(i([]),c("No leagues linked to this account. Try creating a new one.")):(console.error("[SelectLeague] Fetch error:",E.message,E.stack,(_=E.response)==null?void 0:_.data),i([]),c("Could not fetch leagues. Please try again later."))}finally{s(!1)}})()},[n]);const p=y=>{localStorage.setItem("selectedLeagueId",y.id),e(y.id),h("/dashboard")},m=async()=>{try{await t(),h("/welcome")}catch(y){console.error("[SelectLeague] Logout error:",y)}};return v.jsx(Jr,{backgroundColor:"bg-gradient-to-br from-cyan-900 via-blue-900 to-cyan-700",contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gradient-to-br from-cyan-900 via-blue-900 to-cyan-700 relative",children:[v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl mx-4 flex flex-col",children:[v.jsxs("div",{className:"text-center py-6 px-6 border-b border-gray-200",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select Your League"}),v.jsx("p",{className:"text-gray-600 text-sm",children:"Choose which league you'd like to access, or join a new one."})]}),v.jsxs("div",{className:"p-6 flex-1",children:[a?v.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading leagues..."}):u?v.jsx("div",{className:"text-center py-8",children:v.jsx("div",{className:"text-red-600 mb-4",children:u})}):r.length===0?v.jsx("div",{className:"text-center py-8 text-gray-500",children:"No leagues found. Create or join one below."}):v.jsx("div",{className:"space-y-3",children:r.map(y=>v.jsxs("button",{onClick:()=>p(y),className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition",children:[v.jsx("div",{className:"font-semibold text-gray-900",children:y.name}),v.jsxs("div",{className:"text-sm text-gray-500 capitalize",children:["Role: ",y.role]})]},y.id))}),v.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 text-center",children:[v.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Logged in as: ",(n==null?void 0:n.email)||"Unknown"]}),v.jsx("button",{onClick:m,className:"text-sm text-red-600 hover:text-red-800 underline",children:"Log out and switch accounts"})]})]})]}),v.jsx("div",{className:"fixed left-0 right-0 bottom-0 flex flex-col gap-3 items-center bg-white py-4 z-10 border-t border-gray-200",children:v.jsx("button",{className:"w-11/12 max-w-lg border-2 border-blue-600 text-blue-700 font-bold text-lg py-3 rounded-full shadow",onClick:()=>h("/join"),children:"Join a Team"})})]})})}const xV=[{key:"organizer",label:" League Operator",desc:"Full access to admin tools and player management."},{key:"coach",label:" Coach",desc:"View and customize, but cannot manage all players."},{key:"viewer",label:" Viewer / Guest",desc:"Read-only access to league data."}];function _V(){const{user:n}=Qt(),[e,t]=F.useState(null),[r,i]=F.useState(""),[a,s]=F.useState(!1),[u,c]=F.useState(!0),h=Bn(),p=Df(),m=zS();if(Ng.useEffect(()=>{c(!1)},[]),!n||u)return v.jsx(H0,{title:"Preparing role selection...",subtitle:"Setting up your account",size:"large"});const y=async()=>{if(i(""),!n){i("No user found. Please log in again.");return}if(!e){i("Please select a role.");return}s(!0);try{await Y9(HS(m,"users",n.uid),{id:n.uid,email:n.email,role:e,created_at:Z9()},{merge:!0}),await n.getIdToken(!0),h("/dashboard",{replace:!0})}catch(E){i(E.message||"Failed to save role."),console.error(" Firestore write failed in SelectRole for UID:",n==null?void 0:n.uid,E)}finally{s(!1)}},_=async()=>{try{await p(),h("/welcome")}catch(E){console.error("[SelectRole] Logout error:",E),i("Logout failed. Please try again.")}};return v.jsx(Jr,{contentClassName:"min-h-[70vh]",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 sm:p-10 flex flex-col items-center",children:[v.jsx("div",{className:"text-center mb-6",children:v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-4",style:{objectFit:"contain"}})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Welcome! What's your role?"}),v.jsx("div",{className:"w-full flex flex-col gap-4 mb-6",children:xV.map(E=>v.jsxs("button",{className:`w-full border-2 rounded-xl p-4 text-left flex flex-col transition font-semibold ${e===E.key?"border-cyan-600 bg-cyan-50 text-cyan-900":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>t(E.key),disabled:a,children:[v.jsx("span",{className:"text-lg mb-1",children:E.label}),v.jsx("span",{className:"text-gray-600 text-sm",children:E.desc})]},E.key))}),r&&v.jsx("div",{className:"w-full bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded mb-4 text-sm",children:r}),v.jsxs("div",{className:"w-full space-y-3",children:[v.jsx("button",{className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:transform-none",onClick:y,disabled:a,children:a?"Saving...":"Continue"}),v.jsx("button",{className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 rounded-xl transition-colors duration-200 disabled:opacity-50",onClick:_,disabled:a,children:a?"Logging out...":"Logout"})]})]})})}function wV({event:n,league:e}){if(!n||!e)return null;const t=n.id,r=`https://woo-combine.com/join-event/${t}`,i=a=>{navigator.clipboard.writeText(a)};return v.jsxs("div",{className:"w-full max-w-md text-center mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-2xl font-bold mb-2 text-green-600",children:"Event Created Successfully!"}),v.jsxs("p",{className:"text-gray-600 mb-4",children:['Your combine event "',n.name,'" is ready.']})]}),v.jsxs("div",{className:"bg-white border-2 border-green-200 rounded-xl p-6 mb-4",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Event Join Code:"}),v.jsx("div",{className:"text-2xl font-mono bg-gray-100 rounded p-3 inline-block border",children:t})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"flex justify-center mb-2",children:v.jsx("div",{className:"bg-white p-4 rounded-lg border",children:v.jsx(xC,{value:r,size:160})})}),v.jsxs("div",{className:"text-xs text-gray-500",children:["Scan to join: ",r]})]}),v.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[v.jsxs("button",{onClick:()=>i(t),className:"bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition flex items-center justify-center gap-2",children:[v.jsx(nC,{className:"w-4 h-4"}),"Copy Event Code"]}),v.jsxs("button",{onClick:()=>i(r),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition flex items-center justify-center gap-2",children:[v.jsx(gf,{className:"w-4 h-4"}),"Copy Join Link"]})]}),v.jsx("div",{className:"text-green-700 font-semibold text-sm",children:" Share this code or QR with coaches to join this combine event!"})]}),v.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[v.jsx("strong",{children:"Next steps:"}),v.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[v.jsx("li",{children:"Share the code/QR with your coaches"}),v.jsx("li",{children:"Upload player roster in the Admin section"}),v.jsx("li",{children:"Start recording drill results"})]})]})]})}function EV(){const n=Bn(),{selectedEvent:e}=$i(),{leagues:t,selectedLeagueId:r}=Qt(),[i,a]=F.useState(!1),[s,u]=F.useState(null),c=t==null?void 0:t.find(m=>m.id===r),h=m=>{u(m),a(!0)},p=()=>{n("/admin#player-upload-section")};return i&&s?v.jsx(Jr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[v.jsx(wV,{event:s,league:c}),v.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:v.jsx("button",{onClick:p,className:"bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] w-full",children:"Continue to Import Players"})})]})}):v.jsx(Jr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[v.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Select or Create an Event"}),v.jsx("p",{className:"mb-6 text-gray-600",children:"Choose an existing event or create a new combine event for your league."}),v.jsx(Jl,{onEventSelected:h}),e&&v.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Selected: ",v.jsx("strong",{children:e.name})]}),v.jsx("button",{onClick:p,className:"bg-cyan-600 hover:bg-cyan-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-[1.02] w-full",children:"Continue to Import Players"})]})]})})}function AV(){return v.jsx(PI,{children:v.jsx(J9,{children:v.jsx(VM,{children:v.jsx("div",{className:"min-h-screen bg-gray-50",children:v.jsxs(uI,{children:[v.jsx(Dn,{path:"/",element:v.jsx(yd,{to:"/welcome",replace:!0})}),v.jsx(Dn,{path:"/welcome",element:v.jsx(mV,{})}),v.jsx(Dn,{path:"/dashboard",element:v.jsx(ui,{children:v.jsxs(v.Fragment,{children:[v.jsx(cd,{}),v.jsx(UM,{})]})})}),v.jsx(Dn,{path:"/roster",element:v.jsx(ui,{children:v.jsx(FM,{})})}),v.jsx(Dn,{path:"/schedule",element:v.jsx(ui,{children:v.jsx(HM,{})})}),v.jsx(Dn,{path:"/coach-dashboard",element:v.jsx(ui,{children:v.jsxs(v.Fragment,{children:[v.jsx(cd,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsx(qM,{})})]})})}),v.jsx(Dn,{path:"/players",element:v.jsx(ui,{children:v.jsxs(v.Fragment,{children:[v.jsx(cd,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsx(QM,{})})]})})}),v.jsx(Dn,{path:"/admin",element:v.jsx(ui,{children:v.jsxs(v.Fragment,{children:[v.jsx(cd,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsx(hk,{})})]})})}),v.jsx(Dn,{path:"/login",element:v.jsx(pk,{})}),v.jsx(Dn,{path:"/signup",element:v.jsx(xk,{})}),v.jsx(Dn,{path:"/claim",element:v.jsx(Jr,{contentClassName:"min-h-screen",hideHeader:!0,showOverlay:!1,children:v.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center",children:[v.jsx("img",{src:"/favicon/woocombine-logo.png",alt:"Woo-Combine Logo",className:"w-16 h-16 mx-auto mb-6",style:{objectFit:"contain"}}),v.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Account Claim"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"Account claiming feature coming soon."}),v.jsx(Tt,{to:"/welcome",className:"text-cyan-600 hover:text-cyan-700 underline font-semibold",children:" Back to Welcome"})]})})}),v.jsx(Dn,{path:"/create-league",element:v.jsx(ui,{children:v.jsx(zM,{})})}),v.jsx(Dn,{path:"/join",element:v.jsx(ui,{children:v.jsx(dV,{})})}),v.jsx(Dn,{path:"/verify-email",element:v.jsx(vV,{})}),v.jsx(Dn,{path:"/select-league",element:v.jsx(ui,{children:v.jsx(yV,{})})}),v.jsx(Dn,{path:"/select-role",element:v.jsx(ui,{children:v.jsx(_V,{})})}),v.jsx(Dn,{path:"/onboarding/event",element:v.jsx(ui,{children:v.jsx(EV,{})})})]})})})})})}v4.createRoot(document.getElementById("root")).render(v.jsx(F.StrictMode,{children:v.jsx(AV,{})}));
